<!DOCTYPE html>
<html lang="ru">
<head>
        <meta charset="utf-8" />
        <title>üè† –ò–Ω—Ç–µ—Ä–Ω–µ—Ç –í—Å–µ–≥–æ üöó - gmock</title>
        <link rel="stylesheet" href="http://proiot.ru/blog/theme/css/main.css" />
        <link href="http://proiot.ru/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="üè† –ò–Ω—Ç–µ—Ä–Ω–µ—Ç –í—Å–µ–≥–æ üöó Atom Feed" />

        <script>
            (function(){
                var loc = window.location.href+'';
                if (loc.indexOf('https://')==0){
                    window.location.href = loc.replace('https://','http://');
                }
            })();
        </script>

        <!--[if IE]>
            <script src="https://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
<a rel="nofollow" href="http://github.com/mazko">
<img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub" />
</a>
        <header id="banner" class="body">
                <h1><a href="http://proiot.ru/">üè† –ò–Ω—Ç–µ—Ä–Ω–µ—Ç –í—Å–µ–≥–æ üöó </a></h1>
                <nav><ul>
                    <li><a href="http://proiot.ru/blog/category/admin/">Admin</a></li>
                    <li><a href="http://proiot.ru/blog/category/electronics/">Electronics</a></li>
                    <li><a href="http://proiot.ru/blog/category/embedded/">Embedded</a></li>
                    <li><a href="http://proiot.ru/blog/category/iot/">IoT</a></li>
                    <li><a href="http://proiot.ru/blog/category/java/">Java</a></li>
                </ul></nav>
        </header><!-- /#banner -->



            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="http://proiot.ru/blog/posts/2012/10/07/manchesterskii-kod-dlia-chainikov/">–ú–∞–Ω—á–µ—Å—Ç–µ—Ä—Å–∫–∏–π –∫–æ–¥ –¥–ª—è —á–∞–π–Ω–∏–∫–æ–≤</a></h1>
<footer class="post-info">
        <abbr class="published" title="2012-10-07T00:00:00+03:00">
                –í—Å 07 –æ–∫—Ç—è–±—Ä—è 2012
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="http://proiot.ru/blog/author/oleg-mazko/">Oleg Mazko</a>
        </address>
<p>In <a href="http://proiot.ru/blog/category/embedded/">Embedded</a>.</p>
<p>tags: <a href="http://proiot.ru/blog/tag/tdd">TDD</a> <a href="http://proiot.ru/blog/tag/manchesterskii-kod">–ú–∞–Ω—á–µ—Å—Ç–µ—Ä—Å–∫–∏–π –∫–æ–¥</a> <a href="http://proiot.ru/blog/tag/gtest">gtest</a> <a href="http://proiot.ru/blog/tag/gmock">gmock</a> </p>
</footer><!-- /.post-info --><p><em>–ú–∞–Ω—á–µ—Å—Ç–µ—Ä—Å–∫–∏–π –ö–æ–¥</em> - —ç—Ç–æ —Å–∞–º–æ—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—â–∏–π—Å—è –¥–≤–æ–∏—á–Ω—ã–π –∫–æ–¥ –±–µ–∑ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–π —Å–æ—Å—Ç–∞–≤–ª—è—é—â–µ–π, –≤ –∫–æ—Ç–æ—Ä–æ–º –∑–Ω–∞—á–µ–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º–æ–≥–æ –±–∏—Ç–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º —Å–º–µ–Ω—ã –ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ —É—Ä–æ–≤–Ω—è –≤ —Å–µ—Ä–µ–¥–∏–Ω–µ –æ–±—É—Å–ª–æ–≤–ª–µ–Ω–Ω–æ–≥–æ –∑–∞—Ä–∞–Ω–µ–µ –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞. –ü–æ—Å–∫–æ–ª—å–∫—É –ª–æ–≥–∏—á–µ—Å–∫–∏—Ö —É—Ä–æ–≤–Ω–µ–π —É —Å–∞–º–æ–π –º–∞–ª–µ–Ω—å–∫–æ–π –µ–¥–∏–Ω–∏—Ü—ã –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ (–±–∏—Ç) –Ω–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –∏–∑–≤–µ—Å—Ç–Ω–æ –≤—Å–µ–≥–æ –¥–≤–∞ (1 –∏ 0),  –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ —Ç—É—Ç –Ω–µ–º–Ω–æ–≥–æ: –ª–∏–±–æ —Å–º–µ–Ω–∞ 1 =&gt; 0 –ª–∏–±–æ 0 =&gt; 1. –°–æ–≥–ª–∞—Å–Ω–æ –æ–±—â–µ–ø—Ä–∏–Ω—è—Ç—ã–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º –¥–ª—è <em>–ú–∞–Ω—á–µ—Å—Ç–µ—Ä—Å–∫–æ–≥–æ –∫–æ–¥–∞</em> –ø–µ—Ä–µ—Ö–æ–¥ –æ—Ç –Ω—É–ª—è –∫ –µ–¥–∏–Ω–∏—Ü–µ —Å—á–∏—Ç–∞–µ—Ç—Å—è 1, –∞ –µ—Å–ª–∏ –Ω–∞–æ–±–æ—Ä–æ—Ç, —Ç–æ 0. –ù–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –ø–æ—Å–ª–µ–¥–Ω–µ–µ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ - —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ —Ñ–æ—Ä–º–∞–ª—å–Ω–æ—Å—Ç—å - –≤–æ–ø—Ä–æ—Å –≤ —Ç–æ–º, —Å –∫–∞–∫–æ–π —Å—Ç–æ—Ä–æ–Ω—ã –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å ;-) –ì–ª–∞–≤–Ω–æ–µ, —á—Ç–æ–±—ã –∏ –ø—Ä–∏—ë–º–Ω–∏–∫ –∏ –ø–µ—Ä–µ–¥–∞—Ç—á–∏–∫ —Å–º–æ—Ç—Ä–µ–ª–∏ –Ω–∞ –∂–∏–∑–Ω—å –æ–¥–∏–Ω–∞–∫–æ–≤–æ.</p>
<p><img alt="–ö–æ–¥ –ú–∞–Ω—á–µ—Å—Ç–µ—Ä" src="http://proiot.ru/blog/posts/2012/10/07/manchesterskii-kod-dlia-chainikov/man_diagram.png" style="width:100%; border:1px solid #ddd;"></p>
<p>–í–≤–µ–¥–∏—Ç–µ —á–∏—Å–ª–æ –∏ –Ω–∞–∂–º–∏—Ç–µ "<strong>Encode Manchester!</strong>":</p>
<script type="text/javascript" src="http://proiot.ru/blog/posts/2012/10/07/manchesterskii-kod-dlia-chainikov/manchester.js"> </script>

<p>
<input maxlength="25" size="10" id="manchester_query" value="0x623" style="text-align: right; padding:.3em;" type="text"/>
<button type="button" style="padding:.2em;" onclick="manchester_encode_and_print();"><noscript><span style="color:red;">–í–∫–ª—é—á–∏—Ç–µ JavaScript ! </span></noscript>Encode Manchester!</button>
</p>

<p id="manchester_result">
</p>

<p>–¢–µ–ø–µ—Ä—å –¥–∞–≤–∞–π—Ç–µ –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–∏–º –Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫—É –∏ –ø–æ–ø—Ä–æ–±—É–µ–º –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏ –ø–µ—Ä–µ—á–∏—Å–ª–∏—Ç—å –æ—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ <em>–ú–∞–Ω—á–µ—Å—Ç–µ—Ä—Å–∫–∏–π –ö–æ–¥</em>:</p>
<ul>
<li>
<p>P–∞–∑–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –≤–¥–≤–æ–µ - —ç—Ç–æ –Ω–µ–≥–∞—Ç–∏–≤–Ω–æ —Å–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç–∏ –ø–µ—Ä–µ–¥–∞—á–∏</p>
</li>
<li>
<p>K–æ–ª–∏—á–µ—Å—Ç–≤–æ –ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –Ω—É–ª–µ–π –≤—Å–µ–≥–¥–∞ —Ä–∞–≤–Ω–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –µ–¥–∏–Ω–∏—Ü, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ —É —Ç–∞–∫–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞ –Ω–µ –±—É–¥–µ—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–π —Å–æ—Å—Ç–∞–≤–ª—è—é—â–µ–π - —ç—Ç–æ –∫—Ä–∞–π–Ω–µ –≤–∞–∂–Ω–æ –¥–ª—è —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∏—Ö —Ü–µ–ø–µ–π –∏ —Ä–∞–¥–∏–æ–≤–æ–ª–Ω</p>
</li>
<li>
<p>–ö–æ–º–±–∏–Ω–∞—Ü–∏—è –ª–æ–≥–∏—á–µ—Å–∫–∏—Ö —É—Ä–æ–≤–Ω–µ–π 11 –æ–¥–Ω–æ–∑–Ω–∞—á–Ω–æ –≥–æ–≤–æ—Ä–∏—Ç –æ –ø–æ—Å–ª–µ–¥–Ω–µ–º –ø—Ä–∏–Ω—è—Ç–æ–º 0, –∞ –∫–æ–º–±–∏–Ω–∞—Ü–∏—è 00, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ, –≥–æ–≤–æ—Ä–∏—Ç –æ 1. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –ø–æ—Å–ª–µ –æ–¥–Ω–æ–π –∏–∑ –Ω–∏—Ö –ø—Ä–∏—ë–º–Ω–∏–∫ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è</p>
</li>
<li>
<p>–ù–µ –º–æ–∂–µ—Ç –∏–¥—Ç–∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –±–æ–ª–µ–µ –¥–≤—É—Ö –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö –ª–æ–≥–∏—á–µ—Å–∫–∏—Ö —É—Ä–æ–≤–Ω–µ–π, —Ç.–µ. –∫–æ–º–±–∏–Ω–∞—Ü–∏—è —Ç–∏–ø–∞ 111 –∏–ª–∏ 000 –Ω–µ–≤–æ–∑–º–æ–∂–Ω–∞</p>
</li>
<li>
<p>–í –Ω–∞—á–∞–ª–µ –¥–∞–Ω–Ω—ã—Ö –∏ –≤ –∫–æ–Ω—Ü–µ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –¥–≤—É—Ö –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö –ª–æ–≥–∏—á–µ—Å–∫–∏—Ö —É—Ä–æ–≤–Ω–µ–π - —Ç–æ–ª—å–∫–æ 10 –∏–ª–∏ 01</p>
</li>
</ul>
<h3>–°–Ω–∞—á–∞–ª–∞ –ø–∏—à–µ–º —Ç–µ—Å—Ç</h3>
<p>–û –ø–æ–ª—å–∑–µ —Ç–µ—Å—Ç–æ–≤ –º–æ–∂–Ω–æ –ø–æ—á–∏—Ç–∞—Ç—å <a href="https://ru.wikipedia.org/wiki/%D0%9C%D0%BE%D0%B4%D1%83%D0%BB%D1%8C%D0%BD%D0%BE%D0%B5_%D1%82%D0%B5%D1%81%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5" rel="nofollow">—Ç—É—Ç</a>. –í –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ —Ä–µ—à–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–π –∑–∞–¥–∞—á–∏ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Ç–µ—Ö–Ω–∏–∫–∞ <strong>Mock</strong>-–æ–±—ä–µ–∫—Ç–æ–≤, –ø–æ—ç—Ç–æ–º—É –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–≤—è–∑–∫–∞ <strong>gtest</strong> (<a href="http://code.google.com/p/googletest-translations/w/list" rel="nofollow">Google Test</a>) + <strong>gmock</strong> (<a href="http://code.google.com/p/googletest-translations/w/list" rel="nofollow">Google Mocking Framework</a>). –í—Å—ë —ç—Ç–æ –¥–æ–±—Ä–æ –ø–æ—Å—Ç–∞–≤–ª—è—é—Ç—Å—è –≤ –∏—Å—Ö–æ–¥–Ω–∏–∫–∞—Ö, –ø–æ—ç—Ç–æ–º—É –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ –∫ —Å–∏—Å—Ç–µ–º–µ - —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π <strong>C</strong> / <strong>C++</strong> –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä, –Ω–∞–ø—Ä–∏–º–µ—Ä <strong>gcc g++</strong> –¥–ª—è <strong>Linux</strong> –∏–ª–∏ <strong>Visual Studio C++</strong> –¥–ª—è <strong>Windows</strong>. –¢–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç –ø—Ä–æ—Å—Ç–æ–µ –∫–æ–Ω—Å–æ–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –±—É–¥–µ—Ç —Å–æ–±–∏—Ä–∞—Ç—å—Å—è –≤–º–µ—Å—Ç–µ —Å —Ç–µ—Å—Ç–∞–º–∏ –∏ –∑–∞–ø—É—Å–∫–∞—Ç—å –∏—Ö:</p>
<p><em>/manchester/tests/gtest/main.cpp</em></p>
<div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&quot;gtest/gtest.h&quot;</span><span class="cp"></span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span><span class="o">*</span> <span class="n">argv</span><span class="p">[])</span> <span class="p">{</span>
    <span class="n">testing</span><span class="o">::</span><span class="n">InitGoogleTest</span><span class="p">(</span><span class="o">&amp;</span><span class="n">argc</span><span class="p">,</span> <span class="n">argv</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">RUN_ALL_TESTS</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>


<p>–¢–µ–ø–µ—Ä—å —Å–∞–º–∏ —Ç–µ—Å—Ç—ã. –ë–æ–ª–µ–µ –ø—Ä–æ—Å—Ç–æ–π –∑–∞–¥–∞—á–µ–π —è–≤–ª—è–µ—Ç—Å—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ <em>–ú–∞–Ω—á–µ—Å—Ç–µ—Ä—Å–∫–∏–π –ö–æ–¥</em> (<strong>encode</strong>), –ø–æ—ç—Ç–æ–º—É —Å –Ω–µ—ë, –ø–æ–∂–∞–ª—É–π, –∏ –Ω–∞—á–Ω—ë–º:</p>
<p><em>/manchester/tests/gtest/src/manchester/Man_Encode.cpp</em></p>
<div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;gtest/gtest.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;gmock/gmock.h&gt;</span><span class="cp"></span>

<span class="k">extern</span> <span class="s">&quot;C&quot;</span>
<span class="p">{</span>
    <span class="cp">#include</span> <span class="cpf">&quot;../../../../manchester/src/tx/Man_Encode.c&quot;</span><span class="cp"></span>
<span class="p">}</span>

<span class="k">class</span> <span class="nc">IManEncode</span> <span class="p">{</span>
    <span class="k">public</span><span class="o">:</span>
        <span class="k">virtual</span> <span class="kt">void</span> <span class="n">Man_Encode_One</span><span class="p">()</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">Man_Encode_Zero</span><span class="p">()</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* Mock implementation */</span>

<span class="n">ACTION_P2</span><span class="p">(</span><span class="n">Act_Inc_1</span><span class="p">,</span> <span class="n">T</span><span class="p">,</span> <span class="n">V</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">ON_CALL</span><span class="p">(</span><span class="o">*</span><span class="n">T</span><span class="p">,</span> <span class="n">Man_Encode_One</span><span class="p">())</span>
        <span class="p">.</span><span class="n">WillByDefault</span><span class="p">(</span><span class="n">Act_Inc_1</span><span class="p">(</span><span class="n">T</span><span class="p">,</span> <span class="n">testing</span><span class="o">::</span><span class="n">ByRef</span><span class="p">(</span><span class="o">++</span><span class="n">V</span><span class="p">)));</span>
<span class="p">}</span>

<span class="n">ACTION_P2</span><span class="p">(</span><span class="n">Act_Inc_0</span><span class="p">,</span> <span class="n">T</span><span class="p">,</span> <span class="n">V</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">ON_CALL</span><span class="p">(</span><span class="o">*</span><span class="n">T</span><span class="p">,</span> <span class="n">Man_Encode_Zero</span><span class="p">())</span>
        <span class="p">.</span><span class="n">WillByDefault</span><span class="p">(</span><span class="n">Act_Inc_0</span><span class="p">(</span><span class="n">T</span><span class="p">,</span> <span class="n">testing</span><span class="o">::</span><span class="n">ByRef</span><span class="p">(</span><span class="o">++</span><span class="n">V</span><span class="p">)));</span>
<span class="p">}</span>

<span class="k">class</span> <span class="nc">ManEncodeMock</span> <span class="o">:</span> <span class="k">public</span> <span class="n">IManEncode</span> <span class="p">{</span>
    <span class="k">public</span><span class="o">:</span>
        <span class="n">MOCK_METHOD0</span><span class="p">(</span><span class="n">Man_Encode_One</span><span class="p">,</span><span class="kt">void</span><span class="p">());</span>
        <span class="n">MOCK_METHOD0</span><span class="p">(</span><span class="n">Man_Encode_Zero</span><span class="p">,</span><span class="kt">void</span><span class="p">());</span>

        <span class="n">ManEncodeMock</span><span class="p">()</span> <span class="p">{</span>
            <span class="n">_total_1</span> <span class="o">=</span> <span class="n">_total_0</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="n">ON_CALL</span><span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">,</span> <span class="n">Man_Encode_One</span><span class="p">())</span>
                <span class="p">.</span><span class="n">WillByDefault</span><span class="p">(</span><span class="n">Act_Inc_1</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="n">testing</span><span class="o">::</span><span class="n">ByRef</span><span class="p">(</span><span class="n">_total_1</span><span class="p">)));</span>
            <span class="n">ON_CALL</span><span class="p">(</span><span class="o">*</span><span class="k">this</span><span class="p">,</span> <span class="n">Man_Encode_Zero</span><span class="p">())</span>
                <span class="p">.</span><span class="n">WillByDefault</span><span class="p">(</span><span class="n">Act_Inc_0</span><span class="p">(</span><span class="k">this</span><span class="p">,</span> <span class="n">testing</span><span class="o">::</span><span class="n">ByRef</span><span class="p">(</span><span class="n">_total_0</span><span class="p">)));</span>
        <span class="p">}</span>

        <span class="kt">void</span> <span class="n">Expect_Total_1_And_0_Eq</span><span class="p">(</span><span class="kt">int</span> <span class="n">total</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">EXPECT_EQ</span><span class="p">(</span><span class="n">_total_1</span><span class="p">,</span> <span class="n">total</span><span class="p">);</span>
            <span class="n">EXPECT_EQ</span><span class="p">(</span><span class="n">_total_0</span><span class="p">,</span> <span class="n">total</span><span class="p">);</span>
        <span class="p">}</span>

    <span class="k">private</span><span class="o">:</span>
        <span class="kt">int</span> <span class="n">_total_1</span><span class="p">,</span> <span class="n">_total_0</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* Fixture class for each test */</span>

<span class="k">class</span> <span class="nc">ManEncodeTest_F</span> <span class="o">:</span> <span class="k">public</span> <span class="n">testing</span><span class="o">::</span><span class="n">Test</span> <span class="p">{</span>
    <span class="k">public</span><span class="o">:</span>
        <span class="k">static</span> <span class="n">ManEncodeMock</span><span class="o">*</span> <span class="n">getMock</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="n">_ManEncodePtr</span><span class="p">;</span>
        <span class="p">}</span>

    <span class="k">protected</span><span class="o">:</span>
        <span class="k">virtual</span> <span class="kt">void</span> <span class="n">SetUp</span><span class="p">()</span> <span class="p">{</span>
            <span class="n">_ManEncodePtr</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">_ManEncode</span><span class="p">;</span>
        <span class="p">}</span>

    <span class="k">private</span><span class="o">:</span>
        <span class="n">ManEncodeMock</span> <span class="n">_ManEncode</span><span class="p">;</span>
        <span class="k">static</span> <span class="n">ManEncodeMock</span><span class="o">*</span> <span class="n">_ManEncodePtr</span><span class="p">;</span>    
<span class="p">};</span>

<span class="n">ManEncodeMock</span><span class="o">*</span> <span class="n">ManEncodeTest_F</span><span class="o">::</span><span class="n">_ManEncodePtr</span><span class="p">;</span>

<span class="cm">/* Man_Encode externs (events) */</span>

<span class="kt">void</span> <span class="nf">On_Man_Encode_One</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">ManEncodeTest_F</span><span class="o">::</span><span class="n">getMock</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">Man_Encode_One</span><span class="p">();</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">On_Man_Encode_Zero</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">ManEncodeTest_F</span><span class="o">::</span><span class="n">getMock</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">Man_Encode_Zero</span><span class="p">();</span>
<span class="p">}</span>

<span class="cm">/* 0 =&gt; 1010101010101010(manchester) */</span>

<span class="n">TEST_F</span><span class="p">(</span><span class="n">ManEncodeTest_F</span><span class="p">,</span> <span class="n">Send_0</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">testing</span><span class="o">::</span><span class="n">InSequence</span> <span class="n">s</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">8</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">EXPECT_CALL</span><span class="p">(</span><span class="o">*</span><span class="n">getMock</span><span class="p">(),</span> <span class="n">Man_Encode_One</span><span class="p">());</span> <span class="c1">// MSB</span>
        <span class="n">EXPECT_CALL</span><span class="p">(</span><span class="o">*</span><span class="n">getMock</span><span class="p">(),</span> <span class="n">Man_Encode_Zero</span><span class="p">());</span>
    <span class="p">}</span>

    <span class="n">Man_Encode</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>

    <span class="n">getMock</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">Expect_Total_1_And_0_Eq</span><span class="p">(</span><span class="mi">8</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/* 255(dec) =&gt; 11111111(bin) =&gt; 0101010101010101(manchester) */</span>

<span class="n">TEST_F</span><span class="p">(</span><span class="n">ManEncodeTest_F</span><span class="p">,</span> <span class="n">Send_255</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">testing</span><span class="o">::</span><span class="n">InSequence</span> <span class="n">s</span><span class="p">;</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">8</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">EXPECT_CALL</span><span class="p">(</span><span class="o">*</span><span class="n">getMock</span><span class="p">(),</span> <span class="n">Man_Encode_Zero</span><span class="p">());</span> <span class="c1">// MSB</span>
        <span class="n">EXPECT_CALL</span><span class="p">(</span><span class="o">*</span><span class="n">getMock</span><span class="p">(),</span> <span class="n">Man_Encode_One</span><span class="p">());</span>
    <span class="p">}</span>

    <span class="n">Man_Encode</span><span class="p">(</span><span class="mi">255</span><span class="p">);</span>

    <span class="n">getMock</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">Expect_Total_1_And_0_Eq</span><span class="p">(</span><span class="mi">8</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/* 170(dec) =&gt; 10101010(bin) =&gt; 0110011001100110(manchester) */</span>

<span class="n">TEST_F</span><span class="p">(</span><span class="n">ManEncodeTest_F</span><span class="p">,</span> <span class="n">Send_170</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">testing</span><span class="o">::</span><span class="n">InSequence</span> <span class="n">s</span><span class="p">;</span>
    <span class="n">EXPECT_CALL</span><span class="p">(</span><span class="o">*</span><span class="n">getMock</span><span class="p">(),</span> <span class="n">Man_Encode_Zero</span><span class="p">());</span> <span class="c1">// MSB</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">EXPECT_CALL</span><span class="p">(</span><span class="o">*</span><span class="n">getMock</span><span class="p">(),</span> <span class="n">Man_Encode_One</span><span class="p">()).</span><span class="n">Times</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
        <span class="n">EXPECT_CALL</span><span class="p">(</span><span class="o">*</span><span class="n">getMock</span><span class="p">(),</span> <span class="n">Man_Encode_Zero</span><span class="p">()).</span><span class="n">Times</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="n">EXPECT_CALL</span><span class="p">(</span><span class="o">*</span><span class="n">getMock</span><span class="p">(),</span> <span class="n">Man_Encode_One</span><span class="p">()).</span><span class="n">Times</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
    <span class="n">EXPECT_CALL</span><span class="p">(</span><span class="o">*</span><span class="n">getMock</span><span class="p">(),</span> <span class="n">Man_Encode_Zero</span><span class="p">());</span>

    <span class="n">Man_Encode</span><span class="p">(</span><span class="mi">170</span><span class="p">);</span>

    <span class="n">getMock</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">Expect_Total_1_And_0_Eq</span><span class="p">(</span><span class="mi">8</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/* 85(dec) =&gt; 01010101(bin) =&gt; 1001100110011001(manchester) */</span>

<span class="n">TEST_F</span><span class="p">(</span><span class="n">ManEncodeTest_F</span><span class="p">,</span> <span class="n">Send_85</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">testing</span><span class="o">::</span><span class="n">InSequence</span> <span class="n">s</span><span class="p">;</span>
    <span class="n">EXPECT_CALL</span><span class="p">(</span><span class="o">*</span><span class="n">getMock</span><span class="p">(),</span> <span class="n">Man_Encode_One</span><span class="p">());</span> <span class="c1">// MSB</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">EXPECT_CALL</span><span class="p">(</span><span class="o">*</span><span class="n">getMock</span><span class="p">(),</span> <span class="n">Man_Encode_Zero</span><span class="p">()).</span><span class="n">Times</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
        <span class="n">EXPECT_CALL</span><span class="p">(</span><span class="o">*</span><span class="n">getMock</span><span class="p">(),</span> <span class="n">Man_Encode_One</span><span class="p">()).</span><span class="n">Times</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="n">EXPECT_CALL</span><span class="p">(</span><span class="o">*</span><span class="n">getMock</span><span class="p">(),</span> <span class="n">Man_Encode_Zero</span><span class="p">()).</span><span class="n">Times</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
    <span class="n">EXPECT_CALL</span><span class="p">(</span><span class="o">*</span><span class="n">getMock</span><span class="p">(),</span> <span class="n">Man_Encode_One</span><span class="p">());</span>

    <span class="n">Man_Encode</span><span class="p">(</span><span class="mi">85</span><span class="p">);</span>

    <span class="n">getMock</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">Expect_Total_1_And_0_Eq</span><span class="p">(</span><span class="mi">8</span><span class="p">);</span>
<span class="p">}</span>

<span class="cm">/* 84(dec) =&gt; 01010100(bin) =&gt; 1001100110011010(manchester) */</span>

<span class="n">TEST_F</span><span class="p">(</span><span class="n">ManEncodeTest_F</span><span class="p">,</span> <span class="n">Send_84</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">testing</span><span class="o">::</span><span class="n">InSequence</span> <span class="n">s</span><span class="p">;</span>
    <span class="n">EXPECT_CALL</span><span class="p">(</span><span class="o">*</span><span class="n">getMock</span><span class="p">(),</span> <span class="n">Man_Encode_One</span><span class="p">());</span> <span class="c1">// MSB</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">EXPECT_CALL</span><span class="p">(</span><span class="o">*</span><span class="n">getMock</span><span class="p">(),</span> <span class="n">Man_Encode_Zero</span><span class="p">()).</span><span class="n">Times</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
        <span class="n">EXPECT_CALL</span><span class="p">(</span><span class="o">*</span><span class="n">getMock</span><span class="p">(),</span> <span class="n">Man_Encode_One</span><span class="p">()).</span><span class="n">Times</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="n">EXPECT_CALL</span><span class="p">(</span><span class="o">*</span><span class="n">getMock</span><span class="p">(),</span> <span class="n">Man_Encode_Zero</span><span class="p">());</span>
    <span class="n">EXPECT_CALL</span><span class="p">(</span><span class="o">*</span><span class="n">getMock</span><span class="p">(),</span> <span class="n">Man_Encode_One</span><span class="p">());</span>
    <span class="n">EXPECT_CALL</span><span class="p">(</span><span class="o">*</span><span class="n">getMock</span><span class="p">(),</span> <span class="n">Man_Encode_Zero</span><span class="p">());</span>

    <span class="n">Man_Encode</span><span class="p">(</span><span class="mi">84</span><span class="p">);</span>

    <span class="n">getMock</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">Expect_Total_1_And_0_Eq</span><span class="p">(</span><span class="mi">8</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>


<p>–í—Å–µ —Ç–µ—Å—Ç—ã –ø–æ–º–µ—â–µ–Ω—ã –≤ –º–∞–∫—Ä–æ—Å <code>TEST_F()</code>. –í –Ω–∞—á–∞–ª–µ —Ç–µ—Å—Ç–∞ —Å –ø–æ–º–æ—â—å—é <code>EXPECT_CALL()</code> –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –æ–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ. –í –ø—Ä–æ—Ü–µ—Å—Å–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è <em>0 =&gt; 1010101010101010</em> –∏ –ø—Ä–∏ —É—Å–ª–æ–≤–∏–∏, —á—Ç–æ —Å—Ç–∞—Ä—à–∏–π –±–∏—Ç –∏–¥—ë—Ç –ø–µ—Ä–≤—ã–º (<em>MSB</em>), –æ–∂–∏–¥–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π –≤—ã–∑–æ–≤ –º–µ—Ç–æ–¥–æ–≤ <code>On_Man_Encode_One()</code>  –∏ <code>On_Man_Encode_Zero()</code> –∏ —Ç–∞–∫ –≤–æ—Å–µ–º—å —Ä–∞–∑. –ü–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –æ–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –æ–ø–∏—Å–∞–Ω–æ, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–∑–≤–∞—Ç—å –ø—Ä–æ–≤–µ—Ä—è–µ–º—ã–π –º–µ—Ç–æ–¥ <code>Man_Encode()</code>. –ï—Å–ª–∏ —Ä–µ–∞–ª—å–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç –æ–∂–∏–¥–∞–µ–º–æ–≥–æ, –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤ –±—É–¥–µ—Ç —Å–æ–æ–±—â–µ–Ω–æ –æ–± –æ—à–∏–±–∫–µ. –í –∫–æ–Ω—Ü–µ –∫–∞–∂–¥–æ–≥–æ —Ç–µ—Å—Ç–∞ —Ç–∞–∫–∂–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ª–æ–≤–∏—è, —á—Ç–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω—É–ª–µ–π —Ä–∞–≤–Ω–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –µ–¥–∏–Ω–∏—Ü.</p>
<p>–ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ <em>–ú–∞–Ω—á–µ—Å—Ç–µ—Ä—Å–∫–∏–π –ö–æ–¥</em> –æ—á–µ–Ω—å –ª–µ–≥–∫–æ:</p>
<p><em>/manchester/src/tx/Man_Encode.c</em></p>
<div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&quot;Man_Encode.h&quot;</span><span class="cp"></span>

<span class="cm">/********************************************************************</span>
<span class="cm"> *      Function Name:  Man_Encode                                  *</span>
<span class="cm"> *      Return Value:   no                                          *</span>
<span class="cm"> *      Parameters:     character to transmit                       *</span>
<span class="cm"> *      Description:    Convert char to Manchester Code (2 chars)   *</span>
<span class="cm"> *                      MSB is first to convert                     *</span>
<span class="cm"> ********************************************************************/</span>

<span class="kt">void</span> <span class="nf">Man_Encode</span><span class="p">(</span><span class="k">register</span> <span class="kt">char</span> <span class="n">character</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">register</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">bitcount</span> <span class="o">=</span> <span class="mi">8</span><span class="p">;</span>

    <span class="k">while</span> <span class="p">(</span><span class="n">bitcount</span><span class="o">--</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">character</span> <span class="o">&amp;</span> <span class="mh">0x80</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">On_Man_Encode_Zero</span><span class="p">();</span>
            <span class="n">On_Man_Encode_One</span><span class="p">();</span>

        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="n">On_Man_Encode_One</span><span class="p">();</span>
            <span class="n">On_Man_Encode_Zero</span><span class="p">();</span>
        <span class="p">}</span>
        <span class="n">character</span> <span class="o">&lt;&lt;=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<p>–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –æ–±—Ä–∞—Ç–Ω–æ–π –∑–∞–¥–∞—á–∏ - –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ <em>–ú–∞–Ω—á–µ—Å—Ç–µ—Ä—Å–∫–æ–≥–æ –ö–æ–¥–∞</em> –≤ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–ª–æ–∂–Ω–µ–µ. –ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å—Å—è —Å –ø—Ä–∏—ë–º–Ω–∏–∫–æ–º —Å–∏–∏–≥–Ω–∞–ª–∞. –í —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Ç–µ—Å—Ç–æ–≤ –Ω–∞—Å –æ—Å–æ–±–æ –Ω–µ –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç –∫–∞–∫ –∏–º–µ–Ω–Ω–æ –ø—Ä–∏—ë–º–Ω–∏–∫ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è –∏ –≤ –∫–∞–∫–æ–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –±—É–¥—É—Ç –≤—ã–∑–≤–∞–Ω—ã(–µ—Å–ª–∏ –≤–æ–æ–±—â–µ –±—É–¥—É—Ç) <code>On_Man_Decode_Add_1()</code> –∏ <code>On_Man_Decode_Add_0()</code> - –¥–ª—è —ç—Ç–æ–π —Ü–µ–ª–∏ –æ–±–æ–∑–Ω–∞—á–∏–º –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ –æ–∂–∏–¥–∞–Ω–∏—è –∫–∞–∫ <code>testing::AtMost(1)</code>. –ü–æ—Å–ª–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ—Ü–µ—Å—Å –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è –º–æ–∂–Ω–æ —Ç–æ—á–Ω–æ —Å–ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞—Ç—å –∏ –æ–ø–∏—Å–∞—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –æ–∂–∏–¥–∞–Ω–∏—è —Å –ø–æ–º–æ—â—å—é <code>EXPECT_CALL()</code>. –¢–∞–∫–∂–µ –∫–∞–∫ –∏ –≤ –ø—Ä–µ–¥—ã–¥—É—â–µ–º —Å–ª—É—á–∞–µ –≤ –∫–æ–Ω—Ü–µ –∫–∞–∂–¥–æ–≥–æ —Ç–µ—Å—Ç–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–π —Å–æ—Å—Ç–∞–≤–ª—è—é—â–µ–π (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω—É–ª–µ–π –∏ –µ–¥–∏–Ω–∏—Ü –¥–æ–ª–∂–Ω–æ —Å–æ–≤–ø–∞–¥–∞—Ç—å).</p>
<p><em>/manchester/tests/gtest/src/manchester/Man_Decode.cpp</em></p>
<div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;gtest/gtest.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;gmock/gmock.h&gt;</span><span class="cp"></span>

<span class="k">extern</span> <span class="s">&quot;C&quot;</span>
<span class="p">{</span>
    <span class="cp">#include</span> <span class="cpf">&quot;../../../../manchester/src/rx/Man_Decode.c&quot;</span><span class="cp"></span>
<span class="p">}</span>

<span class="k">class</span> <span class="nc">IManDecode</span> <span class="p">{</span>
    <span class="k">public</span><span class="o">:</span>
        <span class="k">virtual</span> <span class="kt">void</span> <span class="n">Man_Dec_Add_1</span><span class="p">()</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="k">virtual</span> <span class="kt">void</span> <span class="nf">Man_Dec_Add_0</span><span class="p">()</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">};</span>

<span class="cm">/* Mock implementation */</span>

<span class="k">class</span> <span class="nc">ManDecodeMock</span> <span class="o">:</span> <span class="k">public</span> <span class="n">IManDecode</span> <span class="p">{</span>
    <span class="k">public</span><span class="o">:</span>
        <span class="n">MOCK_METHOD0</span><span class="p">(</span><span class="n">Man_Dec_Add_1</span><span class="p">,</span><span class="kt">void</span><span class="p">());</span>
        <span class="n">MOCK_METHOD0</span><span class="p">(</span><span class="n">Man_Dec_Add_0</span><span class="p">,</span><span class="kt">void</span><span class="p">());</span>
<span class="p">};</span>

<span class="cm">/* Fixture class for each test */</span>

<span class="k">class</span> <span class="nc">ManDecodeTest_F</span> <span class="o">:</span> <span class="k">public</span> <span class="n">testing</span><span class="o">::</span><span class="n">Test</span> <span class="p">{</span>
    <span class="k">public</span><span class="o">:</span>
        <span class="k">static</span> <span class="n">ManDecodeMock</span><span class="o">*</span> <span class="n">getMock</span><span class="p">()</span> <span class="p">{</span>
            <span class="k">return</span> <span class="n">_ManDecodePtr</span><span class="p">;</span>
        <span class="p">}</span>

    <span class="k">protected</span><span class="o">:</span>
        <span class="k">virtual</span> <span class="kt">void</span> <span class="n">SetUp</span><span class="p">()</span> <span class="p">{</span>
            <span class="n">_total_1</span> <span class="o">=</span> <span class="n">_total_0</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="n">_ManDecodePtr</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">_ManDecode</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="kt">void</span> <span class="n">Expect_Total_1_And_0_Eq</span><span class="p">(</span><span class="kt">int</span> <span class="n">total</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">EXPECT_EQ</span><span class="p">(</span><span class="n">_total_1</span><span class="p">,</span> <span class="n">total</span><span class="p">);</span>
            <span class="n">EXPECT_EQ</span><span class="p">(</span><span class="n">_total_0</span><span class="p">,</span> <span class="n">total</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="kt">void</span> <span class="n">Perform_Stable_Zero</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">periods</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">_total_0</span> <span class="o">+=</span> <span class="n">periods</span><span class="p">;</span>
            <span class="n">Man_Decode_Stable_Zero</span><span class="p">(</span><span class="n">periods</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="kt">void</span> <span class="n">Perform_Stable_One</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">periods</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">_total_1</span> <span class="o">+=</span> <span class="n">periods</span><span class="p">;</span>
            <span class="n">Man_Decode_Stable_One</span><span class="p">(</span><span class="n">periods</span><span class="p">);</span>
        <span class="p">}</span>

    <span class="k">private</span><span class="o">:</span>
        <span class="n">ManDecodeMock</span> <span class="n">_ManDecode</span><span class="p">;</span>
        <span class="k">static</span> <span class="n">ManDecodeMock</span><span class="o">*</span> <span class="n">_ManDecodePtr</span><span class="p">;</span>
        <span class="kt">int</span> <span class="n">_total_1</span><span class="p">,</span> <span class="n">_total_0</span><span class="p">;</span>
<span class="p">};</span>

<span class="n">ManDecodeMock</span><span class="o">*</span> <span class="n">ManDecodeTest_F</span><span class="o">::</span><span class="n">_ManDecodePtr</span><span class="p">;</span>

<span class="cm">/* Man_Decode externs (events) */</span>

<span class="kt">void</span> <span class="nf">On_Man_Decode_Add_1</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">ManDecodeTest_F</span><span class="o">::</span><span class="n">getMock</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">Man_Dec_Add_1</span><span class="p">();</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">On_Man_Decode_Add_0</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">ManDecodeTest_F</span><span class="o">::</span><span class="n">getMock</span><span class="p">()</span><span class="o">-&gt;</span><span class="n">Man_Dec_Add_0</span><span class="p">();</span>
<span class="p">}</span>

<span class="cm">/* Helpers for TEST_F */</span>

<span class="cp">#define EXPECT_MAN_SYNCH(x,y)                               \</span>
<span class="cp">    EXPECT_CALL(*getMock(), Man_Dec_Add_##x())              \</span>
<span class="cp">        .Times(testing::AtMost(1)); </span><span class="cm">/* Clay? */</span><span class="cp">             \</span>
<span class="cp">    EXPECT_CALL(*getMock(), Man_Dec_Add_##y())              \</span>
<span class="cp">        .Times(testing::AtMost(1)); </span><span class="cm">/* Clay? */</span><span class="cp">             \</span>
<span class="cp">    EXPECT_CALL(*getMock(), Man_Dec_Add_##x()); </span><span class="cm">/* Sync  */</span><span class="cp"> \</span>
<span class="cp">    EXPECT_CALL(*getMock(), Man_Dec_Add_##y())  </span><span class="cm">/* Sync  */</span><span class="cp"> \</span>

<span class="cp">#define PERFORM_MAN_SYNCH(x,y)                               \</span>
<span class="cp">    Perform_Stable_##x(1);  </span><span class="cm">/* Clay balance (1 - 1 = 0) */</span><span class="cp">   \</span>
<span class="cp">    Perform_Stable_##y(2);  </span><span class="cm">/* Sync balance (2 - 2 = 0) */</span><span class="cp">   \</span>
<span class="cp">    Perform_Stable_##x(2);  </span><span class="cm">/* Sync */</span><span class="cp">                       \</span>
<span class="cp">    Perform_Stable_##y(1)   </span><span class="cm">/* Clay */</span><span class="cp">                       \</span>

<span class="cm">/* 1010101010101010(manchester) =&gt; 0 */</span>

<span class="n">TEST_F</span><span class="p">(</span><span class="n">ManDecodeTest_F</span><span class="p">,</span> <span class="n">Decode_0</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">testing</span><span class="o">::</span><span class="n">InSequence</span> <span class="n">s</span><span class="p">;</span>
    <span class="n">EXPECT_MAN_SYNCH</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>
    <span class="n">EXPECT_CALL</span><span class="p">(</span><span class="o">*</span><span class="n">getMock</span><span class="p">(),</span> <span class="n">Man_Dec_Add_0</span><span class="p">()).</span><span class="n">Times</span><span class="p">(</span><span class="mi">8</span><span class="p">);</span>

    <span class="n">PERFORM_MAN_SYNCH</span><span class="p">(</span><span class="n">One</span><span class="p">,</span> <span class="n">Zero</span><span class="p">);</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">8</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">Perform_Stable_One</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
        <span class="n">Perform_Stable_Zero</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="n">Expect_Total_1_And_0_Eq</span><span class="p">(</span><span class="mi">11</span><span class="p">);</span> <span class="c1">// Sync(3) + Byte(8)</span>
<span class="p">}</span>

<span class="cm">/* 0101010101010101(manchester) =&gt; 11111111(bin) =&gt; 255(dec) */</span>

<span class="n">TEST_F</span><span class="p">(</span><span class="n">ManDecodeTest_F</span><span class="p">,</span> <span class="n">Decode_255</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">testing</span><span class="o">::</span><span class="n">InSequence</span> <span class="n">s</span><span class="p">;</span>
    <span class="n">EXPECT_MAN_SYNCH</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>
    <span class="n">EXPECT_CALL</span><span class="p">(</span><span class="o">*</span><span class="n">getMock</span><span class="p">(),</span> <span class="n">Man_Dec_Add_1</span><span class="p">()).</span><span class="n">Times</span><span class="p">(</span><span class="mi">8</span><span class="p">);</span>

    <span class="n">PERFORM_MAN_SYNCH</span><span class="p">(</span><span class="n">Zero</span><span class="p">,</span> <span class="n">One</span><span class="p">);</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">8</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">Perform_Stable_Zero</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
        <span class="n">Perform_Stable_One</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="n">Expect_Total_1_And_0_Eq</span><span class="p">(</span><span class="mi">11</span><span class="p">);</span> <span class="c1">// Sync(3) + Byte(8)</span>
<span class="p">}</span>

<span class="cm">/* 0110011001100110(manchester) =&gt; 10101010(bin) =&gt; 170(dec) */</span>

<span class="n">TEST_F</span><span class="p">(</span><span class="n">ManDecodeTest_F</span><span class="p">,</span> <span class="n">Decode_170</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">testing</span><span class="o">::</span><span class="n">InSequence</span> <span class="n">s</span><span class="p">;</span>
    <span class="n">EXPECT_MAN_SYNCH</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">4</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">EXPECT_CALL</span><span class="p">(</span><span class="o">*</span><span class="n">getMock</span><span class="p">(),</span> <span class="n">Man_Dec_Add_1</span><span class="p">());</span>
        <span class="n">EXPECT_CALL</span><span class="p">(</span><span class="o">*</span><span class="n">getMock</span><span class="p">(),</span> <span class="n">Man_Dec_Add_0</span><span class="p">());</span>
    <span class="p">}</span>

    <span class="n">PERFORM_MAN_SYNCH</span><span class="p">(</span><span class="n">Zero</span><span class="p">,</span> <span class="n">One</span><span class="p">);</span>
    <span class="n">Perform_Stable_Zero</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">Perform_Stable_One</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
        <span class="n">Perform_Stable_Zero</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="n">Perform_Stable_One</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
    <span class="n">Perform_Stable_Zero</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>

    <span class="n">Expect_Total_1_And_0_Eq</span><span class="p">(</span><span class="mi">11</span><span class="p">);</span> <span class="c1">// Sync(3) + Byte(8)</span>
<span class="p">}</span>

<span class="cm">/* 1001100110011001(manchester) =&gt; 01010101(bin) =&gt; 85(dec) */</span>

<span class="n">TEST_F</span><span class="p">(</span><span class="n">ManDecodeTest_F</span><span class="p">,</span> <span class="n">Decode_85</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">testing</span><span class="o">::</span><span class="n">InSequence</span> <span class="n">s</span><span class="p">;</span>
    <span class="n">EXPECT_MAN_SYNCH</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">4</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">EXPECT_CALL</span><span class="p">(</span><span class="o">*</span><span class="n">getMock</span><span class="p">(),</span> <span class="n">Man_Dec_Add_0</span><span class="p">());</span>
        <span class="n">EXPECT_CALL</span><span class="p">(</span><span class="o">*</span><span class="n">getMock</span><span class="p">(),</span> <span class="n">Man_Dec_Add_1</span><span class="p">());</span>
    <span class="p">}</span>

    <span class="n">PERFORM_MAN_SYNCH</span><span class="p">(</span><span class="n">One</span><span class="p">,</span> <span class="n">Zero</span><span class="p">);</span>
    <span class="n">Perform_Stable_One</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">Perform_Stable_Zero</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
        <span class="n">Perform_Stable_One</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="n">Perform_Stable_Zero</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
    <span class="n">Perform_Stable_One</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>

    <span class="n">Expect_Total_1_And_0_Eq</span><span class="p">(</span><span class="mi">11</span><span class="p">);</span> <span class="c1">// Sync(3) + Byte(8)</span>
<span class="p">}</span>

<span class="cm">/* 1001100110011010(manchester) =&gt; 84(dec) =&gt; 01010100(bin) */</span>

<span class="n">TEST_F</span><span class="p">(</span><span class="n">ManDecodeTest_F</span><span class="p">,</span> <span class="n">Decode_84</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">testing</span><span class="o">::</span><span class="n">InSequence</span> <span class="n">s</span><span class="p">;</span>
    <span class="n">EXPECT_MAN_SYNCH</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">);</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">EXPECT_CALL</span><span class="p">(</span><span class="o">*</span><span class="n">getMock</span><span class="p">(),</span> <span class="n">Man_Dec_Add_0</span><span class="p">());</span>
        <span class="n">EXPECT_CALL</span><span class="p">(</span><span class="o">*</span><span class="n">getMock</span><span class="p">(),</span> <span class="n">Man_Dec_Add_1</span><span class="p">());</span>
    <span class="p">}</span>
    <span class="n">EXPECT_CALL</span><span class="p">(</span><span class="o">*</span><span class="n">getMock</span><span class="p">(),</span> <span class="n">Man_Dec_Add_0</span><span class="p">()).</span><span class="n">Times</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>

    <span class="n">PERFORM_MAN_SYNCH</span><span class="p">(</span><span class="n">One</span><span class="p">,</span> <span class="n">Zero</span><span class="p">);</span>
    <span class="n">Perform_Stable_One</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
    <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">3</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">Perform_Stable_Zero</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
        <span class="n">Perform_Stable_One</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="n">Perform_Stable_Zero</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
    <span class="n">Perform_Stable_One</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
    <span class="n">Perform_Stable_Zero</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>

    <span class="n">Expect_Total_1_And_0_Eq</span><span class="p">(</span><span class="mi">11</span><span class="p">);</span> <span class="c1">// Sync(3) + Byte(8)</span>
<span class="p">}</span>
</pre></div>


<p>–ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è <em>–ú–∞–Ω—á–µ—Å—Ç–µ—Ä—Å–∫–æ–≥–æ –∫–æ–¥–∞</em>:</p>
<p><em>/manchester/src/rx/Man_Decode.c</em></p>
<div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&quot;Man_Decode.h&quot;</span><span class="cp"></span>

<span class="k">static</span> <span class="kt">bool</span> <span class="n">ds_LB</span><span class="p">;</span>

<span class="cm">/********************************************************************</span>
<span class="cm"> *      Function Name:  Man_Decode_Stable_Zero                      *</span>
<span class="cm"> *      Return Value:   no                                          *</span>
<span class="cm"> *      Parameters:     Stable digital input periods. Ideal 1 or 2  *</span>
<span class="cm"> *      Description:    Convert signal from Manchester Code.        *</span>
<span class="cm"> *                      Fire according On_Man_Decode_Add_1()        *</span>
<span class="cm"> *                      callback event.                             *</span>
<span class="cm"> ********************************************************************/</span>

<span class="kt">void</span> <span class="nf">Man_Decode_Stable_Zero</span><span class="p">(</span><span class="k">register</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">periods</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="n">periods</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="o">!--</span><span class="n">periods</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span> <span class="n">ds_LB</span> <span class="p">)</span> <span class="p">{</span>
                <span class="n">On_Man_Decode_Add_1</span><span class="p">();</span>
                <span class="n">ds_LB</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="o">!--</span><span class="n">periods</span> <span class="p">)</span> <span class="p">{</span>
            <span class="n">On_Man_Decode_Add_1</span><span class="p">();</span>
            <span class="n">ds_LB</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="cm">/********************************************************************</span>
<span class="cm"> *      Function Name:  Man_Decode_Stable_One                       *</span>
<span class="cm"> *      Return Value:   no                                          *</span>
<span class="cm"> *      Parameters:     Stable digital input periods. Ideal 1 or 2  *</span>
<span class="cm"> *      Description:    Convert signal from Manchester Code.        *</span>
<span class="cm"> *                      Fire according On_Man_Decode_Add_0()        *</span>
<span class="cm"> *                      callback event.                             *</span>
<span class="cm"> ********************************************************************/</span>

<span class="kt">void</span> <span class="nf">Man_Decode_Stable_One</span><span class="p">(</span><span class="k">register</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">periods</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span> <span class="n">periods</span> <span class="p">)</span> <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span> <span class="o">!--</span><span class="n">periods</span> <span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span> <span class="o">!</span><span class="n">ds_LB</span> <span class="p">)</span> <span class="p">{</span>
                <span class="n">On_Man_Decode_Add_0</span><span class="p">();</span>
                <span class="n">ds_LB</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
            <span class="p">}</span>
        <span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span> <span class="o">!--</span><span class="n">periods</span> <span class="p">)</span> <span class="p">{</span>
            <span class="n">On_Man_Decode_Add_0</span><span class="p">();</span>
            <span class="n">ds_LB</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<h3>–°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤</h3>
<p>–ï—Å–ª–∏ –í—ã —Ä–∞–±–æ—Ç–∞–µ—Ç–µ –≤ —Å–≤—è–∑–∫–µ <strong>Windows</strong> + <strong>Visual Studio</strong>, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Å–ª–µ–¥—É—é—â–µ–µ:</p>
<div class="highlight"><pre><span></span><span class="p">@</span><span class="k">set</span> <span class="nv">GTEST_HOME</span><span class="p">=</span>gtest-1.6.0 
<span class="p">@</span><span class="k">set</span> <span class="nv">GMOCK_HOME</span><span class="p">=</span>gmock-1.6.0

cl /EHsc /I<span class="nv">%GTEST_HOME%</span> /I<span class="nv">%GTEST_HOME%</span>/include -I<span class="nv">%GMOCK_HOME%</span> <span class="se">^</span>
<span class="se">-</span>I<span class="nv">%GMOCK_HOME%</span>/include main.cpp src/manchester/Man_Encode.cpp <span class="se">^</span>
<span class="se">s</span>rc/manchester/Man_Decode.cpp <span class="nv">%GTEST_HOME%</span>/src/gtest-all.cc <span class="se">^</span>
<span class="se">%</span>GMOCK_HOME%/src/gmock-all.cc

main.exe
</pre></div>


<p><img alt="Windows –°–∫—Ä–∏–Ω—à–æ—Ç" src="http://proiot.ru/blog/posts/2012/10/07/manchesterskii-kod-dlia-chainikov/win-gtest-gmock-run.png" style="width:100%; border:1px solid grey;"></p>
<p>–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ <strong>Linux</strong> + <strong>gcc g++</strong>:</p>
<div class="highlight"><pre><span></span><span class="nv">GTEST_HOME</span><span class="o">=</span>gtest-1.6.0
<span class="nv">GMOCK_HOME</span><span class="o">=</span>gmock-1.6.0

g++ -g -I<span class="nv">$GTEST_HOME</span> -I<span class="nv">$GTEST_HOME</span>/include -I<span class="nv">$GMOCK_HOME</span> <span class="se">\</span>
-I<span class="nv">$GMOCK_HOME</span>/include -pthread main.cpp src/manchester/Man_Encode.cpp <span class="se">\</span>
src/manchester/Man_Decode.cpp <span class="nv">$GTEST_HOME</span>/src/gtest-all.cc <span class="se">\</span>
<span class="nv">$GMOCK_HOME</span>/src/gmock-all.cc

./a.out
</pre></div>


<p><img alt="Linux –°–∫—Ä–∏–Ω—à–æ—Ç" src="http://proiot.ru/blog/posts/2012/10/07/manchesterskii-kod-dlia-chainikov/suse_tests_run.png" style="width:100%; border:1px solid grey;"></p>
<p>–¢–µ—Å—Ç–æ–≤ –º–Ω–æ–≥–æ –Ω–µ –±—ã–≤–∞–µ—Ç. –ù–∞–ø—Ä–∏–º–µ—Ä, –±—ã–ª–æ –±—ã –Ω–µ–ø–ª–æ—Ö–æ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –¥–ª—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏–∑ –¥–≤—É—Ö –±–∞–π—Ç –∏ –±–æ–ª–µ–µ, –∏–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫—É —É—Å–ª–æ–≤–∏—è –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –Ω–µ–≤–æ–∑–º–æ–∂–Ω—ã—Ö –¥–ª—è –ú–∞–Ω—á–µ—Å—Ç–µ—Ä—Å–∫–æ–≥–æ –ö–æ–¥–∞ –∫–æ–º–±–∏–Ω–∞—Ü–∏–π - –Ω–∞–ø—Ä–∏–º–µ—Ä 111 –∏–ª–∏ 000. –ß–µ–º –±–æ–ª—å—à–µ —Ç–µ—Ä–ø–µ–Ω–∏—è –∏ –≤—ã–¥–µ—Ä–∂–∫–∏ –Ω–∞ —ç—Ç–æ–º —ç—Ç–∞–ø–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ - —Ç–µ–º –∫—Ä–µ–ø—á–µ –±—É–¥–µ—Ç —Å–æ–Ω –ø–æ—Å–ª–µ –µ—ë —Å–¥–∞—á–∏ –≤ —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏—é.</p>
<h3>–ü—Ä–∞–∫—Ç–∏–∫–∞</h3>
<p>–¢–µ—Å—Ç—ã —ç—Ç–æ —Ö–æ—Ä–æ—à–æ, –Ω–æ –ø–æ–∫–∞ —á—Ç–æ –≤—Å—ë —ç—Ç–æ –±–æ–ª—å—à–µ –ø–æ—Ö–æ–∂–µ –Ω–∞ —Ç–µ–æ—Ä–∏—é - –∞ —Ç–µ–æ—Ä–∏—è –±–µ–∑ –ø—Ä–∞–∫—Ç–∏–∫–∏, –∫–∞–∫ –∏–∑–≤–µ—Å—Ç–Ω–æ, —Å–∫—É—á–Ω–∞. –ü–æ—ç—Ç–æ–º—É, –µ—Å–ª–∏ –í—ã –¥–æ—á–∏—Ç–∞–ª–∏ –¥–æ —ç—Ç–æ–≥–æ –º–æ–º–µ–Ω—Ç–∞, –º–∏–ª–æ—Å—Ç–∏ –ø—Ä–æ—à—É –ø–æ—Å–µ—Ç–∏—Ç—å <a href="http://proiot.ru/blog/posts/2012/10/07/ispolzovanie-manchesterskogo-koda-na-primere/">—Å–ª–µ–¥—É—é—â–∏–π</a> –ø–æ—Å—Ç, –≤ –∫–æ—Ç–æ—Ä–æ–º –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø—Ä–∏—ë–º–Ω–∏–∫–∞ –∏ –ø–µ—Ä–µ–¥–∞—Ç—á–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–≤–∞ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞, –∞ —Å–∞–º –ø—Ä–æ—Ü–µ—Å—Å —ç–º—É–ª–∏—Ä—É–µ—Ç—Å—è –≤ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π —Å—Ä–µ–¥–µ, –∫–æ—Ç–æ—Ä–∞—è —É–º–µ–µ—Ç –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏–µ —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∏—Ö —Ü–µ–ø–µ–π.</p>
<p>–ò—Å—Ö–æ–¥–Ω–∏–∫–∏ –∫ —Ç–µ–∫—É—â–µ–º—É –ø–æ—Å—Ç—É –Ω–∞ <a href="https://github.com/mazko/Manchester-Code" rel="nofollow">GitHub</a>.</p><p>There are <a href="http://proiot.ru/blog/posts/2012/10/07/manchesterskii-kod-dlia-chainikov/#disqus_thread">comments</a>.</p>                </article>
            </aside><!-- /#featured -->
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a rel="nofollow" href="http://getpelican.com/">Pelican</a></li>
                            <li><a rel="nofollow" href="http://python.org/">Python.org</a></li>
                            <li><a rel="nofollow" href="http://jinja.pocoo.org/">Jinja2</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="http://proiot.ru/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>

                            <li><a rel="nofollow" href="http://github.com/mazko">github</a></li>
                            <li><a rel="nofollow" href="http://linkedin.com/in/mazko">linkedin</a></li>
                            <li><a rel="nofollow" href="http://stackoverflow.com/users/281102/oleg-mazko">stackoverflow</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

<script type="text/javascript">
    var disqus_shortname = 'mazko';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'https://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
</body>
</html>