<!DOCTYPE html>
<html lang="ru">
<head>
        <meta charset="utf-8" />
        <title>üè† –ò–Ω—Ç–µ—Ä–Ω–µ—Ç –í—Å–µ–≥–æ üöó - –ò–¥–∏–æ–º–∞</title>
        <link rel="stylesheet" href="http://proiot.ru/blog/theme/css/main.css" />
        <link href="http://proiot.ru/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="üè† –ò–Ω—Ç–µ—Ä–Ω–µ—Ç –í—Å–µ–≥–æ üöó Atom Feed" />

        <script>
            (function(){
                var loc = window.location.href+'';
                if (loc.indexOf('https://')==0){
                    window.location.href = loc.replace('https://','http://');
                }
            })();
        </script>

        <!--[if IE]>
            <script src="https://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
<a rel="nofollow" href="http://github.com/mazko">
<img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub" />
</a>
        <header id="banner" class="body">
                <h1><a href="http://proiot.ru/">üè† –ò–Ω—Ç–µ—Ä–Ω–µ—Ç –í—Å–µ–≥–æ üöó </a></h1>
                <nav><ul>
                    <li><a href="http://proiot.ru/blog/category/admin/">Admin</a></li>
                    <li><a href="http://proiot.ru/blog/category/electronics/">Electronics</a></li>
                    <li><a href="http://proiot.ru/blog/category/embedded/">Embedded</a></li>
                    <li><a href="http://proiot.ru/blog/category/iot/">IoT</a></li>
                    <li><a href="http://proiot.ru/blog/category/java/">Java</a></li>
                </ul></nav>
        </header><!-- /#banner -->



            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="http://proiot.ru/blog/posts/2012/10/08/idiomy-v-ansi-c/">–ò–¥–∏–æ–º—ã –≤ ANSI C</a></h1>
<footer class="post-info">
        <abbr class="published" title="2012-10-08T00:00:00+03:00">
                –ü–Ω 08 –æ–∫—Ç—è–±—Ä—è 2012
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="http://proiot.ru/blog/author/oleg-mazko/">Oleg Mazko</a>
        </address>
<p>In <a href="http://proiot.ru/blog/category/embedded/">Embedded</a>.</p>
<p>tags: <a href="http://proiot.ru/blog/tag/pattern">–ü–∞—Ç—Ç–µ—Ä–Ω</a> <a href="http://proiot.ru/blog/tag/idioma">–ò–¥–∏–æ–º–∞</a> </p>
</footer><!-- /.post-info --><p><em>–®–∞–±–ª–æ–Ω—ã –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</em>, –æ–Ω–∏ –∂–µ –ø—Ä–æ—Å—Ç–æ <a href="http://ru.wikipedia.org/wiki/%D0%A8%D0%B0%D0%B1%D0%BB%D0%BE%D0%BD_%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F" rel="nofollow">–ø–∞—Ç—Ç–µ—Ä–Ω—ã</a>, –º–æ–∂–Ω–æ –≤—Å—Ç—Ä–µ—Ç–∏—Ç—å –Ω–∞ –≤—Å–µ—Ö —É—Ä–æ–≤–Ω—è—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è. ¬´–ù–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ¬ª —à–∞–±–ª–æ–Ω—ã –Ω–∞–∑—ã–≤–∞—é—Ç—Å—è <strong>–∏–¥–∏–æ–º–∞–º–∏</strong>, –ø–æ—Å–∫–æ–ª—å–∫—É –æ–Ω–∏ –∑–∞–≤–∏—Å—è—Ç –æ—Ç –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–µ–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —è–∑—ã–∫–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è. –í –¥–∞–Ω–Ω–æ–π —Å—Ç–∞—Ç—å–µ –æ–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –ø–æ–¥–±–æ—Ä–∫–∞ —Ç–∞–∫–∏—Ö –≤–æ—Ç <strong>–∏–¥–∏–æ–º</strong> –≤ —á–∏—Å—Ç–æ–º <strong>–°</strong> (<em>ANSI C</em>), –ø–æ –±–æ–ª—å—à–µ–π —á–∞—Å—Ç–∏ —ç—Ç–æ –≤–æ–ª—å–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥ <a href="http://www.adampetersen.se/Idiomatic_expressions_in_C.pdf" rel="nofollow">Idiomatic Expressions in C</a> –æ—Ç <a href="http://www.adampetersen.se/articles.htm" rel="nofollow">Adam Petersen</a>.</p>
<p>–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é –∏–¥–∏–æ–º—ã –æ—á–µ–Ω—å —Ä–µ–¥–∫–æ –∏, –∫–∞–∫ –ø—Ä–∞–≤–∏–ª–æ, –≤—ã–±–æ—Ä–æ—á–Ω–æ –æ–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–µ –ø–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—é - –¥–∞–Ω–Ω—ã–π –º–∞—Ç–µ—Ä–∏–∞–ª –º–æ–∂–µ—Ç –ø–æ–∫–∞–∑–∞—Ç—å—Å—è –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å–ª–æ–∂–Ω—ã–º –¥–ª—è –Ω–æ–≤–∏—á–∫–æ–≤, –≤ —Ç–æ –∂–µ –≤—Ä–µ–º—è –ø—Ä–∏ –∏–∑–ª–æ–∂–µ–Ω–∏–∏ –±–æ–ª–µ–µ —Å–µ—Ä—å—ë–∑–Ω–æ–≥–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞ –∞–≤—Ç–æ—Ä—ã –ø–æ–¥—Ä–∞–∑—É–º–µ–≤–∞—é—Ç, —á—Ç–æ —á–∏—Ç–∞—Ç–µ–ª—å —Å–æ –≤—Å–µ–º —ç—Ç–∏–º —É–∂–µ –∑–Ω–∞–∫–æ–º. –ö–∞–∫ –±—ã —Ç–∞–º –Ω–∏ –±—ã–ª–æ, —è—Å–Ω–æ –æ–¥–Ω–æ - –¥–∞–∂–µ –µ—Å–ª–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –∏–¥–∏–æ–º—ã –≤ —Å–≤–æ–∏—Ö —Ä–∞–±–æ—Ç–∞—Ö, —ç—Ç–æ –µ—â—ë –Ω–µ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –æ–Ω –Ω–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å –Ω–∏–º–∏ –∑–Ω–∞–∫–æ–º —Ö–æ—Ç—è –±—ã –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –±–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –∏ –±—ã—Å—Ç—Ä–æ —Ä–∞–∑–±–∏—Ä–∞—Ç—å—Å—è –≤ —á—É–∂–æ–º –∫–æ–¥–µ.</p>
<p>–û–ø–∏—Å—ã–≤–∞–µ–º—ã–µ –≤ –¥–∞–Ω–Ω–æ–º –º–∞—Ç–µ—Ä–∏–∞–ª–µ –∏–¥–∏–æ–º—ã –º–æ–∂–Ω–æ —É—Å–ª–æ–≤–Ω–æ —Ä–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞ –¥–≤–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏:</p>
<ul>
<li>
<p><strong>–ò–¥–∏–æ–º—ã –¥–ª—è –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏</strong>: –ø–æ–º–æ–≥–∞—é—Ç –∏–∑–±–µ–∂–∞—Ç—å —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –æ—à–∏–±–æ–∫ –≤ <strong>–°</strong>. –ù–∞–ø—Ä–∏–º–µ—Ä, –∏–¥–∏–æ–º–∞ –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –°–û–°–¢–ê–í–ù–´–• –¢–ò–ü–û–í –° –ü–û–ú–û–©–¨–Æ {0} –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –Ω–∞–¥—ë–∂–Ω—ã–π –∏ –ø–µ—Ä–µ–Ω–æ—Å–∏–º—ã–π —Å–ø–æ—Å–æ–± –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä –∏ –º–∞—Å—Å–∏–≤–æ–≤.</p>
</li>
<li>
<p><strong>–ò–¥–∏–æ–º—ã –¥–ª—è –≤—ã—Ä–∞–∑–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏</strong>: –¥–µ–ª–∞—é—Ç –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –±–æ–ª–µ–µ —á–∏—Ç–∞–±–µ–ª—å–Ω—ã–º –∏ –ø–æ–Ω—è—Ç–Ω—ã–º, –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –±–æ–ª–µ–µ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–º, –∞ –ø—Ä–æ—Ü–µ—Å—Å –æ—Ç–ª–∞–¥–∫–∏ –ø—Ä–æ—â–µ –∏ –ø—Ä–æ–∑—Ä–∞—á–Ω–µ–π. –ù–∞–ø—Ä–∏–º–µ—Ä, –∏–¥–∏–æ–º–∞ –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê –° –û–ü–ò–°–ê–ù–ò–ï–ú –ø–æ–∑–≤–æ–ª—è–µ—Ç –¥–æ–±–∞–≤–∏—Ç—å –∫ –º–µ—Ö–∞–Ω–∏–∑–º—É –ø—Ä–æ–≤–µ—Ä–æ–∫ (–º–∞–∫—Ä–æ—Å <code>assert</code>) —Å–ª–æ–≤–µ—Å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤–æ–∑–Ω–∏–∫—à–µ–π –ø—Ä–æ–±–ª–µ–º—ã.</p>
</li>
</ul>
<h3>SIZEOF –î–õ–Ø –ü–ï–†–ï–ú–ï–ù–ù–´–•</h3>
<p>–§—É–Ω–∫—Ü–∏–∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –≤ <strong>–°</strong> –æ—á–µ–Ω—å —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ç–∏–ø <code>void*</code> - —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ –æ–±—ä–µ–∫—Ç –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–≥–æ —Ç–∏–ø–∞, —ç—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–¥–µ–ª–∞—Ç—å –∏—Ö (—Ñ—É–Ω–∫—Ü–∏–∏) –±–æ–ª–µ–µ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–º–∏ –∏ –∞–±—Å—Ç—Ä–∞–≥–∏—Ä–æ–≤–∞—Ç—å—Å—è –æ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–∏–ø–∞ –¥–∞–Ω–Ω—ã—Ö. –ù–∞–ø—Ä–∏–º–µ—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º –≤—ã–∑–æ–≤–∞ —Ñ—É–Ω–∫—Ü–∏–π –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –≤—ã–¥–µ–ª–µ–Ω–∏—è –ø–∞–º—è—Ç–∏ (<code>malloc</code>, <code>calloc</code> –∏ <code>realloc</code>) —è–≤–ª—è–µ—Ç—Å—è —É–∫–∞–∑–∞—Ç–µ–ª—å <code>void*</code>, –ø—Ä–∏ —ç—Ç–æ–º —Å–∞–º–∏–º —Ñ—É–Ω–∫—Ü–∏—è–º –Ω–∞ —ç—Ç–∞–ø–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –∏–∑–≤–µ—Å—Ç–Ω–æ –æ —Ç–∏–ø–µ –¥–∞–Ω–Ω—ã—Ö, –¥–ª—è –∫–æ—Ç–æ—Ä—ã—Ö –≤—ã–¥–µ–ª—è–µ—Ç—Å—è –ø–∞–º—è—Ç—å. –í—Å—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –ª–æ–∂–∏—Ç—Å—è –Ω–∞ –∫–æ–¥ –∫–ª–∏–µ–Ω—Ç–∞, –≤—ã–∑—ã–≤–∞—é—â–µ–≥–æ —Ñ—É–Ω–∫—Ü–∏—é - –∏–º–µ–Ω–Ω–æ –æ–Ω –¥–æ–ª–∂–µ–Ω —É–∫–∞–∑–∞—Ç—å –æ–±—ä—ë–º –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–π –ø–∞–º—è—Ç–∏:</p>
<div class="highlight"><pre><span></span><span class="n">HelloTelegram</span><span class="o">*</span> <span class="n">telegram</span> <span class="o">=</span> <span class="p">(</span><span class="n">HelloTelegram</span><span class="o">*</span><span class="p">)</span><span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="n">HelloTelegram</span><span class="p">));</span>
</pre></div>


<p>–î–∞–Ω–Ω—ã–π –∫–æ–¥ –ª–µ–≥–∫–æ —á–∏—Ç–∞–µ—Ç—Å—è –∏ –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ <code>telegram</code> –æ—Å—Ç–∞—ë—Ç—Å—è <code>HelloTelegram</code> –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –Ω–∞–¥–æ. –û–¥–Ω–∞–∫–æ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Å–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏—è / –∏–∑–º–µ–Ω–µ–Ω–∏–π –æ—á–µ–Ω—å –ª–µ–≥–∫–æ –∑–∞–ø—É—Ç–∞—Ç—å—Å—è –∏ –¥–æ–ø—É—Å—Ç–∏—Ç—å –æ—à–∏–±–∫—É:</p>
<div class="highlight"><pre><span></span><span class="n">ByeTelegram</span><span class="o">*</span> <span class="n">telegram</span> <span class="o">=</span> <span class="p">(</span><span class="n">ByeTelegram</span><span class="o">*</span><span class="p">)</span><span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="n">HelloTelegram</span><span class="p">));</span>
</pre></div>


<p>–ü–æ—Å–∫–æ–ª—å–∫—É –Ω–µ—Ç –Ω–∏–∫–∞–∫–æ–π –≥–∞—Ä–∞–Ω—Ç–∏–∏, —á—Ç–æ —Ä–∞–∑–º–µ—Ä—ã <code>HelloTelegram</code> –∏ <code>ByeTelegram</code> —Ä–∞–≤–Ω—ã (—Ç–æ—á–Ω–µ–µ —ç—Ç–æ –±—ã–ª–æ –±—ã —Å—á–∞—Å—Ç–ª–∏–≤—ã–º —Å—Ç–µ—á–µ–Ω–∏–µ–º –æ–±—Å—Ç–æ—è—Ç–µ–ª—å—Å—Ç–≤), –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ç–æ—Ç –∫–æ–¥ –ø—Ä–∏–≤–µ–¥—ë—Ç –∫ –ø–µ—á–∞–ª—å–Ω—ã–º –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è–º. –ü—Ä–æ–±–ª–µ–º–∞  –≤ —Ç–æ–º, —á—Ç–æ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å —Ñ—É–Ω–∫—Ü–∏–µ–π <code>malloc</code> –∏ –µ–π –ø–æ–¥–æ–±–Ω—ã–º–∏ –Ω–∞ —ç—Ç–∞–ø–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ —Ç–µ—Ä—è–µ—Ç—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä–µ–∞–ª—å–Ω–æ–º —Ç–∏–ø–µ –¥–∞–Ω–Ω—ã—Ö –∏ –ø–æ—ç—Ç–æ–º—É –¥–∞–ª–µ–∫–æ –Ω–µ —Ñ–∞–∫—Ç, —á—Ç–æ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –ø–æ–¥–æ–±–Ω—É—é –æ—à–∏–±–∫—É —Å–º–æ–∂–µ—Ç –æ–±–Ω–∞—Ä—É–∂–∏—Ç—å - –æ–Ω –Ω–µ –æ–±—è–∑–∞–Ω —ç—Ç–∏–º –∑–∞–Ω–∏–º–∞—Ç—å—Å—è.</p>
<p>–ò—Å–ø–æ–ª—å–∑—É—è –∏–¥–∏–æ–º—É SIZEOF –î–õ–Ø –ü–ï–†–ï–ú–ï–ù–ù–´–• –ø–æ–¥–æ–±–Ω—ã–µ –æ—à–∏–±–∫–∏ –º–æ–∂–Ω–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å:</p>
<div class="highlight"><pre><span></span><span class="n">HelloTelegram</span><span class="o">*</span> <span class="n">telegram</span> <span class="o">=</span> <span class="p">(</span><span class="n">HelloTelegram</span><span class="o">*</span><span class="p">)</span><span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span> <span class="o">*</span><span class="n">telegram</span><span class="p">);</span>
</pre></div>


<p>–ù–æ –º–∏–Ω—É—Ç–æ—á–∫—É ! –ù–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ª–∏ —Ç—É—Ç —Ä–∞–∑—ã–º–µ–Ω–æ–≤–∞–Ω–∏–µ —É–∫–∞–∑–∞—Ç–µ–ª—è, –∫–æ—Ç–æ—Ä—ã–π, –∫–æ –≤—Å–µ–º—É –ø—Ä–æ—á–µ–º—É, –∫ —ç—Ç–æ–º—É –º–æ–º–µ–Ω—Ç—É –µ—â—ë –∏ –Ω–µ –±—ã–ª –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω ? –ù–µ—Ç, –∏ –ø—Ä–∏—á–∏–Ω–∞, –ø–æ –∫–æ—Ç–æ—Ä–æ–π —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ç–æ–º, —á—Ç–æ <code>sizeof</code> —ç—Ç–æ –æ–ø–µ—Ä–∞—Ç–æ—Ä –∞ –Ω–µ —Ñ—É–Ω–∫—Ü–∏—è. –û–ø–µ—Ä–∞—Ç–æ—Ä <code>sizeof</code> –Ω–µ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫–æ–¥, –∞ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ <code>sizeof *telegram</code> —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –Ω–∞ —ç—Ç–∞–ø–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏. –¢–µ–ø–µ—Ä—å, –µ—Å–ª–∏ —Ç–∏–ø <code>telegram</code> –∏–∑–º–µ–Ω–∏—Ç—Å—è –Ω—É —Å–∫–∞–∂–µ–º –Ω–∞ <code>ByeTelegram</code>, –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Å—á–∏—Ç–∞–µ—Ç –∞—Ä–≥—É–º–µ–Ω—Ç, –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã–π —Ñ—É–Ω–∫—Ü–∏–∏ <code>malloc</code>. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –∑–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ä–∞–∑–º–µ—Ä –≤—ã–¥–µ–ª—è–µ–º–æ–π –ø–∞–º—è—Ç–∏ –ø–æ–¥ –∑–∞–¥–∞–Ω–Ω—ã–π —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–∫–ª–∞–¥—ã–≤–∞–µ—Ç—Å—è —Å –ø–ª–µ—á –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–∞ –Ω–∞ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä. –ü–æ—Å–∫–æ–ª—å–∫—É –≤ –Ω–∞—à–µ–º –ø—Ä–∏–º–µ—Ä–µ <code>telegram</code> —ç—Ç–æ —É–∫–∞–∑–∞—Ç–µ–ª—å, —Ç–æ —É–Ω–∞—Ä–Ω—ã–π –æ–ø–µ—Ä–∞—Ç–æ—Ä <code>*</code> –≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º.</p>
<p>–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∏–¥–∏–æ–º—ã SIZEOF –î–õ–Ø –ü–ï–†–ï–ú–ï–ù–ù–´–• –æ—Ç–Ω—é–¥—å –Ω–µ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç—Å—è —É–∫–∞–∑–∞—Ç–µ–ª—è–º–∏. –í–æ—Ç –ø—Ä–∏–º–µ—Ä –∏–¥–∏–æ–º—ã –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å —Ñ—É–Ω–∫—Ü–∏–µ–π <code>memcpy</code>, –∫–æ—Ç–æ—Ä–∞—è —Ç–∞–∫–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç <code>void*</code>, –æ–¥–Ω–∞–∫–æ —É–∂–µ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –æ–¥–Ω–æ–≥–æ –∏–∑ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤:</p>
<div class="highlight"><pre><span></span><span class="kt">uint32_t</span> <span class="n">telegramSize</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="n">memcpy</span><span class="p">(</span><span class="o">&amp;</span><span class="n">telegramSize</span><span class="p">,</span> <span class="n">binaryDatastream</span><span class="p">,</span> <span class="k">sizeof</span> <span class="n">telegramSize</span><span class="p">);</span>
</pre></div>


<p>–¢–µ–ø–µ—Ä—å, –µ—Å–ª–∏ –∏–∑–º–µ–Ω–∏—Ç—Å—è —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö —Å <code>uint32_t telegramSize = 0</code>; –Ω–∞ <code>uintXX_t telegramSize = 0</code>; –∫–æ–¥ —Å <code>memcpy</code> –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π –∏ –±—É–¥–µ—Ç (–¥–æ–ª–∂–µ–Ω) —Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.</p>
<h3>–ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –°–û–°–¢–ê–í–ù–´–• –¢–ò–ü–û–í –° –ü–û–ú–û–©–¨–Æ {0}</h3>
<p>–ù–µ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ - —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –æ—à–∏–±–æ–∫ –≤ –ª—é–±—ã—Ö –ø—Ä–æ–≥—Ä–∞–º–º–∞—Ö. –í <strong>–°</strong> –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è <a href="http://ru.wikipedia.org/wiki/%D0%9F%D1%80%D0%B8%D0%BC%D0%B8%D1%82%D0%B8%D0%B2%D0%BD%D1%8B%D0%B9_%D1%82%D0%B8%D0%BF" rel="nofollow">–ø—Ä–∏–º–∏—Ç–∏–≤–Ω—ã—Ö —Ç–∏–ø–æ–≤</a> –¥–∞–Ω–Ω—ã—Ö, —Ç–∞–∫–∏—Ö –∫–∞–∫ <code>int</code>, <code>char</code> –∏ —Ç.–¥. –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –æ—á–µ–Ω—å –ø—Ä–æ—Å—Ç–æ, –Ω–æ –∫–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–æ—Å—Ç–∞–≤–Ω—ã–µ —Ç–∏–ø—ã, —Ç–∞–∫–∏–µ –∫–∞–∫ <strong>–º–∞—Å—Å–∏–≤—ã</strong> –∏–ª–∏ <strong>—Å—Ç—Ä—É–∫—Ç—É—Ä—ã</strong> ? –û–ø–∞—Å–Ω–æ–π, –Ω–æ —É–≤—ã, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω–æ–π –ø—Ä–∞–∫—Ç–∏–∫–æ–π —è–≤–ª—è–µ—Ç—Å—è –≤–æ—Ç —Ç–∞–∫–æ–π —Å–ø–æ—Å–æ–±:</p>
<div class="highlight"><pre><span></span><span class="k">struct</span> <span class="n">TemperatureNode</span> <span class="p">{</span>
    <span class="kt">double</span> <span class="n">todaysAverage</span><span class="p">;</span>
    <span class="k">struct</span> <span class="n">TemperatureNode</span><span class="o">*</span> <span class="n">nextTemperature</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">TemperatureNode</span> <span class="n">node</span><span class="p">;</span>
<span class="n">memset</span><span class="p">(</span><span class="o">&amp;</span><span class="n">node</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="k">sizeof</span> <span class="n">node</span><span class="p">);</span>
</pre></div>


<p>–ü—Ä–æ–±–ª–µ–º–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º <code>memset</code> –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ç–æ–º, —á—Ç–æ –¥–∞–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–æ—Å—Ç–æ –æ–±–Ω—É–ª—è–µ—Ç –±–∏—Ç—ã, –Ω–µ –∑–∞–±–æ—Ç—è—Å—å –æ –¥–µ—Ç–∞–ª—è—Ö –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –¥–∞–Ω–Ω—ã—Ö, —Å –∫–æ—Ç–æ—Ä—ã–º –µ–π –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è —Ä–∞–±–æ—Ç–∞—Ç—å. –í <strong>–°</strong> –º–æ–∂–Ω–æ –≤—Å—Ç—Ä–µ—Ç–∏—Ç—å —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö, –Ω–∞–ø—Ä–∏–º–µ—Ä <code>NULL</code> - —É–∫–∞–∑–∞—Ç–µ–ª—å –∏–ª–∏ —á–∏—Å–ª–∞ —Å <em>–ø–ª–∞–≤–∞—é—â–µ–π –∑–∞–ø—è—Ç–æ–π</em>, —É –∫–æ—Ç–æ—Ä—ã—Ö –≤—Å–µ –±–∏—Ç—ã –≤ –Ω–æ–ª—å –µ—â—ë –Ω–µ –æ–∑–Ω–∞—á–∞—é—Ç, —á—Ç–æ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ —Ç–æ–∂–µ –±—É–¥–µ—Ç –Ω–æ–ª—å. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É, –ø–æ–≤–µ–¥–µ–Ω–∏–µ –∫–æ—Ç–æ—Ä–æ–π –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç –æ–∂–∏–¥–∞–µ–º–æ–≥–æ.</p>
<p>–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–± –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—É—Ç—ë–º —è–≤–Ω–æ–π –ø–æ—à–∞–≥–æ–≤–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –µ—ë –ø–æ–ª–µ–π –≤—ã–≥–ª—è–¥–∏—Ç –≥—Ä–æ–º–æ–∑–¥–∫–æ –∏ –µ–≥–æ —Ç—Ä—É–¥–Ω–æ —Å–æ–ø—Ä–æ–≤–æ–∂–¥–∞—Ç—å. –î–∞–∂–µ –µ—Å–ª–∏ –∏–∑–±–µ–∂–∞—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è), –∫–∞–∂–¥—ã–π —Ä–∞–∑ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ / —É–¥–∞–ª–µ–Ω–∏–∏ —É —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø–æ–ª–µ–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–Ω–æ—Å–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏ –≤ –∫–æ–¥, –∑–∞–Ω–∏–º–∞—é—â–∏–π—Å—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π.</p>
<p>–ö —Å—á–∞—Å—Ç—å—é, —Ç—É—Ç –º–æ–∂–Ω–æ –∑–∞–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å –∏–¥–∏–æ–º—É –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –°–û–°–¢–ê–í–ù–´–• –¢–ò–ü–û–í –° –ü–û–ú–û–©–¨–Æ {0}. –î–∞–Ω–Ω—ã–π –ø—Ä–∏—ë–º <strong>–≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç</strong> –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –≤—Å–µ—Ö –ø–æ–ª–µ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã (–≤–∫–ª—é—á–∞—è —á–∏—Å–ª–∞ —Å –ø–ª–∞–≤–∞—é—â–µ–π –∑–∞–ø—è—Ç–æ–π –∏ —Ç.–¥.)  –Ω—É–ª–µ–≤—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏. –ü–µ—Ä–µ–Ω–æ—Å–∏–º–æ—Å—Ç—å –¥–∞–Ω–Ω–æ–≥–æ –∫–æ–¥–∞ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Ü–µ–ª–µ–≤–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç—Å—è –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–æ–º:</p>
<div class="highlight"><pre><span></span><span class="k">struct</span> <span class="n">TemperatureNode</span> <span class="n">node</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">};</span>
</pre></div>


<p>–¢–∞–∫–∂–µ –¥–∞–Ω–Ω–∞—è –∏–¥–∏–æ–º–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–ª–µ–∑–Ω–∞ –ø—Ä–∏ –æ–±–Ω—É–ª–µ–Ω–∏–∏ —É–∂–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –º–∞—Å—Å–∏–≤–æ–≤ –∏–ª–∏ –ø–æ–ª–µ–π —Å—Ç—Ä—É–∫—Ç—É—Ä –≤ –ª—é–±–æ–º –º–µ—Å—Ç–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã, –¥–ª—è —ç—Ç–æ–π —Ü–µ–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–∑–¥–∞—Ç—å —ç—Ç–∞–ª–æ–Ω (–ª—É—á—à–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—É <code>const</code>), –∞ –µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ –º–µ—Ä–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å:</p>
<div class="highlight"><pre><span></span><span class="cm">/* –≠—Ç–∞–ª–æ–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å –Ω—É–ª–µ–≤—ã–º–∏ –ø–æ–ª—è–º–∏ */</span>

<span class="k">const</span> <span class="k">struct</span> <span class="n">TemperatureNode</span> <span class="n">zeroNode</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">};</span>
<span class="k">struct</span> <span class="n">TemperatureNode</span> <span class="n">node</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">};</span>

<span class="cm">/* –ß—Ç–æ-—Ç–æ –¥–µ–ª–∞–µ—Ç—Å—è —Å —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π node. */</span>
<span class="p">...</span>
<span class="cm">/* –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –æ–±–Ω—É–ª–∏—Ç—å –≤—Å–µ –ø–æ–ª—è node */</span>

<span class="n">node</span> <span class="o">=</span> <span class="n">zeroNode</span><span class="p">;</span>
</pre></div>


<p>–ü—Ä–∏ –æ–±–Ω—É–ª–µ–Ω–∏–∏ –º–∞—Å—Å–∏–≤–æ–≤ –æ–ø–µ—Ä–∞—Ü–∏—è –ø—Ä–æ—Å—Ç–æ–≥–æ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏—è –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç - –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–µ—Ä–µ–±–∏—Ä–∞—Ç—å –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã –≤ —Ü–∏–∫–ª–µ. –ö–∞–∫ –≤–∞—Ä–∏–∞–Ω—Ç, –º–æ–∂–Ω–æ –∑–∞–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å <code>memcpy</code>:</p>
<div class="highlight"><pre><span></span><span class="k">const</span> <span class="kt">double</span> <span class="n">zeroArray</span><span class="p">[</span><span class="n">NO_OF_TEMPERATURES</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">};</span>
<span class="kt">double</span> <span class="n">temperatures</span><span class="p">[</span><span class="n">NO_OF_TEMPERATURES</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">};</span>

<span class="cm">/* –ß—Ç–æ-—Ç–æ –¥–µ–ª–∞–µ—Ç—Å—è —Å –º–∞—Å—Å–∏–≤–æ–º temperatures. */</span>
<span class="p">...</span>
<span class="cm">/* –û–±–Ω—É–ª–∏—Ç—å –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã –º–∞—Å—Å–∏–≤–∞ temperatures. */</span>

<span class="n">memcpy</span><span class="p">(</span><span class="n">temperatures</span><span class="p">,</span> <span class="n">zeroArray</span><span class="p">,</span> <span class="k">sizeof</span> <span class="n">temperatures</span><span class="p">);</span>
</pre></div>


<p>–î–ª—è –º–Ω–æ–≥–æ–º–µ—Ä–Ω—ã—Ö –º–∞—Å—Å–∏–≤–æ–≤ –∏ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä –º–æ–≥—É—Ç –ø–æ–Ω–∞–¥–æ–±–∏—Ç—å—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Ñ–∏–≥—É—Ä–Ω—ã–µ —Å–∫–æ–±–∫–∏ –Ω–∞–ø—Ä–∏–º–µ—Ä <code>{{0}}</code>.</p>
<h3>–ö–û–õ–ò–ß–ï–°–¢–í–û –≠–õ–ï–ú–ï–ù–¢–û–í –ú–ê–°–°–ò–í–ê –ö–ê–ö –†–ï–ó–£–õ–¨–¢–ê–¢ –î–ï–õ–ï–ù–ò–Ø</h3>
<p>–ö–∞–∫ –∏–∑–≤–µ—Å—Ç–Ω–æ, <strong>–°</strong> –Ω–µ –∏–∑–æ–±–∏–ª—É–µ—Ç —É–¥–æ–±—Å—Ç–≤–∞–º–∏ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –º–∞—Å—Å–∏–≤–∞–º–∏. –ü—Ä–∏ –ø–µ—Ä–µ–¥–∞—á–µ –º–∞—Å—Å–∏–≤–∞ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ —Ñ—É–Ω–∫—Ü–∏–∏, –ø–æ–ø—Ä–æ—Å—Ç—É –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ –µ–≥–æ –ø–µ—Ä–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç. –ë–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Å–æ–≥–ª–∞—à–µ–Ω–∏–π (–ø—Ä–∏–º–µ—Ä —Ç–∞–∫–æ–≥–æ —Å–æ–≥–ª–∞—à–µ–Ω–∏—è - —Å—Ç—Ä–æ–∫–∞, —Ç–æ—Ç –∂–µ –º–∞—Å—Å–∏–≤, –Ω–æ –æ–Ω –≤—Å–µ–≥–¥–∞ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è –Ω—É–ª–µ–≤—ã–º —Å–∏–º–≤–æ–ª–æ–º), —ç—Ç–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ, —á—Ç–æ–±—ã –≤ —Ç–µ–ª–µ —Ñ—É–Ω–∫—Ü–∏–∏ —É–∑–Ω–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –º–∞—Å—Å–∏–≤–∞. –í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ API –≤–µ—à–∞—é—Ç –≤—Å—é —á—ë—Ä–Ω—É—é –±—É—Ö–≥–∞–ª—Ç–µ—Ä–∏—é –ø–æ –≤—ã—á–∏—Å–ª–µ–Ω–∏—é –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –º–∞—Å—Å–∏–≤–∞ –Ω–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–∞. –û–¥–Ω–∏–º –∏–∑ –ø—Ä–∏–º–µ—Ä–æ–≤ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ñ—É–Ω–∫—Ü–∏—è <code>poll()</code> –≤ POSIX API. –í –∫–∞—á–µ—Å—Ç–≤–µ –ø–µ—Ä–≤–æ–≥–æ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ –µ–π –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –º–∞—Å—Å–∏–≤ —Å—Ç—Ä—É–∫—Ç—É—Ä <code>pollfd</code>:</p>
<div class="highlight"><pre><span></span><span class="k">struct</span> <span class="n">pollfd</span> <span class="n">handles</span><span class="p">[</span><span class="n">NO_OF_HANDLES</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">};</span>

<span class="cm">/* –ó–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –º–∞—Å—Å–∏–≤ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ */</span>

<span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="n">poll</span><span class="p">(</span><span class="n">handles</span><span class="p">,</span> <span class="n">NO_OF_HANDLES</span><span class="p">,</span> <span class="n">TIMEOUT</span><span class="p">);</span>
</pre></div>


<p>–ü—Ä–æ–±–ª–µ–º–∞ –¥–∞–Ω–Ω–æ–≥–æ –∫–æ–¥–∞ –≤ —Ç–æ–º, —á—Ç–æ –∑–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º –∫—Ä–∞—Å–∏–≤–æ–≥–æ –∏–º–µ–Ω–∏ –Ω–∏—á–µ–≥–æ –Ω–µ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ —Ç–æ, —á—Ç–æ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞ NO_OF_HANDLES —ç—Ç–æ —Ä–µ–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ –º–∞—Å—Å–∏–≤–µ. –•–æ—Ä–æ—à–∏–µ –∏–º–µ–Ω–∞ –∏–º–µ—é—Ç –±–æ–ª—å—à–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –Ω–æ —Ç–æ–ª—å–∫–æ –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–∞. –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä—É –æ–Ω–∏ –Ω–∏ –æ —á–µ–º –Ω–µ –≥–æ–≤–æ—Ä—è—Ç, –æ–Ω –Ω–µ –±—É–¥–µ—Ç —Ä—É–≥–∞—Ç—å—Å—è –Ω–∞ —Ç–∞–∫–æ–π, —è–≤–Ω–æ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–π –∫–æ–¥ —Å "–¥—É—à–∫–æ–º":</p>
<div class="highlight"><pre><span></span><span class="cp">#define NO_OF_HANDLES x</span>
<span class="k">struct</span> <span class="n">pollfd</span> <span class="n">handles</span><span class="p">[</span><span class="n">NO_OF_HANDLES</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">};</span>

<span class="cm">/* –ó–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –º–∞—Å—Å–∏–≤ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ */</span>

<span class="cp">#undef NO_OF_HANDLES</span>
<span class="cp">#define NO_OF_HANDLES y</span>
<span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="n">poll</span><span class="p">(</span><span class="n">handles</span><span class="p">,</span> <span class="n">NO_OF_HANDLES</span><span class="p">,</span> <span class="n">TIMEOUT</span><span class="p">);</span>
</pre></div>


<p>–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –∏–¥–∏–æ–º—ã –ö–û–õ–ò–ß–ï–°–¢–í–û –≠–õ–ï–ú–ï–ù–¢–û–í –ú–ê–°–°–ò–í–ê –ö–ê–ö –†–ï–ó–£–õ–¨–¢–ê–¢ –î–ï–õ–ï–ù–ò–Ø, –º—ã –º–æ–∂–µ–º –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å, —á—Ç–æ –≤—ã—á–∏—Å–ª—è–µ–º–æ–µ –Ω–∞ —ç—Ç–∞–ø–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –º–∞—Å—Å–∏–≤–∞ –≤—Å–µ–≥–¥–∞ –±—É–¥–µ—Ç —Ä–∞–≤–Ω—ã–º —Ä–µ–∞–ª—å–Ω–æ–º—É –∫–æ–ª–∏—á–µ—Å—Ç–≤—É —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ –º–∞—Å—Å–∏–≤–µ:</p>
<div class="highlight"><pre><span></span><span class="k">struct</span> <span class="n">pollfd</span> <span class="n">handles</span><span class="p">[</span><span class="n">NO_OF_HANDLES</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">};</span>

<span class="cm">/* –ó–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –º–∞—Å—Å–∏–≤ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ */</span>

<span class="k">const</span> <span class="kt">size_t</span> <span class="n">noOfHandles</span> <span class="o">=</span> <span class="k">sizeof</span> <span class="n">handles</span> <span class="o">/</span> <span class="k">sizeof</span> <span class="n">handles</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
<span class="kt">int</span> <span class="n">result</span> <span class="o">=</span> <span class="n">poll</span><span class="p">(</span><span class="n">handles</span><span class="p">,</span> <span class="n">noOfHandles</span><span class="p">,</span> <span class="n">TIMEOUT</span><span class="p">);</span>
</pre></div>


<p>–í –æ—Å–Ω–æ–≤–µ –∏–¥–∏–æ–º—ã –ª–µ–∂–∏—Ç —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ, —á—Ç–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º –¥–µ–ª–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ –≤—Å–µ–≥–æ –º–∞—Å—Å–∏–≤–∞ –Ω–∞ —Ä–∞–∑–º–µ—Ä –æ–¥–Ω–æ–≥–æ –∏–∑ –µ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —è–≤–ª—è–µ—Ç—Å—è –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤.</p>
<h3>ENUM –î–õ–Ø –¶–ï–õ–û–ß–ò–°–õ–ï–ù–ù–´–• –ö–û–ù–°–¢–ê–ù–¢</h3>
<p>–í –ø—Ä–µ–¥—ã–¥—É—â–µ–º –ø—Ä–∏–º–µ—Ä–µ —Ä–∞–∑–º–µ—Ä–Ω–æ—Å—Ç—å –º–∞—Å—Å–∏–≤–∞ –∑–∞–¥–∞—ë—Ç—Å—è –º–∞–∫—Ä–æ—Å–æ–º <code>#define NO_OF_HANDLES</code>, –Ω–æ —ç—Ç–æ –∂–µ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –∏ –±–æ–ª–µ–µ —Å—Ç—Ä–æ–≥–∏–º —Å–ø–æ—Å–æ–±–æ–º —á–µ—Ä–µ–∑ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏–µ enum:</p>
<div class="highlight"><pre><span></span><span class="k">enum</span> <span class="p">{</span><span class="n">NO_OF_HANDLES</span><span class="o">=</span><span class="mi">42</span><span class="p">};</span>
<span class="k">struct</span> <span class="n">pollfd</span> <span class="n">handles</span><span class="p">[</span><span class="n">NO_OF_HANDLES</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">};</span>
</pre></div>


<p>–¢–∞–∫–æ–µ —Ä–µ—à–µ–Ω–∏–µ –±–æ–ª–µ–µ –Ω–∞–¥—ë–∂–Ω–æ —Ç.–∫. –¥–ª—è enum –Ω–µ–ª—å–∑—è —Å–¥–µ–ª–∞—Ç—å –∫–∞–∫—É—é-–Ω–∏–±—É–¥—å –ø–∞–∫–æ—Å—Ç—å —Ç–∏–ø–∞ <code>#undef</code>. –ï—â—ë –º–æ–∂–Ω–æ –±—ã–ª–æ –±—ã –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –∑–∞–¥–∞—Ç—å —Ä–∞–∑–º–µ—Ä–Ω–æ—Å—Ç—å –∏ —Å –ø–æ–º–æ—â—å—é <code>const int NO_OF_HANDLES=42;</code>, –ø—Ä–∞–≤–¥–∞ —Ç–∞–∫–æ–π —Å–ø–æ—Å–æ–± –≤–æ–∑–º–æ–∂–µ–Ω —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–π –∏ –ø–æ—ç—Ç–æ–º—É –Ω–µ –æ—Å–æ–±–æ –ø—Ä–∞–∫—Ç–∏—á–µ–Ω –≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç enum.</p>
<h3>–ú–ê–ì–ò–ß–ï–°–ö–ò–ï –ß–ò–°–õ–ê –ö–ê–ö –ü–ï–†–ï–ú–ï–ù–ù–´–ï</h3>
<p>–ß—Ç–æ –∑–∞ 42 !? –û–ø—ã—Ç–Ω—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç—ã –∏–∑–±–µ–≥–∞—é—Ç <a href="http://ru.wikipedia.org/wiki/%D0%9C%D0%B0%D0%B3%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5_%D1%87%D0%B8%D1%81%D0%BB%D0%BE_%28%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%29" rel="nofollow">–º–∞–≥–∏—á–µ—Å–∫–∏—Ö —á–∏—Å–µ–ª</a>, –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω–∏ –¥–µ–ª–∞—é—Ç –∫–æ–¥ —Ç—Ä—É–¥–Ω—ã–º –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è –∏ –º–æ–≥—É—Ç –∑–∞–ø—É—Ç–∞—Ç—å –ª—é–±–æ–≥–æ, –∫—Ç–æ –±—É–¥–µ—Ç –µ–≥–æ —á–∏—Ç–∞—Ç—å / —Å–æ–ø—Ä–æ–≤–æ–∂–¥–∞—Ç—å. –ü—Ä–∞–≤–¥–∞ –µ—Å—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —á–∏—Å–ª–∞ - 0, 1, 3.14 –∏ 42, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏–Ω—è—Ç–æ —Å—á–∏—Ç–∞—Ç—å –º–µ–Ω–µ–µ –º–∞–≥–∏—á–µ—Å–∫–∏–º–∏, —á–µ–º –æ—Å—Ç–∞–ª—å–Ω—ã–µ. –ö–æ–≥–¥–∞ –º—ã –≤–∏–¥–∏–º –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º—É—é –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 0, –º–æ–∂–Ω–æ –ø—Ä–µ–¥–ø–æ–ª–æ–∂–∏—Ç—å, —á—Ç–æ –æ–Ω–∞ –±—É–¥–µ—Ç –∏–∑–º–µ–Ω—è—Ç—å—Å—è –≥–¥–µ-—Ç–æ –¥–∞–ª—å—à–µ –≤ –∫–æ–¥–µ. –ß–∏—Å–ª–æ 1 –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–æ—Å—Ç–æ –∞–Ω–∞–ª–æ–≥–æ–º <code>true</code>. –ß–∏—Å–ª–æ <a href="http://ru.wikipedia.org/wiki/%D0%9E%D1%82%D0%B2%D0%B5%D1%82_%D0%BD%D0%B0_%D0%B3%D0%BB%D0%B0%D0%B2%D0%BD%D1%8B%D0%B9_%D0%B2%D0%BE%D0%BF%D1%80%D0%BE%D1%81_%D0%B6%D0%B8%D0%B7%D0%BD%D0%B8,_%D0%B2%D1%81%D0%B5%D0%BB%D0%B5%D0%BD%D0%BD%D0%BE%D0%B9_%D0%B8_%D0%B2%D1%81%D0%B5%D0%B3%D0%BE_%D1%82%D0%B0%D0%BA%D0%BE%D0%B3%D0%BE" rel="nofollow">42</a> —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ –ø–æ —Å–≤–æ–µ–π –ø—Ä–∏—Ä–æ–¥–µ, –æ–Ω–æ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –≥–ª–∞–≤–Ω—ã–π –≤–æ–ø—Ä–æ—Å –∂–∏–∑–Ω–∏, –≤—Å–µ–ª–µ–Ω–Ω–æ–π –∏ –≤—Å–µ–≥–æ —Ç–∞–∫–æ–≥–æ.</p>
<p>–ö–∞–∫ –Ω–∏ —Å—Ç—Ä–∞–Ω–Ω–æ, —Å <em>–Ω–µ –æ—á–µ–Ω—å</em> –º–∞–≥–∏—á–µ—Å–∫–∏–º–∏ —á–∏—Å–ª–∞–º–∏ —Ç–æ–∂–µ –º–æ–≥—É—Ç –±—ã—Ç—å –ø—Ä–æ–±–ª–µ–º—ã. –ù–∞–ø—Ä–∏–º–µ—Ä —É —Å—Ç—Ä—É–∫—Ç—É—Ä—ã <code>struct tm</code>, –∫–æ—Ç–æ—Ä–∞—è c–æ–¥–µ—Ä–∂–∏—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∫–∞–ª–µ–Ω–¥–∞—Ä–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –≤ <strong>–°</strong>, –ø–æ–ª–µ <code>int tm_year;</code> —Ö—Ä–∞–Ω–∏—Ç –≥–æ–¥—ã —Å 1900 (–≤ Windows) –∏–ª–∏ —Å 1970 (–≤ Unix). –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º <em>–Ω—É–ª–µ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ</em> —ç—Ç–æ–≥–æ –ø–æ–ª—è –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –µ—â—ë –Ω–µ –æ–∑–Ω–∞—á–∞–µ—Ç <em>–Ω—É–ª–µ–≤–æ–π –≥–æ–¥</em>.</p>
<p>–ù—É –∞ —Å –Ω–∞—Å—Ç–æ—è—â–∏–º–∏ –º–∞–≥–∏—á–µ—Å–∫–∏–º–∏ —á–∏—Å–ª–∞–º–∏ –≤—Å—ë –µ—â—ë –ø–µ—á–∞–ª—å–Ω–µ–π:</p>
<div class="highlight"><pre><span></span><span class="n">startTimer</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
</pre></div>


<p>–ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —Ö–æ—Ä–æ—à–µ–µ –∏–º—è —Ñ—É–Ω–∫—Ü–∏–∏, —Å–ª–æ–∂–Ω–æ –æ–¥–Ω–æ–∑–Ω–∞—á–Ω–æ —Å–∫–∞–∑–∞—Ç—å, —á—Ç–æ —Ç—É—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç. –ï—Å–ª–∏ –ø—Ä–µ–¥–ø–æ–ª–æ–∂–∏—Ç—å, —á—Ç–æ 10 - —ç—Ç–æ –≤—Ä–µ–º–µ–Ω–Ω–æ–π –∏–Ω—Ç–µ—Ä–≤–∞–ª, —Ç–æ –≤ —á—ë–º –æ–Ω –∏–∑–º–µ—Ä—è–µ—Ç—Å—è ? –°–µ–∫—É–Ω–¥—ã, –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥—ã –∏–ª–∏ —ë–∂–∏–∫–∏ ? –ê –º–æ–∂–µ—Ç —ç—Ç–æ –≤–æ–æ–±—â–µ –∫–∞–∫–æ–π-—Ç–æ –ø–æ—Ä—è–¥–∫–æ–≤—ã–π –Ω–æ–º–µ—Ä ? –°–æ –≤—Ç–æ—Ä—ã–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º —Ç–∞–∫–∞—è –∂–µ –∏—Å—Ç–æ—Ä–∏—è.</p>
<p>–®–∞–≥–æ–º –Ω–∞–≤—Å—Ç—Ä–µ—á—É –∫ —Å–∞–º–æ–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É—é—â–µ–º—É—Å—è –∫–æ–¥—É –±—É–¥–µ—Ç –∏–¥–∏–æ–º–∞ –ú–ê–ì–ò–ß–ï–°–ö–ò–ï –ß–ò–°–õ–ê –ö–ê–ö –ü–ï–†–ï–ú–ï–ù–ù–´–ï. –°–æ–≥–ª–∞—Å–∏—Ç–µ—Å—å, –¥–∞–Ω–Ω—ã–π –∫–æ–¥ –≤—ã–∑—ã–≤–∞–µ—Ç –Ω–∞–º–Ω–æ–≥–æ –º–µ–Ω—å—à–µ –≤–æ–ø—Ä–æ—Å–æ–≤:</p>
<div class="highlight"><pre><span></span><span class="k">const</span> <span class="kt">size_t</span> <span class="n">timeoutInSeconds</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">size_t</span> <span class="n">doNotRescheduleTimer</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="n">startTimer</span><span class="p">(</span><span class="n">timeoutInSeconds</span><span class="p">,</span> <span class="n">doNotRescheduleTimer</span><span class="p">);</span>
</pre></div>


<p>–°–ª–µ–¥—É—è —Ç–∞–∫–æ–º—É –ø—Ä–∏–Ω—Ü–∏–ø—É –≥–¥–µ-—Ç–æ –¥–∞–ª—å—à–µ –≤ –∫–æ–¥–µ –º–æ–∂–Ω–æ –ø–æ –∞–Ω–∞–ª–æ–≥–∏–∏ –Ω–∞–ø–∏—Å–∞—Ç—å:</p>
<div class="highlight"><pre><span></span><span class="n">startTimer</span><span class="p">(</span><span class="n">tenSecondsTimeout</span><span class="p">,</span> <span class="n">doNotRescheduleTimer</span><span class="p">);</span>
</pre></div>


<p>–ö–æ–¥ —Å—Ç–∞–ª –µ—â—ë –±–æ–ª–µ–µ –ø–æ–Ω—è—Ç–Ω—ã–º, –Ω–µ —Ç–∞–∫ –ª–∏ ? –ò–ª–∏ –Ω–µ —Å–æ–≤—Å–µ–º ? –ü–æ–¥–≤–æ—Ö —Ç—É—Ç –≤ —Ç–æ–º, —á—Ç–æ –¥–ª—è –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞ <code>tenSecondsTimeout</code> —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ –∏–º—è. –ù–∏—á—Ç–æ –Ω–µ –º–µ—à–∞–µ—Ç –∫–∞–∫–æ–º—É-—Ç–æ —Å–ª–∏—à–∫–æ–º —É–º–Ω–æ–º—É –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç—É –ø—Ä–∏—Å–≤–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π <code>tenSecondsTimeout</code> –Ω–µ —Å–æ–≤—Å–µ–º —Ç–æ —á–∏—Å–ª–æ, –∫–æ—Ç–æ—Ä–æ–µ –≤—ã—Ç–µ–∫–∞–µ—Ç –∏–∑ –µ—ë –∏–º–µ–Ω–∏:</p>
<div class="highlight"><pre><span></span><span class="k">const</span> <span class="kt">size_t</span> <span class="n">tenSecondsTimeout</span> <span class="o">=</span> <span class="mi">42</span><span class="p">;</span> <span class="cm">/* Original value was 10 */</span>
</pre></div>


<p>–¢–∞–∫–æ–µ –∏–Ω–æ–≥–¥–∞ —Å–ª—É—á–∞–µ—Ç—Å—è, –∏ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –æ—Ç–ª–∞–¥–∫–∏ –º–æ–∂–Ω–æ –¥–æ–ª–≥–æ –¥—É–º–∞—Ç—å, —Å–∫–æ–ª—å–∫–æ –∂–µ –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –¥–ª—è—Ç—Å—è 10 —Å–µ–∫—É–Ω–¥...</p>
<p>–ò–¥–µ–∞–ª—å–Ω–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è —Ç—É—Ç –Ω–µ—Ç. –ü–æ–∂–∞–ª—É–π, –Ω–µ —Å—Ç–æ–∏—Ç –ø—Ä–∏–º–µ–Ω—è—Ç—å —ç—Ç—É –∏–¥–∏–æ–º—É —Å–ª–µ–ø–æ –∏ –≥–¥–µ –ø–æ–ø–∞–ª–æ - –ª—É—á—à–µ, —á—Ç–æ–±—ã –≤ –∏–º–µ–Ω–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –Ω–µ –±—ã–ª–æ —É–ø–æ–º–∏–Ω–∞–Ω–∏–π –æ <strong>—á–∏—Å–ª–∞—Ö</strong> –∏–ª–∏ <strong>—Ç–∏–ø–∞—Ö –¥–∞–Ω–Ω—ã—Ö</strong>, –ø–æ—Å–∫–æ–ª—å–∫—É –æ–Ω–∏ –æ—á–µ–Ω—å —á–∞—Å—Ç–æ –º–µ–Ω—è—é—Ç—Å—è.</p>
<h3>–ò–ú–ï–ù–û–í–ê–ù–ù–´–ï –ê–†–ì–£–ú–ï–ù–¢–´</h3>
<p>–ö–∞–∫ –º—ã —É–∂–µ –∑–Ω–∞–µ–º, —Å–ª–µ–¥—É—è –ø—Ä–∏–Ω—Ü–∏–ø—É –ú–ê–ì–ò–ß–ï–°–ö–ò–ï –ß–ò–°–õ–ê –ö–ê–ö –ü–ï–†–ï–ú–ï–ù–ù–´–ï –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –∫–æ–¥ –±–æ–ª–µ–µ —á–∏—Ç–∞–±–µ–ª—å–Ω—ã–º, –Ω–æ, –∫–∞–∫ –≤–∏–¥–Ω–æ –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –ø—Ä–∏–º–µ—Ä–∞, –±—ã–≤–∞—é—Ç —Å–ª—É—á–∞–∏, –∫–æ–≥–¥–∞ –ø–æ–¥–æ–±—Ä–∞—Ç—å —Ö–æ—Ä–æ—à–µ–µ –∏–º—è –¥–ª—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –ø—Ä–æ–±–ª–µ–º–∞—Ç–∏—á–Ω–æ. –ü–æ—ç—Ç–æ–º—É –¥–∞–≤–∞–π—Ç–µ –Ω–µ–º–Ω–æ–≥–æ –ø–µ—Ä–µ–¥–µ–ª–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–π –ø—Ä–∏–º–µ—Ä. –î–æ–ø—É—Å—Ç–∏–º, –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π, –∫–æ—Ç–æ—Ä–∞—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –ø–µ—Ä–≤–æ–≥–æ —Ç–∞–π–º–µ—Ä–∞, –º–æ–∂–Ω–æ –¥–∞—Ç—å –∏–º—è <code>timeoutInSeconds</code>, –Ω–æ –∫–∞–∫–æ–µ –∏–º—è —Ç–æ–≥–¥–∞ —Å—Ç–æ–∏—Ç –¥–∞–≤–∞—Ç—å –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –¥–ª—è –≤—Ç–æ—Ä–æ–≥–æ —Ç–∞–π–º–µ—Ä–∞ ? –ö–∞–∫ –≤–∞—Ä–∏–∞–Ω—Ç, –º–æ–∂–Ω–æ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å <code>timeoutInSeconds</code>, –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ —É–±—Ä–∞–≤ –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ <code>const</code>:</p>
<div class="highlight"><pre><span></span><span class="kt">size_t</span> <span class="n">timeoutInSeconds</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">size_t</span> <span class="n">doNotRescheduleTimer</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="n">notifyClosingDoor</span> <span class="o">=</span> <span class="n">startTimer</span><span class="p">(</span><span class="n">timeoutInSeconds</span><span class="p">,</span> <span class="n">doNotRescheduleTimer</span><span class="p">);</span>

<span class="n">timeoutInSeconds</span> <span class="o">=</span> <span class="mi">12</span><span class="p">;</span>
<span class="n">closeDoor</span> <span class="o">=</span> <span class="n">startTimer</span><span class="p">(</span><span class="n">timeoutInSeconds</span><span class="p">,</span> <span class="n">doNotRescheduleTimer</span><span class="p">);</span>
</pre></div>


<p>–¢—Ä—É–¥–Ω–æ –Ω–∞–∑–≤–∞—Ç—å —Ç–∞–∫–æ–π –∫–æ–¥ —á–∏—Ç–∞–±–µ–ª—å–Ω—ã–º –∏ –Ω–∞–¥—ë–∂–Ω—ã–º. –ö–æ–Ω—Ü–µ–ø—Ü–∏—è –ò–ú–ï–ù–û–í–ê–ù–ù–´–• –ê–†–ì–£–ú–ï–ù–¢–û–í –º–æ–≥–ª–∞ –±—ã —Ä–µ—à–∏—Ç—å –¥–∞–Ω–Ω—É—é –ø—Ä–æ–±–ª–µ–º—É, –ø–æ–∑–≤–æ–ª—è—è —è–≤–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å –∏–º—è –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º–æ–≥–æ –≤ –º–µ—Ç–æ–¥ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞, –≤–º–µ—Å—Ç–æ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –µ–≥–æ –ø–æ –ø–æ–ª–æ–∂–µ–Ω–∏—é. <strong>–°</strong> –Ω–∞–ø—Ä—è–º—É—é –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ç–∞–∫—É—é –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å, –æ–¥–Ω–∞–∫–æ –≤—Å—ë –∂–µ –∏–º–µ–µ—Ç—Å—è –æ–¥–∏–Ω —Å–ø–æ—Å–æ–± —ç–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Ö–æ–∂–µ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:</p>
<div class="highlight"><pre><span></span><span class="kt">size_t</span> <span class="n">timeoutInSeconds</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">size_t</span> <span class="n">doNotRescheduleTimer</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="n">notifyClosingDoor</span> <span class="o">=</span> <span class="n">startTimer</span><span class="p">(</span><span class="n">timeoutInSeconds</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">doNotRescheduleTimer</span><span class="p">);</span>

<span class="n">closeDoor</span> <span class="o">=</span> <span class="n">startTimer</span><span class="p">(</span><span class="n">timeoutInSeconds</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">doNotRescheduleTimer</span><span class="p">);</span>
</pre></div>


<p>–í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π <code>timeoutInSeconds</code> –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç—Å—è –∑–∞–¥–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –ø–æ—Å–ª–µ —á–µ–≥–æ –æ–Ω–∞ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –∫–∞–∫ –∞—Ä–≥—É–º–µ–Ω—Ç —Ñ—É–Ω–∫—Ü–∏–∏ <code>startTimer</code>. –¢–µ–ø–µ—Ä—å –∫–æ–¥ –Ω–µ–ø–ª–æ—Ö–æ –≤—ã–≥–ª—è–¥–∏—Ç, –æ–¥–Ω–∞–∫–æ –ø—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –≤—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π, –∫–æ–≥–¥–∞ –∫–∞–∂–¥—ã–π –±–∞–π—Ç –ø–∞–º—è—Ç–∏ –Ω–∞ —Å—á–µ—Ç—É, —Ç–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ –º–æ–∂–µ—Ç –æ–∫–∞–∑–∞—Ç—å—Å—è —Å–ª–∏—à–∫–æ–º —Ä–∞—Å—Ç–æ—á–∏—Ç–µ–ª—å–Ω—ã–º. –í –ø–æ–¥–æ–±–Ω—ã—Ö —Å–ª—É—á–∞—è—Ö –Ω–∏—á—Ç–æ –Ω–µ –º–µ—à–∞–µ—Ç –≤–º–µ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è <code>timeoutInSeconds</code> –ø—Ä–æ—Å—Ç–æ –∑–∞–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏:</p>
<div class="highlight"><pre><span></span><span class="n">closeDoor</span> <span class="o">=</span> <span class="n">startTimer</span><span class="p">(</span><span class="cm">/*Timeout in seconds*/</span><span class="mi">12</span><span class="p">,</span><span class="cm">/*Don&#39;t reschedule*/</span><span class="mi">0</span><span class="p">);</span>
</pre></div>


<p>–ß–µ–º –±–æ–ª—å—à–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –≤ –∫–æ–¥–µ —Ç–µ–º –≤–µ—Å–µ–ª–µ–π –µ–≥–æ —á–∏—Ç–∞—Ç—å.</p>
<h3>–î–ò–ê–ì–ù–û–°–¢–ò–ö–ê –° –û–ü–ò–°–ê–ù–ò–ï–ú</h3>
<p>–í —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–µ <strong>C</strong> –∏–º–µ–µ—Ç—Å—è –º–µ—Ö–∞–Ω–∏–∑–º –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –ø—Ä–æ–≥—Ä–∞–º–º—ã –Ω–∞ —ç—Ç–∞–ø–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è - –º–∞–∫—Ä–æ—Å <code>assert</code>, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã, –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞—è –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –æ—à–∏–±–∫–∏. –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–º –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º –¥–ª—è <code>assert</code> —è–≤–ª—è–µ—Ç—Å—è –≤—ã—Ä–∞–∂–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –≤ –Ω–æ—Ä–º–∞–ª—å–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –∏—Å—Ç–∏–Ω–Ω–æ. –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ –Ω–∏—á–µ–≥–æ –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∏ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –∏–¥—ë—Ç –¥–∞–ª—å—à–µ. –í –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ <code>assert</code> –ø–µ—á–∞—Ç–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ <a href="http://ru.wikipedia.org/wiki/%D0%A1%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D1%8B%D0%B5_%D0%BF%D0%BE%D1%82%D0%BE%D0%BA%D0%B8" rel="nofollow">—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ—Ç–æ–∫</a> <code>stderr</code> –∏ –≤—ã–∑—ã–≤–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é <code>abort()</code> –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º—ã.</p>
<p>–ù–∏–∫–æ–º—É –Ω–µ —Ö–æ—á–µ—Ç—Å—è —Ä–∞–∑–±–∏—Ä–∞—Ç—å—Å—è –≤ –¥–ª–∏–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏—è—Ö, –≤ —ç—Ç–æ–º —Å–ª—É—á–∞–µ –º—ã —Å—Ç–∞—Ä–∞–µ–º—Å—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —É–ø—Ä–æ—Å—Ç–∏—Ç—å –∫–æ–¥, –ø—Ä–µ–æ–±—Ä–∞–∑—É—è –µ–≥–æ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ, –±–æ–ª–µ–µ –º–∞–ª–µ–Ω—å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –ø–µ—Ä–µ–¥–∞–≤–∞—è –∏–º –∫–∞–∫–∏–µ-—Ç–æ –¥–∞–Ω–Ω—ã–µ. –ò—Å–ø–æ–ª—å–∑—É—è –º–∞–∫—Ä–æ—Å <code>assert</code>, —Ñ—É–Ω–∫—Ü–∏—è –º–æ–∂–µ—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–µ –µ–π –∞—Ä–≥—É–º–µ–Ω—Ç—ã –ø–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º —Å–≤–æ–µ–π –æ—Å–Ω–æ–≤–Ω–æ–π –ª–æ–≥–∏–∫–∏ –∏ —Ç–µ–º —Å–∞–º—ã–º –≤—ã—è–≤–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É –Ω–∞ —Å–∞–º–æ–º —Ä–∞–Ω–Ω–µ–º —ç—Ç–∞–ø–µ:</p>
<div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">sayHelloTo</span><span class="p">(</span><span class="k">const</span> <span class="n">Address</span><span class="o">*</span> <span class="n">aGoodFriend</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="n">aGoodFriend</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">Telegram</span> <span class="n">friendlyGreetings</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">};</span>

        <span class="cm">/* –ó–∞–ø–æ–ª–Ω—è–µ–º —Ç–µ–ª–µ–≥—Ä–∞–º–º—É telegram... */</span>

        <span class="n">sendTelegram</span><span class="p">(</span><span class="o">&amp;</span><span class="n">friendlyGreetings</span><span class="p">,</span> <span class="n">aGoodFriend</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">else</span> <span class="p">{</span>
        <span class="n">error</span><span class="p">(</span><span class="s">&quot;Empty address not allowed&quot;</span><span class="p">);</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">sendTelegram</span><span class="p">(</span><span class="k">const</span> <span class="n">Telegram</span><span class="o">*</span> <span class="n">telegram</span><span class="p">,</span> 
    <span class="k">const</span> <span class="n">Address</span><span class="o">*</span> <span class="n">receiver</span><span class="p">)</span> <span class="p">{</span>

    <span class="cm">/* –ü—Ä–æ–≤–µ—Ä–∫–∞. –¢–µ–ª–µ–≥—Ä–∞–º–º–∞ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç ? */</span>
    <span class="n">assert</span><span class="p">(</span><span class="n">telegram</span><span class="p">);</span>
    <span class="cm">/* –ü—Ä–æ–≤–µ—Ä–∫–∞. –ü–æ–ª—É—á–∞—Ç–µ–ª—å —Å—É—â–µ—Å—Ç–≤—É–µ—Ç ? */</span>
    <span class="n">assert</span><span class="p">(</span><span class="n">receiver</span><span class="p">);</span>

    <span class="cm">/* –û—Ç—Å—ã–ª–∞–µ–º —Ç–µ–ª–µ–≥—Ä–∞–º–º—É... */</span>
<span class="p">}</span>
</pre></div>


<p>–§–æ—Ä–º–∞—Ç –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –º–æ–∂–µ—Ç –Ω–µ–º–Ω–æ–≥–æ –æ—Ç–ª–∏—á–∞—Ç—å—Å—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞, –Ω–æ –ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —á—Ç–æ-—Ç–æ —Ç–∞–∫–æ–µ:</p>
<div class="highlight"><pre><span></span>Assertion failed: expression, file filename, line line number
</pre></div>


<p>–°—É—Ç—å –∏–¥–∏–æ–º—ã –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê –° –û–ü–ò–°–ê–ù–ò–ï–ú –≤ —Ç–æ–º, —á—Ç–æ –≤ <em>–≤—ã—Ä–∞–∂–µ–Ω–∏–µ</em> (expression) –º–æ–∂–Ω–æ –ø–æ–¥–º–µ—à–∞—Ç—å —Å—Ç—Ä–æ–∫—É - –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π. –≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç –Ω–µ —Ç–æ–ª—å–∫–æ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –º–µ—Å—Ç–æ, –≤ –∫–æ—Ç–æ—Ä–æ–º –≤–æ–∑–Ω–∏–∫–ª–∞ –ø—Ä–æ–±–ª–µ–º–∞, –Ω–æ –∏ –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ –ø–æ–Ω—è—Ç–Ω–æ –æ–ø–∏—Å–∞—Ç—å –µ—ë:</p>
<div class="highlight"><pre><span></span><span class="n">assert</span><span class="p">(</span><span class="n">receiver</span> <span class="o">&amp;&amp;</span> <span class="s">&quot;Is validated by the caller&quot;</span><span class="p">);</span>
</pre></div>


<p>–ì–ª–∞–≤–Ω—ã–º –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–æ–º —Ç–∞–∫–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞ —è–≤–ª—è–µ—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –æ–±—ä—ë–º –ø–∞–º—è—Ç–∏, –≤ –∫–æ—Ç–æ—Ä–æ–º –±—É–¥—É—Ç —Ö—Ä–∞–Ω–∏—Ç—å—Å—è —Å—Ç—Ä–æ–∫–∏ —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏. –î–ª—è –≤—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π —ç—Ç–æ –æ—Å–æ–±–µ–Ω–Ω–æ –∞–∫—Ç—É–∞–ª—å–Ω–æ. –û–¥–Ω–∞–∫–æ –Ω–µ —Å—Ç–æ–∏—Ç –∑–∞–±—ã–≤–∞—Ç—å, —á—Ç–æ –º–∞–∫—Ä–æ—Å <code>assert</code> - —ç—Ç–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ä–∏–π –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏, –µ–≥–æ –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è –º–æ–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å (<code>NDEBUG</code>).</p>
<h3>–°–¢–ê–¢–ò–ß–ï–°–ö–ê–Ø –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê</h3>
<p>–î–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫–∏ –≤ –ø—Ä–æ–≥—Ä–∞–º–º–µ –Ω–∞ —ç—Ç–∞–ø–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –æ–±—ã—á–Ω–æ –≤—ã—Ö–æ–¥–∏—Ç –¥–µ—à–µ–≤–ª–µ —á–µ–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–¥—É–∫—Ç –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö. –ù–∞–ø—Ä–∏–º–µ—Ä –ø–∞—Ä–æ—á–∫–∞ –º–∞–∫—Ä–æ—Å–æ–≤ –¥–ª—è –±–∏—Ç–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π:</p>
<div class="highlight"><pre><span></span><span class="cp">#define BIT_SET(a,b) ((a) |= (1&lt;&lt;(b)))</span>
<span class="cp">#define BIT_CLEAR(a,b) ((a) &amp;= ~(1&lt;&lt;(b)))</span>
<span class="cp">#define BIT_FLIP(a,b) ((a) ^= (1&lt;&lt;(b)))</span>
<span class="cp">#define BIT_CHECK(a,b) ((a) &amp; (1&lt;&lt;(b)))</span>

<span class="kt">char</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="c1">// OK</span>
<span class="n">BIT_SET</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>

<span class="c1">// BAD: 10 &gt; 8 * sizeof(a)</span>
<span class="n">BIT_SET</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>
</pre></div>


<p>–û—á–µ–≤–∏–¥–Ω–æ –æ–ø–µ—Ä–∞—Ü–∏—è <code>BIT_SET(a, 10);</code> –Ω–µ –∏–º–µ–µ—Ç —Å–º—ã—Å–ª–∞ –¥–ª—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π 8 –±–∏—Ç –∏ —Ç–∞–∫–æ–π –∫–ª–∞—Å—Å –æ—à–∏–±–æ–∫ –º–æ–∂–Ω–æ –∏ –Ω—É–∂–Ω–æ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞—Ç—å –µ—â—ë –Ω–∞ —ç—Ç–∞–ø–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏. –°—É—â–µ—Å—Ç–≤—É—é—Ç –º–Ω–æ–≥–æ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö <a href="http://www.pixelbeat.org/programming/gcc/static_assert.html" rel="nofollow">—Å–ø–æ—Å–æ–±–æ–≤</a> —ç—Ç–æ —Å–¥–µ–ª–∞—Ç—å.</p>
<div class="highlight"><pre><span></span><span class="cp">#define STATIC_ASSERT(cond) typedef int foo[(cond) ? 1 : -1]</span>

<span class="cp">#define BIT_SET(a,b) STATIC_ASSERT(8*sizeof(a)&gt;b); ((a) |= (1&lt;&lt;(b)))</span>

<span class="kt">char</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="c1">// OK</span>
<span class="n">BIT_SET</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>

<span class="c1">// compile error</span>
<span class="n">BIT_SET</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="mi">10</span><span class="p">);</span>
</pre></div>


<p>–¢–µ–ø–µ—Ä—å –ª–æ–≥–∏—á–µ—Å–∫–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∫–æ–¥ <code>BIT_SET(a, 10);</code> –ø–æ–ø—Ä–æ—Å—Ç—É –Ω–µ —Å–æ–±–µ—Ä—ë—Ç—Å—è —á—Ç–æ –∏ —Ç—Ä–µ–±–æ–≤–∞–ª–æ—Å—å –≤ –ø–æ—Å—Ç–∞–Ω–æ–≤–∫–µ –∑–∞–¥–∞—á–∏.</p>
<h3>–ö–û–ù–°–¢–ê–ù–¢–´ –°–õ–ï–í–ê</h3>
<p>–í —Å—Ç–∞–Ω–¥–∞—Ä—Ç <strong>–°</strong> –≤–æ—à–ª–∞ –æ–¥–Ω–∞ –∑–∞–≥–∞–¥–æ—á–Ω–∞—è –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è, –≤ –∫–æ—Ç–æ—Ä–æ–π –ª–µ–≥–∫–æ –∑–∞–ø—É—Ç–∞—Ç—å—Å—è / –æ—á–µ–ø—è—Ç–∞—Ç—å—Å—è (–º—ã —Å –Ω–µ–π –æ—Ç—á–∞—Å—Ç–∏ —É–∂–µ –ø–µ—Ä–µ—Å–µ–∫–∞–ª–∏—Å—å –ø—Ä–∏ –æ–ø–∏—Å–∞–Ω–∏–∏ –∏–¥–∏–æ–º—ã –ò–ú–ï–ù–û–í–ê–ù–ù–´–ï –ê–†–ì–£–ú–ï–ù–¢–´):</p>
<div class="highlight"><pre><span></span><span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="k">if</span> <span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="cm">/* –°—é–¥–∞ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –ø–æ–ø–∞–¥—ë–º (–ò–Ω–¥—É—Å—Å–∫–∏–π –∫–æ–¥) ! */</span>
<span class="p">}</span>

<span class="k">if</span> <span class="p">(</span><span class="n">x</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
    <span class="cm">/* –ê –≤–æ—Ç —Å—é–¥–∞ –ø–æ–ø–∞–¥—ë–º... */</span>
<span class="p">}</span>
</pre></div>


<p>–ò–Ω–æ–≥–¥–∞ –ø–æ–¥–æ–±–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è –≤—Å—ë –∂–µ –∏–º–µ—é—Ç —Å–∫—Ä—ã—Ç—ã–π —Å–º—ã—Å–ª:</p>
<div class="highlight"><pre><span></span><span class="n">Friend</span><span class="o">*</span> <span class="n">aGoodFriend</span> <span class="o">=</span> <span class="nb">NULL</span><span class="p">;</span>
<span class="p">...</span>
<span class="k">if</span> <span class="p">(</span><span class="n">aGoodFriend</span> <span class="o">=</span> <span class="n">findFriendLivingAt</span><span class="p">(</span><span class="n">address</span><span class="p">))</span> <span class="p">{</span>
    <span class="n">sayHelloTo</span><span class="p">(</span><span class="n">aGoodFriend</span><span class="p">);</span>
<span class="p">}</span>
<span class="k">else</span> <span class="p">{</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">&quot;I am not your friend&quot;</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>


<p>–° –ø–æ–º–æ—â—å—é –∏–¥–∏–æ–º—ã –ö–û–ù–°–¢–ê–ù–¢–´ –°–õ–ï–í–ê –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç –º–æ–∂–µ—Ç –±–æ–ª–µ–µ —Ç–æ—á–Ω–æ —É–∫–∞–∑–∞—Ç—å –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä—É, —á—Ç–æ –æ–Ω –∏–º–µ–ª –≤–≤–∏–¥—É –æ–ø–µ—Ä–∞—Ü–∏—é <em>—Å—Ä–∞–≤–Ω–µ–Ω–∏—è</em>, –∞ –Ω–µ <em>–ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏—è</em>. –°–ª–µ–¥—É—é—â–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏—è –Ω–µ –∏–º–µ–µ—Ç —Å–º—ã—Å–ª–∞ –∏ –ø–æ—ç—Ç–æ–º—É –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –¥–æ–ª–∂–µ–Ω —Ä—É–≥–∞—Ç—å—Å—è:</p>
<div class="highlight"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="mi">0</span> <span class="o">=</span> <span class="n">x</span><span class="p">)</span> <span class="p">{</span>
<span class="p">}</span>
</pre></div>


<p>–ê –≤–æ—Ç –ø–æ–¥–æ–±–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –Ω–µ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—Ç –∑–¥—Ä–∞–≤–æ–º—É —Å–º—ã—Å–ª—É:</p>
<div class="highlight"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="mi">0</span> <span class="o">==</span> <span class="n">x</span><span class="p">)</span> <span class="p">{</span>
    <span class="cm">/* –ï—Å–ª–∏ —Ö —Ä–∞–≤–µ–Ω –Ω—É–ª—é, –Ω–∞–º —Å—é–¥–∞ */</span>
<span class="p">}</span>
</pre></div>


<p>–ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –æ—á–µ–≤–∏–¥–Ω—É—é –ø–æ–ª—å–∑—É —ç—Ç–æ–π –∏–¥–∏–æ–º—ã, –æ–ø—ã—Ç–Ω—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç—ã —Å—á–∏—Ç–∞—é—Ç, —á—Ç–æ –æ–Ω–∞ –¥–µ–ª–∞–µ—Ç –∫–æ–¥ —Ç—Ä—É–¥–Ω—ã–º –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è, –∏, —á—Ç–æ –µ—â—ë —Ö—É–∂–µ, –Ω–µ—Ç –ø–æ–ª–Ω–æ–π –≥–∞—Ä–∞–Ω—Ç–∏–∏ —Ç–æ–≥–æ, —á—Ç–æ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä —Å–æ–æ–±—â–∏—Ç –æ–± –æ—à–∏–±–∫–µ. –ß—Ç–æ –∂, –∫ –º–Ω–µ–Ω–∏—é –æ–ø—ã—Ç–Ω—ã—Ö –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–æ–≤ —Å—Ç–æ–∏—Ç –ø—Ä–∏—Å–ª—É—à–∏–≤–∞—Ç—å—Å—è.</p>
<h3>–ò–ù–ö–ê–ü–°–£–õ–Ø–¶–ò–Ø –î–ê–ù–ù–´–•</h3>
<p>–í–∑–≥–ª—è–Ω–µ–º –Ω–∞ —Å—É–ø–µ—Ä —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é <a href="http://proiot.ru/blog/posts/2012/10/07/ispolzovanie-manchesterskogo-koda-na-primere/">–∫–æ–ª—å—Ü–µ–≤–æ–≥–æ –±—É—Ñ–µ—Ä–∞</a>:</p>
<p><em>circular_buffer.h</em></p>
<div class="highlight"><pre><span></span><span class="k">static</span> <span class="kt">void</span> <span class="nf">shift_circular</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>

<span class="kt">void</span> <span class="nf">circular_add_1</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>

<span class="kt">void</span> <span class="nf">circular_add_0</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>

<span class="kt">void</span> <span class="nf">circular_print</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>
</pre></div>


<p><em>circular_buffer.c</em></p>
<div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&quot;circular_buffer.h&quot;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp"></span>

<span class="k">static</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">rxbuf</span><span class="p">[</span><span class="mi">1</span> <span class="o">+</span> <span class="p">(</span><span class="mi">4</span><span class="o">*</span><span class="k">sizeof</span><span class="p">(</span><span class="kt">long</span><span class="p">))];</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">shift_circular</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
    <span class="o">*</span><span class="p">((</span> <span class="kt">unsigned</span> <span class="kt">long</span><span class="o">*</span> <span class="p">)</span><span class="o">&amp;</span><span class="n">rxbuf</span><span class="p">[</span><span class="mi">12</span><span class="p">])</span> <span class="o">&lt;&lt;=</span> <span class="mi">1</span><span class="p">;</span> 
    <span class="k">if</span> <span class="p">(</span><span class="n">rxbuf</span><span class="p">[</span><span class="mi">11</span><span class="p">]</span> <span class="o">&amp;</span> <span class="mh">0x80</span><span class="p">)</span> <span class="n">rxbuf</span><span class="p">[</span><span class="mi">12</span><span class="p">]</span> <span class="o">|=</span> <span class="mi">1</span><span class="p">;</span> 
    <span class="o">*</span><span class="p">((</span> <span class="kt">unsigned</span> <span class="kt">long</span><span class="o">*</span> <span class="p">)</span><span class="o">&amp;</span><span class="n">rxbuf</span><span class="p">[</span><span class="mi">8</span><span class="p">])</span> <span class="o">&lt;&lt;=</span> <span class="mi">1</span><span class="p">;</span> 
    <span class="k">if</span> <span class="p">(</span><span class="n">rxbuf</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">&amp;</span> <span class="mh">0x80</span><span class="p">)</span> <span class="n">rxbuf</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span> <span class="o">|=</span> <span class="mi">1</span><span class="p">;</span> 
    <span class="o">*</span><span class="p">((</span> <span class="kt">unsigned</span> <span class="kt">long</span><span class="o">*</span> <span class="p">)</span><span class="o">&amp;</span><span class="n">rxbuf</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span> <span class="o">&lt;&lt;=</span> <span class="mi">1</span><span class="p">;</span> 
    <span class="k">if</span> <span class="p">(</span><span class="n">rxbuf</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">&amp;</span> <span class="mh">0x80</span><span class="p">)</span> <span class="n">rxbuf</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">|=</span> <span class="mi">1</span><span class="p">;</span> 
    <span class="o">*</span><span class="p">((</span> <span class="kt">unsigned</span> <span class="kt">long</span><span class="o">*</span> <span class="p">)</span><span class="o">&amp;</span><span class="n">rxbuf</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">&lt;&lt;=</span> <span class="mi">1</span><span class="p">;</span> 
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">circular_add_0</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">shift_circular</span><span class="p">();</span> 
    <span class="n">rxbuf</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&amp;=</span> <span class="mh">0xFE</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">circular_add_1</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">shift_circular</span><span class="p">();</span> 
    <span class="n">rxbuf</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">|=</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">circular_print</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">char</span> <span class="n">i</span> <span class="o">=</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">rxbuf</span><span class="p">);</span> 
    <span class="k">while</span><span class="p">(</span><span class="n">i</span><span class="o">--</span><span class="p">)</span> 
        <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%.2x&quot;</span><span class="p">,</span> <span class="n">rxbuf</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
<span class="p">}</span>
</pre></div>


<p><em>usage.c</em></p>
<div class="highlight"><pre><span></span><span class="n">circular_add_1</span><span class="p">();</span>
<span class="n">circular_add_0</span><span class="p">();</span>
<span class="n">circular_print</span><span class="p">();</span>
</pre></div>


<p>–ß—Ç–æ –±—É–¥–µ—Ç, –∫–æ–≥–¥–∞ –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –æ–¥–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–æ–ª–µ–µ –æ–¥–Ω–æ–≥–æ –∫–æ–ª—å—Ü–µ–≤–æ–≥–æ –±—É—Ñ–µ—Ä–∞ ? –ü–æ—Å–∫–æ–ª—å–∫—É —Å–æ–±–∞–∫–æ–≤–æ–¥—ã <em>ANCI C</em> –Ω–µ <a href="http://stackoverflow.com/questions/4523497/typedef-fixed-length-array#answer-4523537" rel="nofollow">—Ä–µ–∫–æ–º–µ–Ω–¥—É—é—Ç</a> –∑–∞–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã–π —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö –∫–∞–∫ –º–∞—Å—Å–∏–≤ —Å –∑–∞–¥–∞–Ω–Ω–æ–π –≤–µ–ª–∏—á–∏–Ω–æ–π, –¥–∞–Ω–Ω—ã–µ –±—É—Ñ–µ—Ä–∞ –æ–±—ë—Ä–Ω—É—Ç—ã –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä—É <code>CircularBuffer</code>:</p>
<p><em>circular_buffer.h</em></p>
<div class="highlight"><pre><span></span><span class="k">typedef</span> <span class="k">struct</span> <span class="n">CircularBuffer</span> <span class="p">{</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">bytes</span><span class="p">[</span><span class="mi">1</span> <span class="o">+</span> <span class="p">(</span><span class="mi">4</span><span class="o">*</span><span class="k">sizeof</span><span class="p">(</span><span class="kt">long</span><span class="p">))];</span>
<span class="p">}</span> <span class="n">CircularBuffer</span><span class="p">;</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">shift_circular</span><span class="p">(</span><span class="kt">char</span><span class="o">*</span><span class="p">);</span>

<span class="kt">void</span> <span class="nf">circular_add_1</span><span class="p">(</span><span class="n">CircularBuffer</span><span class="o">*</span><span class="p">);</span>

<span class="kt">void</span> <span class="nf">circular_add_0</span><span class="p">(</span><span class="n">CircularBuffer</span><span class="o">*</span><span class="p">);</span>

<span class="kt">void</span> <span class="nf">circular_print</span><span class="p">(</span><span class="n">CircularBuffer</span><span class="o">*</span><span class="p">);</span>
</pre></div>


<p><em>circular_buffer.c</em></p>
<div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&quot;circular_buffer.h&quot;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp"></span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">shift_circular</span><span class="p">(</span><span class="kt">char</span><span class="o">*</span> <span class="n">rxbuf</span><span class="p">)</span> <span class="p">{</span>
    <span class="o">*</span><span class="p">((</span> <span class="kt">unsigned</span> <span class="kt">long</span><span class="o">*</span> <span class="p">)</span><span class="o">&amp;</span><span class="n">rxbuf</span><span class="p">[</span><span class="mi">12</span><span class="p">])</span> <span class="o">&lt;&lt;=</span> <span class="mi">1</span><span class="p">;</span> 
    <span class="k">if</span> <span class="p">(</span><span class="n">rxbuf</span><span class="p">[</span><span class="mi">11</span><span class="p">]</span> <span class="o">&amp;</span> <span class="mh">0x80</span><span class="p">)</span> <span class="n">rxbuf</span><span class="p">[</span><span class="mi">12</span><span class="p">]</span> <span class="o">|=</span> <span class="mi">1</span><span class="p">;</span> 
    <span class="o">*</span><span class="p">((</span> <span class="kt">unsigned</span> <span class="kt">long</span><span class="o">*</span> <span class="p">)</span><span class="o">&amp;</span><span class="n">rxbuf</span><span class="p">[</span><span class="mi">8</span><span class="p">])</span> <span class="o">&lt;&lt;=</span> <span class="mi">1</span><span class="p">;</span> 
    <span class="k">if</span> <span class="p">(</span><span class="n">rxbuf</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">&amp;</span> <span class="mh">0x80</span><span class="p">)</span> <span class="n">rxbuf</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span> <span class="o">|=</span> <span class="mi">1</span><span class="p">;</span> 
    <span class="o">*</span><span class="p">((</span> <span class="kt">unsigned</span> <span class="kt">long</span><span class="o">*</span> <span class="p">)</span><span class="o">&amp;</span><span class="n">rxbuf</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span> <span class="o">&lt;&lt;=</span> <span class="mi">1</span><span class="p">;</span> 
    <span class="k">if</span> <span class="p">(</span><span class="n">rxbuf</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">&amp;</span> <span class="mh">0x80</span><span class="p">)</span> <span class="n">rxbuf</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">|=</span> <span class="mi">1</span><span class="p">;</span> 
    <span class="o">*</span><span class="p">((</span> <span class="kt">unsigned</span> <span class="kt">long</span><span class="o">*</span> <span class="p">)</span><span class="o">&amp;</span><span class="n">rxbuf</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">&lt;&lt;=</span> <span class="mi">1</span><span class="p">;</span> 
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">circular_add_0</span><span class="p">(</span><span class="n">CircularBuffer</span><span class="o">*</span> <span class="n">circular_buffer</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">shift_circular</span><span class="p">(</span><span class="n">circular_buffer</span><span class="o">-&gt;</span><span class="n">bytes</span><span class="p">);</span> 
    <span class="n">circular_buffer</span><span class="o">-&gt;</span><span class="n">bytes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&amp;=</span> <span class="mh">0xFE</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">circular_add_1</span><span class="p">(</span><span class="n">CircularBuffer</span><span class="o">*</span> <span class="n">circular_buffer</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">shift_circular</span><span class="p">(</span><span class="n">circular_buffer</span><span class="o">-&gt;</span><span class="n">bytes</span><span class="p">);</span> 
    <span class="n">circular_buffer</span><span class="o">-&gt;</span><span class="n">bytes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">|=</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">circular_print</span><span class="p">(</span><span class="n">CircularBuffer</span><span class="o">*</span> <span class="n">circular_buffer</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">char</span> <span class="n">i</span> <span class="o">=</span> <span class="k">sizeof</span><span class="p">(</span><span class="o">*</span><span class="n">circular_buffer</span><span class="p">);</span> 
    <span class="k">while</span><span class="p">(</span><span class="n">i</span><span class="o">--</span><span class="p">)</span> 
        <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%.2x&quot;</span><span class="p">,</span> <span class="n">circular_buffer</span><span class="o">-&gt;</span><span class="n">bytes</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
<span class="p">}</span>
</pre></div>


<p><em>usage.c</em></p>
<div class="highlight"><pre><span></span><span class="k">static</span> <span class="n">CircularBuffer</span> <span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">;</span>
<span class="cm">/* a.bytes[0] = 42; –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –ø—Ä–æ–≥–ª–æ—Ç–∏—Ç, –Ω–µ –ø–æ —Ñ–µ–Ω—à—É—é :( */</span>
<span class="n">circular_add_1</span><span class="p">(</span><span class="o">&amp;</span><span class="n">a</span><span class="p">);</span>
<span class="n">circular_add_0</span><span class="p">(</span><span class="o">&amp;</span><span class="n">a</span><span class="p">);</span>
<span class="n">circular_print</span><span class="p">(</span><span class="o">&amp;</span><span class="n">a</span><span class="p">);</span>
</pre></div>


<p>–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ <code>circular_buffer</code> –æ–ø–∏—Å–∞–Ω–∞ –≤ <em>circular_buffer.h</em>, –∞ –∑–Ω–∞—á–∏—Ç –≤–∏–¥–Ω–∞ –≤–µ–∑–¥–µ –≥–¥–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è —ç—Ç–æ—Ç –∑–∞–≥–æ–ª–æ–≤–æ—á–Ω—ã–π —Ñ–∞–π–ª. –ü–æ–±–æ—Ä–æ—Ç—å —ç—Ç–æ –º–æ–∂–Ω–æ —Å –ø–æ–º–æ—â—å—é —Ç.–Ω. <strong>–Ω–µ–∑–∞–≤–µ—Ä—à—ë–Ω–Ω–æ–≥–æ —Ç–∏–ø–∞ –¥–∞–Ω–Ω—ã—Ö</strong> –∏ —Ñ–∞–±—Ä–∏–∫–∏:</p>
<p><em>circular_buffer.h</em></p>
<div class="highlight"><pre><span></span><span class="k">typedef</span> <span class="k">struct</span> <span class="n">CircularBuffer</span><span class="o">*</span> <span class="n">CircularBufferPtr</span><span class="p">;</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">shift_circular</span><span class="p">(</span><span class="kt">char</span><span class="o">*</span><span class="p">);</span>

<span class="n">CircularBufferPtr</span> <span class="nf">circular_create</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>

<span class="kt">void</span> <span class="nf">circular_add_1</span><span class="p">(</span><span class="n">CircularBufferPtr</span><span class="p">);</span>

<span class="kt">void</span> <span class="nf">circular_add_0</span><span class="p">(</span><span class="n">CircularBufferPtr</span><span class="p">);</span>

<span class="kt">void</span> <span class="nf">circular_print</span><span class="p">(</span><span class="n">CircularBufferPtr</span><span class="p">);</span>
</pre></div>


<p><em>circular_buffer.c</em></p>
<div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&quot;circular_buffer.h&quot;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;stdlib.h&gt;</span><span class="cp"></span>

<span class="k">struct</span> <span class="n">CircularBuffer</span> <span class="p">{</span>
    <span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">bytes</span><span class="p">[</span><span class="mi">1</span> <span class="o">+</span> <span class="p">(</span><span class="mi">4</span><span class="o">*</span><span class="k">sizeof</span><span class="p">(</span><span class="kt">long</span><span class="p">))];</span>
<span class="p">};</span>

<span class="k">static</span> <span class="kt">void</span> <span class="nf">shift_circular</span><span class="p">(</span><span class="kt">char</span><span class="o">*</span> <span class="n">rxbuf</span><span class="p">)</span> <span class="p">{</span>
    <span class="o">*</span><span class="p">((</span> <span class="kt">unsigned</span> <span class="kt">long</span><span class="o">*</span> <span class="p">)</span><span class="o">&amp;</span><span class="n">rxbuf</span><span class="p">[</span><span class="mi">12</span><span class="p">])</span> <span class="o">&lt;&lt;=</span> <span class="mi">1</span><span class="p">;</span> 
    <span class="k">if</span> <span class="p">(</span><span class="n">rxbuf</span><span class="p">[</span><span class="mi">11</span><span class="p">]</span> <span class="o">&amp;</span> <span class="mh">0x80</span><span class="p">)</span> <span class="n">rxbuf</span><span class="p">[</span><span class="mi">12</span><span class="p">]</span> <span class="o">|=</span> <span class="mi">1</span><span class="p">;</span> 
    <span class="o">*</span><span class="p">((</span> <span class="kt">unsigned</span> <span class="kt">long</span><span class="o">*</span> <span class="p">)</span><span class="o">&amp;</span><span class="n">rxbuf</span><span class="p">[</span><span class="mi">8</span><span class="p">])</span> <span class="o">&lt;&lt;=</span> <span class="mi">1</span><span class="p">;</span> 
    <span class="k">if</span> <span class="p">(</span><span class="n">rxbuf</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">&amp;</span> <span class="mh">0x80</span><span class="p">)</span> <span class="n">rxbuf</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span> <span class="o">|=</span> <span class="mi">1</span><span class="p">;</span> 
    <span class="o">*</span><span class="p">((</span> <span class="kt">unsigned</span> <span class="kt">long</span><span class="o">*</span> <span class="p">)</span><span class="o">&amp;</span><span class="n">rxbuf</span><span class="p">[</span><span class="mi">4</span><span class="p">])</span> <span class="o">&lt;&lt;=</span> <span class="mi">1</span><span class="p">;</span> 
    <span class="k">if</span> <span class="p">(</span><span class="n">rxbuf</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">&amp;</span> <span class="mh">0x80</span><span class="p">)</span> <span class="n">rxbuf</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">|=</span> <span class="mi">1</span><span class="p">;</span> 
    <span class="o">*</span><span class="p">((</span> <span class="kt">unsigned</span> <span class="kt">long</span><span class="o">*</span> <span class="p">)</span><span class="o">&amp;</span><span class="n">rxbuf</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="o">&lt;&lt;=</span> <span class="mi">1</span><span class="p">;</span> 
<span class="p">}</span>

<span class="n">CircularBufferPtr</span> <span class="nf">circular_create</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">CircularBufferPtr</span> <span class="n">p</span> <span class="o">=</span> <span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span> <span class="o">*</span> <span class="n">p</span><span class="p">);</span>
    <span class="k">return</span> <span class="n">p</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">circular_add_0</span><span class="p">(</span><span class="n">CircularBufferPtr</span> <span class="n">circular_buffer</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">shift_circular</span><span class="p">(</span><span class="n">circular_buffer</span><span class="o">-&gt;</span><span class="n">bytes</span><span class="p">);</span>
    <span class="n">circular_buffer</span><span class="o">-&gt;</span><span class="n">bytes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">&amp;=</span> <span class="mh">0xFE</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">circular_add_1</span><span class="p">(</span><span class="n">CircularBufferPtr</span> <span class="n">circular_buffer</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">shift_circular</span><span class="p">(</span><span class="n">circular_buffer</span><span class="o">-&gt;</span><span class="n">bytes</span><span class="p">);</span>
    <span class="n">circular_buffer</span><span class="o">-&gt;</span><span class="n">bytes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">|=</span> <span class="mi">1</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">circular_print</span><span class="p">(</span><span class="n">CircularBufferPtr</span> <span class="n">circular_buffer</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">char</span> <span class="n">i</span> <span class="o">=</span> <span class="k">sizeof</span><span class="p">(</span><span class="o">*</span><span class="n">circular_buffer</span><span class="p">);</span> 
    <span class="k">while</span><span class="p">(</span><span class="n">i</span><span class="o">--</span><span class="p">)</span> 
        <span class="n">printf</span><span class="p">(</span><span class="s">&quot;%.2x&quot;</span><span class="p">,</span> <span class="n">circular_buffer</span><span class="o">-&gt;</span><span class="n">bytes</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
<span class="p">}</span>
</pre></div>


<p><em>usage.c</em></p>
<div class="highlight"><pre><span></span><span class="n">CircularBufferPtr</span> <span class="n">a</span> <span class="o">=</span> <span class="n">circular_create</span><span class="p">(),</span> <span class="n">b</span> <span class="o">=</span> <span class="n">circular_create</span><span class="p">();</span>
<span class="cm">/* a-&gt;bytes[0] = 42; –æ—à–∏–±–∫–∞: –¥–æ—Å—Ç—É–ø –ø–æ —É–∫–∞–∑–∞—Ç–µ–ª—é –Ω–∞ –Ω–µ–ø–æ–ª–Ω—ã–π —Ç–∏–ø */</span>
<span class="n">circular_add_1</span><span class="p">(</span><span class="n">a</span><span class="p">);</span>
<span class="n">circular_print</span><span class="p">(</span><span class="n">a</span><span class="p">);</span>
<span class="n">free</span><span class="p">(</span><span class="n">a</span><span class="p">);</span>
<span class="n">free</span><span class="p">(</span><span class="n">b</span><span class="p">);</span>
</pre></div>


<p>–ù–µ–∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–π —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö –∏–Ω–æ–≥–¥–∞ –Ω–∞–∑—ã–≤–∞—é—Ç <em>–Ω–µ–ø–æ–ª–Ω—ã–º</em>, –∞ –≤ –æ—Ä–∏–≥–∏–Ω–∞–ª–µ –Ω–∞ –∞–Ω–≥–ª. <em>incomplete type</em>.</p><p>There are <a href="http://proiot.ru/blog/posts/2012/10/08/idiomy-v-ansi-c/#disqus_thread">comments</a>.</p>                </article>
            </aside><!-- /#featured -->
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a rel="nofollow" href="http://getpelican.com/">Pelican</a></li>
                            <li><a rel="nofollow" href="http://python.org/">Python.org</a></li>
                            <li><a rel="nofollow" href="http://jinja.pocoo.org/">Jinja2</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="http://proiot.ru/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>

                            <li><a rel="nofollow" href="http://github.com/mazko">github</a></li>
                            <li><a rel="nofollow" href="http://linkedin.com/in/mazko">linkedin</a></li>
                            <li><a rel="nofollow" href="http://stackoverflow.com/users/281102/oleg-mazko">stackoverflow</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

<script type="text/javascript">
    var disqus_shortname = 'mazko';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'https://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
</body>
</html>