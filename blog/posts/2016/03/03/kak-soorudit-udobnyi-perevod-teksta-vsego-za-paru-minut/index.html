<!DOCTYPE html>
<html lang="ru">
<head>
        <meta charset="utf-8" />
        <title>–ö–∞–∫ —Å–æ–æ—Ä—É–¥–∏—Ç—å —É–¥–æ–±–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥ —Ç–µ–∫—Å—Ç–∞ –≤—Å–µ–≥–æ –∑–∞ –ø–∞—Ä—É –º–∏–Ω—É—Ç</title>
        <link rel="stylesheet" href="https://mazko.github.io/blog/theme/css/main.css" />
        <link href="https://mazko.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="üè† –ò–Ω—Ç–µ—Ä–Ω–µ—Ç –í—Å–µ–≥–æ üöó Atom Feed" />

        <!--[if IE]>
            <script src="https://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
<a rel="nofollow" href="http://github.com/mazko">
<img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub" />
</a>
        <header id="banner" class="body">
                <h1><a href="https://mazko.github.io/">üè† –ò–Ω—Ç–µ—Ä–Ω–µ—Ç –í—Å–µ–≥–æ üöó </a></h1>
                <nav><ul>
                    <li class="active"><a href="https://mazko.github.io/blog/category/admin/">Admin</a></li>
                    <li><a href="https://mazko.github.io/blog/category/electronics/">Electronics</a></li>
                    <li><a href="https://mazko.github.io/blog/category/embedded/">Embedded</a></li>
                    <li><a href="https://mazko.github.io/blog/category/iot/">IoT</a></li>
                    <li><a href="https://mazko.github.io/blog/category/java/">Java</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="https://mazko.github.io/blog/posts/2016/03/03/kak-soorudit-udobnyi-perevod-teksta-vsego-za-paru-minut/" rel="bookmark"
           title="Permalink to –ö–∞–∫ —Å–æ–æ—Ä—É–¥–∏—Ç—å —É–¥–æ–±–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥ —Ç–µ–∫—Å—Ç–∞ –≤—Å–µ–≥–æ –∑–∞ –ø–∞—Ä—É –º–∏–Ω—É—Ç">–ö–∞–∫ —Å–æ–æ—Ä—É–¥–∏—Ç—å —É–¥–æ–±–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥ —Ç–µ–∫—Å—Ç–∞ –≤—Å–µ–≥–æ –∑–∞ –ø–∞—Ä—É –º–∏–Ω—É—Ç</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2016-03-03T00:00:00+02:00">
                –ß—Ç 03 –º–∞—Ä—Ç–∞ 2016
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://mazko.github.io/blog/author/oleg-mazko/">Oleg Mazko</a>
        </address>
<p>In <a href="https://mazko.github.io/blog/category/admin/">Admin</a>.</p>
<p>tags: <a href="https://mazko.github.io/blog/tag/rest">REST</a> <a href="https://mazko.github.io/blog/tag/nlp">NLP</a> </p>
</footer><!-- /.post-info -->      <p>–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Å–∏—Ç—É–∞—Ü–∏—è: —á–∏—Ç–∞–µ–º –∫–∞–∫—É—é-–Ω–∏–±—É–¥—å <em>e-book</em> –Ω–∞ –Ω–µ–Ω–∞—à–µ–º —è–∑—ã–∫–µ –∏ –≤–∏–¥–∏–º –Ω–µ–∑–Ω–∞–∫–æ–º–æ–µ —Å–ª–æ–≤–æ. –í–æ–ª—à–µ–±–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –≤ –ø–æ–º–æ—â—å:</p>
<ul>
<li>
<p>–°—á–∏—Ç—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â–∏–π –≤—ã–¥–µ–ª–µ–Ω–Ω—ã–π –≤ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç —Ç–µ–∫—Å—Ç–∞</p>
</li>
<li>
<p>–°–∫–∞—Ä–º–ª–∏–≤–∞–µ—Ç —ç—Ç–æ—Ç —Ç–µ–∫—Å—Ç –≤–µ–±-—Å–µ—Ä–≤–∏—Å—É —Å–∏–Ω—Ç–µ–∑–∞—Ç–æ—Ä—É —Ä–µ—á–∏, –≤ –æ—Ç–≤–µ—Ç –ø–æ–ª—É—á–∞–µ—Ç –∞—É–¥–∏–æ —Ñ–∞–π–ª –∏ –ø—Ä–æ–∏–≥—Ä—ã–≤–∞–µ—Ç. –ù–∞ —Å–ª—É—Ö –∫–∞–∫-—Ç–æ –æ–Ω–æ –ª—É—á—à–µ –∑–∞–ø–æ–º–∏–Ω–∞–µ—Ç—Å—è :)</p>
</li>
<li>
<p>–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å–∫–∞—Ä–º–ª–∏–≤–∞–µ—Ç —Ç–µ–∫—Å—Ç –≤–µ–±-—Å–µ—Ä–≤–∏—Å—É –ø–µ—Ä–µ–≤–æ–¥—á–∏–∫—É, —Ü–µ–ª–µ–≤–æ–π —è–∑—ã–∫ –∫–∞–∫ –≤ —Å–∏—Å—Ç–µ–º–µ, –ø–∞—Ä—Å–∏—Ç –æ—Ç–≤–µ—Ç –∏ –≤—ã—Ç–∞—Å–∫–∏–≤–∞–µ—Ç –æ—Ç—Ç—É–¥–∞ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ —Å–∞–º –ø–µ—Ä–µ–≤–æ–¥</p>
</li>
<li>
<p>–í—ã–≤–æ–¥–∏—Ç –ø—Ä–∏—è—Ç–Ω–æ–µ –≤—Å–ø–ª—ã–≤–∞—é—â–µ–µ –æ–∫–æ—à–∫–æ —Å –ø–µ—Ä–µ–≤–µ–¥—ë–Ω–Ω—ã–º —Å–æ–¥–µ—Ä–∂–∏–º—ã–º, –¥–∞–∂–µ –∫–∞—Ä—Ç–∏–Ω–∫–∞ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –ø–æ–¥ –∫–∞—Ç–æ–º</p>
</li>
</ul>
<p>–ü—Ä–∏–≤–æ–∂—É –¥–≤–µ –≤–µ—Ä—Å–∏–∏ —Å–∫—Ä–∏–ø—Ç–∞ <em>xsel-tr-notify.sh</em>, –ø–µ—Ä–≤–∞—è –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞ —Ç–µ–∫—Å—Ç–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∏–∑ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ –≥–æ—Ç–æ–≤–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ <em>translate-shell</em>, —Ç–æ–≥–¥–∞ –∫–∞–∫ –≤—Ç–æ—Ä–∞—è —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞–ø—Ä—è–º—É—é c REST API.</p>
<p><img alt="screenshot" src="https://mazko.github.io/blog/posts/2016/03/03/kak-soorudit-udobnyi-perevod-teksta-vsego-za-paru-minut/translate-ubuntu.gif" style="width:100%; border:1px solid #ddd;"></p>
<p><em>xsel-tr-notify.sh</em></p>
<div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env bash</span>

<span class="c1"># chmod +x xsel-tr-notify.sh &amp;&amp; sudo ln -s `pwd`/$_ /usr/local/bin/xsel-translate-notify</span>
<span class="c1"># apt-get install libnotify-bin xsel</span>
<span class="c1"># git clone https://github.com/soimort/translate-shell &amp;&amp; cd translate-shell/ &amp;&amp; make</span>

<span class="c1"># Exit immediately if a command exits with a non-zero status.</span>
<span class="nb">set</span> -e

<span class="c1"># capture current OS selection into variable</span>
<span class="nv">text</span><span class="o">=</span><span class="sb">`</span>xsel -o<span class="sb">`</span>

<span class="k">if</span> <span class="o">[[</span> ! -z <span class="nv">$text</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
  <span class="c1"># Absolute path to this script, e.g. /home/user/bin/foo.sh</span>
  <span class="nv">SCRIPT</span><span class="o">=</span><span class="sb">`</span>readlink -f <span class="s2">&quot;</span><span class="nv">$0</span><span class="s2">&quot;</span><span class="sb">`</span>

  <span class="c1"># Absolute path this script is in, thus /home/user/bin</span>
  <span class="nv">SCRIPTPATH</span><span class="o">=</span><span class="sb">`</span>dirname <span class="s2">&quot;</span><span class="nv">$SCRIPT</span><span class="s2">&quot;</span><span class="sb">`</span>

  <span class="nv">translate</span><span class="o">=</span><span class="sb">`</span><span class="nv">$SCRIPTPATH</span>/translate-shell/build/trans -sp -brief :<span class="si">${</span><span class="nv">LANGUAGE</span><span class="p">:</span><span class="nv">0</span><span class="p">:</span><span class="nv">2</span><span class="si">}</span> <span class="s2">&quot;</span><span class="nv">$text</span><span class="s2">&quot;</span><span class="sb">`</span>

  <span class="c1"># UI notify</span>
  notify-send -u critical <span class="s2">&quot;</span><span class="nv">$text</span><span class="s2">&quot;</span> <span class="s2">&quot;</span><span class="nv">$translate</span><span class="s2">&quot;</span>
<span class="k">fi</span>
</pre></div>


<p>–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç ? –í –∫–∞—á–µ—Å—Ç–≤–µ –ø—Ä–∏–º–µ—Ä–∞ –Ω–∏–∂–Ω–µ –ø–æ–∫–∞–∑–∞–Ω —Å–∫—Ä–∏–ø—Ç, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É—é—Ç REST API –Ø–Ω–¥–µ–∫—Å–∞. –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ–µ API –µ—Å—Ç—å –∏ —É –¥—Ä—É–≥–∏—Ö –ø–æ–∏—Å–∫–æ–≤–∏–∫–æ–≤ ‚Äî Google, Bing –∏ —Ç.–¥ –∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ <em>translate-shell</em> —Ç–æ–∂–µ –µ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞ —Ç–µ–∫—Å—Ç–∞.</p>
<p><em>xsel-tr-notify.sh</em></p>
<div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/env bash</span>

<span class="c1"># chmod +x xsel-tr-notify.sh &amp;&amp; sudo ln -s `pwd`/$_ /usr/local/bin/xsel-translate-notify</span>
<span class="c1"># apt-get install mpg123 libnotify-bin xsel curl</span>

<span class="c1"># Exit immediately if a command exits with a non-zero status.</span>
<span class="nb">set</span> -e

<span class="nb">echo</span> <span class="s2">&quot;Powered by Yandex api&quot;</span>

<span class="c1"># https://tech.yandex.ru/translate/</span>
<span class="nv">YA_TRNSL_KEY</span><span class="o">=</span>your_trnsl_key_here
<span class="c1"># https://tech.yandex.ru/speechkit/cloud/doc/dg/concepts/speechkit-dg-tts-docpage/</span>
<span class="nv">YA_TTS_KEY</span><span class="o">=</span>your_tts_key_here

<span class="c1"># capture current OS selection into variable</span>
<span class="nv">text</span><span class="o">=</span><span class="sb">`</span>xsel -o<span class="sb">`</span>

<span class="c1"># text to speech in background, non-blocking</span>
curl -sf <span class="s1">&#39;https://tts.voicetech.yandex.net/generate&#39;</span> <span class="se">\</span>
  -d <span class="s2">&quot;text=</span><span class="nv">$text</span><span class="s2">&quot;</span>       <span class="se">\</span>
  -d <span class="s1">&#39;format=mp3&#39;</span>       <span class="se">\</span>
  -d <span class="s1">&#39;lang=en-EN&#39;</span>       <span class="se">\</span>
  -d <span class="s1">&#39;speaker=zahar&#39;</span>    <span class="se">\</span>
  -d <span class="s1">&#39;emotion=good&#39;</span>     <span class="se">\</span>
  -d <span class="s2">&quot;key=</span><span class="nv">$YA_TTS_KEY</span><span class="s2">&quot;</span>  <span class="se">\</span>
  <span class="p">|</span> mpg123 --stereo - <span class="p">&amp;</span>

<span class="c1"># translate text &amp; parse json response</span>
<span class="nv">translate</span><span class="o">=</span><span class="sb">`</span>curl -sf <span class="s1">&#39;https://translate.yandex.net/api/v1.5/tr.json/translate&#39;</span> <span class="se">\</span>
  -d <span class="s2">&quot;key=</span><span class="nv">$YA_TRNSL_KEY</span><span class="s2">&quot;</span>    <span class="se">\</span>
  -d <span class="s2">&quot;text=</span><span class="nv">$text</span><span class="s2">&quot;</span>           <span class="se">\</span>
  -d <span class="s2">&quot;lang=</span><span class="si">${</span><span class="nv">LANGUAGE</span><span class="p">:</span><span class="nv">0</span><span class="p">:</span><span class="nv">2</span><span class="si">}</span><span class="s2">&quot;</span> <span class="se">\</span>
  <span class="p">|</span> sed <span class="s1">&#39;s/.*\[\&quot;\(.*\)\&quot;\].*/\1/&#39;</span><span class="sb">`</span>

<span class="c1"># UI notify</span>
notify-send -u critical <span class="s2">&quot;</span><span class="nv">$text</span><span class="s2">&quot;</span> <span class="s2">&quot;</span><span class="nv">$translate</span><span class="s2">&quot;</span>
</pre></div>


<p>–ö–ª—é—á–∏ <strong>–Ø–Ω–¥–µ–∫—Å</strong> –¥–∞—ë—Ç –±–µ—Å–ø–ª–∞—Ç–Ω–æ –¥–ª—è –Ω–µ–∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏—Ö —Ü–µ–ª–µ–π. –í –ø—Ä–æ—Å—Ç–µ–π—à–µ–º —Å–ª—É—á–∞–µ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–∫—Ä–∏–ø—Ç–∞ —Å—Ç–æ–∏—Ç –ø—Ä–æ—Å—Ç–æ –≤—ã–¥–µ–ª–∏—Ç—å —Ç–µ–∫—Å—Ç –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç—å <code>xsel-translate-notify</code>, –Ω–æ –∫—É–¥–∞ —É–¥–æ–±–Ω–µ–π –≤—ã–ø–æ–ª–Ω—è—Ç—å —ç—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–µ–π –∫–ª–∞–≤–∏—à.</p>
    </div><!-- /.entry-content -->
  </article>
</section>


<div class="body" id="proiot-comments">
  <div class="comments">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
      var disqus_shortname = 'mazko';
      var disqus_identifier = 'blog/posts/2016/03/03/kak-soorudit-udobnyi-perevod-teksta-vsego-za-paru-minut/';
      var disqus_url = 'https://mazko.github.io/blog/posts/2016/03/03/kak-soorudit-udobnyi-perevod-teksta-vsego-za-paru-minut/';
      (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//mazko.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
    </script>
    <noscript>Please enable JavaScript to view the comments.</noscript>
  </div>
</div>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a rel="nofollow" href="http://getpelican.com/">Pelican</a></li>
                            <li><a rel="nofollow" href="http://python.org/">Python.org</a></li>
                            <li><a rel="nofollow" href="http://jinja.pocoo.org/">Jinja2</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="https://mazko.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>

                            <li><a rel="nofollow" href="http://github.com/mazko">github</a></li>
                            <li><a rel="nofollow" href="http://linkedin.com/in/mazko">linkedin</a></li>
                            <li><a rel="nofollow" href="http://stackoverflow.com/users/281102/oleg-mazko">stackoverflow</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

<script type="text/javascript">
    var disqus_shortname = 'mazko';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'https://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
</body>
</html>