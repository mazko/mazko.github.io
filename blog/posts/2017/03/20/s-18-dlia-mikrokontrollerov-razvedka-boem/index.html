<!DOCTYPE html>
<html lang="ru">
<head>
        <meta charset="utf-8" />
        <title>–°++ (18+) –¥–ª—è –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤ - —Ä–∞–∑–≤–µ–¥–∫–∞ –±–æ–µ–º</title>
        <link rel="stylesheet" href="https://mazko.github.io/blog/theme/css/main.css" />
        <link href="https://mazko.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="üè† –ò–Ω—Ç–µ—Ä–Ω–µ—Ç –í—Å–µ–≥–æ üöó Atom Feed" />

        <!--[if IE]>
            <script src="https://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
<a rel="nofollow" href="http://github.com/mazko">
<img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub" />
</a>
        <header id="banner" class="body">
                <h1><a href="https://mazko.github.io/">üè† –ò–Ω—Ç–µ—Ä–Ω–µ—Ç –í—Å–µ–≥–æ üöó </a></h1>
                <nav><ul>
                    <li><a href="https://mazko.github.io/blog/category/admin/">Admin</a></li>
                    <li><a href="https://mazko.github.io/blog/category/electronics/">Electronics</a></li>
                    <li class="active"><a href="https://mazko.github.io/blog/category/embedded/">Embedded</a></li>
                    <li><a href="https://mazko.github.io/blog/category/iot/">IoT</a></li>
                    <li><a href="https://mazko.github.io/blog/category/java/">Java</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="https://mazko.github.io/blog/posts/2017/03/20/s-18-dlia-mikrokontrollerov-razvedka-boem/" rel="bookmark"
           title="Permalink to –°++ (18+) –¥–ª—è –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤ - —Ä–∞–∑–≤–µ–¥–∫–∞ –±–æ–µ–º">–°++ (18+) –¥–ª—è –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤ - —Ä–∞–∑–≤–µ–¥–∫–∞ –±–æ–µ–º</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2017-03-20T00:00:00+02:00">
                –ü–Ω 20 –º–∞—Ä—Ç–∞ 2017
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://mazko.github.io/blog/author/oleg-mazko/">Oleg Mazko</a>
        </address>
<p>In <a href="https://mazko.github.io/blog/category/embedded/">Embedded</a>.</p>
<p>tags: <a href="https://mazko.github.io/blog/tag/msp430">msp430</a> </p>
</footer><!-- /.post-info -->      <blockquote>
<p>–ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –°++ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–æ–≤ –Ω–µ –∑–Ω–∞—é—Ç, —á—Ç–æ –¥–µ–ª–∞–µ—Ç –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –°++ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–æ–≤. ‚Äî –ê–Ω–¥—Ä–µ–π –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–µ—Å–∫—É</p>
</blockquote>
<p>–ü—Ä–æ–≥—Ä–∞–º–º—ã –¥–ª—è –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤ –¥–µ-—Ñ–∞–∫—Ç–æ <a href="https://mazko.github.io/blog/posts/2017/01/13/simuliatsiia-mikrokontrollerov-picsimjs/">–ø–∏—à—É—Ç—Å—è</a> –ª–∏–±–æ –Ω–∞ –°–∏ –ª–∏–±–æ –Ω–∞ –∞—Å—Å–µ–º–±–ª–µ—Ä–µ. –°–∏ —ç—Ç–æ –ø—Ä–æ—Ü–µ–¥—É—Ä–Ω—ã–π —è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–ª–∞–±–æ–π —Ç–∏–ø–∏–∑–∞—Ü–∏–µ–π, –æ–±–ª–∞–¥–∞—é—â–∏–π –ø—Ä–æ—Å—Ç—ã–º –∏ –ø–æ–Ω—è—Ç–Ω—ã–º —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–æ–º, –≤—ã—Å–æ–∫–æ–π –ø–µ—Ä–µ–Ω–æ—Å–∏–º–æ—Å—Ç—å—é (–≤ —Å—Ä–∞–≤–Ω–µ–Ω–∏–∏ —Å –∞—Å—Å–µ–º–±–ª–µ—Ä–æ–º), –æ–Ω —Ö–æ—Ä–æ—à–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –≤ –∫–æ–Ω—Ü–µ-–∫–æ–Ω—Ü–æ–≤ —É—Å–ø–µ—à–Ω–æ –ø—Ä–æ—à–µ–ª –∏—Å–ø—ã—Ç–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–µ–º. –ò –µ—Å–ª–∏ —É –°–∏ –≤—Å—ë —Ç–∞–∫ —Ö–æ—Ä–æ—à–æ, –∑–∞—á–µ–º –≤—Å–µ –≤–µ–¥—É—â–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–∏ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤ (PIC32, MSP430, AVR) –¥—Ä—É–∂–Ω–æ –ø–æ–¥—Ç—è–Ω—É–ª–∏ –≤ —Å–≤–æ–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ä–∏–∏ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ C++ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä—ã ? –í –æ—Ç–ª–∏—á–∏–µ –æ—Ç —Å–≤–æ–µ–≥–æ –ø—Ä–µ–¥—à–µ—Å—Ç–≤–µ–Ω–Ω–∏–∫–∞ –°–∏, C++ –¥–µ–∫–ª–∞—Ä–∏—Ä—É–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫—É —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –ø–∞—Ä–∞–¥–∏–≥–º –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è ‚Äî –ø—Ä–æ—Ü–µ–¥—É—Ä–Ω–æ–µ, –æ–±—ä–µ–∫—Ç–Ω–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ (–û–û–ü), –æ–±–æ–±—â—ë–Ω–Ω–æ–µ (—à–∞–±–ª–æ–Ω—ã). –í–º–µ—Å—Ç–µ —Å —Ç–µ–º C++ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è —Å–µ—Ä–µ–±—Ä—è–Ω–æ–π –ø—É–ª–µ–π –¥–ª—è —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º —Å–≤–æ–µ–≥–æ –ø—Ä–µ–¥—à–µ—Å—Ç–≤–µ–Ω–Ω–∏–∫–∞ ‚Äî —Ä—É—á–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É –Ω–∞ –ø–ª–µ—á–∞—Ö –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–∞. C++ –¥–æ–±–∞–≤–ª—è–µ—Ç –∫ –°–∏ –æ–±—ä–µ–∫—Ç–Ω–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ ‚Äî –≤–≤–æ–¥—è—Ç—Å—è –∫–ª–∞—Å—Å—ã, –∫–æ—Ç–æ—Ä—ã–µ –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç —Ç—Ä–∏ —Å–∞–º—ã—Ö –≤–∞–∂–Ω—ã—Ö —Å–≤–æ–π—Å—Ç–≤–∞ –û–û–ü: –∏–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏—é, –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –∏ –ø–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º. –û–û–ü –ø—Ä–∏ –≥—Ä–∞–º–æ—Ç–Ω–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –ø—Ä–∏–∑–≤–∞–Ω–æ –ø–æ–≤—ã—Å–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ç—Ä—É–¥–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–æ–≤, —á–µ–º—É –ø–æ—Å–≤—è—â–µ–Ω–æ –Ω–µ–º–∞–ª–æ —Ä–∞–∑–ª–∏—á–Ω–æ–π –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä—ã –Ω–∞ –ª—é–±–æ–π –≤–∫—É—Å –∏ —Ü–≤–µ—Ç.</p>
<p>–ï—Å–ª–∏ –æ—Ç–±—Ä–æ—Å–∏—Ç—å —Ä–µ–ª–∏–≥–∏–æ–∑–Ω—ã–µ –ø—Ä–∏—Å—Ç—Ä–∞—Å—Ç–∏—è, —Ç–æ —Å—Ç–æ–∏—Ç –ø—Ä–∏–∑–Ω–∞—Ç—å, —á—Ç–æ –Ω–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç C++ —ç—Ç–æ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –Ω–∞—Ç–∏–≤–Ω—ã–π —è–∑—ã–∫ –±–µ–∑ GC (garbage collector), –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –ª–µ–≥–∫–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –æ—Ç —Å–∞–º–æ–≥–æ –Ω–∏–∑–∫–æ–≥–æ —É—Ä–æ–≤–Ω—è, –±–ª–∏–∑–∫–æ–≥–æ –∫ –∞–ø–ø–∞—Ä–∞—Ç—É—Ä–µ, –¥–æ –æ—á–µ–Ω—å –≤—ã—Å–æ–∫–æ–≥–æ, –≤—Ä–æ–¥–µ –û–û–ü –∏ –æ–±–æ–±—â–µ–Ω–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è. –ü—Ä–∏ —ç—Ç–æ–º –¥–∞–Ω–Ω—ã–π —è–∑—ã–∫ —Å–Ω–∞–±–∂–µ–Ω —à–∏—Ä–æ–∫–∏–º –Ω–∞–±–æ—Ä–æ–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ä–∏—è, –∫–Ω–∏–≥ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏, —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Ä–µ—Å—É—Ä—Å–æ–≤. –ü–ª—é—Å –æ–≥—Ä–æ–º–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –≤–æ –≤—Å–µ–º –º–∏—Ä–µ.</p>
<p><img alt="screenshot" src="https://mazko.github.io/blog/posts/2017/03/20/s-18-dlia-mikrokontrollerov-razvedka-boem/ui.gif" style="width:50%; margin: 0 auto; display:block;"></p>
<p>–ó–∞–ø—É—Å–∫–∞—Ç—å—Å—è –±—É–¥–µ–º –Ω–∞ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞—Ö MSP430, –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –∫–∞–∫ –æ–±—ã—á–Ω–æ –Ω–∞ —Å–∞–π—Ç–µ <a href="http://www.ti.com/tool/msp430-gcc-opensource" rel="nofollow">–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—è</a>. MSP430 ‚Äî —Å–µ–º–µ–π—Å—Ç–≤–æ 16-—Ä–∞–∑—Ä—è–¥–Ω—ã—Ö –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤ —Ñ–∏—Ä–º—ã ¬´Texas Instruments¬ª, –∫–æ—Ç–æ—Ä—ã–µ –∏–º–µ—é—Ç —Ñ–æ–Ω-–ù–µ–π–º–∞–Ω–æ–≤—Å–∫—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É —Å –µ–¥–∏–Ω—ã–º –∞–¥—Ä–µ—Å–Ω—ã–º –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ–º –¥–ª—è –∫–æ–º–∞–Ω–¥ –∏ –¥–∞–Ω–Ω—ã—Ö (–¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è —É Microchip <a href="https://mazko.github.io/blog/posts/2017/01/13/simuliatsiia-mikrokontrollerov-picsimjs/">PIC</a> –∏ Atmel AVR –ì–∞—Ä–≤–∞—Ä–¥—Å–∫–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞).</p>
<p>C++ –≤ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å–ª—É—á–∞–µ–≤ –æ–±—Ä–∞—Ç–Ω–æ —Å–æ–≤–º–µ—Å—Ç–∏–º —Å–æ —Å–≤–æ–∏–º –ø—Ä–µ–¥—à–µ—Å—Ç–≤–µ–Ω–Ω–∏–∫–æ–º, —Ç–∞–∫ —á—Ç–æ –ø–æ–Ω–∞—á–∞–ª—É –≤—Å—ë –≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫ –≤ —Å—Ç–∞—Ä–æ–º –¥–æ–±—Ä–æ–º –°–∏ –∏ —Å–æ–≤—Å–µ–º –Ω–µ—Å—Ç—Ä–∞—à–Ω–æ. –ß–∞—Å—Ç–æ—Ç–∞ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤ MSP430 –∑–∞–¥–∞—ë—Ç—Å—è –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ –∏ –º–æ–∂–µ—Ç –º–µ–Ω—è—Ç—å—Å—è –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–ª—è —Å–Ω–∏–∂–µ–Ω–∏—è —ç–Ω–µ—Ä–≥–æ–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è. –°–µ—Ç–∫–∞ —á–∞—Å—Ç–æ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ —Ç–∞–∫—Ç–æ–≤–æ–≥–æ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞ –æ–ø–∏—Å–∞–Ω–∞ –≤ <a href="http://www.ti.com/lit/ds/symlink/msp430f1611.pdf" rel="nofollow">–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏</a> - —Ä–µ–≥–∏—Å—Ç—Ä—ã RSEL —Å–ª—É–∂–∞—Ç –¥–ª—è –≥—Ä—É–±–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, DCO –¥–ª—è –±–æ–ª–µ–µ —Ç–æ—á–Ω–æ–π. –ú–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä msp430f1611 –∏–º–µ–µ—Ç —à–µ—Å—Ç—å –≤–æ—Å—å–º–∏–±–∏—Ç–Ω—ã—Ö –ø–æ—Ä—Ç–æ–≤ –≤–≤–æ–¥–∞-–≤—ã–≤–æ–¥–∞, –∞ —à–µ—Å—Ç—å –¥–µ–ª–∏—Ç—Å—è –Ω–∞ —Ç—Ä–∏ –∏ –ø–æ–ª—É—á–∞–µ–º 16 RGB —Å–≤–µ—Ç–æ–¥–∏–æ–¥–æ–≤.</p>
<p><a href="https://mazko.github.io/blog/posts/2017/03/20/s-18-dlia-mikrokontrollerov-razvedka-boem/a.out">elf</a> | <a href="http://mazko.github.io/MSP430.js/6f9f42f42b3dbdb860b36607e12e34cf">MSP430.js</a> | <a href="https://mazko.github.io/blog/posts/2017/03/20/s-18-dlia-mikrokontrollerov-razvedka-boem/src.zip">–∏—Å—Ö–æ–¥–Ω–∏–∫–∏</a></p>
<p><em>main.cpp</em></p>
<div class="highlight"><pre><span></span><span class="cm">/*</span>
<span class="cm">reset &amp;&amp; (export GCC_DIR=~/ti/msp430_gcc ; </span>
<span class="cm">    $GCC_DIR/bin/msp430-elf-c++ \</span>
<span class="cm">    -I $GCC_DIR/include -L $GCC_DIR/include \</span>
<span class="cm">    -Werror -Wall -Weffc++ -mmcu=msp430f1611 -O2 *.cpp)</span>
<span class="cm">*/</span>

<span class="cp">#include</span> <span class="cpf">&lt;msp430.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;app.h&quot;</span><span class="cp"></span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">WDTCTL</span> <span class="o">=</span> <span class="n">WDTPW</span> <span class="o">|</span> <span class="n">WDTHOLD</span><span class="p">;</span>     <span class="c1">// Stop watchdog timer</span>

    <span class="c1">// DCO = 3, RSEL = 0, f = 0.13 MHz</span>
    <span class="n">DCOCTL</span> <span class="o">=</span> <span class="cm">/* DCO2 + */</span> <span class="n">DCO1</span> <span class="o">+</span> <span class="n">DCO0</span><span class="p">;</span> 
    <span class="n">BCSCTL1</span> <span class="o">=</span> <span class="n">XT2OFF</span> <span class="cm">/* + RSEL1 + RSEL0 + RSEL2 */</span><span class="p">;</span>

    <span class="k">constexpr</span> <span class="k">auto</span> <span class="n">O</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

    <span class="n">P1OUT</span> <span class="o">=</span> <span class="n">O</span><span class="p">;</span> <span class="n">P2OUT</span> <span class="o">=</span> <span class="n">O</span><span class="p">;</span> <span class="n">P3OUT</span> <span class="o">=</span> <span class="n">O</span><span class="p">;</span> <span class="n">P4OUT</span> <span class="o">=</span> <span class="n">O</span><span class="p">;</span> <span class="n">P5OUT</span> <span class="o">=</span> <span class="n">O</span><span class="p">;</span> <span class="n">P6OUT</span> <span class="o">=</span> <span class="n">O</span><span class="p">;</span>
    <span class="n">P1DIR</span> <span class="o">=</span> <span class="n">P2DIR</span> <span class="o">=</span> <span class="n">P3DIR</span> <span class="o">=</span> <span class="n">P4DIR</span> <span class="o">=</span> <span class="n">P5DIR</span> <span class="o">=</span> <span class="n">P6DIR</span> <span class="o">=</span> <span class="mh">0xFF</span><span class="p">;</span>

    <span class="k">return</span> <span class="n">app</span><span class="o">::</span><span class="n">run</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>


<p>–¢—É—Ç –≤ –∫–æ–¥–µ —Ç—Ä–∏ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã—Ö –º–æ–º–µ–Ω—Ç–∞, –∫–∞—Å–∞—é—â–∏—Ö—Å—è –°++:</p>
<ul>
<li>
<p><code>constexpr</code> - –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞ –Ω–∞ —ç—Ç–∞–ø–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏, –≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç <code>const</code> –Ω–µ –∑–∞–Ω–∏–º–∞–µ—Ç —Ñ–∏–∑–∏—á–µ—Å–∫–∏–π –∞–¥—Ä–µ—Å –≤ –ø–∞–º—è—Ç–∏</p>
</li>
<li>
<p><code>auto</code> - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤—ã–≤–µ–¥–µ–Ω–∏–µ —Ç–∏–ø–∞ –Ω–∞ —ç—Ç–∞–ø–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –∏—Å—Ö–æ–¥—è –∏–∑ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ–º–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è</p>
</li>
<li>
<p><code>app::run()</code> - –≤—ã–∑–æ–≤ –º–µ—Ç–æ–¥–∞ –∏–∑ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –∏–º—ë–Ω app</p>
</li>
</ul>
<p><em>app.h</em></p>
<div class="highlight"><pre><span></span><span class="k">namespace</span> <span class="n">app</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">run</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>


<p><em>app.cpp</em></p>
<div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;initializer_list&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;rgb.h&quot;</span><span class="cp"></span>

<span class="k">namespace</span> <span class="n">app</span> <span class="p">{</span>

    <span class="kt">int</span> <span class="n">run</span><span class="p">()</span> <span class="p">{</span>

        <span class="c1">// rgb_strip: default initialization</span>
        <span class="n">rgb</span><span class="o">::</span><span class="n">RgbStripLayer</span> <span class="n">rgb_strip</span><span class="p">;</span>

        <span class="k">constexpr</span> <span class="k">auto</span> <span class="n">colors</span> <span class="o">=</span> <span class="p">{</span>
            <span class="n">rgb_strip</span><span class="p">.</span><span class="n">RED</span><span class="p">,</span>    <span class="n">rgb_strip</span><span class="p">.</span><span class="n">GREEN</span><span class="p">,</span>
            <span class="n">rgb_strip</span><span class="p">.</span><span class="n">BLUE</span><span class="p">,</span>   <span class="n">rgb_strip</span><span class="p">.</span><span class="n">YELLOW</span><span class="p">,</span>
            <span class="n">rgb_strip</span><span class="p">.</span><span class="n">VIOLET</span><span class="p">,</span> <span class="n">rgb_strip</span><span class="p">.</span><span class="n">CYAN</span><span class="p">,</span>
            <span class="n">rgb_strip</span><span class="p">.</span><span class="n">WHITE</span><span class="p">,</span>  <span class="n">rgb_strip</span><span class="p">.</span><span class="n">BLACK</span>
        <span class="p">};</span>

        <span class="k">for</span> <span class="p">(;;)</span> <span class="p">{</span>
            <span class="k">for</span> <span class="p">(</span><span class="k">const</span> <span class="k">auto</span><span class="o">&amp;</span> <span class="nl">c</span> <span class="p">:</span> <span class="n">colors</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">for</span> <span class="p">(</span><span class="k">auto</span><span class="o">&amp;</span> <span class="nl">m</span> <span class="p">:</span> <span class="n">rgb_strip</span><span class="p">.</span><span class="n">mem</span><span class="p">)</span> <span class="p">{</span>
                    <span class="n">m</span> <span class="o">=</span> <span class="n">c</span><span class="p">;</span>
                    <span class="n">rgb_strip</span><span class="p">.</span><span class="n">flush</span><span class="p">();</span>
                    <span class="n">__delay_cycles</span><span class="p">(</span><span class="mi">10000</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<ul>
<li>
<p>—Ñ—É–Ω–∫—Ü–∏—è <code>run</code> –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ –∏–º—ë–Ω <code>namespace app</code> - –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –æ–¥–Ω–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –∏–º—ë–Ω –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã (–∏–º–µ–Ω–∞) –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã, —Ç–æ–≥–¥–∞ –∫–∞–∫ –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –º–æ–∂–µ—Ç –±—ã—Ç—å –æ–ø—Ä–µ–¥–µ–ª—ë–Ω –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞—Ö –∏–º—ë–Ω</p>
</li>
<li>
<p>–¥–ª—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π <code>rgb_strip</code> –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ –ø–æ—ç—Ç–æ–º—É –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é - –¥–ª—è –∫–ª–∞—Å—Å–æ–≤, —Å—Ç—Ä—É–∫—Ç—É—Ä –∏ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–π —ç—Ç–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å –ø–æ–º–æ—â—å—é –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (–¥–æ –∫–ª–∞—Å—Å–æ–≤ –º—ã –µ—â—ë –¥–æ–π–¥—ë–º)</p>
</li>
<li>
<p>—Ü–∏–∫–ª –ø–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É <code>for (const auto&amp; c : colors)</code> –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ–π—Ç–∏—Å—å –ø–æ –≤—Å–µ–º —ç–ª–µ–º–µ–Ω—Ç–∞–º –±–µ–∑ —è–≤–Ω–æ–≥–æ —É–∫–∞–∑–∞–Ω–∏—è –∏–Ω–¥–µ–∫—Å–∞ –∏ —Å—Ç–∞–ª–æ –±—ã—Ç—å –±–µ–∑ –æ—à–∏–±–æ–∫, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –∏–Ω–¥–µ–∫—Å–æ–º –∑–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞</p>
</li>
<li>
<p>–°++ –¥–∞—ë—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç—É –∏–∑–±–µ–≥–∞—Ç—å –ª–∏—à–Ω–∏—Ö –∑–≤—ë–∑–¥–æ—á–µ–∫ - –¥–æ—Å—Ç—É–ø –∫ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º –ø–æ —Å—Å—ã–ª–∫–µ <code>auto&amp; c</code> –æ–±—ã—á–Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω–µ–µ –∏ –±–æ–ª–µ–µ —Å—Ç—Ä–æ–≥–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–æ–º —á–µ–º —á–µ—Ä–µ–∑ —Ä–∞–∑—ã–º–µ–Ω–æ–≤—ã–≤–∞–Ω–∏–µ —É–∫–∞–∑–∞—Ç–µ–ª—è <code>*—Å</code> –≤ —Å—Ç–∏–ª–µ –°–∏</p>
</li>
</ul>
<p><em>hal.h</em></p>
<div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&quot;pin.h&quot;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;msp430.h&gt;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;cstdint&gt;</span><span class="cp"></span>

<span class="k">namespace</span> <span class="n">pin</span> <span class="p">{</span>
    <span class="c1">// MSP430 aliases</span>
    <span class="k">using</span> <span class="n">msp430_port_t</span> <span class="o">=</span> <span class="k">decltype</span><span class="p">(</span><span class="n">P1OUT</span><span class="p">);</span>
    <span class="k">using</span> <span class="n">msp430_pin_t</span> <span class="o">=</span> <span class="n">Pin</span><span class="o">&lt;</span><span class="n">msp430_port_t</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="kt">uint8_t</span><span class="o">&gt;</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>


<ul>
<li>
<p><code>using msp430_port_t = decltype(P1OUT);</code> - –ø—Å–µ–≤–¥–æ–Ω–∏–º —Ç–∏–ø–∞, –≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –º–æ–∂–Ω–æ –±—ã–ª–æ –±—ã —Å–ø–æ–∫–æ–π–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ C–∏ <code>typedef decltype(P1OUT) msp430_port_t</code> - —ç—Ç–æ –¥–µ–ª–æ –≤–∫—É—Å–∞ –∏ —Å—Ç–∏–ª—è</p>
</li>
<li>
<p><code>decltype(P1OUT)</code> - –≤ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å–ª—É—á–∞–µ–≤ –Ω–∞–º –Ω–µ –Ω—É–∂–Ω–æ –∑–Ω–∞—Ç—å –∫–∞–∫–æ–π —Ç–∞–º –∏–º–µ–Ω–Ω–æ —É –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ –ø–æ—Ä—Ç - 8, 16 –∏–ª–∏ 32 –±–∏—Ç, –Ω–æ –µ–≥–æ —Ç–∏–ø –Ω–∞–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è —Ç.–∫. –ø—Ä–æ–≤–µ—Ä–∫—É —Ç–∏–ø–æ–≤ –Ω–∞ —ç—Ç–∞–ø–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –Ω–∏–∫—Ç–æ –Ω–µ –æ—Ç–º–µ–Ω—è–ª</p>
</li>
<li>
<p><code>Pin&lt;msp430_port_t, std::uint8_t&gt;</code> - –ø—Å–µ–≤–¥–æ–Ω–∏–º —à–∞–±–ª–æ–Ω–∞, –∫—Ç–æ —ç—Ç–æ —Ç–∞–∫–æ–π –∏ –∑–∞—á–µ–º –æ–Ω –Ω—É–∂–µ–Ω —Å—Ç–∞–Ω–µ—Ç –ø–æ–Ω—è—Ç–Ω–æ —á—É—Ç—å –¥–∞–ª—å—à–µ</p>
</li>
</ul>
<p><em>non-copyable.h</em></p>
<div class="highlight"><pre><span></span><span class="c1">// C++ compile time check idiom: Non-Copyable Class</span>
<span class="c1">// TODO: inheritance approach bloats the code size</span>
<span class="k">class</span> <span class="nc">NonCopyable</span> <span class="p">{</span>
<span class="k">protected</span><span class="o">:</span>
    <span class="n">NonCopyable</span><span class="p">(</span><span class="n">NonCopyable</span> <span class="k">const</span><span class="o">&amp;</span><span class="p">)</span> <span class="o">=</span> <span class="k">delete</span><span class="p">;</span>
    <span class="n">NonCopyable</span><span class="o">&amp;</span> <span class="k">operator</span><span class="o">=</span><span class="p">(</span><span class="n">NonCopyable</span> <span class="k">const</span><span class="o">&amp;</span><span class="p">)</span> <span class="o">=</span> <span class="k">delete</span><span class="p">;</span>
    <span class="n">NonCopyable</span><span class="p">()</span> <span class="o">=</span> <span class="k">default</span><span class="p">;</span>
<span class="p">};</span>
</pre></div>


<p>–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è... –í –≤–µ–∂–ª–∏–≤–æ–π —Ñ–æ—Ä–º–µ –ø—Ä–µ–¥–ª–∞–≥–∞—é –µ–≥–æ —Å—Ä–∞–∑—É –æ—Ç–∫–ª—é—á–∞—Ç—å –∏ –∑–∞–±—ã—Ç—å - –¥–ª—è —ç—Ç–æ–≥–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–æ—Å—Ç–æ –Ω–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å –∫–ª–∞—Å—Å—ã –æ—Ç –∫–ª–∞—Å—Å–∞ <code>NonCopyable</code>. –í —Ç–∞–∫–æ–º —Å–ª—É—á–∞–µ –∫—Ä–∏–≤–æ–π –∫–æ–¥, –ø—ã—Ç–∞—é—â–∏–π—Å—è —Å–æ–∑–¥–∞—Ç—å –ø–æ–±–∏—Ç–æ–≤—É—é –∫–æ–ø–∏—é –æ–±—ä–µ–∫—Ç–∞ –ø—Ä–æ—Å—Ç–æ —Å–ª–æ–º–∞–µ—Ç –∫–æ–º–ø–∏–ª—è—Ü–∏—é –∏ —ç—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ.</p>
<p><em>rgb.h</em></p>
<div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&quot;hal.h&quot;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&lt;array&gt;</span><span class="cp"></span>

<span class="k">namespace</span> <span class="n">rgb</span> <span class="p">{</span>

    <span class="k">using</span> <span class="k">namespace</span> <span class="n">pin</span><span class="p">;</span>

    <span class="k">class</span> <span class="nc">RgbStripLayer</span> <span class="o">:</span> <span class="n">NonCopyable</span> <span class="p">{</span>

        <span class="k">template</span><span class="o">&lt;</span><span class="n">msp430_port_t</span><span class="o">&amp;</span> <span class="n">p1</span><span class="p">,</span> <span class="n">msp430_port_t</span><span class="o">&amp;</span> <span class="n">p2</span><span class="o">&gt;</span> <span class="k">struct</span> <span class="n">MonoStrip</span><span class="p">;</span>
        <span class="k">static</span> <span class="n">MonoStrip</span><span class="o">&lt;</span><span class="n">P1OUT</span><span class="p">,</span> <span class="n">P2OUT</span><span class="o">&gt;</span> <span class="n">red</span><span class="p">;</span>
        <span class="k">static</span> <span class="n">MonoStrip</span><span class="o">&lt;</span><span class="n">P3OUT</span><span class="p">,</span> <span class="n">P4OUT</span><span class="o">&gt;</span> <span class="n">green</span><span class="p">;</span>
        <span class="k">static</span> <span class="n">MonoStrip</span><span class="o">&lt;</span><span class="n">P5OUT</span><span class="p">,</span> <span class="n">P6OUT</span><span class="o">&gt;</span> <span class="n">blue</span><span class="p">;</span>

    <span class="k">public</span><span class="o">:</span>
        <span class="c1">// mem: value initialization</span>
        <span class="n">RgbStripLayer</span><span class="p">()</span><span class="o">:</span> <span class="n">mem</span><span class="p">()</span> <span class="p">{}</span>

        <span class="k">static</span> <span class="k">constexpr</span> <span class="n">std</span><span class="o">::</span><span class="kt">size_t</span> <span class="n">STRIP_SZ</span> <span class="o">=</span> <span class="mi">2</span><span class="o">*</span><span class="mi">8</span><span class="p">;</span>

        <span class="k">struct</span> <span class="n">RGB</span> <span class="p">{</span>
            <span class="kt">bool</span> <span class="n">r</span><span class="p">,</span> <span class="n">g</span><span class="p">,</span> <span class="n">b</span><span class="p">;</span>
        <span class="p">};</span>

        <span class="n">std</span><span class="o">::</span><span class="n">array</span><span class="o">&lt;</span><span class="n">RGB</span><span class="p">,</span> <span class="n">STRIP_SZ</span><span class="o">&gt;</span> <span class="n">mem</span><span class="p">;</span>

        <span class="k">static</span> <span class="k">constexpr</span> <span class="n">RGB</span> <span class="n">RED</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span> <span class="p">},</span> <span class="n">GREEN</span>  <span class="o">=</span> <span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span> <span class="p">},</span> 
                         <span class="n">BLUE</span>    <span class="o">=</span> <span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span> <span class="p">},</span> <span class="n">YELLOW</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span> <span class="p">},</span> 
                         <span class="n">CYAN</span>    <span class="o">=</span> <span class="p">{</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span> <span class="p">},</span> <span class="n">VIOLET</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span> <span class="p">},</span> 
                         <span class="n">WHITE</span>   <span class="o">=</span> <span class="p">{</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span> <span class="p">},</span> <span class="n">BLACK</span>  <span class="o">=</span> <span class="p">{</span> <span class="mi">0</span> <span class="p">};</span>

        <span class="kt">void</span> <span class="nf">flush</span><span class="p">();</span>

        <span class="n">RgbStripLayer</span><span class="o">&amp;</span> <span class="k">operator</span> <span class="o">+=</span> <span class="p">(</span><span class="k">const</span> <span class="n">RgbStripLayer</span><span class="o">&amp;</span> <span class="n">layer</span><span class="p">);</span>
    <span class="p">};</span>
<span class="p">}</span>
</pre></div>


<p>–ò—Ç–∞–∫ –û–û–ü.</p>
<ul>
<li>
<p>–≤—Å–µ –ø–æ–ª—è –∏ –º–µ—Ç–æ–¥—ã –∫–ª–∞—Å—Å–æ–≤ <code>class</code> (–∞ —Ç–∞–∫–∂–µ —Å—Ç—Ä—É–∫—Ç—É—Ä <code>struct</code>) –∏–º–µ—é—Ç –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ - –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤—Å–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∫–ª–∞—Å—Å–∞ —è–≤–ª—è–µ—Ç—Å—è –¥–æ—Å—Ç—É–ø–Ω—ã–º –¥–ª—è —á—Ç–µ–Ω–∏—è –∏ –∑–∞–ø–∏—Å–∏ —Ç–æ–ª—å–∫–æ –¥–ª—è –Ω–µ–≥–æ —Å–∞–º–æ–≥–æ —Ç.–µ. –∑–∞–∫—Ä—ã—Ç–æ (private), –∞ –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã <code>struct</code> –Ω–∞–æ–±–æ—Ä–æ—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤—Å—ë –æ—Ç–∫—Ä—ã—Ç–æ –¥–ª—è –≤—Å–µ—Ö (public)</p>
</li>
<li>
<p>–ø–æ–ª—è red, green, blue –≤ –∫–ª–∞—Å—Å–µ <code>RgbStripLayer</code> (—Å–ª–æ–π –∞–Ω–∏–º–∞—Ü–∏–∏) —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ - –≤—Å–µ —ç–∫–∑–µ–º–ø–ª—è—Ä—ã —ç—Ç–æ–≥–æ –∫–ª–∞—Å—Å–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–¥–Ω—É –∏ —Ç—É –∂–µ –∫–æ–ø–∏—é —ç—Ç–∏—Ö –ø–æ–ª–µ–π –∏ —Ç–µ–º —Å–∞–º—ã–º —ç–∫–æ–Ω–æ–º–∏—Ç—Å—è –ø–∞–º—è—Ç—å RAM</p>
</li>
<li>
<p><code>std::array</code> - —ç—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –º–∞—Å—Å–∏–≤–∞ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞, –∏–º–µ–µ—Ç —Ç—É –∂–µ —Å–µ–º–∞–Ω—Ç–∏–∫—É, —á—Ç–æ –∏ C–∏ –º–∞—Å—Å–∏–≤—ã –ø–ª—é—Å –∑–Ω–∞–µ—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —Ä–∞–∑–º–µ—Ä, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ, –∏—Ç–µ—Ä–∞—Ç–æ—Ä—ã –∏ —Ç.–¥.</p>
</li>
<li>
<p>–º–µ—Ç–æ–¥—ã, —Å–æ–≤–ø–∞–¥–∞—é—â–∏–µ —Å –∏–º–µ–Ω–µ–º –∫–ª–∞—Å—Å–∞ —ç—Ç–æ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ã, <code>RgbStripLayer(): mem() {}</code> —ç—Ç–æ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ç.–∫. –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤, –≤ –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä <code>mem</code> –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –Ω—É–ª—è–º–∏</p>
</li>
<li>
<p>—Å–ª–æ–∏ –∞–Ω–∏–º–∞—Ü–∏–π <code>RgbStripLayer</code> –º–æ–∂–Ω–æ —Å–º–µ—à–∏–≤–∞—Ç—å –º–µ–∂–¥—É —Å–æ–±–æ–π - –¥–ª—è —ç—Ç–æ–≥–æ –ø–µ—Ä–µ–≥—Ä—É–∂–µ–Ω –æ–ø–µ—Ä–∞—Ç–æ—Ä <code>+=</code></p>
</li>
</ul>
<p><em>rgb.cpp</em></p>
<div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&quot;rgb.h&quot;</span><span class="cp"></span>

<span class="k">namespace</span> <span class="n">rgb</span> <span class="p">{</span>

    <span class="k">template</span><span class="o">&lt;</span><span class="n">msp430_port_t</span><span class="o">&amp;</span> <span class="n">p1</span><span class="p">,</span> <span class="n">msp430_port_t</span><span class="o">&amp;</span> <span class="n">p2</span><span class="o">&gt;</span>
    <span class="k">struct</span> <span class="n">RgbStripLayer</span><span class="o">::</span><span class="nl">MonoStrip</span> <span class="p">:</span> <span class="n">NonCopyable</span> <span class="p">{</span>
        <span class="n">msp430_pin_t</span> <span class="n">leds</span><span class="p">[</span><span class="n">STRIP_SZ</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="p">{</span> <span class="n">p1</span><span class="p">,</span> <span class="mi">0</span> <span class="p">},</span> <span class="p">{</span> <span class="n">p1</span><span class="p">,</span> <span class="mi">1</span> <span class="p">},</span> <span class="p">{</span> <span class="n">p1</span><span class="p">,</span> <span class="mi">2</span> <span class="p">},</span> <span class="p">{</span> <span class="n">p1</span><span class="p">,</span> <span class="mi">3</span> <span class="p">},</span>
            <span class="p">{</span> <span class="n">p1</span><span class="p">,</span> <span class="mi">4</span> <span class="p">},</span> <span class="p">{</span> <span class="n">p1</span><span class="p">,</span> <span class="mi">5</span> <span class="p">},</span> <span class="p">{</span> <span class="n">p1</span><span class="p">,</span> <span class="mi">6</span> <span class="p">},</span> <span class="p">{</span> <span class="n">p1</span><span class="p">,</span> <span class="mi">7</span> <span class="p">},</span>
            <span class="p">{</span> <span class="n">p2</span><span class="p">,</span> <span class="mi">0</span> <span class="p">},</span> <span class="p">{</span> <span class="n">p2</span><span class="p">,</span> <span class="mi">1</span> <span class="p">},</span> <span class="p">{</span> <span class="n">p2</span><span class="p">,</span> <span class="mi">2</span> <span class="p">},</span> <span class="p">{</span> <span class="n">p2</span><span class="p">,</span> <span class="mi">3</span> <span class="p">},</span>
            <span class="p">{</span> <span class="n">p2</span><span class="p">,</span> <span class="mi">4</span> <span class="p">},</span> <span class="p">{</span> <span class="n">p2</span><span class="p">,</span> <span class="mi">5</span> <span class="p">},</span> <span class="p">{</span> <span class="n">p2</span><span class="p">,</span> <span class="mi">6</span> <span class="p">},</span> <span class="p">{</span> <span class="n">p2</span><span class="p">,</span> <span class="mi">7</span> <span class="p">},</span>
        <span class="p">};</span>
    <span class="p">};</span>

    <span class="k">decltype</span><span class="p">(</span><span class="n">RgbStripLayer</span><span class="o">::</span><span class="n">red</span><span class="p">)</span> <span class="n">RgbStripLayer</span><span class="o">::</span><span class="n">red</span><span class="p">;</span>
    <span class="k">decltype</span><span class="p">(</span><span class="n">RgbStripLayer</span><span class="o">::</span><span class="n">green</span><span class="p">)</span> <span class="n">RgbStripLayer</span><span class="o">::</span><span class="n">green</span><span class="p">;</span>
    <span class="k">decltype</span><span class="p">(</span><span class="n">RgbStripLayer</span><span class="o">::</span><span class="n">blue</span><span class="p">)</span> <span class="n">RgbStripLayer</span><span class="o">::</span><span class="n">blue</span><span class="p">;</span>

    <span class="kt">void</span> <span class="n">RgbStripLayer</span><span class="o">::</span><span class="n">flush</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="n">i</span> <span class="o">=</span> <span class="n">mem</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="n">i</span><span class="o">--</span><span class="p">;)</span> <span class="p">{</span>
            <span class="n">red</span><span class="p">.</span><span class="n">leds</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">set</span><span class="p">(</span><span class="n">mem</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">r</span><span class="p">);</span>
            <span class="n">green</span><span class="p">.</span><span class="n">leds</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">set</span><span class="p">(</span><span class="n">mem</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">g</span><span class="p">);</span>
            <span class="n">blue</span><span class="p">.</span><span class="n">leds</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">set</span><span class="p">(</span><span class="n">mem</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">b</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="n">RgbStripLayer</span><span class="o">&amp;</span> <span class="n">RgbStripLayer</span><span class="o">::</span><span class="k">operator</span> <span class="o">+=</span> <span class="p">(</span><span class="k">const</span> <span class="n">RgbStripLayer</span><span class="o">&amp;</span> <span class="n">layer</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="n">i</span> <span class="o">=</span> <span class="n">mem</span><span class="p">.</span><span class="n">size</span><span class="p">();</span> <span class="n">i</span><span class="o">--</span><span class="p">;)</span> <span class="p">{</span>
            <span class="n">mem</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">r</span> <span class="o">|=</span> <span class="n">layer</span><span class="p">.</span><span class="n">mem</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">r</span><span class="p">;</span>
            <span class="n">mem</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">g</span> <span class="o">|=</span> <span class="n">layer</span><span class="p">.</span><span class="n">mem</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">g</span><span class="p">;</span>
            <span class="n">mem</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">b</span> <span class="o">|=</span> <span class="n">layer</span><span class="p">.</span><span class="n">mem</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">b</span><span class="p">;</span>
        <span class="p">}</span>

        <span class="k">return</span> <span class="o">*</span><span class="k">this</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<ul>
<li>
<p>–æ–±—ä—è–≤–ª–µ–Ω–∏–µ –∫–ª–∞—Å—Å–∞ –∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–∞—Ö –≤ –°++ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–π, –æ–¥–Ω–∞–∫–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —É—Å–∫–æ—Ä–∏—Ç—å —Å–±–æ—Ä–∫—É –ø—Ä–æ–µ–∫—Ç–∞ –∑–∞ —Å—á—ë—Ç —Ç.–Ω. —Ä–∞–∑–¥–µ–ª—å–Ω–æ–π –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ - —Ç–∞–∫–∂–µ –∫–∞–∫ –∏ –≤ –°–∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ</p>
</li>
<li>
<p>—à–∞–±–ª–æ–Ω—ã C++ –ø–æ–∑–≤–æ–ª—è—é—Ç –∑–∞–¥–∞–≤–∞—Ç—å –æ–±–æ–±—â—ë–Ω–Ω—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã –±–µ–∑ –ø—Ä–∏–≤—è–∑–∫–∏ –∫ –Ω–µ–∫–æ—Ç–æ—Ä—ã–º –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º - –≤ —Å–ª—É—á–∞–µ c <code>MonoStrip</code> —ç—Ç–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ø–æ—Ä—Ç—ã –≤–≤–æ–¥–∞ –≤—ã–≤–æ–¥–∞ p1, p2 —Ä–∞–∑–ª–∏—á–Ω—ã–µ —É –∫–∞–∂–¥–æ–≥–æ —Ü–≤–µ—Ç–∞, –∫–æ–¥ —à–∞–±–ª–æ–Ω–∞ —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –Ω–∞ —ç—Ç–∞–ø–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –∏ –≤ —ç—Ç–æ–º –æ–Ω–∏ —Å—Ö–æ–∂–∏ —Å –º–∞–∫—Ä–æ—Å–∞–º–∏ –°–∏</p>
</li>
<li>
<p>–∫–∞–∂–¥—ã–π –∫–ª–∞—Å—Å –≤ C++ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–≤–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –∏–º–µ–Ω, –µ—Å–ª–∏ –≤–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Å–∞ –∑–∞–ø–∏—Å–∞–Ω–æ —Ç–æ–ª—å–∫–æ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ, —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –≤ –¥—Ä—É–≥–æ–º –º–µ—Å—Ç–µ —Å –ø–æ–º–æ—â—å—é –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ –æ–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏ ::</p>
</li>
</ul>
<p>–ù—É –∏ –ø–æ—Å–ª–µ–¥–Ω–∏–π –∫–ª–∞—Å—Å –æ–Ω —Å–æ–≤—Å–µ–º –ø—Ä–æ—Å—Ç–æ–π - –∫–∞–∂–¥–∞—è –Ω–æ–≥–∞ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ —ç—Ç–æ –æ–±—ä–µ–∫—Ç. –ó–∞ —Å—á—ë—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —à–∞–±–ª–æ–Ω–æ–≤ –∫–ª–∞—Å—Å Pin –Ω–∏—á–µ–≥–æ –Ω–µ –∑–Ω–∞–µ—Ç –æ–± –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ - —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö –ø–æ—Ä—Ç–∞ –≤–≤–æ–¥–∞-–≤—ã–≤–æ–¥–∞ —è–≤–ª—è–µ—Ç—Å—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º —à–∞–±–ª–æ–Ω–∞:</p>
<p><em>pin.h</em></p>
<div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&quot;non-copyable.h&quot;</span><span class="cp"></span>

<span class="k">namespace</span> <span class="n">pin</span> <span class="p">{</span>
    <span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span> <span class="n">port_t</span><span class="p">,</span> <span class="k">typename</span> <span class="n">pos_t</span><span class="o">&gt;</span>
    <span class="k">class</span> <span class="nc">Pin</span> <span class="o">:</span> <span class="n">NonCopyable</span> <span class="p">{</span>
        <span class="n">port_t</span><span class="o">&amp;</span> <span class="n">m_port</span><span class="p">;</span>
        <span class="k">const</span> <span class="n">port_t</span> <span class="n">m_mask</span><span class="p">;</span>
    <span class="k">public</span><span class="o">:</span>
        <span class="n">Pin</span><span class="p">(</span><span class="n">port_t</span><span class="o">&amp;</span> <span class="n">port</span><span class="p">,</span> <span class="k">const</span> <span class="n">pos_t</span> <span class="n">pos</span><span class="p">)</span><span class="o">:</span> <span class="n">m_port</span><span class="p">(</span><span class="n">port</span><span class="p">),</span> <span class="n">m_mask</span><span class="p">(</span><span class="mi">1</span> <span class="o">&lt;&lt;</span> <span class="n">pos</span><span class="p">)</span> <span class="p">{}</span>

        <span class="kt">void</span> <span class="n">set</span><span class="p">(</span><span class="k">const</span> <span class="kt">bool</span> <span class="n">v</span> <span class="o">=</span> <span class="nb">true</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">m_port</span> <span class="o">|=</span> <span class="n">m_mask</span><span class="p">;</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="n">clr</span><span class="p">();</span>
            <span class="p">}</span>
        <span class="p">}</span>

        <span class="kt">void</span> <span class="n">clr</span><span class="p">()</span> <span class="p">{</span>
            <span class="n">m_port</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="n">m_mask</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">};</span>
<span class="p">}</span>
</pre></div>


<ul>
<li>
<p>–µ—Å–ª–∏ —Ç–µ–ª–æ –º–µ—Ç–æ–¥–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ –ø—Ä–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏–∏ –∫–ª–∞—Å—Å–∞, –º–µ—Ç–æ–¥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —è–≤–ª—è—é—Ç—Å—è –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º (inline) - –æ–±—ã—á–Ω–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º–∏ –¥–µ–ª–∞—é—Ç –∫–æ—Ä–æ—Ç–∫–∏–µ –º–µ—Ç–æ–¥—ã</p>
</li>
<li>
<p>–∞—Ä–≥—É–º–µ–Ω—Ç—ã —Ñ—É–Ω–∫—Ü–∏–π –≤ –°++ –º–æ–≥—É—Ç –∏–º–µ—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—è –∫–∞–∫ –Ω–∞–ø—Ä–∏–º–µ—Ä <code>const bool v = true</code> , —ç—Ç–æ –∂–µ –º–æ–∂–Ω–æ –±—ã–ª–æ –±—ã —Å–¥–µ–ª–∞—Ç—å –∏ —Å –ø–æ–º–æ—â—å—é –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏ —Ñ—É–Ω–∫—Ü–∏–π</p>
</li>
</ul>
<p>–û–¥–Ω–æ–π –∏–∑ —Ç–∏–ø–∏—á–Ω—ã—Ö –æ—à–∏–±–æ–∫ –ø—Ä–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–∏ –Ω–∞ C++ —è–≤–ª—è–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ <strong>–Ω–µ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö</strong>. –ß—Ç–µ–Ω–∏–µ –∏–∑ –Ω–µ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –ø–æ –°—Ç–∞–Ω–¥–∞—Ä—Ç—É —è–≤–ª—è–µ—Ç—Å—è –Ω–µ–æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–º –ø–æ–≤–µ–¥–µ–Ω–∏–µ–º. –ù–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ –æ–±—ã—á–Ω–æ –æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–º –∫–∞–∫–æ–µ-—Ç–æ –ø–æ–ª—É—Å–ª—É—á–∞–π–Ω–æ–µ –º—É—Å–æ—Ä–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –ø—Ä–∏—á—ë–º –æ–Ω–æ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–∞–∑–Ω—ã–º –æ—Ç –∑–∞–ø—É—Å–∫–∞ –∫ –∑–∞–ø—É—Å–∫—É –∏ —Ä–∞–∑–Ω—ã–º –Ω–∞ —Ä–∞–∑–Ω—ã—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Ö. –û—Ç—Å—é–¥–∞ –∏ –ø–æ–ª—É—á–∞–µ—Ç—Å—è, —á—Ç–æ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –Ω–∏ —Å —Ç–æ–≥–æ –Ω–∏ —Å —Å–µ–≥–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ-—Ä–∞–∑–Ω–æ–º—É.</p>
<p>–ö–∞–∫ –∏ –≤ –°–∏, –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–æ—Å—Ç—ã—Ö —Ç–∏–ø–æ–≤ –≤ –°++ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—Ç—Å—è –Ω—É–ª—è–º–∏, –ª–æ–∫–∞–ª—å–Ω—ã–µ ‚Äî –Ω–µ—Ç. –ï—Å–ª–∏ –∂–µ –º—ã —Ä–∞–±–æ—Ç–∞–µ–º —Å –æ–±—ä–µ–∫—Ç–∞–º–∏, –¥–ª—è –∫–æ—Ç–æ—Ä—ã—Ö –æ–ø—Ä–µ–¥–µ–ª—ë–Ω –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –æ–Ω –±—É–¥–µ—Ç –≤—ã–∑–≤–∞–Ω –≤ –ª—é–±–æ–º —Å–ª—É—á–∞–µ –∏ –≤ –Ω—ë–º —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –ø–æ–ª—è, —á—Ç–æ–±—ã –Ω–µ —Å—Ç–∞–ª–∫–∏–≤–∞—Ç—å—Å—è —Å —Ç–µ–º, —á—Ç–æ –ø—Ä–æ–≥—Ä–∞–º–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ. –†–∞—Å—Å–º–æ—Ç—Ä–∏–º —Å–ª–µ–¥—É—é—â–∏–π –ø—Ä–∏–º–µ—Ä:</p>
<p><em>app.h</em></p>
<div class="highlight"><pre><span></span><span class="cm">/*</span>
<span class="cm">reset &amp;&amp; (export GCC_DIR=~/ti/gcc ; </span>
<span class="cm">    $GCC_DIR/bin/msp430-elf-c++ \</span>
<span class="cm">    -I $GCC_DIR/include -L $GCC_DIR/include \</span>
<span class="cm">    -Werror -Wall -mmcu=msp430f1611 *.cpp)</span>
<span class="cm">*/</span>

<span class="cp">#include</span> <span class="cpf">&quot;rgb.h&quot;</span><span class="cp"></span>

<span class="k">using</span> <span class="k">namespace</span> <span class="n">rgb</span><span class="p">;</span>

<span class="k">namespace</span> <span class="n">app</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">run</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(;;)</span> <span class="p">{</span>
            <span class="n">RgbStripLayer</span> <span class="n">rgb_strip</span><span class="p">;</span>
            <span class="n">rgb_strip</span><span class="p">.</span><span class="n">flush</span><span class="p">();</span>
            <span class="k">auto</span><span class="o">&amp;</span> <span class="n">bug</span> <span class="o">=</span> <span class="n">rgb_strip</span><span class="p">.</span><span class="n">mem</span><span class="p">;</span>
            <span class="n">bug</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">RgbStripLayer</span><span class="o">::</span><span class="n">RED</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>


<p>–î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞ –∏ —É–±—Ä–∞—Ç—å –∏–∑ <code>rgb.h</code> –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é <code>RgbStripLayer(): mem() {}</code> –∫–∞–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –Ω–∞—á–Ω—ë—Ç –≤–µ—Å—Ç–∏ —Å–µ–±—è –ø–æ-—Ä–∞–∑–Ω–æ–º—É <a href="http://mazko.github.io/MSP430.js/89cdcc2f31e21ba31c3d218c0463e8d4">ok</a> | <a href="http://mazko.github.io/MSP430.js/602b5588cb3fb1200af441cd9fc6efee">bug</a>.</p>
<p>–í–æ–æ–±—â–µ –ø–æ-—Ö–æ—Ä–æ—à–µ–º—É –Ω–æ—Ä–º–∞–ª—å–Ω—ã–π —è–∑—ã–∫ –ø—Ä–æ—Å—Ç–æ –Ω–µ –¥–æ–ª–∂–µ–Ω –ø–æ–∑–≤–æ–ª—è—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ. –ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –Ω—É–∂–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –∑–Ω–∞—á–µ–Ω–∏–µ–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –º–æ–∂–µ—Ç —Å—Ç–∞—Ç—å –≤—Å–µ —Ç–æ—Ç –∂–µ –Ω–æ–ª—å. –î–ª—è –≤—ã—è–≤–ª–µ–Ω–∏—è –Ω–µ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö —É gcc –ø–æ–¥–æ–±–Ω—ã—Ö –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–æ–≤ –µ—Å—Ç—å –æ–ø—Ü–∏—è –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ <code>-Weffc++</code>, —Ç–∞–∫–∂–µ –º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤ —Å—Ç–æ—Ä–æ–Ω—É Valgrind –∏–ª–∏ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–æ–≤ –∫–æ–¥–∞.</p>
<p><a href="https://mazko.github.io/blog/posts/2017/03/22/s-dlia-mikrokontrollerov-dekorator/">–î–∞–ª–µ–µ</a> –ø–∞—Ç—Ç–µ—Ä–Ω –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä.</p>
    </div><!-- /.entry-content -->
  </article>
</section>


<div class="body" id="proiot-comments">
  <div class="comments">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
      var disqus_shortname = 'mazko';
      var disqus_identifier = 'blog/posts/2017/03/20/s-18-dlia-mikrokontrollerov-razvedka-boem/';
      var disqus_url = 'https://mazko.github.io/blog/posts/2017/03/20/s-18-dlia-mikrokontrollerov-razvedka-boem/';
      (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//mazko.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
    </script>
    <noscript>Please enable JavaScript to view the comments.</noscript>
  </div>
</div>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a rel="nofollow" href="http://getpelican.com/">Pelican</a></li>
                            <li><a rel="nofollow" href="http://python.org/">Python.org</a></li>
                            <li><a rel="nofollow" href="http://jinja.pocoo.org/">Jinja2</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="https://mazko.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>

                            <li><a rel="nofollow" href="http://github.com/mazko">github</a></li>
                            <li><a rel="nofollow" href="http://linkedin.com/in/mazko">linkedin</a></li>
                            <li><a rel="nofollow" href="http://stackoverflow.com/users/281102/oleg-mazko">stackoverflow</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

<script type="text/javascript">
    var disqus_shortname = 'mazko';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'https://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
</body>
</html>