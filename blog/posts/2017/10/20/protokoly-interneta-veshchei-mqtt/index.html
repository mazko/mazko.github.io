<!DOCTYPE html>
<html lang="ru">
<head>
        <meta charset="utf-8" />
        <title>–ü—Ä–æ—Ç–æ–∫–æ–ª—ã ¬´–ò–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –≤–µ—â–µ–π¬ª - MQTT</title>
        <link rel="stylesheet" href="https://mazko.github.io/blog/theme/css/main.css" />
        <link href="https://mazko.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="üè† –ò–Ω—Ç–µ—Ä–Ω–µ—Ç –í—Å–µ–≥–æ üöó Atom Feed" />

        <!--[if IE]>
            <script src="https://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="https://mazko.github.io/">üè† –ò–Ω—Ç–µ—Ä–Ω–µ—Ç –í—Å–µ–≥–æ üöó </a></h1>
                <nav><ul>
                    <li><a href="https://mazko.github.io/blog/category/admin/">Admin</a></li>
                    <li><a href="https://mazko.github.io/blog/category/electronics/">Electronics</a></li>
                    <li><a href="https://mazko.github.io/blog/category/embedded/">Embedded</a></li>
                    <li class="active"><a href="https://mazko.github.io/blog/category/iot/">IoT</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="https://mazko.github.io/blog/posts/2017/10/20/protokoly-interneta-veshchei-mqtt/" rel="bookmark"
           title="Permalink to –ü—Ä–æ—Ç–æ–∫–æ–ª—ã ¬´–ò–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –≤–µ—â–µ–π¬ª - MQTT">–ü—Ä–æ—Ç–æ–∫–æ–ª—ã ¬´–ò–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –≤–µ—â–µ–π¬ª - MQTT</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2017-10-20T00:00:00+03:00">
                –ü—Ç 20 –æ–∫—Ç—è–±—Ä—è 2017
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="https://mazko.github.io/blog/author/oleg-mazko/">Oleg Mazko</a>
        </address>
<p>In <a href="https://mazko.github.io/blog/category/iot/">IoT</a>.</p>
<p>tags: <a href="https://mazko.github.io/blog/tag/contiki">contiki</a> <a href="https://mazko.github.io/blog/tag/msp430">msp430</a> <a href="https://mazko.github.io/blog/tag/m2m">m2m</a> </p>
</footer><!-- /.post-info -->      <p><a href="https://mazko.github.io/blog/posts/2017/10/03/setevoe-programmirovanie-udp-ntp-chasy/">–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º</a> –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å —Å–µ—Ç–µ–≤—ã–µ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã.</p>
<p>MQTT (Message Queue Telemetry Transport) ‚Äì –ø—Ä–æ—Ç–æ–∫–æ–ª –ø—Ä–∏–∫–ª–∞–¥–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –º–µ–∂–º–∞—à–∏–Ω–Ω–æ–π –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ (M2M, Machine to Machine), –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø—É ¬´–∏–∑–¥–∞—Ç–µ–ª—å-–ø–æ–¥–ø–∏—Å—á–∏–∫¬ª. –î–≤–∞ –≥–ª–∞–≤–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ MQTT ‚Äì –∫–ª–∏–µ–Ω—Ç –∏ –±—Ä–æ–∫–µ—Ä. MQTT-–∫–ª–∏–µ–Ω—Ç—ã –ø—É–±–ª–∏–∫—É—é—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—É—é —Ç–µ–º—É (topic), –∏–ª–∏ –ø–æ–¥–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –∏ –ø—Ä–æ—Å–ª—É—à–∏–≤–∞—é—Ç –∏—Ö. –¢–µ–º–∞ ‚Äì —ç—Ç–æ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–∞—è —Å—Ç—Ä–æ–∫–∞, –≤ –∫–æ—Ç–æ—Ä—É—é –≤—Ö–æ–¥—è—Ç –ª—é–±—ã–µ —Å–∏–º–≤–æ–ª—ã –∑–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤ ¬´/¬ª, ¬´+¬ª –∏ ¬´#¬ª, —Å—É—Ç—å –∫–æ—Ç–æ—Ä—ã—Ö –±—É–¥–µ—Ç —Ä–∞—Å–∫—Ä—ã—Ç–∞ –Ω–∏–∂–µ. MQTT-–±—Ä–æ–∫–µ—Ä –ø–æ–ª—É—á–∞–µ—Ç –≤—Å–µ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã–µ –∏–∑–¥–∞—Ç–µ–ª—è–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å—á–∏–∫–∞–º. –ü–æ–¥–ø–∏—Å—á–∏–∫–∏ –∏ –∏–∑–¥–∞—Ç–µ–ª–∏ –Ω–µ –¥–æ–ª–∂–Ω—ã –∑–Ω–∞—Ç—å –¥—Ä—É–≥ –æ –¥—Ä—É–≥–µ, —Ä–æ–ª—å –∏–≥—Ä–∞—é—Ç –ª–∏—à—å —Ç–µ–º—ã —Å–æ–æ–±—â–µ–Ω–∏–π –∏ —Å–∞–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è. –î–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –∏–∑–¥–∞—Ç–µ–ª–∏ –∏ –ø–æ–¥–ø–∏—Å—á–∏–∫–∏ –¥–æ–ª–∂–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±—â–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è —Ç–µ–º –∏ —Ñ–æ—Ä–º–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏–π.</p>
<p>MQTT —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–≤–µ—Ä—Ö <a href="https://mazko.github.io/blog/posts/2017/10/09/setevoe-programmirovanie-tcp-http-server/">–¢–°–†</a> –∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω –≤ —Ä–∞—Å—á—ë—Ç–µ –Ω–∞ –º–∞–ª–æ–º–æ—â–Ω—ã–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞, –ø–æ—ç—Ç–æ–º—É –≤—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –¥–ª—è –µ–≥–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã. –í –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∫ –æ—á–µ–Ω—å –Ω–∏–∑–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ –Ω–∞ —Å–∏—Å—Ç–µ–º—É, MQTT –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –≤—ã—Å–æ–∫–æ–π —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å—é –∏ –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å—é —Å–≤—è–∑–∏ –¥–∞–∂–µ –≤ —Å–µ—Ç—è—Ö —Å –Ω–∏–∑–∫–æ–π –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å—é.</p>
<h2>–î–ï–ú–û</h2>
<p>–ù–∞ –∫–∞—Ä—Ç–∏–Ω–∫–µ —Å–≤–µ—Ç–∏–ª—å–Ω–∏–∫ (MQTT-–∫–ª–∏–µ–Ω—Ç), –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –∏–∑ —Å–µ–±—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –Ω–∞ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–µ c –û–° <a href="https://mazko.github.io/blog/posts/2017/10/03/setevoe-programmirovanie-udp-ntp-chasy/">Contiki</a> –Ω–∞ –±–æ—Ä—Ç—É. –í –∫–∞—á–µ—Å—Ç–≤–µ –±—Ä–æ–∫–µ—Ä–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Mosquitto ‚Äì —ç—Ç–æ –ø–æ–ø—É–ª—è—Ä–Ω—ã–π –∏ –ø—Ä–æ—Å—Ç–æ–π –≤ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –±—Ä–æ–∫–µ—Ä, –∞–∫—Ç–∏–≤–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏–π—Å—è —Å–æ–æ–±—â–µ—Å—Ç–≤–æ–º. –°–≤–µ—Ç–∏–ª—å–Ω–∏–∫ –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ —Ç–µ–º—É <code>proiot3/cmd/leds</code>. –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –±—Ä–æ–∫–µ—Ä—É Mosquitto –º–æ–∂–Ω–æ –∏–∑ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏,  –Ω–∞–ø—Ä–∏–º–µ—Ä —Å–ª–µ–¥—É—é—â–∞—è –∫–æ–º–∞–Ω–¥–∞ –≤–∫–ª—é—á–∞–µ—Ç –∫—Ä–∞—Å–Ω—ã–π —Å–≤–µ—Ç:</p>
<div class="highlight"><pre><span></span>~$ mosquitto_pub -h localhost -t &#39;proiot3/cmd/leds&#39; -m 100
</pre></div>


<p>–°–≤–µ—Ç–∏–ª—å–Ω–∏–∫ –≤ —Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å —Ç–∞–∫–∂–µ –ø—É–±–ª–∏–∫—É–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ, –Ω–æ —É–∂–µ –≤ –¥—Ä—É–≥–æ–π —Ç–æ–ø–∏–∫ <code>proiot3/evt/status</code> –µ—Å–ª–∏ –Ω–∞–∂–∞—Ç–∞ –∫–Ω–æ–ø–∫–∞. –í –¥–∞–Ω–Ω–æ–º —Ç–æ–ø–∏–∫–µ –¥–∞–Ω–Ω—ã–µ –ø—É–±–ª–∏–∫—É—é—Ç—Å—è –≤ JSON —Ñ–æ—Ä–º–∞—Ç–µ. –ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ —Ç–æ–ø–∏–∫ –∏–∑ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ –º–æ–∂–Ω–æ —Ç–∞–∫:</p>
<div class="highlight"><pre><span></span>~$ mosquitto_sub -h localhost -t &#39;proiot3/evt/status&#39;
</pre></div>


<p>–í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–º—É —Å–µ—Ç–µ–≤–æ–º—É –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É —Å–∏–º—É–ª—è—Ç–æ—Ä–∞ –Ω—É–∂–Ω–æ <a href="https://mazko.github.io/blog/posts/2017/10/09/setevoe-programmirovanie-tcp-http-server/">–Ω–∞–∑–Ω–∞—á–∏—Ç—å</a> –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∞–¥—Ä–µ—Å <code>abcd::1</code>, –≤ –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ —Å–≤–µ—Ç–∏–ª—å–Ω–∏–∫ –∏ –±—Ä–æ–∫–µ—Ä –¥—Ä—É–≥ –¥—Ä—É–≥–∞ –Ω–µ —É–≤–∏–¥—è—Ç.</p>
<p><a href="http://localhost:9148/fa001d88f857807c4cbef17abf25a544">mqtt.ipv6</a> | <a href="https://mazko.github.io/blog/posts/2017/10/20/protokoly-interneta-veshchei-mqtt/conticki-mqtt.zip">–∏—Å—Ö–æ–¥–Ω–∏–∫–∏</a></p>
<p><img alt="screenshot" src="https://mazko.github.io/blog/posts/2017/10/20/protokoly-interneta-veshchei-mqtt/ui.gif" style="width:100%;"></p>
<h2>–¢–û–ü–ò–ö–ò</h2>
<p>–¢–æ–ø–∏–∫–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç —Å–æ–±–æ–π —Å–∏–º–≤–æ–ª—ã —Å –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π UTF8. –î–ª–∏–Ω–∞ —Ç–µ–º—ã –Ω–µ –º–æ–∂–µ—Ç –ø—Ä–µ–≤—ã—à–∞—Ç—å 32767 —Å–∏–º–≤–æ–ª–æ–≤. –ò–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–æ–ø–∏–∫–æ–≤ –∏–º–µ–µ—Ç —Ñ–æ—Ä–º–∞—Ç ¬´–¥–µ—Ä–µ–≤–∞¬ª, —á—Ç–æ —É–ø—Ä–æ—â–∞–µ—Ç –∏—Ö –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é –∏ –¥–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º. –¢–æ–ø–∏–∫–∏ —Å–æ—Å—Ç–æ—è—Ç –∏–∑ –æ–¥–Ω–æ–≥–æ –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —É—Ä–æ–≤–Ω–µ–π, –∫–æ—Ç–æ—Ä—ã–µ —Ä–∞–∑–¥–µ–ª–µ–Ω—ã –º–µ–∂–¥—É —Å–æ–±–æ–π —Å–∏–º–≤–æ–ª–æ–º ¬´/¬ª.</p>
<p>–ü–æ–¥–ø–∏—Å—á–∏–∫ –º–æ–∂–µ—Ç —Ç–∞–∫–∂–µ –ø–æ–ª—É—á–∞—Ç—å –¥–∞–Ω–Ω—ã–µ —Å—Ä–∞–∑—É —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ç–æ–ø–∏–∫–æ–≤, –¥–ª—è —ç—Ç–æ–≥–æ —Å—É—â–µ—Å—Ç–≤—É—é—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã. –û–Ω–∏ –±—ã–≤–∞—é—Ç –¥–≤—É—Ö —Ç–∏–ø–æ–≤: –æ–¥–Ω–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ –∏ –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ. –î–ª—è –±–æ–ª–µ–µ –ø—Ä–æ—Å—Ç–æ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –≤ –ø—Ä–∏–º–µ—Ä–∞—Ö –∫–∞–∂–¥—ã–π –∏–∑ –Ω–∏—Ö:</p>
<ul>
<li>
<p>–û–¥–Ω–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π ¬´+¬ª. –ö –ø—Ä–∏–º–µ—Ä—É, –Ω–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã –≤–æ –≤—Å–µ—Ö –∫–æ–º–Ω–∞—Ç–∞—Ö ‚Äì –¥–ª—è —ç—Ç–æ–≥–æ –Ω—É–∂–Ω–æ –ø–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ —Ç–æ–ø–∏–∫ –≤–∏–¥–∞ <code>home/+/temperature</code>. –í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –ø–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ —Å —Ç–æ–ø–∏–∫–æ–≤ <code>home/living-room1/temperature</code>, <code>home/living-room2/temperature</code> –∏ —Ç.–¥.</p>
</li>
<li>
<p>–ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π ¬´#¬ª. –ö –ø—Ä–∏–º–µ—Ä—É, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ —Å —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –¥–∞—Ç—á–∏–∫–æ–≤ –≤ –¥–æ–º–µ, –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ–º—Å—è –Ω–∞ —Ç–æ–ø–∏–∫ –≤–∏–¥–∞ <code>home/#</code>. –í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –ø–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ —Å —Ç–æ–ø–∏–∫–æ–≤ <code>home/living-room1/temperature</code>, <code>home/living-room2/button</code> –∏ —Ç.–ø.</p>
</li>
</ul>
<p><img alt="screenshot" src="https://mazko.github.io/blog/posts/2017/10/20/protokoly-interneta-veshchei-mqtt/mqtt.svg" style="width:100%; border:1px solid #ddd;"></p>
<h2>–ö–ê–ß–ï–°–¢–í–û –û–ë–°–õ–£–ñ–ò–í–ê–ù–ò–Ø</h2>
<p>MQTT –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É –≥–∏–±–∫–æ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å –æ–±–º–µ–Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏, –¥–ª—è —ç—Ç–æ–≥–æ –≤ –ø—Ä–æ—Ç–æ–∫–æ–ª–µ –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω–æ —Ç—Ä–∏ —É—Ä–æ–≤–Ω—è –∫–∞—á–µ—Å—Ç–≤–∞ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è QoS (Quality of Service):</p>
<ul>
<li>
<p>QoS 0. –ú–∞–∫—Å–∏–º—É–º –æ–¥–Ω–æ–∫—Ä–∞—Ç–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π. –ü—Ä–∏—ë–º–Ω–∏–∫ —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –∏—Ö –ø–æ–ª—É—á–µ–Ω–∏–µ, –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ, –ø–µ—Ä–µ–¥–∞—ë—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –ª–∏—à—å —Ä–∞–∑, –Ω–µ –ø—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞—è –ø–æ–ø—ã—Ç–æ–∫ –ø–æ –∏—Ö –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –ø–µ—Ä–µ–¥–∞—á–µ. –≠—Ç–æ ‚Äì –º–µ—Ç–æ–¥ ¬´–æ—Ç–ø—Ä–∞–≤–∏–ª –∏ –∑–∞–±—ã–ª¬ª</p>
</li>
<li>
<p>QoS 1. –ú–∏–Ω–∏–º—É–º –æ–¥–Ω–æ–∫—Ä–∞—Ç–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π. –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç—Å—è, —á—Ç–æ –ø—Ä–∏—ë–º–Ω–∏–∫ –ø–æ–ª—É—á–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω —Ä–∞–∑. –ü—Ä–∏ —ç—Ç–æ–º –ø–æ–¥–ø–∏—Å—á–∏–∫ –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –æ–¥–Ω–æ –∏ —Ç–æ –∂–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑. –û—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å –±—É–¥–µ—Ç –ø—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –Ω–µ –ø–æ–ª—É—á–∏—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –≤ —É—Å–ø–µ—à–Ω–æ–π –¥–æ—Å—Ç–∞–≤–∫–µ —Å–æ–æ–±—â–µ–Ω–∏—è</p>
</li>
<li>
<p>QoS 2. –û–¥–Ω–æ–∫—Ä–∞—Ç–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π. –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç—Å—è, —á—Ç–æ –ø—Ä–∏—ë–º–Ω–∏–∫ –ø–æ–ª—É—á–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–¥–∏–Ω –∏ —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑. –°–∞–º–∞—è –º–µ–¥–ª–µ–Ω–Ω–∞—è –ø—Ä–æ—Ü–µ–¥—É—Ä–∞ –¥–æ—Å—Ç–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π, –Ω–æ –ø—Ä–∏ —ç—Ç–æ–º –∏ —Å–∞–º–∞—è –Ω–∞–¥—ë–∂–Ω–∞—è. –î–ª—è –¥–æ—Å—Ç–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–µ—Ö–∞–Ω–∏–∑–º —á–µ—Ç—ã—Ä–µ—Ö—ç—Ç–∞–ø–Ω–æ–≥–æ —Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏—è</p>
</li>
</ul>
<p>–ù–æ –µ—Å—Ç—å –æ–¥–∏–Ω –Ω–µ–æ—á–µ–≤–∏–¥–Ω—ã–π –Ω—é–∞–Ω—Å. –î–µ–ª–æ –≤ —Ç–æ–º, —á—Ç–æ —É—Ä–æ–≤–µ–Ω—å QoS –ø—Ä–æ–ø–∏—Å–∞–Ω –∫–∞–∫ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∏–∑–¥–∞—Ç–µ–ª—è —Ç–∞–∫ –∏ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –ø–æ–¥–ø–∏—Å—á–∏–∫–∞ –∏ –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –º–æ–∂–µ—Ç –Ω–µ —Å–æ–≤–ø–∞–¥–∞—Ç—å. –í —Ç–∞–∫–æ–º —Å–ª—É—á–∞–µ –æ—á–µ–≤–∏–¥–Ω–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ–Ω–∏–∂–µ–Ω–∏–µ ¬´–æ–±—â–µ–≥–æ¬ª QoS –¥–æ –Ω–∞–∏–º–µ–Ω—å—à–µ–≥–æ —É—Ä–æ–≤–Ω—è –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –ø–∞—Ä–µ –∏–∑–¥–∞—Ç–µ–ª—å –ø–æ–¥–ø–∏—Å—á–∏–∫. –í–æ—Ç —Ç–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç MQTT –≤ Wireshark:</p>
<p><img alt="screenshot" src="https://mazko.github.io/blog/posts/2017/10/20/protokoly-interneta-veshchei-mqtt/sub.png" style="width:100%;"></p>
<p><img alt="screenshot" src="https://mazko.github.io/blog/posts/2017/10/20/protokoly-interneta-veshchei-mqtt/pub.png" style="width:100%;"></p>
<p>–ë—Ä–æ–∫–µ—Ä —è–≤–ª—è–µ—Ç—Å—è –Ω–∞–∏–±–æ–ª–µ–µ –∫—Ä–∏—Ç–∏—á–Ω—ã–º —ç–ª–µ–º–µ–Ω—Ç–æ–º —Å–∏—Å—Ç–µ–º—ã ¬´–∏–∑–¥–∞—Ç–µ–ª—å-–ø–æ–¥–ø–∏—Å—á–∏–∫¬ª, –æ—Ç –µ–≥–æ –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏ –∏ —Å–∫–æ—Ä–æ—Å—Ç–∏ –º–Ω–æ–≥–æ–µ –∑–∞–≤–∏—Å–∏—Ç. –ë—Ä–æ–∫–µ—Ä –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –ø—Ä–∏–µ–º –≤—Å–µ—Ö —Å–æ–æ–±—â–µ–Ω–∏–π, –∏—Ö —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é, –ø—Ä–∏–Ω—è—Ç–∏–µ —Ä–µ—à–µ–Ω–∏—è –æ —Ç–æ–º, –∫–æ–º—É –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã —ç—Ç–∏ —Å–æ–æ–±—â–µ–Ω–∏—è, –∏, –≤ –∫–æ–Ω–µ—á–Ω–æ–º –∏—Ç–æ–≥–µ, –∑–∞ –ø–µ—Ä–µ—Å—ã–ª–∫—É —Å–æ–æ–±—â–µ–Ω–∏–π –≤—Å–µ–º –∫–ª–∏–µ–Ω—Ç–∞–º-–ø–æ–¥–ø–∏—Å—á–∏–∫–∞–º. –°—Ä–µ–¥–∏ —Å–µ—Ä–≤–µ—Ä–Ω—ã—Ö —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–π –±—Ä–æ–∫–µ—Ä–∞ –ø–æ–º–∏–º–æ —É–∂–µ —É–ø–æ–º—è–Ω—É—Ç–æ–≥–æ –æ—Ç–∫—Ä—ã—Ç–æ–≥–æ –ü–û Mosquitto –º–æ–∂–Ω–æ –≤—ã–¥–µ–ª–∏—Ç—å IBM WebSphere MQ; –ª–µ–≥–∫–æ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—ã–π –∏ –≤—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π –æ—Ç–∫—Ä—ã—Ç—ã–π —Å–µ—Ä–≤–µ—Ä emqttd –Ω–∞ Erlang; –±—Ä–æ–∫–µ—Ä HiveMQ –∏ –¥—Ä.</p>
<p>–ö–∞–∫ —É–∂–µ —É–ø–æ–º–∏–Ω–∞–ª–æ—Å—å, MQTT —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–≤–µ—Ä—Ö TCP, –≥–¥–µ –∫–∞–∫ –∏–∑–≤–µ—Å—Ç–Ω–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–∞–Ω–Ω—ã—Ö —Ö–æ–¥—è—Ç –±–µ–∑ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è. –î–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç –±–æ—Ä–æ–¥–∞—Ç—ã—Ö —Ö–∞–∫–∫–µ—Ä–æ–≤ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –æ–±–º–µ–Ω–∞ –¥–∞–Ω–Ω—ã–º–∏ –ø–æ MQTT –ø—Ä–æ—Ç–æ–∫–æ–ª—É –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å TLS (Transport Layer Security) –≤–º–µ—Å—Ç–æ TCP. –ü—Ä–æ—Ç–æ–∫–æ–ª TLS —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–≤–µ—Ä—Ö TCP –∏ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Ç—Ä—ë—Ö —É—Å–ª—É–≥ –≤—Å–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º, —Ä–∞–±–æ—Ç–∞—é—â–∏–º –Ω–∞–¥ –Ω–∏–º ‚Äì —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ, –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –∏ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å. TLS –¥–∞—ë—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∫–ª–∏–µ–Ω—Ç-—Å–µ—Ä–≤–µ—Ä–Ω—ã–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º –æ—Å—É—â–µ—Å—Ç–≤–ª—è—Ç—å —Å–≤—è–∑—å –≤ —Å–µ—Ç–∏ —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —á—Ç–æ –Ω–µ–ª—å–∑—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—å –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏–µ –ø–∞–∫–µ—Ç–æ–≤ –∏ –æ—Å—É—â–µ—Å—Ç–≤–∏—Ç—å –Ω–µ—Å–∞–Ω–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø.</p>
    </div><!-- /.entry-content -->
  </article>
</section>


<div class="body" id="proiot-comments">
  <div class="comments">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
      var disqus_shortname = 'mazko';
      var disqus_identifier = 'blog/posts/2017/10/20/protokoly-interneta-veshchei-mqtt/';
      var disqus_url = 'https://mazko.github.io/blog/posts/2017/10/20/protokoly-interneta-veshchei-mqtt/';
      (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//mazko.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
    </script>
    <noscript>Please enable JavaScript to view the comments.</noscript>
  </div>
</div>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a rel="nofollow" href="http://getpelican.com/">Pelican</a></li>
                            <li><a rel="nofollow" href="http://python.org/">Python.org</a></li>
                            <li><a rel="nofollow" href="http://jinja.pocoo.org/">Jinja2</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="https://mazko.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>

                            <li><a rel="nofollow" href="http://github.com/mazko">github</a></li>
                            <li><a rel="nofollow" href="http://linkedin.com/in/mazko">linkedin</a></li>
                            <li><a rel="nofollow" href="http://stackoverflow.com/users/281102/oleg-mazko">stackoverflow</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

<script type="text/javascript">
    var disqus_shortname = 'mazko';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'https://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
</body>
</html>