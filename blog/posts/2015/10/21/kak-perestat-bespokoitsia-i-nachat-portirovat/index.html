<!DOCTYPE html>
<html lang="ru">
<head>
        <meta charset="utf-8" />
        <title>ĞšĞ°Ğº Ğ¿ĞµÑ€ĞµÑÑ‚Ğ°Ñ‚ÑŒ Ğ±ĞµÑĞ¿Ğ¾ĞºĞ¾Ğ¸Ñ‚ÑŒÑÑ Ğ¸ Ğ½Ğ°Ñ‡Ğ°Ñ‚ÑŒ Ğ¿Ğ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ</title>
        <link rel="stylesheet" href="http://proiot.ru/blog/theme/css/main.css" />
        <link href="http://proiot.ru/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="ğŸ  Ğ˜Ğ½Ñ‚ĞµÑ€Ğ½ĞµÑ‚ Ğ’ÑĞµĞ³Ğ¾ ğŸš— Atom Feed" />

        <script>
            (function(){
                var loc = window.location.href+'';
                if (loc.indexOf('https://')==0){
                    window.location.href = loc.replace('https://','http://');
                }
            })();
        </script>

        <!--[if IE]>
            <script src="https://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
<a rel="nofollow" href="http://github.com/mazko">
<img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png" alt="Fork me on GitHub" />
</a>
        <header id="banner" class="body">
                <h1><a href="http://proiot.ru/">ğŸ  Ğ˜Ğ½Ñ‚ĞµÑ€Ğ½ĞµÑ‚ Ğ’ÑĞµĞ³Ğ¾ ğŸš— </a></h1>
                <nav><ul>
                    <li class="active"><a href="http://proiot.ru/blog/category/admin/">Admin</a></li>
                    <li><a href="http://proiot.ru/blog/category/electronics/">Electronics</a></li>
                    <li><a href="http://proiot.ru/blog/category/embedded/">Embedded</a></li>
                    <li><a href="http://proiot.ru/blog/category/iot/">IoT</a></li>
                    <li><a href="http://proiot.ru/blog/category/java/">Java</a></li>
                </ul></nav>
        </header><!-- /#banner -->


<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/" rel="bookmark"
           title="Permalink to ĞšĞ°Ğº Ğ¿ĞµÑ€ĞµÑÑ‚Ğ°Ñ‚ÑŒ Ğ±ĞµÑĞ¿Ğ¾ĞºĞ¾Ğ¸Ñ‚ÑŒÑÑ Ğ¸ Ğ½Ğ°Ñ‡Ğ°Ñ‚ÑŒ Ğ¿Ğ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ">ĞšĞ°Ğº Ğ¿ĞµÑ€ĞµÑÑ‚Ğ°Ñ‚ÑŒ Ğ±ĞµÑĞ¿Ğ¾ĞºĞ¾Ğ¸Ñ‚ÑŒÑÑ Ğ¸ Ğ½Ğ°Ñ‡Ğ°Ñ‚ÑŒ Ğ¿Ğ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2015-10-21T00:00:00+03:00">
                Ğ¡Ñ€ 21 Ğ¾ĞºÑ‚ÑĞ±Ñ€Ñ 2015
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="http://proiot.ru/blog/author/oleg-mazko/">Oleg Mazko</a>
        </address>
<p>In <a href="http://proiot.ru/blog/category/admin/">Admin</a>.</p>
<p>tags: <a href="http://proiot.ru/blog/tag/nlp">NLP</a> <a href="http://proiot.ru/blog/tag/lucene">Lucene</a> <a href="http://proiot.ru/blog/tag/es6">ES6</a> </p>
</footer><!-- /.post-info -->      <p>ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ Ğ¿Ğ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ <strong>Java</strong> =&gt; <strong>JavaScript</strong> Ğ½Ğ° Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€Ğµ Ñ‚Ğ¾ĞºĞµĞ½Ğ¸Ğ·Ğ°Ñ‚Ğ¾Ñ€Ğ¾Ğ² Ğ¸Ğ· <a href="http://proiot.ru/blog/posts/2012/10/15/lucene-kurs-molodogo-boitsa/">Lucene</a>. </p>
<p><a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/out/lucene-tokenizers.es6">lucene-tokenizers.es6</a> | <a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/out/lucene-tokenizers.babel.js">lucene-tokenizers.babel.js</a> | <a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/out/tests/Coverage.html">Ğ¢ĞµÑÑ‚Ñ‹</a> | <a href="https://github.com/mazko/mazko.github.io/tree/src/content/posts/admin/2015-10-21-lucene-tokenizers-es6/src">Ğ˜ÑÑ…Ğ¾Ğ´Ğ½Ğ¸ĞºĞ¸</a></p>
<h2>TL;DR</h2>
<p>ĞŸÑ€Ğ¾Ñ†ĞµÑÑ Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ ÑƒÑĞ»Ğ¾Ğ²Ğ½Ğ¾ Ñ€Ğ°Ğ·Ğ´ĞµĞ»Ğ¸Ñ‚ÑŒ Ğ½Ğ° Ğ½ĞµÑĞºĞ¾Ğ»ÑŒĞºĞ¾ ÑÑ‚Ğ°Ğ¿Ğ¾Ğ²:</p>
<ul>
<li>
<p>Ğ—Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ Ğ¾Ñ‚ Ğ²Ğ½ĞµÑˆĞ½Ğ¸Ñ… Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞº Ğ´Ğ¾Ğ¶Ğ½Ñ‹ Ğ±Ñ‹Ñ‚ÑŒ Ğ¿Ñ€ĞµĞ´ÑÑ‚Ğ°Ğ²Ğ»ĞµĞ½Ğ½Ñ‹ Ğ² Ğ²Ğ¸Ğ´Ğµ Ğ¸ÑÑ…Ğ¾Ğ´Ğ½Ğ¸ĞºĞ¾Ğ², Ğ° Ğ½ĞµĞ·Ğ°Ğ´ĞµĞ¹ÑÑ‚Ğ²Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ ĞºĞ¾Ğ´ Ğ¿Ğ¾ Ğ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚Ğ¸ ÑƒĞ´Ğ°Ğ»Ñ‘Ğ½ Ñ‚.Ğº. Ñ€Ğ°Ğ·Ğ¼ĞµÑ€ Ñ‚Ğ°ĞºĞ¸ Ğ¸Ğ¼ĞµĞµÑ‚ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ Ğ¸ Ñ‡ĞµĞ¼ Ğ¼ĞµĞ½ÑŒÑˆĞµ Ğ²ĞµÑĞ¸Ñ‚ Ğ¿Ğ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¹ ÑĞºÑ€Ğ¸Ğ¿Ñ‚ Ñ‚ĞµĞ¼ Ğ¾Ğ½ Ğ±Ñ‹ÑÑ‚Ñ€ĞµĞµ Ğ¾Ñ‚Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ Ğ² Ğ±Ñ€Ğ°ÑƒĞ·ĞµÑ€Ğµ</p>
</li>
<li>
<p>Ğ¢Ğ¾Ñ‡Ğ½Ğ¾ Ñ‚Ğ°Ğº Ğ¶Ğµ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ½Ñ‹Ğµ ĞºĞ»Ğ°ÑÑÑ‹ ÑÑ€ĞµĞ´Ñ‹ Ğ¸ÑĞ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ñ <em>Java</em>, Ğ½Ğ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€ <em>Character.java</em>, Ğ½ĞµĞ¾Ğ±Ñ…Ğ¾Ğ´Ğ¸Ğ¼Ğ¾ Ğ¿ĞµÑ€ĞµĞ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»Ğ¸Ñ‚ÑŒ ÑĞºĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ² Ğ² Ğ¿Ñ€Ğ¾ĞµĞºÑ‚ </p>
</li>
<li>
<p>ĞĞ° ÑÑ‚Ğ¾Ğ¼ ÑÑ‚Ğ°Ğ¿Ğµ Ğ»Ğ¾Ğ³Ğ¸ĞºĞ° Ğ´Ğ¾Ğ»Ğ¶Ğ½Ğ° Ğ±Ñ‹Ñ‚ÑŒ Ğ¿Ğ¾Ğ»Ğ½Ğ¾ÑÑ‚ÑŒÑ Ñ€Ğ°Ğ±Ğ¾Ñ‡ĞµĞ¹, ĞµÑĞ»Ğ¸ Ñƒ Ğ¿Ğ¾Ñ€Ñ‚Ğ¸Ñ€ÑƒĞµĞ¼Ğ¾Ğ³Ğ¾ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ° Ğ¸Ğ¼ĞµÑÑ‚ÑÑ ÑĞ½Ğ¸Ñ‚-Ñ‚ĞµÑÑ‚Ñ‹ - Ğ¿Ñ€Ğ¾Ğ³Ğ½Ğ°Ñ‚ÑŒ Ğ¸Ñ…. Ğ•ÑĞ»Ğ¸ Ñ‡Ñ‚Ğ¾-Ñ‚Ğ¾ Ğ½Ğµ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ ÑĞµĞ¹Ñ‡Ğ°Ñ, Ğ²Ñ€ÑĞ´-Ğ»Ğ¸ Ğ·Ğ°Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ Ğ¿Ğ¾ÑĞ»Ğµ Ñ‚Ñ€Ğ°Ğ½ÑĞ»ÑÑ†Ğ¸Ğ¸ :)</p>
</li>
<li>
<p>Ğ¡Ğ¾Ğ±ÑÑ‚Ğ²ĞµĞ½Ğ½Ğ¾ ÑĞ°Ğ¼Ğ° <a href="http://mazko.github.io/ESJava/">Ñ‚Ñ€Ğ°Ğ½ÑĞ»ÑÑ†Ğ¸Ñ</a> Ğ´Ğ¾Ğ±Ñ‹Ñ‚Ñ‹Ñ… <em>Java</em> Ğ¸ÑÑ…Ğ¾Ğ´Ğ½Ğ¸ĞºĞ¾Ğ² Ğ² <a href="https://babeljs.io/docs/learn-es2015/" rel="nofollow">ES6</a></p>
</li>
<li>
<p>Ğ¢Ğ¾Ñ‡ĞµÑ‡Ğ½Ğ°Ñ Ğ°Ğ´Ğ°Ğ¿Ñ‚Ğ°Ñ†Ğ¸Ñ - Ğ½Ğ°Ğ¿Ñ€Ğ¸Ğ¼ĞµÑ€ Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ»Ğ¾Ğ³Ğ¸ĞºÑƒ Ğ¼ĞµÑ‚Ğ¾Ğ´Ğ° <em>System.arraycopy</em>, ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğ¹ Ğ¿ĞµÑ€ĞµĞ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»Ğ¸Ğ»Ğ¸ Ñ€Ğ°Ğ½ĞµĞµ, Ğ½Ğ¾ ÑƒĞ¶Ğµ Ğ´Ğ»Ñ <em>JavaScript</em></p>
</li>
</ul>
<noscript><span style="color:red;">Ğ’ĞºĞ»ÑÑ‡Ğ¸Ñ‚Ğµ JavaScript ! </span></noscript>

<script type="text/javascript" src="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/out/lucene-tokenizers.babel.js"></script>

<script type="text/javascript">
(function() {
  var parseId;

  function id(i) {
      return document.getElementById(i);
  }
  function parse(delay) {
      if (parseId) {
          window.clearTimeout(parseId);
      }

      parseId = window.setTimeout(function () {
        var ts = new luceneTokenizers[id("tokenizer-class").value];
        ts.setReader(
          new luceneTokenizers.StringReader(
            id("text-to-tokenize").value)
        );
        var res = [];
        for (var token, i=0; (token = ts.incrementToken()) !== null; i++) {
          var pretty_token = {};
          for (var prop in token) {
            if(token.hasOwnProperty(prop)) {
              pretty_token[prop.substring('_$esjava$'.length)] = token[prop];
            } 
          }
          res.push(pretty_token);
        }

        id("tokenize-result").value = JSON.stringify(res, null, 2);
      }, delay || 555);
  }
  window.onload = function () {
      var update = function() { parse(); };
      id("text-to-tokenize").onkeyup = update;
      id("tokenizer-class").onchange = update;
      parse();
  };
})();
</script>

<p><select id="tokenizer-class">
    <option value="StandardTokenizer">Standard</option>
    <option value="UAX29URLEmailTokenizer">UAX29URLEmail</option>
</select></p>
<div>
<!-- http://www.freeformatter.com/html-escape.html -->
<div style="width:49%; border:1px solid #ddd; float:left;">
  <textarea rows="10" id="text-to-tokenize" autocomplete="off"
    style="width:97%; margin:auto; color: #AAFF00; background-color: #111111; border: none; overflow:auto; padding: 5px; display: block;">The quick brown fox &lt;fox@mail.ru&gt; jumps over the 42 lazy dogs &lt; mailto:dog@gmail.com &gt; !? More at -> http://www.google.com/ &#9749;
  </textarea>
</div>
<div style="width:49%; border:1px solid #ddd; float:right;">
  <textarea rows="10" id="tokenize-result" autocomplete="off"
    style="width:97%; margin:auto; color: #EE00AA; background-color: #111111; border: none; overflow:auto; padding: 5px; display: block;" readonly></textarea>
</div>
<div style="clear:both;"></div>
</div>

<p>ĞšĞ°Ğº Ğ²Ğ¸Ğ´Ğ½Ğ¾ Ğ½Ğ° Ğ´ĞµĞ¼ĞºĞµ Ğ¸ Ğ½ĞµÑĞ»Ğ¾Ğ¶Ğ½Ğ¾ Ğ´Ğ¾Ğ³Ğ°Ğ´Ğ°Ñ‚ÑŒÑÑ Ğ¿Ğ¾ Ğ½Ğ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ñ Ñ‚Ğ¾ĞºĞµĞ½Ğ°Ğ¹Ğ·ĞµÑ€ <a href="https://lucene.apache.org/core/5_3_1/analyzers-common/org/apache/lucene/analysis/standard/UAX29URLEmailTokenizer.html" rel="nofollow">UAX29URLEmailTokenizer</a> Ñ‡ÑƒÑ‚ÑŒ Ğ±Ğ¾Ğ»ĞµĞµ Ğ¿Ñ€Ğ°Ğ²Ğ¾ÑĞ»Ğ°Ğ²Ğ½Ñ‹Ğ¹ Ğ¿Ğ¾ Ğ²ĞµĞ±Ñƒ. ĞĞ±Ğ° <em>StandardTokenizer</em> Ğ¸ <em>UAX29URLEmailTokenizer</em> Ğ²Ğ¿Ğ¾Ğ»Ğ½Ğµ ÑĞµĞ±Ğµ Ğ´Ñ€ÑƒĞ¶Ğ°Ñ‚ Ñ ÑĞ½Ğ¸ĞºĞ¾Ğ´Ğ¾Ğ¼.</p>
<p>Ğ¢ĞµĞ¿ĞµÑ€ÑŒ Ñ‡ÑƒÑ‚ÑŒ Ğ¿Ğ¾Ğ´Ñ€Ğ¾Ğ±Ğ½ĞµĞ¹ Ğ¾ Ğ¿Ñ€Ğ¾Ñ†ĞµÑÑĞµ Ğ¿Ğ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ.</p>
<h2>ESJava</h2>
<p>Ğ˜Ñ‚Ğ¾Ğ³Ğ¾Ğ²Ğ°Ñ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ğ°Ğ¿Ğ¾Ğº Java Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ° (Eclipse):</p>
<div class="highlight"><pre><span></span>~$ tree
.
â”œâ”€â”€ src
â”‚Â Â  â”œâ”€â”€ org
â”‚Â Â  â”‚Â Â  â””â”€â”€ apache
â”‚Â Â  â”‚Â Â      â””â”€â”€ lucene
â”‚Â Â  â”‚Â Â          â””â”€â”€ analysis
â”‚Â Â  â”‚Â Â              â”œâ”€â”€ standard
â”‚Â Â  â”‚Â Â              â”‚Â Â  â”œâ”€â”€ Character.java
â”‚Â Â  â”‚Â Â              â”‚Â Â  â”œâ”€â”€ Exception.java
â”‚Â Â  â”‚Â Â              â”‚Â Â  â”œâ”€â”€ IndexOutOfBoundsException.java
â”‚Â Â  â”‚Â Â              â”‚Â Â  â”œâ”€â”€ IOException.java
â”‚Â Â  â”‚Â Â              â”‚Â Â  â”œâ”€â”€ Reader.java
â”‚Â Â  â”‚Â Â              â”‚Â Â  â”œâ”€â”€ StandardAnalyzer.java
â”‚Â Â  â”‚Â Â              â”‚Â Â  â”œâ”€â”€ StandardTokenizerImpl.java
â”‚Â Â  â”‚Â Â              â”‚Â Â  â”œâ”€â”€ StandardTokenizer.java
â”‚Â Â  â”‚Â Â              â”‚Â Â  â”œâ”€â”€ StringReader.java
â”‚Â Â  â”‚Â Â              â”‚Â Â  â”œâ”€â”€ System.java
â”‚Â Â  â”‚Â Â              â”‚Â Â  â”œâ”€â”€ Tokenizer.java
â”‚Â Â  â”‚Â Â              â”‚Â Â  â”œâ”€â”€ TokenModel.java
â”‚Â Â  â”‚Â Â              â”‚Â Â  â”œâ”€â”€ UAX29URLEmailTokenizerImpl.java
â”‚Â Â  â”‚Â Â              â”‚Â Â  â””â”€â”€ UAX29URLEmailTokenizer.java
â”‚Â Â  â”‚Â Â              â””â”€â”€ tokenattributes
â”‚Â Â  â”‚Â Â                  â””â”€â”€ CharTermAttribute.java
â”‚Â Â  â””â”€â”€ Test.java
â””â”€â”€ tests
    â””â”€â”€ org
        â””â”€â”€ apache
            â””â”€â”€ lucene
                â””â”€â”€ analysis
                    â””â”€â”€ standard
                        â”œâ”€â”€ BaseTokenStreamTestCase.java
                        â”œâ”€â”€ Slow.java
                        â”œâ”€â”€ TestStandardAnalyzer.java
                        â”œâ”€â”€ TestUAX29URLEmailTokenizer.java
                        â”œâ”€â”€ TestUtil.java
                        â””â”€â”€ WordBreakTestUnicode_6_3_0.java

<span class="m">13</span> directories, <span class="m">22</span> files
</pre></div>


<p>Ğ”Ğ»Ñ ÑƒĞ´Ğ¾Ğ±ÑÑ‚Ğ²Ğ° Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ Ñ Ğ¸ÑÑ…Ğ¾Ğ´Ğ½Ğ¸ĞºĞ°Ğ¼Ğ¸ ÑÑ€ĞµĞ´Ñ‹ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½Ğ¸Ñ Java:</p>
<div class="highlight"><pre><span></span>~$ apt-get install openjdk-7-source
</pre></div>


<p>Ğ˜ Ñ‚Ğ°Ğº Ğ²Ñ‹Ğ³Ğ»ÑĞ´Ğ¸Ñ‚ Ğ¾Ğ´Ğ¸Ğ½ Ğ¸Ğ· Ğ¿ĞµÑ€ĞµĞ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»Ñ‘Ğ½Ğ½Ñ‹Ñ… Ğ² Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğµ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ½Ñ‹Ñ… Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²:</p>
<p><em>src/org/apache/lucene/analysis/standardSystem.java</em></p>
<div class="highlight"><pre><span></span><span class="kd">public</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">System</span> <span class="o">{</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">arraycopy</span><span class="o">(</span><span class="n">Object</span> <span class="n">s</span><span class="o">,</span> <span class="kt">int</span> <span class="n">sp</span><span class="o">,</span> <span class="n">Object</span> <span class="n">d</span><span class="o">,</span> <span class="kt">int</span> <span class="n">dp</span><span class="o">,</span> <span class="kt">int</span> <span class="n">l</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// :es6:</span>
    <span class="c1">// int[] elements_to_add = s.slice(sp, sp + l);</span>
    <span class="c1">// Array.prototype.splice.apply(d, new int[] {dp,</span>
    <span class="c1">// elements_to_add.length}.concat(elements_to_add));</span>
    <span class="n">java</span><span class="o">.</span><span class="na">lang</span><span class="o">.</span><span class="na">System</span><span class="o">.</span><span class="na">arraycopy</span><span class="o">(</span><span class="n">s</span><span class="o">,</span> <span class="n">sp</span><span class="o">,</span> <span class="n">d</span><span class="o">,</span> <span class="n">dp</span><span class="o">,</span> <span class="n">l</span><span class="o">);</span>
    <span class="c1">// :end:</span>
  <span class="o">}</span>
<span class="o">}</span>
</pre></div>


<p>Ğ’ <em>ES6</em> ĞµÑÑ‚ÑŒ Ñ…Ğ¾Ñ€Ğ¾ÑˆĞ°Ñ Ğ¸Ğ½ÑÑ‚Ñ€ÑƒĞºÑ†Ğ¸Ñ <code>import</code>, Ğ½Ğ¾ Ğ¿Ğ¾Ğ²ĞµĞ´ĞµĞ½Ğ¸Ğµ Ğ½ĞµĞ¼Ğ½Ğ¾Ğ³Ğ¾ Ğ¾Ñ‚Ğ»Ğ¸Ñ‡Ğ°ĞµÑ‚ÑÑ Ğ¾Ñ‚ Ğ°Ğ½Ğ°Ğ»Ğ¾Ğ³Ğ¸Ñ‡Ğ½Ğ¾Ğ¹ Ğ² Java - Ñ„Ğ°Ğ¹Ğ»Ñ‹ Ğ¸Ğ· Ğ¾Ğ´Ğ½Ğ¾Ğ³Ğ¾ Ğ¿Ñ€Ğ¾ÑÑ‚Ñ€Ğ°Ğ½ÑÑ‚Ğ²Ğ° Ñ‚Ğ¾Ğ¶Ğµ Ğ½ĞµĞ¾Ğ±Ñ…Ğ¾Ğ´Ğ¸Ğ¼Ğ¾ Ğ¸Ğ¼Ğ¿Ğ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ ÑĞ²Ğ½Ğ¾. ĞĞ¾ Ğ»ĞµĞ½ÑŒ. ĞŸÑ€Ğ¾Ñ‰Ğµ Ğ·Ğ°ĞºĞ¸Ğ½ÑƒÑ‚ÑŒ Ğ²ÑĞµ ĞºĞ»Ğ°ÑÑÑ‹ Ğ² Ğ¾Ğ´Ğ¸Ğ½ Ñ„Ğ°Ğ¹Ğ»:</p>
<p><em>merge.sh</em></p>
<div class="highlight"><pre><span></span><span class="c1"># find -name &#39;*.java&#39; | grep &#39;./src/org/apache/lucene/analysis/&#39;</span>
cat <span class="se">\</span>
./src/org/apache/lucene/analysis/standard/Exception.java <span class="se">\</span>
./src/org/apache/lucene/analysis/standard/IOException.java <span class="se">\</span>
./src/org/apache/lucene/analysis/standard/IndexOutOfBoundsException.java <span class="se">\</span>
./src/org/apache/lucene/analysis/standard/Reader.java <span class="se">\</span>
./src/org/apache/lucene/analysis/standard/StringReader.java <span class="se">\</span>
./src/org/apache/lucene/analysis/standard/Character.java <span class="se">\</span>
./src/org/apache/lucene/analysis/tokenattributes/CharTermAttribute.java <span class="se">\</span>
./src/org/apache/lucene/analysis/standard/TokenModel.java <span class="se">\</span>
./src/org/apache/lucene/analysis/standard/Tokenizer.java <span class="se">\</span>
./src/org/apache/lucene/analysis/standard/System.java <span class="se">\</span>
./src/org/apache/lucene/analysis/standard/StandardAnalyzer.java <span class="se">\</span>
./src/org/apache/lucene/analysis/standard/StandardTokenizerImpl.java <span class="se">\</span>
./src/org/apache/lucene/analysis/standard/StandardTokenizer.java <span class="se">\</span>
./src/org/apache/lucene/analysis/standard/UAX29URLEmailTokenizerImpl.java <span class="se">\</span>
./src/org/apache/lucene/analysis/standard/UAX29URLEmailTokenizer.java <span class="se">\</span>
<span class="p">|</span> sed <span class="s1">&#39;/^package\s/d&#39;</span> <span class="p">|</span> sed <span class="s1">&#39;/^import\s/d&#39;</span> <span class="se">\</span>
&gt; lucene-tokenizers.java
</pre></div>


<p>Ğ˜ Ğ¿Ñ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ĞµÑ‚ÑŒ ÑĞ¿Ğ¸ÑĞ¾Ğº Ñ‚Ğ¾Ñ‡ĞµÑ‡Ğ½Ñ‹Ñ… Ğ°Ğ´Ğ°Ğ¿Ñ‚Ğ°Ñ†Ğ¸Ğ¹ Ğ´Ğ»Ñ JavaScript:</p>
<div class="highlight"><pre><span></span>~$ awk <span class="s1">&#39;/\:es6\:/,/\:end\:/&#39;</span> lucene-tokenizers.java
</pre></div>


<p>Ğ¢Ñ€Ğ°Ğ½ÑĞ»ÑÑ†Ğ¸Ñ:</p>
<div class="highlight"><pre><span></span>~$ npm install -g esjava
~$ <span class="nb">alias</span> <span class="nv">esjava10000</span><span class="o">=</span><span class="s2">&quot;node --stack-size=10000 `which esjava`&quot;</span>
~$ esjava10000 lucene-tokenizers.java &gt; out/lucene-tokenizers.es6
</pre></div>


<p>ĞÑÑ‚Ğ°Ğ»Ğ¾ÑÑŒ ÑƒĞºĞ°Ğ·Ğ°Ñ‚ÑŒ Ğ½Ğ° <em>export</em> ĞºĞ»Ğ°ÑÑÑ‹ <em>StringReader</em>, <em>StandardTokenizer</em>, <em>UAX29URLEmailTokenizer</em> Ğ¸ Ğ´Ğ¾Ğ±Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºÑƒ ÑÑ‚Ğ°Ñ€Ñ‹Ñ… JavaScript Ğ´Ğ²Ğ¸Ğ¶ĞºĞ¾Ğ²:</p>
<p><em>out/js.sh</em></p>
<div class="highlight"><pre><span></span><span class="nv">ES6FILE</span><span class="o">=</span><span class="s1">&#39;lucene-tokenizers.es6&#39;</span>

<span class="k">for</span> cls in <span class="s1">&#39;StringReader&#39;</span> <span class="s1">&#39;StandardTokenizer&#39;</span> <span class="s1">&#39;UAX29URLEmailTokenizer&#39;</span><span class="p">;</span> <span class="k">do</span>
  sed -i <span class="s2">&quot;s/^class\s\+</span><span class="si">${</span><span class="nv">cls</span><span class="si">}</span><span class="s2">\s\+/export class </span><span class="si">${</span><span class="nv">cls</span><span class="si">}</span><span class="s2"> /&quot;</span> <span class="si">${</span><span class="nv">ES6FILE</span><span class="si">}</span>
<span class="k">done</span>

sed <span class="s1">&#39;s/\\u/\\\\u/g&#39;</span> <span class="s2">&quot;</span><span class="nv">$ES6FILE</span><span class="s2">&quot;</span> <span class="p">|</span>                     <span class="se">\</span>
node --stack-size<span class="o">=</span><span class="m">10000</span>                              <span class="se">\</span>
<span class="s2">&quot;`which babel`&quot;</span>                                      <span class="se">\</span>
--compact<span class="o">=</span><span class="nb">false</span>                                      <span class="se">\</span>
--presets es2015                                     <span class="se">\</span>
--plugins transform-es2015-modules-umd               <span class="se">\</span>
--module-id luceneTokenizers <span class="p">|</span>                       <span class="se">\</span>
sed <span class="s1">&#39;s/\\\\u/\\u/g&#39;</span> &gt; lucene-tokenizers.babel.js
</pre></div>


<p>Ğ¡ĞºÑ€Ğ¸Ğ¿Ñ‚ Ğ½Ğ° Ğ²Ñ‹Ñ…Ğ¾Ğ´Ğµ <em>lucene-tokenizers.babel.js</em> ĞºÑ€ÑƒÑ‚Ğ¸Ñ‚ÑÑ Ğ² Ğ´ĞµĞ¼ĞºĞµ.</p>
<!-- Pelican Attach hack -->

<!-- cd ./src/ && find . -type f | sort | xargs -I{} -n1 echo -e '<a href="\x7Battach\x7Dsrc/{}"></a>' | xclip -selection clipboard && cd - -->

<!-- 
<a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/lucene-tokenizers.java"></a>
<a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/merge.sh"></a>
<a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/out/js.sh"></a>
<a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/out/lucene-tokenizers.babel.js"></a>
<a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/out/lucene-tokenizers.es6"></a>
<a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/out/tests/BaseTokenStreamTestCase.js"></a>
<a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/out/tests/Coverage.html"></a>
<a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/out/tests/qunit/blanket.js"></a>
<a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/out/tests/qunit/lcov_reporter.js"></a>
<a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/out/tests/qunit/qunit-1.19.0.css"></a>
<a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/out/tests/qunit/qunit-1.19.0.js"></a>
<a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/out/tests/stdTests.js"></a>
<a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/out/tests/uaxTests.js"></a>
<a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/out/tests/WordBreakTestUnicode_6_3_0.js"></a>
<a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/src/org/apache/lucene/analysis/standard/Character.java"></a>
<a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/src/org/apache/lucene/analysis/standard/Exception.java"></a>
<a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/src/org/apache/lucene/analysis/standard/IndexOutOfBoundsException.java"></a>
<a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/src/org/apache/lucene/analysis/standard/IOException.java"></a>
<a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/src/org/apache/lucene/analysis/standard/Reader.java"></a>
<a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/src/org/apache/lucene/analysis/standard/StandardAnalyzer.java"></a>
<a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/src/org/apache/lucene/analysis/standard/StandardTokenizerImpl.java"></a>
<a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/src/org/apache/lucene/analysis/standard/StandardTokenizer.java"></a>
<a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/src/org/apache/lucene/analysis/standard/StringReader.java"></a>
<a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/src/org/apache/lucene/analysis/standard/System.java"></a>
<a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/src/org/apache/lucene/analysis/standard/Tokenizer.java"></a>
<a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/src/org/apache/lucene/analysis/standard/TokenModel.java"></a>
<a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/src/org/apache/lucene/analysis/standard/UAX29URLEmailTokenizerImpl.java"></a>
<a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/src/org/apache/lucene/analysis/standard/UAX29URLEmailTokenizer.java"></a>
<a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/src/org/apache/lucene/analysis/tokenattributes/CharTermAttribute.java"></a>
<a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/src/Test.java"></a>
<a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/tests/org/apache/lucene/analysis/standard/BaseTokenStreamTestCase.java"></a>
<a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/tests/org/apache/lucene/analysis/standard/Slow.java"></a>
<a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/tests/org/apache/lucene/analysis/standard/TestStandardAnalyzer.java"></a>
<a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/tests/org/apache/lucene/analysis/standard/TestUAX29URLEmailTokenizer.java"></a>
<a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/tests/org/apache/lucene/analysis/standard/TestUtil.java"></a>
<a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/tests/org/apache/lucene/analysis/standard/WordBreakTestUnicode_6_3_0.java"></a>
 -->

<!-- cd ./npm/ && find . -type f | sort | xargs -I{} -n1 echo -e '<a href="\x7Battach\x7Dnpm/{}"></a>' | xclip -selection clipboard && cd - -->

<!--
<a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/npm/.gitignore"></a>
<a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/npm/package.json"></a>
<a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/npm/readme"></a>
 -->
    </div><!-- /.entry-content -->
  </article>
</section>

<div class="body" style="margin-bottom: 2em">
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- proiot-index -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-6247427373315098"
     data-ad-slot="2711782349"
     data-ad-format="auto"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>

<div class="body" id="proiot-comments">
  <div class="comments">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
      var disqus_shortname = 'mazko';
      var disqus_identifier = 'blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/';
      var disqus_url = 'http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/';
      (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//mazko.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
    </script>
    <noscript>Please enable JavaScript to view the comments.</noscript>
  </div>
</div>
        <section id="extras" class="body">
                <div class="blogroll">
                        <h2>links</h2>
                        <ul>
                            <li><a rel="nofollow" href="http://getpelican.com/">Pelican</a></li>
                            <li><a rel="nofollow" href="http://python.org/">Python.org</a></li>
                            <li><a rel="nofollow" href="http://jinja.pocoo.org/">Jinja2</a></li>
                        </ul>
                </div><!-- /.blogroll -->
                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="http://proiot.ru/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>

                            <li><a rel="nofollow" href="http://github.com/mazko">github</a></li>
                            <li><a rel="nofollow" href="http://linkedin.com/in/mazko">linkedin</a></li>
                            <li><a rel="nofollow" href="http://stackoverflow.com/users/281102/oleg-mazko">stackoverflow</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a rel="nofollow" href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a rel="nofollow" href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a rel="nofollow" href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

<script type="text/javascript">
    var disqus_shortname = 'mazko';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = 'https://' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
</body>
</html>