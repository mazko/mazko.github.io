<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>üè† –ò–Ω—Ç–µ—Ä–Ω–µ—Ç –í—Å–µ–≥–æ üöó</title><link href="http://proiot.ru/" rel="alternate"></link><link href="http://proiot.ru/feeds/all.atom.xml" rel="self"></link><id>http://proiot.ru/</id><updated>2022-09-01T00:00:00+03:00</updated><entry><title>–û–±—É—á–µ–Ω–∏–µ —Å –ø–æ–¥–∫—Ä–µ–ø–ª–µ–Ω–∏–µ–º –¥–ª—è –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤</title><link href="http://proiot.ru/blog/posts/2022/09/01/obuchenie-s-podkrepleniem-dlia-mikrokontrollerov/" rel="alternate"></link><published>2022-09-01T00:00:00+03:00</published><updated>2022-09-01T00:00:00+03:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2022-09-01:/blog/posts/2022/09/01/obuchenie-s-podkrepleniem-dlia-mikrokontrollerov/</id><summary type="html">&lt;p&gt;–¢—É—Ç –º—ã –æ–±—É—á–∏–º –∏ —Ä–∞–∑–≤–µ—Ä–Ω–µ–º &lt;a href="http://proiot.ru/blog/posts/2021/03/28/neiroseti-dlia-mikrokontrollerov-pertseptron/"&gt;–ø–µ—Ä—Ü–µ–ø—Ç—Ä–æ–Ω&lt;/a&gt;, –∫–æ—Ç–æ—Ä—ã–π —É–º–µ–µ—Ç –∏–≥—Ä–∞—Ç—å –≤ –∏–≥—Ä—É ¬´–∑–º–µ–π–∫–∞¬ª –Ω–∞ &lt;a href="http://proiot.ru/blog/posts/2017/06/22/s-dlia-mikrokontrollerov-upravlenie-pamiatiu/"&gt;–º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–µ&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;–î–∞–≤–∞–π—Ç–µ –ø–æ—Ñ–∞–Ω—Ç–∞–∑–∏—Ä—É–µ–º. –†–æ–±–æ—Ç –ø–æ–ª—É—á–∏–ª –∑–∞–¥–∞–Ω–∏–µ –¥–æ—Å—Ç–∞—Ç—å –ø—Ä–µ–¥–º–µ—Ç—ã –∏–∑ –æ–¥–Ω–æ–π –∫–æ—Ä–æ–±–∫–∏ –∏ –ø–µ—Ä–µ–ª–æ–∂–∏—Ç—å –∏—Ö –≤ –¥—Ä—É–≥—É—é. –í —Ç–µ—á–µ–Ω–∏–µ –Ω–æ—á–∏ –º–∞–≥–∏—á–µ—Å–∫–∏–π —Å—É–ø–µ—Ä—Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º –±—É–¥–µ—Ç —Å–∞–º –ø—ã—Ç–∞—Ç—å—Å—è –ø–æ–Ω—è—Ç—å, –∫–∞–∫ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –ø–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—É—é –∑–∞–¥–∞—á—É. –ö —É—Ç—Ä—É, –ø–æ–∫–∞ –∏–Ω–∂–µ–Ω–µ—Ä—ã —Å–ø–∞–ª–∏, –º–∞–Ω–∏–ø—É–ª—è—Ç–æ—Ä —É–∂–µ ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;p&gt;–¢—É—Ç –º—ã –æ–±—É—á–∏–º –∏ —Ä–∞–∑–≤–µ—Ä–Ω–µ–º &lt;a href="http://proiot.ru/blog/posts/2021/03/28/neiroseti-dlia-mikrokontrollerov-pertseptron/"&gt;–ø–µ—Ä—Ü–µ–ø—Ç—Ä–æ–Ω&lt;/a&gt;, –∫–æ—Ç–æ—Ä—ã–π —É–º–µ–µ—Ç –∏–≥—Ä–∞—Ç—å –≤ –∏–≥—Ä—É ¬´–∑–º–µ–π–∫–∞¬ª –Ω–∞ &lt;a href="http://proiot.ru/blog/posts/2017/06/22/s-dlia-mikrokontrollerov-upravlenie-pamiatiu/"&gt;–º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–µ&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;–î–∞–≤–∞–π—Ç–µ –ø–æ—Ñ–∞–Ω—Ç–∞–∑–∏—Ä—É–µ–º. –†–æ–±–æ—Ç –ø–æ–ª—É—á–∏–ª –∑–∞–¥–∞–Ω–∏–µ –¥–æ—Å—Ç–∞—Ç—å –ø—Ä–µ–¥–º–µ—Ç—ã –∏–∑ –æ–¥–Ω–æ–π –∫–æ—Ä–æ–±–∫–∏ –∏ –ø–µ—Ä–µ–ª–æ–∂–∏—Ç—å –∏—Ö –≤ –¥—Ä—É–≥—É—é. –í —Ç–µ—á–µ–Ω–∏–µ –Ω–æ—á–∏ –º–∞–≥–∏—á–µ—Å–∫–∏–π —Å—É–ø–µ—Ä—Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∞–ª–≥–æ—Ä–∏—Ç–º –±—É–¥–µ—Ç —Å–∞–º –ø—ã—Ç–∞—Ç—å—Å—è –ø–æ–Ω—è—Ç—å, –∫–∞–∫ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –ø–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—É—é –∑–∞–¥–∞—á—É. –ö —É—Ç—Ä—É, –ø–æ–∫–∞ –∏–Ω–∂–µ–Ω–µ—Ä—ã —Å–ø–∞–ª–∏, –º–∞–Ω–∏–ø—É–ª—è—Ç–æ—Ä —É–∂–µ –æ—Å–≤–æ–∏—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏, –∫–∞–∫ –µ—Å–ª–∏ –±—ã –æ–Ω –±—ã–ª –∑–∞–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω —Ç–æ–ª–∫–æ–≤—ã–º —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–æ–º. –ó–≤—É—á–∏—Ç –∏–Ω—Ç—Ä–∏–≥—É—é—â–µ, –Ω–µ —Ç–∞–∫ –ª–∏?&lt;/p&gt;
&lt;p&gt;–û–¥–∏–Ω –∏–∑ –≤–æ–∑–º–æ–∂–Ω—ã—Ö –ø—É—Ç–µ–π –¥–ª—è —Ä–µ—à–µ–Ω–∏—è —Ç–∞–∫–∏—Ö –∑–∞–¥–∞—á —ç—Ç–æ &lt;strong&gt;–æ–±—É—á–µ–Ω–∏–µ —Å –ø–æ–¥–∫—Ä–µ–ø–ª–µ–Ω–∏–µ–º&lt;/strong&gt;. –í —á–µ–º –µ–≥–æ —Å—É—Ç—å? –¢–∞–∫–æ–π –º–µ—Ç–æ–¥ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø—ã—Ç—É–µ–º–æ–π —Å–∏—Å—Ç–µ–º–µ (–∞–≥–µ–Ω—Ç—É) –æ–±—É—á–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –æ–∫—Ä—É–∂–∞—é—â–µ–π —Å—Ä–µ–¥–æ–π. –°–∞–º–æ–µ –≥–ª–∞–≤–Ω–æ–µ ‚Äì —Ä–æ–±–æ—Ç —Å–º–æ–∂–µ—Ç —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –≤—ã—è—Å–Ω–∏—Ç—å, –∫–∞–∫ –≤—ã–ø–æ–ª–Ω—è—Ç—å –ø–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–µ –ø–µ—Ä–µ–¥ –Ω–∏–º –∑–∞–¥–∞—á–∏. –ê —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã –ø–æ–∑–≤–æ–ª—è—Ç —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–º—É —Ä–µ—à–µ–Ω–∏—é –∫–∞–∂–¥—ã–π —Ä–∞–∑ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å —É—Å–ø–µ—à–Ω–æ—Å—Ç—å —Å–≤–æ–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π. –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã –≥–ª—É–±–æ–∫–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è —Å –ø–æ–¥–∫—Ä–µ–ø–ª–µ–Ω–∏–µ–º —Å–ø–æ—Å–æ–±–Ω—ã —Ä–µ—à–∞—Ç—å –∑–∞–¥–∞—á–∏ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–∞ –º–µ—Ç–æ–¥–æ–º –ø—Ä–æ–± –∏ –æ—à–∏–±–æ–∫ –±–µ–∑ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∫–∞–∫–∏—Ö-–ª–∏–±–æ –∞–ø—Ä–∏–æ—Ä–Ω—ã—Ö –∑–Ω–∞–Ω–∏–π –æ —Ä–µ—à–∞–µ–º–æ–π –∑–∞–¥–∞—á–µ.&lt;/p&gt;
&lt;p&gt;–ë—Ä–æ—Å–∞–µ–º –±–µ–¥–Ω–æ–≥–æ —Ä–æ–±–æ—Ç–∞ –≤ —Ä–µ–∞–ª—å–Ω—É—é –∂–∏–∑–Ω—å, –±—É–¥–µ–º —à—Ç—Ä–∞—Ñ–æ–≤–∞—Ç—å –µ–≥–æ –∑–∞ –æ—à–∏–±–∫–∏ –∏ –Ω–∞–≥—Ä–∞–∂–¥–∞—Ç—å –∑–∞ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–æ—Å—Ç—É–ø–∫–∏. –ù–∞ –ª—é–¥—è—Ö —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø–æ—á–µ–º—É –±—ã –Ω–∞ –∏ —Ä–æ–±–æ—Ç–∞—Ö –Ω–µ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å? –í—ã–∂–∏–≤–∞–Ω–∏–µ –≤ —Å—Ä–µ–¥–µ –∏ –µ—Å—Ç—å –∏–¥–µ—è –æ–±—É—á–µ–Ω–∏—è —Å –ø–æ–¥–∫—Ä–µ–ø–ª–µ–Ω–∏–µ–º. –£–º–Ω—ã–µ –º–æ–¥–µ–ª–∏ —Ä–æ–±–æ—Ç–æ–≤-–ø—ã–ª–µ—Å–æ—Å–æ–≤ –∏ —Å–∞–º–æ—É–ø—Ä–∞–≤–ª—è–µ–º—ã–µ –∞–≤—Ç–æ–º–æ–±–∏–ª–∏ –æ–±—É—á–∞—é—Ç—Å—è –∏–º–µ–Ω–Ω–æ —Ç–∞–∫: –∏–º —Å–æ–∑–¥–∞—é—Ç –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π –≥–æ—Ä–æ–¥ (—á–∞—Å—Ç–æ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–∞—Ä—Ç –Ω–∞—Å—Ç–æ—è—â–∏—Ö –≥–æ—Ä–æ–¥–æ–≤), –Ω–∞—Å–µ–ª—è—é—Ç —Å–ª—É—á–∞–π–Ω—ã–º–∏ –ø–µ—à–µ—Ö–æ–¥–∞–º–∏ –∏ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç —É—á–∏—Ç—å—Å—è –≤—ã–∂–∏–≤–∞—Ç—å. –ö–æ–≥–¥–∞ —Ä–æ–±–æ—Ç –Ω–∞—á–∏–Ω–∞–µ—Ç —Ö–æ—Ä–æ—à–æ —Å–µ–±—è —á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å –≤ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π —Å—Ä–µ–¥–µ, –µ–≥–æ –≤—ã–ø—É—Å–∫–∞—é—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ —É–ª–∏—Ü—ã.&lt;/p&gt;
&lt;p&gt;–í –∫–∞—á–µ—Å—Ç–≤–µ –¥–µ–º–∫–∏ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä —Å–∞–º –∏–≥—Ä–µ—Ç –≤ –∏–≥—Ä—É &lt;a href="http://proiot.ru/blog/posts/2017/06/22/s-dlia-mikrokontrollerov-upravlenie-pamiatiu/"&gt;–∑–º–µ–π–∫–∞&lt;/a&gt;. –° –ø–æ–º–æ—â—å—é –∞–ª–≥–æ—Ä–∏—Ç–º–∞ &lt;code&gt;Q-learning&lt;/code&gt; –∑–º–µ–π–∫–∞ –≤—ã–±–∏—Ä–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–π –∏–∑ —Ç–∞–±–ª–∏—Ü—ã —Å–æ—Å—Ç–æ—è–Ω–∏–π. –ß—Ç–æ —ç—Ç–æ –∑–∞ –∞–ª–≥–æ—Ä–∏—Ç–º —Ç–∞–∫–æ–π –∏ –∫–∞–∫–∏–µ —É –Ω–µ–≥–æ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã —Ä–∞—Å–ø–∏—Å–∞–Ω–æ —á—É—Ç—å –Ω–∏–∂–µ.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://mazko.github.io/MSP430.js/d2f5d234671ecf00dc58f6612087d33c"&gt;MSP430.js&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2022/09/01/obuchenie-s-podkrepleniem-dlia-mikrokontrollerov/Q_Snake_msp430.html"&gt;–Ω–æ—É—Ç–±—É–∫&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2022/09/01/obuchenie-s-podkrepleniem-dlia-mikrokontrollerov/snake.msp430.js.zip"&gt;–∏—Å—Ö–æ–¥–Ω–∏–∫–∏&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2022/09/01/obuchenie-s-podkrepleniem-dlia-mikrokontrollerov/ui-msp430.gif" style="width:55%; margin: 0 auto; display:block;"&gt;&lt;/p&gt;
&lt;p&gt;–ü–µ—Ä–µ–¥ —Ç–µ–º –∫–∞–∫ –ø–æ–≥—Ä—É–∂–∞—Ç—å—Å—è –≤ –∞–ª–≥–æ—Ä–∏—Ç–º—ã –æ–±—É—á–µ–Ω–∏—è —Å –ø–æ–¥–∫—Ä–µ–ø–ª–µ–Ω–∏–µ–º, –ø–æ–∂–∞–ª—É–π —Å—Ç–æ–∏—Ç –Ω–µ–º–Ω–æ–≥–æ –ø—Ä–æ–±–µ–∂–∞—Ç—å—Å—è –ø–æ —Ç–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏–∏. –í—Å–µ–≥–æ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —Ç—Ä–∏ –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –º–∞—à–∏–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è. –° –æ–¥–Ω–æ–π –º—ã —É–∂–µ —Å—Ç–∞–ª–∫–∏–≤–∞–ª–∏—Å—å &lt;a href="http://proiot.ru/blog/posts/2021/03/28/neiroseti-dlia-mikrokontrollerov-pertseptron/"&gt;—Ä–∞–Ω–µ–µ&lt;/a&gt;, –∫–æ–≥–¥–∞ –æ–±—É—á–∞–ª–∏ –ø–µ—Ä—Ü–µ–ø—Ç—Ä–æ–Ω –≤—ã–ø–æ–ª–Ω—è—Ç—å –æ–ø–µ—Ä–∞—Ü–∏—é XOR:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Supervised learning&lt;/strong&gt; (–æ–±—É—á–µ–Ω–∏–µ —Å —É—á–∏—Ç–µ–ª–µ–º): –ú–∞—à–∏–Ω–∞ —É—á–∏—Ç—Å—è –ø–æ –æ–±—É—á–∞—é—â–µ–π –≤—ã–±–æ—Ä–∫–µ, –≤ –∫–æ—Ç–æ—Ä–æ–π –µ—Å—Ç—å –≤—Ö–æ–¥–Ω—ã–µ –∏ –≤—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ. –≠—Ç–æ –Ω–∞–∏–±–æ–ª–µ–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã–π –∏ –∏–∑—É—á–µ–Ω–Ω—ã–π —Ç–∏–ø –º–∞—à–∏–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è. –ù–∞–ø—Ä–∏–º–µ—Ä –∑–∞–¥–∞—á–∏ &lt;a href="http://proiot.ru/blog/posts/2021/03/28/neiroseti-dlia-mikrokontrollerov-pertseptron/"&gt;—Ä–µ–≥—Ä–µ—Å—Å–∏–∏&lt;/a&gt; / –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏ –∫–æ—Ç–∏–∫–æ–≤ –∏ —Å–æ–±–∞—á–µ–∫ –≤—Ö–æ–¥—è—Ç –≤ –¥–∞–Ω–Ω—É—é –∫–∞—Ç–µ–≥–æ—Ä–∏—é&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Unsupervised learning&lt;/strong&gt; (–æ–±—É—á–µ–Ω–∏–µ –±–µ–∑ —É—á–∏—Ç–µ–ª—è): –ï—Å—Ç—å –Ω–∞–±–æ—Ä –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö, –Ω–æ –Ω–µ—Ç –≤—ã—Ö–æ–¥–Ω—ã—Ö, —Ç.–µ. —Å—Ä–µ–¥–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–µ—Ç ¬´–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ¬ª –æ—Ç–≤–µ—Ç–∞, –º–∞—à–∏–Ω–∞ –¥–æ–ª–∂–Ω–∞ —Å–∞–º–∞ –Ω–∞–π—Ç–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –º–µ–∂–¥—É –æ–±—ä–µ–∫—Ç–∞–º–∏ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –æ–±—É—á–µ–Ω–∏—è. –ù–∞–ø—Ä–∏–º–µ—Ä –∑–∞–¥–∞—á–∞ –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏–∏ –∏–ª–∏ –∞–≤—Ç–æ—ç–Ω–∫–æ–¥–µ—Ä—ã –¥–ª—è –ø–æ–¥–∞–≤–ª–µ–Ω–∏—è —à—É–º–æ–≤ / —Å–∂–∞—Ç–∏—è –¥–∞–Ω–Ω—ã—Ö —Å –ø–æ—Ç–µ—Ä—è–º–∏&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Reinforcement learning&lt;/strong&gt; (–æ–±—É—á–µ–Ω–∏–µ —Å –ø–æ–¥–∫—Ä–µ–ø–ª–µ–Ω–∏–µ–º): –ú–∞—à–∏–Ω–∞ —É—á–∏—Ç—Å—è, –Ω–µ –∏–º–µ—è –ø–æ–ª–Ω—ã—Ö —Å–≤–µ–¥–µ–Ω–∏–π –æ —Å–∏—Å—Ç–µ–º–µ, –Ω–æ –∏–º–µ—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –Ω–∞–±–ª—é–¥–∞—Ç—å –∫–∞–∫–∏–µ-—Ç–æ –ø—Ä–∏–∑–Ω–∞–∫–∏ –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—å –∫–∞–∫–∏–µ-–ª–∏–±–æ –¥–µ–π—Å—Ç–≤–∏—è –≤ –Ω–µ–π. –î–µ–π—Å—Ç–≤–∏—è –ø–µ—Ä–µ–≤–æ–¥—è—Ç —Å–∏—Å—Ç–µ–º—É –≤ –Ω–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ –º–æ–¥–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç –æ—Ç —Å–∏—Å—Ç–µ–º—ã –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–µ / —à—Ç—Ä–∞—Ñ. –û–±—É—á–µ–Ω–∏–µ —Å –ø–æ–¥–∫—Ä–µ–ø–ª–µ–Ω–∏–µ–º –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ç–∞–º, –≥–¥–µ –∑–∞–¥–∞—á–µ–π —Å—Ç–æ–∏—Ç –Ω–µ –∞–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö, –∞ –≤—ã–∂–∏–≤–∞–Ω–∏–µ –≤ —Ä–µ–∞–ª—å–Ω–æ–π —Å—Ä–µ–¥–µ –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏—è (–∫—É–º—É–ª—è—Ç–∏–≤–Ω–∞—è –Ω–∞–≥—Ä–∞–¥–∞ ‚Äì —Å—É–º–º–∞ –Ω–∞–≥—Ä–∞–¥ –∑–∞ –∫–∞–∂–¥–æ–µ –ø—Ä–∏–Ω—è—Ç–æ–µ —Ä–µ—à–µ–Ω–∏–µ)&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2022/09/01/obuchenie-s-podkrepleniem-dlia-mikrokontrollerov/RL_Environment.png" style="width:55%; margin: 0 auto; display:block;"&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;–ê–≥–µ–Ω—Ç–æ–º&lt;/strong&gt; –º—ã –±—É–¥–µ–º –Ω–∞–∑—ã–≤–∞—Ç—å –Ω–∞—à –∞–ª–≥–æ—Ä–∏—Ç–º, –∫–æ—Ç–æ—Ä—ã–π —É–º–µ–µ—Ç –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å—Ä–µ–¥—ã –∏ —Å–æ–≤–µ—Ä—à–∞—Ç—å –≤ –Ω–µ–π –∫–∞–∫–∏–µ-—Ç–æ –¥–µ–π—Å—Ç–≤–∏—è&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;–°—Ä–µ–¥–∞&lt;/strong&gt; ‚Äì –º–∏—Ä –≤ –∫–æ—Ç–æ—Ä–æ–º —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –Ω–∞—à –ê–≥–µ–Ω—Ç –∏ —Å–≤–æ–∏–º–∏ –¥–µ–π—Å—Ç–≤–∏—è–º–∏ –º–æ–∂–µ—Ç –º–µ–Ω—è—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;–ù–∞–≥—Ä–∞–¥–∞&lt;/strong&gt; ‚Äì –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å –æ—Ç –°—Ä–µ–¥—ã –∫ –ê–≥–µ–Ω—Ç—É –∫–∞–∫ –æ—Ç–≤–µ—Ç –Ω–∞ –µ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;–í –∫–∞–∂–¥—ã–π –º–æ–º–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏ &lt;code&gt;t&lt;/code&gt; –Ω–∞—à –∞–≥–µ–Ω—Ç –Ω–∞–±–ª—é–¥–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å—Ä–µ–¥—ã ‚Äì &lt;code&gt;S(t)&lt;/code&gt;, –≤—ã–ø–æ–ª–Ω—è–µ—Ç –¥–µ–π—Å—Ç–≤–∏–µ ‚Äì &lt;code&gt;a(t)&lt;/code&gt;, –∑–∞ —á—Ç–æ –ø–æ–ª—É—á–∞–µ—Ç –æ—Ç —Å—Ä–µ–¥—ã –Ω–∞–≥—Ä–∞–¥—É ‚Äì &lt;code&gt;r(t)&lt;/code&gt;, –ø–æ–ª–µ —á–µ–≥–æ —Å—Ä–µ–¥–∞ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ &lt;code&gt;S(t+1)&lt;/code&gt;. –ó–∞—Ç–µ–º –∞–≥–µ–Ω—Ç –æ–ø—è—Ç—å –≤—ã–ø–æ–ª–Ω—è–µ—Ç –¥–µ–π—Å—Ç–≤–∏–µ ‚Äì &lt;code&gt;a(t+1)&lt;/code&gt;, –∑–∞ —á—Ç–æ –ø–æ–ª—É—á–∞–µ—Ç –æ—Ç —Å—Ä–µ–¥—ã –Ω–∞–≥—Ä–∞–¥—É ‚Äì &lt;code&gt;r(t+1)&lt;/code&gt; –∏ —Ç–∞–∫–∏—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π t —É –Ω–∞—Å –º–æ–∂–µ—Ç –±—ã—Ç—å –º–Ω–æ–∂–µ—Å—Ç–≤–æ &lt;code&gt;n&lt;/code&gt; –¥–æ —Ç–µ—Ö –ø–æ—Ä –ø–æ–∫–∞ —ç–ø–∏–∑–æ–¥ (–∏–≥—Ä–∞) –Ω–µ –∑–∞–∫–æ–Ω—á–∏—Ç—Å—è. –¢–∞–∫–∂–µ –¥–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã –¥–∞–ª–µ–µ –±—É–¥–µ–º —Å—á–∏—Ç–∞—Ç—å —Å–∏–Ω–æ–Ω–∏–º–∞–º–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ, —Ö–æ—Ç—è —Ñ–æ—Ä–º–∞–ª—å–Ω–æ —ç—Ç–æ —Ä–∞–∑–Ω—ã–µ –≤–µ—â–∏ —Ç–∞–∫ –∫–∞–∫ –∞–≥–µ–Ω—Ç –º–æ–∂–µ—Ç –Ω–∞–±–ª—é–¥–∞—Ç—å –Ω–µ –≤—Å–µ –æ—Ç—Å—Ç–æ—è–Ω–∏–µ —Å—Ä–µ–¥—ã –∞ —Ç–æ–ª—å–∫–æ –µ–µ —á–∞—Å—Ç—å.&lt;/p&gt;
&lt;p&gt;–í –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ —Å –∏–≥—Ä–æ–π ¬´–∑–º–µ–π–∫–∞¬ª –Ω–∞–≥—Ä–∞–¥–∞ &lt;code&gt;+1&lt;/code&gt; –µ—Å–ª–∏ –∑–º–µ–π–∫–∞ —Å–∫—É—à–∞–ª–∞ —è–±–ª–æ–∫–æ, &lt;code&gt;-1&lt;/code&gt; –µ—Å–ª–∏ –∏–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞. –í –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Å–ª—É—á–∞—è—Ö –Ω–∞–≥—Ä–∞–¥–∞ &lt;code&gt;0&lt;/code&gt;.&lt;/p&gt;
&lt;h2&gt;REINFORCE&lt;/h2&gt;
&lt;p&gt;–ù–∞—á–Ω–µ–º —Å —Å–∞–º–æ–≥–æ –ø—Ä–æ—Å—Ç–æ–≥–æ –∞–ª–≥–æ—Ä–∏—Ç–º–∞ –æ–±—É—á–µ–Ω–∏—è —Å –ø–æ–¥–∫—Ä–µ–ø–ª–µ–Ω–∏–µ–º ‚Äì &lt;code&gt;Reinforce&lt;/code&gt;, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç –∫ —Å–µ–º–µ–π—Å—Ç–≤—É &lt;code&gt;Policy Gradient&lt;/code&gt; (–≥—Ä–∞–¥–∏–µ–Ω—Ç –ø–æ–ª–∏—Ç–∏–∫–∏). –ó–¥–µ—Å—å –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –Ω–µ–π—Ä–æ—Å–µ—Ç–∏, –ø–æ—ç—Ç–æ–º—É –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è –¥–∞–Ω–Ω–æ–≥–æ –∞–ª–≥–æ—Ä–∏—Ç–º–∞ –Ω—É–∂–Ω–æ —É–∂–µ –∏–º–µ—Ç—å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —á—Ç–æ —ç—Ç–æ –∏ –∫–∞–∫ –∏—Ö –æ–±—É—á–∞—Ç—å.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2022/09/01/obuchenie-s-podkrepleniem-dlia-mikrokontrollerov/R_Snake.html"&gt;–Ω–æ—É—Ç–±—É–∫&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2022/09/01/obuchenie-s-podkrepleniem-dlia-mikrokontrollerov/snake_reinfirce.zip"&gt;–∏—Å—Ö–æ–¥–Ω–∏–∫–∏&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2022/09/01/obuchenie-s-podkrepleniem-dlia-mikrokontrollerov/ui_reinforce.gif" style="width:55%; margin: 0 auto; display:block; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–ê–ª–≥–æ—Ä–∏—Ç–º &lt;code&gt;Reinforce&lt;/code&gt; –±—ã–ª –ø—Ä–µ–¥–ª–æ–∂–µ–Ω –†–æ–Ω–∞–ª—å–¥–æ–º –î–∂. –í–∏–ª—å—è–º—Å–æ–º –≤ 1992 –≥–æ–¥—É. –°–ø–æ—Å–æ–±–µ–Ω –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∫–∞–∫ –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ —Å –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–π, —Ç–∞–∫ –∏ –¥–∏—Å–∫—Ä–µ—Ç–Ω–æ–µ. –ê–ª–≥–æ—Ä–∏—Ç–º —Å—Ç—Ä–æ–∏—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—é, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–ª—É—á–∞–µ—Ç &lt;strong&gt;–≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ –¥–µ–π—Å—Ç–≤–∏–π&lt;/strong&gt; –ø–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è–º —Å—Ä–µ–¥—ã. –ê–≥–µ–Ω—Ç—ã –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —ç—Ç—É —Å—Ç—Ä–∞—Ç–µ–≥–∏—é, —á—Ç–æ–±—ã –¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å –≤ —Å—Ä–µ–¥–µ. –û—Å–Ω–æ–≤–Ω–æ–π —Å–º—ã—Å–ª –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ç–æ–º, —á—Ç–æ –≤–æ –≤—Ä–µ–º—è –æ–±—É—á–µ–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏–≤–æ–¥—è—Ç –∫ —Ö–æ—Ä–æ—à–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º, –¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å –±–æ–ª—å—à—É—é –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å ‚Äì –æ–Ω–∏ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ –ø–æ–¥–∫—Ä–µ–ø–ª—è—é—Ç—Å—è. –í –ø—Ä–æ—Ç–∏–≤–æ–≤–µ—Å —ç—Ç–æ–º—É –¥–µ–π—Å—Ç–≤–∏—è, –ø—Ä–∏–≤–æ–¥—è—â–∏–µ –∫ –ø–ª–æ—Ö–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º, –¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å –º–µ–Ω—å—à—É—é –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å. –ï—Å–ª–∏ –æ–±—É—á–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ, —Ç–æ –∑–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∏—Ç–µ—Ä–∞—Ü–∏–π —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–µ–π –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–µ–π –¥–µ–π—Å—Ç–≤–∏–π —Å—Ç–∞–Ω–µ—Ç —Ç–∞–∫–∏–º, –∫–æ—Ç–æ—Ä–æ–µ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –ø–æ–≤—ã—à–µ–Ω–∏—é –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –≤ —Å—Ä–µ–¥–µ.&lt;/p&gt;
&lt;p&gt;–û–ø—Ç–∏–º–∞–ª—å–Ω–∞ —Ç–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è, –∫–æ—Ç–æ—Ä–∞—è –º–∞–∫—Å–∏–º–∏–∑–∏—Ä—É–µ—Ç —Å—É–º–º–∞—Ä–Ω–æ–µ –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–µ. –û—Å–Ω–æ–≤–Ω–æ–π —Å–º—ã—Å–ª –∞–ª–≥–æ—Ä–∏—Ç–º–∞ ‚Äì –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Ö–æ—Ä–æ—à—É—é —Å—Ç—Ä–∞—Ç–µ–≥–∏—é, –∞ —ç—Ç–æ –ø–æ–¥—Ä–∞–∑—É–º–µ–≤–∞–µ—Ç –∞–ø–ø—Ä–æ–∫—Å–∏–º–∞—Ü–∏—é —Ñ—É–Ω–∫—Ü–∏–∏. –ù–µ–π—Ä–æ–Ω–Ω—ã–µ —Å–µ—Ç–∏ ‚Äì —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π –∏ –≥–∏–±–∫–∏–π –º–µ—Ç–æ–¥ –∞–ø–ø—Ä–æ–∫—Å–∏–º–∞—Ü–∏–∏ —Ñ—É–Ω–∫—Ü–∏–π, —Ç–∞–∫ —á—Ç–æ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∞ –∫–∞–∫ –≥–ª—É–±–æ–∫–∞—è –Ω–µ–π—Ä–æ–Ω–Ω–∞—è —Å–µ—Ç—å.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2022/09/01/obuchenie-s-podkrepleniem-dlia-mikrokontrollerov/reinforce_nn.png" style="width:75%; margin: 0 auto; display:block;"&gt;&lt;/p&gt;
&lt;p&gt;–ù–∞ –≤—Ö–æ–¥ –Ω–µ–π—Ä–æ–Ω–Ω–æ–π —Å–µ—Ç–∏ –±—É–¥–µ–º –ø–æ–¥–∞–≤–∞—Ç—å –Ω–∞–±–ª—é–¥–µ–Ω–∏—è &lt;code&gt;S(t)&lt;/code&gt;, –∞ –≤—ã—Ö–æ–¥ –Ω–µ–π—Ä–æ—Å–µ—Ç–∏ —Å–∫–æ–Ω—Å—Ç—Ä—É–∏—Ä—É–µ–º —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —á—Ç–æ–±—ã –≤ –≤—ã—Ö–æ–¥–Ω—ã–º —Å–ª–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—ã—Ö–æ–¥–æ–≤ –±—ã–ª–æ —Ä–∞–≤–Ω—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –¥–µ–π—Å—Ç–≤–∏–π –≤–æ–∑–º–æ–∂–Ω—ã—Ö –¥–ª—è –∞–≥–µ–Ω—Ç–∞ –≤ –Ω–∞—à–µ–π —Å—Ä–µ–¥–µ. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –ø—Ä–æ–ø—É—Å—Ç–∏–≤ —á–µ—Ä–µ–∑ —Å–ª–æ–∏ –Ω–µ–π—Ä–æ—Å–µ—Ç–∏ –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ &lt;code&gt;S(t)&lt;/code&gt; –Ω–∞ –≤—ã—Ö–æ–¥–µ –º—ã –ø–æ–ª—É—á–∏–º –Ω–µ–∫–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥–ª—è –¥–µ–π—Å—Ç–≤–∏–π –∞–≥–µ–Ω—Ç–∞ ‚Äì &lt;strong&gt;Policy Function&lt;/strong&gt;. –û–Ω–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞–º –Ω–∞—Å–∫–æ–ª—å–∫–æ –¥–µ–π—Å—Ç–≤–∏–µ &lt;code&gt;a(t)&lt;/code&gt; –ø—Ä–∏ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ / –Ω–∞–±–ª—é–¥–µ–Ω–∏–∏ &lt;code&gt;S(t)&lt;/code&gt; –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ. –ï—Å–ª–∏ –ø—Ä–æ–≥–Ω–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–π —Å–ª–æ–π –Ω–µ–π—Ä–æ—Å–µ—Ç–∏ —á–µ—Ä–µ–∑ –∞–∫—Ç–∏–≤–∞—Ü–∏—è &lt;code&gt;Softmax&lt;/code&gt; –∞–∫—Ç–∏–≤–∞—Ü–∏—é, —Ç–æ –ø–æ–ª—É—á–∏—Ç—Å—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ &lt;code&gt;p(a|s)&lt;/code&gt; ‚Äì —Ñ—É–Ω–∫—Ü–∏—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ—Å—Ç–∏ –¥–µ–π—Å—Ç–≤–∏—è &lt;code&gt;a(t)&lt;/code&gt; –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å—Ä–µ–¥—ã.&lt;/p&gt;
&lt;p&gt;–ê–ª–≥–æ—Ä–∏—Ç–º &lt;code&gt;Reinforce&lt;/code&gt; –≤ —Å–æ—á–µ—Ç–∞–Ω–∏–∏ —Å –Ω–µ–π—Ä–æ–Ω–Ω—ã–º–∏ —Å–µ—Ç—è–º–∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å &lt;code&gt;Policy Function&lt;/code&gt; —á–µ—Ä–µ–∑ –∞–ª–≥–æ—Ä–∏—Ç–º –æ–±—Ä–∞—Ç–Ω–æ–≥–æ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –æ—à–∏–±–∫–∏, –æ–±—É—á–∞—è –Ω–∞—à—É –Ω–µ–π—Ä–æ—Å–µ—Ç—å –∏—Ç–µ—Ä–∞—Ç–∏–≤–Ω–æ. –í—Å–µ –æ—á–µ–Ω—å –ø–æ—Ö–æ–∂–µ –Ω–∞ –æ–±—ã—á–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ —Å —É—á–∏—Ç–µ–ª–µ–º. –ù—É–∂–µ–Ω –Ω–∞–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö, –Ω–µ–π—Ä–æ—Å–µ—Ç—å, —Ñ—É–Ω–∫—Ü–∏—è –ø–æ—Ç–µ—Ä—å (Loss) –∏ –º–µ—Ç–æ–¥ –≥—Ä–∞–¥–∏–µ–Ω—Ç–Ω–æ–≥–æ —Å–ø—É—Å–∫–∞ –¥–ª—è –æ–±—É—á–µ–Ω–∏—è.&lt;/p&gt;
&lt;h3&gt;Loss&lt;/h3&gt;
&lt;p&gt;–ö–∞–∫ –æ–±—É—á–∞—é—Ç –Ω–µ–π—Ä–æ—Å–µ—Ç–∏ –æ—Ç–ª–∏—á–∞—Ç—å –∫–æ—à–µ—á–µ–∫ –æ—Ç —Å–æ–±–∞—á–µ–∫? –ü–æ—Å–ª–µ–¥–Ω–∏–π —Å–ª–æ–π –Ω–µ–π—Ä–æ—Å–µ—Ç–∏ –∏–º–µ–µ—Ç –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ &lt;code&gt;SoftMax&lt;/code&gt;, –¥–ª—è –æ–±—É—á–µ–Ω–∏—è —Å–µ—Ç–∏ –ø—Ä–∏–º–µ–Ω—è—é—Ç &lt;code&gt;Categorical Cross Entropy Loss&lt;/code&gt;:&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2022/09/01/obuchenie-s-podkrepleniem-dlia-mikrokontrollerov/reinforce_cross_enropy_loss.png" style="width:55%; margin: 0 auto; display:block; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;–ù–∞ –∫–∞—Ä—Ç–∏–Ω–∫–µ: y —Å–ª–µ–≤–∞ –∏—Å—Ç–∏–Ω–Ω—ã–µ –º–µ—Ç–∫–∏, y —Å–ø—Ä–∞–≤–∞ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–Ω—ã–µ –º–µ—Ç–∫–∏&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;–û–¥–Ω–∞–∫–æ –≤ —Å–ª—É—á–∞–µ –æ–±—É—á–µ–Ω–∏—è —Å –ø–æ–¥–∫—Ä–µ–ø–ª–µ–Ω–∏–µ–º —É –Ω–∞—Å –Ω–µ—Ç –∏—Å—Ç–∏–Ω–Ω—ã—Ö –º–µ—Ç–æ–∫ –¥–ª—è –¥–µ–π—Å—Ç–≤–∏–π –∞–≥–µ–Ω—Ç–∞ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏—è—Ö &lt;code&gt;S(0..n)&lt;/code&gt;, –∫–∞–∫ –∂–µ –Ω–∞–º –æ–±—É—á–∞—Ç—å –Ω–µ–π—Ä–æ—Å–µ—Ç—å –≤ —ç—Ç–æ–º —Å–ª—É—á–∞–µ? –ú–æ–∂–µ–º –ª–∏ –º—ã –≤–º–µ—Å—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö (–∏—Å—Ç–∏–Ω–Ω—ã—Ö) –º–µ—Ç–æ–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–∞–≥—Ä–∞–¥—É, –∫–æ—Ç–æ—Ä—É—é –∞–≥–µ–Ω—Ç –ø–æ–ª—É—á–∏–ª –æ—Ç —Å—Ä–µ–¥—ã –≤—ã–ø–æ–ª–Ω–∏–≤ –¥–µ–π—Å—Ç–≤–∏–µ –∫–æ—Ç–æ—Ä–æ–µ –µ–º—É –ø—Ä–µ–¥—Å–∫–∞–∑–∞–ª–∞ –Ω–µ–π—Ä–æ—Å–µ—Ç—å? –§—É–Ω–∫—Ü–∏—é –ø–æ—Ç–µ—Ä—å, –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–Ω—É—é –ø–æ–¥ –æ–±—É—á–µ–Ω–∏–µ —Å –ø–æ–¥–∫—Ä–µ–ø–ª–µ–Ω–∏–µ–º, –º–æ–∂–Ω–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å —Ç–∞–∫:&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2022/09/01/obuchenie-s-podkrepleniem-dlia-mikrokontrollerov/reinforce_loss.png" style="width:55%; margin: 0 auto; display:block; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–ò–º–µ–µ–º –ø—Ä–∞–≤–æ —Ç–∞–∫ —Å–¥–µ–ª–∞—Ç—å –ø–æ—Ç–æ–º—É, —á—Ç–æ &lt;code&gt;yj&lt;/code&gt; –¥–ª—è &lt;code&gt;Categorical Cross Entropy Loss&lt;/code&gt; ‚Äì —ç—Ç–æ –∏—Å—Ç–∏–Ω–Ω—ã–µ –º–µ—Ç–∫–∏ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ –∏ –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞ –æ–Ω–∏ —Ä–∞–≤–Ω—ã –µ–¥–∏–Ω–∏—Ü–µ, –∞ &lt;code&gt;rj&lt;/code&gt; –¥–ª—è &lt;code&gt;Policy Function Loss&lt;/code&gt; ‚Äì –Ω–∞–≥—Ä–∞–¥–∞ –∫–æ—Ç–æ—Ä—É—é —Å—Ä–µ–¥–∞ –Ω–∞—á–∏—Å–ª–∏–ª–∞ –∞–≥–µ–Ω—Ç—É –∑–∞ –¥–µ–π—Å—Ç–≤–∏–µ –∫–æ—Ç–æ—Ä–æ–µ –æ–Ω —Å–æ–≤–µ—Ä—à–∏–ª. –¢–æ –µ—Å—Ç—å &lt;code&gt;rj&lt;/code&gt; —Å–ª—É–∂–∏—Ç –∫–∞–∫ –±—ã –≤–µ—Å–æ–º –¥–ª—è –≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–≤ –ø—Ä–∏ –æ–±—Ä–∞—Ç–Ω–æ–º —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–∏ –æ—à–∏–±–∫–∏ –∫–æ–≥–¥–∞ –º—ã –æ–±—É—á–∞–µ–º –Ω–µ–π—Ä–æ—Å–µ—Ç—å. –ù–∞–≥—Ä–∞–¥—ã —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è –æ–±—É—á–∞—é—â–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏. –ï—Å–ª–∏ –ø–æ–ª—É—á–µ–Ω–∞ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–∞—è –Ω–∞–≥—Ä–∞–¥–∞, –∏–º–µ–µ—Ç —Å–º—ã—Å–ª —Å—á–∏—Ç–∞—Ç—å –≤—Å–µ –ø—Ä–µ–¥–ø—Ä–∏–Ω—è—Ç—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –±–æ–ª–µ–µ-–º–µ–Ω–µ–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ ‚Äì –∞ –∑–Ω–∞—á–∏—Ç, –º–æ–∂–Ω–æ –ø–æ—Å—á–∏—Ç–∞—Ç—å –≥—Ä–∞–¥–∏–µ–Ω—Ç—ã —Ç–æ—á–Ω–æ —Ç–∞–∫–∏–º –∂–µ –º–µ—Ç–æ–¥–æ–º, –∫–∞–∫–∏–º –º—ã —Å—á–∏—Ç–∞–ª–∏ –±—ã –∏—Ö –≤ –æ–±—É—á–µ–Ω–∏–∏ —Å —É—á–∏—Ç–µ–ª–µ–º. –¢–æ –∂–µ —Å–∞–º–æ–µ –≤–µ—Ä–Ω–æ –≤ —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ –ø–æ–ª—É—á–µ–Ω–∞ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–∞—è –Ω–∞–≥—Ä–∞–¥–∞ ‚Äì —Ç–æ–ª—å–∫–æ –≤–º–µ—Å—Ç–æ —É–≤–µ–ª–∏—á–µ–Ω–∏—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ —Å–æ–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π –≤ –±—É–¥—É—â–µ–º, –µ–µ —Å–ª–µ–¥—É–µ—Ç —É–º–µ–Ω—å—à–∞—Ç—å. –ì—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–π —Å–ø—É—Å–∫ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≥—Ä–∞–¥–∏–µ–Ω—Ç–æ–≤ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —á—Ç–æ–±—ã –¥–µ–π—Å—Ç–≤–∏—è, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—â–∏–µ –≤—ã—Å–æ–∫—É—é –Ω–∞–≥—Ä–∞–¥—É –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏, –∏–º–µ–ª–∏ –≤—ã—Å–æ–∫—É—é –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å, –∞ –¥–µ–π—Å—Ç–≤–∏—è —Å –Ω–∏–∑–∫–æ–π –Ω–∞–≥—Ä–∞–¥–æ–π ‚Äì –Ω–∏–∑–∫—É—é.&lt;/p&gt;
&lt;h3&gt;Rollout&lt;/h3&gt;
&lt;p&gt;–°–æ–∑–¥–∞–µ–º –∑–º–µ–π–∫—É &lt;code&gt;env = SnakeGame()&lt;/code&gt;, –ø—Ä–æ–≥–æ–Ω—è–µ–º —ç–ø–∏–∑–æ–¥—ã, —Å–æ–±–∏—Ä–µ–º –¥–∞—Ç–∞—Å–µ—Ç. –ü—Ä–æ–≥–æ–Ω –æ–¥–Ω–æ–≥–æ —ç–ø–∏–∑–æ–¥–∞ –≤ –æ–±—É—á–µ–Ω–∏–∏ —Å –ø–æ–¥–∫—Ä–µ–ø–ª–µ–Ω–∏–µ–º —á–∞—Å—Ç–æ –Ω–∞–∑—ã–≤–∞—é—Ç &lt;code&gt;Rollout&lt;/code&gt;. –î–∞—Ç–∞—Å–µ—Ç —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –Ω–∞–±–ª—é–¥–µ–Ω–∏–π, –¥–µ–π—Å—Ç–≤–∏–π –∏ –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö –Ω–∞–≥—Ä–∞–¥.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;play_game&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
  &lt;span class="n"&gt;env&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;reset&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
  &lt;span class="n"&gt;game_data&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[]&lt;/span&gt;
  &lt;span class="n"&gt;done&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;False&lt;/span&gt;
  &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="n"&gt;done&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;features&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;extract_features&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="n"&gt;action&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;model&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tf&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;expand_dims&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;features&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;training&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="bp"&gt;False&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;action&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;tf&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;squeeze&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tf&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;random&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;categorical&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;action&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
    &lt;span class="n"&gt;_&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;reward&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;done&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;info&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;env&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;step&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;action&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;game_data&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="n"&gt;features&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;action&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mf"&gt;1e-2&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;reward&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="n"&gt;reward&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
  &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;game_data&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;info&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;score&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–î–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã –∏ —Å–∫–æ—Ä–æ—Å—Ç–∏ –æ–±—É—á–µ–Ω–∏—è –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ &lt;code&gt;features&lt;/code&gt; —Å–æ—Å—Ç–æ–∏—Ç —Ç–æ–ª—å–∫–æ –∏–∑ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –≥–æ–ª–æ–≤—ã –∑–º–µ–π–∫–∏ –∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –µ–¥—ã, —Ç.–µ. –≥–µ–æ–º–µ—Ç—Ä–∏—é —Ç–µ–ª–∞ –∑–º–µ–π–∫–∏ –ø–æ–∫–∞ –Ω–µ —É—á–∏—Ç—ã–≤–∞–µ–º. –¢–∞–∫–∂–µ –≤ –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ –ø–æ–ø–∞–¥–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏—è—Ö –ø–æ –æ—Ç–Ω–æ—à–µ–Ω–∏–∏ –∫ –≥–æ–ª–æ–≤–µ –∑–º–µ–π–∫–∏ ‚Äì –µ—Å—Ç—å –ª–∏ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–µ —Å–ª–µ–≤–∞, —Å–ø—Ä–∞–≤–∞, —Å–≤–µ—Ä—Ö—É –∏–ª–∏ —Å–Ω–∏–∑—É.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;extract_features&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;game&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;env&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
  &lt;span class="n"&gt;obsticle&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;lambda&lt;/span&gt; &lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;copy&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;deepcopy&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;game&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;step&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;done&lt;/span&gt;
  &lt;span class="n"&gt;snake&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;food&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;game&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get_state&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
  &lt;span class="n"&gt;head&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="n"&gt;food&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;w&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;game&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;board_height&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;w&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;snake&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;head&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;food&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt;
  &lt;span class="n"&gt;obs&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;sum&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;v&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;enumerate&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;obsticle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;k&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;game&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ACTION&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
  &lt;span class="nb"&gt;max&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;game&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;board_height&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;game&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;board_width&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
  &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;obs&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="mb"&gt;0b1111&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;head&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="nb"&gt;max&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;food&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="nb"&gt;max&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–¢–∞–∫–∏–µ –∂–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –Ω–∞–∫–ª–∞–¥—ã–≤–∞—é—Ç—Å—è –∏ –Ω–∞ –ø—Ä–∏–∑–Ω–∞–∫–∏ &lt;code&gt;Q-learning&lt;/code&gt;, –∫–æ—Ç–æ—Ä–æ–µ –±—É–¥–µ—Ç –æ–ø–∏—Å–∞–Ω–æ –Ω–∏–∂–µ. –≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç —Ä–∞–≤–Ω–æ—Ü–µ–Ω–Ω–æ —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ –æ–±–æ–∏—Ö –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤ &lt;code&gt;Reinforce&lt;/code&gt; –∏ &lt;code&gt;Q-learning&lt;/code&gt; –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ –∑–º–µ–π–∫–∏.&lt;/p&gt;
&lt;h3&gt;Exploration vs Exploitation&lt;/h3&gt;
&lt;p&gt;–û—á–µ–≤–∏–¥–Ω–æ —á—Ç–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π —Å—Ä–µ–¥—ã –Ω–∞–¥–æ –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å (—Ä–∞–∑–≤–µ–¥–∞—Ç—å), —á—Ç–æ–±—ã –∏–º–µ—Ç—å –ø–æ–Ω—è—Ç–∏–µ –æ —Ç–æ–º, –∫–∞–∫–æ–π –≤–∞—Ä–∏–∞–Ω—Ç —Ä–µ–∞–∫—Ü–∏–∏ –Ω–∞ —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–∞–º—ã–π –ª—É—á—à–∏–π. –ï—Å–ª–∏ –º—ã —Å–Ω–∞—á–∞–ª–∞ –æ–±–Ω–∞—Ä—É–∂–∏–ª–∏ —ç—Ç–æ—Ç —Å–∞–º—ã–π –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π –≤–∞—Ä–∏–∞–Ω—Ç, –∞ –ø–æ—Ç–æ–º –≤—Å–µ –≤—Ä–µ–º—è –µ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º ‚Äì –º—ã –º–∞–∫—Å–∏–º–∏–∑–∏—Ä—É–µ–º —Å—É–º–º–∞—Ä–Ω—É—é –Ω–∞–≥—Ä–∞–¥—É, –∫–æ—Ç–æ—Ä–∞—è –Ω–∞–º –¥–æ—Å—Ç—É–ø–Ω–∞ –∏–∑ –æ–∫—Ä—É–∂–∞—é—â–µ–π —Å—Ä–µ–¥—ã? –° –¥—Ä—É–≥–æ–π —Å—Ç–æ—Ä–æ–Ω—ã, –º—ã —Ç–∞–∫–∂–µ —Ö–æ—Ç–∏–º –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å –¥—Ä—É–≥–∏–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã ‚Äì –≤–¥—Ä—É–≥ –æ–Ω–∏ –≤ –±—É–¥—É—â–µ–º –æ–∫–∞–∂—É—Ç—Å—è –ª—É—á—à–µ, –∞ –º—ã –ø—Ä–æ—Å—Ç–æ —ç—Ç–æ–≥–æ –ø–æ–∫–∞ –Ω–µ –∑–Ω–∞–µ–º? –í –ø—Ä–æ—Ü–µ—Å—Å–µ –æ–±—É—á–µ–Ω–∏—è –Ω—É–∂–µ–Ω –∫–æ–º–ø—Ä–æ–º–∏—Å—Å –º–µ–∂–¥—É –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ–º –∏ —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏–µ–π (Exploration vs Exploitation).&lt;/p&gt;
&lt;p&gt;–ù–∞ –Ω–∞—á–∞–ª—å–Ω–æ–º —ç—Ç–∞–ø–µ –Ω–µ–π—Ä–æ—Å–µ—Ç—å –Ω–∏—á–µ–≥–æ –Ω–µ –∑–Ω–∞–µ—Ç –æ —Å—Ä–µ–¥–µ, –æ–Ω–∞ –¥–∞—ë—Ç –Ω–∞ –≤—ã—Ö–æ–¥–µ —Å–ª—É—á–∞–π–Ω—ã–µ, —Ö–æ—Ç—å –∏ –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è. –í –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ –æ–Ω–∞ –Ω–∞ –ª—é–±—ã–µ –¥–∞–Ω–Ω—ã–µ –±—É–¥–µ—Ç –≤—ã–¥–∞–≤–∞—Ç—å –ø—Ä–∏–º–µ—Ä–Ω–æ –æ–¥–∏–Ω–∞–∫–æ–≤—É—é –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –¥–ª—è –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π –∑–º–µ–π–∫–∏, —Ç.–µ. –º—ã –±—É–¥–µ–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å —Å—Ä–µ–¥—É. –ü–æ –º–µ—Ä–µ –æ–±—É—á–µ–Ω–∏—è –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –æ–¥–Ω–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è –±—É–¥–µ—Ç –ø—Ä–µ–æ–±–ª–∞–¥–∞—Ç—å –Ω–∞–¥ –¥—Ä—É–≥–∏–º–∏. –ï—Å–ª–∏ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –æ–¥–Ω–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è –¥–æ—Å—Ç–∏–≥–Ω–µ—Ç &lt;code&gt;1&lt;/code&gt;, –∑–Ω–∞—á–∏—Ç –Ω–µ–π—Ä–æ—Å–µ—Ç—å –∞–±—Å–æ–ª—é—Ç–Ω–æ —É–≤–µ—Ä–µ–Ω–∞ –≤ —Å–≤–æ–µ–º –¥–µ–π—Å—Ç–≤–∏–∏ –∏ –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å —É–∂–µ –Ω–µ—á–µ–≥–æ. –ó–∞ –±–∞–ª–∞–Ω—Å –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –∏ —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏–∏ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –æ–±—É—á–µ–Ω–∏—è –Ω–µ–π—Ä–æ—Å–µ—Ç–∏ –æ—Ç–≤–µ—á–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—è &lt;code&gt;tf.random.categorical&lt;/code&gt;.&lt;/p&gt;
&lt;h3&gt;Discount&lt;/h3&gt;
&lt;p&gt;–ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–∞—è –∏–ª–∏ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–∞—è –Ω–∞–≥—Ä–∞–¥–∞ —É –∞–≥–µ–Ω—Ç–∞ –º–æ–∂–µ—Ç —Å–ª—É—á–∞–µ—Ç—Å—è –∫—Ä–∞–π–Ω–µ —Ä–µ–¥–∫–æ, –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –∂–µ –Ω–∞–≥—Ä–∞–¥–∞ –≤–Ω–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –µ–≥–æ –¥–µ–π—Å—Ç–≤–∏–π —Ä–∞–≤–Ω–∞ –Ω—É–ª—é. –ö–∞–∫ –∂–µ –æ–±—É—á–∞—Ç—å –ê–≥–µ–Ω—Ç–∞ –∫–æ–¥–∞ –æ—Å–Ω–æ–≤–Ω–æ–µ –≤—Ä–µ–º—è –æ–Ω –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç –æ—Ç–∫–ª–∏–∫–∞ –æ—Ç —Å—Ä–µ–¥—ã –Ω–∞ —Å–≤–æ–∏ –¥–µ–π—Å—Ç–≤–∏—è? –í–µ–¥—å –µ—Å–ª–∏ –Ω–∞–≥—Ä–∞–¥–∞ –æ—Ç —Å—Ä–µ–¥—ã —Ä–∞–≤–Ω–∞ –Ω—É–ª—é, —Ç–æ –∏ –≥—Ä–∞–¥–∏–µ–Ω—Ç—ã –ø—Ä–∏ –æ–±—Ä–∞—Ç–Ω–æ–º —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–∏ –æ—à–∏–±–∫–∏ —á–µ—Ä–µ–∑ –Ω–µ–π—Ä–æ—Å–µ—Ç—å –≤ —ç—Ç–æ–º —Å–ª—É—á–∞–µ —Ä–∞–≤–Ω–∞ –Ω—É–ª—é, –≤–µ—Å–∞–º –Ω–µ–π—Ä–æ—Å–µ—Ç–∏ –º–µ–Ω—è—Ç—å—Å—è –±—É–¥–µ—Ç –Ω–µ–∫—É–¥–∞, –∑–Ω–∞—á–∏—Ç –∏ –Ω–∞—à –∞–≥–µ–Ω—Ç –Ω–∏—á–µ–º—É –Ω–µ –±—É–¥–µ—Ç —É—á–∏—Ç—å—Å—è. –ö–∞–∫ –∂–µ —Ä–µ—à–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É —Å –Ω—É–ª–µ–≤–æ–π –Ω–∞–≥—Ä–∞–¥–æ–π –≤ –±–æ–ª—å—à–µ–π —á–∞—Å—Ç–∏ –¥–∞—Ç–∞—Å–µ—Ç–∞ –∫–æ—Ç–æ—Ä—ã–π —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –¥–ª—è –æ–±—É—á–µ–Ω–∏—è –∞–≥–µ–Ω—Ç–∞?&lt;/p&gt;
&lt;p&gt;–û–±—ã—á–Ω–æ –≤–≤–æ–¥–∏—Ç—Å—è –¥–∏—Å–∫–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –Ω–∞–≥—Ä–∞–¥–∞ –∑–∞ –¥–µ–π—Å—Ç–≤–∏–µ —Å —É–±—ã–≤–∞–Ω–∏–µ–º –ø–æ –º–µ—Ä–µ —É–¥–∞–ª–µ–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏—è –æ—Ç —Ñ–∏–Ω–∞–ª–∞ —ç–ø–∏–∑–æ–¥–∞. –¢–µ–º —Å–∞–º—ã–º –º—ã –¥–∞–µ–º –ê–≥–µ–Ω—Ç—É –ø–æ–Ω—è—Ç—å, —á—Ç–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—è –∫–æ—Ç–æ—Ä—ã–µ –æ–Ω –ø—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞–ª, –±–æ–ª–µ–µ –≤–∞–∂–Ω—ã –¥–ª—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç —ç–ø–∏–∑–æ–¥–∞ –∏–≥—Ä—ã, —á–µ–º —Ç–µ –¥–µ–π—Å—Ç–≤–∏—è –∫–æ—Ç–æ—Ä—ã–µ –æ–Ω –ø—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞–ª –≤–Ω–∞—á–∞–ª–µ.&lt;/p&gt;
&lt;h3&gt;Train&lt;/h3&gt;
&lt;p&gt;–°–æ–∑–¥–∞–¥–∏–º –ø—Ä–æ—Å—Ç—É—é –Ω–µ–π—Ä–æ–Ω–Ω—É—é —Å–µ—Ç—å ‚Äì –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π –º–Ω–æ–≥–æ—Å–ª–æ–π–Ω—ã–π –ø–µ—Ä—Ü–µ–ø—Ç—Ä–æ–Ω –≤–ø–æ–ª–Ω–µ –ø–æ–¥–æ–π–¥–µ—Ç. –û–±—É—á–∞—Ç—å –±—É–¥–µ–º –Ω–∞ &lt;strong&gt;Keras / Tensorflow&lt;/strong&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;x_in&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;keras&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Input&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;shape&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,))&lt;/span&gt;
&lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;keras&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;layers&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Dense&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;32&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;activation&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;relu&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;keras&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;layers&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Dense&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;32&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;activation&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;relu&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;keras&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;layers&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Dense&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;env&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ACTION&lt;/span&gt;&lt;span class="p"&gt;))(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;model&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;keras&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Model&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x_in&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;model&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;compile&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;loss&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;keras&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;losses&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;SparseCategoricalCrossentropy&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;from_logits&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="bp"&gt;True&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
              &lt;span class="n"&gt;optimizer&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;Nadam&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ –æ—Ç–ª–∏—á–∏–µ –æ—Ç –ø—Ä–∏–≤—ã—á–Ω–æ–≥–æ –Ω–∞–º –æ–±—É—á–µ–Ω–∏—è —Å —É—á–∏—Ç–µ–ª–µ–º —ç—Ç–æ –ø–∞—Ä–∞–º–µ—Ç—Ä &lt;code&gt;sample_weight&lt;/code&gt;, –≤ –∫–æ—Ç–æ—Ä—ã–π –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –¥–∏—Å–∫–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –Ω–∞–≥—Ä–∞–¥—ã.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;history&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[]&lt;/span&gt;
&lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;history&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;episodes_to_play&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
  &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;score&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;play_game&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
  &lt;span class="n"&gt;X&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Y&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;R&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;tf&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;stack&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;zip&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt;
  &lt;span class="n"&gt;history&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="n"&gt;model&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;train_on_batch&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;X&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Y&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;sample_weight&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;disc&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;R&lt;/span&gt;&lt;span class="p"&gt;)),&lt;/span&gt; &lt;span class="n"&gt;score&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–î–∏—Å–∫–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –Ω–∞–≥—Ä–∞–¥—ã –≤—ã—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –ø–æ –æ–∫–æ–Ω—á–∞–Ω–∏–∏ —ç–ø–∏–∑–æ–¥–∞ –∏ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —ç—Ç–æ–≥–æ –º–æ–∂–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å –≤–µ—Å–∞ –Ω–µ–π—Ä–æ—Å—Ç–µ—Ç–∏. –≠—Ç–æ –æ–¥–∏–Ω –∏–∑ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–æ–≤ –∞–ª–≥–æ—Ä–∏—Ç–º–∞ &lt;code&gt;Reinforce&lt;/code&gt; —Ç–∞–∫ –∫–∞–∫ —ç–ø–∏–∑–æ–¥ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—á–µ–Ω—å —Ä–∞—Å—Ç—è–Ω—É—Ç—ã–º –≤–æ –≤—Ä–µ–º–µ–Ω–∏, –∞ –≤—Ä–µ–º—è –∫–∞–∫ –∏–∑–≤–µ—Å—Ç–Ω–æ —Å—Ç–æ–∏—Ç –¥–µ–Ω–µ–≥.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;disc&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;lambda&lt;/span&gt; &lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;tf&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;scan&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;lambda&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;9&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;reverse&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="bp"&gt;True&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ó–º–µ–π–∫–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ –æ–±–ª–∞–¥–∞–µ—Ç –ø—Ä–∏–∑–Ω–∞–∫–∞–º–∏ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–∞, –Ω–æ —è–≤–Ω–æ –∏–º –Ω–µ –±–ª–µ—â–µ—Ç. –û–Ω–∞ –Ω–µ –≤—Å–µ–≥–¥–∞ –≤—ã–±–∏—Ä–∞–µ—Ç –Ω–∞–∏–±–æ–ª–µ–µ –∫–æ—Ä–æ—Ç–∫–∏–π –ø—É—Ç—å, –∏–Ω–æ–≥–¥–∞ –ø–µ—Ä–µ—Å—Ç–∞–µ—Ç –∫—É—à–∞—Ç—å. –í –æ–±—â–µ–º –º–Ω–æ–≥–æ –¥–µ–Ω–µ–≥ –Ω–∞ —Ç–∞–∫–æ–π –∑–º–µ–π–∫–µ –º—ã –Ω–µ –∑–∞—Ä–∞–±–æ—Ç–∞–µ–º, –Ω–æ –¥–ª—è –ø–æ–≥—Ä—É–∂–µ–Ω–∏—è –≤ –æ–±—É—á–µ–Ω–∏–µ —Å –ø–æ–¥–∫—Ä–µ–ø–ª–µ–Ω–∏–µ–º –º–µ—Ç–æ–¥ &lt;code&gt;Reinforce&lt;/code&gt; —Ç–æ—á–Ω–æ –≥–æ–¥–∏—Ç—Å—è, —Ç–µ–º –±–æ–ª–µ–µ —á—Ç–æ –µ—Å—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã–µ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ –¥–∞–Ω–Ω–æ–≥–æ –∞–ª–≥–æ—Ä–∏—Ç–º–∞ –∏ —Å–æ—á–µ—Ç–∞–Ω–∏—è —Å –¥—Ä—É–≥–∏–º–∏.&lt;/p&gt;
&lt;h2&gt;Q-LEARNING&lt;/h2&gt;
&lt;p&gt;–ê–ª–≥–æ—Ä–∏—Ç–º &lt;code&gt;Reinforce&lt;/code&gt;  –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ &lt;code&gt;policy-based&lt;/code&gt; –º–µ—Ç–æ–¥–∞–º –æ–±—É—á–µ–Ω–∏—è —Å –ø–æ–¥–∫—Ä–µ–ø–ª–µ–Ω–∏–µ–º. –ï—Å—Ç—å –∏ –¥—Ä—É–≥–æ–π –ø–æ–¥—Ö–æ–¥ –∫ —Ä–µ—à–µ–Ω–∏—é –∑–∞–¥–∞—á–∏, &lt;code&gt;value-based&lt;/code&gt;, –≤ –∫–æ—Ç–æ—Ä–æ–º –∞–ª–≥–æ—Ä–∏—Ç–º –∏—â–µ—Ç –Ω–µ —Å–∞–º—É —Å—Ç—Ä–∞—Ç–µ–≥–∏—é, –∞ –Ω–µ–∫–æ—Ç–æ—Ä—É—é –æ–ø—Ç–∏–º–∞–ª—å–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é –ø–æ–ª–µ–∑–Ω–æ—Å—Ç–∏ –¥–µ–π—Å—Ç–≤–∏—è &lt;code&gt;Q-function&lt;/code&gt;. –ì–æ–≤–æ—Ä—è –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–º —è–∑—ã–∫–æ–º, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –Ω–µ–∫–∞—è —Ñ—É–Ω–∫—Ü–∏—è &lt;code&gt;Q&lt;/code&gt;, –∫–æ—Ç–æ—Ä–∞—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è &lt;code&gt;s&lt;/code&gt; –∏ –¥–µ–π—Å—Ç–≤–∏—è &lt;code&gt;a&lt;/code&gt; –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫—É–º—É–ª—è—Ç–∏–≤–Ω–æ–µ –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–µ &lt;code&gt;R&lt;/code&gt; –∏ –æ–±–æ–∑–Ω–∞—á–∞–µ—Ç—Å—è &lt;code&gt;Q(s|a)&lt;/code&gt;. –ó–¥–µ—Å—å –Ω–∞–¥–æ –æ–±—Ä–∞—Ç–∏—Ç—å –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ &lt;code&gt;Q-—Ñ—É–Ω–∫—Ü–∏—è&lt;/code&gt; –Ω–µ –ø—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ–ª—É—á–µ–Ω–Ω–æ–µ –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–µ, —Ç.–µ. &lt;code&gt;R != r(t)&lt;/code&gt;. –û–Ω–∞ –ª–∏—à—å –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ–∂–∏–¥–∞–µ–º–æ–µ (–∫—É–º—É–ª—è—Ç–∏–≤–Ω–æ–µ) –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–µ –Ω–∞ –æ—Å–Ω–æ–≤–∞–Ω–∏–∏ –ø—Ä–æ—à–ª–æ–≥–æ –æ–ø—ã—Ç–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –∞–≥–µ–Ω—Ç–∞ —Å–æ —Å—Ä–µ–¥–æ–π –≤ —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ –º—ã –±—É–¥–µ–º –¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–º –æ–±—Ä–∞–∑–æ–º. –ò–∑–Ω–∞—á–∞–ª—å–Ω–æ –∞–≥–µ–Ω—Ç—É –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–∞ —ç—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è, –Ω–æ –µ—Å–ª–∏ –æ–Ω–∞ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, —Ç–æ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å–æ —Å—Ä–µ–¥–æ–π, –ø–æ–≤—Ç–æ—Ä—è—è –¥–µ–π—Å—Ç–≤–∏—è –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞–∑, –º—ã –º–æ–∂–µ–º –µ—ë –∞–ø–ø—Ä–æ–∫—Å–∏–º–∏—Ä–æ–≤–∞—Ç—å —Å –ø—Ä–∏–µ–º–ª–µ–º–æ–π –ø–æ–≥—Ä–µ—à–Ω–æ—Å—Ç—å—é.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2022/09/01/obuchenie-s-podkrepleniem-dlia-mikrokontrollerov/Q_Snake.html"&gt;–Ω–æ—É—Ç–±—É–∫&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2022/09/01/obuchenie-s-podkrepleniem-dlia-mikrokontrollerov/snake_qtable.zip"&gt;–∏—Å—Ö–æ–¥–Ω–∏–∫–∏&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2022/09/01/obuchenie-s-podkrepleniem-dlia-mikrokontrollerov/ui_q_learning.gif" style="width:55%; margin: 0 auto; display:block; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–¶–µ–ª—å –æ–±—É—á–µ–Ω–∏—è –Ω–∞—à–µ–≥–æ –∞–≥–µ–Ω—Ç–∞ ‚Äì –º–∞–∫—Å–∏–º–∏–∑–∞—Ü–∏—è —Å–æ–≤–æ–∫—É–ø–Ω–æ–π –Ω–∞–≥—Ä–∞–¥—ã. –ù–∞ —Ä–∏—Å—É–Ω–∫–µ –Ω–∏–∂–µ  –∞–≥–µ–Ω—Ç—É –ø—Ä–µ–¥—Å—Ç–æ–∏—Ç –ø–µ—Ä–µ–π—Ç–∏ –∏–∑ –∫–ª–µ—Ç–∫–∏ &lt;code&gt;Start&lt;/code&gt; –≤ –∫–ª–µ—Ç–∫—É &lt;code&gt;Finish&lt;/code&gt;. –ù–∞–≥—Ä–∞–¥—É –∞–≥–µ–Ω—Ç –ø–æ–ª—É—á–∞–µ—Ç –æ–¥–Ω–æ—Ä–∞–∑–æ–≤–æ –ø—Ä–∏ –ø–æ–ø–∞–¥–∞–Ω–∏–∏ –≤ –∫–ª–µ—Ç–∫—É &lt;code&gt;Finish&lt;/code&gt;. –í–æ –≤—Å–µ—Ö –æ—Å—Ç–∞–ª—å–Ω—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏—è—Ö –Ω–∞–≥—Ä–∞–¥–∞ –Ω—É–ª–µ–≤–∞—è.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2022/09/01/obuchenie-s-podkrepleniem-dlia-mikrokontrollerov/bellman_discount.png" style="width:55%; margin: 0 auto; display:block;"&gt;&lt;/p&gt;
&lt;p&gt;–û—á–µ–≤–∏–¥–Ω–æ, —á—Ç–æ –æ—Ä–∞–Ω–∂–µ–≤—ã–π –ø—É—Ç—å –∫–æ—Ä–æ—á–µ –∏ –±–æ–ª–µ–µ –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª–µ–Ω. –ù–æ —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è –º–∞–∫—Å–∏–º–∏–∑–∞—Ü–∏—è –Ω–∞–≥—Ä–∞–¥—ã –æ–Ω–∏ —Ä–∞–≤–Ω–æ–∑–Ω–∞—á–Ω—ã. –î–ª—è —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã –≤–≤–æ–¥–∏—Ç—Å—è —Ñ–∞–∫—Ç–æ—Ä –¥–∏—Å–∫–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è &lt;code&gt;…£&lt;/code&gt;, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç —É–º–µ–Ω—å—à–∞—Ç—å —Ü–µ–Ω–Ω–æ—Å—Ç—å –±—É–¥—É—â–∏—Ö –Ω–∞–≥—Ä–∞–¥.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2022/09/01/obuchenie-s-podkrepleniem-dlia-mikrokontrollerov/reward_cum.png" style="width:55%; margin: 0 auto; display:block;"&gt;&lt;/p&gt;
&lt;p&gt;–§–∞–∫—Ç–æ—Ä –¥–∏—Å–∫–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è &lt;code&gt;…£&lt;/code&gt; –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ –æ—Ç &lt;code&gt;0&lt;/code&gt; –¥–æ &lt;code&gt;1&lt;/code&gt;. –í —Ç–∞–∫–æ–º —Å–ª—É—á–∞–µ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ &lt;code&gt;Start&lt;/code&gt; –∫—É–º—É–ª—è—Ç–∏–≤–Ω–∞—è –Ω–∞–≥—Ä–∞–¥–∞ –¥–ª—è –¥–µ–π—Å—Ç–≤–∏—è &lt;code&gt;–≤–≤–µ—Ä—Ö&lt;/code&gt; –±—É–¥–µ—Ç –º–µ–Ω—å—à–µ —á–µ–º –¥–ª—è –¥–µ–π—Å—Ç–≤–∏—è &lt;code&gt;–≤–ø—Ä–∞–≤–æ&lt;/code&gt;. –ú—ã –ø—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞–µ–º –¥–µ–π—Å—Ç–≤–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –∏–º–µ—é—Ç –Ω–∞–∏–±–æ–ª—å—à—É—é —Ü–µ–Ω–Ω–æ—Å—Ç—å –≤ –∫–∞–∂–¥–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏. –ö–æ–≥–¥–∞ –º—ã –¥–µ–ª–∞–µ–º —ç—Ç–æ, –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º –Ω–∞—à–∏ &lt;code&gt;Q-values&lt;/code&gt; –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ–ª–∏—Ç–∏–∫–∏. –≠—Ç–æ –±—É–¥–µ—Ç &lt;strong&gt;–∂–∞–¥–Ω–∞—è –ø–æ–ª–∏—Ç–∏–∫–∞&lt;/strong&gt;, –ø–æ—Ç–æ–º—É —á—Ç–æ –º—ã –≤—Å–µ–≥–¥–∞ –ø—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞–µ–º –¥–µ–π—Å—Ç–≤–∏—è, –∫–æ—Ç–æ—Ä—ã–µ, –ø–æ –Ω–∞—à–µ–º—É –º–Ω–µ–Ω–∏—é, –ª—É—á—à–µ –≤—Å–µ–≥–æ –≤ –∫–∞–∂–¥–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏, –ø–æ—ç—Ç–æ–º—É –≥–æ–≤–æ—Ä–∏—Ç—Å—è, —á—Ç–æ –º—ã –¥–µ–π—Å—Ç–≤—É–µ–º –∂–∞–¥–Ω–æ. –í—ã–±–∏—Ä–∞—è –Ω–∞ –∫–∞–∂–¥–æ–º —à–∞–≥–µ –¥–µ–π—Å—Ç–≤–∏–µ —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–º –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–µ–º –º—ã –ø–æ–ª—É—á–∏–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é –∫—É–º—É–ª—è—Ç–∏–≤–Ω—É—é –Ω–∞–≥—Ä–∞–¥—É.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2022/09/01/obuchenie-s-podkrepleniem-dlia-mikrokontrollerov/bellman.png" style="width:55%; margin: 0 auto; display:block;"&gt;&lt;/p&gt;
&lt;p&gt;–î–∞–Ω–Ω–æ–µ —É—Ä–∞–≤–Ω–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –Ω–∞–∑—ã–≤–∞—é—Ç —É—Ä–∞–≤–Ω–µ–Ω–∏–µ–º –ë–µ–ª–ª–º–∞–Ω–∞, —É—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç —á—Ç–æ –∑–Ω–∞—á–µ–Ω–∏–µ &lt;code&gt;Q&lt;/code&gt; –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π –ø–∞—Ä—ã —Å–æ—Å—Ç–æ—è–Ω–∏–µ-–¥–µ–π—Å—Ç–≤–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –Ω–∞–≥—Ä–∞–¥–æ–π &lt;code&gt;r&lt;/code&gt;, –ø–æ–ª—É—á–µ–Ω–Ω–æ–π –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –≤ –Ω–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (–ø—É—Ç–µ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ç–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è), –¥–æ–±–∞–≤–ª–µ–Ω–Ω–æ–π –∫ –∑–Ω–∞—á–µ–Ω–∏—é &lt;code&gt;Q&lt;/code&gt; –Ω–∞–∏–ª—É—á—à–µ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è –≤ —Å–ª–µ–¥—É—é—â–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏ —Å –∫–∞–∫–∏–º-—Ç–æ –¥–∏—Å–∫–æ–Ω—Ç–æ–º.&lt;/p&gt;
&lt;p&gt;–°—É—Ç—å &lt;code&gt;Q-learning&lt;/code&gt; —Å–≤–æ–¥–∏—Ç—Å—è –∫ —Ç–æ–º—É, —Ç–æ –º—ã –º–æ–∂–µ–º –∏—Ç–µ—Ä–∞—Ç–∏–≤–Ω–æ –∞–ø–ø—Ä–æ–∫—Å–∏–º–∏—Ä–æ–≤–∞—Ç—å &lt;code&gt;Q-—Ñ—É–Ω–∫—Ü–∏—é&lt;/code&gt; –∏—Å–ø–æ–ª—å–∑—É—è —É—Ä–∞–≤–Ω–µ–Ω–∏–µ –ë–µ–ª–ª–º–∞–Ω–∞. –î—Ä—É–≥–∏–º–∏ —Å–ª–æ–≤–∞–º–∏, –º—ã —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∑–Ω–∞—á–µ–Ω–∏—è—Ö –¥–µ–π—Å—Ç–≤–∏–π –ø–æ –æ–¥–Ω–æ–º—É —à–∞–≥—É –∑–∞ —Ä–∞–∑.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2022/09/01/obuchenie-s-podkrepleniem-dlia-mikrokontrollerov/bellman_update.png" style="width:100%; margin: 0 auto; display:block;"&gt;&lt;/p&gt;
&lt;p&gt;–¢–µ–ø–µ—Ä—å, –∫–æ–≥–¥–∞ —É –Ω–∞—Å –µ—Å—Ç—å –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –æ —Ç–æ–º, –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç &lt;code&gt;Q-learning&lt;/code&gt;, –º—ã –º–æ–∂–µ–º –Ω–∞—á–∞—Ç—å –¥—É–º–∞—Ç—å –æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –≤—Å–µ–≥–æ —ç—Ç–æ–≥–æ. –ú—ã —Å–æ–∑–¥–∞–¥–∏–º —Ç–∞–±–ª–∏—Ü—É –¥–ª—è –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π –∏ –¥–µ–π—Å—Ç–≤–∏–π –¥–ª—è –∑–º–µ–π–∫–∏ &lt;code&gt;env = SnakeGame()&lt;/code&gt;. –ü—Ä–æ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É –º–æ–∂–Ω–æ –ª—é–±—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞–º –Ω—Ä–∞–≤—è—Ç—Å—è ‚Äì –æ–Ω–∏ –º–æ–≥—É—Ç –±—ã—Ç—å —Å–ª—É—á–∞–π–Ω—ã–º–∏, –æ–Ω–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –∫–∞–∫–∏–º–∏-—Ç–æ –ø–æ—Å—Ç–æ—è–Ω–Ω—ã–º–∏. –ú—ã —Å–æ–∑–¥–∞–¥–∏–º —Ç–∞–±–ª–∏—Ü—É, –∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—É—é —Å–ª—É—á–∞–π–Ω—ã–º–∏ –¥–µ–π—Å—Ç–≤–∏—è–º–∏, —Ç.–µ. –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ –≤—Å–µ—Ö —á–µ—Ç—ã—Ä–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π —Ç–∞–º –ø—Ä–∏–º–µ—Ä–Ω–æ –ø–æ—Ä–æ–≤–Ω—É, —á—Ç–æ –≤ —Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å –ø–æ–∑–≤–æ–ª–∏—Ç –∏–∑–±–µ–∂–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã –¥–∏—Å–±–∞–ª–∞–Ω—Å–∞ –∫–ª–∞—Å—Å–æ–≤ –≤ —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ –Ω–∞–º –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è —Å–∂–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É —Å –ø–æ–º–æ—â—å—é –Ω–µ–π—Ä–æ—Å–µ—Ç–∏.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;action_space_size&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;env&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ACTION&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;qtable&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;random&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;rand&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
  &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;action_space_size&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
  &lt;span class="n"&gt;env&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;board_height&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;env&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;board_width&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
  &lt;span class="n"&gt;env&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;board_height&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;env&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;board_width&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
  &lt;span class="n"&gt;action_space_size&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–°–æ—Å—Ç–æ—è–Ω–∏–µ –∑–º–µ–π–∫–∏ –≤ –∫–∞–∫–æ–π-–ª–∏–±–æ –º–æ–º–µ–Ω—Ç –±–µ—Ä–µ—Ç—Å—è —É–ø—Ä–æ—â–µ–Ω–Ω–æ–µ ‚Äì –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≥–æ–ª–æ–≤—ã, —è–±–ª–æ–∫–∞, –Ω–∞–ª–∏—á–∏–µ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π —Å–ª–µ–≤–∞, —Å–ø—Ä–∞–≤–∞, —Å–≤–µ—Ä—Ö—É, —Å–Ω–∏–∑—É. –°–æ—Å—Ç–æ—è–Ω–∏–µ —Ç–µ–ª–∞ –Ω–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;extract_features&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;game&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;env&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
  &lt;span class="n"&gt;snake&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;food&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;game&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get_state&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
  &lt;span class="n"&gt;obsticle&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;lambda&lt;/span&gt; &lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;copy&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;deepcopy&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;game&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;step&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;done&lt;/span&gt;
  &lt;span class="n"&gt;obs&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;sum&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;v&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;enumerate&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;obsticle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;k&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;game&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ACTION&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
  &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;obs&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;snake&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;head&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;snake&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;head&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;w&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;food&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;food&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;w&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ï—Å–ª–∏ –±—ã –º—ã –∑–∞—Ö–æ—Ç–µ–ª–∏ —É—á–∏—Ç—ã–≤–∞—Ç—å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã —á–∞—Å—Ç–µ–π —Ç–µ–ª–∞ –∑–º–µ–π–∫–∏, —Ç–æ–≥–¥–∞, —Ä–∞–∑–º–µ—Ä —Ç–∞–±–ª–∏—Ü—ã —Ä–µ–∑–∫–æ –≤–æ–∑—Ä–∞—Å—Ç–µ—Ç. –î–∞–∂–µ –µ—Å–ª–∏ –∏—Å—Ö–æ–¥–∏—Ç—å –∏–∑ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã—Ö –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç —á–∞—Å—Ç–µ–π —Ç–µ–ª–∞ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö, —Ç–æ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –∫–∞–∂–¥–æ–π –∏–∑ –Ω–∏—Ö —É–º–Ω–æ–∂–∞—é—Ç —Ä–∞–∑–º–µ—Ä —Ç–∞–±–ª–∏—Ü—ã –Ω–∞ 5 (–æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç, —Å–ª–µ–≤–∞, —Å–ø—Ä–∞–≤–∞, —Å–≤–µ—Ä—Ö—É, —Å–Ω–∏–∑—É). –ß–∞—Å—Ç–µ–π —Ç–µ–ª–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å &lt;code&gt;32 * 16 - 2 = 510&lt;/code&gt;. –ü–æ–ª—É—á–∞–µ–º &lt;code&gt;5**510&lt;/code&gt; —ç—Ç–æ –æ—á–µ–Ω—å –±–æ–ª—å—à–æ–µ —á–∏—Å–ª–æ –≥–∞–ª–∞–∫—Ç–∏—á–µ—Å–∫–∏—Ö –º–∞—Å—à—Ç–∞–±–æ–≤, –Ω–∏ –æ–¥–∏–Ω –∫–æ–º–ø—å—é—Ç–µ—Ä –≤ –º–∏—Ä–µ –Ω–µ –æ–±–ª–∞–¥–∞–µ—Ç —Ç–∞–∫–∏–º —Ä–∞–∑–º–µ—Ä–æ–º –ø–∞–º—è—Ç–∏.&lt;/p&gt;
&lt;p&gt;–í–∞–∂–Ω–æ–π –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å—é &lt;code&gt;Q-learning&lt;/code&gt; —è–≤–ª—è–µ—Ç—Å—è —Ç–æ, —á—Ç–æ –æ–±—É—á–µ–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–µ –¥–æ–∂–∏–¥–∞—è—Å—å –æ–∫–æ–Ω—á–∞–Ω–∏—è —ç–ø–∏–∑–æ–¥–∞ –≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç &lt;code&gt;Reinforce&lt;/code&gt; –∞–ª–≥–æ—Ä–∏—Ç–º–∞. –ì–∏–ø–µ—Ä–ø–∞—Ä–∞–º–µ—Ç—Ä—ã &lt;code&gt;ALPHA&lt;/code&gt;, &lt;code&gt;GAMMA&lt;/code&gt; –∏ &lt;code&gt;epsilon&lt;/code&gt; –≤–ª–∏—è—é—Ç –Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç—å –∏ –∫–∞—á–µ—Å—Ç–≤–æ –æ–±—É—á–µ–Ω–∏—è. –¢–∞–∫ –∂–µ –∫–∞–∫ –∏ –≤ —Å–ª—É—á–∞–µ —Å &lt;code&gt;Reinforce&lt;/code&gt; –Ω—É–∂–µ–Ω –∫–æ–º–ø—Ä–æ–º–∏—Å—Å –º–µ–∂–¥—É —Ä–∞–∑–≤–µ–¥–∫–æ–π –∏ —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏–µ–π. –ó–∞ —ç—Ç–æ –æ—Ç–≤–µ—á–∞–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è &lt;code&gt;epsilon&lt;/code&gt;. –ù–∞ –Ω–∞—á–∞–ª—å–Ω–æ–º —ç—Ç–∞–ø–µ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –¥–µ–π—Å—Ç–≤–∏–π –∞–≥–µ–Ω—Ç–∞ —è–≤–ª—è—é—Ç—Å—è —Å–ª—É—á–∞–π–Ω—ã–º–∏. –í –ø—Ä–æ—Ü–µ—Å—Å–µ –æ–±—É—á–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å –º–µ–Ω—è–µ—Ç—Å—è –≤ –æ–±—Ä–∞—Ç–Ω—É—é —Å—Ç–æ—Ä–Ω—É.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# Until learning is stopped&lt;/span&gt;
&lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;history&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;total_episodes&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;

  &lt;span class="c1"&gt;# Reset the environment&lt;/span&gt;
  &lt;span class="n"&gt;env&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;reset&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
  &lt;span class="n"&gt;state&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;extract_features&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
  &lt;span class="n"&gt;done&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;False&lt;/span&gt;

  &lt;span class="c1"&gt;# Reduce epsilon (because we need less and less exploration)&lt;/span&gt;
  &lt;span class="n"&gt;epsilon&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;max_epsilon&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;min_epsilon&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;exp&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;epsilon_decay&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;history&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
  &lt;span class="n"&gt;epsilon&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="n"&gt;min_epsilon&lt;/span&gt;

  &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="n"&gt;done&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;

    &lt;span class="c1"&gt;# Choose an action a in the current world state (s)&lt;/span&gt;
    &lt;span class="c1"&gt;# First we randomize a number&lt;/span&gt;
    &lt;span class="n"&gt;exp_exp_tradeoff&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;random&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;random&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

    &lt;span class="c1"&gt;# If this number &amp;gt; greater than epsilon --&amp;gt;&lt;/span&gt;
    &lt;span class="c1"&gt;# exploitation (taking the biggest Q value for this state)&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;exp_exp_tradeoff&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;epsilon&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="n"&gt;action&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;argmax&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;qtable&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;state&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;

    &lt;span class="c1"&gt;# Else doing a random choice --&amp;gt; exploration&lt;/span&gt;
    &lt;span class="k"&gt;else&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="n"&gt;action&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;env&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;random_action&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

    &lt;span class="c1"&gt;# Take the action (a) and observe the outcome state(s&amp;#39;) and reward (r)&lt;/span&gt;
    &lt;span class="n"&gt;_&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;reward&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;done&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;info&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;env&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;step&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;action&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;new_state&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;extract_features&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

    &lt;span class="c1"&gt;# Update Q(s,a):= Q(s,a) + lr * [R(s,a) + GAMMA * max Q(s&amp;#39;,a&amp;#39;) - Q(s,a)]&lt;/span&gt;
    &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;state&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;action&lt;/span&gt;&lt;span class="p"&gt;,)&lt;/span&gt;
    &lt;span class="n"&gt;qtable&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="n"&gt;ALPHA&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;reward&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;GAMMA&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;qtable&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;new_state&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;max&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;qtable&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;

    &lt;span class="c1"&gt;# Our new state is state&lt;/span&gt;
    &lt;span class="n"&gt;state&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;new_state&lt;/span&gt;

  &lt;span class="n"&gt;history&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;info&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;score&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ê–ª–≥–æ—Ä–∏—Ç–º &lt;code&gt;Q-learning&lt;/code&gt; —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –≤ —Å–æ—á–µ—Ç–∞–Ω–∏–∏ —Å –Ω–µ–π—Ä–æ–Ω–Ω—ã–º–∏ —Å–µ—Ç—è–º–∏. –í —Å–∞–º–æ–º –ø—Ä–æ—Å—Ç–µ–π—à–µ–º —Å–ª—É—á–∞–µ —Ç–∞–±–ª–∏—Ü—É &lt;code&gt;Q-table&lt;/code&gt; –º–æ–∂–Ω–æ —Å–Ω–∞—á–∞–ª–∞ –æ–±—É—á–∏—Ç—å, –∞ –∑–∞—Ç–µ–º —Å–∂–∞—Ç—å –∏—Å–ø–æ–ª—å–∑—É—è –µ–µ –¥–∞–Ω–Ω—ã–µ –∫–∞–∫ –≥–æ—Ç–æ–≤—ã–π –¥–∞—Ç–∞—Å–µ—Ç –¥–ª—è –æ–±—É—á–µ–Ω–∏—è —Å —É—á–∏—Ç–µ–ª–µ–º. –û–¥–Ω–∞–∫–æ —á–∞—Å—Ç–æ —Å—Ä–µ–¥–∞ –∏–º–µ–µ—Ç —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏–π –∏ –¥–µ–π—Å—Ç–≤–∏–π, –ø–æ—ç—Ç–æ–º—É —Å–æ—Å—Ç–∞–≤–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É –≤ —è–≤–Ω–æ–º –≤–∏–¥–µ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ. –î–ª—è —Ä–µ—à–µ–Ω–∏—è —ç—Ç–æ–π –ø—Ä–æ–±–ª–µ–º—ã —Ç–∞–∫–∂–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –Ω–µ–π—Ä–æ–Ω–Ω—ã–µ —Å–µ—Ç–∏, —á—Ç–æ–±—ã –Ω–µ —Ö—Ä–∞–Ω–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ–ª–µ–∑–Ω–æ—Å—Ç–∏, –∞ –ø—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞—Ç—å –∏—Ö. –ù–∞ –≤—Ö–æ–¥ –Ω–µ–π—Ä–æ—Å–µ—Ç–∏ –ø–æ—Å—Ç—É–ø–∞–µ—Ç —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å—Ä–µ–¥—ã, –∞ –Ω–∞ –≤—ã—Ö–æ–¥ –æ–Ω–∞ –¥–∞–µ—Ç –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä—É–µ–º—É—é –Ω–∞–≥—Ä–∞–¥—É –¥–ª—è –≤—Å–µ—Ö –¥–µ–π—Å—Ç–≤–∏–π. –î–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è &lt;code&gt;Q-value&lt;/code&gt; –º—ã –æ–±–Ω–æ–≤–ª—è–µ–º –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω–µ–π—Ä–æ–Ω–Ω–æ–π —Å–µ—Ç–∏, —á—Ç–æ–±—ã –ø—Ä–µ–¥—Å–∫–∞–∑—ã–≤–∞—Ç—å –±–æ–ª–µ–µ —Ç–æ—á–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è. –¢–∞–∫–∏–µ –Ω–µ–π—Ä–æ–Ω–Ω—ã–µ —Å–µ—Ç–∏ –Ω–∞–∑—ã–≤–∞—é—Ç DQN (Deep Q Networks).&lt;/p&gt;</content><category term="msp430"></category><category term="ai"></category><category term="rl"></category></entry><entry><title>–ù–µ–π—Ä–æ—Å–µ—Ç–∏ –¥–ª—è –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤ - ¬´–ü–µ—Ä—Ü–µ–ø—Ç—Ä–æ–Ω¬ª</title><link href="http://proiot.ru/blog/posts/2021/03/28/neiroseti-dlia-mikrokontrollerov-pertseptron/" rel="alternate"></link><published>2021-03-28T00:00:00+02:00</published><updated>2021-03-28T00:00:00+02:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2021-03-28:/blog/posts/2021/03/28/neiroseti-dlia-mikrokontrollerov-pertseptron/</id><summary type="html">&lt;p&gt;–ò—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–µ –Ω–µ–π—Ä–æ–Ω–Ω—ã–µ —Å–µ—Ç–∏ (–ò–ù–°) ‚Äî —ç—Ç–æ —É–ø—Ä–æ—â–µ–Ω–Ω—ã–µ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –º–æ–¥–µ–ª–∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ —Ä–µ–∞–ª—å–Ω—ã—Ö –±–∏–æ–ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –Ω–µ–π—Ä–æ–Ω–Ω—ã—Ö —Å–µ—Ç–µ–π (–ë–ù–°). –ü–æ–∫–∞ —á—Ç–æ –ò–ù–° –µ—â–µ –æ—á–µ–Ω—å –¥–∞–ª–µ–∫–∏ –æ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π —á–µ–ª–æ–≤–µ—á–µ—Å–∫–æ–≥–æ –º–æ–∑–≥–∞ –∏ –º—ã—à–ª–µ–Ω–∏—è, –æ–¥–Ω–∞–∫–æ —É–∂–µ —Å–µ–π—á–∞—Å –Ω–µ–π—Ä–æ—Å–µ—Ç–∏ —É—Å–ø–µ—à–Ω–æ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –≤–æ –º–Ω–æ–≥–∏—Ö —Å—Ñ–µ—Ä–∞—Ö –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —á–µ–ª–æ–≤–µ–∫–∞ —Ç–∞–∫–∏—Ö –∫–∞–∫ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ, –∞ —Ç–∞–∫–∂–µ —Å–∏–Ω—Ç–µ–∑ —Ä–µ—á–∏ –∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π, —Ä–æ–±–æ—Ç—ã-–∫—É—Ä—å–µ—Ä—ã, –±–µ—Å–ø–∏–ª–æ—Ç–Ω—ã–π —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç, –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;p&gt;–ò—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–µ –Ω–µ–π—Ä–æ–Ω–Ω—ã–µ —Å–µ—Ç–∏ (–ò–ù–°) ‚Äî —ç—Ç–æ —É–ø—Ä–æ—â–µ–Ω–Ω—ã–µ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –º–æ–¥–µ–ª–∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ —Ä–µ–∞–ª—å–Ω—ã—Ö –±–∏–æ–ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –Ω–µ–π—Ä–æ–Ω–Ω—ã—Ö —Å–µ—Ç–µ–π (–ë–ù–°). –ü–æ–∫–∞ —á—Ç–æ –ò–ù–° –µ—â–µ –æ—á–µ–Ω—å –¥–∞–ª–µ–∫–∏ –æ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π —á–µ–ª–æ–≤–µ—á–µ—Å–∫–æ–≥–æ –º–æ–∑–≥–∞ –∏ –º—ã—à–ª–µ–Ω–∏—è, –æ–¥–Ω–∞–∫–æ —É–∂–µ —Å–µ–π—á–∞—Å –Ω–µ–π—Ä–æ—Å–µ—Ç–∏ —É—Å–ø–µ—à–Ω–æ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –≤–æ –º–Ω–æ–≥–∏—Ö —Å—Ñ–µ—Ä–∞—Ö –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —á–µ–ª–æ–≤–µ–∫–∞ —Ç–∞–∫–∏—Ö –∫–∞–∫ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ, –∞ —Ç–∞–∫–∂–µ —Å–∏–Ω—Ç–µ–∑ —Ä–µ—á–∏ –∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π, —Ä–æ–±–æ—Ç—ã-–∫—É—Ä—å–µ—Ä—ã, –±–µ—Å–ø–∏–ª–æ—Ç–Ω—ã–π —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç, –ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ä—è–¥–æ–≤ –∏ –¥—Ä.&lt;/p&gt;
&lt;p&gt;–ë–∞–∑–æ–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç –Ω–µ–π—Ä–æ—Å–µ—Ç–∏ ‚Äî –Ω–µ–π—Ä–æ–Ω. –ö–∞–∫ –º—ã –≤–∏–¥–∏–º –Ω–∞ —Ä–∏—Å—É–Ω–∫–µ –Ω–∏–∂–µ, —Å—Ç—Ä—É–∫—Ç—É—Ä—É –±–∏–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ –Ω–µ–π—Ä–æ–Ω–∞ –º–æ–∂–Ω–æ —É–ø—Ä–æ—Å—Ç–∏—Ç—å –¥–æ —Å–ª–µ–¥—É—é—â–µ–π: –¥–µ–Ω–¥—Ä–∏—Ç—ã, —Ç–µ–ª–æ –Ω–µ–π—Ä–æ–Ω–∞ –∏ –∞–∫—Å–æ–Ω. –î–µ–Ω–¥—Ä–∏—Ç—ã ‚Äî –≤–µ—Ç–≤—è—â–∏–µ—Å—è –æ—Ç—Ä–æ—Å—Ç–∫–∏, —Å–æ–±–∏—Ä–∞—é—â–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é —Å–æ –≤—Ö–æ–¥–∞ –≤ –Ω–µ–π—Ä–æ–Ω (—ç—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤–Ω–µ—à–Ω—è—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è —Å —Ä–µ—Ü–µ–ø—Ç–æ—Ä–æ–≤, –∏–ª–∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ—Ç –¥—Ä—É–≥–æ–≥–æ –Ω–µ–π—Ä–æ–Ω–∞). –í —Ç–æ–º —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ –≤—Ö–æ–¥—è—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–ª–∞ –Ω–µ–π—Ä–æ–Ω (–≤ –±–∏–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–º —Å–ª—É—á–∞–µ ‚Äî –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª —Å—Ç–∞–ª –≤—ã—à–µ –∫–∞–∫–æ–≥–æ-—Ç–æ –ø–æ—Ä–æ–≥–∞), —Ä–æ–∂–¥–∞–µ—Ç—Å—è –≤–æ–ª–Ω–∞ –≤–æ–∑–±—É–∂–¥–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä–∞—è —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ –º–µ–º–±—Ä–∞–Ω–µ —Ç–µ–ª–∞ –Ω–µ–π—Ä–æ–Ω–∞, –∞ –∑–∞—Ç–µ–º —á–µ—Ä–µ–∑ –∞–∫—Å–æ–Ω, –ø–æ—Å—Ä–µ–¥—Å—Ç–≤–æ–º –≤—ã–±—Ä–æ—Å–∞ –Ω–µ–π—Ä–æ–º–µ–¥–∏–∞—Ç–æ—Ä–∞, –ø–µ—Ä–µ–¥–∞–µ—Ç —Å–∏–≥–Ω–∞–ª –¥—Ä—É–≥–∏–º –Ω–µ—Ä–≤–Ω—ã–º –∫–ª–µ—Ç–∫–∞–º–∏ –∏–ª–∏ —Ç–∫–∞–Ω—è–º.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2021/03/28/neiroseti-dlia-mikrokontrollerov-pertseptron/neuron.png" style="width:100%; display:block; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–°–Ω–∞—á–∞–ª–∞ –±—É–¥–µ—Ç –Ω–µ–º–Ω–æ–≥–æ –º–∞—Ç–µ–º–∞—Ç–∏–∫–∏, –ø–æ—Ç–æ–º —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ –∫–æ–¥.&lt;/p&gt;
&lt;h2&gt;–¢–ï–û–†–ò–Ø&lt;/h2&gt;
&lt;p&gt;–£–æ—Ä—Ä–µ–Ω –ú–∞–∫-–ö–∞–ª–ª–æ–∫ –∏ –£–æ–ª—Ç–µ—Ä –ü–∏—Ç—Ç—Å –≤ 1943 –≥–æ–¥—É –ø—Ä–µ–¥–ª–æ–∂–∏–ª–∏ –º–æ–¥–µ–ª—å –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –Ω–µ–π—Ä–æ–Ω–∞. –ê –≤ 1958 –≥–æ–¥—É –§—Ä–µ–Ω–∫ –†–æ–∑–µ–Ω–±–ª–∞—Ç—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ –Ω–µ–π—Ä–æ–Ω–∞ –ú–∞–∫-–ö–∞–ª–ª–æ–∫–∞-–ü–∏—Ç—Ç—Å–∞ —Å–æ–∑–¥–∞–ª –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω—É—é –ø—Ä–æ–≥—Ä–∞–º–º—É, –∞ –∑–∞—Ç–µ–º –∏ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ ‚Äî &lt;strong&gt;–ø–µ—Ä—Ü–µ–ø—Ç—Ä–æ–Ω&lt;/strong&gt;. –° —ç—Ç–æ–≥–æ –∏ –Ω–∞—á–∞–ª–∞—Å—å –∏—Å—Ç–æ—Ä–∏—è –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã—Ö –Ω–µ–π—Ä–æ–Ω–Ω—ã—Ö —Å–µ—Ç–µ–π. –¢–µ–ø–µ—Ä—å —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫—É—é –º–æ–¥–µ–ª—å –Ω–µ–π—Ä–æ–Ω–∞, —Å –∫–æ—Ç–æ—Ä—ã–º –º—ã –±—É–¥–µ–º –∏–º–µ—Ç—å –¥–µ–ª–æ –¥–∞–ª—å—à–µ. –ù–∞ –≤—Ö–æ–¥ –ø–æ–¥–∞—é—Ç—Å—è —á–∏—Å–ª–∞ (—Å–∏–≥–Ω–∞–ª—ã), –ø–æ—Å–ª–µ –æ–Ω–∏ —É–º–Ω–æ–∂–∞—é—Ç—Å—è –Ω–∞ –≤–µ—Å–∞ (–∫–∞–∂–¥—ã–π —Å–∏–≥–Ω–∞–ª ‚Äì –Ω–∞ —Å–≤–æ–π –≤–µ—Å) –∏ —Å—É–º–º–∏—Ä—É—é—Ç—Å—è. –ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É —Å—É–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –∏–Ω–æ–≥–¥–∞ –µ—â–µ –¥–æ–±–∞–≤–ª—è—é—Ç –∫–∞–∫—É—é-—Ç–æ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—É —Å–º–µ—â–µ–Ω–∏—è (–¥–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è –Ω–∞ —Ä–∏—Å—É–Ω–∫–µ —Å–º–µ—â–µ–Ω–∏–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç). –ó–∞—Ç–µ–º —Ñ—É–Ω–∫—Ü–∏—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –≤—ã—Å—á–∏—Ç—ã–≤–∞–µ—Ç –≤—ã—Ö–æ–¥–Ω–æ–π —Å–∏–≥–Ω–∞–ª –∏ –ø–æ–¥–∞–µ—Ç –µ–≥–æ –Ω–∞ –≤—ã—Ö–æ–¥.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2021/03/28/neiroseti-dlia-mikrokontrollerov-pertseptron/perceptron.png" style="width:100%; display:block; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–ò–¥–µ—è —Ñ—É–Ω–∫—Ü–∏–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ —Ç–∞–∫–∂–µ –≤–∑—è—Ç–∞ –∏–∑ –±–∏–æ–ª–æ–≥–∏–∏. –§—É–Ω–∫—Ü–∏—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ—Ö–æ–¥–∏—Ç—å –∏–ª–∏ –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å —Å–∏–≥–Ω–∞–ª–∞–º –æ—Ç –Ω–µ–π—Ä–æ–Ω–∞ –∫ –Ω–µ–π—Ä–æ–Ω–∞–º –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä—É—é –æ–Ω–∏ –ø–µ—Ä–µ–¥–∞—é—Ç. –¢.–µ. –µ—Å–ª–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è —è–≤–ª—è–µ—Ç—Å—è –≤–∞–∂–Ω–æ–π, —Ç–æ —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç –µ–µ, –∞ –µ—Å–ª–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –º–∞–ª–æ –∏–ª–∏ –æ–Ω–∞ –Ω–µ–¥–æ—Å—Ç–æ–≤–µ—Ä–Ω–∞, —Ç–æ —Ñ—É–Ω–∫—Ü–∏—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –Ω–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –µ–π –ø—Ä–æ–π—Ç–∏ –¥–∞–ª—å—à–µ.&lt;/p&gt;
&lt;p&gt;–§—É–Ω–∫—Ü–∏–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –±—ã–≤–∞—é—Ç –æ—á–µ–Ω—å —Ä–∞–∑–Ω—ã–µ, –≤—ã–±–æ—Ä –æ–±—É—Å–ª–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –æ–±–ª–∞—Å—Ç—å—é –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –ò–ù–° –∏ —è–≤–ª—è–µ—Ç—Å—è –≤–∞–∂–Ω–æ–π –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–π –∑–∞–¥–∞—á–µ–π –¥–ª—è —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç–∞ –ø–æ –º–∞—à–∏–Ω–Ω–æ–º—É –æ–±—É—á–µ–Ω–∏—é. –í–æ—Ç —Ç–∞–∫ –Ω–∞–ø—Ä–∏–º–µ—Ä –≤—ã–≥–ª—è–¥—è—Ç –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –∏–∑ –Ω–∏—Ö:&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2021/03/28/neiroseti-dlia-mikrokontrollerov-pertseptron/activation.png" style="width:100%; display:block; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–û—á–µ–≤–∏–¥–Ω–æ, —á—Ç–æ –≤ —Å–∞–º–æ–º –ø—Ä–æ—Å—Ç–æ–º —Å–ª—É—á–∞–µ –≤—Å—è –Ω–µ–π—Ä–æ—Å–µ—Ç—å –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∞ –æ–¥–Ω–∏–º –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–º –Ω–µ–π—Ä–æ–Ω–æ–º. –ü—Ä–∏ —ç—Ç–æ–º –¥–∞–∂–µ –æ–¥–∏–Ω –Ω–µ–π—Ä–æ–Ω —Ö–æ—Ä–æ—à–æ —Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å –∑–∞–¥–∞—á–µ–π  —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –∫–ª–∞—Å—Å–∞ –æ–±—ä–µ–∫—Ç–∞ –≤ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ, –≤ –∫–æ—Ç–æ—Ä–æ–º –æ–±—ä–µ–∫—Ç—ã —ç—Ç–∏—Ö –∫–ª–∞—Å—Å–æ–≤ —è–≤–ª—è—é—Ç—Å—è –ª–∏–Ω–µ–π–Ω–æ —Å–µ–ø–∞—Ä–∞–±–µ–ª—å–Ω—ã–º–∏. –ü—Ä–æ—Å—Ç—ã–º –ø—Ä–∏–º–µ—Ä–æ–º –ª–∏–Ω–µ–π–Ω–æ–π —Å–µ–ø–∞—Ä–∞–±–µ–ª—å–Ω–æ—Å—Ç–∏ —è–≤–ª—è—é—Ç—Å—è –±—É–ª–µ–≤—ã —Ñ—É–Ω–∫—Ü–∏–∏ OR –∏ AND, –¥–ª—è —Ç–∞–∫–∏—Ö —Ñ—É–Ω–∫—Ü–∏–π –≤—Å–µ–≥–¥–∞ –º–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Å—Ç–∏ –ø—Ä—è–º—É—é (–∏–ª–∏ –≥–∏–ø–µ—Ä–ø–ª–æ—Å–∫–æ—Å—Ç—å –≤ –º–Ω–æ–≥–æ–º–µ—Ä–Ω–æ–º –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ), –æ—Ç–¥–µ–ª—è—é—â—É—é 0 –∑–Ω–∞—á–µ–Ω–∏—è –æ—Ç 1. –ê –≤–æ—Ç —Å —Ñ—É–Ω–∫—Ü–∏–µ–π XOR –¥–µ–ª–∞ –æ–±—Å—Ç–æ—è—Ç –Ω–µ–º–Ω–æ–≥–æ —Å–ª–æ–∂–Ω–µ–µ –∏ —Å–µ—Ç—å –∏–∑ –æ–¥–Ω–æ–≥–æ –Ω–µ–π—Ä–æ–Ω–∞ —Å —Ç–∞–∫–æ–π –∑–∞–¥–∞—á–µ–π —É–≤—ã –Ω–µ —Å–ø—Ä–∞–≤–∏—Ç—Å—è.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2021/03/28/neiroseti-dlia-mikrokontrollerov-pertseptron/or_xor.png" style="width:100%; display:block; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–ù–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Å—Ç–∏ –æ–¥–Ω—É –ø—Ä—è–º—É—é —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —á—Ç–æ–±—ã —Ä–∞–∑–¥–µ–ª–∏—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –∏—Å–∫–ª—é—á–∞—é—â–µ–≥–æ –ò–õ–ò. –ö —Å—á–∞—Å—Ç—å—é, —Ä–µ—à–µ–Ω–∏–µ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–æ—Å—Ç–æ–µ. –î–ª—è —ç—Ç–æ–≥–æ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –Ω–µ–π—Ä–æ–Ω–Ω—ã—Ö —Å–µ—Ç–µ–π, —Å–æ—Å—Ç–æ—è—â–∏–µ –∏–∑ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ —Ç–∞–∫–∏—Ö –Ω–µ–π—Ä–æ–Ω–æ–≤, –æ–±—ä–µ–¥–∏–Ω–µ–Ω–Ω—ã—Ö –≤ —Å–ª–æ–∏. –¢–∞–∫–∏–µ –º–Ω–æ–≥–æ—Å–ª–æ–π–Ω—ã–µ —Å–µ—Ç–∏ –µ—â–µ –Ω–∞–∑—ã–≤–∞—é—Ç –≥–ª—É–±–æ–∫–∏–º–∏. –ò–º –ø–æ–¥ —Å–∏–ª—É —Ä–µ—à–∞—Ç—å —Å–ª–æ–∂–Ω—ã–µ –∑–∞–¥–∞—á–∏, —Å –∫–æ—Ç–æ—Ä—ã–º–∏ –Ω–µ –º–æ–∂–µ—Ç —Å–ø—Ä–∞–≤–∏—Ç—å—Å—è –ø–µ—Ä—Ü–µ–ø—Ç—Ä–æ–Ω. –í —á–∞—Å—Ç–Ω–æ—Å—Ç–∏, –ª–∏–Ω–µ–π–Ω–æ –Ω–µ—Ä–∞–∑–¥–µ–ª–∏–º—ã–µ –∑–∞–¥–∞—á–∏. –ì—Ä–∞—Ñ–∏—á–µ—Å–∫–∏ &lt;strong&gt;–º–Ω–æ–≥–æ—Å–ª–æ–π–Ω—ã–π –ø–µ—Ä—Ü–µ–ø—Ç—Ä–æ–Ω&lt;/strong&gt; —Å –æ–¥–Ω–∏–º —Å–∫—Ä—ã—Ç—ã–º —Å–ª–æ–µ–º –≤—ã–≥–ª—è–¥–∏—Ç –≤–æ—Ç —Ç–∞–∫:&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2021/03/28/neiroseti-dlia-mikrokontrollerov-pertseptron/dog_cat.gif" style="width:100%; display:block; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–ü–µ—Ä–µ–¥ —Ç–µ–º –∫–∞–∫ –ø—Ä–∏—Å—Ç—É–ø–∏—Ç—å –∫ –ø—Ä–∞–∫—Ç–∏–∫–µ –ø–∞—Ä—É —Å–ª–æ–≤ –æ —Ç–æ–º –∫–∞–∫ –æ–±—É—á–∏—Ç—å –Ω–µ–π—Ä–æ—Å–µ—Ç—å. –ö–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–æ–¥–æ–±—Ä–∞—Ç—å –≤–µ—Å–∞ –¥–ª—è –Ω–µ–π—Ä–æ–Ω–æ–≤ —Ç–∞–∫, —á—Ç–æ–±—ã –æ—à–∏–±–∫–∞ –Ω–∞ –≤—ã—Ö–æ–¥–µ –±—ã–ª–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–π ? –û–±—ã—á–Ω–æ –≤–µ—Å–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—Ç—Å—è —Å–ª—É—á–∞–π–Ω—ã–º –æ–±—Ä–∞–∑–æ–º. –í –ø—Ä–æ—Ü–µ—Å—Å–µ –æ–±—É—á–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏—è –≤–µ—Å–æ–≤ –º–µ–Ω—è—é—Ç—Å—è. –ù–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ —Å–µ–π—á–∞—Å –Ω–∞–∏–±–æ–ª–µ–µ —á–∞—Å—Ç–æ –ø—Ä–∏–º–µ–Ω—è—é—Ç –º–µ—Ç–æ–¥ –≥—Ä–∞–¥–∏–µ–Ω—Ç–Ω–æ–≥–æ —Å–ø—É—Å–∫–∞ –∏ –æ–±—Ä–∞—Ç–Ω–æ–≥–æ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –æ—à–∏–±–∫–∏. –ú–Ω–æ–∂–µ—Å—Ç–≤–æ –±–∏–±–ª–∏–æ—Ç–µ–∫ –º–∞—à–∏–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è –Ω–∞–ø—Ä–∏–º–µ—Ä Tensorflow, Pytorch –∏ –¥—Ä. –¥–∞—é—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å –ª–µ–≥–∫–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ–±—É—á–µ–Ω–∏–µ —ç—Ç–∏–º –º–µ—Ç–æ–¥–æ–º, –Ω–µ –≤–¥–∞–≤–∞—è—Å—å –≤ –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –µ–≥–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏. –ì—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–π —Å–ø—É—Å–∫ ‚Äî –º–µ—Ç–æ–¥ –Ω–∞—Ö–æ–∂–¥–µ–Ω–∏—è –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–∏ –æ—à–∏–±–∫–∏ (—Å—É—â–µ—Å—Ç–≤—É–µ—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ –≤–∏–¥–æ–≤ —ç—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–∏). –ú–∏–Ω–∏–º–∏–∑–∞—Ü–∏—è –ª—é–±–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –æ–∑–Ω–∞—á–∞–µ—Ç –ø–æ–∏—Å–∫ —Å–∞–º–æ–π –≥–ª—É–±–æ–∫–æ–π –≤–ø–∞–¥–∏–Ω—ã –≤ —ç—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–∏.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2021/03/28/neiroseti-dlia-mikrokontrollerov-pertseptron/gradient.gif" style="width:100%; display:block; border:1px solid #ddd; padding: 10px 0;"&gt;&lt;/p&gt;
&lt;p&gt;–ò—Ç–∞–∫ —É –Ω–∞—Å –µ—Å—Ç—å –∏—Å—Ö–æ–¥–Ω—ã–µ –º–∞—Ç—Ä–∏—Ü—ã –≤–µ—Å–æ–≤, –º—ã —Ö–æ—Ç–∏–º –≤–Ω–µ—Å—Ç–∏ –≤ –Ω–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –¥–µ–ª–∞—é—Ç –Ω–∞—à—É –º–æ–¥–µ–ª—å –ª—É—á—à–µ, —É–º–µ–Ω—å—à–∞—é—Ç –æ—à–∏–±–∫—É. –ï—â–µ —É –Ω–∞—Å –µ—Å—Ç—å –Ω–∞–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ–±—É—á–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–π —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö, –∏ —Ç–æ–≥–æ —á—Ç–æ –º—ã —Ö–æ—Ç–∏–º –ø–æ–ª—É—á–∞—Ç—å –Ω–∞ –≤—ã—Ö–æ–¥–µ –Ω–µ–π—Ä–æ–Ω–Ω–æ–π —Å–µ—Ç–∏. –¢–∞–∫–∂–µ –µ—Å—Ç—å –Ω–µ–∫–∞—è —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è —á–∏—Å–ª–µ–Ω–Ω–æ–π –æ—Ü–µ–Ω–∫–∏ –æ—à–∏–±–∫–∏ –Ω–∞ –≤—ã—Ö–æ–¥–µ. –ï—Å–ª–∏ –±—É–¥–µ—Ç –∏–∑–≤–µ—Å—Ç–Ω–æ, –Ω–∞—Å–∫–æ–ª—å–∫–æ –≤–ª–∏—è—é—Ç –≤–µ—Å–∞ –Ω–∞ —ç—Ç—É —Ñ—É–Ω–∫—Ü–∏—é, —Ç–æ –±—É–¥–µ—Ç –∏–∑–≤–µ—Å—Ç–Ω–æ, –Ω–∞—Å–∫–æ–ª—å–∫–æ –∏—Ö –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å. –¢—É—Ç –Ω–∞–º –ø–æ–º–æ–∂–µ—Ç —á–∞—Å—Ç–Ω–∞—è &lt;a href="http://proiot.ru/blog/posts/2016/11/30/ngspicejs-analogovye-integrator-i-differentsiator/"&gt;–ø—Ä–æ–∏–∑–≤–æ–¥–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–∏&lt;/a&gt; –æ—à–∏–±–∫–∏ ‚Äî –≥—Ä–∞–¥–∏–µ–Ω—Ç. –ü—Ä–æ–∏–∑–≤–æ–¥–Ω–∞—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∫—Ä—É—Ç–∏–∑–Ω—É –∏ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–∏ –∑–∞–¥–∞–Ω–Ω–æ–º –∞—Ä–≥—É–º–µ–Ω—Ç–µ. –ï—Å–ª–∏ —á–∞—Å—Ç–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–Ω–∞—è –∏–∑–≤–µ—Å—Ç–Ω–∞, –º–æ–∂–Ω–æ –ø—Ä–∏—Å—Ç—É–ø–∞—Ç—å –∫ –æ–±—É—á–µ–Ω–∏—é —Å–µ—Ç–∏, –∫–æ—Ç–æ—Ä–æ–µ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –¥–≤—É—Ö —à–∞–≥–æ–≤:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;–ø—Ä—è–º–æ–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ ‚Äî –æ–±—É—á–∞—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ –ø–æ–¥–∞—é—Ç—Å—è –Ω–∞ –≤—Ö–æ–¥ —Å–µ—Ç–∏, –ø—Ä–æ—Ö–æ–¥—è—Ç —á–µ—Ä–µ–∑ –≤—Å–µ –≤–µ—Å–∞, —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å—Ä–∞–≤–Ω–∏–≤–∞—é—Ç—Å—è —Å –∂–µ–ª–∞–µ–º—ã–º–∏ —Ü–µ–ª–µ–≤—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏–º–∏ –∏ —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è —Ç–µ–∫—É—â–∞—è –æ—à–∏–±–∫–∞ —Å–µ—Ç–∏&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;–æ–±—Ä–∞—Ç–Ω–æ–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ ‚Äî –∑–Ω–∞—è –≤–µ–ª–∏—á–∏–Ω—É –æ—à–∏–±–∫–∏ —Å–µ—Ç–∏ –∏ —á–∞—Å—Ç–Ω—É—é –ø—Ä–æ–∏–∑–≤–æ–¥–Ω—É—é, –∫–æ—Ç–æ—Ä–∞—è  –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –ø–æ –∫–∞–∂–¥–æ–º—É –≤–µ—Å—É, –≤–µ—Å–∞ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä—É—é—Ç—Å—è —Å —É—á–µ—Ç–æ–º –Ω–µ–∫–æ–µ–≥–æ –Ω–µ–±–æ–ª—å—à–æ–≥–æ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞ –Ω–∞—á–∏–Ω–∞—è —Å –≤–µ—Å–æ–≤ –≤—ã—Ö–æ–¥–Ω—ã—Ö –Ω–µ–π—Ä–æ–Ω–æ–≤&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;–ü–æ–≤—Ç–æ—Ä—è—Ç—å —ç—Ç–∏ —à–∞–≥–∏ –Ω—É–∂–Ω–æ –∏—Ç–µ—Ä–∞—Ç–∏–≤–Ω–æ, –¥–æ —Ç–µ—Ö –ø–æ—Ä –ø–æ–∫–∞ –æ—à–∏–±–∫–∞ –Ω–µ –ø–µ—Ä–µ—Å—Ç–∞–Ω–µ—Ç —É–º–µ–Ω—å—à–∞—Ç—å—Å—è. –î–≤–∏–≥–∞—è—Å—å –ø–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—é –≥—Ä–∞–¥–∏–µ–Ω—Ç–∞ –º—ã –±—É–¥–µ–º –ø–ª–∞–≤–Ω–æ —Å–∫–∞—Ç—ã–≤–∞—Ç—å—Å—è –≤ –Ω–∏–∑–∏–Ω—É, –∞ –¥–∏–Ω–∞–º–∏–∫–∞ –æ–±—É—á–µ–Ω–∏—è –Ω–µ–π—Ä–æ–Ω–Ω–æ–π —Å–µ—Ç–∏ –Ω–∞–ø–æ–º–∏–Ω–∞–µ—Ç —à–∞—Ä–∏–∫, –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ —Å–∫–∞—Ç—ã–≤–∞—é—â–∏–π—Å—è –≤ –ª–æ–∫–∞–ª—å–Ω—ã–π –º–∏–Ω–∏–º—É–º.&lt;/p&gt;
&lt;h2&gt;–ü–†–ê–ö–¢–ò–ö–ê&lt;/h2&gt;
&lt;p&gt;–¢—É—Ç –º—ã –æ–±—É—á–∏–º –º–Ω–æ–≥–æ—Å–ª–æ–π–Ω—ã–π –ø–µ—Ä—Ü–µ–ø—Ç—Ä–æ–Ω –≤—ã–ø–æ–ª–Ω—è—Ç—å —Ñ—É–Ω–∫—Ü–∏—é XOR. –û–±—É—á–∞—Ç—å –±—É–¥–µ–º –≤ Tensorflow (–Ω–µ –ø—Ä–∏–Ω—Ü–∏–ø–∏–∞–ª—å–Ω–æ, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª—é–±—É—é –¥—Ä—É–≥—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É –º–∞—à–∏–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è). –û–±—É—á–µ–Ω–Ω—É—é –º–æ–¥–µ–ª—å —Ä–∞–∑–≤–µ—Ä–Ω–µ–º –Ω–∞ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–µ —Å &lt;a href="http://proiot.ru/blog/posts/2017/03/20/s-18-dlia-mikrokontrollerov-razvedka-boem/"&gt;C++&lt;/a&gt; –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–æ–º.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://mazko.github.io/MSP430.js/2ccb68b454f4da854ee5ed23df03dee6"&gt;MSP430.js&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2021/03/28/neiroseti-dlia-mikrokontrollerov-pertseptron/xor.html"&gt;–Ω–æ—É—Ç–±—É–∫&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2021/03/28/neiroseti-dlia-mikrokontrollerov-pertseptron/uxor.zip"&gt;–∏—Å—Ö–æ–¥–Ω–∏–∫–∏&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2021/03/28/neiroseti-dlia-mikrokontrollerov-pertseptron/ui.gif" style="width:55%; margin: 0 auto; display:block;"&gt;&lt;/p&gt;
&lt;p&gt;–ß—Ç–æ–±—ã –æ–±—É—á–∏—Ç—å –Ω–µ–π—Ä–æ–Ω–Ω—É—é —Å–µ—Ç—å, –Ω–∞–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –∏—Å—Ö–æ–¥–Ω—ã–π –Ω–∞–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö, –≤ –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ —ç—Ç–æ —Ç–∞–±–ª–∏—Ü–∞ –∏—Å—Ç–∏–Ω–Ω–æ—Å—Ç–∏ –∏—Å–∫–ª—é—á–∞—é—â–µ–≥–æ –∏–ª–∏:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;X&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;array&lt;/span&gt;&lt;span class="p"&gt;([[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]])&lt;/span&gt;
&lt;span class="n"&gt;Y&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;array&lt;/span&gt;&lt;span class="p"&gt;([[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]])&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–¢–∞–∫–∂–µ –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –º–æ–¥–µ–ª—å –Ω–µ–π—Ä–æ–Ω–Ω–æ–π —Å–µ—Ç–∏. –ü—É—Å—Ç—å —ç—Ç–æ –±—É–¥–µ—Ç –ø–µ—Ä—Ü–µ–ø—Ç—Ä–æ–Ω —Å –æ–¥–Ω–∏–º —Å–∫—Ä—ã—Ç—ã–º —Å–ª–æ–µ–º –∏–∑ —Ç—Ä–µ—Ö –Ω–µ–π—Ä–æ–Ω–æ–≤. –§—É–Ω–∫—Ü–∏—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ —Å–∫—Ä—ã—Ç–æ–≥–æ —Å–ª–æ—è Relu. –í—ã—Ö–æ–¥–Ω–æ–π —Å–ª–æ–π —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –æ–¥–Ω–æ–≥–æ –Ω–µ–π—Ä–æ–Ω–∞ —Å —Ñ—É–Ω–∫—Ü–∏–µ–π –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ Sigmoid. –î–≤–∞ –≤—Ö–æ–¥–∞:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;x_in&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;keras&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Input&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;shape&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;keras&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;layers&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Dense&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;activation&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;relu&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                       &lt;span class="n"&gt;kernel_regularizer&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;l2&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
                       &lt;span class="n"&gt;bias_regularizer&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;l2&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;keras&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;layers&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Dense&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;activation&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;sigmoid&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;model&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;keras&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Model&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;inputs&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;x_in&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;outputs&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–¢–µ–ø–µ—Ä—å –Ω—É–∂–Ω–æ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å –Ω–∞—à—É –º–æ–¥–µ–ª—å, —Ç–æ –µ—Å—Ç—å, –ø–æ —Å—É—â–µ—Å—Ç–≤—É, –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –µ–µ –¥–ª—è –æ–±—É—á–µ–Ω–∏—è. –ë—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–ø—Ç–∏–º–∏–∑–∞—Ç–æ—Ä Adam. –û–ø—Ç–∏–º–∏–∑–∞—Ç–æ—Ä ‚Äî —ç—Ç–æ –∞–ª–≥–æ—Ä–∏—Ç–º, –∫–æ—Ç–æ—Ä—ã–π –∏–∑–º–µ–Ω—è–µ—Ç –≤–µ—Å–∞ –∏ —Å–º–µ—â–µ–Ω–∏—è –≤–æ –≤—Ä–µ–º—è –æ–±—É—á–µ–Ω–∏—è. –í –∫–∞—á–µ—Å—Ç–≤–µ —Ñ—É–Ω–∫—Ü–∏–∏ –æ—à–∏–±–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å—Ä–µ–¥–Ω–µ–∫–≤–∞–¥—Ä–∞—Ç–∏—á–µ—Å–∫—É—é –æ—à–∏–±–∫—É MSE(mean squared error). –í –Ω–µ–π—Ä–æ–Ω–Ω—ã–π —Å–µ—Ç—è—Ö —Ñ—É–Ω–∫—Ü–∏—é –æ—à–∏–±–∫–∏ —á–∞—Å—Ç–æ –Ω–∞–∑—ã–≤–∞—é—Ç —Ñ—É–Ω–∫—Ü–∏–µ–π –ø–æ—Ç–µ—Ä—å:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;model&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;compile&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;loss&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;mse&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;optimizer&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;adam&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –æ–±—É—á–∏—Ç—å –Ω–∞—à—É –º–æ–¥–µ–ª—å. –û–±—É—á–µ–Ω–∏–µ –∑–∞–Ω–∏–º–∞–µ—Ç –∫–∞–∫–æ–µ-—Ç–æ –≤—Ä–µ–º—è, –∫–æ—Ç–æ—Ä–æ–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ —Å–µ—Ç–∏ –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –æ–±—É—á–∞—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö. –í –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ —Å–µ—Ç—å –∫—Ä–æ—à–µ—á–Ω–∞—è, –º–æ–∂–Ω–æ –æ–±—É—á–∞—Ç—å –Ω–∞ –ª—é–±–æ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ. –ë–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–µ —Å–µ—Ç–∏ —Ü–µ–ª–µ—Å–æ–æ–±—Ä–∞–∑–Ω–µ–π –æ–±—É—á–∞—Ç—å –Ω–∞ —Ö–æ—Ä–æ—à–∏—Ö –≤–∏–¥–µ–æ–∫–∞—Ä—Ç–∞—Ö. –ú–µ—Ç–æ–¥ fit –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ø–æ—Ö. –≠–ø–æ—Ö–∞ ‚Äî —ç—Ç–æ –æ–¥–∏–Ω –ø—Ä–æ—Ö–æ–¥ –≤—Å–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –¥–∞—Ç–∞—Å–µ—Ç–∞. –° –∫–∞–∂–¥–æ–π —ç–ø–æ—Ö–æ–π –æ–±—É—á–µ–Ω–∏—è –æ—à–∏–±–∫–∞ –¥–æ–ª–∂–Ω–∞ –ø–∞–¥–∞—Ç—å –≤–ø–ª–æ—Ç—å –¥–æ –∫–∞–∫–æ–≥–æ-—Ç–æ —Ä–∞–∑—É–º–Ω–æ–≥–æ –ø—Ä–µ–¥–µ–ª–∞.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;model&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;fit&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;X&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Y&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;epochs&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;verbose&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ü–æ—Å–ª–µ –æ–±—É—á–µ–Ω–∏—è —Å–µ—Ç—å—é —É–∂–µ –º–æ–∂–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è. –¢–∞–∫ –∫–∞–∫ –ø–æ-—É–º–æ–ª—á–∞–Ω–∏—é –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Å–æ–∑–¥–∞–Ω–∏—è –Ω–µ–π—Ä–æ–Ω–Ω–æ–π —Å–µ—Ç–∏ –µ—ë –≤–µ—Å–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—Ç—Å—è —Å–ª—É—á–∞–π–Ω—ã–º –æ–±—Ä–∞–∑–æ–º, —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –Ω–æ–≤–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è –±—É–¥—É—Ç –Ω–µ–º–Ω–æ–≥–æ –æ—Ç–ª–∏—á–∞—Ç—å—Å—è –æ—Ç –ø—Ä–∏–≤–µ–¥–µ–Ω–Ω—ã—Ö –Ω–∏–∂–µ:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;model&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;predict&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;X&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–†–µ–∑—É–ª—å—Ç–∞—Ç:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;array(
  [[0.01152042],
   [0.98572624],
   [0.99311346],
   [0.00970006]], dtype=float32)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–¢–µ–ø–µ—Ä—å –Ω–µ–º–Ω–æ–∂–∫–æ –ª–∏–Ω–µ–π–Ω–æ–π –∞–ª–≥–µ–±—Ä—ã. –í —á–∞—Å—Ç–Ω–æ—Å—Ç–∏ –Ω–µ–ø–ª–æ—Ö–æ –±—ã –≤—Å–ø–æ–º–Ω–∏—Ç—å —á—Ç–æ —Ç–∞–º –Ω–∞–º –≤ –∏–Ω—Å—Ç–∏—Ç—É—Ç–µ —Ä–∞—Å—Å–∫–∞–∑—ã–≤–∞–ª–∏ –ø—Ä–æ –º–∞—Ç—Ä–∏—Ü—ã. –î–ª—è –Ω–∞—á–∞–ª–∞ –≤—ã–≤–µ–¥–µ–º –≤—Å–µ –∑–Ω–∞—á–µ–Ω–∏—è –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –≤–µ—Å–æ–≤ –Ω–∞ —ç–∫—Ä–∞–Ω.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;l&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;enumerate&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;model&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;layers&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
  &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;l&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get_weights&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="n"&gt;arr2str&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;lambda&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;[&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s1"&gt;]&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;, &amp;#39;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;join&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="si"&gt;%0.9g&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;w&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;l&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get_weights&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;W{} = {}&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;[&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s1"&gt;]&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;, &amp;#39;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;join&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;arr2str&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;w&lt;/span&gt;&lt;span class="p"&gt;)))&lt;/span&gt;
    &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;B{} = {}&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;format&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;arr2str&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;)))&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–†–µ–∑—É–ª—å—Ç–∞—Ç:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;W1 = [[-0.100219101, 0.0986418799, 0.0540673025], [-0.101571321, 0.055912815, -0.0540193357]]
B1 = [0.101785883, -0.0555998087, -7.84907461e-05]
W2 = [[-85.8035507], [-90.0149384], [87.0291138]]
B2 = [4.28154087]
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–£ –Ω–∞—Å –¥–≤–∞ —Å–ª–æ—è —Å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º–∏ –≤–µ—Å–∞–º–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–∑ –Ω–∏—Ö –ø–ª—é—Å —Å–º–µ—â–µ–Ω–∏–µ. –ß—Ç–æ–±—ã –ª—É—á—à–µ –ø–æ–Ω–∏–º–∞—Ç—å –º–∞—Ç–µ–º–∞—Ç–∏–∫—É –≤–Ω—É—Ç—Ä–∏ –ø–µ—Ä—Ü–µ–ø—Ç—Ä–æ–Ω–∞ –¥–∞–≤–∞–π—Ç–µ –æ—Ç–≤—è–∂–µ–º—Å—è –æ—Ç Tensorflow –∏ –≤—ã—á–∏—Å–ª–∏–º –≤—Å–µ —Ç–æ –∂–µ —Å–∞–º–æ–µ –∏—Å—Ö–æ–¥—è –∏–∑ —É–∂–µ –∏–º–µ—é—â–∏—Ö—Å—è —É –Ω–∞—Å –≤–µ—Å–æ–≤:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;X&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
  &lt;span class="c1"&gt;# First layer calculation&lt;/span&gt;
  &lt;span class="n"&gt;L1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;W1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;B1&lt;/span&gt;
  &lt;span class="c1"&gt;# Relu activation function&lt;/span&gt;
  &lt;span class="n"&gt;X2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;maximum&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;L1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="c1"&gt;# Second layer calculation&lt;/span&gt;
  &lt;span class="n"&gt;L2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;X2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;W2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;B2&lt;/span&gt;
  &lt;span class="c1"&gt;# Sigmoid&lt;/span&gt;
  &lt;span class="n"&gt;output&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;np&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;exp&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;L2&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
  &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;output&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–†–µ–∑—É–ª—å—Ç–∞—Ç:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;[0.01152039]&lt;/span&gt;
&lt;span class="k"&gt;[0.98572624]&lt;/span&gt;
&lt;span class="k"&gt;[0.99311345]&lt;/span&gt;
&lt;span class="k"&gt;[0.00970005]&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ö–∞–∫ –≤–∏–¥–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≤–ø–∞–ª —Å —Ç–µ–º, —á—Ç–æ –≤—ã–¥–∞–µ—Ç –º–µ—Ç–æ–¥ predict –≤ –Ω–∞—Ç—Ä–µ–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –Ω–∞–º–∏ —Å–µ—Ç–∏. –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –≤—ã—Ö–æ–¥–∞ —Å–ª–æ—è –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —É–º–Ω–æ–∂–µ–Ω–∏–∏ –≤—Ö–æ–¥–Ω–æ–≥–æ –≤–µ–∫—Ç–æ—Ä–∞ –Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é –≤–µ—Å–æ–≤—É—é –º–∞—Ç—Ä–∏—Ü—É, –∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É –ø—Ä–∏–±–∞–≤–ª—è–µ—Ç—Å—è —Å–º–µ—â–µ–Ω–∏–µ. –ó–∞—Ç–µ–º –∏–¥–µ—Ç –∞–∫—Ç–∏–≤–∞—Ü–∏–æ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è. –†–µ–∑—É–ª—å—Ç–∏—Ä—É—é—â–∏–π –≤–µ–∫—Ç–æ—Ä —É–º–Ω–æ–∂–∞–µ—Ç—Å—è –Ω–∞ –≤—Ç–æ—Ä—É—é –≤–µ—Å–æ–≤—É—é –º–∞—Ç—Ä–∏—Ü—É –∏ —Ç.–¥.&lt;/p&gt;
&lt;p&gt;–î—É–º–∞—é –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞ —è—Å–Ω–∞ :) –¢–µ–ø–µ—Ä—å –ø—Ä–æ–≤–µ—Ä–Ω–µ–º —Ç–æ –∂–µ —Å–∞–º–æ–µ, –Ω–æ –¥–ª—è –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞:&lt;/p&gt;
&lt;p&gt;&lt;em&gt;nn.h&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;cmath&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;array&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="k"&gt;namespace&lt;/span&gt; &lt;span class="n"&gt;nn&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

  &lt;span class="k"&gt;template&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="k"&gt;typename&lt;/span&gt; &lt;span class="n"&gt;T&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;size_t&lt;/span&gt; &lt;span class="n"&gt;N&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="k"&gt;using&lt;/span&gt; &lt;span class="n"&gt;o&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;std&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;array&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;T&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;N&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="k"&gt;template&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="k"&gt;typename&lt;/span&gt; &lt;span class="n"&gt;T&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;size_t&lt;/span&gt; &lt;span class="n"&gt;N&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="k"&gt;using&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="n"&gt;o&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;T&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;N&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="k"&gt;template&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="k"&gt;typename&lt;/span&gt; &lt;span class="n"&gt;T&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;size_t&lt;/span&gt; &lt;span class="n"&gt;N&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;size_t&lt;/span&gt; &lt;span class="n"&gt;K&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="k"&gt;using&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;T&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;K&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;N&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="k"&gt;template&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="k"&gt;typename&lt;/span&gt; &lt;span class="n"&gt;T&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;size_t&lt;/span&gt; &lt;span class="n"&gt;N&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;size_t&lt;/span&gt; &lt;span class="n"&gt;K&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="n"&gt;dot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;T&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;N&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;K&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;T&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;N&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;o&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;T&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;K&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;o&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;size_t&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;K&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
      &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;r&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;o&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;at&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;r&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;N&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;o&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;at&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;at&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="p"&gt;).&lt;/span&gt;&lt;span class="n"&gt;at&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;at&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;

  &lt;span class="k"&gt;template&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="k"&gt;typename&lt;/span&gt; &lt;span class="n"&gt;T&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;size_t&lt;/span&gt; &lt;span class="n"&gt;N&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="n"&gt;relu&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;o&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;T&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;N&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="n"&gt;T&lt;/span&gt; &lt;span class="n"&gt;zero&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;size_t&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;N&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
      &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;at&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;std&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;max&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;at&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;zero&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;

  &lt;span class="k"&gt;template&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="k"&gt;typename&lt;/span&gt; &lt;span class="n"&gt;T&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;size_t&lt;/span&gt; &lt;span class="n"&gt;N&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="n"&gt;add&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;T&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;N&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;o&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;T&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;N&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;size_t&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;N&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
      &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;at&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;at&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;at&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;

  &lt;span class="k"&gt;template&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="k"&gt;typename&lt;/span&gt; &lt;span class="n"&gt;T&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;size_t&lt;/span&gt; &lt;span class="n"&gt;N&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="n"&gt;sigmoid&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;o&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;T&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;N&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="n"&gt;T&lt;/span&gt; &lt;span class="n"&gt;one&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;size_t&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;N&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
      &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;at&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;one&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;one&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;std&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;exp&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;at&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;)));&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="c1"&gt;// namespace&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;em&gt;app.cpp&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;float32.hpp&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;nn.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;draw.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="k"&gt;using&lt;/span&gt; &lt;span class="n"&gt;flt&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;float32&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;float&lt;/span&gt; &lt;span class="nf"&gt;inference&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="n"&gt;flt&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;x1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="n"&gt;flt&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;x2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="n"&gt;nn&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;flt&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;W1&lt;/span&gt;
  &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mf"&gt;0.100219101&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mf"&gt;0.0986418799&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mf"&gt;0.0540673025&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mf"&gt;0.101571321&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mf"&gt;0.055912815&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mf"&gt;0.0540193357&lt;/span&gt;
  &lt;span class="p"&gt;};&lt;/span&gt;
  &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="n"&gt;nn&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;flt&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;B1&lt;/span&gt;
  &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="mf"&gt;0.101785883&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mf"&gt;0.0555998087&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mf"&gt;7.84907461e-05&lt;/span&gt;
  &lt;span class="p"&gt;};&lt;/span&gt;
  &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="n"&gt;nn&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;flt&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;W2&lt;/span&gt;
  &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mf"&gt;85.8035507&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mf"&gt;90.0149384&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mf"&gt;87.0291138&lt;/span&gt;
  &lt;span class="p"&gt;};&lt;/span&gt;
  &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="n"&gt;nn&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;flt&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;B2&lt;/span&gt;
  &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="mf"&gt;4.28154087&lt;/span&gt;
  &lt;span class="p"&gt;};&lt;/span&gt;

  &lt;span class="c1"&gt;// Inputs&lt;/span&gt;
  &lt;span class="n"&gt;nn&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;flt&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="n"&gt;x1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;x2&lt;/span&gt;&lt;span class="p"&gt;};&lt;/span&gt;

  &lt;span class="c1"&gt;// First layer has 3 units&lt;/span&gt;
  &lt;span class="n"&gt;nn&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;o&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;flt&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;L1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;nn&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;dot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;W1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;L1&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;nn&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;add&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;B1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;L1&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;nn&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;relu&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;L1&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

  &lt;span class="c1"&gt;// Second layer has 1 unit&lt;/span&gt;
  &lt;span class="n"&gt;nn&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;o&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;flt&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;L2&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;nn&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;dot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;W2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;L1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;L2&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;nn&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;add&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;B2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;L2&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;nn&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;sigmoid&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;L2&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;L2&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;at&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="k"&gt;namespace&lt;/span&gt; &lt;span class="n"&gt;app&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

  &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;run&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;draw&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;flt&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;draw&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;PAGE_0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;inference&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
    &lt;span class="n"&gt;draw&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;flt&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;draw&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;PAGE_2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;inference&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
    &lt;span class="n"&gt;draw&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;flt&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;draw&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;PAGE_4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;inference&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
    &lt;span class="n"&gt;draw&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;flt&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;draw&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;PAGE_6&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;inference&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ —Å–ª–æ–∂–Ω—ã—Ö –Ω–µ–π—Ä–æ–Ω–Ω—ã—Ö —Å–µ—Ç–µ–π –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å –±–æ–ª—å—à–∏—Ö –≤—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω—ã—Ö –º–æ—â–Ω–æ—Å—Ç–µ–π. –ó–¥–µ—Å—å –Ω–∞ –ø–æ–º–æ—â—å –ø—Ä–∏—Ö–æ–¥—è—Ç –≥–æ—Ç–æ–≤—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –¥–ª—è –º–∞—à–∏–Ω–Ω–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è —Ç–∞–∫–∏–µ –∫–∞–∫ Tensorflow. –° –∏—Ö –ø–æ–º–æ—â—å—é –º–æ–∂–Ω–æ –æ–±—É—á–∞—Ç—å –Ω–µ–π—Ä–æ–Ω–Ω—ã–µ —Å–µ—Ç–∏ –Ω–∞ –≤–∏–¥–µ–æ–∫–∞—Ä—Ç–∞—Ö, –≤ –æ–±–ª–∞–∫–µ, –∏ –¥–∞–∂–µ –≤ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö –∫–ª–∞—Å—Ç–µ—Ä–∞—Ö, —Å–æ—Å—Ç–æ—è—â–∏—Ö –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –≤—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω—ã—Ö –µ–¥–∏–Ω–∏—Ü. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±—É—á–µ–Ω–Ω—É—é –º–æ–¥–µ–ª—å –º–æ–∂–Ω–æ –Ω–∞ –≥–¥–µ-—É–≥–æ–¥–Ω–æ, –¥–∞–∂–µ –Ω–∞ –æ—á–µ–Ω—å —Å–ª–∞–±—ã—Ö –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞—Ö.&lt;/p&gt;</content><category term="msp430"></category><category term="ai"></category></entry><entry><title>–ú–∏–≥–∞–µ–º —Å–≤–µ—Ç–æ–¥–∏–æ–¥–æ–º –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é | cron</title><link href="http://proiot.ru/blog/posts/2019/07/28/migaem-svetodiodom-po-raspisaniiu-cron/" rel="alternate"></link><published>2019-07-28T00:00:00+03:00</published><updated>2019-07-28T00:00:00+03:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2019-07-28:/blog/posts/2019/07/28/migaem-svetodiodom-po-raspisaniiu-cron/</id><summary type="html">&lt;p&gt;–ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ä–µ–≥—É–ª—è—Ä–Ω–æ –≤—ã–ø–æ–ª–Ω—è–µ–º—ã–µ –∑–∞–¥–∞—á–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Å–≤–µ—â–µ–Ω–∏–µ–º, –æ—Ç–æ–ø–ª–µ–Ω–∏–µ–º, –ø–æ–ª–∏–≤–æ–º –∏ —Ç.–ø, –æ—Ç–Ω–∏–º–∞—é—Ç —É –Ω–∞—Å –¥–æ–≤–æ–ª—å–Ω–æ –º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏, –∫–æ—Ç–æ—Ä–æ–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å –≥–æ—Ä–∞–∑–¥–æ –±–æ–ª—å—à–µ–π –ø–æ–ª—å–∑–æ–π. –ò–º–µ—è –≤ —Ä–∞—Å–ø–æ—Ä—è–∂–µ–Ω–∏–∏ –∫–∞–∫–æ–π-–Ω–∏–±—É–¥—å –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä —Å–æ–≤—Å–µ–º –Ω–µ—Ç—Ä—É–¥–Ω–æ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —É–∫–∞–∑–∞–Ω–Ω—ã—Ö –∑–∞–¥–∞—á, –ø—Ä–∏—á–µ–º –¥–µ–ª–∞—Ç—å –≤ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ –¥–ª—è —Ä–∞–±–æ—Ç—ã –≤—Ä–µ–º—è. –ú–æ–∂–Ω–æ –Ω–∞–ø—Ä–∏–º–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–∫–ª—é—á–∞—Ç—å —Å–≤–µ—Ç –¥–Ω—ë–º ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;p&gt;–ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ä–µ–≥—É–ª—è—Ä–Ω–æ –≤—ã–ø–æ–ª–Ω—è–µ–º—ã–µ –∑–∞–¥–∞—á–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Å–≤–µ—â–µ–Ω–∏–µ–º, –æ—Ç–æ–ø–ª–µ–Ω–∏–µ–º, –ø–æ–ª–∏–≤–æ–º –∏ —Ç.–ø, –æ—Ç–Ω–∏–º–∞—é—Ç —É –Ω–∞—Å –¥–æ–≤–æ–ª—å–Ω–æ –º–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏, –∫–æ—Ç–æ—Ä–æ–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å –≥–æ—Ä–∞–∑–¥–æ –±–æ–ª—å—à–µ–π –ø–æ–ª—å–∑–æ–π. –ò–º–µ—è –≤ —Ä–∞—Å–ø–æ—Ä—è–∂–µ–Ω–∏–∏ –∫–∞–∫–æ–π-–Ω–∏–±—É–¥—å –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä —Å–æ–≤—Å–µ–º –Ω–µ—Ç—Ä—É–¥–Ω–æ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —É–∫–∞–∑–∞–Ω–Ω—ã—Ö –∑–∞–¥–∞—á, –ø—Ä–∏—á–µ–º –¥–µ–ª–∞—Ç—å –≤ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ –¥–ª—è —Ä–∞–±–æ—Ç—ã –≤—Ä–µ–º—è. –ú–æ–∂–Ω–æ –Ω–∞–ø—Ä–∏–º–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–∫–ª—é—á–∞—Ç—å —Å–≤–µ—Ç –¥–Ω—ë–º, –æ—Ç–æ–ø–ª–µ–Ω–∏–µ –≤ –ª–µ—Ç–Ω–∏–µ –º–µ—Å—è—Ü—ã –∏ –¥–∞–∂–µ –≤ –∑–∏–º–Ω–∏–µ.&lt;/p&gt;
&lt;p&gt;–õ—é–±–æ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å Linux –∫–æ–≥–¥–∞-–Ω–∏–±—É–¥—å —Å–ª—ã—à–∞–ª –æ &lt;strong&gt;cron&lt;/strong&gt; ‚Äì —Å–µ—Ä–≤–∏—Å–µ (–¥–µ–º–æ–Ω–µ), –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –ø–æ–≤—Ç–æ—Ä—è—é—â–∏—Ö—Å—è –∑–∞–¥–∞–Ω–∏–π –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é, –∑–∞–¥–∞–≤–∞–µ–º–æ–≥–æ –ø–æ –∫–∞–ª–µ–Ω–¥–∞—Ä–Ω–æ–º—É –≤—Ä–µ–º–µ–Ω–∏. –ü—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω —Ç–∞–∫–∂–µ –Ω–µ–æ–¥–Ω–æ–∫—Ä–∞—Ç–Ω—ã–π –∑–∞–ø—É—Å–∫ –∑–∞–¥–∞–Ω–∏–π, —Ç.–µ. –∑–∞–¥–∞–Ω–∏–µ –º–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è –∏–ª–∏ —á–µ—Ä–µ–∑ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π –ø—Ä–æ–º–µ–∂—É—Ç–æ–∫ –≤—Ä–µ–º–µ–Ω–∏. –î–µ–º–æ–Ω –∏–º–µ–µ—Ç –ø—Ä–æ—Å—Ç–æ–π, –ø–æ–Ω—è—Ç–Ω—ã–π –∏ —É–¥–∏–≤–∏—Ç–µ–ª—å–Ω–æ –≥–∏–±–∫–∏–π –¥–ª—è —Å–≤–æ–µ–π –∫–æ–º–ø–∞–∫—Ç–Ω–æ—Å—Ç–∏ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å, –∫–æ—Ç–æ—Ä—ã–π –¥–µ-—Ñ–∞–∫—Ç–æ —è–≤–ª—è–µ—Ç—Å—è —Å–≤–æ–µ–≥–æ —Ä–æ–¥–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–æ–º –≤ –º–∏—Ä–µ Unix –∏ –∫–∞–∫ —Å–ª–µ–¥—Å—Ç–≤–∏–µ –±–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–±—É—á–∞—é—â–∏—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏. –ë—ã–ª–æ –±—ã –∑–¥–æ—Ä–æ–≤–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–∞–∫–æ–π –∂–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –ø—Ä–∏ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏ –∑–∞–¥–∞—á –≤ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–µ, —á—Ç–æ–±—ã –Ω–µ –∑–∞–Ω–∏–º–∞—Ç—å—Å—è –∏–∑–æ–±—Ä–µ—Ç–µ–Ω–∏–µ–º —Å–≤–æ–µ–≥–æ –≤–µ–ª–æ—Å–∏–ø–µ–¥–∞.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://mazko.github.io/MSP430.js/87ea53d45e9b33bd2b91b8b48f309c89"&gt;MSP430.js&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2019/07/28/migaem-svetodiodom-po-raspisaniiu-cron/emcron.zip"&gt;–∏—Å—Ö–æ–¥–Ω–∏–∫–∏&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2019/07/28/migaem-svetodiodom-po-raspisaniiu-cron/ui.gif" style="width:50%; margin: 0 auto; display:block;"&gt;&lt;/p&gt;
&lt;p&gt;–í Linux –∫–∞–∂–¥—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–∏—Å—Ç–µ–º—ã –∏–º–µ–µ—Ç —Å–≤–æ–π —Ñ–∞–π–ª –∑–∞–¥–∞–Ω–∏–π &lt;strong&gt;crontab&lt;/strong&gt;, –≤ –∫–æ—Ç–æ—Ä–æ–º –æ–ø–∏—Å–∞–Ω–æ, –≤ –∫–∞–∫–æ–µ –≤—Ä–µ–º—è –∏ –∫–∞–∫–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã –∑–∞–ø—É—Å–∫–∞—Ç—å –æ—Ç –∏–º–µ–Ω–∏ —ç—Ç–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∞ —Ç–∞–∫–∂–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—â–∏–µ —Å—Ä–µ–¥—É –æ–∫—Ä—É–∂–µ–Ω–∏—è, –≤ –∫–æ—Ç–æ—Ä–æ–º –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∑–∞–¥–∞—á–∏ cron. –í –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–µ —á–∞—Å—Ç—å —ç—Ç–∏—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≤—ã–≥–ª—è–¥–∏—Ç —è–≤–Ω–æ –∏–∑–±—ã—Ç–æ—á–Ω–æ–π ‚Äì —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ —Ç–∞–º –Ω–µ—Ç —Ç–∞–∫–æ–≥–æ –ø–æ–Ω—è—Ç–∏—è, –∫–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å—Ä–µ–¥—ã –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–∞ –∏ –ø—Ä–æ–≥—Ä–∞–º–º—ã –∑–∞–ø—É—Å–∫–∞—Ç—å —Ç–æ–∂–µ –Ω–∞–≤—Ä—è–¥ –ª–∏ –ø–æ–ª—É—á–∏—Ç—Å—è. –ú–æ–∂–Ω–æ —É–ø—Ä–æ—Å—Ç–∏—Ç—å —Å–µ–±–µ –∂–∏–∑–Ω—å –∏ –ø—Ä–æ—Å—Ç–æ –æ–≥—Ä–∞–Ω–∏—á–∏—Ç—Å—è –∫–∞–∫–∏–º-–Ω–∏–±—É–¥—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º –≤—Ä–æ–¥–µ —Å–≤—è–∑–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞, —á—Ç–æ–±—ã –∏–º–µ—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–æ–π—Ç–∏—Å—å –ø–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É –∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è—Ç—å / —É–¥–∞–ª—è—Ç—å –∑–∞–¥–∞—á–∏ cron –≤ –Ω–µ–≥–æ –Ω–∞–ø—Ä–∏–º–µ—Ä –∏–∑ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏. –ù—É –∞ –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π cron —Å–æ–π–¥—ë—Ç –¥–∞–∂–µ –æ–±—ã—á–Ω—ã–π —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –º–∞—Å—Å–∏–≤ (–Ω–µ–ª—å–∑—è –∏–∑–º–µ–Ω—è—Ç—å —Ä–∞–∑–º–µ—Ä –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º—ã), –∑–∞–¥–∞–Ω–Ω—ã–π –Ω–∞ —ç—Ç–∞–ø–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏. –≠–ª–µ–º–µ–Ω—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —Å–æ–±—ã—Ç–∏—è ‚Äì –≤—ã—Ä–∞–∂–µ–Ω–∏—è cron, –∏ –¥–µ–π—Å—Ç–≤–∏—è. –î–µ–π—Å—Ç–≤–∏–µ –æ–ø–∏—Å—ã–≤–∞–µ—Ç —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –ø–µ—Ä–∏—Ñ–µ—Ä–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä —Å–≤–µ—Ç–æ–¥–∏–æ–¥) –∏ –≤ –∫–∞–∫–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –µ–≥–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–µ—Ä–µ–≤–µ—Å—Ç–∏.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;crond.c&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="k"&gt;struct&lt;/span&gt; &lt;span class="n"&gt;crond_job&lt;/span&gt; &lt;span class="n"&gt;jobs&lt;/span&gt;&lt;span class="p"&gt;[]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;expr&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;*/6 */2 * * * *&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;led&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="n"&gt;b0000011111&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="p"&gt;},&lt;/span&gt;
  &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;expr&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;2/6 */2 * * * *&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;led&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="n"&gt;b1111100000&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="p"&gt;},&lt;/span&gt;
  &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;expr&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;4/6 */2 * * * *&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;led&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="n"&gt;b1111111111&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="p"&gt;},&lt;/span&gt;

  &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;expr&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;*/6 1/2 * * * *&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;led&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="n"&gt;b1010101010&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="p"&gt;},&lt;/span&gt;
  &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;expr&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;2/6 1/2 * * * *&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;led&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="n"&gt;b0101010101&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="p"&gt;},&lt;/span&gt;
  &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;expr&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;4/6 1/2 * * * *&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;led&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="n"&gt;b1111111111&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="p"&gt;},&lt;/span&gt;
&lt;span class="p"&gt;};&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ö–∞–∫ –Ω–µ—Å–ª–æ–∂–Ω–æ —É–±–µ–¥–∏—Ç—å—Å—è –∫–∞–∂–¥–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ cron —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —à–µ—Å—Ç–∏ –ø–æ–ª–µ–π, —Ä–∞–∑–¥–µ–ª—è–µ–º—ã—Ö –ø—Ä–æ–±–µ–ª–∞–º–∏ –∏–ª–∏ —Ç–∞–±—É–ª—è—Ç–æ—Ä–∞–º–∏. –í —ç—Ç–∏—Ö –ø–æ–ª—è—Ö  –∑–∞–¥–∞—é—Ç –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (–°–µ–∫—É–Ω–¥–∞, –ú–∏–Ω—É—Ç–∞, –ß–∞—Å, –î–µ–Ω—å, –ú–µ—Å—è—Ü, –î–µ–Ω—å –Ω–µ–¥–µ–ª–∏), –≤ –Ω–∏—Ö –º–æ–∂–µ—Ç –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è —á–∏—Å–ª–æ, —Å–ø–∏—Å–æ–∫ —á–∏—Å–µ–ª, —Ä–∞–∑–¥–µ–ª—ë–Ω–Ω—ã—Ö –∑–∞–ø—è—Ç—ã–º–∏, —Å–∏–º–≤–æ–ª—ã &lt;code&gt;*&lt;/code&gt; –∏–ª–∏ &lt;code&gt;/&lt;/code&gt; –∏ –¥–∏–∞–ø–∞–∑–æ–Ω —á–∏—Å–µ–ª, —Ä–∞–∑–¥–µ–ª—ë–Ω–Ω—ã—Ö –¥–µ—Ñ–∏—Å–æ–º. –ú–µ—Å—è—Ü—ã –∏ –¥–Ω–∏ –Ω–µ–¥–µ–ª–∏ –º–æ–∂–Ω–æ —Ç–∞–∫–∂–µ –∑–∞–¥–∞–≤–∞—Ç—å –≤ 3-—Ö –±—É–∫–≤–µ–Ω–Ω–æ–º –≤–∞—Ä–∏–∞–Ω—Ç–µ:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;* * * * * *     –î–µ–π—Å—Ç–≤–∏–µ (—É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ü–≤–µ—Ç RGB —Å–≤–µ—Ç–æ–¥–∏–æ–¥–æ–≤ —Å 1 –ø–æ 10)
| | | | | |
| | | | | ----- –î–µ–Ω—å –Ω–µ–¥–µ–ª–∏ (0 - 6) (0 —ç—Ç–æ –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ)
| | | | ------- –ú–µ—Å—è—Ü (1 - 12)
| | | --------- –î–µ–Ω—å (1 - 31)
| | ----------- –ß–∞—Å (0 - 23)
| ------------- –ú–∏–Ω—É—Ç–∞ (0 - 59)
--------------- –°–µ–∫—É–Ω–¥–∞ (0 - 59)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–°–∏–º–≤–æ–ª &lt;code&gt;*&lt;/code&gt; –ø–æ–¥—Ä–∞–∑—É–º–µ–≤–∞–µ—Ç –ª—é–±–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ. –ö–∞–∂–¥—É—é —Å–µ–∫—É–Ω–¥—É:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;* * * * * *
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ö–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 03:15:00:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;0 15 3 * * *
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ö–∞–∂–¥—ã–π –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;0 0 0 * * 1
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ö–∞–∂–¥—ã–π —á–µ—Ç–Ω—ã–π —á–∞—Å:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;0 0 */2 * * *
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–¢–æ–∂–µ —á—Ç–æ –∏ –≤—ã—à–µ, –Ω–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–Ω–æ–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;0 0 0,2,4,6,8,10,12,14,16,18,20,22 * * *
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ö–∞–∂–¥—ã–π –±—É–¥–Ω–∏–π –¥–µ–Ω—å –≤ 22:00:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;0 0 22 * * 1-5
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ù–æ–≤—ã–π –≥–æ–¥:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;59 59 23 31 dec *
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–í—Å–µ —É—Å–ª–æ–≤–∏—è (–≤—Ä–µ–º–µ–Ω–∏ –∑–∞–ø—É—Å–∫–∞) –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è –ø–æ ¬´–ª–æ–≥–∏—á–µ—Å–∫–æ–º—É –ò¬ª, –∫—Ä–æ–º–µ —É—Å–ª–æ–≤–∏–π ¬´–¥–µ–Ω—å –Ω–µ–¥–µ–ª–∏¬ª –∏ ¬´–¥–µ–Ω—å –º–µ—Å—è—Ü–∞¬ª ‚Äì —É–∫–∞–∑–∞–Ω–Ω—ã–µ —Å–æ–≤–º–µ—Å—Ç–Ω–æ, –æ–Ω–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –ø–æ ¬´–ª–æ–≥–∏—á–µ—Å–∫–æ–º—É –ò–õ–ò¬ª, —Ç–æ –µ—Å—Ç—å ¬´–ø–æ –ª—é–±–æ–º—É –∏–∑ –¥–Ω–µ–π¬ª, —á—Ç–æ –æ—Ç—Ä–∞–∂–µ–Ω–æ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ (Ubuntu, Debian, FreeBSD). –û–¥–Ω–∞–∫–æ —Ç–∞–∫–∞—è –ª–æ–≥–∏–∫–∞ –Ω–µ–æ—á–µ–≤–∏–¥–Ω–∞ –∏ –Ω–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞—Ç—å —É—Å–ª–æ–≤–∏–µ —Ç–∏–ø–∞ ¬´–ø–µ—Ä–≤—ã–π –ø–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫ –∫–∞–∂–¥–æ–≥–æ –º–µ—Å—è—Ü–∞¬ª –∏–ª–∏ ¬´–∫–∞–∂–¥—É—é –ø—è—Ç–Ω–∏—Ü—É –≤ 13 —á–∏—Å–ª–æ¬ª. –†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –Ω–µ –∏–∑–º–µ–Ω—è—é—Ç –¥–∞–Ω–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ, —Å—á–∏—Ç–∞—è –µ–≥–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–æ–º.&lt;/p&gt;
&lt;p&gt;–¢–∞–∫–∂–µ —Å—Ç–æ–∏—Ç –ø–æ–º–Ω–∏—Ç—å –æ –ø–µ—Ä–µ—Ö–æ–¥–µ –Ω–∞ –ª–µ—Ç–Ω–µ–µ / –∑–∏–º–Ω–µ–µ –≤—Ä–µ–º—è. –¢—É—Ç –Ω–µ—Ç –µ–¥–∏–Ω–æ–≥–æ –º–Ω–µ–Ω–∏—è –∏ —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ cron –º–æ–≥—É—Ç –≤–µ—Å—Ç–∏ —Å–µ–±—è –ø–æ —Ä–∞–∑–Ω–æ–º—É. –í Unix —Å–∏—Å—Ç–µ–º–∞—Ö –µ—Å—Ç—å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ Anacron, –∫–æ—Ç–æ—Ä—ã–π –≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç cron –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∑–∞–ø—É—Å–∫ –∑–∞–¥–∞–Ω–∏–π –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é, –≤–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è —Å –∑–∞–¥–∞–Ω–Ω—ã–º –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º –≤—Ä–µ–º–µ–Ω–∏. –≠—Ç–æ –æ—á–µ–Ω—å —É–¥–æ–±–Ω–æ –¥–ª—è —Å–∏—Å—Ç–µ–º –∫–æ—Ç–æ—Ä—ã–µ —Ä–∞–±–æ—Ç–∞—é—Ç –Ω–µ —Ä–µ–≥—É–ª—è—Ä–Ω–æ, –Ω–∞–ø—Ä–∏–º–µ—Ä –¥–æ–º–∞—à–Ω–∏–µ —Ä–∞–±–æ—á–∏–µ —Å—Ç–∞–Ω—Ü–∏–∏ –∏–ª–∏ –Ω–æ—É—Ç–±—É–∫–∏.&lt;/p&gt;</content><category term="msp430"></category><category term="cron"></category></entry><entry><title>–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç ¬´Smart Config¬ª</title><link href="http://proiot.ru/blog/posts/2018/09/09/kak-rabotaet-smart-config/" rel="alternate"></link><published>2018-09-09T00:00:00+03:00</published><updated>2018-09-09T00:00:00+03:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2018-09-09:/blog/posts/2018/09/09/kak-rabotaet-smart-config/</id><summary type="html">&lt;p&gt;–û–±—ã—á–Ω–æ –ø—Ä–æ—Ü–µ–¥—É—Ä–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞) –∫ Wi-Fi –≤—ã–≥–ª—è–¥–∏—Ç —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º: —Ç–µ–ª–µ—Ñ–æ–Ω –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ø–æ–∏—Å–∫ —Å–µ—Ç–µ–π Wi-Fi, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç —Å–µ—Ç—å, –≤–≤–æ–¥–∏—Ç –ø–∞—Ä–æ–ª—å. –ï—Å–ª–∏ –∂–µ –≥–æ–≤–æ—Ä–∏—Ç—å –æ–± —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö IoT, —Ç—Ä—É–¥–Ω–æ—Å—Ç—å –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ç–æ–º, —á—Ç–æ –º–Ω–æ–≥–∏–µ –∏–∑ –Ω–∏—Ö –Ω–µ –∏–º–µ—é—Ç –¥–∏—Å–ø–ª–µ—è –∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã, –∞ –∑–∞—á–∞—Å—Ç—É—é —É –Ω–∏—Ö –≤–æ–æ–±—â–µ –Ω–µ—Ç ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;p&gt;–û–±—ã—á–Ω–æ –ø—Ä–æ—Ü–µ–¥—É—Ä–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞) –∫ Wi-Fi –≤—ã–≥–ª—è–¥–∏—Ç —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º: —Ç–µ–ª–µ—Ñ–æ–Ω –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ø–æ–∏—Å–∫ —Å–µ—Ç–µ–π Wi-Fi, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç —Å–µ—Ç—å, –≤–≤–æ–¥–∏—Ç –ø–∞—Ä–æ–ª—å. –ï—Å–ª–∏ –∂–µ –≥–æ–≤–æ—Ä–∏—Ç—å –æ–± —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö IoT, —Ç—Ä—É–¥–Ω–æ—Å—Ç—å –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ç–æ–º, —á—Ç–æ –º–Ω–æ–≥–∏–µ –∏–∑ –Ω–∏—Ö –Ω–µ –∏–º–µ—é—Ç –¥–∏—Å–ø–ª–µ—è –∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã, –∞ –∑–∞—á–∞—Å—Ç—É—é —É –Ω–∏—Ö –≤–æ–æ–±—â–µ –Ω–µ—Ç –Ω–∏–∫–∞–∫–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞. –¢–∞–∫–∏–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º –Ω—É–∂–Ω—ã –¥—Ä—É–≥–∏–µ —Å–ø–æ—Å–æ–±—ã –ø–æ–ª—É—á–µ–Ω–∏—è –∏–º–µ–Ω–∏ —Å–µ—Ç–∏ –∏ –ø–∞—Ä–æ–ª—è –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.&lt;/p&gt;
&lt;p&gt;–†–µ–∂–∏–º —Ç–æ—á–∫–∏ –¥–æ—Å—Ç—É–ø–∞ (Access Point, AP) ‚Äî –Ω–∞–∏–±–æ–ª–µ–µ –∏–∑—É—á–µ–Ω–Ω—ã–π —Å–µ–≥–æ–¥–Ω—è —Å–ø–æ—Å–æ–± –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤, –Ω–µ –∏–º–µ—é—â–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞. –ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–¥–∫–ª—é—á–∏—Ç —Å–≤–æ–π —Å–º–∞—Ä—Ç—Ñ–æ–Ω –∫ AP –Ω–µ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞, –æ–Ω –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –≤–µ–±-–±—Ä–∞—É–∑–µ—Ä —Å–º–∞—Ä—Ç—Ñ–æ–Ω–∞ –∏ –≤—Ö–æ–¥–∏—Ç –Ω–∞ –≤–µ–±-—Å–∞–π—Ç —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞, –∏—Å–ø–æ–ª—å–∑—É—è –∑–∞–¥–∞–Ω–Ω—ã–π –ª–æ–∫–∞–ª—å–Ω—ã–π URL –∏–ª–∏ IP-–∞–¥—Ä–µ—Å. –ù–∞ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–º –≤–µ–±-—Å–∞–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç –∏–º—è Wi-Fi —Å–µ—Ç–∏ –∏ –ø–∞—Ä–æ–ª—å. –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å–µ—Ç–µ–≤—ã–µ —Ä–µ–∫–≤–∏–∑–∏—Ç—ã –≤ —ç–Ω–µ—Ä–≥–æ–Ω–µ–∑–∞–≤–∏—Å–∏–º–æ–π –ø–∞–º—è—Ç–∏, –∞ –∑–∞—Ç–µ–º –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –∏–∑ —Ä–µ–∂–∏–º–∞ AP –≤ —Ä–µ–∂–∏–º —Å—Ç–∞–Ω—Ü–∏–∏, —á—Ç–æ–±—ã –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –¥–æ–º–∞—à–Ω–µ–π —Å–µ—Ç–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö —Å–µ—Ç–µ–≤—ã—Ö —Ä–µ–∫–≤–∏–∑–∏—Ç–æ–≤. –ù–µ–¥–æ—Å—Ç–∞—Ç–æ–∫ —Ä–µ–∂–∏–º–∞ AP –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ç–æ–º, —á—Ç–æ –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –∫ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–µ—Ç–∏ AP –Ω–µ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ —Ç–µ–ª–µ—Ñ–æ–Ω –æ—Ç–∫–ª—é—á–∞–µ—Ç—Å—è –æ—Ç –¥–æ–º–∞—à–Ω–µ–π —Å–µ—Ç–∏. –≠—Ç–æ –º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å –ø–µ—Ä–µ—Ä—ã–≤—ã –≤ –ø–µ—Ä–µ–¥–∞—á–µ –¥–∞–Ω–Ω—ã—Ö –∏ –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –ø–æ—è–≤–ª–µ–Ω–∏—é —Å–æ–æ–±—â–µ–Ω–∏–π –æ–± –æ—à–∏–±–∫–∞—Ö. –¢–∞–∫–∂–µ –Ω–µ –≤—Å–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–∏ —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç API –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è Wi-Fi —Å–µ—Ç–µ–π, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–Ω—É–∂–¥–µ–Ω —ç—Ç–æ –¥–µ–ª–∞—Ç—å –≤—Ä—É—á–Ω—É—é.&lt;/p&gt;
&lt;p&gt;–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è ¬´Smart Config¬ª –ª–∏—à–µ–Ω–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–æ–≤. –û–Ω–∞ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ü–ö, —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –∏–ª–∏ –ø–ª–∞–Ω—à–µ—Ç–∞ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–≤–µ—Å—Ç–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–µ—Ç–∏ —Å –ø–æ–º–æ—â—å—é –¥–∏—Å–ø–ª–µ—è –∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –ü–ö, —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –∏–ª–∏ –ø–ª–∞–Ω—à–µ—Ç–∞ —Å –ø–æ—Å–ª–µ–¥—É—é—â–µ–π –ø–µ—Ä–µ–¥–∞—á–µ–π –≤–≤–µ–¥—ë–Ω–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ IoT-—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º. –ò–∑ –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–π –Ω–∞ —Ç–µ–∫—É—â–∏–π –º–æ–º–µ–Ω—Ç —Å—Ç–æ–∏—Ç —É–ø–æ–º—è–Ω—É—Ç—å CC3200 SmartConfig –∏ ESP-Touch.&lt;/p&gt;
&lt;h2&gt;–ö–ê–ö –†–ê–ë–û–¢–ê–ï–¢&lt;/h2&gt;
&lt;p&gt;–ò—Ç–∞–∫ —É –Ω–∞—Å –µ—Å—Ç—å –¥–≤–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ ‚Äî –æ–¥–Ω–æ (—Ç–µ–ª–µ—Ñ–æ–Ω) —É–∂–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–æ –∫ Wi-Fi —Å–µ—Ç–∏, –∏ –¥—Ä—É–≥–æ–µ (IoT), –∫–æ—Ç–æ—Ä–æ–µ –Ω—É–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –∫ Wi-Fi —Å–µ—Ç–∏. IoT —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ —Å–∫–∞–Ω–∏—Ä—É–µ—Ç Wi-Fi —ç—Ñ–∏—Ä. –î–ª—è —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –¥–≤–∞  Wi-Fi –∞–¥–∞–ø—Ç–µ—Ä–∞, –º–æ–∂–Ω–æ –¥–∞–∂–µ –Ω–∞ –æ–¥–Ω–æ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ iwconfig &lt;span class="m"&gt;2&lt;/span&gt;&amp;gt; /dev/null
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–í—ã–≤–æ–¥:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;wlo1      IEEE 802.11  ESSID:&amp;quot;Dumer&amp;quot;  
          Mode:Managed  Frequency:2.447 GHz  Access Point: XX:XX:XX:XX:XX:XX   
          Bit Rate=121.5 Mb/s   Tx-Power=15 dBm   
          Retry short limit:7   RTS thr:off   Fragment thr:off
          Power Management:off
          Link Quality=61/70  Signal level=-49 dBm  
          Rx invalid nwid:0  Rx invalid crypt:0  Rx invalid frag:0
          Tx excessive retries:27  Invalid misc:3493   Missed beacon:0

wlxbcf68565bc38  IEEE 802.11  ESSID:off/any  
          Mode:Managed  Access Point: Not-Associated   Tx-Power=20 dBm   
          Retry short  long limit:2   RTS thr:off   Fragment thr:off
          Power Management:off
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ê–¥–∞–ø—Ç–µ—Ä wlo1 –ø–æ–¥–∫–ª—é—á—ë–Ω –∫ —Å–µ—Ç–∏ Dumer, wlxbcf68565bc38 –±—É–¥–µ—Ç —Å–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å —ç—Ñ–∏—Ä. –ö–∞–∫ –∏–∑–≤–µ—Å—Ç–Ω–æ —Å–µ—Ç–∫–∞ —á–∞—Å—Ç–æ—Ç Wi-Fi —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ &lt;a href="http://proiot.ru/blog/posts/2016/07/17/ishchem-svobodnye-wi-fi-kanaly-s-pomoshchiu-gnuplot/"&gt;14 –∫–∞–Ω–∞–ª–æ–≤&lt;/a&gt;, –¥–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã –±—É–¥–µ–º —Å–ª—É—à–∞—Ç—å —Ç–æ–ª—å–∫–æ —Ç–æ—Ç (8), –∫ –∫–æ—Ç–æ—Ä–æ–º—É –ø–æ–¥–∫–ª—é—á—ë–Ω wlo1.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ iwlist wlo1 channel
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–í—ã–≤–æ–¥:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;wlo1      14 channels in total; available frequencies :
          Channel 01 : 2.412 GHz
          Channel 02 : 2.417 GHz
          Channel 03 : 2.422 GHz
          Channel 04 : 2.427 GHz
          Channel 05 : 2.432 GHz
          Channel 06 : 2.437 GHz
          Channel 07 : 2.442 GHz
          Channel 08 : 2.447 GHz
          Channel 09 : 2.452 GHz
          Channel 10 : 2.457 GHz
          Channel 11 : 2.462 GHz
          Channel 12 : 2.467 GHz
          Channel 13 : 2.472 GHz
          Channel 14 : 2.484 GHz
          Current Frequency=2.447 GHz (Channel 8)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ü–µ—Ä–µ–≤–µ–¥—ë–º –∞–¥–∞–ø—Ç–µ—Ä –≤ —Ä–µ–∂–∏–º —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ ifconfig wlxbcf68565bc38 down
~$ iwconfig wlxbcf68565bc38 mode monitor
~$ ifconfig wlxbcf68565bc38 up
~$ iwconfig wlxbcf68565bc38 channel &lt;span class="m"&gt;8&lt;/span&gt;
~$ iwlist wlxbcf68565bc38 channel
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ü—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç —ç—Ñ–∏—Ä Wi-Fi –≤ WireShark:&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2018/09/09/kak-rabotaet-smart-config/wirshark.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;MAC –∞–¥—Ä–µ—Å–∞ –∏ –∫–æ–µ-–∫–∞–∫–∞—è –¥—Ä—É–≥–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –≤ Wi-Fi —Ñ—Ä–µ–π–º–∞—Ö –∏–¥—ë—Ç –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –≤–∏–¥–µ –±–µ–∑ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è. –ü–æ–ª–µ–∑–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤–Ω—É—Ç—Ä–∏ Wi-Fi —Ñ—Ä–µ–π–º–∞ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω—ã, –Ω–æ –º—ã –≤–∏–¥–∏–º –∏—Ö –¥–ª–∏–Ω—É. –ï—Å–ª–∏ –ø—Ä–µ–¥–ø–æ–ª–æ–∂–∏—Ç—å, —á—Ç–æ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω—è–µ—Ç –¥–ª–∏–Ω—É –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –∫–∞–∫—É—é-—Ç–æ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—É, –ø–æ—á–µ–º—É –±—ã –Ω–µ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –º–µ–Ω—è—è –¥–ª–∏–Ω—É –ø–∞–∫–µ—Ç–∞ –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø—É –æ–¥–∏–Ω –ø–∞–∫–µ—Ç == –æ–¥–∏–Ω –±–∞–π—Ç. –î–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ 42 –±–∞–π—Ç –Ω—É–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å 42 –ø–∞–∫–µ—Ç–∞ –≥–¥–µ –¥–ª–∏–Ω–∞ –∫–∞–∂–¥–æ–≥–æ –ø–∞–∫–µ—Ç–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∑–Ω–∞—á–µ–Ω–∏—è –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º–æ–≥–æ –±–∞–π—Ç–∞. –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–∞–∫–µ—Ç–∞ –Ω–∞—Å –Ω–µ –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç —Ç.–∫. —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∞—Ç—å –µ–≥–æ –º–æ–≥—É—Ç —Ç–æ–ª—å–∫–æ —É—á–∞—Å—Ç–Ω–∏–∫–∏ Wi-Fi —Å–µ—Ç–∏, –ø–æ–¥–∫–ª—é—á—ë–Ω–Ω—ã–µ –∫ —Ä–æ—É—Ç–µ—Ä—É. –í—Å–µ —Å–∫—Ä–∏–ø—Ç—ã –ø—Ä–æ–≤–µ—Ä—è–ª–∏—Å—å –Ω–∞ &lt;strong&gt;python3&lt;/strong&gt;:&lt;/p&gt;
&lt;p&gt;&lt;em&gt;transmitter.py&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="ch"&gt;#!/usr/bin/python3&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;socket&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;binascii&lt;/span&gt;

&lt;span class="n"&gt;MCAST_GRP&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;234.42.42.42&amp;#39;&lt;/span&gt;
&lt;span class="n"&gt;MCAST_PORT&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;7001&lt;/span&gt;

&lt;span class="n"&gt;sock&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;socket&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;socket&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;socket&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;AF_INET&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;socket&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;SOCK_DGRAM&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;socket&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;IPPROTO_UDP&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;sock&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;setsockopt&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;socket&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;IPPROTO_IP&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;socket&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;IP_MULTICAST_TTL&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;crc8&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
  &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;binascii&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;crc32&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="mh"&gt;0xFF&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;transmit_one_byte&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
  &lt;span class="k"&gt;assert&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="k"&gt;assert&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="mi"&gt;548&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="c1"&gt;# 576(MTU) - 20(IP) - 8(UDP)&lt;/span&gt;
  &lt;span class="n"&gt;data&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;bytes&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="n"&gt;sock&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sendto&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;MCAST_GRP&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;MCAST_PORT&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;

&lt;span class="n"&gt;preamble&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;515&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;514&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;513&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;512&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="n"&gt;payload&lt;/span&gt;  &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="sa"&gt;b&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;hello world!&amp;#39;&lt;/span&gt;

&lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="bp"&gt;True&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
  &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;preamble&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;transmit_one_byte&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="n"&gt;transmit_one_byte&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;payload&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
  &lt;span class="n"&gt;transmit_one_byte&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;crc8&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;payload&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
  &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;payload&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;transmit_one_byte&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–í —Ç–µ–∫—É—â–µ–º –ø—Ä–∏–º–µ—Ä–µ –¥–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –Ω–∞ –º—É–ª—å—Ç–∏–∫–∞—Å—Ç –∞–¥—Ä–µ—Å 234.xx.xx.xx –ø–æ &lt;a href="http://proiot.ru/blog/posts/2017/10/03/setevoe-programmirovanie-udp-ntp-chasy/"&gt;UDP&lt;/a&gt;. –í–Ω–∞—á–∞–ª–µ –∏–¥—ë—Ç —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ø–æ—Å—ã–ª–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ preamble. –°–æ–¥–µ—Ä–∂–∏–º–æ–µ preamble —Ç–∞–∫–∂–µ –∏–∑–≤–µ—Å—Ç–Ω–æ –ø—Ä–∏—ë–º–Ω–∏–∫—É, —Å—Ä–∞–≤–Ω–∏–≤–∞—è –ø—Ä–∏–Ω—è—Ç—ã–µ –ø–∞–∫–µ—Ç—ã —Å preamble –æ–Ω –º–æ–∂–µ—Ç –≤—ã—Å—á–∏—Ç–∞—Ç—å –∫–æ–Ω—Å—Ç–∞–Ω—Ç—É, –¥–æ–±–∞–≤–ª—è–µ–º—É—é –ø—Ä–∏ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–∏. –ó–∞—Ç–µ–º –ø–µ—Ä–µ–¥–∞—ë–º –æ–±—â—É—é –¥–ª–∏–Ω—É –ø–æ–ª–µ–∑–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö, –∏—Ö –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—É—é —Å—É–º–º—É –∏ —Å–∞–º–∏ –¥–∞–Ω–Ω—ã–µ.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;receiver.py&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="ch"&gt;#!/usr/bin/python3&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;sys&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;binascii&lt;/span&gt;

&lt;span class="n"&gt;preamble&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;515&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;514&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;513&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;512&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;crc8&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
  &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;binascii&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;crc32&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="mh"&gt;0xFF&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;decode&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;crc&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
  &lt;span class="k"&gt;try&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;data&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;bytes&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;crc&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;crc8&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
      &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="k"&gt;except&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="k"&gt;pass&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;parse&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
  &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;idx&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;enumerate&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;idx&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;=&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;preamble&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
      &lt;span class="n"&gt;diff&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;set&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;k&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;zip&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;preamble&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;idx&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;preamble&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;&lt;span class="n"&gt;idx&lt;/span&gt;&lt;span class="p"&gt;]))&lt;/span&gt;
      &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;diff&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="ow"&gt;and&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;idx&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;diff&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pop&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
        &lt;span class="n"&gt;l&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;idx&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt;
        &lt;span class="n"&gt;payload&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;d&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;idx&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;idx&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;l&lt;/span&gt;&lt;span class="p"&gt;]]&lt;/span&gt;
        &lt;span class="n"&gt;decode&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;payload&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;:],&lt;/span&gt; &lt;span class="n"&gt;payload&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;

&lt;span class="n"&gt;received&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[]&lt;/span&gt;

&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;line&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;sys&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;stdin&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
  &lt;span class="n"&gt;line&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;line&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;strip&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
  &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;received&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;42&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;received&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pop&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;line&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;isdigit&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="n"&gt;received&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;line&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
    &lt;span class="n"&gt;parse&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;received&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–£ Wireshark –µ—Å—Ç—å –∫–æ–Ω—Å–æ–ª—å–Ω—ã–π –∞–Ω–∞–ª–æ–≥ tshark. –ó–∞–æ–¥–Ω–æ –æ—Ç—Ñ–∏–ª—å—Ç—Ä—É–µ–º —Ç–æ—á–Ω–æ –Ω–µ –Ω—É–∂–Ω—ã–µ –ø–∞–∫–µ—Ç—ã, –æ—Å—Ç–∞–≤–∏–≤ —Ç–æ–ª—å–∫–æ data:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ tshark -i wlxbcf68565bc38 -I -T fields -e data.len subtype data &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
   python3 receiver.py
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–í –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∑–∞—à—É–º–ª—ë–Ω–Ω–æ—Å—Ç–∏ —ç—Ñ–∏—Ä–∞ —á–∞—Å—Ç—å –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã—Ö –ø–∞–∫–µ—Ç–æ–≤ —Ç–µ—Ä—è–µ—Ç—Å—è –∏ —ç—Ç–æ –Ω–µ–∏–∑–±–µ–∂–Ω–æ. –î–ª—è —É–≤–µ–ª–∏—á–µ–Ω–∏—è –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ö–æ–¥ –•–µ–º–º–∏–Ω–≥–∞, –Ω–æ —ç—Ç–æ —É–∂–µ —É–¥–µ–ª –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—è —á–∏–ø–æ–≤ –∏ SDK —Å–æ ¬´Smart Config¬ª –Ω–∞ –±–æ—Ä—Ç—É.&lt;/p&gt;
&lt;p&gt;–ö–ª—é—á–µ–≤—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ ¬´Smart Config¬ª ‚Äî –ø—Ä–æ—Å—Ç–æ—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –±–µ—Å–ø—Ä–µ–ø—è—Ç—Å—Ç–≤–µ–Ω–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –≤ —Ç–µ–ª–µ—Ñ–æ–Ω–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞. –ö—Ä–æ–º–µ —Ç–æ–≥–æ, –µ—Å–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ Wi-Fi –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ —Ä–µ–∂–∏–º–µ ¬´Smart Config¬ª, –æ–¥–Ω–æ —Ç–µ–ª–µ—Ñ–æ–Ω–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –º–æ–∂–µ—Ç –æ–±–µ—Å–ø–µ—á–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∏—Ö –≤—Å–µ—Ö –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ.&lt;/p&gt;
&lt;p&gt;–û—Å–Ω–æ–≤–Ω–æ–π –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ–∫ —ç—Ç–æ–π —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ç–æ–º, —á—Ç–æ —Ç–µ–ª–µ—Ñ–æ–Ω –¥–æ–ª–∂–µ–Ω –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –∫ —Å–µ—Ç–∏, –∏—Å–ø–æ–ª—å–∑—É—è —Ç—É –ø–æ–ª–æ—Å—É —á–∞—Å—Ç–æ—Ç –∏ —Ç—É —Å–∫–æ—Ä–æ—Å—Ç—å –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –Ω–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ–º. –ß—Ç–æ –µ—Å–ª–∏ –Ω–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–∏–∞–ø–∞–∑–æ–Ω 2,4 –ì–ì—Ü, –∞ —Ç–µ–ª–µ—Ñ–æ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–ª—è —Å–≤—è–∑–∏ —Å –¥–≤—É—Ö–¥–∏–∞–ø–∞–∑–æ–Ω–Ω–æ–π —Å–µ—Ç—å—é –¥–∏–∞–ø–∞–∑–æ–Ω 5 –ì–ì—Ü ?&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2018/09/09/kak-rabotaet-smart-config/smartconfig.zip"&gt;–ò—Å—Ö–æ–¥–Ω–∏–∫–∏&lt;/a&gt;.&lt;/p&gt;</content><category term="Wi-Fi"></category></entry><entry><title>–°++ –¥–ª—è –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤ - ¬´–ù–∞–±–ª—é–¥–∞—Ç–µ–ª—å¬ª</title><link href="http://proiot.ru/blog/posts/2018/03/18/s-dlia-mikrokontrollerov-nabliudatel/" rel="alternate"></link><published>2018-03-18T00:00:00+02:00</published><updated>2018-03-18T00:00:00+02:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2018-03-18:/blog/posts/2018/03/18/s-dlia-mikrokontrollerov-nabliudatel/</id><summary type="html">&lt;p&gt;–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º –ø—Ä–∏—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å—Å—è –∫ &lt;a href="http://proiot.ru/blog/posts/2017/03/20/s-18-dlia-mikrokontrollerov-razvedka-boem/"&gt;C++ –¥–ª—è –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;–ù–∞–±–ª—é–¥–∞—Ç–µ–ª—å ‚Äì —ç—Ç–æ &lt;a href="http://proiot.ru/blog/posts/2017/03/22/s-dlia-mikrokontrollerov-dekorator/"&gt;–ø–∞—Ç—Ç–µ—Ä–Ω&lt;/a&gt; –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–∑–¥–∞—ë—Ç –º–µ—Ö–∞–Ω–∏–∑–º –ø–æ–¥–ø–∏—Å–∫–∏, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π –æ–¥–Ω–∏–º –æ–±—ä–µ–∫—Ç–∞–º —Å–ª–µ–¥–∏—Ç—å –∏ —Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Å–æ–±—ã—Ç–∏—è, –ø—Ä–æ–∏—Å—Ö–æ–¥—è—â–∏–µ –≤ –¥—Ä—É–≥–∏—Ö –æ–±—ä–µ–∫—Ç–∞—Ö. –î–∞–Ω–Ω—ã–π —à–∞–±–ª–æ–Ω —á–∞—Å—Ç–æ –ø—Ä–∏–º–µ–Ω—è—é—Ç –≤ —Å–∏—Ç—É–∞—Ü–∏—è—Ö, –≤ –∫–æ—Ç–æ—Ä—ã—Ö –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–µ –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç, —á—Ç–æ –¥–µ–ª–∞—é—Ç –ø–æ–ª—É—á–∞—Ç–µ–ª–∏ —Å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–π –∏–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2017/03/22/s-dlia-mikrokontrollerov-dekorator/"&gt;GoF&lt;/a&gt; –¥–∞—ë—Ç —Å–ª–µ–¥—É—é—â–µ–µ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;p&gt;–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º –ø—Ä–∏—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å—Å—è –∫ &lt;a href="http://proiot.ru/blog/posts/2017/03/20/s-18-dlia-mikrokontrollerov-razvedka-boem/"&gt;C++ –¥–ª—è –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;–ù–∞–±–ª—é–¥–∞—Ç–µ–ª—å ‚Äì —ç—Ç–æ &lt;a href="http://proiot.ru/blog/posts/2017/03/22/s-dlia-mikrokontrollerov-dekorator/"&gt;–ø–∞—Ç—Ç–µ—Ä–Ω&lt;/a&gt; –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–∑–¥–∞—ë—Ç –º–µ—Ö–∞–Ω–∏–∑–º –ø–æ–¥–ø–∏—Å–∫–∏, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π –æ–¥–Ω–∏–º –æ–±—ä–µ–∫—Ç–∞–º —Å–ª–µ–¥–∏—Ç—å –∏ —Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Å–æ–±—ã—Ç–∏—è, –ø—Ä–æ–∏—Å—Ö–æ–¥—è—â–∏–µ –≤ –¥—Ä—É–≥–∏—Ö –æ–±—ä–µ–∫—Ç–∞—Ö. –î–∞–Ω–Ω—ã–π —à–∞–±–ª–æ–Ω —á–∞—Å—Ç–æ –ø—Ä–∏–º–µ–Ω—è—é—Ç –≤ —Å–∏—Ç—É–∞—Ü–∏—è—Ö, –≤ –∫–æ—Ç–æ—Ä—ã—Ö –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–µ –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç, —á—Ç–æ –¥–µ–ª–∞—é—Ç –ø–æ–ª—É—á–∞—Ç–µ–ª–∏ —Å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–π –∏–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2017/03/22/s-dlia-mikrokontrollerov-dekorator/"&gt;GoF&lt;/a&gt; –¥–∞—ë—Ç —Å–ª–µ–¥—É—é—â–µ–µ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ: –Ω–∞–±–ª—é–¥–∞—Ç–µ–ª—å (–∞–Ω–≥–ª. Observer) ‚Äì –ø–∞—Ç—Ç–µ—Ä–Ω –ø–æ–≤–µ–¥–µ–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤. –û–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å —Ç–∏–ø–∞ ¬´–æ–¥–∏–Ω –∫–æ –º–Ω–æ–≥–∏–º¬ª –º–µ–∂–¥—É –æ–±—ä–µ–∫—Ç–∞–º–∏ —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —á—Ç–æ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –æ–¥–Ω–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ –≤—Å–µ –∑–∞–≤–∏—Å—è—â–∏–µ –æ—Ç –Ω–µ–≥–æ –æ–ø–æ–≤–µ—â–∞—é—Ç—Å—è –æ–± —ç—Ç–æ–º –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è.&lt;/p&gt;
&lt;p&gt;–ê–Ω–∞–ª–æ–≥–∏—è –∏–∑ –∂–∏–∑–Ω–∏: –ø–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –≤—ã –æ—Ñ–æ—Ä–º–∏–ª–∏ –ø–æ–¥–ø–∏—Å–∫—É –Ω–∞ –≥–∞–∑–µ—Ç—É –∏–ª–∏ –∂—É—Ä–Ω–∞–ª, –≤–∞–º –±–æ–ª—å—à–µ –Ω–µ –Ω—É–∂–Ω–æ –µ–∑–¥–∏—Ç—å –≤ —Å—É–ø–µ—Ä–º–∞—Ä–∫–µ—Ç –∏ –ø—Ä–æ–≤–µ—Ä—è—Ç—å, –Ω–µ –≤—ã—à–µ–ª –ª–∏ –æ—á–µ—Ä–µ–¥–Ω–æ–π –Ω–æ–º–µ—Ä. –í–º–µ—Å—Ç–æ —ç—Ç–æ–≥–æ, –∏–∑–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ –±—É–¥–µ—Ç –ø—Ä–∏—Å—ã–ª–∞—Ç—å –Ω–æ–≤—ã–µ –Ω–æ–º–µ—Ä–∞ —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –≤—ã—Ö–æ–¥–∞ –ø—Ä—è–º–æ –∫ –≤–∞–º –¥–æ–º–æ–π. –ò–∑–¥–∞—Ç–µ–ª—å—Å—Ç–≤–æ –≤–µ–¥—ë—Ç —Å–ø–∏—Å–æ–∫ –ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤ –∏ –∑–Ω–∞–µ—Ç, –∫–æ–º—É –∫–∞–∫–æ–π –∂—É—Ä–Ω–∞–ª —Å–ª–∞—Ç—å. –í—ã –º–æ–∂–µ—Ç–µ –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç –æ—Ç–∫–∞–∑–∞—Ç—å—Å—è –æ—Ç –ø–æ–¥–ø–∏—Å–∫–∏, –∏ –∂—É—Ä–Ω–∞–ª –ø–µ—Ä–µ—Å—Ç–∞–Ω–µ—Ç –∫ –≤–∞–º –ø—Ä–∏—Ö–æ–¥–∏—Ç—å.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://mazko.github.io/MSP430.js/8490b771b5c0189e639726f219cb2b16"&gt;MSP430.js&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2018/03/18/s-dlia-mikrokontrollerov-nabliudatel/msp430-observer.zip"&gt;–∏—Å—Ö–æ–¥–Ω–∏–∫–∏&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2018/03/18/s-dlia-mikrokontrollerov-nabliudatel/ui.gif" style="width:55%; margin: 0 auto; display:block;"&gt;&lt;/p&gt;
&lt;p&gt;–î–∞–≤–∞–π—Ç–µ –Ω–∞–∑—ã–≤–∞—Ç—å ¬´–∏–∑–¥–∞—Ç–µ–ª—è–º–∏¬ª —Ç–µ –æ–±—ä–µ–∫—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ —Å–æ–¥–µ—Ä–∂–∞—Ç –≤–∞–∂–Ω–æ–µ –∏–ª–∏ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–µ –¥–ª—è –¥—Ä—É–≥–∏—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–µ. –û—Å—Ç–∞–ª—å–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ —Ö–æ—Ç—è—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è —ç—Ç–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è, –Ω–∞–∑–æ–≤—ë–º ¬´–ø–æ–¥–ø–∏—Å—á–∏–∫–∞–º–∏¬ª.&lt;/p&gt;
&lt;p&gt;–ü–∞—Ç—Ç–µ—Ä–Ω ¬´–ù–∞–±–ª—é–¥–∞—Ç–µ–ª—å¬ª –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å –≤–Ω—É—Ç—Ä–∏ –æ–±—ä–µ–∫—Ç–∞ ¬´–∏–∑–¥–∞—Ç–µ–ª—è¬ª (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞) —Å–ø–∏—Å–æ–∫ —Å—Å—ã–ª–æ–∫ –Ω–∞ –æ–±—ä–µ–∫—Ç—ã ¬´–ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤¬ª. –ü—Ä–∏—á—ë–º, ¬´–∏–∑–¥–∞—Ç–µ–ª—å¬ª –Ω–µ –¥–æ–ª–∂–µ–Ω –≤–µ—Å—Ç–∏ —Å–ø–∏—Å–æ–∫ –ø–æ–¥–ø–∏—Å–∫–∏ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ. –û–Ω –¥–æ–ª–∂–µ–Ω –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥—ã, —Å –ø–æ–º–æ—â—å—é –∫–æ—Ç–æ—Ä—ã—Ö ¬´–ø–æ–¥–ø–∏—Å—á–∏–∫–∏¬ª –º–æ–≥–ª–∏ –±—ã –¥–æ–±–∞–≤–ª—è—Ç—å –∏–ª–∏ —É–±–∏—Ä–∞—Ç—å —Å–µ–±—è –∏–∑ —Å–ø–∏—Å–∫–∞.&lt;/p&gt;
&lt;p&gt;–ö–æ–≥–¥–∞ –≤ ¬´–∏–∑–¥–∞—Ç–µ–ª–µ¬ª –±—É–¥–µ—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å –≤–∞–∂–Ω–æ–µ —Å–æ–±—ã—Ç–∏–µ, –æ–Ω –±—É–¥–µ—Ç –ø—Ä–æ—Ö–æ–¥–∏—Ç—å—Å—è –ø–æ —Å–ø–∏—Å–∫—É ¬´–ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤¬ª –∏ –æ–ø–æ–≤–µ—â–∞—Ç—å –∏—Ö –æ–± —ç—Ç–æ–º, –≤—ã–∑—ã–≤–∞—è –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–π –º–µ—Ç–æ–¥ –æ–±—ä–µ–∫—Ç–æ–≤-–ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;observers/state.h&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;DoublyLinkedList.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;non-copyable.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="k"&gt;namespace&lt;/span&gt; &lt;span class="n"&gt;obsevers&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

    &lt;span class="c1"&gt;// alias&lt;/span&gt;
    &lt;span class="k"&gt;template&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;T&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="k"&gt;using&lt;/span&gt; &lt;span class="n"&gt;DLLE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;mozilla&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;DoublyLinkedListElement&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;T&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="k"&gt;namespace&lt;/span&gt; &lt;span class="n"&gt;state&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

        &lt;span class="k"&gt;typedef&lt;/span&gt; &lt;span class="k"&gt;enum&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;left_active&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="n"&gt;left_sleep&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="n"&gt;state_t&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

        &lt;span class="k"&gt;struct&lt;/span&gt; &lt;span class="nl"&gt;IObserver&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="k"&gt;public&lt;/span&gt; &lt;span class="n"&gt;DLLE&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;IObserver&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;NonCopyable&lt;/span&gt;
        &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;virtual&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="n"&gt;observe&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;state_t&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;};&lt;/span&gt;


        &lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Container&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;NonCopyable&lt;/span&gt;
        &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;mozilla&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;DoublyLinkedList&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;IObserver&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;mList&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

        &lt;span class="k"&gt;public&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
            &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="n"&gt;addObserver&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;IObserver&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;aObserver&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="p"&gt;{&lt;/span&gt;
                &lt;span class="c1"&gt;// Will assert if |aObserver| is part of another list.&lt;/span&gt;
                &lt;span class="n"&gt;mList&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pushFront&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;aObserver&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
            &lt;span class="p"&gt;}&lt;/span&gt;

            &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="n"&gt;removeObserver&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;IObserver&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;aObserver&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="p"&gt;{&lt;/span&gt;
                &lt;span class="c1"&gt;// Will assert if |aObserver| is not part of |list|.&lt;/span&gt;
                &lt;span class="n"&gt;mList&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;remove&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;aObserver&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
            &lt;span class="p"&gt;}&lt;/span&gt;

            &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="n"&gt;notifyObservers&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;state_t&lt;/span&gt; &lt;span class="n"&gt;aState&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="p"&gt;{&lt;/span&gt;
                &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;IObserver&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="nl"&gt;o&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;mList&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
                    &lt;span class="n"&gt;o&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;observe&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;aState&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
                &lt;span class="p"&gt;}&lt;/span&gt;
            &lt;span class="p"&gt;}&lt;/span&gt;
        &lt;span class="p"&gt;};&lt;/span&gt;

        &lt;span class="k"&gt;extern&lt;/span&gt; &lt;span class="n"&gt;Container&lt;/span&gt; &lt;span class="n"&gt;event&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–í –ø—Ä–∏–≤–µ–¥–µ–Ω–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ ¬´–ø–æ–¥–ø–∏—Å—á–∏–∫–∏¬ª –æ–±—Ä–∞–∑—É—é—Ç –¥–≤—É—Å–≤—è–∑–Ω—ã–π —Å–ø–∏—Å–æ–∫, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–±–æ–π—Ç–∏—Å—å –±–µ–∑ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –≤—ã–¥–µ–ª–µ–Ω–∏—è –ø–∞–º—è—Ç–∏. –ü–æ—á–µ–º—É —ç—Ç–æ –≤–∞–∂–Ω–æ –¥–ª—è –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤ –æ–ø–∏—Å–∞–Ω–æ &lt;a href="http://proiot.ru/blog/posts/2017/03/22/s-dlia-mikrokontrollerov-dekorator/"&gt;—Ç—É—Ç&lt;/a&gt;. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≥–æ—Ç–æ–≤–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –¥–≤—É—Å–≤—è–∑–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞ –≤–∑—è—Ç–∞—è –∏–∑ –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤ mozilla.&lt;/p&gt;
&lt;p&gt;–®–∞–±–ª–æ–Ω ¬´–ù–∞–±–ª—é–¥–∞—Ç–µ–ª—å¬ª —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ. –û–±—ã—á–Ω–æ –≤—ã–¥–µ–ª—è–µ—Ç—Å—è –≥–ª–∞–≤–Ω—ã–π —Ü–∏–∫–ª –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, —Ç–µ–ª–æ –∫–æ—Ç–æ—Ä–æ–≥–æ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –¥–≤—É—Ö —á–∞—Å—Ç–µ–π: –≤—ã–±–æ—Ä–∫–∏ —Å–æ–±—ã—Ç–∏—è –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏—è. –ö–∞–∫ –ø—Ä–∞–≤–∏–ª–æ, –≤ —Ä–µ–∞–ª—å–Ω—ã—Ö –∑–∞–¥–∞—á–∞—Ö –æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º—ã–º –¥–ª–∏—Ç–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ —Å–æ–±—ã—Ç–∏—è, –ø–æ—Å–∫–æ–ª—å–∫—É –ø—Ä–∏ —ç—Ç–æ–º –ø—Ä–æ–≥—Ä–∞–º–º–∞ –Ω–µ –º–æ–∂–µ—Ç —Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –¥—Ä—É–≥–∏–µ —Å–æ–±—ã—Ç–∏—è.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;app.cpp&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;app.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;hal.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;observers/buttons.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;observers/state.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;tasks/left.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;tasks/right.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;tasks/counter.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="k"&gt;using&lt;/span&gt; &lt;span class="k"&gt;namespace&lt;/span&gt; &lt;span class="n"&gt;obsevers&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="n"&gt;buttons&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;Container&lt;/span&gt; &lt;span class="n"&gt;obsevers&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;buttons&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;event&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="n"&gt;state&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;Container&lt;/span&gt;   &lt;span class="n"&gt;obsevers&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;state&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;event&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="k"&gt;namespace&lt;/span&gt; &lt;span class="n"&gt;app&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

    &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;run&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

        &lt;span class="n"&gt;tasks&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;left&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;start&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
        &lt;span class="n"&gt;tasks&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;right&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;start&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
        &lt;span class="n"&gt;tasks&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;counter&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;start&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;

        &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="n"&gt;lastBtns&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;volatile&lt;/span&gt; &lt;span class="kt"&gt;uint16_t&lt;/span&gt; &lt;span class="n"&gt;longPress&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="c1"&gt;// TODO: use timer&lt;/span&gt;
        &lt;span class="n"&gt;state&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;state_t&lt;/span&gt; &lt;span class="n"&gt;lastState&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;state&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;left_sleep&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(;;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

            &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="n"&gt;btns&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;hal&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;get_buttons&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;

            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="n"&gt;lastBtns&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;btns&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;buttons&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;event&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;notifyObservers&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;btns&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
            &lt;span class="p"&gt;}&lt;/span&gt;

            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;btns&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="cm"&gt;/* left first button */&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
                &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;longPress&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="o"&gt;!--&lt;/span&gt;&lt;span class="n"&gt;longPress&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; 
                &lt;span class="p"&gt;{&lt;/span&gt;
                    &lt;span class="k"&gt;switch&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lastState&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
                        &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="n"&gt;state&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="nl"&gt;left_active&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                            &lt;span class="n"&gt;lastState&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;state&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;left_sleep&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
                            &lt;span class="k"&gt;break&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
                        &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="n"&gt;state&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="nl"&gt;left_sleep&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                            &lt;span class="n"&gt;lastState&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;state&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;left_active&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
                            &lt;span class="k"&gt;break&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
                    &lt;span class="p"&gt;}&lt;/span&gt;
                    &lt;span class="n"&gt;state&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;event&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;notifyObservers&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lastState&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
                &lt;span class="p"&gt;}&lt;/span&gt;
            &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;longPress&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;5000&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
            &lt;span class="p"&gt;}&lt;/span&gt;

            &lt;span class="n"&gt;lastBtns&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;btns&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

            &lt;span class="c1"&gt;// other events like timer e.t.c...&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;

        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–í –¥–∞–Ω–Ω–æ–º –ø—Ä–∏–º–µ—Ä–µ –¥–≤–∞ —Å–æ–±—ã—Ç–∏—è: –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏ –Ω–∞–∂–∞—Ç–∏–µ –Ω–∞ –∫–Ω–æ–ø–∫–∏. –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è (–¥–ª–∏—Ç–µ–ª—å–Ω–æ–µ –Ω–∞–∂–∞—Ç–∏–µ) –ª–µ–≤—ã–µ –ª–∞–º–ø–æ—á–∫–∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –ø–æ–¥–ø–∏—Å—ã–≤–∞—é—Ç—Å—è / –æ—Ç–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –æ—Ç —Å–æ–±—ã—Ç–∏—è –Ω–∞–∂–∞—Ç–∏—è –Ω–∞ –∫–Ω–æ–ø–∫–∏. –ü—Ä–∞–≤—ã–µ –ª–∞–º–ø–æ—á–∫–∏ –∏ —Å—á—ë—Ç—á–∏–∫ –Ω–∞–∂–∞—Ç–∏–π –ø–æ–¥–ø–∏—Å–∞–Ω—ã –Ω–∞ —Å–æ–±—ã—Ç–∏–µ –∫–Ω–æ–ø–æ–∫ –≤—Å–µ–≥–¥–∞.&lt;/p&gt;
&lt;p&gt;–ù–∏–∫–æ–≥–¥–∞ –Ω–µ –ø–æ–ª–∞–≥–∞–π—Ç–µ—Å—å –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ –æ–ø–æ–≤–µ—â–µ–Ω–∏—è ¬´–ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤¬ª. –ú–µ—Ç–æ–¥ &lt;code&gt;addObserver&lt;/code&gt; –∫–ª–∞—Å—Å–∞ &lt;code&gt;state::Container&lt;/code&gt; –¥–æ–±–∞–≤–ª—è–µ—Ç –Ω–æ–≤–æ–≥–æ ¬´–ø–æ–¥–ø–∏—Å—á–∏–∫–∞¬ª –≤ –Ω–∞—á–∞–ª–æ —Å–≤—è–∑–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞. –ê –µ—Å–ª–∏ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–µ –≤ –Ω–∞—á–∞–ª–æ –∞ –≤ –∫–æ–Ω–µ—Ü ? –ö–∞–∫–æ–π –ø–æ—Ä—è–¥–æ–∫ —Å—á–∏—Ç–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º ? &lt;strong&gt;–õ—é–±–æ–π&lt;/strong&gt;. –ù—É–∂–Ω–æ –ø–∏—Å–∞—Ç—å –∫–æ–¥ —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —á—Ç–æ–±—ã –ø–æ—Ä—è–¥–æ–∫ –æ–±—Ö–æ–¥–∞ ¬´–ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤¬ª –Ω–∏–∫–∞–∫ –Ω–µ –≤–ª–∏—è–ª –Ω–∞ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã. –ß–µ–º –º–µ–Ω—å—à–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å–∏—Å—Ç–µ–º—ã –∑–Ω–∞—é—Ç –¥—Ä—É–≥ –æ –¥—Ä—É–≥–µ, —Ç–µ–º –ø—Ä–æ—â–µ –∏—Ö –∏–∑–º–µ–Ω—è—Ç—å –∏ —Ä–∞–∑–≤–∏–≤–∞—Ç—å. –û —Å–∏–ª–µ —Å–ª–∞–±—ã—Ö —Å–≤—è–∑–µ–π —á—É—Ç—å –Ω–∏–∂–µ.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;tasks/left.cpp&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;left.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;color-observer.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;observers/state.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;draw.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;hal.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="k"&gt;using&lt;/span&gt; &lt;span class="k"&gt;namespace&lt;/span&gt; &lt;span class="n"&gt;obsevers&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;using&lt;/span&gt; &lt;span class="k"&gt;namespace&lt;/span&gt; &lt;span class="n"&gt;tasks&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;LockerObserver&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;public&lt;/span&gt; &lt;span class="n"&gt;state&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;IObserver&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

    &lt;span class="n"&gt;ColorObserver&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;hal&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;LeftLeds&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;o&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;observe&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;state&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;state_t&lt;/span&gt; &lt;span class="n"&gt;aState&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;override&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;switch&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;aState&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="n"&gt;state&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="nl"&gt;left_active&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                &lt;span class="n"&gt;str&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;left subscribed  &amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
                &lt;span class="n"&gt;buttons&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;event&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addObserver&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;o&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
                &lt;span class="k"&gt;break&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
            &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="n"&gt;state&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="nl"&gt;left_sleep&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                &lt;span class="n"&gt;str&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;left unsubscribed&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
                &lt;span class="n"&gt;buttons&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;event&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;removeObserver&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;o&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
                &lt;span class="k"&gt;break&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="k"&gt;public&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; 
        &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="n"&gt;str&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="kt"&gt;char&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;str&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
          &lt;span class="n"&gt;draw&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;str&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;draw&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;PAGE_0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;str&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;};&lt;/span&gt;

&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="n"&gt;LockerObserver&lt;/span&gt; &lt;span class="n"&gt;observer&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="k"&gt;namespace&lt;/span&gt; &lt;span class="n"&gt;tasks&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;namespace&lt;/span&gt; &lt;span class="n"&gt;left&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="n"&gt;start&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;observer&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;str&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;left unsubscribed&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
            &lt;span class="n"&gt;state&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;event&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addObserver&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;observer&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ï—Å–ª–∏ –æ–±—ä–µ–∫—Ç—ã –º–æ–≥—É—Ç –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å, –Ω–µ –æ–±–ª–∞–¥–∞—è –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –Ω–∏–∫–∞–∫–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –¥—Ä—É–≥ –æ –¥—Ä—É–≥–µ, —Ç–∞–∫–∏–µ –æ–±—ä–µ–∫—Ç—ã –Ω–∞–∑—ã–≤–∞—é—Ç —Å–ª–∞–±–æ—Å–≤—è–∑–∞–Ω–Ω—ã–º–∏. –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ, —á—Ç–æ –∑–Ω–∞–µ—Ç ¬´–∏–∑–¥–∞—Ç–µ–ª—å¬ª –æ ¬´–ø–æ–¥–ø–∏—Å—á–∏–∫–∞—Ö¬ª, ‚Äì —Ç–æ, —á—Ç–æ –æ–Ω–∏ —Ä–µ–∞–ª–∏–∑—É–µ—Ç –Ω–µ–∫–æ—Ç–æ—Ä—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (IObserver). –ï–º—É –Ω–µ –Ω—É–∂–Ω–æ –∑–Ω–∞—Ç—å –Ω–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –∫–ª–∞—Å—Å ¬´–ø–æ–¥–ø–∏—Å—á–∏–∫–∞¬ª, –Ω–∏ –µ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–∏–ø–æ–≤ ¬´–ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤¬ª –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ ¬´–∏–∑–¥–∞—Ç–µ–ª—è¬ª. &lt;/p&gt;
&lt;p&gt;–ù–∞ –±–∞–∑–µ —Å–ª–∞–±–æ—Å–≤—è–∑–∞–Ω–Ω—ã—Ö –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä —Å—Ç—Ä–æ—è—Ç—Å—è –≥–∏–±–∫–∏–µ —Å–∏—Å—Ç–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–µ —Ö–æ—Ä–æ—à–æ –∞–¥–∞–ø—Ç–∏—Ä—É—é—Ç—Å—è –∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º –±–ª–∞–≥–æ–¥–∞—Ä—è –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º –º–µ–∂–¥—É –æ–±—ä–µ–∫—Ç–∞–º–∏.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;–ï—Å—Ç—å –≤—Å–µ–≥–æ –¥–≤–∞ —Ç–∏–ø–∞ —è–∑—ã–∫–æ–≤ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è: —Ç–µ, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–µ –ª—é–¥–∏ –≤—Å—ë –≤—Ä–µ–º—è —Ä—É–≥–∞—é—Ç—Å—è, –∏ —Ç–µ, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∏–∫—Ç–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç. ‚Äî Bjarne Stroustrup&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;–ö–∞–∫ –≤—ã –¥—É–º–∞–µ—Ç–µ, —á—Ç–æ –≤—ã–≤–µ–¥–µ—Ç —Å–ª–µ–¥—É—é—â–∞—è –∫–æ–º–∞–Ω–¥–∞ ?&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ strings a.out | grep alloc
# output
lib_a-malloc.o
lib_a-nano-mallocr.o
malloc
_malloc_r
__malloc_sbrk_start
__malloc_free_list
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ö–∞–∫ —Ç–æ–ª—å–∫–æ –º—ã –Ω–∞—á–∞–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å &lt;strong&gt;–≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏&lt;/strong&gt;, –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä —Ä–µ—à–∏–ª –ø–æ–º–æ—á—å –∏ –º–æ–ª—á–∞ –¥–æ–±–∞–≤–∏–ª –≤ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Ñ–∞–π–ª &lt;code&gt;malloc&lt;/code&gt; –∏ —ç—Ç–æ &lt;a href="http://proiot.ru/blog/posts/2017/03/22/s-dlia-mikrokontrollerov-dekorator/"&gt;—è–≤–Ω–æ –Ω–µ —Ç–æ&lt;/a&gt;, —á—Ç–æ –º—ã —Ö–æ—Ç–∏–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞—Ö. –ú–æ–∂–Ω–æ –ª–∏ —ç—Ç–æ –∫–∞–∫-—Ç–æ –æ–±–æ–π—Ç–∏ ?&lt;/p&gt;
&lt;p&gt;–£ –Ω–∞—Å —Ç—É—Ç GCC-–ø–æ–¥–æ–±–Ω—ã–π –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä, –∫–æ–º–ø–æ–Ω–æ–≤—â–∏–∫ –∫–æ—Ç–æ—Ä–æ–≥–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å—Ç–∞–≤–∏—Ç—å —Å–≤–æ–∏ –æ–±—ë—Ä—Ç–∫–∏ –Ω–∞ –∏–Ω—Ç–µ—Ä–µ—Å—É—é—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏. –ú–æ–∂–Ω–æ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–ª–æ–º–∞—Ç—å –∫–æ–º–ø–∏–ª—è—Ü–∏—é –ø—Ä–∏ –≤—ã–∑–æ–≤–µ —Ñ—É–Ω–∫—Ü–∏–π –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –≤—ã–¥–µ–ª–µ–Ω–∏—è –ø–∞–º—è—Ç–∏ &lt;code&gt;malloc&lt;/code&gt;, &lt;code&gt;calloc&lt;/code&gt;, &lt;code&gt;realloc&lt;/code&gt;, &lt;code&gt;free&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;-fno-builtin -Wl,--wrap=malloc  -Wl,--wrap=calloc \
             -Wl,--wrap=realloc -Wl,--wrap=free -Wl,--wrap=sbrk
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–¢–µ–ø–µ—Ä—å –ø—Ä–∏ –≤—ã–∑–æ–≤–µ &lt;code&gt;malloc&lt;/code&gt; –±—É–¥–µ—Ç –≤—ã–∑–≤–∞–Ω–∞ &lt;code&gt;__wrap_malloc&lt;/code&gt; –∏ —Ç.–¥. –ü–æ—Å–∫–æ–ª—å–∫—É –º—ã –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ–º —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é &lt;code&gt;__wrap_malloc&lt;/code&gt;, –∫–æ–º–ø–∏–ª—è—Ü–∏—è —Å–ª–æ–º–∞–µ—Ç—Å—è. –ï—Å–ª–∏ –∂–µ &lt;code&gt;malloc&lt;/code&gt; –Ω–∏–≥–¥–µ –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –≤ –∫–æ–¥–µ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –≤—ã–¥–∞—Å—Ç –ø—Ä–æ—à–∏–≤–∫—É.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://mazko.github.io/MSP430.js/9bdb1cd8da54384ba5b6211ea135b7f8"&gt;MSP430.js&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2018/03/18/s-dlia-mikrokontrollerov-nabliudatel/msp430-observer-static-polymorphism.zip"&gt;–∏—Å—Ö–æ–¥–Ω–∏–∫–∏&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;–í —Å—Ç–∞—Ä–æ–º –¥–æ–±—Ä–æ–º C–∏ –ø–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω –≤ –≤–∏–¥–µ —É–∫–∞–∑–∞—Ç–µ–ª–µ–π –Ω–∞ —Ñ—É–Ω–∫—Ü–∏–∏. –ù–∞–∏–±–æ–ª–µ–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —É–∫–∞–∑–∞—Ç–µ–ª–µ–π –Ω–∞ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ C–∏ ‚Äì —ç—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ—á–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π, —Ç–∞–∫–∏—Ö –∫–∞–∫ qsort. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è —É–∫–∞–∑–∞—Ç–µ–ª–µ–π –Ω–∞ —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–æ—Å—Ç–∞: —ç—Ç–æ –≤—Å–µ–≥–æ –ª–∏—à—å ¬´—É–∫–∞–∑–∞—Ç–µ–ª–∏ –Ω–∞ –∫–æ–¥¬ª, –≤ –Ω–∏—Ö —Å–æ–¥–µ—Ä–∂–∏—Ç—Å—è –Ω–∞—á–∞–ª—å–Ω—ã–π –∞–¥—Ä–µ—Å —É—á–∞—Å—Ç–∫–∞ –∞—Å—Å–µ–º–±–ª–µ—Ä–Ω–æ–≥–æ –∫–æ–¥–∞. –†–∞–∑–ª–∏—á–Ω—ã–µ —Ç–∏–ø—ã —É–∫–∞–∑–∞—Ç–µ–ª–µ–π —Å—É—â–µ—Å—Ç–≤—É—é—Ç –ª–∏—à—å –¥–ª—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ –≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –ø—Ä–∏–º–µ–Ω—è–µ–º–æ–≥–æ —Å–æ–≥–ª–∞—à–µ–Ω–∏—è –æ –≤—ã–∑–æ–≤–µ.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;observers/state.h&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;DoublyLinkedList.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;non-copyable.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="k"&gt;namespace&lt;/span&gt; &lt;span class="n"&gt;obsevers&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

    &lt;span class="c1"&gt;// alias&lt;/span&gt;
    &lt;span class="k"&gt;template&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;T&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="k"&gt;using&lt;/span&gt; &lt;span class="n"&gt;DLLE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;mozilla&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;DoublyLinkedListElement&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;T&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="k"&gt;namespace&lt;/span&gt; &lt;span class="n"&gt;state&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

        &lt;span class="k"&gt;typedef&lt;/span&gt; &lt;span class="k"&gt;enum&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;left_active&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="n"&gt;left_sleep&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="n"&gt;state_t&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

        &lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Observer&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;public&lt;/span&gt; &lt;span class="n"&gt;DLLE&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Observer&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;NonCopyable&lt;/span&gt;
        &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;typedef&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;ObserveFunc&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;state_t&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Observer&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

            &lt;span class="n"&gt;ObserveFunc&lt;/span&gt; &lt;span class="n"&gt;m_observe_func_ptr&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

        &lt;span class="k"&gt;public&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
            &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="n"&gt;observe&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;state_t&lt;/span&gt; &lt;span class="n"&gt;aState&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
                &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;m_observe_func_ptr&lt;/span&gt;&lt;span class="p"&gt;)(&lt;/span&gt;&lt;span class="n"&gt;aState&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
            &lt;span class="p"&gt;}&lt;/span&gt;

            &lt;span class="n"&gt;Observer&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ObserveFunc&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;m_observe_func_ptr&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;){}&lt;/span&gt;
        &lt;span class="p"&gt;};&lt;/span&gt;

        &lt;span class="k"&gt;template&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;T&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
        &lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Adapter&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;public&lt;/span&gt; &lt;span class="n"&gt;Observer&lt;/span&gt;
        &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;T&lt;/span&gt; &lt;span class="n"&gt;m_observer_impl&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

        &lt;span class="k"&gt;public&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
            &lt;span class="n"&gt;Adapter&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;Observer&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
                &lt;span class="p"&gt;[](&lt;/span&gt;&lt;span class="n"&gt;state_t&lt;/span&gt; &lt;span class="n"&gt;aState&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Observer&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;aThis&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
                &lt;span class="p"&gt;{&lt;/span&gt;
                    &lt;span class="k"&gt;auto&lt;/span&gt; &lt;span class="n"&gt;self&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;static_cast&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Adapter&lt;/span&gt;&lt;span class="o"&gt;*&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;aThis&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
                    &lt;span class="n"&gt;self&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;m_observer_impl&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;observe&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;aState&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
                &lt;span class="p"&gt;}){&lt;/span&gt;&lt;span class="cm"&gt;/* empty constructor */&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
        &lt;span class="p"&gt;};&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;em&gt;tasks/left.cpp&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;left.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;color-observer.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;observers/state.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;draw.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;hal.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="k"&gt;using&lt;/span&gt; &lt;span class="k"&gt;namespace&lt;/span&gt; &lt;span class="n"&gt;obsevers&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;using&lt;/span&gt; &lt;span class="k"&gt;namespace&lt;/span&gt; &lt;span class="n"&gt;tasks&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;str&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="kt"&gt;char&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;str&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;draw&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;str&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;draw&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;PAGE_0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;str&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="k"&gt;struct&lt;/span&gt; &lt;span class="nl"&gt;LockerObserver&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;NonCopyable&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

    &lt;span class="n"&gt;buttons&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;Adapter&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;ColorObserver&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;hal&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;LeftLeds&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;o&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;observe&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;state&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;state_t&lt;/span&gt; &lt;span class="n"&gt;aState&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;switch&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;aState&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="n"&gt;state&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="nl"&gt;left_active&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                &lt;span class="n"&gt;str&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;left subscribed  &amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
                &lt;span class="n"&gt;buttons&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;event&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addObserver&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;o&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
                &lt;span class="k"&gt;break&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
            &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="n"&gt;state&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="nl"&gt;left_sleep&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                &lt;span class="n"&gt;str&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;left unsubscribed&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
                &lt;span class="n"&gt;buttons&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;event&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;removeObserver&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;o&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
                &lt;span class="k"&gt;break&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;};&lt;/span&gt;

&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="n"&gt;state&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;Adapter&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;LockerObserver&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;observer&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="k"&gt;namespace&lt;/span&gt; &lt;span class="n"&gt;tasks&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;namespace&lt;/span&gt; &lt;span class="n"&gt;left&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="n"&gt;start&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;str&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;left unsubscribed&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
            &lt;span class="n"&gt;state&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;event&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;addObserver&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;observer&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–í–æ–∑–º–æ–∂–Ω–æ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∫–∞–∫–æ–µ-—Ç–æ –±–æ–ª–µ–µ —ç–ª–µ–≥–∞–Ω—Ç–Ω—ã–π —Å–ø–æ—Å–æ–± –æ—Ç—É—á–∏—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –æ—Ç –≤—ã–∑–æ–≤–∞ malloc, –Ω–æ –≤ —Ü–µ–ª–æ–º –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –≤—ã–≥–ª—è–¥–∏—Ç –≤–ø–æ–ª–Ω–µ —Å—ä–µ–¥–æ–±–Ω—ã–º.&lt;/p&gt;</content><category term="msp430"></category><category term="–ü–∞—Ç—Ç–µ—Ä–Ω"></category></entry><entry><title>–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å ¬´–ò–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –≤–µ—â–µ–π¬ª - TLS / DTLS</title><link href="http://proiot.ru/blog/posts/2018/01/05/bezopasnost-interneta-veshchei-tls-dtls/" rel="alternate"></link><published>2018-01-05T00:00:00+02:00</published><updated>2018-01-05T00:00:00+02:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2018-01-05:/blog/posts/2018/01/05/bezopasnost-interneta-veshchei-tls-dtls/</id><summary type="html">&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2017/10/03/setevoe-programmirovanie-udp-ntp-chasy/"&gt;–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º&lt;/a&gt; –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å —Å–µ—Ç–µ–≤—ã–µ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã.&lt;/p&gt;
&lt;p&gt;TLS (Transport Layer Security) ‚Äì –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –ø—Ä–æ—Ç–æ–∫–æ–ª, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—â–∏–π –∑–∞—â–∏—â—ë–Ω–Ω—É—é –æ—Ç –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏—è –∏ –ø–æ–¥–º–µ–Ω—ã –ø–µ—Ä–µ–¥–∞—á—É –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É —É–∑–ª–∞–º–∏ –≤ —Å–µ—Ç–∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç. –° —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–π —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è TLS —Ä–∞—Å–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –Ω–∞–¥ &lt;a href="http://proiot.ru/blog/posts/2017/10/09/setevoe-programmirovanie-tcp-http-server/"&gt;TCP&lt;/a&gt; (Transmission Control Protocol), —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –±–æ–ª–µ–µ –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–º –ø—Ä–æ—Ç–æ–∫–æ–ª–∞–º (—Ç–∞–∫–∏–º –∫–∞–∫ HTTP, MQTT –∏ –¥—Ä.) —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π. –ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏ ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2017/10/03/setevoe-programmirovanie-udp-ntp-chasy/"&gt;–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º&lt;/a&gt; –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å —Å–µ—Ç–µ–≤—ã–µ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã.&lt;/p&gt;
&lt;p&gt;TLS (Transport Layer Security) ‚Äì –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –ø—Ä–æ—Ç–æ–∫–æ–ª, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—â–∏–π –∑–∞—â–∏—â—ë–Ω–Ω—É—é –æ—Ç –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏—è –∏ –ø–æ–¥–º–µ–Ω—ã –ø–µ—Ä–µ–¥–∞—á—É –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É —É–∑–ª–∞–º–∏ –≤ —Å–µ—Ç–∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç. –° —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–π —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è TLS —Ä–∞—Å–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –Ω–∞–¥ &lt;a href="http://proiot.ru/blog/posts/2017/10/09/setevoe-programmirovanie-tcp-http-server/"&gt;TCP&lt;/a&gt; (Transmission Control Protocol), —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –±–æ–ª–µ–µ –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–º –ø—Ä–æ—Ç–æ–∫–æ–ª–∞–º (—Ç–∞–∫–∏–º –∫–∞–∫ HTTP, MQTT –∏ –¥—Ä.) —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π. –ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏ –ø—Ä–æ—Ç–æ–∫–æ–ª TLS —è–≤–ª—è–µ—Ç—Å—è –Ω–∞—Å–ª–µ–¥–Ω–∏–∫–æ–º SSL (Secure Sockets Layer), –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–º –≤ Netscape –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –∫–æ–º–º–µ—Ä—Ü–∏–∏ –≤ –ò–Ω—Ç–µ—Ä–Ω–µ—Ç–µ.&lt;/p&gt;
&lt;p&gt;–î–ª—è &lt;a href="http://proiot.ru/blog/posts/2017/10/03/setevoe-programmirovanie-udp-ntp-chasy/"&gt;UDP&lt;/a&gt; (User Datagram Protocol) –±—ã–ª–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–∞ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è TLS, –ø–æ–ª—É—á–∏–≤—à–∞—è –Ω–∞–∑–≤–∞–Ω–∏–µ DTLS (Datagram Transport Layer Security). –í —Ç–æ –≤—Ä–µ–º—è –∫–∞–∫ TCP –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—É—é –¥–æ—Å—Ç–∞–≤–∫—É –ø–∞–∫–µ—Ç–æ–≤ –æ—Ç –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –∫ –ø–æ–ª—É—á–∞—Ç–µ–ª—é, UDP –ø–∞–∫–µ—Ç—ã –º–æ–≥—É—Ç –ø–æ—Ç–µ—Ä—è—Ç—å—Å—è –∏ –∏—Ö –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç—Å—è. –ü—Ä–æ—Ç–æ–∫–æ–ª DTLS —É—á–∏—Ç—ã–≤–∞–µ—Ç –≤—ã—à–µ—É–∫–∞–∑–∞–Ω–Ω—ã–µ –æ—Ç–ª–∏—á–∏—è TCP –∏ UDP. &lt;/p&gt;
&lt;h2&gt;–î–ï–ú–û&lt;/h2&gt;
&lt;p&gt;–ù–∞ –∫–∞—Ä—Ç–∏–Ω–∫–µ DTLS —Å–µ—Ä–≤–µ—Ä –Ω–∞ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–µ c –û–° &lt;a href="http://proiot.ru/blog/posts/2017/10/03/setevoe-programmirovanie-udp-ntp-chasy/"&gt;Contiki&lt;/a&gt; –Ω–∞ –±–æ—Ä—Ç—É. –ò–∑ –∫–æ—Ä–æ–±–∫–∏ Contiki –Ω–µ —É–º–µ–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å TLS / DTLS, –ø–æ—Ç–æ–º—É –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Ç–æ—Ä–æ–Ω–Ω—è—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ TinyDTLS. –î–ª—è –æ–±–º–µ–Ω–∞ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è –Ω–∞—Ç–∏–≤–Ω—ã–π DTLS –∫–ª–∏–µ–Ω—Ç –∏–∑ –ø—Ä–∏–º–µ—Ä–æ–≤ —Å–∞–º–æ–π TinyDTLS, –Ω–æ –ø–æ –∏–¥–µ–µ –∫–ª–∏–µ–Ω—Ç –º–æ–∂–µ—Ç –±—ã—Ç—å –ª—é–±–æ–π —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π IPv6:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ ping6 fe80::200:e2ff:fe58:b66e%mazko # bug ?
~$ cat &amp;lt;(echo Hello DTLS) - | \
./tinydtls/tests/dtls-client fe80::200:e2ff:fe58:b66e%mazko
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;a href="http://localhost:9148/a7d33b89268292d04630429cc5f16a5a"&gt;ipv6.dtls.server&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2018/01/05/bezopasnost-interneta-veshchei-tls-dtls/contiki-dtls.zip"&gt;–∏—Å—Ö–æ–¥–Ω–∏–∫–∏&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2018/01/05/bezopasnost-interneta-veshchei-tls-dtls/demo.png" style="width:50%; margin: 0 auto; display:block;"&gt;&lt;/p&gt;
&lt;p&gt;–í –¥–∞–Ω–Ω–æ–º –ø—Ä–∏–º–µ—Ä–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–∏–º–º–µ—Ç—Ä–∏—á–Ω–æ–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ TLS_PSK (Pre-Shared Key) –ø–æ AES –∞–ª–≥–æ—Ä–∏—Ç–º—É. –°–∏–º–º–µ—Ç—Ä–∏—á–Ω—ã–π ‚Äì –∑–Ω–∞—á–∏—Ç, —á—Ç–æ –¥–ª—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –∏ –¥–µ—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á (—Å—É—â–µ—Å—Ç–≤—É—é—Ç —Ç–∞–∫–∂–µ –∞—Å–∏–º–º–µ—Ç—Ä–∏—á–Ω—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã, –¥–ª—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ–¥–∏–Ω –∫–ª—é—á, –¥–ª—è –¥–µ—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è ‚Äì –¥—Ä—É–≥–æ–π). –ö–ª—é—á –∞–ª–≥–æ—Ä–∏—Ç–º–∞ –¥–æ–ª–∂–µ–Ω —Å–æ—Ö—Ä–∞–Ω—è—Ç—å—Å—è –≤ —Å–µ–∫—Ä–µ—Ç–µ –æ–±–µ–∏–º–∏ —Å—Ç–æ—Ä–æ–Ω–∞–º–∏, –≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –æ–Ω –∑–∞—à–∏—Ç –≤ –∫–æ–¥–µ &lt;code&gt;#define PSK_DEFAULT_KEY "secretPSK"&lt;/code&gt; –∏ —Å–µ—Ä–≤–µ—Ä–∞ –∏ –∫–ª–∏–µ–Ω—Ç–∞.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2018/01/05/bezopasnost-interneta-veshchei-tls-dtls/wireshark.png" style="width:100%;"&gt;&lt;/p&gt;
&lt;p&gt;–î–ª—è —Ç–µ—Ö, –∫—Ç–æ –Ω–µ –∑–Ω–∞–µ—Ç —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –∫–∞–∫ –Ω–∞–ø—Ä–∏–º–µ—Ä Wireshark –Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫–µ –Ω–∏–∂–µ, –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –Ω–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç –Ω–∏–∫–∞–∫–æ–π —Ü–µ–Ω–Ω–æ—Å—Ç–∏ ‚Äì —ç—Ç–æ –≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫ –±–µ—Å–ø–æ—Ä—è–¥–æ—á–Ω—ã–π –∏ –±–µ—Å—Å–º—ã—Å–ª–µ–Ω–Ω—ã–π –Ω–∞–±–æ—Ä –±–∞–π—Ç. –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ TLS / DTLS, ¬´–∑–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫—É¬ª (–∏–Ω–æ–≥–¥–∞ –≥–æ–≤–æ—Ä—è—Ç ¬´—á–µ–ª–æ–≤–µ–∫ –ø–æ—Å–µ—Ä–µ–¥–∏–Ω–µ¬ª) –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ (—Ö–æ—Å—Ç, –ø–æ—Ä—Ç, —Ç–∏–ø –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–≥–æ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è), —á–∞—Å—Ç–æ—Ç–µ –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏. –ö—Ä–æ–º–µ —Ç–æ–≥–æ, –æ–Ω –º–æ–∂–µ—Ç —Ä–∞–∑–æ—Ä–≤–∞—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ, –Ω–æ –æ–±–µ —Å—Ç–æ—Ä–æ–Ω—ã –±—É–¥—É—Ç –∑–Ω–∞—Ç—å, —á—Ç–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –±—ã–ª–æ –ø—Ä–µ—Ä–≤–∞–Ω–æ —Ç—Ä–µ—Ç—å–µ–π —Å—Ç–æ—Ä–æ–Ω–æ–π.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2018/01/05/bezopasnost-interneta-veshchei-tls-dtls/data.png" style="width:100%;"&gt;&lt;/p&gt;
&lt;h2&gt;–í–í–ï–î–ï–ù–ò–ï –í –ö–†–ò–ü–¢–û–ì–†–ê–§–ò–Æ&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;–ö—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—è (–æ—Ç –¥—Ä.-–≥—Ä–µ—á. Œ∫œÅœÖœÄœÑœåœÇ ‚Äî —Å–∫—Ä—ã—Ç—ã–π –∏ Œ≥œÅŒ¨œÜœâ ‚Äî –ø–∏—à—É) ‚Äî –Ω–∞—É–∫–∞ –æ –º–µ—Ç–æ–¥–∞—Ö –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏ (–Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø—Ä–æ—á—Ç–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø–æ—Å—Ç–æ—Ä–æ–Ω–Ω–∏–º), —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö (–Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –Ω–µ–∑–∞–º–µ—Ç–Ω–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏), –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (–ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–ª–∏–Ω–Ω–æ—Å—Ç–∏ –∞–≤—Ç–æ—Ä—Å—Ç–≤–∞ –∏–ª–∏ –∏–Ω—ã—Ö —Å–≤–æ–π—Å—Ç–≤ –æ–±—ä–µ–∫—Ç–∞), –∞ —Ç–∞–∫–∂–µ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –æ—Ç–∫–∞–∑–∞ –æ—Ç –∞–≤—Ç–æ—Ä—Å—Ç–≤–∞. ‚Äî –í–∏–∫–∏–ø–µ–¥–∏—è&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;–ö—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—è –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π, —Ç–∞–∫–∏—Ö –∫–∞–∫ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ, —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ-—Ü–∏—Ñ—Ä–æ–≤–∞—è –ø–æ–¥–ø–∏—Å—å, —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Ç. –¥. –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ ‚Äî —ç—Ç–æ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –∏—Å—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (¬´–æ—Ç–∫—Ä—ã—Ç–æ–≥–æ —Ç–µ–∫—Å—Ç–∞¬ª) –≤ –≤–∏–¥–æ–∏–∑–º–µ–Ω–µ–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (¬´–∑–∞–∫—Ä—ã—Ç—ã–π —Ç–µ–∫—Å—Ç¬ª) —Å —Ü–µ–ª—å—é —Å–∫—Ä—ã—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ ¬´–æ—Ç–∫—Ä—ã—Ç–æ–≥–æ —Ç–µ–∫—Å—Ç–∞¬ª –æ—Ç –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–≥–æ ¬´–∑–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫–∞¬ª. –î–µ—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ ‚Äî —ç—Ç–æ –æ–±—Ä–∞—Ç–Ω–∞—è –ø—Ä–æ—Ü–µ–¥—É—Ä–∞, –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ ¬´–æ—Ç–∫—Ä—ã—Ç–æ–≥–æ —Ç–µ–∫—Å—Ç–∞¬ª –∏–∑ ¬´–∑–∞–∫—Ä—ã—Ç–æ–≥–æ¬ª. –ü–æ–Ω—è—Ç–∏—è ¬´–æ—Ç–∫—Ä—ã—Ç—ã–π —Ç–µ–∫—Å—Ç¬ª –∏ ¬´–∑–∞–∫—Ä—ã—Ç—ã–π —Ç–µ–∫—Å—Ç¬ª –≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –ø–æ–¥—Ä–∞–∑—É–º–µ–≤–∞—é—Ç –ª—é–±—É—é, –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Ç–µ–∫—Å—Ç–æ–≤—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é.&lt;/p&gt;
&lt;p&gt;–ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —á—Ç–æ —Å—Ç–æ—Ä–æ–Ω–∞ –ê (–ê–ª–∏—Å–∞) —Ö–æ—á–µ—Ç –ø–µ—Ä–µ–¥–∞—Ç—å —Å—Ç–æ—Ä–æ–Ω–µ –ë (–ë–æ–±) —Å–µ–∫—Ä–µ—Ç–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é, —á—Ç–æ–±—ã –Ω–∏–∫—Ç–æ, –∫—Ä–æ–º–µ –ë–æ–±–∞, –Ω–µ —Å–º–æ–≥ –ø—Ä–æ—á–µ—Å—Ç—å –µ—ë. –î–ª—è —Ç–æ–≥–æ —á—Ç–æ–±—ã ¬´–∑–∞—à–∏—Ñ—Ä–æ–≤–∞—Ç—å¬ª –¥–∞–Ω–Ω—ã–µ, –º–æ–∂–Ω–æ –ø–µ—Ä–µ—Å—Ç–∞–≤–∏—Ç—å –º–µ—Å—Ç–∞–º–∏ —Å–∏–º–≤–æ–ª—ã –≤ –∏—Å—Ö–æ–¥–Ω–æ–º —Ç–µ—Å—Ç–µ –ø–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–º—É –∞–ª–≥–æ—Ä–∏—Ç–º—É (—à–∏—Ñ—Ä –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∏), –∏–∑–≤–µ—Å—Ç–Ω–æ–º—É —Ç–æ–ª—å–∫–æ –ê–ª–∏—Å–µ –∏ –ë–æ–±—É. –¢–∞–∫–∏–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è, –ø—Ä–∏ –∫–æ—Ç–æ—Ä—ã—Ö –ê–ª–∏—Å–∞ –∏ –ë–æ–± –¥–æ–ª–∂–Ω—ã –∑–∞—Ä–∞–Ω–µ–µ (–¥–æ –Ω–∞—á–∞–ª–∞ –æ–±–º–µ–Ω–∞ –¥–∞–Ω–Ω—ã–º–∏) –ø—Ä–∏–¥—É–º–∞—Ç—å –∏ —Å–æ–≥–ª–∞—Å–æ–≤–∞—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π —Å–µ–∫—Ä–µ—Ç, –Ω–∞–∑—ã–≤–∞—é—Ç—Å—è &lt;strong&gt;—Å–∏–º–º–µ—Ç—Ä–∏—á–Ω—ã–º–∏&lt;/strong&gt;. &lt;/p&gt;
&lt;p&gt;–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞—é—Ç, —á—Ç–æ ¬´–∑–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫¬ª –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –∑–Ω–∞–µ—Ç —Å–∞–º –∞–ª–≥–æ—Ä–∏—Ç–º —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è (–∞–ª–≥–æ—Ä–∏—Ç–º –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –Ω–∞–¥ –æ—Ç–∫—Ä—ã—Ç—ã–º —Ç–µ—Å—Ç–æ–º), –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –∑–∞–∫—Ä—ã—Ç–æ–º—É —Ç–µ–∫—Å—Ç—É –∏ –¥–∞–∂–µ –º–æ–∂–µ—Ç –∑–Ω–∞—Ç—å —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã –æ—Ç–∫—Ä—ã—Ç–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä ¬´–∑–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫¬ª –º–æ–∂–µ—Ç –ø—Ä–µ–¥–ø–æ–ª–æ–∂–∏—Ç—å, —á—Ç–æ –æ—Ç–∫—Ä—ã—Ç—ã–π —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å —Ñ—Ä–∞–∑—ã ¬´–î–æ–±—Ä—ã–π –¥–µ–Ω—å!¬ª). –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ, —á—Ç–æ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ ¬´–∑–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫—É¬ª, —ç—Ç–æ –Ω–µ–∫–∏–π ¬´—Å–µ–∫—Ä–µ—Ç¬ª (—Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è) –∏ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–ø–æ—Å–æ–± –≤—ã—á–∏—Å–ª–∏—Ç—å —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á (–∏ —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é —Ü–µ–ª–∏–∫–æ–º) ‚Äì —ç—Ç–æ –ø–æ–ª–Ω—ã–π –ø–µ—Ä–µ–±–æ—Ä –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ —Å–µ–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞. –°—á–∏—Ç–∞–µ—Ç—Å—è, —á—Ç–æ –¥–ª–∏–Ω–∞ –ø—Ä–∏–º–µ–Ω—è–µ–º—ã—Ö –≤ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∞–ª–≥–æ—Ä–∏—Ç–º–∞—Ö –∫–ª—é—á–µ–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, 256 –±–∏—Ç) –Ω–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–¥–æ–±—Ä–∞—Ç—å –∫–ª—é—á –ø–µ—Ä–µ–±–æ—Ä–æ–º –∑–∞ –ø—Ä–∏–µ–º–ª–µ–º–æ–µ –≤—Ä–µ–º—è. –≠–∫–∑–æ—Ç–∏—á–µ—Å–∫–∏–µ —Å–ø–æ—Å–æ–±—ã –≤—Ä–æ–¥–µ —Ç–µ—Ä–º–æ—Ä–µ–∫—Ç–∞–ª—å–Ω–æ–≥–æ –∫—Ä–∏–ø—Ç–æ–∞–Ω–∞–ª–∏–∑–∞ –≤ —Ä–∞—Å—á—ë—Ç –Ω–µ –±–µ—Ä—ë–º.&lt;/p&gt;
&lt;p&gt;–î–ª—è –∑–∞–∫—Ä–µ–ø–ª–µ–Ω–∏—è –º–∞—Ç–µ—Ä–∏–∞–ª–∞ –ø—Ä–∏–º–µ—Ä —Å–∏–º–º–µ—Ç—Ä–∏—á–Ω–æ–≥–æ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è. –ê–ª–∏—Å–∞ —Ö–æ—á–µ—Ç –ø–µ—Ä–µ–¥–∞—Ç—å —Ñ—Ä–∞–∑—É "Some Secret", –¥–ª—è —ç—Ç–æ–≥–æ –æ–Ω–∞ —à–∏—Ñ—Ä—É–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ. –ü–∞—Ä–æ–ª—å –ø—É—Å—Ç—å –±—É–¥–µ—Ç pass:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ echo &amp;quot;Some Secret&amp;quot; | \
openssl enc -aes-256-cbc -a -pass pass:pass -nosalt
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ù–∞ –≤—ã—Ö–æ–¥–µ –ê–ª–∏—Å–∞ –ø–æ–ª—É—á–∞–µ—Ç –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –µ–≥–æ –ø–æ –Ω–µ–∑–∞—â–∏—â—ë–Ω–Ω–æ–º—É –∫–∞–Ω–∞–ª—É —Å–≤—è–∑–∏. –ë–æ–±, –ø–æ–ª—É—á–∏–≤ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, –∑–Ω–∞–µ—Ç –ø–∞—Ä–æ–ª—å –∏ –¥–µ—à–∏—Ñ—Ä—É–µ—Ç –∏—Ö:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ echo &amp;quot;9pIRFLwioGc41Fw+aHLxuw==&amp;quot; | \
openssl enc -aes-256-cbc -d -a -pass pass:pass -nosalt
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ß—É–¥–Ω–µ–Ω—å–∫–æ, –Ω–æ –∫–∞–∫ –ë–æ–±—É –∑–Ω–∞—Ç—å, —á—Ç–æ —ç—Ç–æ –∏–º–µ–Ω–Ω–æ –ê–ª–∏—Å–∞ –æ—Ç–ø—Ä–∞–≤–∏–ª–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ ? –î–∞, ¬´–∑–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫¬ª –Ω–µ –º–æ–∂–µ—Ç —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–æ—Å—ã–ª–∫–∏, –Ω–æ —á—Ç–æ, –µ—Å–ª–∏ –µ–º—É —ç—Ç–æ –∏ –Ω–µ –Ω—É–∂–Ω–æ ? –í–µ–¥—å –Ω–∏—á—Ç–æ –Ω–µ –º–µ—à–∞–µ—Ç ¬´–∑–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫—É¬ª –ø—Ä–æ—Å—Ç–æ –ø–æ–≤—Ç–æ—Ä–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–µ—Ä–µ—Ö–≤–∞—á–µ–Ω–Ω–æ–µ —Ä–∞–Ω–µ–µ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –Ω—É–∂–Ω—ã–π –º–æ–º–µ–Ω—Ç. &lt;/p&gt;
&lt;p&gt;–ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º —É –Ω–∞—Å –µ—Å—Ç—å –ø–µ—Ä–µ–¥–∞—Ç—á–∏–∫ –∏ –ø—Ä–∏–µ–º–Ω–∏–∫, –∫–æ—Ç–æ—Ä—ã–π —É–ø—Ä–∞–≤–ª—è–µ—Ç –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º –º–µ—Ö–∞–Ω–∏–∑–º–æ–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –¥–≤–µ—Ä—å). –ú—ã —Ö–æ—Ç–∏–º –æ—Ç–∫—Ä—ã–≤–∞—Ç—å –¥–≤–µ—Ä—å –ø–æ –∫–æ–º–∞–Ω–¥–µ —Å –ø–µ—Ä–µ–¥–∞—Ç—á–∏–∫–∞. –ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ, –º—ã —Ö–æ—Ç–∏–º –æ–±–µ–∑–æ–ø–∞—Å–∏—Ç—å —Å–µ–±—è, –ø—Ä–∏–µ–º–Ω–∏–∫ –¥–æ–ª–∂–µ–Ω —Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –Ω–∞ ¬´—Ä–æ–¥–Ω–æ–π¬ª –ø–µ—Ä–µ–¥–∞—Ç—á–∏–∫. –ó–∞–ø–∏—Å—ã–≤–∞–µ–º –≤ –ø–µ—Ä–µ–¥–∞—Ç—á–∏–∫ –∏ –ø—Ä–∏–µ–º–Ω–∏–∫ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π ¬´—Å–µ–∫—Ä–µ—Ç–Ω—ã–π¬ª –ø–∞—Ä–æ–ª—å (–∫–ª—é—á). –ü–µ—Ä–µ–¥–∞—Ç—á–∏–∫ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–º–∞–Ω–¥—É, –ø—Ä–∏–µ–º–Ω–∏–∫ –¥–µ—à–∏—Ñ—Ä—É–µ—Ç –ø–∞—Ä–æ–ª–µ–º –∏ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –¥–≤–µ—Ä–∏. –¢–µ–º –≤—Ä–µ–º–µ–Ω–µ–º ¬´–∑–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫¬ª –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–µ—Ç —Ä–∞–¥–∏–æ—ç—Ñ–∏—Ä –∏ –µ—Å–ª–∏ –æ–Ω –ø—Ä–æ—Å—Ç–æ –ø–æ–≤—Ç–æ—Ä–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç –ø–µ—Ä–µ—Ö–≤–∞—á–µ–Ω–Ω—ã–µ —Ä–∞–Ω–µ–µ –¥–∞–Ω–Ω—ã–µ, –¥–≤–µ—Ä–∏ –æ—Ç–∫—Ä–æ—é—Ç—Å—è... –í—ã—Ö–æ–¥–∏—Ç –æ–¥–Ω–æ–≥–æ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ.&lt;/p&gt;
&lt;p&gt;–†–∞—Å—Å–º–æ—Ç—Ä–∏–º —Ä–µ—à–µ–Ω–∏–µ –ø–æ–¥–æ–±–Ω–æ–π –ø—Ä–æ–±–ª–µ–º—ã –Ω–∞ ¬´–±—ã—Ç–æ–≤–æ–º¬ª –ø—Ä–∏–º–µ—Ä–µ. –ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —è –æ–±—â–∞—é—Å—å —Å–æ —Å–≤–æ–∏–º –¥—Ä—É–≥–æ–º –≤ —á–∞—Ç–µ. –Ø —Ö–æ—á—É —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —è –æ–±—â–∞—é—Å—å –∏–º–µ–Ω–Ω–æ —Å –Ω–∏–º, –∞ –Ω–µ —Å –µ–≥–æ –¥–µ–¥—É—à–∫–æ–π/–±–∞–±—É—à–∫–æ–π –∫–æ—Ç–æ—Ä–∞—è —Å–µ–ª–∞ –∑–∞ –µ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä. –Ø –º–æ–≥—É –∑–∞–¥–∞—Ç—å –¥—Ä—É–≥—É –≤–æ–ø—Ä–æ—Å, –æ—Ç–≤–µ—Ç –Ω–∞ –∫–æ—Ç–æ—Ä—ã–π –∑–Ω–∞–µ—Ç —Ç–æ–ª—å–∫–æ –æ–Ω –∏ —è. –£ –º–µ–Ω—è –∏ —É –¥—Ä—É–≥–∞ –µ—Å—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π ¬´—Å–µ–∫—Ä–µ—Ç–Ω—ã–π¬ª –∫–ª—é—á —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è. –Ø –æ—Ç–ø—Ä–∞–≤–ª—è—é –µ–º—É –ª—é–±–æ–π, –∞–±—Å–æ–ª—é—Ç–Ω–æ —Å–ª—É—á–∞–π–Ω—ã–π —Ñ—Ä–∞–≥–º–µ–Ω—Ç —Ç–µ–∫—Å—Ç–∞ (—Å–ª—É—á–∞–π–Ω–æ–µ —á–∏—Å–ª–æ) –∏ –ø—Ä–æ—à—É –µ–≥–æ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞—Ç—å. –û–Ω —à–∏—Ñ—Ä—É–µ—Ç —Ñ—Ä–∞–≥–º–µ–Ω—Ç —Å–≤–æ–∏–º –∫–ª—é—á–æ–º –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç –º–Ω–µ. –Ø —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤—ã–≤–∞—é –ø–æ–ª—É—á–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç –∏ —Å—Ä–∞–≤–Ω–∏–≤–∞—é —Å –æ—Ä–∏–≥–∏–Ω–∞–ª–æ–º. –ï—Å–ª–∏ –∏—Å—Ö–æ–¥–Ω—ã–π –∏ —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ—Ä–∞–≥–º–µ–Ω—Ç –∏–¥–µ–Ω—Ç–∏—á–Ω—ã ‚Äì –∑–Ω–∞—á–∏—Ç —è –æ–±—â–∞—é—Å—å –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Å –¥—Ä—É–≥–æ–º, —Ç–∞–∫ –∫–∞–∫ ¬´–ø—Ä–∞–≤–∏–ª—å–Ω–æ¬ª –∑–∞—à–∏—Ñ—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—Å—Ç –º–æ–≥ —Ç–æ–ª—å–∫–æ –æ–Ω. –í —Å–ª–µ–¥—É—é—â–∏–π —Ä–∞–∑, –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ &lt;strong&gt;–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å&lt;/strong&gt; —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞ —è –≤—ã—à–ª—é –Ω–æ–≤—ã–π, —Å–ª—É—á–∞–π–Ω—ã–π, —Ñ—Ä–∞–≥–º–µ–Ω—Ç —Ç–µ–∫—Å—Ç–∞ –∏ –¥–∞–∂–µ –µ—Å–ª–∏ ¬´–∑–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫¬ª –ø–µ—Ä–µ—Ö–≤–∞—Ç–∏–ª –ø—Ä–µ–¥—ã–¥—É—â–∏–π ¬´—Å–µ–∞–Ω—Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏¬ª ‚Äì —ç—Ç–æ –µ–º—É –Ω–∏—á–µ–≥–æ –Ω–µ –¥–∞—Å—Ç, —Ç–∞–∫ –∫–∞–∫ –∫–∞–∂–¥—ã–π —Ä–∞–∑ –±—É–¥–µ—Ç –Ω–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å (–Ω–æ–≤—ã–π —Ñ—Ä–∞–≥–º–µ–Ω—Ç –æ—Ç–∫—Ä—ã—Ç–æ–≥–æ —Ç–µ–∫—Å—Ç–∞) –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ –Ω–æ–≤—ã–π –æ—Ç–≤–µ—Ç (–∑–∞–∫—Ä—ã—Ç—ã–π —Ç–µ–∫—Å—Ç).&lt;/p&gt;
&lt;h2&gt;TLS / DTLS&lt;/h2&gt;
&lt;p&gt;–ü—Ä–æ—Ç–æ–∫–æ–ª—ã TLS / DTLS –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω—ã –¥–ª—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Ç—Ä—ë—Ö —É—Å–ª—É–≥ –≤—Å–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º, —Ä–∞–±–æ—Ç–∞—é—â–∏–º –Ω–∞–¥ –Ω–∏–º–∏: &lt;strong&gt;—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ&lt;/strong&gt;, &lt;strong&gt;–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é&lt;/strong&gt; –∏ &lt;strong&gt;—Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å&lt;/strong&gt;. –î–ª—è —Ç–æ–≥–æ —á—Ç–æ–±—ã —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –∫–∞–Ω–∞–ª –¥–∞–Ω–Ω—ã—Ö, –∫–ª–∏–µ–Ω—Ç –∏ —Å–µ—Ä–≤–µ—Ä –¥–æ–ª–∂–Ω—ã —Å–æ–≥–ª–∞—Å–æ–≤–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è, –∞ –∏–º–µ–Ω–Ω–æ: –≤–µ—Ä—Å–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–≥–æ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞, —Å–ø–æ—Å–æ–± —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö, –∞ —Ç–∞–∫–∂–µ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã (–≤ —Å–ª—É—á–∞–µ –∞—Å–∏–º–º–µ—Ç—Ä–∏—á–Ω–æ–≥–æ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è). –ü—Ä–æ—Ü–µ–¥—É—Ä–∞ –Ω–∞—á–∞–ª–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è Handshake (—Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏–µ). –¢–∞–∫–∂–µ –≤ —Ä–∞–º–∫–∞—Ö –ø—Ä–æ—Ü–µ–¥—É—Ä—ã Handshake –∫–ª–∏–µ–Ω—Ç –∏ —Å–µ—Ä–≤–µ—Ä –æ–±–º–µ–Ω–∏–≤–∞—é—Ç—Å—è —Å–ª—É—á–∞–π–Ω—ã–º–∏ —á–∏—Å–ª–∞–º–∏, —Ç.–µ, –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è ‚Äì –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Å—É–±—ä–µ–∫—Ç–∞ –∏ —Ç–æ–≥–æ, –∑–∞ –∫–æ–≥–æ –æ–Ω –ø—ã—Ç–∞–µ—Ç—Å—è —Å–µ–±—è –≤—ã–¥–∞—Ç—å. –ü–æ—Å–ª–µ Handshake –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –æ–±–º–µ–Ω –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏ –∑–∞—â–∏—Ç—ã –æ—Ç –µ—ë –ø–æ–¥–º–µ–Ω—ã.&lt;/p&gt;
&lt;h2&gt;PRE-SHARED KEY&lt;/h2&gt;
&lt;p&gt;–í–µ—Ä–Ω—ë–º—Å—è –∫ –ø—Ä–∏–º–µ—Ä—É —Å –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–º. –ö–ª–∏–µ–Ω—Ç –∏ —Å–µ—Ä–≤–µ—Ä –æ–±–ª–∞–¥–∞—é—Ç –æ–±—â–∏–º —Å–µ–∫—Ä–µ—Ç–æ–º (–∫–ª—é—á–æ–º) –∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –±—ã–ª–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –ø–æ–¥–ª–∏–Ω–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω–æ–≥–æ —Å–µ–∫—Ä–µ—Ç–∞. –í –æ–±—â–µ–º —Å–ª—É—á–∞–µ –¥–ª—è –∑–Ω–∞–∫–æ–º—Å—Ç–≤–∞ —Å PSK (pre-shared key) —É–¥–æ–±–Ω–æ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –∫–∞–∫–∏–º-–ª–∏–±–æ —Ç–µ—Å—Ç–æ–≤—ã–º–∏ —Å–µ—Ä–≤–µ—Ä–æ–º –∏ –∫–ª–∏–µ–Ω—Ç–æ–º.&lt;/p&gt;
&lt;p&gt;–°–µ—Ä–≤–µ—Ä DTLS-PSK:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ openssl s_server -port 20220 -psk 1a2b3c4d -nocert -dtls1_2
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ö–ª–∏–µ–Ω—Ç DTLS-PSK:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ openssl s_client -port 20220 -psk 1a2b3c4d -dtls1_2
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–û–±–º–µ–Ω –¥–∞–Ω–Ω—ã–º–∏ –º–µ–∂–¥—É –∫–ª–∏–µ–Ω—Ç–æ–º –∏ —Å–µ—Ä–≤–µ—Ä–æ–º –¥–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω–∏–π, –ø–∏—à–µ–º —á—Ç–æ-–Ω–∏–±—É–¥—å –≤ –∫–æ–Ω—Å–æ–ª—å –∏ —Å–º–æ—Ç—Ä–∏–º –∫–∞–∫ –∏–¥—É—Ç –ø–∞–∫–µ—Ç—ã –≤ Wireshark. &lt;strong&gt;–°–∏–º–º–µ—Ç—Ä–∏—á–Ω–æ–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ&lt;/strong&gt; –º–µ–Ω–µ–µ —Ç—Ä–µ–±–æ–≤–∞—Ç–µ–ª—å–Ω–æ –∫ —Ä–µ—Å—É—Ä—Å–∞–º —á–µ–º –∞—Å–∏–º–º–µ—Ç—Ä–∏—á–Ω–æ–µ, —ç—Ç–æ –º–æ–∂–µ—Ç –æ–∫–∞–∑–∞—Ç—å—Å—è —Ä–µ—à–∞—é—â–∏–º —Ñ–∞–∫—Ç–æ—Ä–æ–º –¥–ª—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –Ω–∞ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞—Ö.&lt;/p&gt;
&lt;h2&gt;PUBLIC KEY&lt;/h2&gt;
&lt;p&gt;–í —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞—Ö –Ω–∞–∏–±–æ–ª—å—à–µ–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–ª—É—á–∏–ª–æ &lt;strong&gt;–∞—Å–∏–º–º–µ—Ç—Ä–∏—á–Ω–æ–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ&lt;/strong&gt;, –∫–æ—Ç–æ—Ä–æ–µ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç –Ω–∞–ª–∏—á–∏–µ –¥–≤—É—Ö –∫–ª—é—á–µ–π ‚Äì –ø—É–±–ª–∏—á–Ω–æ–≥–æ –∏ –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ. –°–æ–æ–±—â–µ–Ω–∏–µ —à–∏—Ñ—Ä—É–µ—Ç—Å—è –ø—É–±–ª–∏—á–Ω—ã–º –∫–ª—é—á–æ–º, –∞ —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏–≤–∞—Ç–Ω—ã–º. –í –æ—Å–Ω–æ–≤–µ –¥–∞–Ω–Ω–æ–π –º–∞–≥–∏–∏ –ª–µ–∂–∏—Ç –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞ –∏ &lt;em&gt;–æ–¥–Ω–æ—Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å –ø–æ—Ç–∞–π–Ω—ã–º –≤—Ö–æ–¥–æ–º&lt;/em&gt;, —Ç–æ –µ—Å—Ç—å —Ç–∞–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏, —É –∫–æ—Ç–æ—Ä—ã—Ö –ø–æ –∏–∑–≤–µ—Å—Ç–Ω–æ–º—É &lt;em&gt;x&lt;/em&gt; –¥–æ–≤–æ–ª—å–Ω–æ –ø—Ä–æ—Å—Ç–æ –Ω–∞–π—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏–µ &lt;em&gt;f(x)&lt;/em&gt;, —Ç–æ–≥–¥–∞ –∫–∞–∫ –æ–±—Ä–∞—Ç–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ &lt;em&gt;x&lt;/em&gt; –∏–∑ &lt;em&gt;f(x)&lt;/em&gt; –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –∑–∞ —Ä–∞–∑—É–º–Ω—ã–π —Å—Ä–æ–∫ –±–µ–∑ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ (—Å–µ–∫—Ä–µ—Ç–∞), –Ω–∞–∑—ã–≤–∞–µ–º–æ–π ¬´–ª–∞–∑–µ–π–∫–æ–π¬ª –∏–ª–∏ ¬´–ø–æ—Ç–∞–π–Ω—ã–º –≤—Ö–æ–¥–æ–º¬ª.&lt;/p&gt;
&lt;p&gt;–£–ø—Ä–æ—â—ë–Ω–Ω–æ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —Å –æ—Ç–∫—Ä—ã—Ç—ã–º –∫–ª—é—á–æ–º –º–æ–∂–Ω–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å –≤ –≤–∏–¥–µ –æ–±—ã—á–Ω–æ–≥–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä –Ω–∞–≤–µ—Å–Ω–æ–≥–æ) –∑–∞–º–∫–∞ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∑–∞—â—ë–ª–∫–æ–π. –õ—é–±–æ–π —Å–ø–æ—Å–æ–±–µ–Ω –∑–∞–ø–µ—Ä–µ—Ç—å –∑–∞–º–æ–∫, –ø—Ä–æ—Å—Ç–æ –∑–∞—â–µ–ª–∫–Ω—É–≤ –µ–≥–æ, —á—Ç–æ–±—ã –æ–Ω –∑–∞–∫—Ä—ã–ª—Å—è, –Ω–æ –æ—Ç–ø–µ—Ä–µ—Ç—å –µ–≥–æ –º–æ–∂–µ—Ç —Ç–æ–ª—å–∫–æ —Ç–æ—Ç, —É –∫–æ–≥–æ –µ—Å—Ç—å –∫–ª—é—á. –ó–∞–ø–µ—Ä–µ—Ç—å –∑–∞–º–æ–∫ (–∑–∞—à–∏—Ñ—Ä–æ–≤—ã–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ) –ª–µ–≥–∫–æ, –ø–æ—á—Ç–∏ –≤—Å–µ –º–æ–≥—É—Ç —ç—Ç–æ —Å–¥–µ–ª–∞—Ç—å, –Ω–æ –æ—Ç–∫—Ä—ã—Ç—å –µ–≥–æ (—Ä–∞—Å—à–∏—Ñ—Ä–æ–≤—ã–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ) –∏–º–µ–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ç–æ–ª—å–∫–æ –≤–ª–∞–¥–µ–ª–µ—Ü –∫–ª—é—á–∞. –ü–æ–Ω–∏–º–∞–Ω–∏–µ —Ç–æ–≥–æ, –∫–∞–∫ –∑–∞—â–µ–ª–∫–Ω—É—Ç—å –∑–∞–º–æ–∫, —á—Ç–æ–±—ã –æ–Ω –∑–∞–∫—Ä—ã–ª—Å—è, –Ω–∏—á–µ–≥–æ –Ω–µ —Å–∫–∞–∂–µ—Ç –≤–∞–º, –∫–∞–∫ –µ–≥–æ –æ—Ç–ø–µ—Ä–µ—Ç—å.&lt;/p&gt;
&lt;p&gt;–î–ª—è –Ω–∞—á–∞–ª–∞ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤ –Ω—É–∂–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ä—É –∫–ª—é—á–µ–π (–æ—Ç–∫—Ä—ã—Ç—ã–π –∏ –∑–∞–∫—Ä—ã—Ç—ã–π).&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ openssl req -x509 -days 365 -nodes -newkey rsa:2048  \
    -subj &amp;quot;/CN=localhost&amp;quot; -keyout selfsigned.key -out selfsigned.crt
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ó–∞–∫—Ä—ã—Ç—ã–π –∫–ª—é—á —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ —Å–µ–∫—Ä–µ—Ç–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, –æ—Ç–∫—Ä—ã—Ç—ã–π –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –∫–æ–º—É —É–≥–æ–¥–Ω–æ, –≤ —Ç–æ–º —á–∏—Å–ª–µ –∏ –∑–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫—É. –ü—Ä–æ—Å—Ç–µ–π—à–∏–π —Ç–µ—Å—Ç–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ openssl s_server -key selfsigned.key -cert selfsigned.crt -accept 44330 -www
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–î–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞—â–∏—â—ë–Ω–Ω–æ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –ø–æ –Ω–µ–∑–∞—â–∏—â—ë–Ω–Ω–æ–º—É –∫–∞–Ω–∞–ª—É –∫–ª–∏–µ–Ω—Ç—É –Ω—É–∂–µ–Ω —Ç–æ–ª—å–∫–æ –æ—Ç–∫—Ä—ã—Ç—ã–π –∫–ª—é—á.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ curl https://localhost:44330 -v --cacert selfsigned.crt
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–í–æ—Ç —á—Ç–æ –ø–æ —ç—Ç–æ–º—É –ø–æ–≤–æ–¥—É –¥—É–º–∞–µ—Ç Wireshark. –ò–∑ —Å–ø–∏—Å–∫–∞ –≤—Å–µ—Ö –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–º (Client Hello) –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è —Å–µ—Ä–≤–µ—Ä –≤—ã–±—Ä–∞–ª &lt;code&gt;TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256&lt;/code&gt;:&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2018/01/05/bezopasnost-interneta-veshchei-tls-dtls/https.png" style="width:100%;"&gt;&lt;/p&gt;
&lt;p&gt;–ù–µ—Ä–∞—Å–∫—Ä—ã—Ç—ã–º –æ—Å—Ç–∞–ª—Å—è –æ–¥–∏–Ω –≤–æ–ø—Ä–æ—Å ‚Äì –∫–∞–∫ –ø–µ—Ä–µ–¥–∞—Ç—å –æ—Ç–∫—Ä—ã—Ç—ã–π –∫–ª—é—á —Ç–∞–∫, —á—Ç–æ–±—ã –µ–≥–æ –Ω–µ–ª—å–∑—è –±—ã–ª–æ –ø–æ–¥–º–µ–Ω–∏—Ç—å ? –ö–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ —Å–µ—Ç–∏ –ø–æ—è–≤–ª—è—é—Ç—Å—è / –∏—Å—á–µ–∑–∞—é—Ç —Ç—ã—Å—è—á–∏ —Ä–µ—Å—É—Ä—Å–æ–≤ –∏ —Ñ–∏–∑–∏—á–µ—Å–∫–∏ —Å–ª–æ–∂–Ω–æ –±—ã–ª–æ –±—ã –ø–æ—Å—Ç–∞–≤–ª—è—Ç—å / –æ–±–Ω–æ–≤–ª—è—Ç—å –≤—Å–µ –∏—Ö –æ—Ç–∫—Ä—ã—Ç—ã–µ –∫–ª—é—á–∏ —Å—Ä–∞–∑—É –≤–º–µ—Å—Ç–µ —Å –∫–ª–∏–µ–Ω—Ç–æ–º (–±—Ä–∞—É–∑–µ—Ä–æ–º). –¢—É—Ç –Ω–∞ –ø–æ–º–æ—â—å –ø—Ä–∏—Ö–æ–¥—è—Ç —Ç.–Ω. —Ü–µ–Ω—Ç—Ä—ã —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (–∞–Ω–≥–ª. Certification authority, CA) ‚Äì —Å—Ç–æ—Ä–æ–Ω—ã, —á—å—è —á–µ—Å—Ç–Ω–æ—Å—Ç—å –Ω–µ–æ—Å–ø–æ—Ä–∏–º–∞, –∞ –æ—Ç–∫—Ä—ã—Ç—ã–π –∫–ª—é—á —à–∏—Ä–æ–∫–æ –∏–∑–≤–µ—Å—Ç–µ–Ω –∏ –∫–ª–∏–µ–Ω—Ç (curl, –±—Ä–∞—É–∑–µ—Ä) –µ–≥–æ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –ø–æ –Ω–µ–∑–∞—â–∏—â—ë–Ω–Ω–æ–º—É –∫–∞–Ω–∞–ª—É. –ó–∞–¥–∞—á–∞ —Ü–µ–Ω—Ç—Ä–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ ‚Äì –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—Ç—å –ø–æ–¥–ª–∏–Ω–Ω–æ—Å—Ç—å –∫–ª—é—á–µ–π —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è —Å –ø–æ–º–æ—â—å—é —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –ø–æ–¥–ø–∏—Å–∏. &lt;/p&gt;
&lt;p&gt;–ê—Å–∏–º–º–µ—Ç—Ä–∏—á–Ω–æ–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–æ—Ü–µ–¥—É—Ä–µ TLS Handshake –≤–æ –≤—Ä–µ–º—è –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è. –ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç—É–Ω–Ω–µ–ª—è –≤ –¥–µ–ª–æ –≤—Å—Ç—É–ø–∞–µ—Ç —Å–∏–º–º–µ—Ç—Ä–∏—á–Ω–∞—è –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—è, –∏ –æ–±—â–µ–Ω–∏–µ –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–æ –∏–º–µ–Ω–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º–∏ —Å–∏–º–º–µ—Ç—Ä–∏—á–Ω—ã–º–∏ –∫–ª—é—á–∞–º–∏. –≠—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–ª—è —É–≤–µ–ª–∏—á–µ–Ω–∏—è –±—ã—Å—Ç—Ä–æ–¥–µ–π—Å—Ç–≤–∏—è, —Ç–∞–∫ –∫–∞–∫ –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—è —Å –æ—Ç–∫—Ä—ã—Ç—ã–º –∫–ª—é—á–æ–º —Ç—Ä–µ–±—É–µ—Ç –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –±–æ–ª—å—à–µ –≤—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω–æ–π –º–æ—â–Ω–æ—Å—Ç–∏. –ù—É –∫–∞–∫-—Ç–æ —Ç–∞–∫.&lt;/p&gt;</content><category term="contiki"></category><category term="msp430"></category><category term="TLS"></category></entry><entry><title>–Ø–∑—ã–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ç–µ–∫—Å—Ç–æ–≤ AWK</title><link href="http://proiot.ru/blog/posts/2017/11/17/iazyk-obrabotki-strukturirovannykh-tekstov-awk/" rel="alternate"></link><published>2017-11-17T00:00:00+02:00</published><updated>2017-11-17T00:00:00+02:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2017-11-17:/blog/posts/2017/11/17/iazyk-obrabotki-strukturirovannykh-tekstov-awk/</id><summary type="html">&lt;p&gt;¬´AWK¬ª ‚Äî –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä—É–µ–º—ã–π –¢—å—é—Ä–∏–Ω–≥-–ø–æ–ª–Ω—ã–π —è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–π –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç–µ–∫—Å—Ç–∞ –∏ —Å–æ–∑–¥–∞–Ω–∏—è –æ—Ç—á–µ—Ç–æ–≤. –ù–µ–æ–±—ã—á–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —è–∑—ã–∫–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –æ—Ç –ø–µ—Ä–≤—ã—Ö –±—É–∫–≤ —Ñ–∞–º–∏–ª–∏–π –∞–≤—Ç–æ—Ä–æ–≤ ‚Äî &lt;em&gt;Alfred V. &lt;strong&gt;A&lt;/strong&gt;ho&lt;/em&gt;, &lt;em&gt;Peter J. &lt;strong&gt;W&lt;/strong&gt;einberger&lt;/em&gt; –∏ &lt;em&gt;Brian W. &lt;strong&gt;K&lt;/strong&gt;ernighan&lt;/em&gt;. &lt;/p&gt;
&lt;p&gt;¬´AWK¬ª —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç –≤—Ö–æ–¥–Ω–æ–π –ø–æ—Ç–æ–∫ –∫–∞–∫ —Å–ø–∏—Å–æ–∫ –∑–∞–ø–∏—Å–µ–π. –ü—Ä–æ–≥—Ä–∞–º–º–∞ –Ω–∞ ¬´AWK¬ª –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –∏–∑ —Å–µ–±—è –Ω–∞–±–æ—Ä –ø—Ä–∞–≤–∏–ª –≤–∏–¥–∞ ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;p&gt;¬´AWK¬ª ‚Äî –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä—É–µ–º—ã–π –¢—å—é—Ä–∏–Ω–≥-–ø–æ–ª–Ω—ã–π —è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–π –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç–µ–∫—Å—Ç–∞ –∏ —Å–æ–∑–¥–∞–Ω–∏—è –æ—Ç—á–µ—Ç–æ–≤. –ù–µ–æ–±—ã—á–Ω–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ —è–∑—ã–∫–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –æ—Ç –ø–µ—Ä–≤—ã—Ö –±—É–∫–≤ —Ñ–∞–º–∏–ª–∏–π –∞–≤—Ç–æ—Ä–æ–≤ ‚Äî &lt;em&gt;Alfred V. &lt;strong&gt;A&lt;/strong&gt;ho&lt;/em&gt;, &lt;em&gt;Peter J. &lt;strong&gt;W&lt;/strong&gt;einberger&lt;/em&gt; –∏ &lt;em&gt;Brian W. &lt;strong&gt;K&lt;/strong&gt;ernighan&lt;/em&gt;. &lt;/p&gt;
&lt;p&gt;¬´AWK¬ª —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç –≤—Ö–æ–¥–Ω–æ–π –ø–æ—Ç–æ–∫ –∫–∞–∫ —Å–ø–∏—Å–æ–∫ –∑–∞–ø–∏—Å–µ–π. –ü—Ä–æ–≥—Ä–∞–º–º–∞ –Ω–∞ ¬´AWK¬ª –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –∏–∑ —Å–µ–±—è –Ω–∞–±–æ—Ä –ø—Ä–∞–≤–∏–ª –≤–∏–¥–∞ ¬´—à–∞–±–ª–æ–Ω ‚Äî –¥–µ–π—Å—Ç–≤–∏–µ¬ª, –≥–¥–µ —à–∞–±–ª–æ–Ω —è–≤–ª—è–µ—Ç—Å—è &lt;a href="http://proiot.ru/blog/posts/2017/11/03/likbez-po-grep-i-reguliarnym-vyrazheniiam/"&gt;—Ä–µ–≥—É–ª—è—Ä–Ω—ã–º –≤—ã—Ä–∞–∂–µ–Ω–∏–µ–º&lt;/a&gt;, –∞ –¥–µ–π—Å—Ç–≤–∏–µ ‚Äî –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é –∫–æ–º–∞–Ω–¥ –∏–ª–∏ —Ñ—É–Ω–∫—Ü–∏–π. –ï—Å–ª–∏ —à–∞–±–ª–æ–Ω –Ω–µ —É–∫–∞–∑–∞–Ω, —Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –¥–ª—è –ª—é–±–æ–π –∑–∞–ø–∏—Å–∏. –ï—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω–æ –¥–µ–π—Å—Ç–≤–∏–µ, —Ç–æ –∑–∞–ø–∏—Å—å –≤—ã–≤–æ–¥–∏—Ç—Å—è –≤ –≤—ã—Ö–æ–¥–Ω–æ–π –ø–æ—Ç–æ–∫. –ö–∞–∂–¥–∞—è –∑–∞–ø–∏—Å—å –ø–æ–æ—á–µ—Ä—ë–¥–Ω–æ —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç—Å—è —Å–æ –≤—Å–µ–º–∏ —à–∞–±–ª–æ–Ω–∞–º–∏, –∏ –∫–∞–∂–¥—ã–π —Ä–∞–∑ –∫–æ–≥–¥–∞ –æ–Ω–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —à–∞–±–ª–æ–Ω—É, –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —É–∫–∞–∑–∞–Ω–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ. –ö–∞–∂–¥–∞—è –∑–∞–ø–∏—Å—å –≤ —Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å –¥–µ–ª–∏—Ç—Å—è –Ω–∞ –ø–æ–ª—è. –£–ø—Ä–æ—â–µ–Ω–Ω–æ, –µ—Å–ª–∏ –≥–æ–≤–æ—Ä–∏—Ç—å –æ–± –æ–±—ã—á–Ω–æ–º —Ç–µ–∫—Å—Ç–µ –∏ –Ω–µ —É—á–∏—Ç—ã–≤–∞—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ ¬´AWK¬ª, —Ç–æ –∑–∞–ø–∏—Å—å ‚Äî —ç—Ç–æ &lt;strong&gt;—Å—Ç—Ä–æ–∫–∞&lt;/strong&gt;, –∞ –ø–æ–ª–µ ‚Äî —ç—Ç–æ &lt;strong&gt;—Å–ª–æ–≤–æ&lt;/strong&gt; –≤ —Å—Ç—Ä–æ–∫–µ.&lt;/p&gt;
&lt;p&gt;–ï—Å–ª–∏ —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å —Ä–µ–¥–∞–∫—Ç–æ—Ä &lt;a href="http://proiot.ru/blog/posts/2017/11/11/neinteraktivnyi-tekstovyi-redaktor-sed/"&gt;SED&lt;/a&gt; –∏ —è–∑—ã–∫ ¬´AWK¬ª, —Ç–æ –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å —Å—Ç–æ–∏—Ç –≤—Å–ø–æ–º–Ω–∏—Ç—å, —á—Ç–æ –æ–±–∞ –æ–Ω–∏ —è–≤–ª—è—é—Ç—Å—è –¢—å—é—Ä–∏–Ω–≥-–ø–æ–ª–Ω—ã–º–∏. –≠—Ç–æ –¥–∞—ë—Ç –æ—Å–Ω–æ–≤–∞–Ω–∏–µ —É—Ç–≤–µ—Ä–∂–¥–∞—Ç—å, —á—Ç–æ –≤ —Ç–µ–æ—Ä–∏–∏ –ª—é–±–∞—è –∑–∞–¥–∞—á–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å —É—Å–ø–µ—à–Ω–æ —Ä–µ—à–µ–Ω–∞ –∫–∞–∫ –Ω–∞ ¬´SED¬ª —Ç–∞–∫ –∏ –Ω–∞ ¬´AWK¬ª, –≤–æ–ø—Ä–æ—Å —Ç–æ–ª—å–∫–æ –≤ —Ç–æ–º, —Å–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ –∏ –Ω–µ—Ä–≤–æ–≤ —ç—Ç–æ –∑–∞–π–º—ë—Ç. ¬´AWK¬ª –≤—ã–≤–æ–¥–∏—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –±–æ–ª–µ–µ –≤—ã—Å–æ–∫–∏–π —É—Ä–æ–≤–µ–Ω—å. –ë–ª–∞–≥–æ–¥–∞—Ä—è ¬´AWK¬ª –≤ –Ω–∞—à–µ–º —Ä–∞—Å–ø–æ—Ä—è–∂–µ–Ω–∏–∏ –æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π —è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è, –∞ –Ω–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π –Ω–∞–±–æ—Ä –∫–æ–º–∞–Ω–¥, –æ—Ç–¥–∞–≤–∞–µ–º—ã—Ö —Ä–µ–¥–∞–∫—Ç–æ—Ä—É. –ú–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏, –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏ –∞—Å—Å–æ—Ü–∏–∞—Ç–∏–≤–Ω—ã—Ö –º–∞—Å—Å–∏–≤–æ–≤, —É–ø—Ä–∞–≤–ª—è—é—â–∏–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ &lt;code&gt;if-then&lt;/code&gt;, —Ü–∏–∫–ª—ã –∏ —Ç.–¥. –≤—Å—ë —ç—Ç–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –≤ ¬´AWK¬ª –∏–∑ –∫–æ—Ä–æ–±–∫–∏.&lt;/p&gt;
&lt;h2&gt;–û–ë–†–ê–ó–ï–¶&lt;/h2&gt;
&lt;p&gt;&lt;a href="http://awk.js.org/index.html?gist=e625cdb4661bf560d0c94010c795d7d8"&gt;GIST&lt;/a&gt; | –ü—Ä–æ—Å—Ç–æ–π –ø—Ä–∏–º–µ—Ä ¬´AWK¬ª ‚Äî –æ–±—ã—á–Ω–∞—è —á–∏—Ç–∞–ª–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤ —Å –≤—ã–≤–æ–¥–æ–º –Ω–∞ —ç–∫—Ä–∞–Ω. –ü—Ä–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–∏ —ç—Ç–æ–≥–æ –∏ –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö –ø—Ä–∏–º–µ—Ä–æ–≤ –±—É–¥–µ–º –ø—Ä–∏–¥–µ—Ä–∂–∏–≤–∞—Ç—å—Å—è —Å–ª–µ–¥—É—é—â–µ–≥–æ –ø–æ—Ä—è–¥–∫–∞: —Å–≤–µ—Ä—Ö—É –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏, –≤–Ω–∏–∑—É —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –ø–æ—Ç–æ–∫–∏ —Å–ª–µ–≤–∞ –≤–≤–æ–¥–∞ &lt;code&gt;stdin&lt;/code&gt; –∏ —Å–ø—Ä–∞–≤–∞ –≤—ã–≤–æ–¥–∞ &lt;code&gt;stdout&lt;/code&gt;:&lt;/p&gt;
&lt;pre style="border:1px solid #ddd;"&gt;
'{print}'
&lt;/pre&gt;

&lt;!-- https://stackoverflow.com/a/20669539 --&gt;

&lt;div style="display: flex;"&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
George Washington, 1789-1797
John Adams, 1797-1801
Thomas Jefferson, 1801-1809
&lt;/pre&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
George Washington, 1789-1797
John Adams, 1797-1801
Thomas Jefferson, 1801-1809
&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;–ò–∑ –ø–æ–ª–µ–∑–Ω—ã—Ö –æ–ø—Ü–∏–π –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ ¬´AWK¬ª, —Å—Ç–æ–∏—Ç –≤—ã–¥–µ–ª–∏—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —É–∫–∞–∑–∞—Ç—å —Å–∏–º–≤–æ–ª-—Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å –¥–ª—è –ø–æ–ª–µ–π &lt;code&gt;-F&lt;/code&gt; –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ–±—ä—è–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –∏ –∑–∞–¥–∞—Ç—å –µ—ë –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é &lt;code&gt;-v var=value&lt;/code&gt;. –ö–∞–∫ –≤–∏–¥–Ω–æ –∏–∑ –ø—Ä–∏–º–µ—Ä–∞, –∫–æ–º–∞–Ω–¥–∞ &lt;code&gt;print&lt;/code&gt; –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –ø–µ—á–∞—Ç–∞–µ—Ç –≤—Å–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ç–µ–∫—É—â–µ–π –∑–∞–ø–∏—Å–∏. &lt;/p&gt;
&lt;h2&gt;–¢–ê–ë–õ–ò–¶–´&lt;/h2&gt;
&lt;p&gt;&lt;a href="http://awk.js.org/index.html?gist=13e9a1bce9aabd91474113cb46567d62"&gt;GIST&lt;/a&gt; | ¬´AWK¬ª –æ—Ç–ª–∏—á–Ω–æ —Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å —Ñ–∞–π–ª–∞–º–∏, —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–º –æ–±—Ä–∞–∑–æ–º. –ö –ø—Ä–∏–º–µ—Ä—É, —ç—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –æ—Å–æ–±–µ–Ω–Ω–æ —Å–∏–ª—å–Ω–∞ –≤ –∞–Ω–∞–ª–∏–∑–µ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ —Ç–∞–±–ª–∏—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –ø–æ–ª–µ–π ¬´AWK¬ª –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–æ–±–µ–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã –∏ —Å–∏–º–≤–æ–ª—ã —Ç–∞–±—É–ª—è—Ü–∏–∏, –∞ –¥–ª—è —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –∑–∞–ø–∏—Å–µ–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–∏–º–≤–æ–ª –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏. –ö–∞–∂–¥–æ–º—É –ø–æ–ª—é –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –Ω–∞–∑–Ω–∞—á–∞–µ—Ç—Å—è —Å–≤–æ—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è —Å–æ–≥–ª–∞—Å–Ω–æ –µ–≥–æ –ø–æ—Ä—è–¥–∫–æ–≤–æ–º—É –Ω–æ–º–µ—Ä—É —Å–ª–µ–¥–æ–≤–∞–Ω–∏—è –≤ –∑–∞–ø–∏—Å–∏:&lt;/p&gt;
&lt;pre style="border:1px solid #ddd;"&gt;
'{print $1}'
&lt;/pre&gt;

&lt;!-- https://stackoverflow.com/a/20669539 --&gt;

&lt;div style="display: flex;"&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
George Washington, 1789-1797
John Adams, 1797-1801
Thomas Jefferson, 1801-1809
&lt;/pre&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
George
John
Thomas
&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;&lt;a href="http://awk.js.org/index.html?gist=764f8f9cd2ec6b7f8e76bb57816f4349"&gt;GIST&lt;/a&gt; | –ò–Ω–æ–≥–¥–∞ –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–µ–π –ø–æ–ª–µ–π —É–¥–æ–±–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ –ø—Ä–æ–±–µ–ª—ã –∏–ª–∏ —Å–∏–º–≤–æ–ª—ã —Ç–∞–±—É–ª—è—Ü–∏–∏, –∞ –∫–∞–∫–æ–π-—Ç–æ –æ—Å–æ–±—ã–π —à–∞–±–ª–æ–Ω. –í—ã—à–µ –º—ã —É–ø–æ–º–∏–Ω–∞–ª–∏ –∫–ª—é—á &lt;code&gt;-F&lt;/code&gt;, —Ç–µ–ø–µ—Ä—å –ø—Ä–∏–º–µ—Ä, –≥–¥–µ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å –ø–æ–ª–µ–π –∑–∞–¥–∞—ë—Ç—Å—è —Å –ø–æ–º–æ—â—å—é &lt;a href="http://proiot.ru/blog/posts/2017/11/03/likbez-po-grep-i-reguliarnym-vyrazheniiam/"&gt;—Ä–µ–≥—É–ª—è—Ä–Ω–æ–≥–æ –≤—ã—Ä–∞–∂–µ–Ω–∏—è&lt;/a&gt;:&lt;/p&gt;
&lt;pre style="border:1px solid #ddd;"&gt;
-F '[-,]+' '{print $1 " ("$3-$2")"}'
&lt;/pre&gt;

&lt;!-- https://stackoverflow.com/a/20669539 --&gt;

&lt;div style="display: flex;"&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
George Washington, 1789-1797
John Adams, 1797-1801
Thomas Jefferson, 1801-1809
&lt;/pre&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
George Washington (8)
John Adams (4)
Thomas Jefferson (8)
&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;–î–ª—è –±–æ–ª–µ–µ —Ç–æ–Ω–∫–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ ¬´AWK¬ª –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω —Å–≤–æ–π —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –∫–æ–º–ø–ª–µ–∫—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö. –û–¥–Ω–∞ –∏–∑ —Ç–∞–∫–∏—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å –∏–º–µ–Ω–µ–º &lt;code&gt;RS&lt;/code&gt; –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–¥–∞—Ç—å –æ—Å–æ–±—ã–π —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—å –∑–∞–ø–∏—Å–µ–π. –ü–æ–¥—Ä–æ–±–Ω–µ–µ –æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö —á—É—Ç—å –ø–æ–∑–∂–µ. &lt;/p&gt;
&lt;h2&gt;–†–ï–ì–£–õ–Ø–†–ù–´–ï –í–´–†–ê–ñ–ï–ù–ò–Ø –ò –ë–õ–û–ö–ò&lt;/h2&gt;
&lt;p&gt;&lt;a href="http://awk.js.org/index.html?gist=bcc5225c73d3c49634c367217ab07eaa"&gt;GIST&lt;/a&gt; | ¬´AWK¬ª –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å &lt;a href="http://proiot.ru/blog/posts/2017/11/03/likbez-po-grep-i-reguliarnym-vyrazheniiam/"&gt;—Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è&lt;/a&gt; –¥–ª—è –∏–∑–±–∏—Ä–∞—Ç–µ–ª—å–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –±–ª–æ–∫–æ–≤ –ø—Ä–æ–≥—Ä–∞–º–º—ã –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–æ–≥–æ, —Å–æ–≤–ø–∞–¥–∞–µ—Ç –∏–ª–∏ –Ω–µ—Ç —Ä–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ —Å —Ç–µ–∫—É—â–µ–π –∑–∞–ø–∏—Å—å—é:&lt;/p&gt;
&lt;pre style="border:1px solid #ddd;"&gt;
'/on/ { print }'
&lt;/pre&gt;

&lt;!-- https://stackoverflow.com/a/20669539 --&gt;

&lt;div style="display: flex;"&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
George Washington, 1789-1797
John Adams, 1797-1801
Thomas Jefferson, 1801-1809
&lt;/pre&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
George Washington, 1789-1797
Thomas Jefferson, 1801-1809
&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;–ï—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω–æ –¥–µ–π—Å—Ç–≤–∏–µ, —Ç–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∑–∞–ø–∏—Å—å –≤—ã–≤–æ–¥–∏—Ç—Å—è –≤ –≤—ã—Ö–æ–¥–Ω–æ–π –ø–æ—Ç–æ–∫ –∏ –ø–æ—Ç–æ–º—É –≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –¥–µ–π—Å—Ç–≤–∏–µ &lt;code&gt;{ print }&lt;/code&gt; –º–æ–∂–Ω–æ –±—ã–ª–æ –±—ã –≤–æ–æ–±—â–µ –Ω–µ —É–∫–∞–∑—ã–≤–∞—Ç—å.&lt;/p&gt;
&lt;h2&gt;–õ–û–ì–ò–ß–ï–°–ö–ò–ï –í–´–†–ê–ñ–ï–ù–ò–Ø –ò –ë–õ–û–ö–ò&lt;/h2&gt;
&lt;p&gt;&lt;a href="http://awk.js.org/index.html?gist=9016d8d037f2fab13ba7171261c3874e"&gt;GIST&lt;/a&gt; | –ï—Å—Ç—å –∏ –¥—Ä—É–≥–∏–µ —Å–ø–æ—Å–æ–±–æ–≤ –∏–∑–±–∏—Ä–∞—Ç–µ–ª—å–Ω–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å –±–ª–æ–∫ –ø—Ä–æ–≥—Ä–∞–º–º—ã. –ú—ã –º–æ–∂–µ–º –ø–æ–º–µ—Å—Ç–∏—Ç—å –ø–µ—Ä–µ–¥ –±–ª–æ–∫–æ–º –ø—Ä–æ–≥—Ä–∞–º–º—ã –ª—é–±–æ–µ –±—É–ª–µ–≤–æ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏—Å–ø–æ–ª–Ω–µ–Ω–∏–µ–º —ç—Ç–æ–≥–æ –±–ª–æ–∫–∞ –∏ ¬´AWK¬ª –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å –±–ª–æ–∫ –ø—Ä–æ–≥—Ä–∞–º–º—ã —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –ø—Ä–µ–¥—ã–¥—É—â–µ–µ –±—É–ª–µ–≤–æ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –∏—Å—Ç–∏–Ω–Ω–æ:&lt;/p&gt;
&lt;pre style="border:1px solid #ddd;"&gt;
'$1 == "John"'
&lt;/pre&gt;

&lt;!-- https://stackoverflow.com/a/20669539 --&gt;

&lt;div style="display: flex;"&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
George Washington, 1789-1797
John Adams, 1797-1801
Thomas Jefferson, 1801-1809
&lt;/pre&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
John Adams, 1797-1801
&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;&lt;a href="http://awk.js.org/index.html?gist=26ab431015165ac4935e6b1f0d4c27ee"&gt;GIST&lt;/a&gt; | ¬´AWK¬ª –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –ø–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è, –≤ —Ç–æ–º —á–∏—Å–ª–µ –æ–±—ã—á–Ω—ã–µ &lt;code&gt;==&lt;/code&gt;, &lt;code&gt;&amp;lt;&lt;/code&gt;, &lt;code&gt;&amp;gt;&lt;/code&gt;, &lt;code&gt;&amp;lt;=&lt;/code&gt;, &lt;code&gt;&amp;gt;=&lt;/code&gt; –∏ &lt;code&gt;!=&lt;/code&gt;. –î–ª—è —Å–ª–æ–∂–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π —Å—Ç–æ–∏—Ç –ø–æ–º–Ω–∏—Ç—å –æ–± —É—Å–ª–æ–≤–Ω–æ–º –æ–ø–µ—Ä–∞—Ç–æ—Ä–µ &lt;code&gt;if&lt;/code&gt;:&lt;/p&gt;
&lt;pre style="border:1px solid #ddd;"&gt;
'{
  if ($1 == "John" &amp;&amp; $2 ~ /Ada/) { 
    print
  }
}'
&lt;/pre&gt;

&lt;!-- https://stackoverflow.com/a/20669539 --&gt;

&lt;div style="display: flex;"&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
George Washington, 1789-1797
John Adams, 1797-1801
Thomas Jefferson, 1801-1809
&lt;/pre&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
John Adams, 1797-1801
&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;–û–ø–µ—Ä–∞—Ç–æ—Ä—ã &lt;code&gt;~&lt;/code&gt; –∏ &lt;code&gt;!~&lt;/code&gt; –æ–∑–Ω–∞—á–∞—é—Ç &lt;em&gt;—Å–æ–≤–ø–∞–¥–∞–µ—Ç&lt;/em&gt; –∏–ª–∏ &lt;em&gt;–Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç&lt;/em&gt; –∑–Ω–∞—á–µ–Ω–∏–µ —Å–ª–µ–≤–∞ —Å —Ä–µ–≥—É–ª—è—Ä–Ω—ã–º –≤—ã—Ä–∞–∂–µ–Ω–∏–µ–º —Å–ø—Ä–∞–≤–∞. &lt;/p&gt;
&lt;h2&gt;–ù–ï–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–´–ï –ë–õ–û–ö–ò BEGIN –ò END&lt;/h2&gt;
&lt;p&gt;&lt;a href="http://awk.js.org/index.html?gist=629cbedc6bb0f4ebd2ea97846936e93b"&gt;GIST&lt;/a&gt; | –ß–∞—Å—Ç–æ –≤—Å—Ç—Ä–µ—á–∞—é—Ç—Å—è —Å–∏—Ç—É–∞—Ü–∏–∏, –∫–æ–≥–¥–∞ —Ç—Ä–µ–±—É–µ—Ç—Å—è –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–¥ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–µ—Ä–µ–¥ —Ç–µ–º, –∫–∞–∫ ¬´AWK¬ª –Ω–∞—á–Ω–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Ç–µ–∫—Å—Ç. –î–ª—è —Ç–∞–∫–∏—Ö —Å–ª—É—á–∞–µ–≤ ¬´AWK¬ª –¥–∞–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –±–ª–æ–∫ &lt;code&gt;BEGIN&lt;/code&gt;. –≠—Ç–æ –æ—Ç–ª–∏—á–Ω–æ–µ –º–µ—Å—Ç–æ –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö –∏–ª–∏ –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö, –≤—ã–≤–æ–¥–∞ –∑–∞–≥–æ–ª–æ–≤–∫–∞ –∏ —Ç.–¥.:&lt;/p&gt;
&lt;pre style="border:1px solid #ddd;"&gt;
'BEGIN {print "Hello", "World !"}'
&lt;/pre&gt;

&lt;!-- https://stackoverflow.com/a/20669539 --&gt;

&lt;div style="display: flex;"&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
any text
&lt;/pre&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
Hello World !
&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;–ï—Å—Ç—å –µ—â–µ –æ–¥–∏–Ω –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –±–ª–æ–∫ &lt;code&gt;END&lt;/code&gt;. ¬´AWK¬ª –≤—ã–ø–æ–ª–Ω—è–µ—Ç —ç—Ç–æ—Ç –±–ª–æ–∫ –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –≤—Å–µ –∑–∞–ø–∏—Å–∏ –±—ã–ª–∏ –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã. –û–±—ã—á–Ω–æ –±–ª–æ–∫ &lt;code&gt;END&lt;/code&gt; –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–∫–ª—é—á–∏—Ç–µ–ª—å–Ω—ã—Ö –≤—ã—á–∏—Å–ª–µ–Ω–∏–π –∏–ª–∏ –≤—ã–≤–æ–¥–∞ –∏—Ç–æ–≥–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –≤ –∫–æ–Ω—Ü–µ –≤—ã—Ö–æ–¥–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–∞.&lt;/p&gt;
&lt;h2&gt;–í–°–¢–†–û–ï–ù–ù–´–ï –ü–ï–†–ï–ú–ï–ù–ù–´–ï&lt;/h2&gt;
&lt;p&gt;¬´AWK¬ª ‚Äî –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —è–∑—ã–∫: –≤—Å–µ –ø—Ä–∏–º–∏—Ç–∏–≤—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –∫–∞–∫ —Å—Ç—Ä–æ–∫–∏, —Ö–æ—Ç—è –º–æ–≥—É—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å—Å—è –∫–∞–∫ —á–∏—Å–ª–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∏—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏—è—Ö). –û—Å–Ω–æ–≤–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö —è–∑—ã–∫–∞ ‚Äî –∞—Å—Å–æ—Ü–∏–∞—Ç–∏–≤–Ω—ã–π –º–∞—Å—Å–∏–≤ —Å –∏–Ω–¥–µ–∫—Å–∞–º–∏-—Å—Ç—Ä–æ–∫–∞–º–∏.&lt;/p&gt;
&lt;p&gt;–ú—ã —É–∂–µ —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–ª–∏ –ø–æ–∑–∏—Ü–∏–æ–Ω–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ ‚Äî &lt;code&gt;$1&lt;/code&gt;, &lt;code&gt;$2&lt;/code&gt;, &lt;code&gt;$3&lt;/code&gt;, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–∑–≤–æ–ª—è—é—Ç –∏–∑–≤–ª–µ–∫–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ–ª–µ–π –∏–∑ –∑–∞–ø–∏—Å–µ–π. –ù–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –∏—Ö –¥–æ–≤–æ–ª—å–Ω–æ –º–Ω–æ–≥–æ –∏ –≤–æ—Ç —Å–ø–∏—Å–æ–∫ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –∏–∑ –Ω–∞–∏–±–æ–ª–µ–µ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö:&lt;/p&gt;
&lt;p&gt;&lt;a href="http://awk.js.org/index.html?gist=2617a81bf5ec753b9528e3e8e78b0621"&gt;GIST&lt;/a&gt; | &lt;code&gt;ARGC&lt;/code&gt; ‚Äî —á–∏—Å–ª–æ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏. –í –¥–∞–Ω–Ω–æ–º –ø—Ä–∏–º–µ—Ä–µ –≤—Å—è –ª–æ–≥–∏–∫–∞ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç—Å—è –±–ª–æ–∫–æ–º &lt;code&gt;BEGIN&lt;/code&gt;, –¥–æ –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç–µ–∫—Å—Ç–∞ –¥–µ–ª–æ –¥–∞–∂–µ –Ω–µ –¥–æ—Ö–æ–¥–∏—Ç:&lt;/p&gt;
&lt;pre style="border:1px solid #ddd;"&gt;
'BEGIN {print "Arguments =", ARGC}' One Two Three Four
&lt;/pre&gt;

&lt;!-- https://stackoverflow.com/a/20669539 --&gt;

&lt;div style="display: flex;"&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
any text
&lt;/pre&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
Arguments = 5
&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;&lt;a href="http://awk.js.org/index.html?gist=10579811ba2de1a874d1b924b4a65aa6"&gt;GIST&lt;/a&gt; | &lt;code&gt;ARGV&lt;/code&gt; ‚Äî –º–∞—Å—Å–∏–≤ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏. –í –¥–∞–Ω–Ω–æ–º –ø—Ä–∏–º–µ—Ä–µ –º–∞—Å—Å–∏–≤ –ø–µ—Ä–µ–±–∏—Ä–∞–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é —Ü–∏–∫–ª–∞. –¶–∏–∫–ª—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤–æ –º–Ω–æ–∂–µ—Å—Ç–≤–µ —è–∑—ã–∫–æ–≤ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–∏, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∏—Ö –∏ ¬´AWK¬ª:&lt;/p&gt;
&lt;pre style="border:1px solid #ddd;"&gt;
'BEGIN { 
   for (i = 0; i &amp;lt; ARGC - 1; ++i) { 
      printf "ARGV[%d] = %s\n", i, ARGV[i] 
   } 
}' one two three four
&lt;/pre&gt;

&lt;!-- https://stackoverflow.com/a/20669539 --&gt;

&lt;div style="display: flex;"&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
any text
&lt;/pre&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
ARGV[0] = mawk
ARGV[1] = one
ARGV[2] = two
ARGV[3] = three
&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;&lt;a href="http://awk.js.org/index.html?gist=c586aa7ac8c6c354aafe49efecee325e"&gt;GIST&lt;/a&gt; | &lt;code&gt;NF&lt;/code&gt; –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ –ø–æ—Å–ª–µ–¥–Ω–µ–º—É –ø–æ–ª—é –¥–∞–Ω–Ω—ã—Ö –≤ –∑–∞–ø–∏—Å–∏, –Ω–µ –∑–Ω–∞—è –µ–≥–æ —Ç–æ—á–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏. ¬´AWK¬ª –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ —ç—Ç–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π —Ä–∞–≤–Ω—ã–º —á–∏—Å–ª—É –ø–æ–ª–µ–π –≤ —Ç–µ–∫—É—â–µ–π –∑–∞–ø–∏—Å–∏:&lt;/p&gt;
&lt;pre style="border:1px solid #ddd;"&gt;
-F "[, ]+" '{print $NF ":", $1, $(NF-1)}'
&lt;/pre&gt;

&lt;!-- https://stackoverflow.com/a/20669539 --&gt;

&lt;div style="display: flex;"&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
George Washington, 1789-1797
John Adams, 1797-1801
Thomas Jefferson, 1801-1809
&lt;/pre&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
1789-1797: George Washington
1797-1801: John Adams
1801-1809: Thomas Jefferson
&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;&lt;a href="http://awk.js.org/index.html?gist=271467fd80112e9f13e392e83054148d"&gt;GIST&lt;/a&gt; | &lt;code&gt;NR&lt;/code&gt; —Ö—Ä–∞–Ω–∏—Ç –Ω–æ–º–µ—Ä —Ç–µ–∫—É—â–µ–π –∑–∞–ø–∏—Å–∏, –Ω–∞—á–∏–Ω–∞—è —Å –µ–¥–∏–Ω–∏—Ü—ã:&lt;/p&gt;
&lt;pre style="border:1px solid #ddd;"&gt;
'NR &amp;lt; 3'
&lt;/pre&gt;

&lt;!-- https://stackoverflow.com/a/20669539 --&gt;

&lt;div style="display: flex;"&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
George Washington, 1789-1797
John Adams, 1797-1801
Thomas Jefferson, 1801-1809
&lt;/pre&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
George Washington, 1789-1797
John Adams, 1797-1801
&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;–ú–Ω–æ–≥–∏–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä &lt;code&gt;ARGC&lt;/code&gt;, —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏ –æ–±—ã—á–Ω–æ –Ω–µ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω—ã –¥–ª—è –∑–∞–ø–∏—Å–∏ –≤ –Ω–∏—Ö, —Ç.–µ. –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–ª—è —á—Ç–µ–Ω–∏—è.&lt;/p&gt;
&lt;h2&gt;–ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–¨–°–ö–ò–ï –ü–ï–†–ï–ú–ï–ù–ù–´–ï&lt;/h2&gt;
&lt;p&gt;&lt;a href="http://awk.js.org/index.html?gist=4d9e43c7efba917086ddea54c93a2716"&gt;GIST&lt;/a&gt; | –ö–∞–∫ –∏ –ª—é–±—ã–µ –¥—Ä—É–≥–∏–µ —è–∑—ã–∫–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è, ¬´AWK¬ª –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç—É –æ–±—ä—è–≤–ª—è—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ. –ò–º–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –º–æ–≥—É—Ç –≤–∫–ª—é—á–∞—Ç—å –≤ —Å–µ–±—è –±—É–∫–≤—ã, —Ü–∏—Ñ—Ä—ã, —Å–∏–º–≤–æ–ª—ã –ø–æ–¥—á—ë—Ä–∫–∏–≤–∞–Ω–∏—è, –Ω–æ –Ω–µ –º–æ–≥—É—Ç –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å —Ü–∏—Ñ—Ä—ã. –û–±—ä—è–≤–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é, –ø—Ä–∏—Å–≤–æ–∏—Ç—å –µ–π –∑–Ω–∞—á–µ–Ω–∏–µ –º–æ–∂–Ω–æ –∫–∞–∫ –∏–∑ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ &lt;code&gt;-v var=value&lt;/code&gt; —Ç–∞–∫ –∏ –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –≤ –∫–æ–¥–µ:&lt;/p&gt;
&lt;pre style="border:1px solid #ddd;"&gt;
-v msg="Hello World !" 
'BEGIN {
   num1="21"
   num2=21
   print num1*2, num2*2, msg + 1
} 
{ print msg }'
&lt;/pre&gt;

&lt;!-- https://stackoverflow.com/a/20669539 --&gt;

&lt;div style="display: flex;"&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
a
b
&lt;/pre&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
42 42 1
Hello World !
Hello World !
&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;–î–æ–ø—É—Å–∫–∞–µ—Ç—Å—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—å –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –Ω–∞–¥ —Å—Ç—Ä–æ–∫–∞–º–∏. –ï—Å–ª–∏ –≤ —Å—Ç—Ä–æ–∫–æ–≤–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —á–∏—Å–ª–∞, —Ç–æ –ø—Ä–∏ –≤—ã—á–∏—Å–ª–µ–Ω–∏–∏ –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –≤—ã—Ä–∞–∂–µ–Ω–∏—è ¬´AWK¬ª –±—É–¥–µ—Ç –æ–±—Ä–∞—â–∞—Ç—å—Å—è —Å —ç—Ç–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –∫–∞–∫ —Å —á–∏—Å–ª–æ–≤—ã–º –Ω—É–ª–µ–º.&lt;/p&gt;
&lt;h2&gt;–ê–°–°–û–¶–ò–ê–¢–ò–í–ù–´–ï –ú–ê–°–°–ò–í–´&lt;/h2&gt;
&lt;p&gt;&lt;a href="http://awk.js.org/index.html?gist=bc4f6914346dbf43c184e812655fe8bb"&gt;GIST&lt;/a&gt; | –ò–∑ —Å—Ç—Ä—É–∫—Ç—É—Ä –¥–∞–Ω–Ω—ã—Ö –≤ ¬´AWK¬ª –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –∞—Å—Å–æ—Ü–∏–∞—Ç–∏–≤–Ω—ã–µ –º–∞—Å—Å–∏–≤—ã. –í –∞—Å—Å–æ—Ü–∏–∞—Ç–∏–≤–Ω–æ–º –º–∞—Å—Å–∏–≤–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –ø–∞—Ä—ã –≤–∏–¥–∞ &lt;em&gt;–∫–ª—é—á&lt;/em&gt; =&amp;gt; &lt;em&gt;–∑–Ω–∞—á–µ–Ω–∏–µ&lt;/em&gt;. –ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è, —á—Ç–æ –∞—Å—Å–æ—Ü–∏–∞—Ç–∏–≤–Ω—ã–π –º–∞—Å—Å–∏–≤ –Ω–µ –º–æ–∂–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å –¥–≤–µ –ø–∞—Ä—ã —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º–∏ –∫–ª—é—á–∞–º–∏:&lt;/p&gt;
&lt;pre style="border:1px solid #ddd;"&gt;
'BEGIN {
   fruits["mango"] = "yellow";
   fruits["orange"] = "orange"
   print fruits["orange"] "\n" fruits["mango"]
}'
&lt;/pre&gt;

&lt;!-- https://stackoverflow.com/a/20669539 --&gt;

&lt;div style="display: flex;"&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
anything here
&lt;/pre&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
orange
yellow
&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;&lt;a href="http://awk.js.org/index.html?gist=cb6c15fece0f60a286e3a64296bdbdad"&gt;GIST&lt;/a&gt; | –î–ª—è —É–¥–∞–ª–µ–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–∞ –∏–∑ –º–∞—Å—Å–∏–≤–∞ –ø–æ –µ–≥–æ –∫–ª—é—á—É –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω–æ –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ &lt;code&gt;delete&lt;/code&gt;:&lt;/p&gt;
&lt;pre style="border:1px solid #ddd;"&gt;
'BEGIN {
   fruits[1] = "yellow";
   fruits[2] = "orange";
   delete fruits["2"];
   for (fruit in fruits) { 
      print fruits[fruit]
   } 
}'
&lt;/pre&gt;

&lt;!-- https://stackoverflow.com/a/20669539 --&gt;

&lt;div style="display: flex;"&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
anything here
&lt;/pre&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
yellow
&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;–î–ª—è –ø–µ—Ä–µ–±–æ—Ä–∞ –≤—Å–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –º–∞—Å—Å–∏–≤–∞ –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω–∞ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è &lt;code&gt;for...in&lt;/code&gt;.&lt;/p&gt;
&lt;h2&gt;–§–£–ù–ö–¶–ò–ò&lt;/h2&gt;
&lt;p&gt;&lt;a href="http://awk.js.org/index.html?gist=e83563c5015ca799622e9c13b98d8852"&gt;GIST&lt;/a&gt; | ¬´AWK¬ª –∏–º–µ–µ—Ç –Ω–∞–±–æ—Ä –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –≤ –∏–∑–≤–µ—Å—Ç–Ω–æ–º —Å–º—ã—Å–ª–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π. –ö –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º –æ—Ç–Ω–æ—Å—è—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å–æ —Å—Ç—Ä–æ–∫–∞–º–∏, –≤—Ä–µ–º–µ–Ω–µ–º –∏ –∞—Ä–∏—Ñ–º–µ—Ç–∏–∫–æ–π. –í —Å–ª–µ–¥—É—é—â–µ–º –ø—Ä–∏–º–µ—Ä–µ –≤—Ä–µ–º—è –∫–æ–Ω–µ—á–Ω–æ –∂–µ –±—É–¥–µ—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è –æ—Ç —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ:&lt;/p&gt;
&lt;pre style="border:1px solid #ddd;"&gt;
'BEGIN {print strftime("%T",systime()), cos(0), toupper("hello")}'
&lt;/pre&gt;

&lt;!-- https://stackoverflow.com/a/20669539 --&gt;

&lt;div style="display: flex;"&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
some text
&lt;/pre&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
20:14:27 1 HELLO
&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;&lt;a href="http://awk.js.org/index.html?gist=40932c2d2436ef9f5d915d71743aca85"&gt;GIST&lt;/a&gt; | –°–ª–æ–∂–Ω—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã —á–∞—Å—Ç–æ –º–æ–≥—É—Ç –±—ã—Ç—å —É–ø—Ä–æ—â–µ–Ω—ã –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º –≤–∞—à–∏—Ö —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –º–æ–≥—É—Ç –≤—ã–∑—ã–≤–∞—Ç—å—Å—è —Ç–æ—á–Ω–æ —Ç–∞–∫ –∂–µ –∫–∞–∫ –∏ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ, –Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å –∏—Ö –≤—ã –¥–æ–ª–∂–Ω—ã —Å–∞–º–∏:&lt;/p&gt;
&lt;pre style="border:1px solid #ddd;"&gt;
'# Script execution starts here
BEGIN {
   main(10, 20)
}
# Returns minimum number
function find_min(num1, num2){
   if (num1 &amp;lt; num2)
   return num1
   return num2
}
# Returns maximum number
function find_max(num1, num2){
   if (num1 &gt; num2)
   return num1
   return num2
}
# Main function
function main(num1, num2){
   # Find minimum number
   result = find_min(10, 20)
   print "Minimum =", result

   # Find maximum number
   result = find_max(10, 20)
   print "Maximum =", result
}'
&lt;/pre&gt;

&lt;!-- https://stackoverflow.com/a/20669539 --&gt;

&lt;div style="display: flex;"&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
anything here
&lt;/pre&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
Minimum = 10
Maximum = 20
&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;¬´AWK¬ª —á–∏—Ç–∞–µ—Ç –≤—Å—é –ø—Ä–æ–≥—Ä–∞–º–º—É –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º –µ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è, —Ç–∞–∫ —á—Ç–æ –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø–æ–º–µ—â–∞—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–π –ø–µ—Ä–µ–¥ –≤—ã–∑–æ–≤–æ–º, –æ–Ω–∏ –º–æ–≥—É—Ç —Ä–∞—Å–ø–æ–ª–∞–≥–∞—Ç—å—Å—è –≥–¥–µ —É–≥–æ–¥–Ω–æ –º–µ–∂–¥—É –ø—Ä–∞–≤–∏–ª–∞–º–∏ –ø—Ä–æ–≥—Ä–∞–º–º—ã –≤ –ª—é–±–æ–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏. –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏–º—è —Ñ—É–Ω–∫—Ü–∏–∏ –ø–æ–¥–æ–±–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º—É –∏–º–µ–Ω–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π: –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –±—É–∫–≤, —Ü–∏—Ñ—Ä –∏ –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏–π, –Ω–∞—á–∏–Ω–∞—é—â–∞—è—Å—è –Ω–µ —Å —Ü–∏—Ñ—Ä—ã. &lt;/p&gt;</content><category term="regex"></category></entry><entry><title>–ù–µ–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä SED</title><link href="http://proiot.ru/blog/posts/2017/11/11/neinteraktivnyi-tekstovyi-redaktor-sed/" rel="alternate"></link><published>2017-11-11T00:00:00+02:00</published><updated>2017-11-11T00:00:00+02:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2017-11-11:/blog/posts/2017/11/11/neinteraktivnyi-tekstovyi-redaktor-sed/</id><summary type="html">&lt;p&gt;–í—Å–µ –º—ã –ø—Ä–∏–≤—ã–∫–ª–∏ —Ä–∞–±–æ—Ç–∞—Ç—å –≤ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞—Ö, –ø—Ä–∏ —ç—Ç–æ–º –æ–±—ã—á–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É, –º—ã—à–∫—É –∏–ª–∏ –¥—Ä—É–≥–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –≤–≤–æ–¥–∞. –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ —Ä–µ–¥–∞–∫—Ç–æ—Ä—ã –≤–Ω–∞—á–∞–ª–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç –≤–µ—Å—å —Ç–µ–∫—Å—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞, –∞ –∑–∞—Ç–µ–º –ø—Ä–∏–º–µ–Ω—è—é—Ç –∫ –Ω–µ–º—É –∫–æ–º–∞–Ω–¥—ã –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ –æ–¥–Ω–æ–π, –≤ —Ç–æ –≤—Ä–µ–º—è –∫–∞–∫ ¬´sed¬ª (stream editor) –≤–Ω–∞—á–∞–ª–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –≤ —Å–µ–±—è –Ω–∞–±–æ—Ä –∫–æ–º–∞–Ω–¥, –∞ –∑–∞—Ç–µ–º ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;p&gt;–í—Å–µ –º—ã –ø—Ä–∏–≤—ã–∫–ª–∏ —Ä–∞–±–æ—Ç–∞—Ç—å –≤ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞—Ö, –ø—Ä–∏ —ç—Ç–æ–º –æ–±—ã—á–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É, –º—ã—à–∫—É –∏–ª–∏ –¥—Ä—É–≥–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –≤–≤–æ–¥–∞. –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ —Ä–µ–¥–∞–∫—Ç–æ—Ä—ã –≤–Ω–∞—á–∞–ª–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç –≤–µ—Å—å —Ç–µ–∫—Å—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞, –∞ –∑–∞—Ç–µ–º –ø—Ä–∏–º–µ–Ω—è—é—Ç –∫ –Ω–µ–º—É –∫–æ–º–∞–Ω–¥—ã –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ –æ–¥–Ω–æ–π, –≤ —Ç–æ –≤—Ä–µ–º—è –∫–∞–∫ ¬´sed¬ª (stream editor) –≤–Ω–∞—á–∞–ª–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –≤ —Å–µ–±—è –Ω–∞–±–æ—Ä –∫–æ–º–∞–Ω–¥, –∞ –∑–∞—Ç–µ–º –ø—Ä–∏–º–µ–Ω—è–µ—Ç –≤–µ—Å—å —ç—Ç–æ—Ç –Ω–∞–±–æ—Ä –∫–æ–º–∞–Ω–¥ –∫ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ—á–∫–µ —Ç–µ–∫—Å—Ç–∞. –ö–æ–º–∞–Ω–¥—É ¬´sed¬ª —É–¥–æ–±–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è &lt;em&gt;–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ&lt;/em&gt; —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö. –ß—É—Ç—å —Ä–∞–Ω–µ–µ –º—ã —É–∂–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–ª–∏ –æ–¥–Ω—É –∑–∞–º–µ—á–∞—Ç–µ–ª—å–Ω—É—é —É—Ç–∏–ª–∏—Ç—É –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ —Ç–µ–∫—Å—Ç–∞ &lt;a href="http://proiot.ru/blog/posts/2017/11/03/likbez-po-grep-i-reguliarnym-vyrazheniiam/"&gt;grep&lt;/a&gt;. –ö–∞–∫ ¬´grep¬ª, —Ç–∞–∫ –∏ ¬´sed¬ª –∏—Å–ø–æ–ª—å–∑—É—é—Ç &lt;a href="http://proiot.ru/blog/posts/2017/11/03/likbez-po-grep-i-reguliarnym-vyrazheniiam/"&gt;—Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è&lt;/a&gt;, –Ω–æ ¬´sed¬ª –º–æ—â–Ω–µ–µ, –ø–æ—Å–∫–æ–ª—å–∫—É —ç—Ç–æ –∏ –ø–æ—Ç–æ–∫–æ–≤—ã–π —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä –∏ –¢—å—é—Ä–∏–Ω–≥-–ø–æ–ª–Ω—ã–π —è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è, –Ω–∞—Å—Ç–æ–ª—å–∫–æ –ø–æ–ª–Ω—ã–π, —á—Ç–æ –Ω–∞ –Ω—ë–º –º–æ–∂–Ω–æ, –Ω–æ –Ω–µ –Ω—É–∂–Ω–æ, –ø–∏—Å–∞—Ç—å –¥–∞–∂–µ –∏–≥—Ä—ã —Ç–∏–ø–∞ —à–∞—Ö–º–∞—Ç. –í—ã–±–∏—Ä–∞—è –º–µ–∂–¥—É —ç—Ç–∏–º–∏ —É—Ç–∏–ª–∏—Ç–∞–º–∏ —Å—Ç–æ–∏—Ç –ø–æ–º–Ω–∏—Ç—å, —á—Ç–æ ¬´grep¬ª —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ —Ñ–∏–ª—å—Ç—Ä, –∞ ¬´sed¬ª —ç—Ç–æ —É–∂–µ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä —Å –±–æ–ª—å—à–∏–º–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏.&lt;/p&gt;
&lt;h2&gt;–û–ë–†–ê–ó–ï–¶&lt;/h2&gt;
&lt;p&gt;&lt;a href="http://sed.js.org/index.html?gist=a794d768907cca6c2e97bc1ae2706147"&gt;GIST&lt;/a&gt; | –ï—Å–ª–∏ –Ω–µ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å ¬´sed¬ª –Ω–∏–∫–∞–∫–∏—Ö –∫–æ–º–∞–Ω–¥ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è, —Ç–æ –µ–≥–æ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –∫–∞—á–µ—Å—Ç–≤–µ –æ–±—ã—á–Ω–æ–π —á–∏—Ç–∞–ª–∫–∏ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤ —Å –≤—ã–≤–æ–¥–æ–º –Ω–∞ —ç–∫—Ä–∞–Ω. –ü—Ä–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–∏ —ç—Ç–æ–≥–æ –∏ –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö –ø—Ä–∏–º–µ—Ä–æ–≤ –±—É–¥–µ–º –ø—Ä–∏–¥–µ—Ä–∂–∏–≤–∞—Ç—å—Å—è —Å–ª–µ–¥—É—é—â–µ–≥–æ –ø–æ—Ä—è–¥–∫–∞: —Å–≤–µ—Ä—Ö—É –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏, –≤–Ω–∏–∑—É —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –ø–æ—Ç–æ–∫–∏ —Å–ª–µ–≤–∞ –≤–≤–æ–¥–∞ &lt;code&gt;stdin&lt;/code&gt; –∏ —Å–ø—Ä–∞–≤–∞ –≤—ã–≤–æ–¥–∞ &lt;code&gt;stdout&lt;/code&gt;:&lt;/p&gt;
&lt;pre style="border:1px solid #ddd;"&gt;
''
&lt;/pre&gt;

&lt;!-- https://stackoverflow.com/a/20669539 --&gt;

&lt;div style="display: flex;"&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
George Washington, 1789-1797
John Adams, 1797-1801
Thomas Jefferson, 1801-1809
&lt;/pre&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
George Washington, 1789-1797
John Adams, 1797-1801
Thomas Jefferson, 1801-1809
&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;–ö–æ–º–∞–Ω–¥–∞ ¬´sed¬ª –∏–º–µ–µ—Ç –Ω–µ —Ç–∞–∫ —É–∂ –º–Ω–æ–≥–æ –æ–ø—Ü–∏–π –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ. –ò–∑ –Ω–∏—Ö —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–∞–ª–µ–∫–æ –Ω–µ –≤—Å–µ. –î–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –ø–æ–ª–µ–∑–Ω—ã–º–∏ –æ–ø—Ü–∏—è–º–∏ —è–≤–ª—è—é—Ç—Å—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤–∫–ª—é—á–∏—Ç—å &lt;a href="http://proiot.ru/blog/posts/2017/11/03/likbez-po-grep-i-reguliarnym-vyrazheniiam/"&gt;—Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ&lt;/a&gt; —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è, –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–∞ –Ω–∞ –º–µ—Å—Ç–µ –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–¥–∞–≤–ª—è—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–≤–æ–¥ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–∏.&lt;/p&gt;
&lt;h2&gt;–ü–ï–ß–ê–¢–¨&lt;/h2&gt;
&lt;p&gt;&lt;a href="http://sed.js.org/index.html?gist=39526c24bb114bb3efbb2dbc8a170ba3"&gt;GIST&lt;/a&gt; | –ü–æ—á–µ–º—É ¬´sed¬ª –Ω–∞–ø–µ—á–∞—Ç–∞–ª –∫–∞–∂–¥—É—é —Å—Ç—Ä–æ–∫—É –¥–≤–∞–∂–¥—ã ? –í—Å—ë –ø–æ—Ç–æ–º—É, —á—Ç–æ ¬´sed¬ª —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ—Å—Ç—Ä–æ—á–Ω–æ. –û–Ω –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Å—Ç—Ä–æ–∫—É, –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ø–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—É—é –∑–∞–¥–∞—á—É –∏ –≤—ã–≤–æ–¥–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç, –∞ –∑–∞—Ç–µ–º –ø–æ–≤—Ç–æ—Ä—è–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–π —Å—Ç—Ä–æ–∫–∏. –ü–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ ¬´sed¬ª –ø–æ–ª—É—á–∏–ª –∫–æ–º–∞–Ω–¥—É –ø–µ—á–∞—Ç–∏ ¬´p¬ª (print), –æ–Ω –ø–æ–º–∏–º–æ —ç—Ç–æ–≥–æ –µ—â—ë –≤—ã–≤–µ–ª –∫–∞–∂–¥—É—é —Å—Ç—Ä–æ–∫—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:&lt;/p&gt;
&lt;pre style="border:1px solid #ddd;"&gt;
p
&lt;/pre&gt;

&lt;!-- https://stackoverflow.com/a/20669539 --&gt;

&lt;div style="display: flex;"&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
George Washington, 1789-1797
John Adams, 1797-1801
&lt;/pre&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
George Washington, 1789-1797
George Washington, 1789-1797
John Adams, 1797-1801
John Adams, 1797-1801
&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;&lt;a href="http://sed.js.org/index.html?gist=1390f7965021a31bbe435cb2ba0242f7"&gt;GIST&lt;/a&gt; | –ß—Ç–æ–±—ã –æ—Å–≤–æ–±–æ–¥–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ—Ç –ø–æ–≤—Ç–æ—Ä–æ–≤ –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –∫–æ–º–∞–Ω–¥—ã ¬´p¬ª, –º–æ–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å –≤ ¬´sed¬ª –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –≤—ã–≤–æ–¥ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–∏:&lt;/p&gt;
&lt;pre style="border:1px solid #ddd;"&gt;
-n p
&lt;/pre&gt;

&lt;!-- https://stackoverflow.com/a/20669539 --&gt;

&lt;div style="display: flex;"&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
George Washington, 1789-1797
John Adams, 1797-1801
Thomas Jefferson, 1801-1809
&lt;/pre&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
George Washington, 1789-1797
John Adams, 1797-1801
Thomas Jefferson, 1801-1809
&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;–°–æ–≥–ª–∞—Å–µ–Ω, –ø–æ–∫–∞ –Ω–µ –≤–ø–µ—á–∞—Ç–ª—è–µ—Ç. –ú—ã –ø—Ä–∏—à–ª–∏ –∫ —Ç–æ–º—É, —Å —á–µ–≥–æ –Ω–∞—á–∏–Ω–∞–ª–∏ –≤ –æ–±—Ä–∞–∑—Ü–µ, —Ç–æ–ª—å–∫–æ —Å–ª–æ–∂–Ω–µ–µ. –ù–æ –¥–∞–ª—å—à–µ –±—É–¥–µ—Ç –∏–Ω—Ç–µ—Ä–µ—Å–Ω–µ–π.&lt;/p&gt;
&lt;h2&gt;–î–ò–ê–ü–ê–ó–û–ù–´ –ê–î–†–ï–°–û–í&lt;/h2&gt;
&lt;p&gt;&lt;a href="http://sed.js.org/index.html?gist=a247498954df9d2bfb00d33222f59ae7"&gt;GIST&lt;/a&gt; | –ö–∞–∫ –Ω–∞—Å—á—ë—Ç –≤—ã–≤–æ–¥–∞ —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ–π –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ ? –ß—Ç–æ–±—ã –Ω–∞–ø–µ—á–∞—Ç–∞—Ç—å —Ç–æ–ª—å–∫–æ –ø–µ—Ä–≤—É—é —Å—Ç—Ä–æ–∫—É, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —É–∫–∞–∑–∞—Ç—å –µ—ë –Ω–æ–º–µ—Ä –ø–µ—Ä–µ–¥ –∫–æ–º–∞–Ω–¥–æ–π ¬´p¬ª:&lt;/p&gt;
&lt;pre style="border:1px solid #ddd;"&gt;
-n '1p'
&lt;/pre&gt;

&lt;!-- https://stackoverflow.com/a/20669539 --&gt;

&lt;div style="display: flex;"&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
George Washington, 1789-1797
John Adams, 1797-1801
Thomas Jefferson, 1801-1809
&lt;/pre&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
George Washington, 1789-1797
&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;&lt;a href="http://sed.js.org/index.html?gist=8f160094063d22771486e4b8958c3f63"&gt;GIST&lt;/a&gt; | –ï—Å–ª–∏ –≤ –∫–æ–º–∞–Ω–¥–µ —É–∫–∞–∑–∞–Ω –¥–∏–∞–ø–∞–∑–æ–Ω, —Ç–æ ¬´sed¬ª –≤—ã–ø–æ–ª–Ω—è–µ—Ç –≤—Å–µ –∫–æ–º–∞–Ω–¥—ã —Ç–æ–ª—å–∫–æ –Ω–∞ —Å—Ç—Ä–æ–∫–∞—Ö, –∫–æ—Ç–æ—Ä—ã–µ –≤—Ö–æ–¥—è—Ç –≤ —ç—Ç–æ—Ç –¥–∏–∞–ø–∞–∑–æ–Ω. –°–ª–µ–¥—É—é—â–∏–π –ø—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–∏–∞–ø–∞–∑–æ–Ω —Å—Ç—Ä–æ–∫ —Å –ø–µ—Ä–≤–æ–π –ø–æ –ø—è—Ç—É—é –∏ –ø—Ä–∏–º–µ–Ω–∏—Ç –∫–æ–º–∞–Ω–¥—É –¥–ª—è –ø–µ—á–∞—Ç–∏ ¬´p¬ª –¥–ª—è –Ω–∏—Ö:&lt;/p&gt;
&lt;pre style="border:1px solid #ddd;"&gt;
-n '1,5p'
&lt;/pre&gt;

&lt;!-- https://stackoverflow.com/a/20669539 --&gt;

&lt;div style="display: flex;"&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
George Washington, 1789-1797
John Adams, 1797-1801
Thomas Jefferson, 1801-1809
James Madison, 1809-1817
James Monroe, 1817-1825
John Quincy Adams, 1825-1829
Andrew Jackson, 1829-1837
&lt;/pre&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
George Washington, 1789-1797
John Adams, 1797-1801
Thomas Jefferson, 1801-1809
James Madison, 1809-1817
James Monroe, 1817-1825
&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;&lt;a href="http://sed.js.org/index.html?gist=93f1ead7166f726b70e429ca11569696"&gt;GIST&lt;/a&gt; | –î–∏–∞–ø–∞–∑–æ–Ω –º–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å —Ä–∞–∑–Ω—ã–º–∏ —Å–ø–æ—Å–æ–±–∞–º–∏. –°–ª–µ–¥—É—é—â–∏–π –ø—Ä–∏–º–µ—Ä –ø–µ—á–∞—Ç–∞–µ—Ç –ø–µ—Ä–≤—É—é –ø–ª—é—Å —á–µ—Ç—ã—Ä–µ —Å–ª–µ–¥—É—é—â–∏–µ —Å—Ç—Ä–æ–∫–∏ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –ø–µ—Ä–≤–æ–π:&lt;/p&gt;
&lt;pre style="border:1px solid #ddd;"&gt;
-n '1,+4p'
&lt;/pre&gt;

&lt;!-- https://stackoverflow.com/a/20669539 --&gt;

&lt;div style="display: flex;"&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
George Washington, 1789-1797
John Adams, 1797-1801
Thomas Jefferson, 1801-1809
James Madison, 1809-1817
James Monroe, 1817-1825
John Quincy Adams, 1825-1829
Andrew Jackson, 1829-1837
&lt;/pre&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
George Washington, 1789-1797
John Adams, 1797-1801
Thomas Jefferson, 1801-1809
James Madison, 1809-1817
James Monroe, 1817-1825
&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;&lt;a href="http://sed.js.org/index.html?gist=3b834e9645275075f1e759a87e9a0018"&gt;GIST&lt;/a&gt; | –¢–∏–ª—å–¥–∞ –¥–∏–∞–ø–∞–∑–æ–Ω –≤–∏–¥–∞ &lt;code&gt;A~B&lt;/code&gt; –≤—ã–ø–æ–ª–Ω–∏—Ç –∑–∞–¥–∞–Ω–Ω—É—é –∫–æ–º–∞–Ω–¥—É –Ω–∞ –∫–∞–∂–¥—É—é —Å—Ç—Ä–æ–∫—É B, –Ω–∞—á–∏–Ω–∞—è —Å–æ —Å—Ç—Ä–æ–∫–∏ A. –°–ª–µ–¥—É—é—â–∏–π –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π –ø—Ä–∏–º–µ—Ä –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∫–æ–º–∞–Ω–¥—É –ø–µ—á–∞—Ç–∏ –¥–ª—è –≤—Å–µ—Ö –Ω–µ—á—ë—Ç–Ω—ã—Ö —Å—Ç—Ä–æ–∫:&lt;/p&gt;
&lt;pre style="border:1px solid #ddd;"&gt;
-n '1~2p'
&lt;/pre&gt;

&lt;!-- https://stackoverflow.com/a/20669539 --&gt;

&lt;div style="display: flex;"&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
George Washington, 1789-1797
John Adams, 1797-1801
Thomas Jefferson, 1801-1809
James Madison, 1809-1817
James Monroe, 1817-1825
John Quincy Adams, 1825-1829
Andrew Jackson, 1829-1837
&lt;/pre&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
George Washington, 1789-1797
Thomas Jefferson, 1801-1809
James Monroe, 1817-1825
Andrew Jackson, 1829-1837
&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;–ï—Å–ª–∏ –Ω–µ—Ç –∞–¥—Ä–µ—Å–∞, ¬´sed¬ª –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ —Å—Ç—Ä–æ–∫–∏.&lt;/p&gt;
&lt;h2&gt;–£–î–ê–õ–ï–ù–ò–ï&lt;/h2&gt;
&lt;p&gt;&lt;a href="http://sed.js.org/index.html?gist=f8a131b1b241f04ed935b8247b942367"&gt;GIST&lt;/a&gt; | –î–ª—è —É–¥–∞–ª–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ –≤ ¬´sed¬ª –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ ¬´d¬ª (delete). –£–¥–∞–ª–∏–º –Ω–µ—á—ë—Ç–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏ –∏—Å–ø–æ–ª—å–∑—É—è —Ç–∏–ª—å–¥–∞ –¥–∏–∞–ø–∞–∑–æ–Ω —Å –ø—Ä–æ—à–ª–æ–≥–æ –ø—Ä–∏–º–µ—Ä–∞:&lt;/p&gt;
&lt;pre style="border:1px solid #ddd;"&gt;
'1~2d'
&lt;/pre&gt;

&lt;!-- https://stackoverflow.com/a/20669539 --&gt;

&lt;div style="display: flex;"&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
George Washington, 1789-1797
John Adams, 1797-1801
Thomas Jefferson, 1801-1809
James Madison, 1809-1817
James Monroe, 1817-1825
John Quincy Adams, 1825-1829
Andrew Jackson, 1829-1837
&lt;/pre&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
John Adams, 1797-1801
James Madison, 1809-1817
John Quincy Adams, 1825-1829
&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;–ö–æ–º–∞–Ω–¥—ã —É–¥–∞–ª–µ–Ω–∏—è –∏ –ø–µ—á–∞—Ç–∏ –æ—á–µ–Ω—å –ø—Ä–æ—Å—Ç—ã –∏ –ø–æ–Ω—è—Ç–Ω—ã, –Ω–æ –±–µ–∑ &lt;a href="http://proiot.ru/blog/posts/2017/11/03/likbez-po-grep-i-reguliarnym-vyrazheniiam/"&gt;—Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π&lt;/a&gt; —Ç–æ–ª–∫—É –æ—Ç –Ω–∏—Ö –ø–æ–∫–∞ –Ω–µ–º–Ω–æ–≥–æ. –ú—ã –Ω–µ –±—É–¥–µ–º —Å–µ–π—á–∞—Å –ø–æ–¥—Ä–æ–±–Ω–æ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å—Å—è –Ω–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–µ —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π —Ç.–∫. —ç—Ç–∞ —Ç–µ–º–∞ —É–∂–µ –ø–æ–¥—Ä–æ–±–Ω–æ –æ—Å–≤–µ—â–∞–ª–æ—Å—å –≤ –ø—Ä–µ–¥—ã–¥—É—â–µ–º –º–∞—Ç–µ—Ä–∏–∞–ª–µ –ø–æ &lt;a href="http://proiot.ru/blog/posts/2017/11/03/likbez-po-grep-i-reguliarnym-vyrazheniiam/"&gt;grep&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;–ó–ê–ú–ï–ù–ê&lt;/h2&gt;
&lt;p&gt;&lt;a href="http://sed.js.org/index.html?gist=42a90cf22cd2871bacc3269f98a134cc"&gt;GIST&lt;/a&gt; | –ö–æ–º–∞–Ω–¥–∞ ¬´s¬ª (substitute) ‚Äì —ç—Ç–æ –∫–æ–º–∞–Ω–¥–∞ –∑–∞–º–µ–Ω—ã. –í –¥–∞–Ω–Ω–æ–º –ø—Ä–∏–º–µ—Ä–µ —Ç—Ä–∏ —Å–ª–µ—à–∞ —Ä–∞–∑–¥–µ–ª—è—é—Ç –∫–æ–º–∞–Ω–¥—É, —Ä–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –∏ —Ç–æ, —á–µ–º —ç—Ç–æ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –Ω—É–∂–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å. –í –∫–∞—á–µ—Å—Ç–≤–µ —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª—è –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–ª–µ—à–∏, —ç—Ç–æ –º–æ–≥—É—Ç –±—ã—Ç—å –ª—é–±—ã–µ –¥—Ä—É–≥–∏–µ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ —Å–∏–º–≤–æ–ª—ã. –†–∞–∑–¥–µ–ª–∏—Ç–µ–ª–µ–º —Å—á–∏—Ç–∞–µ—Ç—Å—è –ø–µ—Ä–≤—ã–π —Å–∏–º–≤–æ–ª, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –≤—Å—Ç—Ä–µ—á–µ–Ω –ø–æ—Å–ª–µ ¬´s¬ª:&lt;/p&gt;
&lt;pre style="border:1px solid #ddd;"&gt;
's/o/@/'
&lt;/pre&gt;

&lt;!-- https://stackoverflow.com/a/20669539 --&gt;

&lt;div style="display: flex;"&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
George Washington, 1789-1797
John Adams, 1797-1801
Thomas Jefferson, 1801-1809
&lt;/pre&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
Ge@rge Washington, 1789-1797
J@hn Adams, 1797-1801
Th@mas Jefferson, 1801-1809
&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;&lt;a href="http://sed.js.org/index.html?gist=c996e18cdca1bca37d238a6661c4e5a3"&gt;GIST&lt;/a&gt; | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∫–æ–º–∞–Ω–¥–∞ ¬´s¬ª –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∑–∞–º–µ–Ω—É —Ç–æ–ª—å–∫–æ –ø–µ—Ä–≤–æ–≥–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è –≤ —Å—Ç—Ä–æ–∫–µ, –ø–æ—Å–ª–µ —á–µ–≥–æ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –∫ —Å–ª–µ–¥—É—é—â–µ–π —Å—Ç—Ä–æ–∫–µ. –ï—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è –∑–∞–º–µ–Ω–∏—Ç—å –≤—Å–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è, –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Ñ–ª–∞–≥ ¬´g¬ª (global), –∫–æ—Ç–æ—Ä—ã–π –ø–æ–º–µ—â–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ —à–∞–±–ª–æ–Ω–∞ –∑–∞–º–µ–Ω—ã:&lt;/p&gt;
&lt;pre style="border:1px solid #ddd;"&gt;
's/o/@/g'
&lt;/pre&gt;

&lt;!-- https://stackoverflow.com/a/20669539 --&gt;

&lt;div style="display: flex;"&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
George Washington, 1789-1797
John Adams, 1797-1801
Thomas Jefferson, 1801-1809
&lt;/pre&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
Ge@rge Washingt@n, 1789-1797
J@hn Adams, 1797-1801
Th@mas Jeffers@n, 1801-1809
&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;&lt;a href="http://sed.js.org/index.html?gist=e2bb61a432dd41455d56b3b998f0efba"&gt;GIST&lt;/a&gt; | –ß—Ç–æ–±—ã –∑–∞–º–µ–Ω–∏—Ç—å —Ç–æ–ª—å–∫–æ –∫–∞–∂–¥–æ–µ –≤—Ç–æ—Ä–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –≤ –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–µ, –≤–º–µ—Å—Ç–æ —Ñ–ª–∞–≥–∞ ¬´g¬ª –Ω—É–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å —á–∏—Å–ª–æ–≤–æ–π –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä ¬´2¬ª. –ß–∏—Å–ª–æ–≤–æ–π –º–æ–¥–∏—Ñ–∏–∫–∞—Ç–æ—Ä —É–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫–æ–µ –ø–æ —Å—á–µ—Ç—É —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –ø–æ–¥–ª–µ–∂–∏—Ç –∑–∞–º–µ–Ω–µ:&lt;/p&gt;
&lt;pre style="border:1px solid #ddd;"&gt;
's/o/@/2'
&lt;/pre&gt;

&lt;!-- https://stackoverflow.com/a/20669539 --&gt;

&lt;div style="display: flex;"&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
George Washington, 1789-1797
John Adams, 1797-1801
Thomas Jefferson, 1801-1809
&lt;/pre&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
George Washingt@n, 1789-1797
John Adams, 1797-1801
Thomas Jeffers@n, 1801-1809
&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;&lt;a href="http://sed.js.org/index.html?gist=88f8b1b3f5f3040d3c5c9aa50d6252f9"&gt;GIST&lt;/a&gt; | –ö–æ–º–∞–Ω–¥—ã –º–æ–∂–Ω–æ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å, –Ω–∞–ø—Ä–∏–º–µ—Ä –∫–æ–º–∞–Ω–¥–∞ –∑–∞–º–µ–Ω—ã –∏ –∫–æ–º–∞–Ω–¥–∞ –ø–µ—á–∞—Ç–∏ –º–æ–≥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å–æ–≤–º–µ—Å—Ç–Ω–æ. –ó–∞–º–µ–Ω–∞ –∫–∞–∂–¥–æ–≥–æ –≤—Ç–æ—Ä–æ–≥–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è –≤ —Å—Ç—Ä–æ–∫–µ –∏ –ø–æ—Å–ª–µ–¥—É—é—â–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ç–æ–ª—å–∫–æ —Ç–µ—Ö —Å—Ç—Ä–æ–∫, –≤ –∫–æ—Ç–æ—Ä—ã—Ö –ø—Ä–æ–∏–∑–æ—à–ª–∞ –∑–∞–º–µ–Ω–∞:&lt;/p&gt;
&lt;pre style="border:1px solid #ddd;"&gt;
-n 's/o/@/2p'
&lt;/pre&gt;

&lt;!-- https://stackoverflow.com/a/20669539 --&gt;

&lt;div style="display: flex;"&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
George Washington, 1789-1797
John Adams, 1797-1801
Thomas Jefferson, 1801-1809
&lt;/pre&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
George Washingt@n, 1789-1797
Thomas Jeffers@n, 1801-1809
&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;&lt;a href="http://sed.js.org/index.html?gist=583764fb194580632ad5ce71856cd230"&gt;GIST&lt;/a&gt; | –§–ª–∞–≥–∏ —Ç–æ–∂–µ –º–æ–∂–Ω–æ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å. –ù–∞–ø—Ä–∏–º–µ—Ä –≥–ª–æ–±–∞–ª—å–Ω—ã–π —Ñ–ª–∞–≥ ¬´g¬ª –∏ —Ñ–ª–∞–≥ –ø–æ–∏—Å–∫–∞ –±–µ–∑ —É—á—ë—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞ ¬´i¬ª (ignore case):&lt;/p&gt;
&lt;pre style="border:1px solid #ddd;"&gt;
's/G/@/ig'
&lt;/pre&gt;

&lt;!-- https://stackoverflow.com/a/20669539 --&gt;

&lt;div style="display: flex;"&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
George Washington, 1789-1797
&lt;/pre&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
@eor@e Washin@ton, 1789-1797
&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;–ü—Ä–µ–∂–¥–µ —á–µ–º –¥–≤–∏–≥–∞—Ç—å—Å—è –¥–∞–ª—å—à–µ, –¥–ª—è –∑–∞–∫—Ä–µ–ø–ª–µ–Ω–∏—è –ø—Ä–æ–π–¥–µ–Ω–Ω–æ–≥–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞ –æ—Ç–≤–µ—Ç—å—Ç–µ –¥–ª—è —Å–µ–±—è –Ω–∞ –≤–æ–ø—Ä–æ—Å, —á—Ç–æ –¥–µ–ª–∞–µ—Ç —Å–ª–µ–¥—É—é—â–µ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ &lt;code&gt;'1s/o/@/ig'&lt;/code&gt; ? –û—Ç–≤–µ—Ç &lt;a href="http://sed.js.org/index.html?gist=f08585d7412a7d26ec68f44c978d259b"&gt;GIST&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;–û–ë–†–ê–¢–ù–´–ï –°–°–´–õ–ö–ò&lt;/h2&gt;
&lt;p&gt;&lt;a href="http://sed.js.org/index.html?gist=21fbe495b08b8c58b7417fbb32f3b45f"&gt;GIST&lt;/a&gt; | –î–ª—è –Ω–∞—á–∞–ª–∞ –¥–∞–≤–∞–π—Ç–µ –æ—Å–≤–µ–∂–∏–º –≤ –ø–∞–º—è—Ç–∏ —á—Ç–æ –¥–µ–ª–∞–µ—Ç –∑–≤—ë–∑–¥–æ—á–∫–∞ –≤ —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏—è—Ö. –ú–µ—Ç–∞—Å–∏–º–≤–æ–ª –∑–≤–µ–∑–¥–æ—á–∫–∞ –æ–∑–Ω–∞—á–∞–µ—Ç –ø–æ–≤—Ç–æ—Ä–∏—Ç—å –ø—Ä–µ–¥—ã–¥—É—â–∏–π —Å–∏–º–≤–æ–ª –∏–ª–∏ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –Ω–æ–ª—å –∏–ª–∏ –±–æ–ª—å—à–µ —Ä–∞–∑. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞—Ö–≤–∞—Ç—ã–≤–∞—Ç—å —Ç–µ–∫—Å—Ç, –Ω–µ –∑–Ω–∞—è —Ç–æ—á–Ω–æ–π —Ñ—Ä–∞–∑—ã:&lt;/p&gt;
&lt;pre style="border:1px solid #ddd;"&gt;
's/^.*on/REPLACED/'
&lt;/pre&gt;

&lt;!-- https://stackoverflow.com/a/20669539 --&gt;

&lt;div style="display: flex;"&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
George Washington, 1789-1797
John Adams, 1797-1801
Thomas Jefferson, 1801-1809
&lt;/pre&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
REPLACED, 1789-1797
John Adams, 1797-1801
REPLACED, 1801-1809
&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;&lt;a href="http://sed.js.org/index.html?gist=36f951b6313aa1cfc12011127ee65a8e"&gt;GIST&lt;/a&gt; | –°—Å—ã–ª–∫–∞ ¬´&amp;amp;¬ª —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –≤—Å—ë –ø–æ–¥–≤—ã—Ä–∞–∂–µ–Ω–∏–µ, —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä—è—é—â–µ–µ –∑–∞–¥–∞–Ω–Ω–æ–º—É —Ä–µ–≥—É–ª—è—Ä–Ω–æ–º—É –≤—ã—Ä–∞–∂–µ–Ω–∏—é, —Ü–µ–ª–∏–∫–æ–º. –ù–∞–ø—Ä–∏–º–µ—Ä, —á—Ç–æ–±—ã –≤–∑—è—Ç—å –≤ —Ñ–∏–≥—É—Ä–Ω—ã–µ —Å–∫–æ–±–∫–∏ –≤–µ—Å—å —Ç–µ–∫—Å—Ç, —Å–æ–≤–ø–∞–¥–∞—é—â–∏–π —Å —à–∞–±–ª–æ–Ω–æ–º:&lt;/p&gt;
&lt;pre style="border:1px solid #ddd;"&gt;
's/^.*on/{&amp;}/'
&lt;/pre&gt;

&lt;!-- https://stackoverflow.com/a/20669539 --&gt;

&lt;div style="display: flex;"&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
George Washington, 1789-1797
John Adams, 1797-1801
Thomas Jefferson, 1801-1809
&lt;/pre&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
{George Washington}, 1789-1797
John Adams, 1797-1801
{Thomas Jefferson}, 1801-1809
&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;&lt;a href="http://sed.js.org/index.html?gist=d48469cba0623c095c31bdee4a6c7414"&gt;GIST&lt;/a&gt; | –ì—Ä—É–ø–ø—ã –≤ —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏—è—Ö –æ–±–æ–∑–Ω–∞—á–∞—é—Ç—Å—è –º–µ—Ç–∞—Å–∏–º–≤–æ–ª–∞–º–∏ –≤ –≤–∏–¥–µ –∫—Ä—É–≥–ª—ã—Ö —Å–∫–æ–±–æ–∫ –∏ –∏–º–µ—é—Ç —Å–º—ã—Å–ª, —Å—Ö–æ–∂–∏–π —Å –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ –≤—ã—Ä–∞–∂–µ–Ω–∏—è–º–∏. –í ¬´sed¬ª –º–æ–∂–Ω–æ —Å—Å—ã–ª–∞—Ç—å—Å—è –ø–æ –æ—Ç–¥–µ–ª—å–Ω–æ—Å—Ç–∏ –Ω–∞ –∫–∞–∂–¥—É—é –≥—Ä—É–ø–ø—É, –∏—Å–ø–æ–ª—å–∑—É—è –µ—ë –ø–æ—Ä—è–¥–∫–æ–≤—ã–π –Ω–æ–º–µ—Ä –æ—Ç—Å—á–∏—Ç—ã–≤–∞—è —Å–ª–µ–≤–∞:&lt;/p&gt;
&lt;pre style="border:1px solid #ddd;"&gt;
's/\([a-zA-Z0-9]\+\) \([a-zA-Z0-9]\+\)/\2 \1/'
&lt;/pre&gt;

&lt;!-- https://stackoverflow.com/a/20669539 --&gt;

&lt;div style="display: flex;"&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
George Washington, 1789-1797
John Adams, 1797-1801
Thomas Jefferson, 1801-1809
&lt;/pre&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
Washington George, 1789-1797
Adams John, 1797-1801
Jefferson Thomas, 1801-1809
&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;–°–ª–µ–¥—É–µ—Ç —É—á–∏—Ç—ã–≤–∞—Ç—å, —á—Ç–æ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ–±—Ä–∞—Ç–Ω—ã—Ö —Å—Å—ã–ª–æ–∫ –º–æ–∂–µ—Ç –Ω–µ–≥–∞—Ç–∏–≤–Ω–æ —Å–∫–∞–∑–∞—Ç—å—Å—è –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å–∫—Ä–∏–ø—Ç–æ–≤ (–æ—Å–æ–±–µ–Ω–Ω–æ –µ—Å–ª–∏ —Å—Ç—Ä–æ–∫ –º–Ω–æ–≥–æ –∏ –æ–Ω–∏ –¥–ª–∏–Ω–Ω—ã–µ), —Ç.–∫. –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –æ–±—Ä–∞—Ç–Ω—ã—Ö —Å—Å—ã–ª–æ–∫ ¬´sed¬ª —Ö—Ä–∞–Ω–∏—Ç –í–°–ï –∑–∞—Ö–≤–∞—á–µ–Ω–Ω—ã–µ –ø–æ–¥–≤—ã—Ä–∞–∂–µ–Ω–∏—è –≤ —Å–∫–æ–±–∫–∞—Ö –≤ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏.&lt;/p&gt;
&lt;h2&gt;–¶–ï–ü–û–ß–ö–ò –°–ö–†–ò–ü–¢–û–í&lt;/h2&gt;
&lt;p&gt;&lt;a href="http://sed.js.org/index.html?gist=cb0a609dca9df82c168a0220577f8fa7"&gt;GIST&lt;/a&gt; | –î–æ —ç—Ç–æ–≥–æ –º—ã –≤—Å–µ–≥–¥–∞ –ø–µ—Ä–µ–¥–∞–≤–∞–ª–∏ –≤ ¬´sed¬ª —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Å–∫—Ä–∏–ø—Ç, –Ω–æ –∏–Ω–æ–≥–¥–∞ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Å—Ä–∞–∑—É –Ω–µ—Å–∫–æ–ª—å–∫–æ. –ü—Ä–∏–º–µ—Ä –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–Ω–æ–∂–µ—Å—Ç–≤–∞ —Å–∫—Ä–∏–ø—Ç–æ–≤:&lt;/p&gt;
&lt;pre style="border:1px solid #ddd;"&gt;
-e 's/James/J./' -e 's/George/G./'
&lt;/pre&gt;

&lt;!-- https://stackoverflow.com/a/20669539 --&gt;

&lt;div style="display: flex;"&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
George Washington, 1789-1797
John Adams, 1797-1801
Thomas Jefferson, 1801-1809
James Madison, 1809-1817
James Monroe, 1817-1825
&lt;/pre&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
G. Washington, 1789-1797
John Adams, 1797-1801
Thomas Jefferson, 1801-1809
J. Madison, 1809-1817
J. Monroe, 1817-1825
&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;&lt;a href="http://sed.js.org/index.html?gist=8944e985cff0fd4317ff69547c4bcf34"&gt;GIST&lt;/a&gt; | –ê –º–æ–∂–Ω–æ –≤–æ–æ–±—â–µ –æ–±—ä–µ–¥–∏–Ω–∏—Ç—å —Å–∫—Ä–∏–ø—Ç—ã –≤ –æ–¥–∏–Ω –ø—Ä–∏ –ø–æ–º–æ—â–∏ —Å–∏–º–≤–æ–ª–∞ —Ç–æ—á–∫–∏ —Å –∑–∞–ø—è—Ç–æ–π. –≠—Ç–æ—Ç –º–µ—Ç–æ–¥ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ—á–Ω–æ —Ç–∞–∫ –∂–µ –∫–∞–∫ –∏ –ø—Ä–µ–¥—ã–¥—É—â–∏–π:&lt;/p&gt;
&lt;pre style="border:1px solid #ddd;"&gt;
's/James/J./;s/George/G./'
&lt;/pre&gt;

&lt;!-- https://stackoverflow.com/a/20669539 --&gt;

&lt;div style="display: flex;"&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
George Washington, 1789-1797
John Adams, 1797-1801
Thomas Jefferson, 1801-1809
James Madison, 1809-1817
James Monroe, 1817-1825
&lt;/pre&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
G. Washington, 1789-1797
John Adams, 1797-1801
Thomas Jefferson, 1801-1809
J. Madison, 1809-1817
J. Monroe, 1817-1825
&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —Ç–æ—á–∫–∏ —Å –∑–∞–ø—è—Ç–æ–π –≤—Å–µ –∫–æ–º–∞–Ω–¥—ã –º–æ–∂–Ω–æ –ø–µ—Ä–µ—á–∏—Å–ª–∏—Ç—å –≤ –æ–¥–Ω–∏—Ö –∫–∞–≤—ã—á–∫–∞—Ö.&lt;/p&gt;
&lt;h2&gt;–ü–†–û–î–í–ò–ù–£–¢–ê–Ø –ê–î–†–ï–°–ê–¶–ò–Ø&lt;/h2&gt;
&lt;p&gt;&lt;a href="http://sed.js.org/index.html?gist=5ffa5ffd5ae98fb848b74d95d1511c88"&gt;GIST&lt;/a&gt; | –í–µ—Ä–Ω—ë–º—Å—è –∫ –∞–¥—Ä–µ—Å–∞—Ü–∏–∏. –í –∫–∞—á–µ—Å—Ç–≤–µ –∫—Ä–∏—Ç–µ—Ä–∏–µ–≤ –≤—ã–±–æ—Ä–∞ —Å—Ç—Ä–æ–∫ (–∞–¥—Ä–µ—Å–∞—Ü–∏–∏), –∫–æ—Ç–æ—Ä—ã–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç ¬´sed¬ª, —Ç–∞–∫–∂–µ —Ä–∞–∑—Ä–µ—à–∞–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è:&lt;/p&gt;
&lt;pre style="border:1px solid #ddd;"&gt;
'/John Adams/s/.*/Hello/'
&lt;/pre&gt;

&lt;!-- https://stackoverflow.com/a/20669539 --&gt;

&lt;div style="display: flex;"&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
George Washington, 1789-1797
John Adams, 1797-1801
Thomas Jefferson, 1801-1809
&lt;/pre&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
George Washington, 1789-1797
Hello
Thomas Jefferson, 1801-1809
&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;&lt;a href="http://sed.js.org/index.html?gist=86ee4cf15e7f4a3f63be568f07fa195b"&gt;GIST&lt;/a&gt; | –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è –º–æ–≥—É—Ç –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã –≤ –ª—é–±–æ–π —á–∞—Å—Ç–∏ –¥–∏–∞–ø–∞–∑–æ–Ω–∞. –°–ª–µ–¥—É—é—â–∏–π –ø—Ä–∏–º–µ—Ä —É–¥–∞–ª–∏—Ç –≤—Å–µ —Å—Ç—Ä–æ–∫–∏ –æ—Ç –ø–µ—Ä–≤–æ–≥–æ –Ω–∞–π–¥–µ–Ω–Ω–æ–≥–æ —Å–ª–æ–≤–∞ START –¥–æ –ø–µ—Ä–≤–æ–≥–æ –Ω–∞–π–¥–µ–Ω–Ω–æ–≥–æ —Å–ª–æ–≤–∞ END:&lt;/p&gt;
&lt;pre style="border:1px solid #ddd;"&gt;
'/^START$/,/^END$/d'
&lt;/pre&gt;

&lt;!-- https://stackoverflow.com/a/20669539 --&gt;

&lt;div style="display: flex;"&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
George Washington, 1789-1797
John Adams, 1797-1801
START
Thomas Jefferson, 1801-1809
James Madison, 1809-1817
END
James Monroe, 1817-1825
&lt;/pre&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
George Washington, 1789-1797
John Adams, 1797-1801
James Monroe, 1817-1825
&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;&lt;a href="http://sed.js.org/index.html?gist=1a4377fe007c853b9073dd67cd465503"&gt;GIST&lt;/a&gt; | –ß—Ç–æ–±—ã –∏–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∞–¥—Ä–µ—Å–∞—Ü–∏—é, —Ç–æ –µ—Å—Ç—å –≤—ã–±—Ä–∞—Ç—å —Å—Ç—Ä–æ–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —à–∞–±–ª–æ–Ω—É, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤–æ—Å–∫–ª–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–π –∑–Ω–∞–∫:&lt;/p&gt;
&lt;pre style="border:1px solid #ddd;"&gt;
'/John Adams/!s/.*/Hello/'
&lt;/pre&gt;

&lt;!-- https://stackoverflow.com/a/20669539 --&gt;

&lt;div style="display: flex;"&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
George Washington, 1789-1797
John Adams, 1797-1801
Thomas Jefferson, 1801-1809
&lt;/pre&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
Hello
John Adams, 1797-1801
Hello
&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;–ò–Ω–≤–µ—Ä—Å–∏—è —Ç–æ—á–Ω–æ —Ç–∞–∫ –∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –æ–±—ã—á–Ω–æ–π –Ω—É–º–µ—Ä–∞—Ü–∏–µ–π.&lt;/p&gt;
&lt;h2&gt;–î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ô –ë–£–§–ï–†&lt;/h2&gt;
&lt;p&gt;–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –±—É—Ñ–µ—Ä (hold buffer) –≤ ¬´sed¬ª –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å –º–Ω–æ–≥–æ—Å—Ç—Ä–æ—á–Ω–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ. –ù–∞–ª–∏—á–∏–µ —ç—Ç–æ–≥–æ  –±—É—Ñ–µ—Ä–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å —Å—Ç—Ä–æ–∫–∏ –≤–æ –≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã –Ω–∞–¥ –¥—Ä—É–≥–∏–º–∏ —Å—Ç—Ä–æ–∫–∞–º–∏. –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –±—É—Ñ–µ—Ä–æ–º:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;h: –∫–æ–ø–∏—Ä—É–µ—Ç —Ç–µ–∫—É—â–∏–π –±—É—Ñ–µ—Ä –æ–±—Ä–∞–±–æ—Ç–∫–∏  (–ø–æ—Å–ª–µ–¥–Ω–µ–π —Å–æ–≤–ø–∞–≤—à–µ–π —Å—Ç—Ä–æ–∫–∏, —Å –∫–æ—Ç–æ—Ä–æ–π –≤—ã —Ä–∞–±–æ—Ç–∞–µ—Ç–µ) –≤ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –±—É—Ñ–µ—Ä&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;H: –¥–æ–±–∞–≤–ª—è–µ—Ç —Ç–µ–∫—É—â–∏–π –±—É—Ñ–µ—Ä –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤ –∫–æ–Ω–µ—Ü —Ç–µ–∫—É—â–µ–π –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏, —Ä–∞–∑–¥–µ–ª—è—è –∏—Ö —Å–∏–º–≤–æ–ª–æ–º –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;g: –∫–æ–ø–∏—Ä—É–µ—Ç —Ç–µ–∫—É—â–∏–π –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –±—É—Ñ–µ—Ä –≤ —Ç–µ–∫—É—â–∏–π –±—É—Ñ–µ—Ä –æ–±—Ä–∞–±–æ—Ç–∫–∏. –ü—Ä–µ–¥—ã–¥—É—â–∏–π –±—É—Ñ–µ—Ä –æ–±—Ä–∞–±–æ—Ç–∫–∏ –±—É–¥–µ—Ç —É—Ç–µ—Ä—è–Ω&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;G: –¥–æ–±–∞–≤–ª—è–µ—Ç —Ç–µ–∫—É—â–∏–π —à–∞–±–ª–æ–Ω –≤ —Ç–µ–∫—É—â–∏–π –±—É—Ñ–µ—Ä –æ–±—Ä–∞–±–æ—Ç–∫–∏, —Ä–∞–∑–¥–µ–ª—è—è –∏—Ö —Å–∏–º–≤–æ–ª–æ–º –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;x: –ü–æ–¥–∫–∞—á–∏–≤–∞–µ—Ç —Ç–µ–∫—É—â–∏–π —à–∞–±–ª–æ–Ω –∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –±—É—Ñ–µ—Ä&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href="http://sed.js.org/index.html?gist=d7e6d30a4aa389b960ae704d6cd3b0f1"&gt;GIST&lt;/a&gt; | –ù–∞ –∑–∞–∫—É—Å–∫—É —Ç–∞–∫–æ–π –≤–æ—Ç –Ω–µ—Ö–∏–ª—ã–π –ø—Ä–∏–º–µ—Ä—á–∏–∫ –¥–ª—è —Å–∫–ª–µ–∏–≤–∞–Ω–∏—è —Å–º–µ–∂–Ω—ã—Ö —Å—Ç—Ä–æ–∫:&lt;/p&gt;
&lt;pre style="border:1px solid #ddd;"&gt;
-n '1~2h;2~2{H;g;s/\n/ /;p}'
&lt;/pre&gt;

&lt;!-- https://stackoverflow.com/a/20669539 --&gt;

&lt;div style="display: flex;"&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
George Washington, 1789-1797
John Adams, 1797-1801
Thomas Jefferson, 1801-1809
James Madison, 1809-1817
James Monroe, 1817-1825
&lt;/pre&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
George Washington, 1789-1797 John Adams, 1797-1801
Thomas Jefferson, 1801-1809 James Madison, 1809-1817
&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;&lt;code&gt;1~2h&lt;/code&gt; ‚Äì –¥–∏–∞–ø–∞–∑–æ–Ω –∞–¥—Ä–µ—Å–∞, –∫–∞–∂–¥–∞—è –Ω–µ—á—ë—Ç–Ω–∞—è —Å—Ç—Ä–æ–∫–∞, –Ω–∞—á–∏–Ω–∞ —Å –ø–µ—Ä–≤–æ–π, –∫–æ–ø–∏—Ä—É–µ—Ç—Å—è –≤ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –±—É—Ñ–µ—Ä –∫–æ–º–∞–Ω–¥–æ–π ¬´h¬ª. –ó–∞—Ç–µ–º –±–µ—Ä—ë—Ç—Å—è –∫–∞–∂–¥–∞—è —á—ë—Ç–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ &lt;code&gt;2~2&lt;/code&gt;. –û—Å—Ç–∞–ª—å–Ω–∞—è —á–∞—Å—Ç—å –∫–æ–º–∞–Ω–¥—ã –≤–∑—è—Ç–∞ –≤ —Ñ–∏–≥—É—Ä–Ω—ã–µ —Å–∫–æ–±–∫–∏. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —ç—Ç–∞ —á–∞—Å—Ç—å –∫–æ–º–∞–Ω–¥—ã –±—É–¥—É—Ç –Ω–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å –∞–¥—Ä–µ—Å, –∫–æ—Ç–æ—Ä—ã–π –±—ã–ª —Ç–æ–ª—å–∫–æ —á—Ç–æ —É–∫–∞–∑–∞–Ω. –ë–µ–∑ —ç—Ç–∏—Ö —Å–∫–æ–±–æ–∫, –Ω–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å –∞–¥—Ä–µ—Å –±—É–¥–µ—Ç —Ç–æ–ª—å–∫–æ –∫–æ–º–∞–Ω–¥–∞ ¬´H¬ª, –∞ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –±—É–¥—É—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –¥–ª—è –∫–∞–∂–¥–æ–π —Å—Ç—Ä–æ–∫–∏. –í —Ñ–∏–≥—É—Ä–Ω—ã—Ö —Å–∫–æ–±–æ—á–∫–∞—Ö –±—É—Ñ–µ—Ä—ã —Å–∫–ª–µ–∏–≤–∞—é—Ç—Å—è –≤ –æ–¥–Ω—É —Å—Ç—Ä–æ–∫—É, –ø–æ—Å–ª–µ —á–µ–≥–æ —Å–∏–º–≤–æ–ª –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏ –∑–∞–º–µ–Ω—è–µ—Ç—Å—è —Å–∏–º–≤–æ–ª–æ–º –ø—Ä–æ–±–µ–ª–∞ –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–µ—á–∞—Ç–∞–µ—Ç—Å—è –Ω–∞ —ç–∫—Ä–∞–Ω. –£—Ä–∞ !&lt;/p&gt;</content><category term="regex"></category></entry><entry><title>–õ–∏–∫–±–µ–∑ –ø–æ GREP –∏ —Ä–µ–≥—É–ª—è—Ä–Ω—ã–º –≤—ã—Ä–∞–∂–µ–Ω–∏—è–º</title><link href="http://proiot.ru/blog/posts/2017/11/03/likbez-po-grep-i-reguliarnym-vyrazheniiam/" rel="alternate"></link><published>2017-11-03T00:00:00+02:00</published><updated>2017-11-03T00:00:00+02:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2017-11-03:/blog/posts/2017/11/03/likbez-po-grep-i-reguliarnym-vyrazheniiam/</id><summary type="html">&lt;p&gt;–û–¥–Ω–∞ –∏–∑ –Ω–∞–∏–±–æ–ª–µ–µ –ø–æ–ª–µ–∑–Ω—ã—Ö –∏ –º–Ω–æ–≥–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –∫–æ–º–∞–Ω–¥ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ Linux ‚Äì –∫–æ–º–∞–Ω–¥–∞ ¬´grep¬ª. –ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –∞–∫—Ä–æ–Ω–∏–º –∞–Ω–≥–ª–∏–π—Å–∫–æ–π —Ñ—Ä–∞–∑—ã ¬´search Globally for lines matching the Regular Expression, and Print them¬ª (–∏—Å–∫–∞—Ç—å –≤–µ–∑–¥–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —Ä–µ–≥—É–ª—è—Ä–Ω–æ–º—É –≤—ã—Ä–∞–∂–µ–Ω–∏—é —Å—Ç—Ä–æ–∫–∏ –∏ –≤—ã–≤–æ–¥–∏—Ç—å –∏—Ö). –ö–æ–º–∞–Ω–¥–∞ ¬´grep¬ª –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç –≤—Ö–æ–¥–Ω–æ–π –ø–æ—Ç–æ–∫ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ, —Å—Ç—Ä–æ–∫–∞ –∑–∞ —Å—Ç—Ä–æ–∫–æ–π, –≤ –ø–æ–∏—Å–∫–∞—Ö —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;p&gt;–û–¥–Ω–∞ –∏–∑ –Ω–∞–∏–±–æ–ª–µ–µ –ø–æ–ª–µ–∑–Ω—ã—Ö –∏ –º–Ω–æ–≥–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –∫–æ–º–∞–Ω–¥ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ Linux ‚Äì –∫–æ–º–∞–Ω–¥–∞ ¬´grep¬ª. –ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –∞–∫—Ä–æ–Ω–∏–º –∞–Ω–≥–ª–∏–π—Å–∫–æ–π —Ñ—Ä–∞–∑—ã ¬´search Globally for lines matching the Regular Expression, and Print them¬ª (–∏—Å–∫–∞—Ç—å –≤–µ–∑–¥–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —Ä–µ–≥—É–ª—è—Ä–Ω–æ–º—É –≤—ã—Ä–∞–∂–µ–Ω–∏—é —Å—Ç—Ä–æ–∫–∏ –∏ –≤—ã–≤–æ–¥–∏—Ç—å –∏—Ö). –ö–æ–º–∞–Ω–¥–∞ ¬´grep¬ª –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç –≤—Ö–æ–¥–Ω–æ–π –ø–æ—Ç–æ–∫ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ, —Å—Ç—Ä–æ–∫–∞ –∑–∞ —Å—Ç—Ä–æ–∫–æ–π, –≤ –ø–æ–∏—Å–∫–∞—Ö —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π –∏ –≤—ã–≤–æ–¥–∏—Ç (–æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤—ã–≤–∞–µ—Ç) —Ç–æ–ª—å–∫–æ —Ç–µ —Å—Ç—Ä–æ–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ —Å–æ–¥–µ—Ä–∂–∞—Ç —Ç–µ–∫—Å—Ç, —Å–æ–≤–ø–∞–¥–∞—é—â–∏–π —Å –∑–∞–¥–∞–Ω–Ω—ã–º —à–∞–±–ª–æ–Ω–æ–º ‚Äì &lt;em&gt;—Ä–µ–≥—É–ª—è—Ä–Ω—ã–º –≤—ã—Ä–∞–∂–µ–Ω–∏–µ–º&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;–†–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è ‚Äî —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞–ª—å–Ω—ã–π —è–∑—ã–∫ –ø–æ–∏—Å–∫–∞ –∏ –æ—Å—É—â–µ—Å—Ç–≤–ª–µ–Ω–∏—è –º–∞–Ω–∏–ø—É–ª—è—Ü–∏–π —Å –ø–æ–¥—Å—Ç—Ä–æ–∫–∞–º–∏ –≤ —Ç–µ–∫—Å—Ç–µ, –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–π –Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –º–µ—Ç–∞—Å–∏–º–≤–æ–ª–æ–≤. –°–µ–π—á–∞—Å —É–∂–µ –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –≤—Å–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —è–∑—ã–∫–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –∏–º–µ—é—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω—É—é –ø–æ–¥–¥–µ—Ä–∂–∫—É —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç–µ–∫—Å—Ç–æ–≤, –æ–¥–Ω–∞–∫–æ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏ –ø–æ–ø—É–ª—è—Ä–∏–∑–∞—Ü–∏–∏ –¥–∞–Ω–Ω–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞ –≤–æ –º–Ω–æ–≥–æ–º —Å–ø–æ—Å–æ–±—Å—Ç–≤–æ–≤–∞–ª –∏–º–µ–Ω–Ω–æ –º–∏—Ä UNIX –∏ –≤ —á–∞—Å—Ç–Ω–æ—Å—Ç–∏ –∏–¥–µ–∏, –∑–∞–ª–æ–∂–µ–Ω–Ω—ã–µ –≤ –∫–æ–º–∞–Ω–¥—ã ¬´grep¬ª, ¬´sed¬ª –∏ –¥—Ä. –§–∏–ª–æ—Å–æ—Ñ–∏—è ¬´–≤—Å–µ –µ—Å—Ç—å —Ñ–∞–π–ª¬ª –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø—Ä–æ–Ω–∏–∑—ã–≤–∞–µ—Ç UNIX –∏ –≤–ª–∞–¥–µ–Ω–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ç–µ–∫—Å—Ç–æ–≤—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏ —è–≤–ª—è–µ—Ç—Å—è –æ–¥–Ω–∏–º –∏–∑ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –Ω–∞–≤—ã–∫–æ–≤ –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è Linux.&lt;/p&gt;
&lt;h2&gt;–û–ë–†–ê–ó–ï–¶&lt;/h2&gt;
&lt;p&gt;&lt;a href="http://grep.js.org/index.html?gist=957620b1864a0951915cfdf826f48444"&gt;GIST&lt;/a&gt; | –ü—Ä–æ—Å—Ç–µ–π—à–∏–π –ø–æ–∏—Å–∫ –≤—Å–µ—Ö —Å—Ç—Ä–æ–∫, –≤ –∫–æ—Ç–æ—Ä—ã—Ö –µ—Å—Ç—å —Ç–µ–∫—Å—Ç ¬´Adams¬ª. –ü—Ä–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏–∏ —ç—Ç–æ–≥–æ –∏ –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö –ø—Ä–∏–º–µ—Ä–æ–≤ –±—É–¥–µ–º –ø—Ä–∏–¥–µ—Ä–∂–∏–≤–∞—Ç—å—Å—è —Å–ª–µ–¥—É—é—â–µ–≥–æ –ø–æ—Ä—è–¥–∫–∞: —Å–≤–µ—Ä—Ö—É –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏, –≤–Ω–∏–∑—É —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –ø–æ—Ç–æ–∫–∏ —Å–ª–µ–≤–∞ –≤–≤–æ–¥–∞ &lt;code&gt;stdin&lt;/code&gt; –∏ —Å–ø—Ä–∞–≤–∞ –≤—ã–≤–æ–¥–∞ &lt;code&gt;stdout&lt;/code&gt;.&lt;/p&gt;
&lt;pre style="border:1px solid #ddd;"&gt;
Adams
&lt;/pre&gt;

&lt;!-- https://stackoverflow.com/a/20669539 --&gt;

&lt;div style="display: flex;"&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
George Washington, 1789-1797
John Adams, 1797-1801
Thomas Jefferson, 1801-1809
&lt;/pre&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
John Adams, 1797-1801
&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;–ö–æ–º–∞–Ω–¥–∞ ¬´grep¬ª –∏–º–µ–µ—Ç –≤–Ω—É—à–∏—Ç–µ–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ–ø—Ü–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ. –° –ø–æ–º–æ—â—å—é —ç—Ç–∏—Ö –æ–ø—Ü–∏–π –º–æ–∂–Ω–æ –¥–µ–ª–∞—Ç—å –º–Ω–æ–≥–æ –ø–æ–ª–µ–∑–Ω—ã—Ö –≤–µ—â–µ–π –∏ –ø—Ä–∏ —ç—Ç–æ–º –≤ –ø—Ä–∏–Ω—Ü–∏–ø–µ –¥–∞–∂–µ –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Ö–æ—Ä–æ—à–æ —Ä–∞–∑–±–∏—Ä–∞—Ç—å—Å—è –≤ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–µ —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π.&lt;/p&gt;
&lt;h2&gt;–û–ü–¶–ò–ò&lt;/h2&gt;
&lt;p&gt;–ù–∞—á–Ω—ë–º —Å —Ç–æ–≥–æ, —á—Ç–æ ¬´grep¬ª —É–º–µ–µ—Ç –Ω–µ —Ç–æ–ª—å–∫–æ —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –≤–≤–æ–¥ &lt;code&gt;stdin&lt;/code&gt;, –Ω–æ –∏ –æ—Å—É—â–µ—Å—Ç–≤–ª—è—Ç—å –ø–æ–∏—Å–∫ –ø–æ —Ñ–∞–π–ª–∞–º. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é ¬´grep¬ª –±—É–¥–µ—Ç –∏—Å–∫–∞—Ç—å —Ç–æ–ª—å–∫–æ –≤ —Ñ–∞–π–ª–∞—Ö, –Ω–∞—Ö–æ–¥—è—â–∏—Ö—Å—è –≤ —Ç–µ–∫—É—â–µ–º –∫–∞—Ç–∞–ª–æ–≥–µ, –æ–¥–Ω–∞–∫–æ –ø—Ä–∏ –ø–æ–º–æ—â–∏ –æ—á–µ–Ω—å –ø–æ–ª–µ–∑–Ω–æ–π –æ–ø—Ü–∏–∏ &lt;code&gt;--recursive&lt;/code&gt; –º–æ–∂–Ω–æ —Å–∫–∞–∑–∞—Ç—å –∫–æ–º–∞–Ω–¥–µ ¬´grep¬ª –∏—Å–∫–∞—Ç—å —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ –Ω–∞—á–∏–Ω–∞—è —Å –∑–∞–¥–∞–Ω–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://grep.js.org/index.html?gist=ff5db1fc8091ba2e1b203a942ee9eceb"&gt;GIST&lt;/a&gt; | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∫–æ–º–∞–Ω–¥–∞ ¬´grep¬ª —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–∞ –∫ —Ä–µ–≥–∏—Å—Ç—Ä—É. –°–ª–µ–¥—É—é—â–∏–π –ø—Ä–∏–º–µ—Ä –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∫–∞–∫ –º–æ–∂–Ω–æ –∏—Å–∫–∞—Ç—å –∏ –ø—Ä–∏ —ç—Ç–æ–º –Ω–µ —É—á–∏—Ç—ã–≤–∞—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä, –Ω–∞–ø—Ä–∏–º–µ—Ä ¬´Adams¬ª –∏ ¬´adams¬ª –æ–¥–Ω–æ –∏ —Ç–æ –∂–µ:&lt;/p&gt;
&lt;pre style="border:1px solid #ddd;"&gt;
--ignore-case 'adams'
&lt;/pre&gt;

&lt;div style="display: flex;"&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
George Washington, 1789-1797
John Adams, 1797-1801
Thomas Jefferson, 1801-1809
&lt;/pre&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
John Adams, 1797-1801
&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;&lt;a href="http://grep.js.org/index.html?gist=52e9acf3762c6ec1f13000d4dc8b3061"&gt;GIST&lt;/a&gt; | –ü–æ–∏—Å–∫ –Ω–∞–æ–±–æ—Ä–æ—Ç (–∏–Ω–æ–≥–¥–∞ –≥–æ–≤–æ—Ä—è—Ç –∏–Ω–≤–µ—Ä—Ç–Ω—ã–π –ø–æ–∏—Å–∫), —Ç–æ –µ—Å—Ç—å –±—É–¥—É—Ç –≤—ã–≤–µ–¥–µ–Ω—ã –≤—Å–µ —Å—Ç—Ä–æ–∫–∏, –∫—Ä–æ–º–µ –∏–º–µ—é—â–∏—Ö –≤—Ö–æ–∂–¥–µ–Ω–∏–µ —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ —à–∞–±–ª–æ–Ω–∞:&lt;/p&gt;
&lt;pre style="border:1px solid #ddd;"&gt;
--invert-match 'Adams'
&lt;/pre&gt;

&lt;div style="display: flex;"&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
George Washington, 1789-1797
John Adams, 1797-1801
Thomas Jefferson, 1801-1809
&lt;/pre&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
George Washington, 1789-1797
Thomas Jefferson, 1801-1809
&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;&lt;a href="http://grep.js.org/index.html?gist=0bcb3ff471727128123251ef1bec4986"&gt;GIST&lt;/a&gt; | –û–ø—Ü–∏–∏ –∫–æ–Ω–µ—á–Ω–æ –∂–µ –º–æ–∂–Ω–æ –∏ –Ω—É–∂–Ω–æ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å –¥—Ä—É–≥ —Å –¥—Ä—É–≥–æ–º. –ù–∞–ø—Ä–∏–º–µ—Ä –ø–æ–∏—Å–∫ –Ω–∞–æ–±–æ—Ä–æ—Ç —Å –≤—ã–≤–æ–¥–æ–º –ø–æ—Ä—è–¥–∫–æ–≤—ã—Ö –Ω–æ–º–µ—Ä–æ–≤ —Å—Ç—Ä–æ–∫ —Å –≤—Ö–æ–∂–¥–µ–Ω–∏—è–º–∏:&lt;/p&gt;
&lt;pre style="border:1px solid #ddd;"&gt;
--line-number --invert-match 'Adams'
&lt;/pre&gt;

&lt;div style="display: flex;"&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
George Washington, 1789-1797
John Adams, 1797-1801
Thomas Jefferson, 1801-1809
&lt;/pre&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
1:George Washington, 1789-1797
3:Thomas Jefferson, 1801-1809
&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;&lt;a href="http://grep.js.org/index.html?gist=1f53cf2e211e53e7e08bbf377ed0ddaf"&gt;GIST&lt;/a&gt; | –†–∞—Å–∫—Ä–∞—Å–∫–∞. –ò–Ω–æ–≥–¥–∞ —É–¥–æ–±–Ω–æ, –∫–æ–≥–¥–∞ –∏—Å–∫–æ–º–æ–µ –Ω–∞–º–∏ —Å–ª–æ–≤–æ –ø–æ–¥—Å–≤–µ—á–∏–≤–∞–µ—Ç—Å—è —Ü–≤–µ—Ç–æ–º. –í—Å–µ —ç—Ç–æ —É–∂–µ –µ—Å—Ç—å –≤ ¬´grep¬ª, –æ—Å—Ç–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤–∫–ª—é—á–∏—Ç—å:&lt;/p&gt;
&lt;pre style="border:1px solid #ddd;"&gt;
--line-number --color=always 'Adams'
&lt;/pre&gt;

&lt;div style="display: flex;"&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
George Washington, 1789-1797
John Adams, 1797-1801
Thomas Jefferson, 1801-1809
&lt;/pre&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
2:John Adams, 1797-1801
&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;&lt;a href="http://grep.js.org/index.html?gist=21424ef462f6268cd04119a8c0afe803"&gt;GIST&lt;/a&gt; | –ú—ã —Ö–æ—Ç–∏–º –≤—ã–±—Ä–∞—Ç—å –≤—Å–µ –æ—à–∏–±–∫–∏ –∏–∑ –ª–æ–≥ —Ñ–∞–π–ª–∞, –Ω–æ –∑–Ω–∞–µ–º —á—Ç–æ –≤ —Å–ª–µ–¥—É—é—â–µ–π —Å—Ç–æ—á–∫–µ –ø–æ—Å–ª–µ –æ—à–∏–±–∫–∏ –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å—Å—è –ø–æ–ª–µ–∑–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è, —Ç–æ–≥–¥–∞ —É–¥–æ–±–Ω–æ –≤—ã–≤–µ—Å—Ç–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç—Ä–æ–∫ –∏–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é ¬´grep¬ª –≤—ã–≤–æ–¥–∏—Ç –ª–∏—à—å —Å—Ç—Ä–æ–∫—É, –≤ –∫–æ—Ç–æ—Ä–æ–π –±—ã–ª–æ –Ω–∞–π–¥–µ–Ω–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ, –Ω–æ –µ—Å—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –æ–ø—Ü–∏–π, –ø–æ–∑–≤–æ–ª—è—é—â–∏—Ö –∑–∞—Å—Ç–∞–≤–∏—Ç—å ¬´grep¬ª –≤—ã–≤–æ–¥–∏—Ç—å –±–æ–ª—å—à–µ. –î–ª—è –≤—ã–≤–æ–¥–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å—Ç—Ä–æ–∫ (–≤ –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ –¥–≤—É—Ö) –ø–æ—Å–ª–µ –≤—Ö–æ–∂–¥–µ–Ω–∏—è:&lt;/p&gt;
&lt;pre style="border:1px solid #ddd;"&gt;
--color=always -A2 'Adams'
&lt;/pre&gt;

&lt;div style="display: flex;"&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
George Washington, 1789-1797
John Adams, 1797-1801
Thomas Jefferson, 1801-1809
James Madison, 1809-1817
James Monroe, 1817-1825
&lt;/pre&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
John Adams, 1797-1801
Thomas Jefferson, 1801-1809
James Madison, 1809-1817
&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;&lt;a href="http://grep.js.org/index.html?gist=5c4de2225af0eaba73f6ffcc75791662"&gt;GIST&lt;/a&gt; | –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –¥–ª—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Å—Ç—Ä–æ–∫ –ø–µ—Ä–µ–¥ –≤—Ö–æ–∂–¥–µ–Ω–∏–µ–º:&lt;/p&gt;
&lt;pre style="border:1px solid #ddd;"&gt;
--color=always -B2 'James'
&lt;/pre&gt;

&lt;div style="display: flex;"&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
George Washington, 1789-1797
John Adams, 1797-1801
Thomas Jefferson, 1801-1809
James Madison, 1809-1817
James Monroe, 1817-1825
&lt;/pre&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
John Adams, 1797-1801
Thomas Jefferson, 1801-1809
James Madison, 1809-1817
James Monroe, 1817-1825
&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;&lt;a href="http://grep.js.org/index.html?gist=82b178669b38cb4f39c435ee8d872334"&gt;GIST&lt;/a&gt; | –û–¥–Ω–∞–∫–æ —á–∞—â–µ –≤—Å–µ–≥–æ —Ç—Ä–µ–±—É–µ—Ç—Å—è –≤—ã–≤–æ–¥–∏—Ç—å —Å–∏–º–º–µ—Ç—Ä–∏—á–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç, –¥–ª—è —ç—Ç–æ–≥–æ –µ—Å—Ç—å –µ—â—ë –±–æ–ª–µ–µ —Å–æ–∫—Ä–∞—â—ë–Ω–Ω–∞—è –∑–∞–ø–∏—Å—å. –í—ã–≤–µ–¥–µ–º –ø–æ –¥–≤–µ —Å—Ç—Ä–æ–∫–∏ –∫–∞–∫ —Å–≤–µ—Ä—Ö—É —Ç–∞–∫ –∏ —Å–Ω–∏–∑—É –æ—Ç –≤—Ö–æ–∂–¥–µ–Ω–∏—è:&lt;/p&gt;
&lt;pre style="border:1px solid #ddd;"&gt;
--color=always -C2 'James'
&lt;/pre&gt;

&lt;div style="display: flex;"&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
George Washington, 1789-1797
John Adams, 1797-1801
Thomas Jefferson, 1801-1809
James Madison, 1809-1817
James Monroe, 1817-1825
John Quincy Adams, 1825-1829
Andrew Jackson, 1829-1837
Martin Van Buren, 1837-1841
&lt;/pre&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
John Adams, 1797-1801
Thomas Jefferson, 1801-1809
James Madison, 1809-1817
James Monroe, 1817-1825
John Quincy Adams, 1825-1829
Andrew Jackson, 1829-1837
&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;&lt;a href="http://grep.js.org/index.html?gist=b6d190d171ad140c7d02c2ff26815845"&gt;GIST&lt;/a&gt; | –ö–æ–≥–¥–∞ –í—ã –∏—â–µ—Ç–µ &lt;code&gt;qwe&lt;/code&gt;, —Ç–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ¬´grep¬ª –±—É–¥–µ—Ç –≤—ã–≤–æ–¥–∏—Ç—å —Ç–∞–∫–∂–µ, &lt;code&gt;qwe123&lt;/code&gt;, &lt;code&gt;345qwerty&lt;/code&gt; –∏ —Ç–æ–º—É –ø–æ–¥–æ–±–Ω—ã–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏. –ù–∞–π–¥—ë–º —Ç–æ–ª—å–∫–æ —Ç–µ —Å—Ç—Ä–æ–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã–∫–ª—é—á–∞—é—Ç –∏–º–µ–Ω–Ω–æ –≤—Å—ë —Å–ª–æ–≤–æ —Ü–µ–ª–∏–∫–æ–º:&lt;/p&gt;
&lt;pre style="border:1px solid #ddd;"&gt;
--word-regexp --color=always 'John'
&lt;/pre&gt;

&lt;div style="display: flex;"&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
John Fitzgerald Kennedy, 1961-1963
Lyndon Baines Johnson, 1963-1969
&lt;/pre&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
John Fitzgerald Kennedy, 1961-1963
&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;&lt;a href="http://grep.js.org/index.html?gist=5158adc77782fde28dc4c2c9dd708bcd"&gt;GIST&lt;/a&gt; | –ù—É –∏ –Ω–∞–ø–æ—Å–ª–µ–¥–æ–∫ –µ—Å–ª–∏ –í—ã –ø—Ä–æ—Å—Ç–æ —Ö–æ—Ç–∏—Ç–µ –∑–Ω–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫ —Å —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è–º–∏ –æ–¥–Ω–∏–º –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–º —á–∏—Å–ª–æ–º, –Ω–æ –ø—Ä–∏ —ç—Ç–æ–º –Ω–µ –≤—ã–≤–æ–¥–∏—Ç—å –±–æ–ª—å—à–µ –Ω–∏—á–µ–≥–æ:&lt;/p&gt;
&lt;pre style="border:1px solid #ddd;"&gt;
--count --color=always 'John'
&lt;/pre&gt;

&lt;div style="display: flex;"&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
John Fitzgerald Kennedy, 1961-1963
Lyndon Baines Johnson, 1963-1969
Richard Milhous Nixon, 1969-1974
&lt;/pre&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
2
&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;–°—Ç–æ–∏—Ç –æ—Ç–º–µ—Ç–∏—Ç—å, —á—Ç–æ —É –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –æ–ø—Ü–∏–π –µ—Å—Ç—å –¥–≤–æ–π–Ω–∏–∫, –Ω–∞–ø—Ä–∏–º–µ—Ä &lt;code&gt;--ignore-case&lt;/code&gt; –º–æ–∂–Ω–æ –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –±–æ–ª–µ–µ –∫–æ—Ä–æ—Ç–∫–æ–º—É –≤–∏–¥—É &lt;code&gt;-i&lt;/code&gt; –∏ —Ç.–¥.&lt;/p&gt;
&lt;h2&gt;–ë–ê–ó–û–í–´–ï –†–ï–ì–£–õ–Ø–†–ù–´–ï –í–´–†–ê–ñ–ï–ù–ò–Ø&lt;/h2&gt;
&lt;p&gt;–í—Å–µ —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è—Ç –∏–∑ –¥–≤—É—Ö —Ç–∏–ø–æ–≤ —Å–∏–º–≤–æ–ª–æ–≤: —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤, –Ω–∞–∑—ã–≤–∞–µ–º—ã—Ö &lt;em&gt;–ª–∏—Ç–µ—Ä–∞–ª–∞–º–∏&lt;/em&gt;, –∏ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤, –Ω–∞–∑—ã–≤–∞–µ–º—ã—Ö &lt;em&gt;–º–µ—Ç–∞—Å–∏–º–≤–æ–ª–∞–º–∏&lt;/em&gt;. –í –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –ø—Ä–∏–º–µ—Ä–∞—Ö –ø–æ–∏—Å–∫ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–ª—Å—è –ø–æ –ª–∏—Ç–µ—Ä–∞–ª–∞–º (—Ç–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –ø–æ –±—É–∫–≤–∞–º), –Ω–æ –¥–∞–ª—å—à–µ –±—É–¥–µ—Ç –∫—É–¥–∞ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–µ–π. –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –º–∏—Ä —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π !&lt;/p&gt;
&lt;p&gt;–ó–Ω–∞–∫ –∫–∞—Ä–µ—Ç–∫–∏ &lt;code&gt;^&lt;/code&gt; –∏ –¥–æ–ª–ª–∞—Ä–∞ &lt;code&gt;$&lt;/code&gt; –∏–º–µ—é—Ç –≤ —Ä–µ–≥—É–ª—è—Ä–Ω–æ–º –≤—ã—Ä–∞–∂–µ–Ω–∏–∏ –æ—Å–æ–±—ã–π —Å–º—ã—Å–ª. –ò—Ö –Ω–∞–∑—ã–≤–∞—é—Ç ¬´—è–∫–æ—Ä—è–º–∏¬ª (anchor). –Ø–∫–æ—Ä—è ‚Äì —ç—Ç–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ —É–∫–∞–∑—ã–≤–∞—é—Ç –º–µ—Å—Ç–æ–Ω–∞—Ö–æ–∂–¥–µ–Ω–∏–µ –≤ —Å—Ç—Ä–æ–∫–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–≥–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è. –ö–æ–≥–¥–∞ –ø–æ–∏—Å–∫ –¥–æ—Ö–æ–¥–∏—Ç –¥–æ —è–∫–æ—Ä—è, –æ–Ω –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, –µ—Å—Ç—å –ª–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ, –∏ –µ—Å–ª–∏ –µ—Å—Ç—å ‚Äì –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –∏–¥—Ç–∏ –ø–æ —à–∞–±–ª–æ–Ω—É, &lt;strong&gt;–Ω–µ –ø—Ä–∏–±–∞–≤–ª—è—è –Ω–∏—á–µ–≥–æ –∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://grep.js.org/index.html?gist=9132fe6af8e861cec1327b57e2aeac4e"&gt;GIST&lt;/a&gt; | –Ø–∫–æ—Ä—å –∫–∞—Ä–µ—Ç–∫–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —á—Ç–æ–±—ã —É–∫–∞–∑–∞—Ç—å, —á—Ç–æ —Ä–µ–≥—É–ª—è—Ä–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–º–µ–Ω–Ω–æ —Å –Ω–∞—á–∞–ª–∞ —Å—Ç—Ä–æ–∫–∏:&lt;/p&gt;
&lt;pre style="border:1px solid #ddd;"&gt;
--color=always '^J'
&lt;/pre&gt;

&lt;div style="display: flex;"&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
George Washington, 1789-1797
John Adams, 1797-1801
Thomas Jefferson, 1801-1809
&lt;/pre&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
John Adams, 1797-1801
&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;&lt;a href="http://grep.js.org/index.html?gist=d8ed4ca61d89a88f0f8fe429f6e5bd35"&gt;GIST&lt;/a&gt; | –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ —è–∫–æ—Ä—å –¥–æ–ª–ª–∞—Ä —Å—Ç–æ–∏—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –∫–æ–Ω—Ü–µ —à–∞–±–ª–æ–Ω–∞, —á—Ç–æ–±—ã —É–∫–∞–∑–∞—Ç—å, —á—Ç–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∏—Å–∫–æ–º–∞—è —Å—Ç—Ä–æ–∫–∞ —Å–∏–º–≤–æ–ª–æ–≤ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –∫–æ–Ω—Ü–µ —Ç–µ–∫—Å—Ç–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏ –∏ –Ω–∏–∫–∞–∫ –∏–Ω–∞—á–µ:&lt;/p&gt;
&lt;pre style="border:1px solid #ddd;"&gt;
--color=always '9$'
&lt;/pre&gt;

&lt;div style="display: flex;"&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
George Washington, 1789-1797
John Adams, 1797-1801
Thomas Jefferson, 1801-1809
&lt;/pre&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
Thomas Jefferson, 1801-1809
&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;&lt;a href="http://grep.js.org/index.html?gist=e60f8303cd66566ea76f24283c49ae37"&gt;GIST&lt;/a&gt; | –õ—é–±–æ–π —Å–∏–º–≤–æ–ª. –°–∏–º–≤–æ–ª —Ç–æ—á–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏—è—Ö –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –æ–±–æ–∑–Ω–∞—á–∏—Ç—å, —á—Ç–æ –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–º –º–µ—Å—Ç–µ –º–æ–∂–µ—Ç –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –∞–±—Å–æ–ª—é—Ç–Ω–æ –ª—é–±–æ–π —Å–∏–º–≤–æ–ª:&lt;/p&gt;
&lt;pre style="border:1px solid #ddd;"&gt;
--color=always '0.$'
&lt;/pre&gt;

&lt;div style="display: flex;"&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
George Washington, 1789-1797
John Adams, 1797-1801
Thomas Jefferson, 1801-1809
&lt;/pre&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
John Adams, 1797-1801
Thomas Jefferson, 1801-1809
&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;&lt;a href="http://grep.js.org/index.html?gist=ee26eb8964f6337bc55c03a2835faf99"&gt;GIST&lt;/a&gt; | –≠–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ. –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –Ω–∞–π—Ç–∏ –∏–º–µ–Ω–Ω–æ —Å–∏–º–≤–æ–ª —Ç–æ—á–∫–∞, —Ç–æ–≥–¥–∞ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –ø–æ–º–æ—â—å. –ó–Ω–∞–∫ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è (–∫–∞–∫ –ø—Ä–∞–≤–∏–ª–æ —ç—Ç–æ –æ–±—Ä–∞—Ç–Ω—ã–π —Å–ª–µ—à), –ø—Ä–µ–¥—à–µ—Å—Ç–≤—É—é—â–∏–π —Å–∏–º–≤–æ–ª—É –≤—Ä–æ–¥–µ —Ç–æ—á–∫–∏, –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç –º–µ—Ç–∞—Å–∏–º–≤–æ–ª –≤ –ª–∏—Ç–µ—Ä–∞–ª:&lt;/p&gt;
&lt;pre style="border:1px solid #ddd;"&gt;
--color=always '\.'
&lt;/pre&gt;

&lt;div style="display: flex;"&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
George Washington. 1789-1797
John Adams, 1797-1801
Thomas Jefferson, 1801-1809
&lt;/pre&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
George Washington. 1789-1797
&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;&lt;a href="http://grep.js.org/index.html?gist=74f3c2d2e1344b4ccc7641686adafcca"&gt;GIST&lt;/a&gt; | –ö–ª–∞—Å—Å—ã —Å–∏–º–≤–æ–ª–æ–≤. –í —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏—è—Ö –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–∏–∞–ø–∞–∑–æ–Ω—ã –∏ –∫–ª–∞—Å—Å—ã —Å–∏–º–≤–æ–ª–æ–≤. –î–ª—è —ç—Ç–æ–≥–æ –ø—Ä–∏ —Å–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–∏ —à–∞–±–ª–æ–Ω–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∫–≤–∞–¥—Ä–∞—Ç–Ω—ã–µ —Å–∫–æ–±–∫–∏. –ü–æ–º–µ—Å—Ç–∏–≤ –≥—Ä—É–ø–ø—É —Å–∏–º–≤–æ–ª–æ–≤ (–≤–∫–ª—é—á–∞—è —Å–∏–º–≤–æ–ª—ã, –∫–æ—Ç–æ—Ä—ã–µ –≤ –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ –±—ã–ª–∏ –±—ã –∏—Å—Ç–æ–ª–∫–æ–≤–∞–Ω—ã –∫–∞–∫ –º–µ—Ç–∞—Å–∏–º–≤–æ–ª—ã) –≤ –∫–≤–∞–¥—Ä–∞—Ç–Ω—ã–µ —Å–∫–æ–±–∫–∏, –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å, —á—Ç–æ –≤ –¥–∞–Ω–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏ –º–æ–∂–µ—Ç –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –ª—é–±–æ–π –∏–∑ –≤–∑—è—Ç—ã—Ö –≤ —Å–∫–æ–±–∫–∏ —Å–∏–º–≤–æ–ª–æ–≤:&lt;/p&gt;
&lt;pre style="border:1px solid #ddd;"&gt;
--color=always '0[19]'
&lt;/pre&gt;

&lt;div style="display: flex;"&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
George Washington, 1789-1797
John Adams, 1797-1801
Thomas Jefferson, 1801-1809
&lt;/pre&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
John Adams, 1797-1801
Thomas Jefferson, 1801-1809
&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;&lt;a href="http://grep.js.org/index.html?gist=e53854a41514c4ea3b70e862ef2099b4"&gt;GIST&lt;/a&gt; | –î–∏–∞–ø–∞–∑–æ–Ω. –≠—Ç–æ –¥–≤–∞ —Å–∏–º–≤–æ–ª–∞, —Ä–∞–∑–¥–µ–ª–µ–Ω–Ω—ã–µ –¥–µ—Ñ–∏—Å–æ–º, –Ω–∞–ø—Ä–∏–º–µ—Ä, 0-9 (–¥–µ—Å—è—Ç–∏—á–Ω—ã–µ —Ü–∏—Ñ—Ä—ã) –∏–ª–∏ 0-9a-fA-F (—à–µ—Å—Ç–Ω–∞–¥—Ü–∞—Ç–µ—Ä–∏—á–Ω—ã–µ —Ü–∏—Ñ—Ä—ã):&lt;/p&gt;
&lt;pre style="border:1px solid #ddd;"&gt;
--color=always '[0-9]'
&lt;/pre&gt;

&lt;div style="display: flex;"&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
George Washington, ???
John Adams, 1797-1801
Thomas Jefferson, 1801-1809
&lt;/pre&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
John Adams, 1797-1801
Thomas Jefferson, 1801-1809
&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;&lt;a href="http://grep.js.org/index.html?gist=5f82ae62fd2ce1ed7a2ffb64691feb64"&gt;GIST&lt;/a&gt; | –û—Ç—Ä–∏—Ü–∞–Ω–∏–µ. –ï—Å–ª–∏ –ø–µ—Ä–≤—ã–º —Å–∏–º–≤–æ–ª–æ–º –≤—ã—Ä–∞–∂–µ–Ω–∏—è –≤ –∫–≤–∞–¥—Ä–∞—Ç–Ω—ã—Ö —Å–∫–æ–±–∫–∞—Ö —è–≤–ª—è–µ—Ç—Å—è –∫–∞—Ä–µ—Ç–∫–∞, —Ç–æ –æ—Å—Ç–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã –ø—Ä–∏–Ω–∏–º–∞—é—Ç—Å—è –∫–∞–∫ –Ω–∞–±–æ—Ä —Å–∏–º–≤–æ–ª–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ –¥–æ–ª–∂–Ω—ã –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –≤ –∑–∞–¥–∞–Ω–Ω–æ–π –ø–æ–∑–∏—Ü–∏–∏ —Ä–µ–≥—É–ª—è—Ä–Ω–æ–≥–æ –≤—ã—Ä–∞–∂–µ–Ω–∏—è:&lt;/p&gt;
&lt;pre style="border:1px solid #ddd;"&gt;
--color=always '[^7]$'
&lt;/pre&gt;

&lt;div style="display: flex;"&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
George Washington, 1789-1797
John Adams, 1797-1801
Thomas Jefferson, 1801-1809
&lt;/pre&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
John Adams, 1797-1801
Thomas Jefferson, 1801-1809
&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;&lt;a href="http://grep.js.org/index.html?gist=047156aa42a82eb3b10426b58160ea1c"&gt;GIST&lt;/a&gt; | –ö–ª–∞—Å—Å—ã —Å–∏–º–≤–æ–ª–æ–≤ POSIX. –°—É—â–µ—Å—Ç–≤—É–µ—Ç –Ω–µ–∫–∏–π –Ω–∞–±–æ—Ä —É–∂–µ –∑–∞—Ä–∞–Ω–µ–µ –∑–∞–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤ —Å–∏–º–≤–æ–ª–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –í—ã –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏—è—Ö. –ò—Ö —Ç–∞–º —Å –¥–µ—Å—è—Ç–æ–∫, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±—ã—Å—Ç—Ä–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –º–∞–Ω—É–∞–ª —á—Ç–æ–±—ã –ø–æ–Ω—è—Ç—å –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ. –ù–∞–ø—Ä–∏–º–µ—Ä –æ—Ç—Ñ–∏–ª—å—Ç—Ä—É–µ–º —Ç–æ–ª—å–∫–æ —à–µ—Å—Ç–Ω–∞–¥—Ü–∞—Ç–µ—Ä–∏—á–Ω—ã–µ —Ü–∏—Ñ—Ä—ã:&lt;/p&gt;
&lt;pre style="border:1px solid #ddd;"&gt;
--color=always '^[[:xdigit:]]*$'
&lt;/pre&gt;

&lt;div style="display: flex;"&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
4.2
42
42abc
&lt;/pre&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
42
42abc
&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;&lt;a href="http://grep.js.org/index.html?gist=746098bb08ea4d10b960e0556a975d1d"&gt;GIST&lt;/a&gt; | –ü–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ (0 –∏–ª–∏ –±–æ–ª—å—à–µ —Ä–∞–∑). –û–¥–Ω–∏–º –∏–∑ –Ω–∞–∏–±–æ–ª–µ–µ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –º–µ—Ç–∞—Å–∏–º–≤–æ–ª–æ–≤ —è–≤–ª—è–µ—Ç—Å—è —Å–∏–º–≤–æ–ª –∑–≤—ë–∑–¥–æ—á–∫–∞, —á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç ¬´–ø–æ–≤—Ç–æ—Ä–∏—Ç—å –ø—Ä–µ–¥—ã–¥—É—â–∏–π —Å–∏–º–≤–æ–ª –∏–ª–∏ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –Ω–æ–ª—å –∏–ª–∏ –±–æ–ª—å—à–µ —Ä–∞–∑¬ª:&lt;/p&gt;
&lt;pre style="border:1px solid #ddd;"&gt;
--color=always '^[A-Za-z ,?]*$'
&lt;/pre&gt;

&lt;div style="display: flex;"&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
George Washington, ???
John Adams, 1797-1801
Thomas Jefferson, 1801-1809
&lt;/pre&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
George Washington, ???
&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;–†–∞–∑–ª–∏—á–∞—é—Ç –±–∞–∑–æ–≤—ã–µ —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è BRE (basic regular expressions) –∏ —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ ERE (extended regular expressions). –í BRE —Ä–∞—Å–ø–æ–∑–Ω–∞—é—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–µ –º–µ—Ç–∞—Å–∏–º–≤–æ–ª—ã &lt;code&gt;^ $ . [ ] *&lt;/code&gt; –∏ –≤—Å–µ –¥—Ä—É–≥–∏–µ —Å–∏–º–≤–æ–ª—ã —Ä–∞—Å—Ü–µ–Ω–∏–≤–∞—é—Ç—Å—è –∫–∞–∫ –ª–∏—Ç–µ—Ä–∞–ª—ã. –í ERE –¥–æ–±–∞–≤–ª–µ–Ω—ã –µ—â—ë —Ç–∞–∫–∏–µ –º–µ—Ç–∞—Å–∏–º–≤–æ–ª—ã &lt;code&gt;( ) { } ? + |&lt;/code&gt; –∏ —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –Ω–∏–º–∏ —Ñ—É–Ω–∫—Ü–∏–∏. –ù—É –∞ —á—Ç–æ–±—ã –≤—Å–µ—Ö –æ–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω–æ –∑–∞–ø—É—Ç–∞—Ç—å –≤ ¬´grep¬ª –ø—Ä–∏–¥—É–º–∞–ª–∏ —Ç–∞–∫—É—é —à—Ç—É–∫—É ‚Äì —Å–∏–º–≤–æ–ª—ã &lt;code&gt;( ) { }&lt;/code&gt; –≤ BRE –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –∫–∞–∫ –º–µ—Ç–∞—Å–∏–º–≤–æ–ª—ã, –µ—Å–ª–∏ –æ–Ω–∏ —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω—ã –æ–±—Ä–∞—Ç–Ω—ã–º —Å–ª–µ—à–µ–º, –≤ —Ç–æ –≤—Ä–µ–º—è –∫–∞–∫ –≤ ERE –ø–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–µ—Ä–µ–¥ –ª—é–±—ã–º–∏ –º–µ—Ç–∞—Å–∏–º–≤–æ–ª–∞–º–∏ –æ–±—Ä–∞—Ç–Ω–æ–≥–æ —Å–ª–µ—à–∞ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ —Ç–æ–º—É, —á—Ç–æ –æ–Ω–∏ —Ç—Ä–∞–∫—Ç—É—é—Ç—Å—è –∫–∞–∫ –ª–∏—Ç–µ—Ä–∞–ª—ã.&lt;/p&gt;
&lt;h2&gt;–†–ê–°–®–ò–†–ï–ù–ù–´–ï –†–ï–ì–£–õ–Ø–†–ù–´–ï –í–´–†–ê–ñ–ï–ù–ò–Ø&lt;/h2&gt;
&lt;p&gt;&lt;a href="http://grep.js.org/index.html?gist=ef2f47f7ad7a8581cd755ca4f316ebeb"&gt;GIST&lt;/a&gt; | –î–∏–∑—ä—é–Ω–∫—Ü–∏—è. –ü–æ–¥–æ–±–Ω–æ —Ç–æ–º—É, –∫–∞–∫ –∫–≤–∞–¥—Ä–∞—Ç–Ω—ã–µ —Å–∫–æ–±–∫–∏ –∑–∞–¥–∞—é—Ç —Ä–∞–∑–ª–∏—á–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è –æ–¥–Ω–æ–≥–æ —Å–∏–º–≤–æ–ª–∞, –¥–∏–∑—ä—é–Ω–∫—Ü–∏—è –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–∫–∞–∑–∞—Ç—å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è –¥–ª—è —Å—Ç—Ä–æ–∫ —Å–∏–º–≤–æ–ª–æ–≤ –∏–ª–∏ –≤—ã—Ä–∞–∂–µ–Ω–∏–π. –î–ª—è –æ–±–æ–∑–Ω–∞—á–µ–Ω–∏—è –¥–∏–∑—ä—é–Ω–∫—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–∏–º–≤–æ–ª –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–π —á–µ—Ä—Ç—ã:&lt;/p&gt;
&lt;pre style="border:1px solid #ddd;"&gt;
--extended-regexp --color=always 'George|John'
&lt;/pre&gt;

&lt;div style="display: flex;"&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
George Washington, 1789-1797
John Adams, 1797-1801
Thomas Jefferson, 1801-1809
&lt;/pre&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
George Washington, 1789-1797
John Adams, 1797-1801
&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;&lt;a href="http://grep.js.org/index.html?gist=5f85410b230e1d7092215cac7ea452c6"&gt;GIST&lt;/a&gt; | –°–æ–≤–ø–∞–¥–µ–Ω–∏–µ –Ω–æ–ª—å –∏–ª–∏ –æ–¥–∏–Ω —Ä–∞–∑. –í —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã—Ö —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏—è—Ö —Å—É—â–µ—Å—Ç–≤—É—é—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –º–µ—Ç–∞—Å–∏–º–≤–æ–ª–æ–≤, —É–∫–∞–∑—ã–≤–∞—é—â–∏—Ö —á–∞—Å—Ç–æ—Ç—É –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è —Å–∏–º–≤–æ–ª–∞ –∏–ª–∏ –≤—ã—Ä–∞–∂–µ–Ω–∏—è (–ø–æ–¥–æ–±–Ω–æ —Ç–æ–º—É, –∫–∞–∫ –º–µ—Ç–∞—Å–∏–º–≤–æ–ª –∑–≤–µ–∑–¥–æ—á–∫–∞ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è 0 –∏–ª–∏ –±–æ–ª–µ–µ —Ä–∞–∑). –û–¥–∏–Ω –∏–∑ —Ç–∞–∫–∏—Ö –º–µ—Ç–∞—Å–∏–º–≤–æ–ª–æ–≤ —ç—Ç–æ –≤–æ–ø—Ä–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π –∑–Ω–∞–∫, –∫–æ—Ç–æ—Ä—ã–π –¥–µ–ª–∞–µ—Ç –ø—Ä–µ–¥—ã–¥—É—â–∏–π —Å–∏–º–≤–æ–ª –∏–ª–∏ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ, –ø–æ —Å—É—Ç–∏, –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º–∏:&lt;/p&gt;
&lt;pre style="border:1px solid #ddd;"&gt;
--extended-regexp --color=always '^(Andrew )?John'
&lt;/pre&gt;

&lt;div style="display: flex;"&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
John Adams, 1797-1801
Andrew Johnson, 1865-1869
Lyndon Baines Johnson, 1963-1969
&lt;/pre&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
John Adams, 1797-1801
Andrew Johnson, 1865-1869
&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;&lt;a href="http://grep.js.org/index.html?gist=4274af34f6ce8090ddab665886d1bfe6"&gt;GIST&lt;/a&gt; | –°–æ–≤–ø–∞–¥–µ–Ω–∏–µ –æ–¥–∏–Ω –∏–ª–∏ –±–æ–ª–µ–µ —Ä–∞–∑. –î–ª—è —ç—Ç–æ–≥–æ –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω –º–µ—Ç–∞—Å–∏–º–≤–æ–ª –≤ –≤–∏–¥–µ –∑–Ω–∞–∫–∞ –ø–ª—é—Å. –û–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ—á—Ç–∏ –∫–∞–∫ —Å–∏–º–≤–æ–ª –∑–≤–µ–∑–¥–æ—á–∫–∞, –∑–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º —Ç–æ–≥–æ, —á—Ç–æ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ —Å–æ–≤–ø–∞—Å—Ç—å —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω —Ä–∞–∑:&lt;/p&gt;
&lt;pre style="border:1px solid #ddd;"&gt;
--extended-regexp --color=always '^[[:alpha:] ]+$'
&lt;/pre&gt;

&lt;div style="display: flex;"&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
John Adams
Andrew Johnson, 1865-1869
Lyndon Baines Johnson, 1963-1969
&lt;/pre&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
John Adams
&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;&lt;a href="http://grep.js.org/index.html?gist=882fe7c7fab0a2186c9c7cfc7965a4cd"&gt;GIST&lt;/a&gt; | –°–æ–≤–ø–∞–¥–µ–Ω–∏–µ —É–∫–∞–∑–∞–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞–∑. –î–ª—è —ç—Ç–æ–≥–æ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ–∏–≥—É—Ä–Ω—ã–µ —Å–∫–æ–±–∫–∏. –≠—Ç–∏ –º–µ—Ç–∞—Å–∏–º–≤–æ–ª—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è —É–∫–∞–∑–∞–Ω–∏—è —Ç–æ—á–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞, –¥–∏–∞–ø–∞–∑–æ–Ω–∞, –∞ —Ç–∞–∫–∂–µ –≤–µ—Ä—Ö–Ω–µ–≥–æ –∏ –Ω–∏–∂–Ω–µ–≥–æ –ø—Ä–µ–¥–µ–ª–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–π –≤—ã—Ä–∞–∂–µ–Ω–∏—è:&lt;/p&gt;
&lt;pre style="border:1px solid #ddd;"&gt;
--extended-regexp --color=always
    '[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}'
&lt;/pre&gt;

&lt;div style="display: flex;"&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
42
127.0.0.1
&lt;/pre&gt;

&lt;pre style="flex: 1; border:1px solid #ddd; margin-bottom: 0;"&gt;
127.0.0.1
&lt;/pre&gt;

&lt;/div&gt;

&lt;p&gt;–ö–æ–º–∞–Ω–¥–∞ grep –Ω–∞—Å—Ç–æ–ª—å–∫–æ –ø–æ–ª–µ–∑–Ω–∞, –º–Ω–æ–≥–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞ –∏ –ø—Ä–æ—Å—Ç–∞ –≤ —É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–∏, —á—Ç–æ, –æ–¥–Ω–∞–∂–¥—ã –ø–æ–∑–Ω–∞–∫–æ–º–∏–≤—à–∏—Å—å —Å –Ω–µ–π, –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å —Å–µ–±–µ —Ä–∞–±–æ—Ç—É –±–µ–∑ –Ω–µ–µ.&lt;/p&gt;</content><category term="regex"></category></entry><entry><title>–ü—Ä–æ—Ç–æ–∫–æ–ª—ã ¬´–ò–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –≤–µ—â–µ–π¬ª - MQTT</title><link href="http://proiot.ru/blog/posts/2017/10/20/protokoly-interneta-veshchei-mqtt/" rel="alternate"></link><published>2017-10-20T00:00:00+03:00</published><updated>2017-10-20T00:00:00+03:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2017-10-20:/blog/posts/2017/10/20/protokoly-interneta-veshchei-mqtt/</id><summary type="html">&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2017/10/03/setevoe-programmirovanie-udp-ntp-chasy/"&gt;–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º&lt;/a&gt; –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å —Å–µ—Ç–µ–≤—ã–µ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã.&lt;/p&gt;
&lt;p&gt;MQTT (Message Queue Telemetry Transport) ‚Äì –ø—Ä–æ—Ç–æ–∫–æ–ª –ø—Ä–∏–∫–ª–∞–¥–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –º–µ–∂–º–∞—à–∏–Ω–Ω–æ–π –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ (M2M, Machine to Machine), –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø—É ¬´–∏–∑–¥–∞—Ç–µ–ª—å-–ø–æ–¥–ø–∏—Å—á–∏–∫¬ª. –î–≤–∞ –≥–ª–∞–≤–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ MQTT ‚Äì –∫–ª–∏–µ–Ω—Ç –∏ –±—Ä–æ–∫–µ—Ä. MQTT-–∫–ª–∏–µ–Ω—Ç—ã –ø—É–±–ª–∏–∫—É—é—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—É—é —Ç–µ–º—É (topic), –∏–ª–∏ –ø–æ–¥–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –∏ –ø—Ä–æ—Å–ª—É—à–∏–≤–∞—é—Ç –∏—Ö. –¢–µ–º–∞ ‚Äì —ç—Ç–æ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2017/10/03/setevoe-programmirovanie-udp-ntp-chasy/"&gt;–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º&lt;/a&gt; –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å —Å–µ—Ç–µ–≤—ã–µ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã.&lt;/p&gt;
&lt;p&gt;MQTT (Message Queue Telemetry Transport) ‚Äì –ø—Ä–æ—Ç–æ–∫–æ–ª –ø—Ä–∏–∫–ª–∞–¥–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –º–µ–∂–º–∞—à–∏–Ω–Ω–æ–π –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ (M2M, Machine to Machine), –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø—É ¬´–∏–∑–¥–∞—Ç–µ–ª—å-–ø–æ–¥–ø–∏—Å—á–∏–∫¬ª. –î–≤–∞ –≥–ª–∞–≤–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ MQTT ‚Äì –∫–ª–∏–µ–Ω—Ç –∏ –±—Ä–æ–∫–µ—Ä. MQTT-–∫–ª–∏–µ–Ω—Ç—ã –ø—É–±–ª–∏–∫—É—é—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—É—é —Ç–µ–º—É (topic), –∏–ª–∏ –ø–æ–¥–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –∏ –ø—Ä–æ—Å–ª—É—à–∏–≤–∞—é—Ç –∏—Ö. –¢–µ–º–∞ ‚Äì —ç—Ç–æ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–∞—è —Å—Ç—Ä–æ–∫–∞, –≤ –∫–æ—Ç–æ—Ä—É—é –≤—Ö–æ–¥—è—Ç –ª—é–±—ã–µ —Å–∏–º–≤–æ–ª—ã –∑–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤ ¬´/¬ª, ¬´+¬ª –∏ ¬´#¬ª, —Å—É—Ç—å –∫–æ—Ç–æ—Ä—ã—Ö –±—É–¥–µ—Ç —Ä–∞—Å–∫—Ä—ã—Ç–∞ –Ω–∏–∂–µ. MQTT-–±—Ä–æ–∫–µ—Ä –ø–æ–ª—É—á–∞–µ—Ç –≤—Å–µ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã–µ –∏–∑–¥–∞—Ç–µ–ª—è–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å—á–∏–∫–∞–º. –ü–æ–¥–ø–∏—Å—á–∏–∫–∏ –∏ –∏–∑–¥–∞—Ç–µ–ª–∏ –Ω–µ –¥–æ–ª–∂–Ω—ã –∑–Ω–∞—Ç—å –¥—Ä—É–≥ –æ –¥—Ä—É–≥–µ, —Ä–æ–ª—å –∏–≥—Ä–∞—é—Ç –ª–∏—à—å —Ç–µ–º—ã —Å–æ–æ–±—â–µ–Ω–∏–π –∏ —Å–∞–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è. –î–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –∏–∑–¥–∞—Ç–µ–ª–∏ –∏ –ø–æ–¥–ø–∏—Å—á–∏–∫–∏ –¥–æ–ª–∂–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±—â–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è —Ç–µ–º –∏ —Ñ–æ—Ä–º–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏–π.&lt;/p&gt;
&lt;p&gt;MQTT —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–≤–µ—Ä—Ö &lt;a href="http://proiot.ru/blog/posts/2017/10/09/setevoe-programmirovanie-tcp-http-server/"&gt;–¢–°–†&lt;/a&gt; –∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω –≤ —Ä–∞—Å—á—ë—Ç–µ –Ω–∞ –º–∞–ª–æ–º–æ—â–Ω—ã–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞, –ø–æ—ç—Ç–æ–º—É –≤—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –¥–ª—è –µ–≥–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã. –í –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∫ –æ—á–µ–Ω—å –Ω–∏–∑–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ –Ω–∞ —Å–∏—Å—Ç–µ–º—É, MQTT –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –≤—ã—Å–æ–∫–æ–π —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å—é –∏ –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å—é —Å–≤—è–∑–∏ –¥–∞–∂–µ –≤ —Å–µ—Ç—è—Ö —Å –Ω–∏–∑–∫–æ–π –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å—é.&lt;/p&gt;
&lt;h2&gt;–î–ï–ú–û&lt;/h2&gt;
&lt;p&gt;–ù–∞ –∫–∞—Ä—Ç–∏–Ω–∫–µ —Å–≤–µ—Ç–∏–ª—å–Ω–∏–∫ (MQTT-–∫–ª–∏–µ–Ω—Ç), –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –∏–∑ —Å–µ–±—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –Ω–∞ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–µ c –û–° &lt;a href="http://proiot.ru/blog/posts/2017/10/03/setevoe-programmirovanie-udp-ntp-chasy/"&gt;Contiki&lt;/a&gt; –Ω–∞ –±–æ—Ä—Ç—É. –í –∫–∞—á–µ—Å—Ç–≤–µ –±—Ä–æ–∫–µ—Ä–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Mosquitto ‚Äì —ç—Ç–æ –ø–æ–ø—É–ª—è—Ä–Ω—ã–π –∏ –ø—Ä–æ—Å—Ç–æ–π –≤ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –±—Ä–æ–∫–µ—Ä, –∞–∫—Ç–∏–≤–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏–π—Å—è —Å–æ–æ–±—â–µ—Å—Ç–≤–æ–º. –°–≤–µ—Ç–∏–ª—å–Ω–∏–∫ –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ —Ç–µ–º—É &lt;code&gt;proiot3/cmd/leds&lt;/code&gt;. –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –±—Ä–æ–∫–µ—Ä—É Mosquitto –º–æ–∂–Ω–æ –∏–∑ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏,  –Ω–∞–ø—Ä–∏–º–µ—Ä —Å–ª–µ–¥—É—é—â–∞—è –∫–æ–º–∞–Ω–¥–∞ –≤–∫–ª—é—á–∞–µ—Ç –∫—Ä–∞—Å–Ω—ã–π —Å–≤–µ—Ç:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ mosquitto_pub -h localhost -t &amp;#39;proiot3/cmd/leds&amp;#39; -m 100
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–°–≤–µ—Ç–∏–ª—å–Ω–∏–∫ –≤ —Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å —Ç–∞–∫–∂–µ –ø—É–±–ª–∏–∫—É–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ, –Ω–æ —É–∂–µ –≤ –¥—Ä—É–≥–æ–π —Ç–æ–ø–∏–∫ &lt;code&gt;proiot3/evt/status&lt;/code&gt; –µ—Å–ª–∏ –Ω–∞–∂–∞—Ç–∞ –∫–Ω–æ–ø–∫–∞. –í –¥–∞–Ω–Ω–æ–º —Ç–æ–ø–∏–∫–µ –¥–∞–Ω–Ω—ã–µ –ø—É–±–ª–∏–∫—É—é—Ç—Å—è –≤ JSON —Ñ–æ—Ä–º–∞—Ç–µ. –ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ —Ç–æ–ø–∏–∫ –∏–∑ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ –º–æ–∂–Ω–æ —Ç–∞–∫:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ mosquitto_sub -h localhost -t &amp;#39;proiot3/evt/status&amp;#39;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–º—É —Å–µ—Ç–µ–≤–æ–º—É –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É —Å–∏–º—É–ª—è—Ç–æ—Ä–∞ –Ω—É–∂–Ω–æ &lt;a href="http://proiot.ru/blog/posts/2017/10/09/setevoe-programmirovanie-tcp-http-server/"&gt;–Ω–∞–∑–Ω–∞—á–∏—Ç—å&lt;/a&gt; –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∞–¥—Ä–µ—Å &lt;code&gt;abcd::1&lt;/code&gt;, –≤ –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ —Å–≤–µ—Ç–∏–ª—å–Ω–∏–∫ –∏ –±—Ä–æ–∫–µ—Ä –¥—Ä—É–≥ –¥—Ä—É–≥–∞ –Ω–µ —É–≤–∏–¥—è—Ç.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://localhost:9148/fa001d88f857807c4cbef17abf25a544"&gt;mqtt.ipv6&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2017/10/20/protokoly-interneta-veshchei-mqtt/conticki-mqtt.zip"&gt;–∏—Å—Ö–æ–¥–Ω–∏–∫–∏&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2017/10/20/protokoly-interneta-veshchei-mqtt/ui.gif" style="width:100%;"&gt;&lt;/p&gt;
&lt;h2&gt;–¢–û–ü–ò–ö–ò&lt;/h2&gt;
&lt;p&gt;–¢–æ–ø–∏–∫–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç —Å–æ–±–æ–π —Å–∏–º–≤–æ–ª—ã —Å –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π UTF8. –î–ª–∏–Ω–∞ —Ç–µ–º—ã –Ω–µ –º–æ–∂–µ—Ç –ø—Ä–µ–≤—ã—à–∞—Ç—å 32767 —Å–∏–º–≤–æ–ª–æ–≤. –ò–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–æ–ø–∏–∫–æ–≤ –∏–º–µ–µ—Ç —Ñ–æ—Ä–º–∞—Ç ¬´–¥–µ—Ä–µ–≤–∞¬ª, —á—Ç–æ —É–ø—Ä–æ—â–∞–µ—Ç –∏—Ö –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é –∏ –¥–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º. –¢–æ–ø–∏–∫–∏ —Å–æ—Å—Ç–æ—è—Ç –∏–∑ –æ–¥–Ω–æ–≥–æ –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —É—Ä–æ–≤–Ω–µ–π, –∫–æ—Ç–æ—Ä—ã–µ —Ä–∞–∑–¥–µ–ª–µ–Ω—ã –º–µ–∂–¥—É —Å–æ–±–æ–π —Å–∏–º–≤–æ–ª–æ–º ¬´/¬ª.&lt;/p&gt;
&lt;p&gt;–ü–æ–¥–ø–∏—Å—á–∏–∫ –º–æ–∂–µ—Ç —Ç–∞–∫–∂–µ –ø–æ–ª—É—á–∞—Ç—å –¥–∞–Ω–Ω—ã–µ —Å—Ä–∞–∑—É —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ç–æ–ø–∏–∫–æ–≤, –¥–ª—è —ç—Ç–æ–≥–æ —Å—É—â–µ—Å—Ç–≤—É—é—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã. –û–Ω–∏ –±—ã–≤–∞—é—Ç –¥–≤—É—Ö —Ç–∏–ø–æ–≤: –æ–¥–Ω–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ –∏ –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ. –î–ª—è –±–æ–ª–µ–µ –ø—Ä–æ—Å—Ç–æ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –≤ –ø—Ä–∏–º–µ—Ä–∞—Ö –∫–∞–∂–¥—ã–π –∏–∑ –Ω–∏—Ö:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;–û–¥–Ω–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π ¬´+¬ª. –ö –ø—Ä–∏–º–µ—Ä—É, –Ω–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã –≤–æ –≤—Å–µ—Ö –∫–æ–º–Ω–∞—Ç–∞—Ö ‚Äì –¥–ª—è —ç—Ç–æ–≥–æ –Ω—É–∂–Ω–æ –ø–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ —Ç–æ–ø–∏–∫ –≤–∏–¥–∞ &lt;code&gt;home/+/temperature&lt;/code&gt;. –í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –ø–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ —Å —Ç–æ–ø–∏–∫–æ–≤ &lt;code&gt;home/living-room1/temperature&lt;/code&gt;, &lt;code&gt;home/living-room2/temperature&lt;/code&gt; –∏ —Ç.–¥.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;–ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π ¬´#¬ª. –ö –ø—Ä–∏–º–µ—Ä—É, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ —Å —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –¥–∞—Ç—á–∏–∫–æ–≤ –≤ –¥–æ–º–µ, –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ–º—Å—è –Ω–∞ —Ç–æ–ø–∏–∫ –≤–∏–¥–∞ &lt;code&gt;home/#&lt;/code&gt;. –í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –ø–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ —Å —Ç–æ–ø–∏–∫–æ–≤ &lt;code&gt;home/living-room1/temperature&lt;/code&gt;, &lt;code&gt;home/living-room2/button&lt;/code&gt; –∏ —Ç.–ø.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2017/10/20/protokoly-interneta-veshchei-mqtt/mqtt.svg" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;h2&gt;–ö–ê–ß–ï–°–¢–í–û –û–ë–°–õ–£–ñ–ò–í–ê–ù–ò–Ø&lt;/h2&gt;
&lt;p&gt;MQTT –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É –≥–∏–±–∫–æ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å –æ–±–º–µ–Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏, –¥–ª—è —ç—Ç–æ–≥–æ –≤ –ø—Ä–æ—Ç–æ–∫–æ–ª–µ –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω–æ —Ç—Ä–∏ —É—Ä–æ–≤–Ω—è –∫–∞—á–µ—Å—Ç–≤–∞ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è QoS (Quality of Service):&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;QoS 0. –ú–∞–∫—Å–∏–º—É–º –æ–¥–Ω–æ–∫—Ä–∞—Ç–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π. –ü—Ä–∏—ë–º–Ω–∏–∫ —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –∏—Ö –ø–æ–ª—É—á–µ–Ω–∏–µ, –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ, –ø–µ—Ä–µ–¥–∞—ë—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –ª–∏—à—å —Ä–∞–∑, –Ω–µ –ø—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞—è –ø–æ–ø—ã—Ç–æ–∫ –ø–æ –∏—Ö –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –ø–µ—Ä–µ–¥–∞—á–µ. –≠—Ç–æ ‚Äì –º–µ—Ç–æ–¥ ¬´–æ—Ç–ø—Ä–∞–≤–∏–ª –∏ –∑–∞–±—ã–ª¬ª&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;QoS 1. –ú–∏–Ω–∏–º—É–º –æ–¥–Ω–æ–∫—Ä–∞—Ç–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π. –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç—Å—è, —á—Ç–æ –ø—Ä–∏—ë–º–Ω–∏–∫ –ø–æ–ª—É—á–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω —Ä–∞–∑. –ü—Ä–∏ —ç—Ç–æ–º –ø–æ–¥–ø–∏—Å—á–∏–∫ –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –æ–¥–Ω–æ –∏ —Ç–æ –∂–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑. –û—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å –±—É–¥–µ—Ç –ø—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –Ω–µ –ø–æ–ª—É—á–∏—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –≤ —É—Å–ø–µ—à–Ω–æ–π –¥–æ—Å—Ç–∞–≤–∫–µ —Å–æ–æ–±—â–µ–Ω–∏—è&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;QoS 2. –û–¥–Ω–æ–∫—Ä–∞—Ç–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π. –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç—Å—è, —á—Ç–æ –ø—Ä–∏—ë–º–Ω–∏–∫ –ø–æ–ª—É—á–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–¥–∏–Ω –∏ —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑. –°–∞–º–∞—è –º–µ–¥–ª–µ–Ω–Ω–∞—è –ø—Ä–æ—Ü–µ–¥—É—Ä–∞ –¥–æ—Å—Ç–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π, –Ω–æ –ø—Ä–∏ —ç—Ç–æ–º –∏ —Å–∞–º–∞—è –Ω–∞–¥—ë–∂–Ω–∞—è. –î–ª—è –¥–æ—Å—Ç–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–µ—Ö–∞–Ω–∏–∑–º —á–µ—Ç—ã—Ä–µ—Ö—ç—Ç–∞–ø–Ω–æ–≥–æ —Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏—è&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;–ù–æ –µ—Å—Ç—å –æ–¥–∏–Ω –Ω–µ–æ—á–µ–≤–∏–¥–Ω—ã–π –Ω—é–∞–Ω—Å. –î–µ–ª–æ –≤ —Ç–æ–º, —á—Ç–æ —É—Ä–æ–≤–µ–Ω—å QoS –ø—Ä–æ–ø–∏—Å–∞–Ω –∫–∞–∫ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∏–∑–¥–∞—Ç–µ–ª—è —Ç–∞–∫ –∏ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –ø–æ–¥–ø–∏—Å—á–∏–∫–∞ –∏ –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –º–æ–∂–µ—Ç –Ω–µ —Å–æ–≤–ø–∞–¥–∞—Ç—å. –í —Ç–∞–∫–æ–º —Å–ª—É—á–∞–µ –æ—á–µ–≤–∏–¥–Ω–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ–Ω–∏–∂–µ–Ω–∏–µ ¬´–æ–±—â–µ–≥–æ¬ª QoS –¥–æ –Ω–∞–∏–º–µ–Ω—å—à–µ–≥–æ —É—Ä–æ–≤–Ω—è –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –ø–∞—Ä–µ –∏–∑–¥–∞—Ç–µ–ª—å –ø–æ–¥–ø–∏—Å—á–∏–∫. –í–æ—Ç —Ç–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç MQTT –≤ Wireshark:&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2017/10/20/protokoly-interneta-veshchei-mqtt/sub.png" style="width:100%;"&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2017/10/20/protokoly-interneta-veshchei-mqtt/pub.png" style="width:100%;"&gt;&lt;/p&gt;
&lt;p&gt;–ë—Ä–æ–∫–µ—Ä —è–≤–ª—è–µ—Ç—Å—è –Ω–∞–∏–±–æ–ª–µ–µ –∫—Ä–∏—Ç–∏—á–Ω—ã–º —ç–ª–µ–º–µ–Ω—Ç–æ–º —Å–∏—Å—Ç–µ–º—ã ¬´–∏–∑–¥–∞—Ç–µ–ª—å-–ø–æ–¥–ø–∏—Å—á–∏–∫¬ª, –æ—Ç –µ–≥–æ –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏ –∏ —Å–∫–æ—Ä–æ—Å—Ç–∏ –º–Ω–æ–≥–æ–µ –∑–∞–≤–∏—Å–∏—Ç. –ë—Ä–æ–∫–µ—Ä –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –ø—Ä–∏–µ–º –≤—Å–µ—Ö —Å–æ–æ–±—â–µ–Ω–∏–π, –∏—Ö —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é, –ø—Ä–∏–Ω—è—Ç–∏–µ —Ä–µ—à–µ–Ω–∏—è –æ —Ç–æ–º, –∫–æ–º—É –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã —ç—Ç–∏ —Å–æ–æ–±—â–µ–Ω–∏—è, –∏, –≤ –∫–æ–Ω–µ—á–Ω–æ–º –∏—Ç–æ–≥–µ, –∑–∞ –ø–µ—Ä–µ—Å—ã–ª–∫—É —Å–æ–æ–±—â–µ–Ω–∏–π –≤—Å–µ–º –∫–ª–∏–µ–Ω—Ç–∞–º-–ø–æ–¥–ø–∏—Å—á–∏–∫–∞–º. –°—Ä–µ–¥–∏ —Å–µ—Ä–≤–µ—Ä–Ω—ã—Ö —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–π –±—Ä–æ–∫–µ—Ä–∞ –ø–æ–º–∏–º–æ —É–∂–µ —É–ø–æ–º—è–Ω—É—Ç–æ–≥–æ –æ—Ç–∫—Ä—ã—Ç–æ–≥–æ –ü–û Mosquitto –º–æ–∂–Ω–æ –≤—ã–¥–µ–ª–∏—Ç—å IBM WebSphere MQ; –ª–µ–≥–∫–æ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—ã–π –∏ –≤—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π –æ—Ç–∫—Ä—ã—Ç—ã–π —Å–µ—Ä–≤–µ—Ä emqttd –Ω–∞ Erlang; –±—Ä–æ–∫–µ—Ä HiveMQ –∏ –¥—Ä.&lt;/p&gt;
&lt;p&gt;–ö–∞–∫ —É–∂–µ —É–ø–æ–º–∏–Ω–∞–ª–æ—Å—å, MQTT —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–≤–µ—Ä—Ö TCP, –≥–¥–µ –∫–∞–∫ –∏–∑–≤–µ—Å—Ç–Ω–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–∞–Ω–Ω—ã—Ö —Ö–æ–¥—è—Ç –±–µ–∑ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è. –î–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç –±–æ—Ä–æ–¥–∞—Ç—ã—Ö —Ö–∞–∫–∫–µ—Ä–æ–≤ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –æ–±–º–µ–Ω–∞ –¥–∞–Ω–Ω—ã–º–∏ –ø–æ MQTT –ø—Ä–æ—Ç–æ–∫–æ–ª—É –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å TLS (Transport Layer Security) –≤–º–µ—Å—Ç–æ TCP. –ü—Ä–æ—Ç–æ–∫–æ–ª TLS —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–≤–µ—Ä—Ö TCP –∏ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Ç—Ä—ë—Ö —É—Å–ª—É–≥ –≤—Å–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º, —Ä–∞–±–æ—Ç–∞—é—â–∏–º –Ω–∞–¥ –Ω–∏–º ‚Äì —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ, –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –∏ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å. TLS –¥–∞—ë—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∫–ª–∏–µ–Ω—Ç-—Å–µ—Ä–≤–µ—Ä–Ω—ã–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º –æ—Å—É—â–µ—Å—Ç–≤–ª—è—Ç—å —Å–≤—è–∑—å –≤ —Å–µ—Ç–∏ —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —á—Ç–æ –Ω–µ–ª—å–∑—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—å –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏–µ –ø–∞–∫–µ—Ç–æ–≤ –∏ –æ—Å—É—â–µ—Å—Ç–≤–∏—Ç—å –Ω–µ—Å–∞–Ω–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø.&lt;/p&gt;</content><category term="contiki"></category><category term="msp430"></category><category term="m2m"></category></entry><entry><title>–ü—Ä–æ—Ç–æ–∫–æ–ª—ã ¬´–ò–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –≤–µ—â–µ–π¬ª - CoAP</title><link href="http://proiot.ru/blog/posts/2017/10/17/protokoly-interneta-veshchei-coap/" rel="alternate"></link><published>2017-10-17T00:00:00+03:00</published><updated>2017-10-17T00:00:00+03:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2017-10-17:/blog/posts/2017/10/17/protokoly-interneta-veshchei-coap/</id><summary type="html">&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2017/10/03/setevoe-programmirovanie-udp-ntp-chasy/"&gt;–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º&lt;/a&gt; —Ä–∞–∑–≤–ª–µ–∫–∞—Ç—å—Å—è —Å —Å–µ—Ç–µ–≤—ã–º–∏ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞–º.&lt;/p&gt;
&lt;p&gt;CoAP (Constrained Application Protocol) ‚Äî –ø—Ä–æ—Ç–æ–∫–æ–ª –ø—Ä–∏–∫–ª–∞–¥–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–π –¥–ª—è —Ç.–Ω. –º–µ–∂–º–∞—à–∏–Ω–Ω–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è (Machine-to-Machine, M2M). –•–æ—Ä–æ—à–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤ —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–º–∏ —Ä–µ—Å—É—Ä—Å–∞–º–∏ —Ç–∞–∫–∏—Ö –∫–∞–∫ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –∏ –¥—Ä. CoAP —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞–ª—Å—è –ø–æ –æ–±—Ä–∞–∑—É –∏ –ø–æ–¥–æ–±–∏—é —Å–≤–æ–µ–≥–æ –ø—Ä–µ–¥—à–µ—Å—Ç–≤–µ–Ω–Ω–∏–∫–∞, –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ &lt;a href="http://proiot.ru/blog/posts/2017/10/09/setevoe-programmirovanie-tcp-http-server/"&gt;HTTP&lt;/a&gt;, –Ω–æ —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ —Ñ–∏—á–∞–º–∏ –∏ —É–ª—É—á—à–µ–Ω–∏—è–º–∏. –í –æ—Ç–ª–∏—á–∏–µ ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2017/10/03/setevoe-programmirovanie-udp-ntp-chasy/"&gt;–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º&lt;/a&gt; —Ä–∞–∑–≤–ª–µ–∫–∞—Ç—å—Å—è —Å —Å–µ—Ç–µ–≤—ã–º–∏ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞–º.&lt;/p&gt;
&lt;p&gt;CoAP (Constrained Application Protocol) ‚Äî –ø—Ä–æ—Ç–æ–∫–æ–ª –ø—Ä–∏–∫–ª–∞–¥–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–π –¥–ª—è —Ç.–Ω. –º–µ–∂–º–∞—à–∏–Ω–Ω–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è (Machine-to-Machine, M2M). –•–æ—Ä–æ—à–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤ —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–º–∏ —Ä–µ—Å—É—Ä—Å–∞–º–∏ —Ç–∞–∫–∏—Ö –∫–∞–∫ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –∏ –¥—Ä. CoAP —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞–ª—Å—è –ø–æ –æ–±—Ä–∞–∑—É –∏ –ø–æ–¥–æ–±–∏—é —Å–≤–æ–µ–≥–æ –ø—Ä–µ–¥—à–µ—Å—Ç–≤–µ–Ω–Ω–∏–∫–∞, –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ &lt;a href="http://proiot.ru/blog/posts/2017/10/09/setevoe-programmirovanie-tcp-http-server/"&gt;HTTP&lt;/a&gt;, –Ω–æ —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ —Ñ–∏—á–∞–º–∏ –∏ —É–ª—É—á—à–µ–Ω–∏—è–º–∏. –í –æ—Ç–ª–∏—á–∏–µ –æ—Ç –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ HTTP, –∫–æ—Ç–æ—Ä—ã–π —è–≤–ª—è–µ—Ç—Å—è —Ç–µ–∫—Å—Ç–æ–≤—ã–º –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç &lt;a href="http://proiot.ru/blog/posts/2017/10/09/setevoe-programmirovanie-tcp-http-server/"&gt;–¢–°–†&lt;/a&gt;, CoAP ‚Äì —ç—Ç–æ –±–∏–Ω–∞—Ä–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–≤–µ—Ä—Ö &lt;a href="http://proiot.ru/blog/posts/2017/10/03/setevoe-programmirovanie-udp-ntp-chasy/"&gt;UDP&lt;/a&gt;, —á—Ç–æ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–º–µ–Ω—å—à–∞–µ—Ç –æ–±—â–∏–π —Ä–∞–∑–º–µ—Ä –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏ –ø–æ–≤—ã—à–∞–µ—Ç –≥–∏–±–∫–æ—Å—Ç—å –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è.&lt;/p&gt;
&lt;p&gt;–° —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ CoAP –≤—ã–≥–ª—è–¥–∏—Ç –ø–æ—á—Ç–∏ —Ç–∞–∫ –∂–µ, –∫–∞–∫ HTTP. –í –æ–±–æ–∏—Ö —Å–ª—É—á–∞—è—Ö —Å–µ—Ä–≤–µ—Ä—ã –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç —Å–≤–æ–∏ —Ä–µ—Å—É—Ä—Å—ã –ø–æ –∞–¥—Ä–µ—Å–∞–º URL, –∏ –∫–ª–∏–µ–Ω—Ç—ã –æ–±—Ä–∞—â–∞—é—Ç—Å—è –∫ –Ω–∏–º –ø–æ—Å—Ä–µ–¥—Å—Ç–≤–æ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤, —Ç–∞–∫–∏—Ö –∫–∞–∫ GET, PUT, POST –∏ DELETE. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ REST (Representational State Transfer ‚Äî ¬´–ø–µ—Ä–µ–¥–∞—á–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è¬ª), –ø–æ–ª—É—á–∏–≤—à–∞—è —Å—Ç–æ–ª—å —à–∏—Ä–æ–∫–æ–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ HTTP —Å–µ—Ä–≤–∏—Å–æ–≤, —Ç–∞–∫–∂–µ —Ö–æ—Ä–æ—à–æ –ª–æ–∂–∏—Ç—Å—è –∏ –Ω–∞ CoAP —Å–µ—Ä–≤–∏—Å—ã. &lt;/p&gt;
&lt;p&gt;–ö–æ–¥—ã —Å–æ—Å—Ç–æ—è–Ω–∏–π (–æ—Ç–≤–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞) CoAP –≤ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å–ª—É—á–∞–µ–≤ –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã —Å HTTP –∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç —Å–æ–±–æ–π —Ü–µ–ª–æ–µ —á–∏—Å–ª–æ –∏–∑ —Ç—Ä—ë—Ö –¥–µ—Å—è—Ç–∏—á–Ω—ã—Ö —Ü–∏—Ñ—Ä ‚Äî 2.xx —É—Å–ø–µ—à–Ω–æ, 4.xx –æ—à–∏–±–∫–∞ –∫–ª–∏–µ–Ω—Ç–∞, 5.xx –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞.&lt;/p&gt;
&lt;h2&gt;–î–ï–ú–û&lt;/h2&gt;
&lt;p&gt;–ù–∞ –∫–∞—Ä—Ç–∏–Ω–∫–µ —Å–≤–µ—Ç–∏–ª—å–Ω–∏–∫ (—Å–µ—Ä–≤–µ—Ä) –∏ –≤—ã–∫–ª—é—á–∞—Ç–µ–ª—å (–∫–ª–∏–µ–Ω—Ç), –æ–±–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç –∏–∑ —Å–µ–±—è –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –Ω–∞ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞—Ö c –û–° &lt;a href="http://proiot.ru/blog/posts/2017/10/03/setevoe-programmirovanie-udp-ntp-chasy/"&gt;Contiki&lt;/a&gt; –Ω–∞ –±–æ—Ä—Ç—É, –æ–±–∞ –ø–æ–¥–∫–ª—é—á—ë–Ω–Ω—ã –∫ —Å–µ—Ç–∏. –ü–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É –¥–∞–Ω–Ω—ã–º–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –ø–æ—Å—Ä–µ–¥—Å—Ç–≤–æ–º CoAP –ø—Ä–æ—Ç–æ–∫–æ–ª–∞. –í —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏ Contiki 3.0 –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Erbium (Er) REST Engine –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ CoAP.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://localhost:9148/b793a136c4b05c9a9c29195f045b8482"&gt;coap.server.ipv6&lt;/a&gt; | &lt;a href="http://localhost:9148/e2e2bcf4782229c27ee28ce07c9698cf"&gt;coap.client.ipv6&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2017/10/17/protokoly-interneta-veshchei-coap/conticki-coap.zip"&gt;–∏—Å—Ö–æ–¥–Ω–∏–∫–∏&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2017/10/17/protokoly-interneta-veshchei-coap/ui.gif" style="width:100%;"&gt;&lt;/p&gt;
&lt;p&gt;–í –ø—Ä–∏–º–µ—Ä–µ —Å –ª–∞–º–ø–æ—á–∫–∞–º–∏ —Ü–≤–µ—Ç –∑–∞–¥–∞—ë—Ç—Å—è / —Å–Ω–∏–º–∞–µ—Ç—Å—è –º–µ—Ç–æ–¥–æ–º PUT. –í —Ç–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏–∏ REST –¥–∞–Ω–Ω—ã–π –º–µ—Ç–æ–¥ —è–≤–ª—è–µ—Ç—Å—è &lt;strong&gt;–∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã–º&lt;/strong&gt;, –∞–≥–∞. –≠—Ç–æ —É–º–Ω–æ–µ —Å–ª–æ–≤–æ –ø—Ä–∏—à–ª–æ –∫ –Ω–∞–º –∏–∑ –º–∞—Ç–µ–º–∞—Ç–∏–∫–∏. –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å ‚Äî —Å–≤–æ–π—Å—Ç–≤–æ –æ–±—ä–µ–∫—Ç–∞ –∏–ª–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∫ –æ–±—ä–µ–∫—Ç—É –¥–∞–≤–∞—Ç—å —Ç–æ—Ç –∂–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç, —á—Ç–æ –∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º. –û–ø–µ—Ä–∞—Ü–∏–∏ —Å–ª–æ–∂–µ–Ω–∏—è —Å –Ω—É–ª—ë–º, —É–º–Ω–æ–∂–µ–Ω–∏—è –Ω–∞ –µ–¥–∏–Ω–∏—Ü—É, –≤–æ–∑–≤–µ–¥–µ–Ω–∏—è –≤ —Å—Ç–µ–ø–µ–Ω—å –Ω–æ–ª—å –∏ –ø—Ä. —è–≤–ª—è—é—Ç—Å—è –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã–º–∏.&lt;/p&gt;
&lt;p&gt;–° —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è REST —Å–µ—Ä–≤–∏—Å–∞ –º–µ—Ç–æ–¥ —è–≤–ª—è–µ—Ç—Å—è –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã–º, –µ—Å–ª–∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—á–Ω—ã–π –∑–∞–ø—Ä–æ—Å, —Å–¥–µ–ª–∞–Ω–Ω—ã–π –æ–¥–∏–Ω –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –ø–æ–¥—Ä—è–¥, –∏–º–µ–µ—Ç –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ —ç—Ñ—Ñ–µ–∫—Ç, –Ω–µ –∏–∑–º–µ–Ω—è—é—â–∏–π —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞. –°–æ–∑–¥–∞–Ω–∏–µ –±–æ–ª—å—à–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∏–º–µ–µ—Ç —Ç–∞–∫–æ–π –∂–µ —ç—Ñ—Ñ–µ–∫—Ç, –∫–∞–∫ –∏ –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å. –í –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ —Å–∫–æ–ª—å–∫–æ –±—ã —Ä–∞–∑ –º—ã –Ω–∏ –∑–∞–¥–∞–≤–∞–ª–∏ –Ω–∞–ø—Ä–∏–º–µ—Ä –∫—Ä–∞—Å–Ω—ã–π —Ü–≤–µ—Ç –¥–ª—è –ª–∞–º–ø–æ—á–∫–∏, –æ–Ω–∞ –∏–∑–º–µ–Ω–∏—Ç —Å–≤–æ–π —Ü–≤–µ—Ç (–ø–æ–∫—Ä–∞—Å–Ω–µ–µ—Ç) —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—Ä–æ—Å–µ. –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã GET, PUT –∏ DELETE –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã, –Ω–æ –Ω–µ –º–µ—Ç–æ–¥ POST. –í–æ—Ç –µ—Å–ª–∏ –±—ã –º—ã –∑–∞—Ö–æ—Ç–µ–ª–∏, —á—Ç–æ–±—ã –ø—Ä–∏ –∫–∞–∂–¥–æ–º –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ —Å–µ—Ä–≤–µ—Ä—É —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ª–∞–º–ø–æ—á–µ–∫ –º–µ–Ω—è–ª–æ—Å—å –Ω–∞ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω–æ–µ (XOR), —Ç–æ –ø—Ä–æ –ø—Ä–∞–≤–∏–ª–∞–º REST —Ç–∞–∫–æ–π –∑–∞–ø—Ä–æ—Å —Å—Ç–æ–∏—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ –º–µ—Ç–æ–¥ POST.&lt;/p&gt;
&lt;p&gt;–ï—Å–ª–∏ –º—ã —Ö–æ—Ç–∏–º –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ª–∞–º–ø–æ—á–µ–∫ –Ω–∞ —Ç–µ–∫—É—â–∏–π –º–æ–º–µ–Ω—Ç, –Ω–æ –ø—Ä–∏ —ç—Ç–æ–º –Ω–µ —Ö–æ—Ç–∏–º –∏–∑–º–µ–Ω—è—Ç—å –∏–∑ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, —Ç–æ —Å—Ç–æ–∏—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å GET. –° —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è REST –ø–æ–¥–æ–±–Ω—ã–µ –º–µ—Ç–æ–¥—ã –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –∫–∞–∫ &lt;strong&gt;–±–µ–∑–æ–ø–∞—Å–Ω—ã–µ&lt;/strong&gt;, —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –æ–Ω–∏ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω—ã —Ç–æ–ª—å–∫–æ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏ –Ω–µ –¥–æ–ª–∂–Ω—ã –∏–∑–º–µ–Ω—è—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞. –î—Ä—É–≥–∏–º–∏ —Å–ª–æ–≤–∞–º–∏, –æ–Ω–∏ –Ω–µ –¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å –ø–æ–±–æ—á–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤, –∑–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º –±–µ–∑–æ–±–∏–¥–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤, —Ç–∞–∫–∏—Ö –∫–∞–∫ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Ç.–¥.&lt;/p&gt;
&lt;h2&gt;COAP&lt;/h2&gt;
&lt;p&gt;–°–∞–º–æ–µ –≤—Ä–µ–º—è –∑–∞–ø—É—Å—Ç–∏—Ç—å –Ω–∞—à –ª—é–±–∏–º—ã–π Wireshark –∏ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —á—Ç–æ —Ç–∞–º –≤–Ω—É—Ç—Ä–∏ CoAP –ø–∞–∫–µ—Ç–∞. –ù–∞ —Ä–∏—Å—É–Ω–∫–µ –º–µ—Ç–æ–¥ PUT, –∫–æ—Ç–æ—Ä—ã–π –≤–∫–ª—é—á–∞–µ—Ç –∫—Ä–∞—Å–Ω—ã–µ –ª–∞–º–ø–æ—á–∫–∏. –í –¥–∞–Ω–Ω–æ–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º –ø—Ä–∏–º–µ—Ä–µ –µ—Å–ª–∏ –º—ã —Ö–æ—Ç–∏–º –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–∞–∫–æ–µ-—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ —Å –ª–∞–º–ø–æ—á–∫–∏, —Ç–æ –Ω–∞–¥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π URL —Å–µ—Ä–≤–µ—Ä–∞ &lt;code&gt;/actuators/leds&lt;/code&gt;, –∞ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ —Ü–≤–µ—Ç –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è –∑–∞–¥–∞–≤–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º &lt;code&gt;color&lt;/code&gt;. –í —Ç–µ–ª–µ –∑–∞–ø—Ä–æ—Å–∞ &lt;code&gt;mode=on&lt;/code&gt; –≤–∫–ª—é—á–∞–µ—Ç –ª–∞–º–ø–æ—á–∫—É, –∞ &lt;code&gt;mode=off&lt;/code&gt; –≤—ã–∫–ª—é—á–∞–µ—Ç. –¢–∞–∫–æ–π –ø—Ä–∏–º–µ—Ä –∏–¥—ë—Ç –≤ –∏—Å—Ö–æ–¥–Ω–∏–∫–∞—Ö Contiki, –∞ –Ω–∞—Å–∫–æ–ª—å–∫–æ –æ–Ω —Å–ª–µ–¥—É–µ—Ç –ø—Ä–∏–Ω—Ü–∏–ø–∞–º REST —ç—Ç–æ —É–∂–µ –¥—Ä—É–≥–æ–π –≤–æ–ø—Ä–æ—Å.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2017/10/17/protokoly-interneta-veshchei-coap/coap.png" style="width:100%;"&gt;&lt;/p&gt;
&lt;p&gt;–ö–∞–∫ –≤–∏–¥–Ω–æ, CoAP –æ—á–µ–Ω—å –∫–æ–º–ø–∞–∫—Ç–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª. –ó–¥–µ—Å—å –Ω–∞–∏–±–æ–ª–µ–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ –ø–æ–ª–µ &lt;code&gt;Type: Confirmable&lt;/code&gt;, —Å –ø–æ–º–æ—â—å—é –∫–æ—Ç–æ—Ä–æ–≥–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –º–æ–∂–µ—Ç –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏ –ø–∞–∫–µ—Ç–æ–≤. –ö–∞–∫ –º—ã –∑–Ω–∞–µ–º —Ç–∞–∫–∞—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —É UDP –ø—Ä–æ—Ç–æ–∫–æ–ª–∞, –Ω–æ –æ–Ω–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≤ CoAP –∫–∞–∫ –Ω–∞–¥—Å—Ç—Ä–æ–π–∫–∞ –Ω–∞–¥ UDP. –ö–æ–≥–¥–∞ –ø–æ–ª—É—á–∞—Ç–µ–ª—é –ø—Ä–∏—Ö–æ–¥–∏—Ç ¬´–°onfirmable¬ª —Å–æ–æ–±—â–µ–Ω–∏–µ, –æ–Ω –≤—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ. –ü–µ—Ä–µ–¥–∞—é—â–∞—è —Å—Ç–æ—Ä–æ–Ω–∞, –≤ —Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å, –ø–æ–≤—Ç–æ—Ä–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –µ—Å–ª–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ —Ç–µ—á–µ–Ω–∏–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ –ø–µ—Ä–∏–æ–¥–∞ –≤—Ä–µ–º–µ–Ω–∏, –∑–∞–¥–∞–Ω–Ω–æ–≥–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏ —Å –∫–∞–∂–¥—ã–º —Ä–∞–∑–æ–º –≤–æ–∑—Ä–∞—Å—Ç–∞—é—â–µ–≥–æ —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ, –ø–æ–∫–∞ –ø–æ–ª—É—á–∞—Ç–µ–ª—å –Ω–µ –ø–æ—Å—ã–ª–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø—Ä–∏–µ–º–∞.&lt;/p&gt;
&lt;p&gt;–î–ª—è –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ —Ç—Ä–µ–±—É—é—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–≥–æ UDP. –¢–æ–≥–¥–∞ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –±–æ–ª–µ–µ –ª–µ–≥–∫–æ–π –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã —Å–æ–æ–±—â–µ–Ω–∏–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–µ—Ä–µ–¥–∞–Ω–æ —Å –º–µ–Ω—å—à–µ–π –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å—é, –ø–æ–º–µ—á–µ–Ω–Ω–æ–µ –∫–∞–∫ ¬´Non-confirmable¬ª. –î–∞–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤—Å–µ–≥–¥–∞ –Ω–µ—Å–µ—Ç –ª–∏–±–æ –∑–∞–ø—Ä–æ—Å, –ª–∏–±–æ –æ—Ç–≤–µ—Ç –∏ –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø—É—Å—Ç—ã–º.&lt;/p&gt;
&lt;p&gt;–ü–æ–∂–∞–ª—É–π –æ—Ç–¥–µ–ª—å–Ω–æ —Å—Ç–æ–∏—Ç —É–ø–æ–º—è–Ω—É—Ç—å —Å–∏–º–ø–∞—Ç–∏—á–Ω–æ–µ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ Copper –¥–ª—è –±—Ä–∞—É–∑–µ—Ä–∞ Firefox, –∫–æ—Ç–æ—Ä–æ–µ –±—É–¥–µ—Ç –ø–æ–ª–µ–∑–Ω–æ –ø—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ CoAP –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π. –° –µ–≥–æ –ø–æ–º–æ—â—å—é –º–æ–∂–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å–µ—Ä–≤–µ—Ä–∞ –æ—Ç–¥–µ–ª—å–Ω–æ –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞. –î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–µ—Ä–≤–µ—Ä—É –∏–∑ –±—Ä–∞—É–∑–µ—Ä–∞ –Ω—É–∂–Ω–æ –Ω–µ –∑–∞–±—ã—Ç—å &lt;a href="http://proiot.ru/blog/posts/2017/10/09/setevoe-programmirovanie-tcp-http-server/"&gt;–Ω–∞–∑–Ω–∞—á–∏—Ç—å&lt;/a&gt; –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∞–¥—Ä–µ—Å &lt;code&gt;abcd::1&lt;/code&gt; –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–º—É —Å–µ—Ç–µ–≤–æ–º—É –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É —Å–∏–º—É–ª—è—Ç–æ—Ä–∞.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2017/10/17/protokoly-interneta-veshchei-coap/copper.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–¢–µ–º–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –¥–ª—è ¬´–ò–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –≤–µ—â–µ–π¬ª —è–≤–ª—è–µ—Ç—Å—è –æ—Å–æ–±–µ–Ω–Ω–æ –∞–∫—Ç—É–∞–ª—å–Ω–æ–π. –í CoAP –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ, –Ω–æ –±–µ–∑ TCP —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π TLS (Transport Layer Security) –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —Å–≤—è–∑–∏. –ü–æ—ç—Ç–æ–º—É –≤ CoAP –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è DTLS (Datagram Transport Layer Security), –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º, –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–º –Ω–∞ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è—Ö –ø–æ—Å—Ä–µ–¥—Å—Ç–≤–æ–º –¥–∞—Ç–∞–≥—Ä–∞–º–º, —Å–æ–æ–±—â–∞—Ç—å—Å—è –±–µ–∑–æ–ø–∞—Å–Ω—ã–º —Å–ø–æ—Å–æ–±–æ–º, –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—é—â–∏–º –ø–µ—Ä–µ—Ö–≤–∞—Ç, –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏–µ, –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–æ, –Ω–µ –Ω–∞—Ä—É—à–∞—è –∑–∞—â–∏—Ç—ã —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ –ø–æ–¥–¥–µ–ª–∫—É —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2017/10/20/protokoly-interneta-veshchei-mqtt/"&gt;–î–∞–ª–µ–µ&lt;/a&gt; MQTT.&lt;/p&gt;</content><category term="contiki"></category><category term="msp430"></category><category term="m2m"></category><category term="REST"></category></entry><entry><title>–°–µ—Ç–µ–≤–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ - TCP | HTTP —Å–µ—Ä–≤–µ—Ä</title><link href="http://proiot.ru/blog/posts/2017/10/09/setevoe-programmirovanie-tcp-http-server/" rel="alternate"></link><published>2017-10-09T00:00:00+03:00</published><updated>2017-10-09T00:00:00+03:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2017-10-09:/blog/posts/2017/10/09/setevoe-programmirovanie-tcp-http-server/</id><summary type="html">&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2017/10/03/setevoe-programmirovanie-udp-ntp-chasy/"&gt;–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º&lt;/a&gt; –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ –ø–æ —Å–µ—Ç–µ–≤—ã–º –ø—Ä–æ—Ç–æ–∫–æ–ª–∞–º.&lt;/p&gt;
&lt;p&gt;TCP –∏ UDP ‚Äî –æ–±–∞ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è. UDP ‚Äî —ç—Ç–æ –ø—Ä–æ—Ç–æ–∫–æ–ª –±–µ–∑ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∏ —Å –Ω–µ–≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –¥–æ—Å—Ç–∞–≤–∫–æ–π –ø–∞–∫–µ—Ç–æ–≤. TCP (Transmission Control Protocol) ‚Äî —ç—Ç–æ –ø—Ä–æ—Ç–æ–∫–æ–ª —Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∏ —Å –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –¥–æ—Å—Ç–∞–≤–∫–æ–π –ø–∞–∫–µ—Ç–æ–≤. –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏–µ (–ü—Ä–∏–≤–µ—Ç. | –ü—Ä–∏–≤–µ—Ç. | –ü–æ–±–æ–ª—Ç–∞–µ–º? | –î–∞–≤–∞–π.), –ø–æ—Å–ª–µ —á–µ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å—á–∏—Ç–∞–µ—Ç—Å—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º. –î–∞–ª–µ–µ ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2017/10/03/setevoe-programmirovanie-udp-ntp-chasy/"&gt;–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º&lt;/a&gt; –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ –ø–æ —Å–µ—Ç–µ–≤—ã–º –ø—Ä–æ—Ç–æ–∫–æ–ª–∞–º.&lt;/p&gt;
&lt;p&gt;TCP –∏ UDP ‚Äî –æ–±–∞ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è. UDP ‚Äî —ç—Ç–æ –ø—Ä–æ—Ç–æ–∫–æ–ª –±–µ–∑ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∏ —Å –Ω–µ–≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –¥–æ—Å—Ç–∞–≤–∫–æ–π –ø–∞–∫–µ—Ç–æ–≤. TCP (Transmission Control Protocol) ‚Äî —ç—Ç–æ –ø—Ä–æ—Ç–æ–∫–æ–ª —Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∏ —Å –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –¥–æ—Å—Ç–∞–≤–∫–æ–π –ø–∞–∫–µ—Ç–æ–≤. –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏–µ (–ü—Ä–∏–≤–µ—Ç. | –ü—Ä–∏–≤–µ—Ç. | –ü–æ–±–æ–ª—Ç–∞–µ–º? | –î–∞–≤–∞–π.), –ø–æ—Å–ª–µ —á–µ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å—á–∏—Ç–∞–µ—Ç—Å—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º. –î–∞–ª–µ–µ –ø–æ —ç—Ç–æ–º—É —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—é —Ç—É–¥–∞ –∏ –æ–±—Ä–∞—Ç–Ω–æ –ø–æ—Å—ã–ª–∞—é—Ç—Å—è –ø–∞–∫–µ—Ç—ã (–∏–¥–µ—Ç –±–µ—Å–µ–¥–∞), –ø—Ä–∏—á–µ–º —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π, –¥–æ—à–µ–ª –ª–∏ –ø–∞–∫–µ—Ç –¥–æ –ø–æ–ª—É—á–∞—Ç–µ–ª—è. –ï—Å–ª–∏ –ø–∞–∫–µ—Ç –ø–æ—Ç–µ—Ä—è–ª—Å—è, –∏–ª–∏ –¥–æ—à–µ–ª, –Ω–æ —Å –±–∏—Ç–æ–π –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω–æ–π —Å—É–º–º–æ–π, —Ç–æ –æ–Ω –ø–æ—Å—ã–ª–∞–µ—Ç—Å—è –ø–æ–≤—Ç–æ—Ä–Ω–æ (¬´–ø–æ–≤—Ç–æ—Ä–∏, –Ω–µ —Ä–∞—Å—Å–ª—ã—à–∞–ª¬ª). –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º TCP –±–æ–ª–µ–µ –Ω–∞–¥—ë–∂–µ–Ω, –Ω–æ –æ–Ω —Å–ª–æ–∂–Ω–µ–µ —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ —Ç—Ä–µ–±—É–µ—Ç –±–æ–ª—å—à–µ —Ç–∞–∫—Ç–æ–≤ / –ø–∞–º—è—Ç–∏, —á—Ç–æ –∏–º–µ–µ—Ç –Ω–µ —Å–∞–º–æ–µ –ø–æ—Å–ª–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤. –í –∫–∞—á–µ—Å—Ç–≤–µ –ø—Ä–∏–º–µ—Ä–æ–≤ –ø—Ä–∏–∫–ª–∞–¥–Ω—ã—Ö –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏—Ö TCP, –º–æ–∂–Ω–æ –Ω–∞–∑–≤–∞—Ç—å FTP, HTTP, SMTP –∏ –º–Ω–æ–≥–∏–µ –¥—Ä—É–≥–∏–µ.&lt;/p&gt;
&lt;h2&gt;TL;DR&lt;/h2&gt;
&lt;p&gt;HTTP (Hypertext Transfer Protocol) ‚Äî –ø—Ä–∏–∫–ª–∞–¥–Ω–æ–π –ø—Ä–æ—Ç–æ–∫–æ–ª, —Å –ø–æ–º–æ—â—å—é –∫–æ—Ç–æ—Ä–æ–≥–æ —Å–µ—Ä–≤–µ—Ä –æ—Ç–¥–∞—ë—Ç —Å—Ç—Ä–∞–Ω–∏—á–∫–∏ –Ω–∞—à–µ–º—É –±—Ä–∞—É–∑–µ—Ä—É. HTTP –≤ –Ω–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è –ø–æ–≤—Å–µ–º–µ—Å—Ç–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–æ –í—Å–µ–º–∏—Ä–Ω–æ–π –ø–∞—É—Ç–∏–Ω–µ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ —Å –≤–µ–±-—Å–∞–π—Ç–æ–≤. –ù–∞ –∫–∞—Ä—Ç–∏–Ω–∫–µ —Å–≤–µ—Ç–∏–ª—å–Ω–∏–∫ –Ω–∞ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–µ —Å –û–° &lt;a href="http://proiot.ru/blog/posts/2017/10/03/setevoe-programmirovanie-udp-ntp-chasy/"&gt;Contiki&lt;/a&gt; –Ω–∞ –±–æ—Ä—Ç—É, –≤ –∫–æ—Ç–æ—Ä–æ–º —Ü–≤–µ—Ç–∞ –∑–∞–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://localhost:9148/54734ef58963a68a9d79d74d53e115f7"&gt;IPv6&lt;/a&gt; | &lt;a href="http://localhost:9148/f681567307f7470e3bcb0e17de6c1710"&gt;IPv4&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2017/10/09/setevoe-programmirovanie-tcp-http-server/conticki-http-leds.zip"&gt;–∏—Å—Ö–æ–¥–Ω–∏–∫–∏&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2017/10/09/setevoe-programmirovanie-tcp-http-server/ui.gif" style="width:100%;"&gt;&lt;/p&gt;
&lt;p&gt;HTTP –ø—Ä–æ—Ç–æ–∫–æ–ª —Ç–µ–∫—Å—Ç–æ–≤—ã–π –∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–æ—Å—Ç–æ–π. –°–æ–±—Å—Ç–≤–µ–Ω–Ω–æ –≤–æ—Ç —Ç–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç –º–µ—Ç–æ–¥ GET, –ø–æ—Å—ã–ª–∞–µ–º—ã–π —É—Ç–∏–ª–∏—Ç–æ–π netcat –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ã–π IPv6 –∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞ —Å –ª–∞–º–ø–æ—á–∫–∞–º–∏:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ nc fe80::200:e2ff:fe58:b66b%mazko 80 &amp;lt;&amp;lt;EOF
GET /b HTTP/1.0

EOF
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ú–µ—Ç–æ–¥ HTTP (–∞–Ω–≥–ª. HTTP Method) –æ–±—ã—á–Ω–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –∫–æ—Ä–æ—Ç–∫–æ–µ –∞–Ω–≥–ª–∏–π—Å–∫–æ–µ —Å–ª–æ–≤–æ, –∑–∞–ø–∏—Å–∞–Ω–Ω–æ–µ –∑–∞–≥–ª–∞–≤–Ω—ã–º–∏ –±—É–∫–≤–∞–º–∏, —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –∫ —Ä–µ–≥–∏—Å—Ç—Ä—É. –ö–∞–∂–¥—ã–π —Å–µ—Ä–≤–µ—Ä –æ–±—è–∑–∞–Ω –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –∫–∞–∫ –º–∏–Ω–∏–º—É–º –º–µ—Ç–æ–¥—ã GET –∏ HEAD. –ö—Ä–æ–º–µ –º–µ—Ç–æ–¥–æ–≤ GET –∏ HEAD, —á–∞—Å—Ç–æ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –º–µ—Ç–æ–¥—ã POST, PUT –∏ DELETE. –ú–µ—Ç–æ–¥ GET –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ —Ä–µ—Å—É—Ä—Å–∞, –≤ –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ —Ç—É—Ç &lt;code&gt;GET /b HTTP/1.0&lt;/code&gt; –≥–¥–µ –ø—É—Ç—å /b –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Ü–≤–µ—Ç (—Å–∏–Ω–∏–π). –û—Ç–≤–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;HTTP/1.0 200 OK
Server: Contiki/2.4 http://www.sics.se/contiki/
Connection: close
Cache-Control: no-cache, no-store, must-revalidate
Pragma: no-cache
Expires: 0
Content-type: text/html

&amp;lt;html&amp;gt;&amp;lt;head&amp;gt;&amp;lt;title&amp;gt;Contiki RGB&amp;lt;/title&amp;gt;&amp;lt;/head&amp;gt;&amp;lt;body&amp;gt;
&amp;lt;p style=&amp;#39;color:red;&amp;#39;&amp;gt;Red is &amp;lt;a href=&amp;#39;/r&amp;#39;&amp;gt;OFF&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;p style=&amp;#39;color:green;&amp;#39;&amp;gt;Green is &amp;lt;a href=&amp;#39;/g&amp;#39;&amp;gt;OFF&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;p style=&amp;#39;color:blue;&amp;#39;&amp;gt;Blue is &amp;lt;a href=&amp;#39;/b&amp;#39;&amp;gt;ON&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;/body&amp;gt;&amp;lt;/html&amp;gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ö–æ–¥ —Å–æ—Å—Ç–æ—è–Ω–∏—è (—É –Ω–∞—Å 200) —è–≤–ª—è–µ—Ç—Å—è —á–∞—Å—Ç—å—é –ø–µ—Ä–≤–æ–π —Å—Ç—Ä–æ–∫–∏ –æ—Ç–≤–µ—Ç–∞ —Å–µ—Ä–≤–µ—Ä–∞. –û–Ω –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π —Ü–µ–ª–æ–µ —á–∏—Å–ª–æ –∏–∑ —Ç—Ä—ë—Ö —Ü–∏—Ñ—Ä. –ü–µ—Ä–≤–∞—è —Ü–∏—Ñ—Ä–∞ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –∫–ª–∞—Å—Å —Å–æ—Å—Ç–æ—è–Ω–∏—è. –ó–∞ –∫–æ–¥–æ–º –æ—Ç–≤–µ—Ç–∞ –æ–±—ã—á–Ω–æ —Å–ª–µ–¥—É–µ—Ç –æ—Ç–¥–µ–ª—ë–Ω–Ω–∞—è –ø—Ä–æ–±–µ–ª–æ–º –ø–æ—è—Å–Ω—è—é—â–∞—è —Ñ—Ä–∞–∑–∞ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º —è–∑—ã–∫–µ, –∫–æ—Ç–æ—Ä–∞—è —Ä–∞–∑—ä—è—Å–Ω—è–µ—Ç —á–µ–ª–æ–≤–µ–∫—É –ø—Ä–∏—á–∏–Ω—É –∏–º–µ–Ω–Ω–æ —Ç–∞–∫–æ–≥–æ –æ—Ç–≤–µ—Ç–∞. –í –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ —Å–µ—Ä–≤–µ—Ä –æ—Ç—Ä–∞–±–æ—Ç–∞–ª –±–µ–∑ –æ—à–∏–±–æ–∫, –≤—Å—ë –ø—É—á–∫–æ–º (–û–ö).&lt;/p&gt;
&lt;p&gt;–ö–∞–∫ –∑–∞–ø—Ä–æ—Å, —Ç–∞–∫ –∏ –æ—Ç–≤–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç –∑–∞–≥–æ–ª–æ–≤–∫–∏ (–∫–∞–∂–¥–∞—è —Å—Ç—Ä–æ–∫–∞ ‚Äî –æ—Ç–¥–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ –∑–∞–≥–æ–ª–æ–≤–∫–∞, –ø–∞—Ä–∞ –∏–º—è-–∑–Ω–∞—á–µ–Ω–∏–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∞ –¥–≤–æ–µ—Ç–æ—á–∏–µ–º). –ó–∞–∫–∞–Ω—á–∏–≤–∞—é—Ç—Å—è –∑–∞–≥–æ–ª–æ–≤–∫–∏ –ø—É—Å—Ç–æ–π —Å—Ç—Ä–æ–∫–æ–π, –ø–æ—Å–ª–µ —á–µ–≥–æ –º–æ–≥—É—Ç –∏–¥—Ç–∏ –¥–∞–Ω–Ω—ã–µ.&lt;/p&gt;
&lt;p&gt;–ú–æ–π –±—Ä–∞—É–∑–µ—Ä –æ—Ç–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –æ—Ç–∫—Ä—ã–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–π IPv6-–∞–¥—Ä–µ—Å, –ø–æ—ç—Ç–æ–º—É –≤ –ø—Ä–æ—à–∏–≤–∫–µ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ –ø—Ä–æ–ø–∏—Å–∞–Ω –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∞–¥—Ä–µ—Å –∏ —Ç–∞–∫–æ–π –∂–µ –ø—Ä–µ—Ñ–∏–∫—Å —Ç–∞–∫–∂–µ –Ω—É–∂–Ω–æ –Ω–∞–∑–Ω–∞—á–∏—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–º—É —Å–µ—Ç–µ–≤–æ–º—É –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É —Å–∏–º—É–ª—è—Ç–æ—Ä–∞:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ sudo ip addr add abcd::1/64 dev mazko          # linux
~$ netsh interface ipv6 set address mazko abcd::1 # windows
~$ curl http://[abcd::200:e2ff:fe58:b66b]
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ï—Å–ª–∏ curl –æ—Ç—Ä–∞–±–æ—Ç–∞–ª –±–µ–∑ –æ—à–∏–±–æ–∫, —Ç–æ —Å—Å—ã–ª–∫—É –º–æ–∂–Ω–æ —Å–ø–æ–∫–æ–π–Ω–æ –æ—Ç–∫—Ä—ã–≤–∞—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ.&lt;/p&gt;
&lt;h2&gt;TCP&lt;/h2&gt;
&lt;p&gt;–ó–¥–µ—Å—å –º—ã –Ω–∞—É—á–∏–º –Ω–∞—à &lt;a href="http://proiot.ru/blog/posts/2017/10/03/setevoe-programmirovanie-udp-ntp-chasy/"&gt;–∏–≥—Ä—É—à–µ—á–Ω—ã–π&lt;/a&gt; TCP/IP —Å—Ç–µ–∫ –ø–æ–Ω–∏–º–∞—Ç—å TCP –ø—Ä–æ—Ç–æ–∫–æ–ª. –ò—Ç–∞–∫ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –ø–æ –ø—Ä–æ—Ç–æ–∫–æ–ª—É TCP –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å —Ç.–Ω. —Ç—Ä–µ—Ö—Å—Ç–æ—Ä–æ–Ω–Ω–µ–≥–æ –∫–≤–∏—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (—Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏—è). –ö–∞–∫ –≤—Å–µ–≥–¥–∞ —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è —Å —Å–µ—Ç—å—é –ø–æ–º–æ–∂–µ—Ç Wireshark.&lt;/p&gt;
&lt;p&gt;–ö–æ–≥–¥–∞ —Ç—Ä–µ–±—É–µ—Ç—Å—è —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å —É–¥–∞–ª—ë–Ω–Ω—ã–º —Å–µ—Ä–≤–µ—Ä–æ–º, –µ–º—É –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ø–∞–∫–µ—Ç —Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º —Ñ–ª–∞–≥–æ–º SYN, —á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é —Å–µ—Å—Å–∏–∏. –¢—É—Ç –µ—Å—Ç—å –ø–æ–ª–µ Sequence Number (–Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫–µ 1039510418), –Ω–∞—á–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —ç—Ç–æ–≥–æ –ø–æ–ª—è –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è —Å–ª—É—á–∞–π–Ω—ã–º –æ–±—Ä–∞–∑–æ–º –∏–Ω–∏—Ü–∏–∞—Ç–æ—Ä–æ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2017/10/09/setevoe-programmirovanie-tcp-http-server/handshake1.png" style="width:100%;"&gt;&lt;/p&gt;
&lt;p&gt;–°–µ—Ä–≤–µ—Ä, –≤ –æ—Ç–≤–µ—Ç –Ω–∞ —ç—Ç–æ—Ç –ø–∞–∫–µ—Ç, –æ—Ç–≤–µ—á–∞–µ—Ç –ø–∞–∫–µ—Ç–æ–º —Å –±–∏—Ç–∞–º–∏ SYN, ACK. –°–≤–æ—ë –∑–Ω–∞—á–µ–Ω–∏–µ Sequence Number (–Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫–µ 16770109) –æ–Ω —Ç–æ–∂–µ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–ª—É—á–∞–π–Ω—ã–º –æ–±—Ä–∞–∑–æ–º. –¢–∞–∫–∂–µ –æ–Ω –¥–æ–ª–∂–µ–Ω –∑–∞–ø–æ–ª–Ω–∏—Ç—å –ø–æ–ª–µ Acknowledgment Number, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥–µ—Ç —Ä–∞–≤–Ω–æ —Å—É–º–º–µ –ø—Ä–∏–Ω—è—Ç–æ–≥–æ Sequence Number –ø–ª—é—Å 1 —Ç.–µ. 1039510419.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2017/10/09/setevoe-programmirovanie-tcp-http-server/handshake2.png" style="width:100%;"&gt;&lt;/p&gt;
&lt;p&gt;–¢–µ–ø–µ—Ä—å –∏–Ω–∏—Ü–∏–∞—Ç–æ—Ä—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –Ω–µ –æ—Å—Ç–∞–µ—Ç—Å—è –Ω–∏—á–µ–≥–æ –¥—Ä—É–≥–æ–≥–æ, –∫–∞–∫ –æ—Ç–≤–µ—Ç–∏—Ç—å ACK. –ó–¥–µ—Å—å Acknowledgment Number –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ –±—É–¥–µ—Ç —Ä–∞–≤–Ω–æ —Å—É–º–º–µ –ø—Ä–∏–Ω—è—Ç–æ–≥–æ Sequence Number –ø–ª—é—Å 1 —Ç.–µ. 16770110.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2017/10/09/setevoe-programmirovanie-tcp-http-server/handshake3.png" style="width:100%;"&gt;&lt;/p&gt;
&lt;p&gt;–° —ç—Ç–æ–≥–æ –º–æ–º–µ–Ω—Ç–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å—á–∏—Ç–∞–µ—Ç—Å—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º. –î–∞–ª—å–Ω–µ–π—à–∏–µ –ø–∞–∫–µ—Ç—ã –±—É–¥—É—Ç –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å —É–∂–µ –ø–æ–ª–µ–∑–Ω—É—é –Ω–∞–≥—Ä—É–∑–∫—É ‚Äì –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤ –≤—ã—à–µ—Å—Ç–æ—è—â–∏—Ö —É—Ä–æ–≤–Ω–µ–π. –í –æ—Ç–ª–∏—á–∏–µ –æ—Ç UDP, —Ç—É—Ç –Ω–∞ –∫–∞–∂–¥—ã–π –ø–∞–∫–µ—Ç –Ω—É–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ (—Ñ–ª–∞–≥ ACK), –¥–∞–±—ã —É–¥–∞–ª—ë–Ω–Ω—ã–π —É–∑–µ–ª –∑–Ω–∞–ª, —á—Ç–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –∏–º –¥–∞–Ω–Ω—ã–µ –±—ã–ª–∏ —É—Å–ø–µ—à–Ω–æ –ø—Ä–∏–Ω—è—Ç—ã. –ü—Ä–∏ —ç—Ç–æ–º —Ç–∞–∫ –∂–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤–∑–∞–∏–º–Ω–æ–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ Sequence Number —É —Å–µ—Ä–≤–µ—Ä–∞ –∏ —É –∫–ª–∏–µ–Ω—Ç–∞, –Ω–æ —Ç–æ–ª—å–∫–æ —É–∂–µ –Ω–µ –Ω–∞ 1, –∞ –Ω–∞ —Ä–∞–∑–º–µ—Ä –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö.&lt;/p&gt;
&lt;p&gt;–î–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —É–¥–∞–ª—ë–Ω–Ω–æ–º—É —É–∑–ª—É –ø–æ—Å—ã–ª–∞–µ—Ç—Å—è –ø–∞–∫–µ—Ç —Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º —Ñ–ª–∞–≥–æ–º FIN.&lt;/p&gt;
&lt;p&gt;–° —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ TCP —ç—Ç–æ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π &lt;a href="http://proiot.ru/blog/posts/2012/10/09/avtomat-s-konechnym-chislom-sostoianii/"&gt;–∫–æ–Ω–µ—á–Ω—ã–π –∞–≤—Ç–æ–º–∞—Ç&lt;/a&gt;. –ù–∞ –∫–∞—Ä—Ç–∏–Ω–∫–µ –ø–æ–∫–∞–∑–∞–Ω—ã –∫–∞–∫ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–∞, —Ç–∞–∫ –∏ –∫–ª–∏–µ–Ω—Ç–∞ (—Ä–∞–∑–Ω—ã–µ —Ü–≤–µ—Ç–∞ —Å—Ç—Ä–µ–ª–æ–∫), –Ω–∞ —Å—Ç—Ä–µ–ª–∫–∞—Ö –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–æ &lt;strong&gt;—Å–æ–±—ã—Ç–∏–µ/–¥–µ–π—Å—Ç–≤–∏–µ&lt;/strong&gt; ‚Äì –Ω–∞–ø—Ä–∏–º–µ—Ä –ø–µ—Ä–µ—Ö–æ–¥ —Å–µ—Ä–≤–µ—Ä–∞ (—Å–∏–Ω—è—è —Å—Ç—Ä–µ–ª–∫–∞) –∏–∑ —Å–æ—Å—Ç–æ—è–Ω–∏—è LISTEN –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ SYN RECEIVED –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ —Å–æ–±—ã—Ç–∏—é SYN, —Ä–µ–∞–∫—Ü–∏—è –Ω–∞ —ç—Ç–æ —Å–æ–±—ã—Ç–∏–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–ª–∏–µ–Ω—Ç—É SYN+ACK –≤ –æ—Ç–≤–µ—Ç:&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2017/10/09/setevoe-programmirovanie-tcp-http-server/Tcp_state_diagram_fixed.svg" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–¢–µ–ø–µ—Ä—å –Ω–µ–º–Ω–æ–≥–æ –∫–æ–¥–∞. –ü—Ä–∏–≤–µ–¥–µ–Ω–Ω—ã–π –Ω–∏–∂–µ –ø—Ä–∏–º–µ—Ä –æ—á–µ–Ω—å —Å–∏–ª—å–Ω–æ —É–ø—Ä–æ—â—ë–Ω, —Ç—É—Ç –Ω–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–π –∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Ç–æ–ª—å–∫–æ –º–∏–Ω–∏–∞–Ω–∏–º–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–∞—è –¥–ª—è –æ–±–º–µ–Ω–∞ –¥–∞–Ω–Ω—ã–º–∏ —É—Ç–∏–ª–∏—Ç–æ–π netcat.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;typedef&lt;/span&gt; &lt;span class="k"&gt;struct&lt;/span&gt; &lt;span class="n"&gt;tcp_packet&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="kt"&gt;uint16_t&lt;/span&gt; &lt;span class="n"&gt;from_port&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="kt"&gt;uint16_t&lt;/span&gt; &lt;span class="n"&gt;to_port&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="kt"&gt;uint32_t&lt;/span&gt; &lt;span class="n"&gt;seq_num&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="kt"&gt;uint32_t&lt;/span&gt; &lt;span class="n"&gt;ack_num&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="n"&gt;data_offset&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="n"&gt;flags&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="kt"&gt;uint16_t&lt;/span&gt; &lt;span class="n"&gt;window&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="kt"&gt;uint16_t&lt;/span&gt; &lt;span class="n"&gt;cksum&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="kt"&gt;uint16_t&lt;/span&gt; &lt;span class="n"&gt;urgent_ptr&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;[];&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="n"&gt;tcp_packet_t&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;tcp_reply&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;eth_frame_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;uint16_t&lt;/span&gt; &lt;span class="n"&gt;len&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="kt"&gt;uint16_t&lt;/span&gt; &lt;span class="n"&gt;temp&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="n"&gt;ip_packet_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;ip&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)(&lt;/span&gt;&lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;tcp_packet_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;tcp&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)(&lt;/span&gt;&lt;span class="n"&gt;ip&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

  &lt;span class="c1"&gt;// swap src/dst, fill tcp hdr?&lt;/span&gt;
  &lt;span class="n"&gt;temp&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;tcp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;from_port&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;tcp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;from_port&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;tcp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;to_port&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;tcp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;to_port&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;temp&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;tcp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;window&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;htons&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;TCP_WINDOW_SIZE&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;tcp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;urgent_ptr&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="c1"&gt;// SYN packet?&lt;/span&gt;
  &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tcp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;flags&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;TCP_FLAG_SYN&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="c1"&gt;// add MSS option&lt;/span&gt;
    &lt;span class="n"&gt;tcp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;data_offset&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tcp_packet_t&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;tcp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="c1"&gt;// MSS option&lt;/span&gt;
    &lt;span class="n"&gt;tcp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="c1"&gt;// MSS option length = 4 bytes&lt;/span&gt;
    &lt;span class="n"&gt;tcp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;TCP_SYN_MSS&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;tcp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;TCP_SYN_MSS&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="mh"&gt;0xff&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;len&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;
  &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="c1"&gt;// not syn packet - no options&lt;/span&gt;
    &lt;span class="n"&gt;tcp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;data_offset&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tcp_packet_t&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;

  &lt;span class="c1"&gt;// calculate chksum&lt;/span&gt;
  &lt;span class="n"&gt;len&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tcp_packet_t&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;tcp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;cksum&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;tcp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;cksum&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;ip_cksum&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;len&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;IP_PROTOCOL_TCP&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
      &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;ip&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;src&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;len&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt; &lt;span class="n"&gt;my_ip&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;

  &lt;span class="n"&gt;ip&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;payload_len&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;htons&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;len&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;memcpy&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;ip&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;dest&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;ip&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;src&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt; &lt;span class="n"&gt;ip&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;src&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;memcpy&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;ip&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;src&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;my_ip&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt; &lt;span class="n"&gt;ip&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;src&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;eth_reply&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;len&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ip_packet_t&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;tcp_step&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tcp_packet_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;tcp&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;uint16_t&lt;/span&gt; &lt;span class="n"&gt;num&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="kt"&gt;uint32_t&lt;/span&gt; &lt;span class="n"&gt;ack_num&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;ack_num&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;ntohl&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tcp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;seq_num&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;num&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;tcp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;seq_num&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;tcp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;ack_num&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;tcp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;ack_num&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;htonl&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ack_num&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;tcp_filter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;eth_frame_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;uint16_t&lt;/span&gt; &lt;span class="n"&gt;len&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="n"&gt;ip_packet_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;ip&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)(&lt;/span&gt;&lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;tcp_packet_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;tcp&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)(&lt;/span&gt;&lt;span class="n"&gt;ip&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

  &lt;span class="k"&gt;switch&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tcp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;flags&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="nl"&gt;TCP_FLAG_SYN&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="n"&gt;tcp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;flags&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;TCP_FLAG_SYN&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;TCP_FLAG_ACK&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
      &lt;span class="n"&gt;tcp_step&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tcp&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
      &lt;span class="n"&gt;tcp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;seq_num&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;htonl&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;gettc&lt;/span&gt;&lt;span class="p"&gt;());&lt;/span&gt; &lt;span class="c1"&gt;// random number&lt;/span&gt;
      &lt;span class="n"&gt;tcp_reply&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
      &lt;span class="k"&gt;break&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="n"&gt;TCP_FLAG_PSH&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="nl"&gt;TCP_FLAG_ACK&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="n"&gt;len&lt;/span&gt; &lt;span class="o"&gt;-=&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tcp_packet_t&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
      &lt;span class="n"&gt;tcp_step&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tcp&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;len&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
      &lt;span class="n"&gt;tcp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;flags&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;TCP_FLAG_ACK&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
      &lt;span class="c1"&gt;// feed/read data to/from app&lt;/span&gt;
      &lt;span class="n"&gt;tcp_reply&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;tcp_data&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;len&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
      &lt;span class="k"&gt;break&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="n"&gt;TCP_FLAG_FIN&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="nl"&gt;TCP_FLAG_ACK&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="n"&gt;tcp_step&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tcp&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
      &lt;span class="n"&gt;tcp_reply&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
      &lt;span class="k"&gt;break&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–ª–µ–∑–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö ‚Äî –≤—ã–≤–æ–¥–∏–º –Ω–∞ —ç–∫—Ä–∞–Ω, –ø–µ—á–∞—Ç–∞–µ–º –≤ UART: &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kt"&gt;uint16_t&lt;/span&gt; &lt;span class="nf"&gt;tcp_data&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;eth_frame_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;uint16_t&lt;/span&gt; &lt;span class="n"&gt;len&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="n"&gt;ip_packet_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;ip&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)(&lt;/span&gt;&lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;tcp_packet_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;tcp&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)(&lt;/span&gt;&lt;span class="n"&gt;ip&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;char&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="n"&gt;tcp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="n"&gt;draw_clr&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
  &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;len&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;draw_str&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&amp;gt;&amp;gt; %s&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

  &lt;span class="c1"&gt;// piggyback&lt;/span&gt;
  &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="kt"&gt;char&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;response&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;!!! OK !!!&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;strcpy&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;response&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;strlen&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;response&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;a href="http://localhost:9148/f0925cc954111f5cb6f47c6b1dffc0ac"&gt;IPv6&lt;/a&gt; | &lt;a href="http://localhost:9148/ce2f76817817a8bea5d539aa0df45f8f"&gt;IPv4&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2017/10/09/setevoe-programmirovanie-tcp-http-server/eth_tcp.zip"&gt;–∏—Å—Ö–æ–¥–Ω–∏–∫–∏&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2017/10/09/setevoe-programmirovanie-tcp-http-server/tcp.png" style="width:50%; margin: 0 auto; display:block;"&gt;&lt;/p&gt;
&lt;p&gt;–ß—Ç–æ–±—ã –≤—ã–≤–µ—Å—Ç–∏ –¥–∞–Ω–Ω—ã–µ –≤ –¥–∏—Å–ø–ª–µ–π, –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–µ–≤–∞–π—Å—É TCP-–ø–∞–∫–µ—Ç –Ω–∞ –ª—é–±–æ–π –ø–æ—Ä—Ç –ø–æ–º–æ—â—å—é netcat:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ cat &amp;lt;(echo &amp;#39;hello TCP !&amp;#39;) - | nc -6 fe80::0:ff:fe00:42%mazko 12345
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ë—É–¥—É—á–∏ –æ–¥–Ω–∞–∂–¥—ã —Å–æ–∑–¥–∞–Ω, –∫–∞–Ω–∞–ª TCP –º–æ–∂–µ—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å ¬´–≤–µ—á–Ω–æ¬ª. –ê —á—Ç–æ –±—É–¥–µ—Ç, –µ—Å–ª–∏ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–∑–æ—Ä–≤–∞—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Ç.–µ. –±–µ–∑ —Ñ–ª–∞–≥–∞ FIN ? –¢–∞–∫–∞—è —Å–∏—Ç—É–∞—Ü–∏—è –≤–æ–∑–º–æ–∂–Ω–∞, –µ—Å–ª–∏ –Ω–∞–ø—Ä–∏–º–µ—Ä –≤—ã–¥–µ—Ä–Ω—É—Ç—å –∫–∞–∫–æ–π-–Ω–∏–±—É–¥—å –∫–∞–±–µ–ª—å. –û–±–∞ –∏ –∫–ª–∏–µ–Ω—Ç –∏ —Å–µ—Ä–≤–µ—Ä –≤ —ç—Ç–æ–º —Å–ª—É—á–∞–µ –±—É–¥—É—Ç –±–µ–∑—É—Å–ø–µ—à–Ω–æ –¥–æ–ª–≥–æ –∂–¥–∞—Ç—å –¥–∞–Ω–Ω—ã—Ö –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞. –î–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è —Ç–∞–∫–∏—Ö ¬´–º–µ—Ä—Ç–≤—ã—Ö¬ª —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –º–µ—Ö–∞–Ω–∏–∑–º keep-alive ‚Äì –Ω–µ–∫–æ–µ —Å–ª—É–∂–µ–±–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –æ—Ç—Å—ã–ª–∞–µ—Ç—Å—è –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏. –ï—Å–ª–∏ –æ—Ç–≤–µ—Ç –Ω–∞ –Ω–µ–≥–æ –Ω–µ –ø–æ–ª—É—á–µ–Ω, —Ç–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Ä–∞–∑—Ä—ã–≤–∞–µ—Ç—Å—è.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2017/10/17/protokoly-interneta-veshchei-coap/"&gt;–î–∞–ª–µ–µ&lt;/a&gt; CoAP.&lt;/p&gt;</content><category term="contiki"></category><category term="msp430"></category><category term="FSM"></category></entry><entry><title>–°–µ—Ç–µ–≤–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ - UDP | NTP —á–∞—Å—ã</title><link href="http://proiot.ru/blog/posts/2017/10/03/setevoe-programmirovanie-udp-ntp-chasy/" rel="alternate"></link><published>2017-10-03T00:00:00+03:00</published><updated>2017-10-03T00:00:00+03:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2017-10-03:/blog/posts/2017/10/03/setevoe-programmirovanie-udp-ntp-chasy/</id><summary type="html">&lt;blockquote&gt;
&lt;p&gt;–í –±—É–¥—É—â–µ–º —Ä–∞–¥–∏–æ –±—É–¥–µ—Ç –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–æ –≤ ¬´–±–æ–ª—å—à–æ–π –º–æ–∑–≥¬ª, –≤—Å–µ –≤–µ—â–∏ —Å—Ç–∞–Ω—É—Ç —á–∞—Å—Ç—å—é –µ–¥–∏–Ω–æ–≥–æ —Ü–µ–ª–æ–≥–æ, –∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã, –±–ª–∞–≥–æ–¥–∞—Ä—è –∫–æ—Ç–æ—Ä—ã–º —ç—Ç–æ —Å—Ç–∞–Ω–µ—Ç –≤–æ–∑–º–æ–∂–Ω—ã–º, –±—É–¥—É—Ç –ª–µ–≥–∫–æ –ø–æ–º–µ—â–∞—Ç—å—Å—è –≤ –∫–∞—Ä–º–∞–Ω–µ. ‚Äî –ù–∏–∫–æ–ª–∞ –¢–µ—Å–ª–∞&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;–¢—Ä–µ–Ω–¥ ¬´–∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –≤–µ—â–µ–π¬ª (Internet of Things, IoT) —Å–µ–π—á–∞—Å –Ω–∞–±–∏—Ä–∞–µ—Ç –≤—Å—ë –±–æ–ª—å—à—É—é –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å. –õ–µ–Ω—å ‚Äî –¥–≤–∏–≥–∞—Ç–µ–ª—å –ø—Ä–æ–≥—Ä–µ—Å—Å–∞, –∏ –∏—Å—Ö–æ–¥—è –∏–∑ —ç—Ç–æ–≥–æ –ø–æ—è–≤–ª–µ–Ω–∏–µ ¬´–∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –≤–µ—â–µ–π ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;blockquote&gt;
&lt;p&gt;–í –±—É–¥—É—â–µ–º —Ä–∞–¥–∏–æ –±—É–¥–µ—Ç –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–æ –≤ ¬´–±–æ–ª—å—à–æ–π –º–æ–∑–≥¬ª, –≤—Å–µ –≤–µ—â–∏ —Å—Ç–∞–Ω—É—Ç —á–∞—Å—Ç—å—é –µ–¥–∏–Ω–æ–≥–æ —Ü–µ–ª–æ–≥–æ, –∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã, –±–ª–∞–≥–æ–¥–∞—Ä—è –∫–æ—Ç–æ—Ä—ã–º —ç—Ç–æ —Å—Ç–∞–Ω–µ—Ç –≤–æ–∑–º–æ–∂–Ω—ã–º, –±—É–¥—É—Ç –ª–µ–≥–∫–æ –ø–æ–º–µ—â–∞—Ç—å—Å—è –≤ –∫–∞—Ä–º–∞–Ω–µ. ‚Äî –ù–∏–∫–æ–ª–∞ –¢–µ—Å–ª–∞&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;–¢—Ä–µ–Ω–¥ ¬´–∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –≤–µ—â–µ–π¬ª (Internet of Things, IoT) —Å–µ–π—á–∞—Å –Ω–∞–±–∏—Ä–∞–µ—Ç –≤—Å—ë –±–æ–ª—å—à—É—é –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å. –õ–µ–Ω—å ‚Äî –¥–≤–∏–≥–∞—Ç–µ–ª—å –ø—Ä–æ–≥—Ä–µ—Å—Å–∞, –∏ –∏—Å—Ö–æ–¥—è –∏–∑ —ç—Ç–æ–≥–æ –ø–æ—è–≤–ª–µ–Ω–∏–µ ¬´–∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –≤–µ—â–µ–π¬ª –≤–ø–æ–ª–Ω–µ –ª–æ–≥–∏—á–Ω—ã–π —ç—Ç–∞–ø —ç–≤–æ–ª—é—Ü–∏–∏  Homo sapiens. –ó–∞—á–µ–º –ø–æ–¥—Ö–æ–¥–∏—Ç—å –∫ —Ç–µ–ª–µ–≤–∏–∑–æ—Ä—É –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –∫–∞–Ω–∞–ª–æ–≤, –µ—Å–ª–∏ –º–æ–∂–Ω–æ –ø—Ä–∏–¥—É–º–∞—Ç—å –¥–∏—Å—Ç–∞–Ω—Ü–∏–æ–Ω–Ω—ã–π –ø—É–ª—å—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è, –∑–∞—á–µ–º –Ω–∞–∂–∏–º–∞—Ç—å –∫–Ω–æ–ø–æ—á–∫—É –Ω–∞ –∫–æ—Ñ–µ–≤–∞—Ä–∫–µ, –µ—Å–ª–∏ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —ç—Ç–æ –≤ —Å–º–∞—Ä—Ç—Ñ–æ–Ω–µ –∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–∞–≤–∏–ª–æ, —á—Ç–æ–±—ã –∫–æ—Ñ–µ –Ω–∞–ª–∏–≤–∞–ª—Å—è —Å–∞–º‚Ä¶ –ó–≤—É—á–∏—Ç –∑–∞–º–∞–Ω—á–∏–≤–æ, –Ω–æ –∫–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç ? –ö–∞–∫ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å –Ω–∞–¥—ë–∂–Ω—ã–π –∏ –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –æ–±–º–µ–Ω –¥–∞–Ω–Ω—ã–º–∏ ?&lt;/p&gt;
&lt;p&gt;–°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –∫–æ–Ω—Ü–µ–ø—Ü–∏—è ¬´–∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –≤–µ—â–µ–π¬ª –ø–æ–¥—Ä–∞–∑—É–º–µ–≤–∞–µ—Ç, —á—Ç–æ –≤—Å–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å –¥—Ä—É–≥–∏–º–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏ –∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏, –æ–±—Ä–∞–∑—É—è –µ–¥–∏–Ω—É—é –≤–∑–∞–∏–º–æ—Å–≤—è–∑–∞–Ω–Ω—É—é —ç–∫–æ—Å–∏—Å—Ç–µ–º—É ‚Äî —Å–µ—Ç—å. –¢—É—Ç –Ω–µ—Ç —Å–º—ã—Å–ª–∞ –∏–∑–æ–±—Ä–µ—Ç–∞—Ç—å –∑–∞–Ω–æ–≤–æ –≤–µ–ª–æ—Å–∏–ø–µ–¥, –ø–æ—Å–∫–æ–ª—å–∫—É –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏ Internet Protocol (IP, ¬´–º–µ–∂—Å–µ—Ç–µ–≤–æ–π –ø—Ä–æ—Ç–æ–∫–æ–ª¬ª) —É–∂–µ —è–≤–ª—è–µ—Ç—Å—è —Ç–µ–º –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–º, –∫–æ—Ç–æ—Ä—ã–π –æ–±—ä–µ–¥–∏–Ω–∏–ª –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω—ã–µ —Å–µ—Ç–∏ –≤–æ –≤—Å–µ–º–∏—Ä–Ω—É—é —Å–µ—Ç—å –ò–Ω—Ç–µ—Ä–Ω–µ—Ç. –° —É—á—ë—Ç–æ–º –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –æ—á–µ–Ω—å –±–æ–ª—å—à–æ–≥–æ –∏ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ —Ä–∞—Å—Ç—É—â–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö ¬´–∏–Ω—Ç–µ—Ä–Ω–µ—Ç –≤–µ—â–µ–π¬ª –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–µ—Ç–µ–π IoT –∫–∞–∫ –Ω–µ–ª—å–∑—è –ª—É—á—à–µ –ø–æ–¥—Ö–æ–¥–∏—Ç IPv6, –≤–µ–¥—å –∞–¥—Ä–µ—Å–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ —Ç—É—Ç –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –Ω–µ–∏—Å—á–µ—Ä–ø–∞–µ–º–æ–µ.&lt;/p&gt;
&lt;h2&gt;TL;DR&lt;/h2&gt;
&lt;p&gt;–ß–∞—Å–∏–∫–∏ –±–µ—Ä—É—Ç –¥–∞–Ω–Ω—ã–µ –≤—Ä–µ–º–µ–Ω–∏ –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –ø–æ NTP (Network Time Protocol ‚Äî –ø—Ä–æ—Ç–æ–∫–æ–ª —Å–µ—Ç–µ–≤–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏). –ü–æ–¥ –∫–∞–ø–æ—Ç–æ–º —á–∞—Å–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Contiki ‚Äî –∫–æ–º–ø–∞–∫—Ç–Ω–∞—è, —Å–≤–æ–±–æ–¥–Ω–∞—è, –ø–µ—Ä–µ–Ω–æ—Å–∏–º–∞—è, –º–Ω–æ–≥–æ–∑–∞–¥–∞—á–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –≤—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã—Ö —Å–∏—Å—Ç–µ–º. –ü—Ä–æ—Ü–µ—Å—Å—ã Contiki –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–±–ª–µ–≥—á—ë–Ω–Ω—É—é –ø–æ—Ç–æ–∫–æ–≤—É—é –º–æ–¥–µ–ª—å ‚Äî –ø—Ä–æ—Ç–æ–ø–æ—Ç–æ–∫–∏, –≤ –æ—Å–Ω–æ–≤–µ –∫–æ—Ç–æ—Ä—ã—Ö –ª–µ–∂–∏—Ç &lt;a href="http://proiot.ru/blog/posts/2017/02/05/picsimjs-soprogrammy-i-prosteishaia-mnogozadachnost/"&gt;–∫–æ–æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–∞—è&lt;/a&gt; –º–Ω–æ–≥–æ–∑–∞–¥–∞—á–Ω–æ—Å—Ç—å. –ì–¥–µ-—Ç–æ —Å–±–æ–∫—É –∫ Contiki –º–æ–∂–Ω–æ –ø—Ä–∏–∫—Ä—É—Ç–∏—Ç—å –µ—â—ë –∏ &lt;a href="http://proiot.ru/blog/posts/2017/04/26/freertos-operatsionnaia-sistema-dlia-mikrokontrollerov/"&gt;–≤—ã—Ç–µ—Å–Ω—è—é—â—É—é&lt;/a&gt; –º–Ω–æ–≥–æ–∑–∞–¥–∞—á–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ –Ω–µ–∫—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É
&lt;a href="https://github.com/contiki-os/contiki/wiki/Multithreading" rel="nofollow"&gt;mt library&lt;/a&gt;, –Ω–æ –Ω–∞–º —ç—Ç–æ –Ω–µ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è. –í—Å—ë –∂–µ –≥–ª–∞–≤–Ω–∞—è —Ü–µ–Ω–Ω–æ—Å—Ç—å Contiki —ç—Ç–æ –∫–æ–Ω–µ—á–Ω–æ –∂–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π TCP/IP —Å—Ç–µ–∫ &lt;strong&gt;uIP (micro IP)&lt;/strong&gt;, –∫–æ—Ç–æ—Ä—ã–π –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤ –ø–∞–º—è—Ç–∏ –∏ –≤ —á–∞—Å—Ç–Ω–æ—Å—Ç–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –≤—ã–¥–µ–ª—è–µ–º—É—é –ø–∞–º—è—Ç—å (–∫—É—á—É).&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ getm&lt;span class="o"&gt;(){&lt;/span&gt; &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="k"&gt;$((&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;x&lt;span class="sb"&gt;`&lt;/span&gt;&lt;span class="nb"&gt;printf&lt;/span&gt; c%47s&lt;span class="p"&gt;|&lt;/span&gt;nc -uw1 &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$@&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;|&lt;/span&gt;xxd -s40 -l4 -p&lt;span class="sb"&gt;`&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="m"&gt;64#23&lt;/span&gt;GDW0&lt;span class="k"&gt;))&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
~$ date -d @&lt;span class="sb"&gt;`&lt;/span&gt;getm pool.ntp.org &lt;span class="m"&gt;123&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;
~$ &lt;span class="nb"&gt;printf&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;%(%m-%d-%Y %H:%M:%S)T\n&amp;#39;&lt;/span&gt; &lt;span class="sb"&gt;`&lt;/span&gt;getm pool.ntp.org &lt;span class="m"&gt;123&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;NTP —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–≤–µ—Ä—Ö UDP (User Datagram Protocol ‚Äî –ø—Ä–æ—Ç–æ–∫–æ–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –¥–∞—Ç–∞–≥—Ä–∞–º–º). –í –∏—Å—Ö–æ–¥–Ω–∏–∫–∞—Ö –º–æ–∂–Ω–æ –≤—Å—Ç—Ä–µ—Ç–∏—Ç—å –∏ –¥—Ä—É–≥–∏–µ —É–º–Ω—ã–µ —Å–ª–æ–≤–∞ ‚Äî –Ω–∞–ø—Ä–∏–º–µ—Ä DNS (Domain Name System ‚Äî —Å–∏—Å—Ç–µ–º–∞ –¥–æ–º–µ–Ω–Ω—ã—Ö –∏–º—ë–Ω). –ü—Ä–∏–º–µ—Ä –∏–Ω—Ç–µ—Ä–µ—Å–µ–Ω —Ç–µ–º, —á—Ç–æ –≤—Å–µ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã –≤ –¥–∞–Ω–Ω—ã—Ö —á–∞—Å–∏–∫–∞—Ö –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ç–æ–ª—å–∫–æ UDP. –ö—Ç–æ —Ç–∞–∫–æ–π UDP –∏ –∑–∞—á–µ–º –æ–Ω –Ω—É–∂–µ–Ω –±—É–¥–µ—Ç –ø–æ–¥—Ä–æ–±–Ω–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–æ –Ω–∏–∂–µ, –∞ –¥–ª—è —Å–∏–º—É–ª—è—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏–º–µ—Ä–æ–≤ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å &lt;a href="https://github.com/mazko/MSP430.js/raw/master/mspsim/mspsim.js.zip"&gt;mspsim.js.jar&lt;/a&gt; –Ω—É –∏ –Ω–µ–ø–ª–æ—Ö–æ –±—ã –ø–æ—á–∏—Ç–∞—Ç—å &lt;a href="https://github.com/mazko/MSP430.js/tree/master/mspsim"&gt;–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://localhost:9148/f485071f8e042fa25252541e0e2d3724"&gt;IPv6&lt;/a&gt; | &lt;a href="http://localhost:9148/aed8a71df284252cb1c70e706dda5795"&gt;IPv4&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2017/10/03/setevoe-programmirovanie-udp-ntp-chasy/conticki-ntp-clock.zip"&gt;–∏—Å—Ö–æ–¥–Ω–∏–∫–∏&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2017/10/03/setevoe-programmirovanie-udp-ntp-chasy/ui.gif" style="width:50%; margin: 0 auto; display:block;"&gt;&lt;/p&gt;
&lt;p&gt;–ê–¥—Ä–µ—Å –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ IPv6 —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ 128 –±–∏—Ç –∏ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –æ–±—ã—á–Ω–æ –≤ —à–µ—Å—Ç–Ω–∞–¥—Ü–∞—Ç–µ—Ä–∏—á–Ω–æ–º –≤–∏–¥–µ. –ê–¥—Ä–µ—Å —Ä–∞–∑–±–∏–≤–∞—é—Ç—Å—è –Ω–∞ –±–ª–æ–∫–∏ –ø–æ 16 –±–∏—Ç (—Ö–µ–∫—Å—Ç–µ—Ç—ã) –∏ –∫–∞–∂–¥—ã–π –±–ª–æ–∫ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è —á–µ—Ç—ã—Ä—å–º—è —à–µ—Å—Ç–Ω–∞–¥—Ü–∞—Ç–µ—Ä–∏—á–Ω—ã–º–∏ —Ü–∏—Ñ—Ä–∞–º–∏. –•–µ–∫—Å—Ç–µ—Ç—ã —Ä–∞–∑–¥–µ–ª—è—é—Ç—Å—è –∑–Ω–∞–∫–æ–º –¥–≤–æ–µ—Ç–æ—á–∏—è. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –∞–¥—Ä–µ—Å –ø–æ–ª—É—á–∞–µ—Ç—Å—è –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª–∏–Ω–Ω—ã–º ‚Äì –æ–Ω —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ 32 —à–µ—Å—Ç–Ω–∞–¥—Ü–∞—Ç–µ—Ä–∏—á–Ω—ã—Ö —Ü–∏—Ñ—Ä –∏ 7 –∑–Ω–∞–∫–æ–≤ –¥–≤–æ–µ—Ç–æ—á–∏—è.&lt;/p&gt;
&lt;p&gt;–ü—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–µ—Ç–µ–≤–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –µ–º—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–∑–Ω–∞—á–∞–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω—ã–π IPv6-–∞–¥—Ä–µ—Å, —Å–æ—Å—Ç–æ—è—â–∏–π –∏–∑ –ø—Ä–µ—Ñ–∏–∫—Å–∞ &lt;code&gt;fe80::/10&lt;/code&gt; –∏ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞, —Ä–∞–∑–º–µ—â—ë–Ω–Ω–æ–≥–æ –≤ –º–ª–∞–¥—à–µ–π —á–∞—Å—Ç–∏ –∞–¥—Ä–µ—Å–∞. –í –∫–∞—á–µ—Å—Ç–≤–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π MAC-–∞–¥—Ä–µ—Å —Å–∞–º–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞. –õ–æ–∫–∞–ª—å–Ω—ã–π –∞–¥—Ä–µ—Å –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–±–º–µ–Ω–∏–≤–∞—Ç—å—Å—è –¥–∞–Ω–Ω—ã–º–∏ —Å –¥—Ä—É–≥–∏–º–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏ –ø–æ–¥ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º IPv6 —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö —Å–≤–æ–µ–π –ø–æ–¥—Å–µ—Ç–∏. IPv6 –∞–¥—Ä–µ—Å–∞ –º–æ–∂–Ω–æ –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å, –∞ –∏–Ω–æ–≥–¥–∞ –¥–∞–∂–µ –∏ –∑–∞–ø–æ–º–∏–Ω–∞—Ç—å, –≤ —Å–æ–∫—Ä–∞—â–µ–Ω–Ω–æ–º –≤–∏–¥–µ ‚Äì –Ω–∞–ø—Ä–∏–º–µ—Ä –µ—Å–ª–∏ –¥–≤–µ –∏ –±–æ–ª–µ–µ –≥—Ä—É–ø–ø –ø–æ–¥—Ä—è–¥ —Ä–∞–≤–Ω—ã 0000, —Ç–æ –æ–Ω–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –æ–ø—É—â–µ–Ω—ã –∏ –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ –¥–≤–æ–π–Ω–æ–µ –¥–≤–æ–µ—Ç–æ—á–∏–µ (::), —Ç.–µ. &lt;code&gt;fe80:0:0:0:200:e2ff:fe58:b66b&lt;/code&gt; –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–æ–∫—Ä–∞—â—ë–Ω –¥–æ &lt;code&gt;fe80::200:e2ff:fe58:b66b&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;–î–ª—è –≤—ã—Ö–æ–¥–∞ –∑–∞ –ø—Ä–µ–¥–µ–ª—ã —Å–≤–æ–µ–π –ø–æ–¥—Å–µ—Ç–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∏—Ç—å –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç, —É—Å—Ç—Ä–æ–π—Å—Ç–≤—É –Ω—É–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—ã–π –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –∞–¥—Ä–µ—Å. –í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ —ç—Ç–æ—Ç –∞–¥—Ä–µ—Å —Ä–∞–∑–¥–∞—ë—Ç—Å—è –¥–µ–º–æ–Ω–æ–º radvd –Ω—É –∏ –¥–∞–ª—å—à–µ &lt;a href="https://github.com/mazko/MSP430.js/tree/master/mspsim"&gt;RTFM&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;ENC28J60&lt;/h2&gt;
&lt;p&gt;ENC28J60 ‚Äî Ethernet-–∞–¥–∞–ø—Ç–µ—Ä (–ø—Ä–æ—â–µ –≥–æ–≤–æ—Ä—è, ¬´—Å–µ—Ç–µ–≤–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞¬ª) –Ω–∞ –æ–¥–Ω–æ–º —á–∏–ø–µ –æ—Ç –∫–æ–º–ø–∞–Ω–∏–∏ Microchip. –ú–∏–∫—Ä–æ—Å—Ö–µ–º–∞ –æ—á–µ–Ω—å –¥–µ—à–µ–≤–∞—è, –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã –º–Ω–æ–≥–æ –æ–±–≤—è–∑–∫–∏ –∏–∑ –≤–Ω–µ—à–Ω–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤, –∫ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—É (–≤ –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ —ç—Ç–æ &lt;a href="http://proiot.ru/blog/posts/2017/03/20/s-18-dlia-mikrokontrollerov-razvedka-boem/"&gt;MSP430F1611&lt;/a&gt;) –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é SPI. –ü–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ Ethernet IEEE 802.3. –í ENC28J60 –µ—Å—Ç—å –±—É—Ñ–µ—Ä —Ä–∞–∑–º–µ—Ä–æ–º 8 –ö–ë ‚Äì —á–∞—Å—Ç—å —ç—Ç–æ–≥–æ –±—É—Ñ–µ—Ä–∞ –æ–±—ã—á–Ω–æ –≤—ã–¥–µ–ª—è–µ—Ç—Å—è –¥–ª—è –ø—Ä–∏—ë–º–∞ –ø–∞–∫–µ—Ç–æ–≤, –æ—Å—Ç–∞–ª—å–Ω–æ–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–∫ —É–≥–æ–¥–Ω–æ, –Ω–∞–ø—Ä–∏–º–µ—Ä –¥–ª—è –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö. –£–ø—Ä–∞–≤–ª—è—é—â–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä—ã –¥–µ–ª—è—Ç—Å—è –Ω–∞ 4 –±–∞–Ω–∫–∞ (Microchip –ª—é–±–∏—Ç –±–∞–Ω–∫–∏). –ö–∞–∂–¥—ã–π –±–∞–Ω–∫ –∏–º–µ–µ—Ç —Ä–∞–∑–º–µ—Ä –≤ 32 —Ä–µ–≥–∏—Å—Ç—Ä–∞, –ø—Ä–∏—á—ë–º –ø–æ—Å–ª–µ–¥–Ω–∏–µ 5 —è—á–µ–µ–∫ (0x1b..0x1f) –≤—Å–µ–≥–¥–∞ –º–∞–ø—è—Ç—Å—è –Ω–∞ –æ–¥–Ω–∏ –∏ —Ç–µ –∂–µ —Ä–µ–≥–∏—Å—Ç—Ä—ã, –≤–Ω–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–æ–≥–æ, –∫–∞–∫–æ–π –±–∞–Ω–∫ –≤—ã–±—Ä–∞–Ω.&lt;/p&gt;
&lt;p&gt;–û–±–º–µ–Ω –¥–∞–Ω–Ω—ã–º–∏ —Å ENC28J60 –ø–æ SPI –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏. –ù–∞—á–∞–ª–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ ‚Äì –Ω–æ–≥–∞ CS –≤ –Ω–æ–ª—å, –∑–∞—Ç–µ–º –æ—Ç–ø—Ä–∞–≤–∫–∏ –∫–æ–º–∞–Ω–¥—ã, –∑–∞—Ç–µ–º –∏–¥—É—Ç –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–ø—Ä–∏—ë–º –∏–ª–∏ –ø–µ—Ä–µ–¥–∞—á–∞). –ó–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è ¬´–ø–æ–¥–Ω—è—Ç–∏–µ–º¬ª –Ω–æ–∂–∫–∏ CS. –ü–æ—Å–ª–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –º–∏–∫—Ä–æ—Å—Ö–µ–º—ã —Ä–∞–±–æ—Ç–∞ —Å –Ω–µ–π —Å–≤–æ–¥–∏—Ç—Å—è –∫ –¥–≤—É–º —Ñ—É–Ω–∫—Ü–∏—è–º ‚Äì –æ—Ç–ø—Ä–∞–≤–∫–∞ / –ø—Ä–∏—ë–º –ø–∞–∫–µ—Ç–æ–≤. –≠—Ç–∏ –ø–∞–∫–µ—Ç—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç TCP/IP —Å—Ç–µ–∫ –≤ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–µ.&lt;/p&gt;
&lt;h2&gt;UDP&lt;/h2&gt;
&lt;p&gt;–ó–¥–µ—Å—å –º—ã –Ω–∞–±—Ä–æ—Å–∞–µ–º –ø—Ä–æ—Å—Ç–µ–π—à–∏–π TCP/IP —Å—Ç–µ–∫ –¥–ª—è –æ–±–º–µ–Ω–∞ –¥–∞–Ω–Ω—ã–º–∏ –ø–æ UDP. –°—Ç—Ä–∞—à–Ω–æ ? –ù–∞ —Ä–∏—Å—É–Ω–∫–µ –Ω–∏–∂–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∞ —Ç.–Ω. TCP/IP —Å–µ—Ç–µ–≤–∞—è –º–æ–¥–µ–ª—å –∏ –∫–∞–∫ —á–µ—Ä–µ–∑ –Ω–µ—ë –ø—Ä–æ—Ö–æ–¥—è—Ç UDP –ø–∞–∫–µ—Ç—ã. –î–∞–Ω–Ω–∞—è –º–æ–¥–µ–ª—å —Ä–∞–∑–±–∏–≤–∞–µ—Ç –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–æ–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É –Ω–∞ –ø—Ä–æ—Å—Ç—ã–µ —á–∞—Å—Ç–∏, –Ω–∞–∑—ã–≤–∞–µ–º—ã–µ —É—Ä–æ–≤–Ω—è–º–∏ –∏–ª–∏ —Å–ª–æ—è–º–∏. –£—Ä–æ–≤–Ω–∏ –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤ TCP/IP —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω—ã –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø—É —Å—Ç–µ–∫–∞ ‚Äî —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –ø—Ä–æ—Ç–æ–∫–æ–ª, —Ä–∞—Å–ø–æ–ª–∞–≥–∞—é—â–∏–π—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ –≤—ã—à–µ, —Ä–∞–±–æ—Ç–∞–µ—Ç ¬´–ø–æ–≤–µ—Ä—Ö¬ª –Ω–∏–∂–Ω–µ–≥–æ, –∏—Å–ø–æ–ª—å–∑—É—è –º–µ—Ö–∞–Ω–∏–∑–º—ã –∏–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏–∏. –ù–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–æ—Ç–æ–∫–æ–ª UDP —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–≤–µ—Ä—Ö –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ IP. Ethernet –ø–∞–∫–µ—Ç—ã ENC28J60 –ø–æ–ø–∞–¥–∞—é—Ç –Ω–∞ –∫–∞–Ω–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å. –ü—Ä–∏ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–∏ –ø–∞–∫–µ—Ç–∞ –≤–Ω–∏–∑ –ø–æ —Å—Ç–µ–∫—É, –∫ –Ω–µ–º—É –ø—Ä–∏–∫—Ä–µ–ø–ª—è—é—Ç—Å—è –∑–∞–≥–æ–ª–æ–≤–∫–∏ –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2017/10/03/setevoe-programmirovanie-udp-ntp-chasy/UDP_encapsulation.svg" style="width:50%; margin: 0 auto; display:block;"&gt;&lt;/p&gt;
&lt;p&gt;–í —Ç–µ–æ—Ä–∏–∏ —É—Ä–æ–≤–Ω–∏ —Å–µ—Ç–µ–≤–æ–π –º–æ–¥–µ–ª–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞. –ù–æ —É –Ω–∞—Å –±—É–¥–µ—Ç –Ω–µ —Å–æ–≤—Å–µ–º —Ç–∞–∫, –≤—Å–µ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –æ–¥–Ω–∏–º –∏ —Ç–µ–º –∂–µ –ø–∞–∫–µ—Ç–æ–º, –Ω–æ –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ —Å–≤–æ–∏–º –∑–∞–≥–æ–ª–æ–≤–∫–∞–º. –≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç —Å—ç–∫–æ–Ω–æ–º–∏—Ç—å –ø–∞–º—è—Ç—å –∏ —Ç–∞–∫—Ç—ã –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞. –î–ª—è —Ç–∞–∫–æ–≥–æ –ø—Ä–æ—Å—Ç–æ–≥–æ —Å—Ç–µ–∫–∞ —ç—Ç–æ –≤–ø–æ–ª–Ω–µ –Ω–æ—Ä–º–∞–ª—å–Ω–æ.&lt;/p&gt;
&lt;p&gt;–ü–æ—Ä—è–¥–æ–∫ –±–∞–π—Ç–æ–≤ –≤ TCP/IP –æ—Ç —Å—Ç–∞—Ä—à–µ–≥–æ –∫ –º–ª–∞–¥—à–µ–º—É (big-endian ‚Äî –±–æ–ª—å—à–∏–º –∫–æ–Ω—Ü–æ–º), –¥–ª—è –ø–µ—Ä–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –Ω–æ—Ä–º–∞–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –∏ –æ–±—Ä–∞—Ç–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç &lt;code&gt;htons/ntohs&lt;/code&gt; –∏ &lt;code&gt;htonl/ntohl&lt;/code&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;htonl (host to network long) –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç 32-–±–∏—Ç–Ω–æ–µ —Ü–µ–ª–æ–µ –∏–∑ –ø–æ—Ä—è–¥–∫–∞ –±–∞–π—Ç —Ö–æ—Å—Ç–∞ –≤ —Å–µ—Ç–µ–≤–æ–π –ø–æ—Ä—è–¥–æ–∫ –±–∞–π—Ç&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ntohl (network to host long) –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç 32-–±–∏—Ç–Ω–æ–µ —Ü–µ–ª–æ–µ –∏–∑ —Å–µ—Ç–µ–≤–æ–≥–æ –ø–æ—Ä—è–¥–∫–∞ –±–∞–π—Ç –≤ –ø–æ—Ä—è–¥–æ–∫ –±–∞–π—Ç —Ö–æ—Å—Ç–∞&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;htons / ntohs —Ç–æ –∂–µ —Å–∞–º–æ–µ, —Ç–æ–ª—å–∫–æ –¥–ª—è 16-–±–∏—Ç&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;–ü—Ä–∏ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞ Ethernet –±—ã–ª–æ –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω–æ, —á—Ç–æ –∫–∞–∂–¥–∞—è —Å–µ—Ç–µ–≤–∞—è –∫–∞—Ä—Ç–∞ –¥–æ–ª–∂–Ω–∞ –∏–º–µ—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–π —à–µ—Å—Ç–∏–±–∞–π—Ç–Ω—ã–π –Ω–æ–º–µ—Ä (MAC-–∞–¥—Ä–µ—Å), ¬´–ø—Ä–æ—à–∏—Ç—ã–π¬ª –≤ –Ω–µ–π –ø—Ä–∏ –∏–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–∏. –≠—Ç–æ—Ç –Ω–æ–º–µ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è –∏ –ø–æ–ª—É—á–∞—Ç–µ–ª—è —Ñ—Ä–µ–π–º–∞. –£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å MAC-–∞–¥—Ä–µ—Å–æ–≤ –¥–æ—Å—Ç–∏–≥–∞–µ—Ç—Å—è —Ç–µ–º, —á—Ç–æ –∫–∞–∂–¥—ã–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç –µ–≥–æ –≤ –∫–∞–∫–æ–π-—Ç–æ —Ç–∞–º —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–π –∫–æ–Ω—Ç–æ—Ä–µ IEEE. –ù–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ –æ–±—ã—á–Ω–æ –∑–∞ —ç—Ç–æ –æ—Ç–≤–µ—á–∞–µ—Ç —Å–æ–≤—Å–µ–º –∫–æ–ø–µ–µ—á–Ω–∞—è –º–∏–∫—Ä–æ—Å—Ö–µ–º–∞ –ü–ó–£, –∫–æ—Ç–æ—Ä—É—é –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä —Å—á–∏—Ç—ã–≤–∞–µ—Ç –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ. –í –Ω–∞—à–µ–º —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω–æ–º TCP/IP —Å—Ç–µ–∫–µ –º—ã —Å–∞–º–∏ –ø—Ä–∏–¥—É–º–∞–µ–º MAC-–∞–¥—Ä–µ—Å –∏ –æ–Ω –±—É–¥–µ—Ç –≤ –ø—Ä–æ—à–∏–≤–∫–µ —Å–∞–º–æ–≥–æ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞. –õ–æ–∫–∞–ª—å–Ω—ã–π –∞–¥—Ä–µ—Å IPv6 —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –º–∞–∫ –∞–¥—Ä–µ—Å–∞ –ø–æ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–º—É –∞–ª–≥–æ—Ä–∏—Ç–º—É:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="n"&gt;mac_addr&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x42&lt;/span&gt; &lt;span class="p"&gt;};&lt;/span&gt;

&lt;span class="c1"&gt;// https://stackoverflow.com/a/37316533&lt;/span&gt;
&lt;span class="c1"&gt;// 02:00:00:00:00:42 =&amp;gt; fe80::0:0ff:fe00:42&lt;/span&gt;

&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="k"&gt;union&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;uint8_t&lt;/span&gt;   &lt;span class="n"&gt;u6_addr8&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;16&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
    &lt;span class="kt"&gt;uint16_t&lt;/span&gt;  &lt;span class="n"&gt;u6_addr16&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
    &lt;span class="kt"&gt;uint32_t&lt;/span&gt;  &lt;span class="n"&gt;u6_addr32&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="n"&gt;my_ip&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;u6_addr16&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="n"&gt;htons&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mh"&gt;0xfe80&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; 
    &lt;span class="n"&gt;htons&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mh"&gt;0xff&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;htons&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mh"&gt;0xfe00&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;htons&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mh"&gt;0x42&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt; 
&lt;span class="p"&gt;};&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;MAC –¥–µ–ª–∏—Ç—Å—è –Ω–∞ –¥–≤–µ —á–∞—Å—Ç–∏: OUI (–∫–æ—Ç–æ—Ä—ã–π –æ–¥–Ω–æ–∑–Ω–∞—á–Ω–æ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—è) –∏ NIC Specific (–≤—ã–±–∏—Ä–∞—é—Ç—Å—è –∏–∑–≥–æ—Ç–æ–≤–∏—Ç–µ–ª–µ–º –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞). –ü—Ä–∏ —ç—Ç–æ–º –≤ —Å–∞–º–æ–º –ø–µ—Ä–≤–æ–º –æ–∫—Ç–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —à–µ—Å—Ç—å —Å—Ç–∞—Ä—à–∏—Ö —Ä–∞–∑—Ä—è–¥–æ–≤, –∞ –¥–≤–∞ –º–ª–∞–¥—à–∏—Ö –∏–º–µ—é—Ç &lt;strong&gt;—Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ&lt;/strong&gt;. –ï—Å–ª–∏ –≤–æ—Å—å–º–æ–π –±–∏—Ç –≤—ã—Å—Ç–∞–≤–ª–µ–Ω –≤ 1 (–Ω–∞–ø—Ä–∏–º–µ—Ä 01:00:00:00:00:00), —Ç–æ –∞–¥—Ä–µ—Å multicast, –∏–Ω–∞—á–µ unicast. –ï—Å–ª–∏ —Å–µ–¥—å–º–æ–π –±–∏—Ç —Ä–∞–≤–µ–Ω –µ–¥–∏–Ω–∏—Ü–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä 02:00:00:00:00:00), —Ç–æ –∞–¥—Ä–µ—Å —è–≤–ª—è–µ—Ç—Å—è —Ç.–Ω. locally administered –∞–¥—Ä–µ—Å–æ–º, —Ç.–µ. –Ω–∞–∑–Ω–∞—á–µ–Ω –≤—Ä—É—á–Ω—É—é –∏–ª–∏ –∂–µ –µ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∂–µ–ª–µ–∑–æ/—Å–æ—Ñ—Ç, –∫–æ—Ç–æ—Ä—ã–º IEEE –Ω–µ –≤—ã–¥–µ–ª–∏–ª–∞ OUI. –ï—Å–ª–∏ –∑–∞—Ö–æ—á–µ—Ç—Å—è –ø—Ä–∏–¥—É–º—ã–≤–∞—Ç—å —Å–≤–æ–π MAC-–∞–¥—Ä–µ—Å, –ø—Ä–æ—â–µ –≤—Å–µ–≥–æ –ø—Ä–æ—Å—Ç–æ –æ–±–Ω—É–ª–∏—Ç—å –ø–µ—Ä–≤—ã–π –æ–∫—Ç–µ—Ç.&lt;/p&gt;
&lt;p&gt;–ò —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ –≤–æ—Ç —Ç–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç Ethernet-—Ñ—Ä–µ–π–º –Ω–∞ –∫–∞–Ω–∞–ª—å–Ω–æ–º —É—Ä–æ–≤–µ–Ω–µ:&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2017/10/03/setevoe-programmirovanie-udp-ntp-chasy/Ethernet_Type_II_Frame_format.svg" style="width:100%;"&gt;&lt;/p&gt;
&lt;p&gt;–ö–æ–Ω—Ç—Ä–æ–ª—å–Ω–∞—è —Å—É–º–º–∞ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è ENC28J60, —Ç–∞–∫ —á—Ç–æ –¥–ª—è –Ω–∞—Å –æ—Å—Ç–∞—é—Ç—Å—è –≤–∏–¥–∏–º—ã —Ç–æ–ª—å–∫–æ 4 –ø–æ–ª—è:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;MAC-–∞–¥—Ä–µ—Å –ø–æ–ª—É—á–∞—Ç–µ–ª—è&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;MAC-–∞–¥—Ä–µ—Å –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;–∑–¥–µ—Å—å –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø—Ä–æ—Ç–æ–∫–æ–ª–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä 0x86DD –¥–ª—è IPv6&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;–ø–æ–ª–µ –¥–∞–Ω–Ω—ã—Ö ‚Äî –ø–æ–ª–µ–∑–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä IP-–ø–∞–∫–µ—Ç, –æ–±—ã—á–Ω–æ –æ—Ç 60 –¥–æ 1500 –±–∞–π—Ç&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;–ü–∞–∫–µ—Ç—ã, —Å—á–∏—Ç—ã–≤–∞–µ–º—ã–µ —Å ENC28J60, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏–µ–π &lt;code&gt;eth_filter&lt;/code&gt;. –ü—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –æ—Ç–≤–µ—Ç–∞ –Ω–∞ Ethernet-—Ñ—Ä–µ–π–º –æ–±—ã—á–Ω–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –æ–±–º–µ–Ω—è—Ç—å –º–µ—Å—Ç–∞–º–∏ MAC-–∞–¥—Ä–µ—Å –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è –∏ –ø–æ–ª—É—á–∞—Ç–µ–ª—è. –í –∫–æ–¥–µ —ç—Ç–æ –≤—ã–≥–ª—è–¥–∏—Ç —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;typedef&lt;/span&gt; &lt;span class="k"&gt;struct&lt;/span&gt; &lt;span class="n"&gt;eth_frame&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="n"&gt;to_addr&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
    &lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="n"&gt;from_addr&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
    &lt;span class="kt"&gt;uint16_t&lt;/span&gt; &lt;span class="n"&gt;type&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;[];&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="n"&gt;eth_frame_t&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="cp"&gt;#define ETH_TYPE_IP6    htons(0x86DD)&lt;/span&gt;

&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;eth_reply&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;eth_frame_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;uint16_t&lt;/span&gt; &lt;span class="n"&gt;len&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;memcpy&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;to_addr&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;from_addr&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt; &lt;span class="n"&gt;mac_addr&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;memcpy&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;from_addr&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;mac_addr&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt; &lt;span class="n"&gt;mac_addr&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;enc28j60_send&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;len&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;eth_frame_t&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;eth_filter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;eth_frame_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;uint16_t&lt;/span&gt; &lt;span class="n"&gt;len&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;len&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;=&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;eth_frame_t&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
    &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;switch&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;type&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="nl"&gt;ETH_TYPE_IP6&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="n"&gt;ip_filter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;len&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;eth_frame_t&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
            &lt;span class="k"&gt;break&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–°—Ä–∞–∑—É –ø–æ—Å–ª–µ –≤–∫–ª—é—á–µ–Ω–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –∑–Ω–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–π MAC-–∞–¥—Ä–µ—Å, –∫–∞–∫ –æ–Ω–æ —É–∑–Ω–∞–µ—Ç MAC-–∞–¥—Ä–µ—Å –ø–æ–ª—É—á–∞—Ç–µ–ª—è ? –í IPv6 –¥–ª—è —ç—Ç–æ–≥–æ –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω –ø—Ä–æ—Ç–æ–∫–æ–ª –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è —Å–æ—Å–µ–¥–µ–π (Neighbor Discovery Protocol, NDP). –û–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —Å–µ—Ç–µ–≤–æ–º —É—Ä–æ–≤–Ω–µ TCP/IP. –í–æ—Ç –∫–∞–∫ —ç—Ç–æ –≤—ã–≥–ª—è–¥–∏—Ç –≤ Wireshark:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# sudo ip neigh flush to fe80::0:ff:fe00:42
~$ echo hello | nc -6 -u fe80::0:ff:fe00:42%mazko 12345
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ü—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –ø–µ—Ä–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ, —É –∫–∞–∫–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –≤ –ø–æ–¥—Å–µ—Ç–∏ –∞–¥—Ä–µ—Å &lt;code&gt;fe80::0:ff:fe00:42&lt;/code&gt;. –£–∑–µ–ª, –∫–æ—Ç–æ—Ä—ã–π —Ö–æ—á–µ—Ç —É–∑–Ω–∞—Ç—å MAC-–∞–¥—Ä–µ—Å –¥—Ä—É–≥–æ–≥–æ —É–∑–ª–∞, –ø–æ—Å—ã–ª–∞–µ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π ICMPv6-–∑–∞–ø—Ä–æ—Å Neighbor Solicitation (135) —Å IP-–∞–¥—Ä–µ—Å–æ–º –∏—Å–∫–æ–º–æ–≥–æ —É–∑–ª–∞ –Ω–∞ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –º—É–ª—å—Ç–∏–∫–∞—Å—Ç-–∞–¥—Ä–µ—Å. –£–∑–µ–ª, —á–µ–π IP —É–∫–∞–∑–∞–Ω –≤ –ø–∞–∫–µ—Ç–µ, –æ—Ç–≤–µ—á–∞–µ—Ç –æ–±—Ä–∞—Ç–Ω–æ ICMPv6-–ø–∞–∫–µ—Ç–æ–º ‚Äî Neighbor Advertisement (136), –≤ –∫–æ—Ç–æ—Ä–æ–º –∏ —É–∫–∞–∑—ã–≤–∞–µ—Ç —Å–≤–æ–π MAC-–∞–¥—Ä–µ—Å.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2017/10/03/setevoe-programmirovanie-udp-ntp-chasy/ndp-req.png" style="width:100%;"&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2017/10/03/setevoe-programmirovanie-udp-ntp-chasy/ndp-res.png" style="width:100%;"&gt;&lt;/p&gt;
&lt;p&gt;–ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;typedef&lt;/span&gt; &lt;span class="k"&gt;struct&lt;/span&gt; &lt;span class="n"&gt;ip_packet&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="cm"&gt;/** Version (4 bits), Traffic class (8 bits), Flow label (20 bits) */&lt;/span&gt;
    &lt;span class="kt"&gt;uint32_t&lt;/span&gt; &lt;span class="n"&gt;ver_tc_label&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="cm"&gt;/** Payload length, including any extension headers */&lt;/span&gt;
    &lt;span class="kt"&gt;uint16_t&lt;/span&gt; &lt;span class="n"&gt;payload_len&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="cm"&gt;/** Next header type */&lt;/span&gt;
    &lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="n"&gt;next_header&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="cm"&gt;/** Hop limit */&lt;/span&gt;
    &lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="n"&gt;hop_limit&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="cm"&gt;/** Source address, Destination address */&lt;/span&gt; 
    &lt;span class="k"&gt;union&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
     &lt;span class="kt"&gt;uint8_t&lt;/span&gt;   &lt;span class="n"&gt;u6_addr8&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;16&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
     &lt;span class="kt"&gt;uint16_t&lt;/span&gt;  &lt;span class="n"&gt;u6_addr16&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
     &lt;span class="kt"&gt;uint32_t&lt;/span&gt;  &lt;span class="n"&gt;u6_addr32&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="n"&gt;src&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;dest&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;[];&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="n"&gt;ip_packet_t&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="k"&gt;typedef&lt;/span&gt; &lt;span class="k"&gt;struct&lt;/span&gt; &lt;span class="n"&gt;icmp_packet&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="n"&gt;type&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="n"&gt;code&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="kt"&gt;uint16_t&lt;/span&gt; &lt;span class="n"&gt;cksum&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="kt"&gt;uint32_t&lt;/span&gt; &lt;span class="n"&gt;flags&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;[];&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="n"&gt;icmp_packet_t&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;icmp_filter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;eth_frame_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;uint16_t&lt;/span&gt; &lt;span class="n"&gt;len&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;ip_packet_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;packet&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;icmp_packet_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;icmp&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="n"&gt;packet&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="k"&gt;struct&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="n"&gt;target_address_u6_addr8&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="k"&gt;sizeof&lt;/span&gt; &lt;span class="n"&gt;my_ip&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
        &lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="n"&gt;type&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="n"&gt;length&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="n"&gt;addr&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="k"&gt;sizeof&lt;/span&gt; &lt;span class="n"&gt;mac_addr&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;option&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="n"&gt;icmp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;len&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;=&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;icmp_packet_t&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;option&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;icmp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;type&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;ICMP_TYPE_NEIGHBOR_SOLICITATION&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;icmp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;code&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;icmp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;type&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;ICMP_TYPE_NEIGHBOR_ADVERTISEMENT&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
            &lt;span class="n"&gt;icmp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;flags&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;htonl&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mh"&gt;0x60000000&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt; &lt;span class="c1"&gt;// Solicited: Set, Override: Set&lt;/span&gt;
            &lt;span class="n"&gt;icmp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;cksum&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
            &lt;span class="n"&gt;option&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;type&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="c1"&gt;// Type: Target link-layer address (2) &lt;/span&gt;
            &lt;span class="n"&gt;memcpy&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;option&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;addr&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;mac_addr&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt; &lt;span class="n"&gt;mac_addr&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
            &lt;span class="n"&gt;memcpy&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;packet&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;dest&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;packet&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;src&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt; &lt;span class="n"&gt;packet&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;src&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
            &lt;span class="n"&gt;memcpy&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;packet&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;src&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;my_ip&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt; &lt;span class="n"&gt;packet&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;src&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
            &lt;span class="n"&gt;icmp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;cksum&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;ip_cksum&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;len&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;IP_PROTOCOL_ICMP6&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; 
                &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;packet&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;src&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;len&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt; &lt;span class="n"&gt;my_ip&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;

            &lt;span class="n"&gt;eth_reply&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;len&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ip_packet_t&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="nf"&gt;toMe&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;uint32_t&lt;/span&gt; &lt;span class="n"&gt;u6_addr32&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt;
        &lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="n"&gt;memcmp&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;my_ip&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;u6_addr32&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt; &lt;span class="n"&gt;my_ip&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; 
        &lt;span class="c1"&gt;// multicast&lt;/span&gt;
        &lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;u6_addr32&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;htonl&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mh"&gt;0xff020000&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt;
        &lt;span class="n"&gt;u6_addr32&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;u6_addr32&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;htonl&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1l&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt;
        &lt;span class="n"&gt;u6_addr32&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;my_ip&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;u6_addr32&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;htonl&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mh"&gt;0xff000000&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;ip_filter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;eth_frame_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;uint16_t&lt;/span&gt; &lt;span class="n"&gt;len&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;ip_packet_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;packet&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)(&lt;/span&gt;&lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;len&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;=&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ip_packet_t&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
    &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;packet&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;ver_tc_label&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;IPV6_MASK_VER&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;IPV6_VER&lt;/span&gt; 
                &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;toMe&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;packet&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;dest&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;u6_addr32&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

            &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="kt"&gt;uint16_t&lt;/span&gt; &lt;span class="n"&gt;p_len&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;ntohs&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;packet&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;payload_len&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

            &lt;span class="k"&gt;switch&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;packet&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;next_header&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="nl"&gt;IP_PROTOCOL_ICMP6&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                &lt;span class="n"&gt;icmp_filter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;p_len&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
                &lt;span class="k"&gt;break&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
            &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="nl"&gt;IP_PROTOCOL_UDP&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                &lt;span class="n"&gt;udp_filter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;p_len&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
                &lt;span class="k"&gt;break&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
            &lt;span class="p"&gt;}&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–û—Å—Ç–∞–ª–æ—Å—å —Å–æ–≤—Å–µ–º —á—É—Ç—å —á—É—Ç—å. UDP (User Datagram Protocol) ‚Äî –ø—Ä–æ—Å—Ç–µ–π—à–∏–π –ø—Ä–æ—Ç–æ–∫–æ–ª —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è. UDP –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–∑–ª–∞–º –æ–±–º–µ–Ω–∏–≤–∞—Ç—å—Å—è –Ω–µ–±–æ–ª—å—à–∏–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏, –Ω–∞–∑—ã–≤–∞–µ–º—ã–º–∏ –¥–∞—Ç–∞–≥—Ä–∞–º–º–∞–º–∏. –ú—ã —Ä–µ–∞–ª–∏–∑—É–µ–º UDP-—Å–µ—Ä–≤–µ—Ä –Ω–∞ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–µ. –î–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã –æ–ø—É—Å–∫–∞–µ–º —Ç–µ–º—É —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏–∏ IP-–ø–∞–∫–µ—Ç–∞, —ç—Ç–æ –¥–æ–ø—É—Å—Ç–∏–º–æ –¥–ª—è –Ω–µ–±–æ–ª—å—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö. –ù–∞–ø—Ä–∏–º–µ—Ä –¥–ª—è IPv4 —á—Ç–æ–±—ã –¥–∞—Ç–∞–≥—Ä–∞–º–º–∞ —Ç–æ—á–Ω–æ –ø—Ä–æ–ª–µ–∑–ª–∞ –±–µ–∑ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏–∏ IP-–ø–∞–∫–µ—Ç–∞, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª–µ–∑–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ –Ω–µ–π –Ω–µ –¥–æ–ª–∂–Ω–æ –ø—Ä–µ–≤—ã—à–∞—Ç—å 512 –±–∞–π—Ç, –¥–ª—è IPv6 –Ω—É–∂–Ω–æ –ø–µ—Ä–µ—Å—á–∏—Ç–∞—Ç—å, –Ω–æ —á—Ç–æ-—Ç–æ –±–ª–∏–∑–∫–æ–µ –∫ —ç—Ç–æ–º—É.&lt;/p&gt;
&lt;p&gt;UDP —Å—á–∏—Ç–∞–µ—Ç—Å—è –Ω–µ–Ω–∞–¥—ë–∂–Ω—ã–º –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–º ‚Äî –ø—Ä–∏ –ø–æ—Ç–µ—Ä–µ IP-–ø–∞–∫–µ—Ç–∞, –¥–∞—Ç–∞–≥—Ä–∞–º–º–∞ —Ç–µ—Ä—è–µ—Ç—Å—è. –í–ø—Ä–æ—á–µ–º, —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–µ—Ç–∏ –≤–ø–æ–ª–Ω–µ —Å–µ–±–µ –Ω–∞–¥—ë–∂–Ω—ã ‚Äî –≤ —Ö–æ—Ä–æ—à–æ —Ä–∞–±–æ—Ç–∞—é—â–µ–π –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏ –ø–∞–∫–µ—Ç—ã –Ω–µ —Ç–µ—Ä—è—é—Ç—Å—è –ø–æ—á—Ç–∏ –Ω–∏–∫–æ–≥–¥–∞. –ù–æ, –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –∞–¥–µ–∫–≤–∞—Ç–Ω–æ —Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å, –µ—Å–ª–∏ –¥–∞—Ç–∞–≥—Ä–∞–º–º–∞ –≤—Å—ë –∂–µ –ø–æ—Ç–µ—Ä—è–µ—Ç—Å—è. –ü–æ—Ä—è–¥–æ–∫ –¥–æ—Å—Ç–∞–≤–∫–∏ –¥–∞—Ç–∞–≥—Ä–∞–º–º–∞ —Ç–∞–∫–∂–µ –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç—Å—è ‚Äî —Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏ –≤—ã –º–æ–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –¥–≤–∞ –ø–∞–∫–µ—Ç–∞ hello –∑–∞—Ç–µ–º world, –∞ –ø–æ–ª—É—á–∏—Ç—å world –∑–∞—Ç–µ–º hello.&lt;/p&gt;
&lt;p&gt;UDP –æ—Ç–ª–∏—á–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏, –Ω–µ—á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –∫ –ø–æ—Ç–µ—Ä—è–º. –°–∫–∞–∂–µ–º, —Å –ø–æ–º–æ—â—å—é UDP —É–¥–æ–±–Ω–æ –∑–∞–±–∏—Ä–∞—Ç—å –ø–æ–∫–∞–∑–∞–Ω–∏—è –∫–∞–∫–∏—Ö-–Ω–∏–±—É–¥—å –¥–∞—Ç—á–∏–∫–æ–≤ –∏–ª–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –Ω–∞ –¥–∏—Å–ø–ª–µ–π –∏–ª–∏ –¥–∞–∂–µ –≥–æ–ª–æ—Å–æ–≤–æ–π –∏–ª–∏ –≤–∏–¥–µ–æ –ø–æ—Ç–æ–∫ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;typedef&lt;/span&gt; &lt;span class="k"&gt;struct&lt;/span&gt; &lt;span class="n"&gt;udp_packet&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;uint16_t&lt;/span&gt; &lt;span class="n"&gt;from_port&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="kt"&gt;uint16_t&lt;/span&gt; &lt;span class="n"&gt;to_port&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="kt"&gt;uint16_t&lt;/span&gt; &lt;span class="n"&gt;len&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="kt"&gt;uint16_t&lt;/span&gt; &lt;span class="n"&gt;cksum&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;[];&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="n"&gt;udp_packet_t&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;udp_reply&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;eth_frame_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;uint16_t&lt;/span&gt; &lt;span class="n"&gt;len&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;ip_packet_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;ip&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)(&lt;/span&gt;&lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;udp_packet_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;udp&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)(&lt;/span&gt;&lt;span class="n"&gt;ip&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="kt"&gt;uint16_t&lt;/span&gt; &lt;span class="n"&gt;temp&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="n"&gt;len&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;udp_packet_t&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="n"&gt;temp&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;udp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;from_port&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;udp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;from_port&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;udp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;to_port&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;udp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;to_port&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;temp&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="n"&gt;udp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;len&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;htons&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;len&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;ip&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;payload_len&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;udp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;len&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="n"&gt;udp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;cksum&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;udp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;cksum&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;ip_cksum&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;len&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;IP_PROTOCOL_UDP&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; 
        &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;ip&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;src&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;len&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt; &lt;span class="n"&gt;my_ip&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;

    &lt;span class="n"&gt;memcpy&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;ip&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;dest&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;ip&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;src&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt; &lt;span class="n"&gt;ip&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;src&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;memcpy&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;ip&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;src&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;my_ip&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt; &lt;span class="n"&gt;ip&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;src&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;eth_reply&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;len&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ip_packet_t&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;udp_filter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;eth_frame_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;uint16_t&lt;/span&gt; &lt;span class="n"&gt;len&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="n"&gt;ip_packet_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;ip&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)(&lt;/span&gt;&lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="n"&gt;udp_packet_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;udp&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)(&lt;/span&gt;&lt;span class="n"&gt;ip&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;len&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;=&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;udp_packet_t&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
    &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="kt"&gt;uint16_t&lt;/span&gt; &lt;span class="n"&gt;udp_len&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;ntohs&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;udp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;len&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;udp_packet_t&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;udp_packet&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;udp_len&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ß—Ç–æ–±—ã –ø—Ä–∏–¥–∞—Ç—å –≤—Å–µ–º—É —ç—Ç–æ–º—É —Å–º—ã—Å–ª, –Ω–∞–ø–∏—à–µ–º –ø—Ä–æ—Å—Ç–µ–Ω—å–∫–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, —Ä–∞–±–æ—Ç–∞—é—â–µ–µ –ø–æ UDP. –ù–∞–ø—Ä–∏–º–µ—Ä, –ø–µ—á–∞—Ç–∞–µ–º —Ç–µ–∫—Å—Ç –Ω–∞ –¥–∏—Å–ø–ª–µ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ —Å –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–º.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;udp_packet&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;eth_frame_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;uint16_t&lt;/span&gt; &lt;span class="n"&gt;len&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;ip_packet_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;ip&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)(&lt;/span&gt;&lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;udp_packet_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;udp&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)(&lt;/span&gt;&lt;span class="n"&gt;ip&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;udp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="kt"&gt;uint16_t&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;len&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;putchar&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;]);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="n"&gt;draw_clr&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
    &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;len&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;draw_str&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;char&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="kt"&gt;char&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;response&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;!!! OK !!!&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;strcpy&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="kt"&gt;char&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;response&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;udp_reply&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;strlen&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;response&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;lan_poll&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;uint16_t&lt;/span&gt; &lt;span class="n"&gt;len&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;eth_frame_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;frame&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="n"&gt;net_buf&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="k"&gt;while&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="n"&gt;len&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;enc28j60_read&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;net_buf&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;net_buf&lt;/span&gt;&lt;span class="p"&gt;))))&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;eth_filter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;len&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;bsp_init&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
    &lt;span class="n"&gt;uart0_init&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
    &lt;span class="n"&gt;lan_init&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
    &lt;span class="n"&gt;draw_init&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;

    &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Start polling...&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;while&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;lan_poll&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;

    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;a href="http://localhost:9148/a491c24964bb014608f8180d354c4198"&gt;IPv6&lt;/a&gt; | &lt;a href="http://localhost:9148/a72c1a945faa90413fb72520f60006f8"&gt;IPv4&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2017/10/03/setevoe-programmirovanie-udp-ntp-chasy/eth_udp.zip"&gt;–∏—Å—Ö–æ–¥–Ω–∏–∫–∏&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2017/10/03/setevoe-programmirovanie-udp-ntp-chasy/welome.png" style="width:50%; margin: 0 auto; display:block;"&gt;&lt;/p&gt;
&lt;p&gt;–ß—Ç–æ–±—ã –≤—ã–≤–µ—Å—Ç–∏ –¥–∞–Ω–Ω—ã–µ –≤ –¥–∏—Å–ø–ª–µ–π, –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–µ–≤–∞–π—Å—É UDP-–ø–∞–∫–µ—Ç –Ω–∞ –ª—é–±–æ–π –ø–æ—Ä—Ç, netcat ‚Äî —É–¥–æ–±–Ω–∞—è —É—Ç–∏–ª–∏—Ç–∫–∞, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –∏ –ø—Ä–∏–Ω–∏–º–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ —Å–µ—Ç–∏:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ cat &amp;lt;(echo IoT) - | nc -6 -u fe80::0:ff:fe00:42%mazko 12345
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–í —Ä–µ–∞–ª—å–Ω–æ–º –º–∏—Ä–µ –Ω–∞ –æ–¥–Ω–æ–º –∞–¥—Ä–µ—Å–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –º–Ω–æ–≥–æ UDP –ø–æ—Ä—Ç–æ–≤, –≥–¥–µ –∫–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Å–≤–æ—é –ª–æ–≥–∏–∫—É. –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Ä—Ç–æ–≤ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–æ —Å —É—á—ë—Ç–æ–º 16-–±–∏—Ç–Ω–æ–π –∞–¥—Ä–µ—Å–∞—Ü–∏–∏ —Ç.–µ. 65536. –í—Å–µ –ø–æ—Ä—Ç—ã —Ä–∞–∑–¥–µ–ª–µ–Ω—ã –Ω–∞ —Ç—Ä–∏ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ ‚Äî –æ–±—â–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–µ (–∏–ª–∏ —Å–∏—Å—Ç–µ–º–Ω—ã–µ, 0..1023), –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ (–∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ, 1024..49151) –∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ (–∏–ª–∏ —á–∞—Å—Ç–Ω—ã–µ, 49152..65535). –ù–∞–ø—Ä–∏–º–µ—Ä —Ä–∞–Ω–µ–µ —É–ø–æ–º—è–Ω—É—Ç—ã–π NTP –ø—Ä–æ—Ç–æ–∫–æ–ª –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ—Ä—Ç 123 (UDP), DNS –ø–æ—Ä—Ç 53 –∏ —Ç.–¥.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2017/10/09/setevoe-programmirovanie-tcp-http-server/"&gt;–î–∞–ª–µ–µ&lt;/a&gt; TCP.&lt;/p&gt;</content><category term="contiki"></category><category term="IPv6"></category><category term="msp430"></category></entry><entry><title>–°++ –¥–ª—è –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤ - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é</title><link href="http://proiot.ru/blog/posts/2017/06/22/s-dlia-mikrokontrollerov-upravlenie-pamiatiu/" rel="alternate"></link><published>2017-06-22T00:00:00+03:00</published><updated>2017-06-22T00:00:00+03:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2017-06-22:/blog/posts/2017/06/22/s-dlia-mikrokontrollerov-upravlenie-pamiatiu/</id><summary type="html">&lt;p&gt;–ö–∞–∫ –∏–∑–≤–µ—Å—Ç–Ω–æ, –≤ —è–∑—ã–∫–µ –°–∏ –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –≤—ã–¥–µ–ª–µ–Ω–∏—è –∏ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è –ø–∞–º—è—Ç–∏ –Ω–∞ –∫—É—á–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏–∏ &lt;code&gt;malloc()&lt;/code&gt; –∏ &lt;code&gt;free()&lt;/code&gt;. –í –°++ –¥–ª—è —ç—Ç–∏—Ö —Ü–µ–ª–µ–π –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω—ã –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã &lt;code&gt;new&lt;/code&gt; –∏ &lt;code&gt;delete&lt;/code&gt;. –ö–æ–≥–¥–∞ –æ–ø–µ—Ä–∞—Ç–æ—Ä &lt;code&gt;new&lt;/code&gt; –Ω–µ –º–æ–∂–µ—Ç —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏—Ç—å –∑–∞–ø—Ä–æ—Å –Ω–∞ –≤—ã–¥–µ–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏, –æ–Ω –≤–æ–∑–±—É–∂–¥–∞–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ &lt;code&gt;std::bad_alloc&lt;/code&gt;, —Å–∏–≥–Ω–∞–ª–∏–∑–∏—Ä—É—è —Ç–µ–º —Å–∞–º—ã–º –æ–± –æ—à–∏–±–∫–µ. –í &lt;a href="http://proiot.ru/blog/posts/2017/03/20/s-18-dlia-mikrokontrollerov-razvedka-boem/"&gt;C ‚Ä¶&lt;/a&gt;&lt;/p&gt;</summary><content type="html">&lt;p&gt;–ö–∞–∫ –∏–∑–≤–µ—Å—Ç–Ω–æ, –≤ —è–∑—ã–∫–µ –°–∏ –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –≤—ã–¥–µ–ª–µ–Ω–∏—è –∏ –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è –ø–∞–º—è—Ç–∏ –Ω–∞ –∫—É—á–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏–∏ &lt;code&gt;malloc()&lt;/code&gt; –∏ &lt;code&gt;free()&lt;/code&gt;. –í –°++ –¥–ª—è —ç—Ç–∏—Ö —Ü–µ–ª–µ–π –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω—ã –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã &lt;code&gt;new&lt;/code&gt; –∏ &lt;code&gt;delete&lt;/code&gt;. –ö–æ–≥–¥–∞ –æ–ø–µ—Ä–∞—Ç–æ—Ä &lt;code&gt;new&lt;/code&gt; –Ω–µ –º–æ–∂–µ—Ç —É–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏—Ç—å –∑–∞–ø—Ä–æ—Å –Ω–∞ –≤—ã–¥–µ–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏, –æ–Ω –≤–æ–∑–±—É–∂–¥–∞–µ—Ç –∏—Å–∫–ª—é—á–µ–Ω–∏–µ &lt;code&gt;std::bad_alloc&lt;/code&gt;, —Å–∏–≥–Ω–∞–ª–∏–∑–∏—Ä—É—è —Ç–µ–º —Å–∞–º—ã–º –æ–± –æ—à–∏–±–∫–µ. –í &lt;a href="http://proiot.ru/blog/posts/2017/03/20/s-18-dlia-mikrokontrollerov-razvedka-boem/"&gt;C++ –¥–ª—è –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤&lt;/a&gt; –º–µ—Ö–∞–Ω–∏–∑–º –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–π –æ–±—ã—á–Ω–æ –æ—Ç–∫–ª—é—á—ë–Ω –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ —Ä–µ—Å—É—Ä—Å–æ–≤, –æ–¥–Ω–∞–∫–æ —Å–æ–≥–ª–∞—Å–Ω–æ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ –°++, –ø—Ä–µ–∂–¥–µ —á–µ–º –≤–æ–∑–±—É–¥–∏—Ç—å –∏—Å–∫–ª—é—á–µ–Ω–∏–µ &lt;code&gt;std::bad_alloc&lt;/code&gt;, –æ–ø–µ—Ä–∞—Ç–æ—Ä &lt;code&gt;new&lt;/code&gt; –≤—ã–∑—ã–≤–∞–µ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é-–æ–±—Ä–∞–±–æ—Ç—á–∏–∫. –≠—Ç—É —Ñ—É–Ω–∫—Ü–∏—é –º–æ–∂–Ω–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è—Ç—å &lt;code&gt;std::set_new_handler&lt;/code&gt;, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ö–æ—Ç—å –∫–∞–∫-—Ç–æ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å / —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫–∏ –≤—ã–¥–µ–ª–µ–Ω–∏—è –ø–∞–º—è—Ç–∏ –Ω–∞ –∫—É—á–µ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º—ã. –ù–æ —ç—Ç–æ —Ç–æ–ª—å–∫–æ –≤–µ—Ä—Ö—É—à–∫–∞ –∞–π—Å–±–µ—Ä–≥–∞, –∞ –Ω–∏–∂–µ –æ–ø–∏—Å–∞–Ω—ã –±–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–µ –∏ –Ω–∞–¥—ë–∂–Ω—ã–µ –ø—Ä–∏—ë–º—ã. –ß—Ç–æ–±—ã –±—ã–ª–æ –Ω–µ—Å–∫—É—á–Ω–æ, –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞ –≤–∑—è—Ç–∞ –∏–≥—Ä–∞ ¬´–ó–º–µ–π–∫–∞¬ª.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://mazko.github.io/MSP430.js/efadb63e855ca5799cc873ca38ebc2ad"&gt;MSP430.js&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2017/06/22/s-dlia-mikrokontrollerov-upravlenie-pamiatiu/snake-qv-msp430-js.zip"&gt;–∏—Å—Ö–æ–¥–Ω–∏–∫–∏&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2017/06/22/s-dlia-mikrokontrollerov-upravlenie-pamiatiu/ui.gif" style="width:55%; margin: 0 auto; display:block;"&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;–æ–ø–µ—Ä–∞—Ç–æ—Ä—ã &lt;code&gt;new&lt;/code&gt; –∏ &lt;code&gt;delete&lt;/code&gt; –≤ –°++ –º–æ–∂–Ω–æ –ø–µ—Ä–µ–≥—Ä—É–∂–∞—Ç—å, –∞ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤ –º–æ–∂–µ—Ç –æ–∫–∞–∑–∞—Ç—å—Å—è –≤–µ—Å—å–º–∞ –ø–æ–ª–µ–∑–Ω—ã–º –≤–æ–æ–±—â–µ —Å–ª–æ–º–∞—Ç—å –∫–æ–º–ø–∏–ª—è—Ü–∏—é –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –≤—ã–¥–µ–ª–µ–Ω–∏—è –ø–∞–º—è—Ç–∏ –Ω–∞ –∫—É—á–µ &lt;a href="http://proiot.ru/blog/posts/2017/06/22/s-dlia-mikrokontrollerov-upravlenie-pamiatiu/no-new.h"&gt;no-new.h&lt;/a&gt;. –î–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏–ª–∞ –≤–æ –≤—Å–µ—Ö –∏—Å—Ö–æ–¥–Ω—ã—Ö —Ñ–∞–π–ª–∞—Ö –ø—Ä–æ–µ–∫—Ç–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ gcc –ø–æ–¥–æ–±–Ω—ã—Ö –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞—Ö –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–æ—Å—Ç–æ —É–∫–∞–∑–∞—Ç—å –≤ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ –æ–ø—Ü–∏—é &lt;code&gt;-include no-new.h&lt;/code&gt;, –≤ —Å–ª—É—á–∞–µ —Å–æ ¬´–ó–º–µ–π–∫–æ–π¬ª –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è IDE &lt;a href="http://www.ti.com/tool/ccstudio-msp" rel="nofollow"&gt;Code Composer Studio&lt;/a&gt;, —Ç–∞–º –µ—Å—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ &lt;em&gt;--preinclude&lt;/em&gt;. –ß—Ç–æ –∫–∞—Å–∞–µ—Ç—Å—è –Ω–∞—Å–ª–µ–¥–∏—è –°–∏ ‚Äî —Ñ—É–Ω–∫—Ü–∏–π –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –≤—ã–¥–µ–ª–µ–Ω–∏—è –ø–∞–º—è—Ç–∏ &lt;code&gt;malloc&lt;/code&gt;, &lt;code&gt;calloc&lt;/code&gt;, &lt;code&gt;realloc&lt;/code&gt; ‚Äî —Ç–æ –∫—Ä–∞—Å–∏–≤–æ –æ—Ç—Ü–µ–ø–∏—Ç—å –∏—Ö —É–≤—ã –Ω–µ –ø–æ–ª—É—á–∏—Ç—Å—è. –£ gcc –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–æ–≤ –µ—Å—Ç—å –≤–æ–ª—à–µ–±–Ω—ã–π —Ñ–ª–∞–≥ –∫–æ–º–ø–æ–Ω–æ–≤—â–∏–∫–∞ &lt;code&gt;-Wl,--wrap=malloc&lt;/code&gt;, –∫–æ—Ç–æ—Ä—ã–π –¥–∞—ë—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å—Ç–∞–≤–∏—Ç—å –æ–±—ë—Ä—Ç–∫–∏ –Ω–∞ —Ñ—É–Ω–∫—Ü–∏–∏. –ö–∞–∫ —ç—Ç–æ —Å–¥–µ–ª–∞—Ç—å –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ –ø–æ–∫–∞–∂—É —á—É—Ç—å &lt;a href="http://proiot.ru/blog/posts/2018/03/18/s-dlia-mikrokontrollerov-nabliudatel/"&gt;–ø–æ–∑–∂–µ&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;¬´–ó–º–µ–π–∫–∞¬ª –∫—É—à–∞–µ—Ç –∏ —Ä–∞—Å—Ç—ë—Ç, —Ç.–µ. –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –∏–∑ —Å–µ–±—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –º–∞—Å—Å–∏–≤. –î–ª—è STL –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –≤ –°++ –º–æ–∂–Ω–æ –∑–∞–¥–∞–≤–∞—Ç—å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –∞–ª–ª–æ–∫–∞—Ç–æ—Ä—ã –ø–∞–º—è—Ç–∏. –í –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å–ª—É—á–∞–µ–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –∑–Ω–∞–µ—Ç, —Å–∫–æ–ª—å–∫–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –¥–ª—è –µ–≥–æ –∞–ª–≥–æ—Ä–∏—Ç–º–∞ –∏ —Ç–æ–≥–¥–∞ —Ö–æ—Ä–æ—à–µ–π –∏–¥–µ–µ–π –≤—ã–≥–ª—è–¥–∏—Ç –∞–ª–ª–æ–∫–∞—Ç–æ—Ä, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–π —Å—Ç–µ–∫ –≤–º–µ—Å—Ç–æ –∫—É—á–∏. –î–ª—è –¥—Ä–µ–≤–Ω–µ–≥–æ C++98 –Ω–∞–π—Ç–∏ —Ä–∞–±–æ—á–∏–π –∞–ª–ª–æ–∫–∞—Ç–æ—Ä –∑–∞—Ç—Ä—É–¥–Ω–∏—Ç–µ–ª—å–Ω–æ, –ø–æ—ç—Ç–æ–º—É –¥–ª—è –∏–≥—Ä—ã ¬´–ó–º–µ–π–∫–∞¬ª –±—ã–ª –≤–∑—è—Ç —ç—Ç–æ—Ç &lt;a href="https://github.com/esrlabs/estl-teaser" rel="nofollow"&gt;–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä&lt;/a&gt;, —Ç–∞–∫–∂–µ –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–π —Å—Ç–µ–∫ –≤–º–µ—Å—Ç–æ –∫—É—á–∏ &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;—Å—É—â–µ—Å—Ç–≤—É–µ—Ç –æ—Å–æ–±–∞—è —Ñ–æ—Ä–º–∞ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ &lt;code&gt;new&lt;/code&gt;, –Ω–∞–∑—ã–≤–∞–µ–º–∞—è &lt;em&gt;Placement new&lt;/em&gt;. –î–∞–Ω–Ω—ã–π –æ–ø–µ—Ä–∞—Ç–æ—Ä –Ω–µ –≤—ã–¥–µ–ª—è–µ—Ç –ø–∞–º—è—Ç—å, –∞ –ø–æ–ª—É—á–∞–µ—Ç —Å–≤–æ–∏–º –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º –∞–¥—Ä–µ—Å –Ω–∞ —É–∂–µ –≤—ã–¥–µ–ª–µ–Ω–Ω—É—é –∫–∞–∫–∏–º-–ª–∏–±–æ –æ–±—Ä–∞–∑–æ–º –ø–∞–º—è—Ç—å. –ù–∞–ø—Ä–∏–º–µ—Ä –ø–∞–º—è—Ç—å –ø–æ–¥ –æ–±—ä–µ–∫—Ç ¬´–ó–º–µ–π–∫–∞¬ª –≤—ã–¥–µ–ª—è–µ—Ç—Å—è –≤ —Å—Ç–µ–∫–µ –Ω–∞ —ç—Ç–∞–ø–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏, –∞  —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ (–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è) –æ–±—ä–µ–∫—Ç–∞ –≤ –Ω–µ–π –ø—É—Ç—ë–º –≤—ã–∑–æ–≤–∞ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º—ã, —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –º–æ–∂–Ω–æ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–≤–∞—Ç—å ¬´–ó–º–µ–π–∫—É¬ª –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ –∏–≥—Ä—ã&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;–ü–æ–¥ –∫–∞–ø–æ—Ç–æ–º ¬´–ó–º–µ–π–∫–∏¬ª &lt;a href="http://proiot.ru/blog/posts/2017/05/25/zhizn-posle-rtos-model-aktorov-qpc-uml/"&gt;QP/C++&lt;/a&gt; –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—â–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π UML:&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2017/06/22/s-dlia-mikrokontrollerov-upravlenie-pamiatiu/SMofSnakeAO.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–ù–∞ –∫–∞—Ä—Ç–∏–Ω–∫–µ –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–π –∫–æ–Ω–µ—á–Ω—ã–π –∞–≤—Ç–æ–º–∞—Ç &lt;em&gt;Play&lt;/em&gt; –≥–¥–µ –æ—Ç—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã –¥–ª—è –¥–≤–∏–∂–µ–Ω–∏—è ¬´–ó–º–µ–π–∫–∏¬ª –∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –Ω–∞–∂–∞—Ç–∏–µ –æ—Ç –∫–Ω–æ–ø–æ–∫. –ï—Å–ª–∏ –º–µ—Ç–æ–¥ &lt;code&gt;eat_or_move()&lt;/code&gt; –≤–µ—Ä–Ω—ë—Ç &lt;code&gt;false&lt;/code&gt; –ø–µ—Ä–µ—Ö–æ–¥ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ &lt;em&gt;GameOver&lt;/em&gt; –≥–¥–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–∞–±—Ä–∞–Ω–Ω—ã—Ö –æ—á–∫–æ–≤. –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –ª—é–±–æ–π –∫–Ω–æ–ø–∫–∏ —Å–Ω–æ–≤–∞ &lt;em&gt;Play&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;¬´–ó–º–µ–π–∫–∞¬ª –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –∏–∑ —Å–µ–±—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –º–∞—Å—Å–∏–≤ —Å–µ–≥–º–µ–Ω—Ç–æ–≤ (–∫–≤–∞–¥—Ä–∞—Ç–∏–∫–æ–≤), –¥–ª—è –µ—ë –ø–µ—Ä–µ–¥–≤–∏–∂–µ–Ω–∏—è –≤ –∑–∞–¥–∞–Ω–Ω–æ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Å–µ–≥–º–µ–Ω—Ç –≥–æ–ª–æ–≤—ã –≤ –æ–¥–∏–Ω –∫–æ–Ω–µ—Ü –º–∞—Å—Å–∏–≤–∞ –∏ —É–¥–∞–ª–∏—Ç—å —Å–µ–≥–º–µ–Ω—Ç —Ö–≤–æ—Å—Ç–∞ ‚Äî –ø–æ—Å–ª–µ–¥–Ω–∏–π —ç–ª–µ–º–µ–Ω—Ç —Å –¥—Ä—É–≥–æ–≥–æ –∫–æ–Ω—Ü–∞. –ù–∞ —ç–∫—Ä–∞–Ω–µ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –æ—á–∏—Å—Ç–∏—Ç—å —Ö–≤–æ—Å—Ç –∏ –¥–æ—Ä–∏—Å–æ–≤–∞—Ç—å –≥–æ–ª–æ–≤—É. –ü—Ä–∏ –ø–æ–µ–¥–∞–Ω–∏–∏ –ø–∏—â–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è —Å–µ–≥–º–µ–Ω—Ç –≥–æ–ª–æ–≤—ã, –∞ —Å–µ–≥–º–µ–Ω—Ç —Ö–≤–æ—Å—Ç–∞ –Ω–µ —É–¥–∞–ª—è–µ—Ç—Å—è.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2018/03/18/s-dlia-mikrokontrollerov-nabliudatel/"&gt;–î–∞–ª–µ–µ&lt;/a&gt; –ø–∞—Ç—Ç–µ—Ä–Ω ¬´–ù–∞–±–ª—é–¥–∞—Ç–µ–ª—å¬ª.&lt;/p&gt;</content><category term="msp430"></category><category term="QP"></category><category term="UML"></category></entry><entry><title>–ñ–∏–∑–Ω—å –ø–æ—Å–ª–µ RTOS - –º–æ–¥–µ–ª—å –∞–∫—Ç–æ—Ä–æ–≤ QP/C++ | UML</title><link href="http://proiot.ru/blog/posts/2017/05/25/zhizn-posle-rtos-model-aktorov-qpc-uml/" rel="alternate"></link><published>2017-05-25T00:00:00+03:00</published><updated>2017-05-25T00:00:00+03:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2017-05-25:/blog/posts/2017/05/25/zhizn-posle-rtos-model-aktorov-qpc-uml/</id><summary type="html">&lt;blockquote&gt;
&lt;p&gt;–ö–æ–º–ø—å—é—Ç–µ—Ä ‚Äî —ç—Ç–æ –∫–æ–Ω–µ—á–Ω—ã–π –∞–≤—Ç–æ–º–∞—Ç. –ü–æ—Ç–æ–∫–æ–≤–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω—É–∂–Ω–æ —Ç–µ–º, –∫—Ç–æ –Ω–µ —É–º–µ–µ—Ç –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω–µ—á–Ω—ã–µ –∞–≤—Ç–æ–º–∞—Ç—ã. ‚Äî –ê–ª–∞–Ω –ö–æ–∫—Å &lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;a href="https://www.state-machine.com/" rel="nofollow"&gt;Quantum Platform&lt;/a&gt; (QP) ‚Äî —ç—Ç–æ —Å–µ–º–µ–π—Å—Ç–≤–æ –ø—Ä–æ–≥—Ä–∞–º–º–Ω—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –≤—Å—Ç—Ä–∞–∏–≤–∞–µ–º–æ–≥–æ –ü–û, –≤ —Ç–æ–º —á–∏—Å–ª–µ –∏ –¥–ª—è –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤. QP –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –∫–∞–∫ –Ω–∞ &lt;a href="http://proiot.ru/blog/posts/2017/03/20/s-18-dlia-mikrokontrollerov-razvedka-boem/"&gt;¬´–ø–ª—é—Å–∞—Ö¬ª&lt;/a&gt; (QP/C++), —Ç–∞–∫ –∏ –Ω–∞ –°–∏ (QP/C –∏ QP-nano), —á—Ç–æ ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;blockquote&gt;
&lt;p&gt;–ö–æ–º–ø—å—é—Ç–µ—Ä ‚Äî —ç—Ç–æ –∫–æ–Ω–µ—á–Ω—ã–π –∞–≤—Ç–æ–º–∞—Ç. –ü–æ—Ç–æ–∫–æ–≤–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω—É–∂–Ω–æ —Ç–µ–º, –∫—Ç–æ –Ω–µ —É–º–µ–µ—Ç –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω–µ—á–Ω—ã–µ –∞–≤—Ç–æ–º–∞—Ç—ã. ‚Äî –ê–ª–∞–Ω –ö–æ–∫—Å &lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;a href="https://www.state-machine.com/" rel="nofollow"&gt;Quantum Platform&lt;/a&gt; (QP) ‚Äî —ç—Ç–æ —Å–µ–º–µ–π—Å—Ç–≤–æ –ø—Ä–æ–≥—Ä–∞–º–º–Ω—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –≤—Å—Ç—Ä–∞–∏–≤–∞–µ–º–æ–≥–æ –ü–û, –≤ —Ç–æ–º —á–∏—Å–ª–µ –∏ –¥–ª—è –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤. QP –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –∫–∞–∫ –Ω–∞ &lt;a href="http://proiot.ru/blog/posts/2017/03/20/s-18-dlia-mikrokontrollerov-razvedka-boem/"&gt;¬´–ø–ª—é—Å–∞—Ö¬ª&lt;/a&gt; (QP/C++), —Ç–∞–∫ –∏ –Ω–∞ –°–∏ (QP/C –∏ QP-nano), —á—Ç–æ –¥–∞—ë—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–ª—è —à–∏—Ä–æ–∫–æ–≥–æ —Å–ø–µ–∫—Ç—Ä–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä –∏ —Ü–µ–ª–µ–≤—ã—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º. –í–æ –º–Ω–æ–≥–∏—Ö —Å–ª—É—á–∞—è—Ö QP –º–æ–∂–µ—Ç —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å—Å—è –∫–∞–∫ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ –¥–ª—è &lt;a href="http://proiot.ru/blog/posts/2017/04/26/freertos-operatsionnaia-sistema-dlia-mikrokontrollerov/"&gt;RT(OS)&lt;/a&gt;, —Ö–æ—Ç—è —Ç–∞–∫–∂–µ –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –∏ –ø–æ–≤–µ—Ä—Ö —É–∂–µ –∏–º–µ—é—â–µ–π—Å—è –ø—Ä–∞–≤–æ—Å–ª–∞–≤–Ω–æ–π –û–°.&lt;/p&gt;
&lt;p&gt;–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ QP —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –∞–∫—Ç–∏–≤–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ (–∞–∫—Ç–æ—Ä–æ–≤) —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ —Å–æ–≤–º–µ—Å—Ç–∏—Ç–µ–ª—å—Å—Ç–≤—É –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç –∏–∑ —Å–µ–±—è –∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–µ &lt;a href="http://proiot.ru/blog/posts/2012/10/09/avtomat-s-konechnym-chislom-sostoianii/"&gt;–∫–æ–Ω–µ—á–Ω—ã–µ –∞–≤—Ç–æ–º–∞—Ç—ã&lt;/a&gt;. –Ø–¥—Ä–æ QP, –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏, –ø–æ–∑–≤–æ–ª—è–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã–º –æ–±—ä–µ–∫—Ç–∞–º —Ä–∞–±–æ—Ç–∞—Ç—å –ª–∏–±–æ &lt;a href="http://proiot.ru/blog/posts/2017/02/05/picsimjs-soprogrammy-i-prosteishaia-mnogozadachnost/"&gt;–∫–æ–æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ&lt;/a&gt; QV (Vanilla), –ª–∏–±–æ –∫–∞–∂–¥—ã–π –≤ —Å–≤–æ–µ–π –Ω–∏—Ç–∏ QK. –ê–∫—Ç–∏–≤–Ω—ã–π –æ–±—ä–µ–∫—Ç ‚Äî ¬´–ª–µ–Ω—Ç—è–π¬ª, –æ–Ω —Å–∞–º –ø–æ —Å–µ–±–µ –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞–µ—Ç –∫—Ä–æ–º–µ –∫–∞–∫ –æ–∂–∏–¥–∞–µ—Ç &lt;span style="text-decoration:line-through"&gt;–ø–∏–Ω–∫–∞&lt;/span&gt; –∏–Ω—Ç–µ—Ä–µ—Å—É—é—â–∏–µ –µ–≥–æ —Å–æ–±—ã—Ç–∏—è –∏ —Ä–µ–∞–≥–∏—Ä—É–µ—Ç –Ω–∞ –Ω–∏—Ö ‚Äî –Ω–∞–ø—Ä–∏–º–µ—Ä –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç —á–µ–≥–æ-–Ω–∏–±—É–¥—å –≤ –ø–æ—Ä—Ç, –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ –Ω–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–ª–∏ –¥–∞–∂–µ &lt;em&gt;–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ&lt;/em&gt; –æ—Ç—Å—ã–ª–∞–µ—Ç –∫–æ–Ω–µ—á–Ω–æ–µ —á–∏—Å–ª–æ —Å–æ–æ–±—â–µ–Ω–∏–π (—Å–∏–≥–Ω–∞–ª–æ–≤) –¥—Ä—É–≥–∏–º –∞–∫—Ç–∏–≤–Ω—ã–º –æ–±—ä–µ–∫—Ç–∞–º, –ø–æ—Å–ª–µ —á–µ–≥–æ —Å–Ω–æ–≤–∞ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ —Ä–µ–∂–∏–º –æ–∂–∏–¥–∞–Ω–∏—è. –î–ª–∏—Ç–µ–ª—å–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ —Å–æ–±—ã—Ç–∏—è –∫–∞–∫ –ø—Ä–∞–≤–∏–ª–æ —è–≤–ª—è–µ—Ç—Å—è –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º—ã–º, –ø–æ—Å–∫–æ–ª—å–∫—É –ø—Ä–∏ —ç—Ç–æ–º —Å–∞–º –∞–∫—Ç–∏–≤–Ω—ã–π –æ–±—ä–µ–∫—Ç (–∏–ª–∏ –≤–æ–æ–±—â–µ –≤—Å—ë –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ —Å–ª—É—á–∞–µ —Å –∫–æ–æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–≥–æ —è–¥—Ä–∞) –Ω–µ –º–æ–∂–µ—Ç —Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –¥—Ä—É–≥–∏–µ —Å–æ–±—ã—Ç–∏—è –∏ –æ—á–µ–≤–∏–¥–Ω–æ, —á—Ç–æ —Ç–∞–∫–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—Ç –∫–æ–Ω—Ü–µ–ø—Ü–∏–∏ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏. –ê –Ω–∏–∫—Ç–æ –∏ –Ω–µ –≥–æ–≤–æ—Ä–∏–ª, —á—Ç–æ –±—É–¥–µ—Ç –ª–µ–≥–∫–æ :)&lt;/p&gt;
&lt;p&gt;–ö–æ–¥ –∞–∫—Ç–∏–≤–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –º–æ–∂–Ω–æ –Ω–∞–±–∏—Ä–∞—Ç—å –∫–∞–∫ —Ä—É—á–∫–∞–º–∏ –≤ –≤–∏–¥–µ –æ–±—ã—á–Ω—ã—Ö –∫–ª–∞—Å—Å–æ–≤ (–¥–∞, –≤ –°–∏ –º–æ–∂–Ω–æ —ç–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –∫–ª–∞—Å—Å—ã), —Ç–∞–∫ –∏ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–º –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è UML –¥–∏–∞–≥—Ä–∞–º–º —Å–æ—Å—Ç–æ—è–Ω–∏–π QM (QP Modeler) c –ø–æ—Å–ª–µ–¥—É—é—â–µ–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π –∫–æ–¥–∞. –í –¥–∞–Ω–Ω–æ–º –º–∞—Ç–µ—Ä–∏–∞–ª–µ –±—É–¥–µ—Ç –¥–µ–ª–∞—Ç—å—Å—è –∞–∫—Ü–µ–Ω—Ç –Ω–∞ –≤–∏–∑—É–∞–ª—å–Ω–æ–º –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–∏, –≤ —Å–≤—è–∑–∏ —Å —á–µ–º –±—É–¥–µ—Ç –Ω–µ–º–Ω–æ–≥–æ –∫–æ–¥–∞ –∏ –º–Ω–æ–≥–æ –∫—Ä–∞—Å–∏–≤—ã—Ö –∫–∞—Ä—Ç–∏–Ω–æ–∫. –ù–∞—á–Ω—ë–º —Å —Å–∞–º–æ–≥–æ –ø—Ä–æ—Å—Ç–æ–≥–æ ‚Äî &lt;a href="https://state-machine.com/qm/gs_tut.html" rel="nofollow"&gt;–º–∏–≥–∞—é—â–∏—Ö –ª–∞–º–ø–æ—á–µ–∫&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://mazko.github.io/MSP430.js/90df829b292e035384d37749bee1e0f7"&gt;MSP430.js&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2017/05/25/zhizn-posle-rtos-model-aktorov-qpc-uml/blinky-qv-msp430-js.zip"&gt;–∏—Å—Ö–æ–¥–Ω–∏–∫–∏&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2017/05/25/zhizn-posle-rtos-model-aktorov-qpc-uml/blink-statechart.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–î–ª—è –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞ –Ω—É–∂–Ω–∞ —Ç–æ–ª—å–∫–æ IDE &lt;a href="http://www.ti.com/tool/ccstudio-msp" rel="nofollow"&gt;Code Composer Studio&lt;/a&gt; (CCS), C++ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä —Ç–∞–º —É–∂–µ –≤—Å—Ç—Ä–æ–µ–Ω. –ü—Ä–æ—à–µ –≤—Å–µ–≥–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—Ä–∞–∑—É –≤–µ—Å—å –∞—Ä—Ö–∏–≤ —Å –∏—Å—Ö–æ–¥–Ω–∏–∫–∞–º–∏: File -&amp;gt; Import -&amp;gt; CCS Projects -&amp;gt; Select archive file. –ù–∞ –∫–∞—Ä—Ç–∏–Ω–∫–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∞ —Å—Ä–µ–¥–∞ –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è QM –∏ –¥–∏–∞–≥—Ä–∞–º–º–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π UML –º–∏–≥–∞—é—â–∏—Ö –ª–∞–º–ø–æ—á–µ–∫ (—Ñ–∞–π–ª &lt;em&gt;blink.qm&lt;/em&gt; –≤ –∏—Å—Ö–æ–¥–Ω–∏–∫–∞—Ö). –ß–∞—Å—Ç–æ—Ç–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –ª–∞–º–ø–æ—á–µ–∫ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø—Ä–∏ –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ —Ç–∞–π–º–µ—Ä–∞ –∏ –ø—Ä–∏ &lt;code&gt;BSP::TICKS_PER_SEC&lt;/code&gt; —ç—Ç–æ –æ–¥–Ω–∞ —Å–µ–∫—É–Ω–¥–∞. –î–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –¥–∏–∞–≥—Ä–∞–º–º—ã –≤ –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ —Ç—Ä–µ–±—É–µ—Ç—Å—è –∑–∞–¥–∞—Ç—å —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Ñ–∞–π–ª—ã —à–∞–±–ª–æ–Ω—ã, –≤ –∫–æ—Ç–æ—Ä—ã—Ö –¥–ª—è QM –Ω—É–∂–Ω–æ —è–≤–Ω–æ –ø—Ä–æ–ø–∏—Å–∞—Ç—å &lt;code&gt;$declare&lt;/code&gt; –∏ &lt;code&gt;$define&lt;/code&gt;. –í –ø—Ä–∏–Ω—Ü–∏–ø–µ –º–æ–∂–Ω–æ –±—ã–ª–æ –±—ã –¥–∞–∂–µ –æ–±–æ–π—Ç–∏—Å—å –∏ –±–µ–∑ —É–∫–∞–∑–∞—Ç–µ–ª—è &lt;code&gt;QP::QActive * const AO_BlinkyPtr&lt;/code&gt;, –æ–Ω –Ω—É–∂–µ–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è –ª—É—á—à–µ–π –∏–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏–∏ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ &lt;code&gt;BlinkyAO&lt;/code&gt; ‚Äî —ç—Ç–æ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è &lt;a href="http://proiot.ru/blog/posts/2012/10/08/idiomy-v-ansi-c/"&gt;–∏–¥–∏–æ–º–∞&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;blinky.h&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;#ifndef blinky_h
#define blinky_h

namespace blinky {
    $declare(AOs::AO_BlinkyPtr)
}
// declare other elements...

#endif // project_h
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;em&gt;blinky.cpp&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;#include &amp;quot;qpcpp.h&amp;quot;
#include &amp;quot;blinky.h&amp;quot;
#include &amp;quot;bsp.h&amp;quot;

namespace blinky {

    enum {
        TIMEOUT_SIG = QP::Q_USER_SIG,
    };

    $declare(AOs::BlinkyAO)

    // Local objects -------------------------------------------------------------
    static BlinkyAO __self_ao; // the single instance active object

    // Global-scope objects ------------------------------------------------------
    QP::QActive * const AO_BlinkyPtr = &amp;amp;__self_ao; // &amp;quot;opaque&amp;quot; AO pointer

    $define(AOs::BlinkyAO)

}

// define other elements...
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å —Å–æ–±—ã—Ç–∏—è &lt;code&gt;QEvent&lt;/code&gt; —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —Å–∏–≥–Ω–∞–ª–∞ &lt;code&gt;QSignal sig&lt;/code&gt; –∏ –ø–æ–ª—è —Å–ª—É–∂–µ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ &lt;code&gt;uint8_t dynamic_&lt;/code&gt;, —ç—Ç–æ—Ç –∫–ª–∞—Å—Å –º–æ–∂–Ω–æ –Ω–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å –∏ –¥–æ–±–∞–≤–ª—è—Ç—å —Ç—É–¥–∞ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è —Å –¥–∞–Ω–Ω—ã–º–∏, —Ö–∞—Ä–∞–∫—Ç–µ—Ä–Ω—ã–º–∏ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–æ–±—ã—Ç–∏—è. –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã —Å–∏–≥–Ω–∞–ª–æ–≤ –¥–ª—è –∞–∫—Ç–∏–≤–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –¥–æ–ª–∂–Ω—ã –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è –Ω–µ —Å –Ω—É–ª—è –∞ —Å &lt;code&gt;Q_USER_SIG&lt;/code&gt;, —Ç–∞–∫ –∫–∞–∫ –≤ QP —É–∂–µ –µ—Å—Ç—å —Å–∏–≥–Ω–∞–ª—ã, –∑–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º–æ–π, –Ω–∞–ø—Ä–∏–º–µ—Ä &lt;code&gt;Q_EMPTY_SIG&lt;/code&gt;, &lt;code&gt;Q_ENTRY_SIG&lt;/code&gt;, &lt;code&gt;Q_INIT_SIG&lt;/code&gt;, &lt;code&gt;Q_EXIT_SIG&lt;/code&gt;. –í—Å—è –Ω–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤–∞—è –ª–æ–≥–∏–∫–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∂–µ–ª–µ–∑–∫–æ–π –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ñ–∞–π–ª–µ &lt;em&gt;bsp.cpp&lt;/em&gt; –∏ —Ç–∞–º –∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω &lt;a href="http://proiot.ru/blog/posts/2017/04/27/freertos-diagnostika-oshibok-i-khuki/"&gt;–æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–æ–∫&lt;/a&gt; (–∫—É–¥–∞ –∂ –±–µ–∑ –Ω–∏—Ö —Ç–æ) QP. –ù—É –∞ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ –ø—Ä–æ—Ü–µ—Å—Å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–∞–º–æ–≥–æ QP –∏ –∑–∞–ø—É—Å–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –≤ –¥–∞–Ω–Ω–æ–º –ø—Ä–æ—Å—Ç–µ–π—à–µ–º —Å–ª—É—á–∞–µ –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫:&lt;/p&gt;
&lt;p&gt;&lt;em&gt;main.cpp&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;qpcpp.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;bsp.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;blinky.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="n"&gt;QP&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;QEvt&lt;/span&gt; &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;blinky_queueSto&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;    &lt;span class="c1"&gt;// Event queue storage&lt;/span&gt;

    &lt;span class="n"&gt;BSP&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;init&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt; &lt;span class="c1"&gt;// initialize the Board Support Package&lt;/span&gt;
    &lt;span class="n"&gt;QP&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;QF&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;init&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt; &lt;span class="c1"&gt;// initialize the framework and the underlying RT kernel&lt;/span&gt;

    &lt;span class="c1"&gt;// publish-subscribe not used, no call to QF::psInit()&lt;/span&gt;
    &lt;span class="c1"&gt;// dynamic event allocation not used, no call to QF::poolInit()&lt;/span&gt;

    &lt;span class="n"&gt;blinky&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;AO_BlinkyPtr&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;start&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1U&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;                   &lt;span class="c1"&gt;// priority&lt;/span&gt;
                     &lt;span class="n"&gt;blinky_queueSto&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Q_DIM&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;blinky_queueSto&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="c1"&gt;// event queue&lt;/span&gt;
                     &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0U&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;                  &lt;span class="c1"&gt;// stack (unused)&lt;/span&gt;


    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;QP&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;QF&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;run&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt; &lt;span class="c1"&gt;// run the QF application&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–° –º–∏–≥–∞—é—â–∏–º–∏ –ª–∞–º–ø–æ—á–∫–∞–º–∏ –≤—Å—ë –ø–æ–Ω—è—Ç–Ω–æ, –Ω–æ –Ω—É–∂–Ω–æ —á—Ç–æ-—Ç–æ –ø–æ–∏–Ω—Ç–µ—Ä–µ—Å–Ω–µ–π ‚Äî –ø—Ä–µ–¥–ª–∞–≥–∞—é –ø–æ—Å—Ç—Ä–æ–∏—Ç—å –∞–Ω–∞–ª–æ–≥ –¥–ª—è —Ä–∞–Ω–µ–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø–æ–¥ &lt;a href="http://proiot.ru/blog/posts/2017/04/29/freertos-obmen-dannymi-mezhdu-zadachami/"&gt;FreeRTOS&lt;/a&gt;. –í —Å–∏—Å—Ç–µ–º–µ —Ç—Ä–∏ –∞–∫—Ç–∏–≤–Ω—ã—Ö –æ–±—ä–µ–∫—Ç–∞ ‚Äî –ª–µ–≤—ã–µ –ª–∞–º–ø–æ—á–∫–∏, –ø—Ä–∞–≤—ã–µ –ª–∞–º–ø–æ—á–∫–∏ –∏ –¥–∏—Å–ø–ª–µ–π. –ö–æ–æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–µ —è–¥—Ä–æ QP –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å—Ä–∞–∑—É –∂–µ –∑–∞–±—ã—Ç—å –æ –ø—Ä–æ–±–ª–µ–º–µ &lt;a href="http://proiot.ru/blog/posts/2017/04/28/freertos-sovmestnyi-dostup-k-obshchim-resursam/"&gt;–∞—Ç–æ–º–∞—Ä–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞&lt;/a&gt; —Å –ø–æ—Ä—Ç–∞–º. –¢–µ–ø–µ—Ä—å —Å–∞–º–æ–µ –≤—Ä–µ–º—è —á—É—Ç—å –±–æ–ª–µ–µ –ø–æ–¥—Ä–æ–±–Ω–æ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è –Ω–∞ —Å–æ–±—ã—Ç–∏—è—Ö –∏ –∫–∞–∫–∏–º–∏ –æ–Ω–∏ –±—ã–≤–∞—é—Ç. –ò—Ç–∞–∫ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≥–ª–æ–±–∞–ª—å–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è –æ—Ç –∫–Ω–æ–ø–æ–∫ &lt;code&gt;BTNS_LEFT_SIG&lt;/code&gt; –∏ &lt;code&gt;BTNS_RIGHT_SIG&lt;/code&gt;. –°–æ–±—ã—Ç–∏—è –≤ QP –±—ã–≤–∞—é—Ç –¥–≤—É—Ö –≤–∏–¥–æ–≤:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;—Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ ‚Äî –Ω–µ–∏–∑–º–µ–Ω—è–µ–º—ã–µ (immutable) —Å–æ–±—ã—Ç–∏—è. –ó–∞ —Å–æ–∑–¥–∞–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–æ–±—ã—Ç–∏—è –æ—Ç–≤–µ—á–∞–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –í –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ –æ–±–∞ —Å–æ–±—ã—Ç–∏—è —Å–æ–¥–µ—Ä–∂–∞—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –Ω–∞–∂–∞—Ç–æ–π –∫–Ω–æ–ø–∫–µ, –∏—Ö –∑–Ω–∞—á–µ–Ω–∏–µ –∏–∑–º–µ–Ω—è–µ—Ç—Å—è –∏ —Ç–∞–∫–∏–µ —Å–æ–±—ã—Ç–∏—è –Ω–µ –ø–æ–ø–∞–¥–∞—é—Ç –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏—é —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ ‚Äî —Å–æ–∑–¥–∞—é—Ç—Å—è –º–∞–∫—Ä–æ—Å–æ–º &lt;code&gt;Q_NEW&lt;/code&gt; –≤ –æ–±–ª–∞—Å—Ç–∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –ø–∞–º—è—Ç–∏ –∏ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –Ω–µ –±—É–¥—É—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã –≤—Å–µ–º–∏ –∞–∫—Ç–∏–≤–Ω—ã–º–∏ –æ–±—ä–µ–∫—Ç–∞–º–∏, –∫–æ—Ç–æ—Ä—ã–º –æ–Ω–∏ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω—ã. –î–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö —Å–æ–±—ã—Ç–∏–π –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø—É–ª —Å –ø–æ–º–æ—â—å—é –≤—ã–∑–æ–≤–∞ &lt;code&gt;QP::QF::poolInit&lt;/code&gt;. –¢–∞–∫ —Å–æ–∑–¥–∞—ë—Ç—Å—è —Å–æ–±—ã—Ç–∏–µ –æ—Ç –∫–Ω–æ–ø–æ–∫ &lt;code&gt;BtnEvt *btnEvt = Q_NEW(BtnEvt, BTNS_LEFT_SIG); btnEvt-&amp;gt;value = 42;&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;–í –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ –≤—Å–µ–º—É –¥–ª—è –±–æ–ª–µ–µ —Ä–∞—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ QP –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–≤–∞ —Å–ø–æ—Å–æ–±–∞ –¥–æ—Å—Ç–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;–Ω–∞–ø—Ä—è–º—É—é ‚Äî –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å —è–≤–Ω–æ –≤—ã–∑—ã–≤–∞–µ—Ç –º–µ—Ç–æ–¥ —É —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ –ø–æ–ª—É—á–∞—Ç–µ–ª—è. –ù–∞–ø—Ä–∏–º–µ—Ä –º–æ–∂–Ω–æ –ø–æ—Å–ª–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ —Å–∞–º–æ–º—É —Å–µ–±–µ &lt;code&gt;me-&amp;gt;POST(&amp;amp;UPDATE_EVENT, me)&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;–º—É–ª—å—Ç–∏–∫–∞—Å—Ç ‚Äî –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å –Ω–∏—á–µ–≥–æ –Ω–µ –∑–Ω–∞–µ—Ç –æ –ø–æ–ª—É—á–∞—Ç–µ–ª—è—Ö, –∫–∞–∂–¥—ã–π –ø–æ–ª—É—á–∞—Ç–µ–ª—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è / –æ—Ç–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –æ—Ç –∏–Ω—Ç–µ—Ä–µ—Å—É—é—â–∏—Ö –µ–≥–æ —Å–æ–±—ã—Ç–∏–π. –¢–∞–∫–æ–π —Å–ø–æ—Å–æ–± —Ö–æ—Ä–æ—à–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –∫–Ω–æ–ø–æ–∫. –î–ª—è –º—É–ª—å—Ç–∏–∫–∞—Å—Ç–∞ –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –ø—É–ª —Å –ø–æ–º–æ—â—å—é –≤—ã–∑–æ–≤–∞ &lt;code&gt;QP::QF::psInit&lt;/code&gt;. –¢–∞–∫ –æ—Ç—Å—ã–ª–∞–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç –∫–Ω–æ–ø–æ–∫ &lt;code&gt;QP::QF::PUBLISH(btnEvt, (void *)0);&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2017/05/25/zhizn-posle-rtos-model-aktorov-qpc-uml/r.png" style="width:55%; margin: 0 auto; display:block; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–ù–∞ —Ä–∏—Å—É–Ω–∫–µ –¥–∏–∞–≥—Ä–∞–º–º–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ —Å –ø—Ä–∞–≤—ã–º–∏ –ª–∞–º–ø–æ—á–∫–∞–º–∏. –£ –Ω–µ–≥–æ –æ–¥–Ω–æ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ —á—Ç–æ –æ–Ω –¥–µ–ª–∞–µ—Ç —ç—Ç–æ —Å–ª—É—à–∞–µ—Ç –∫–Ω–æ–ø–∫—É –∏ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –µ—ë –∑–Ω–∞—á–µ–Ω–∏—è —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Ü–≤–µ—Ç –¥–ª—è –ø—Ä–∞–≤—ã—Ö –ª–∞–º–ø–æ—á–µ–∫. –°–æ–±—ã—Ç–∏–µ –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–æ–ª–∂–Ω–æ –º–µ–Ω—è—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞, —Ä–µ–∞–∫—Ü–∏—è –Ω–∞ —Å–æ–±—ã—Ç–∏–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ª—é–±–æ–π –Ω–∞ —É—Å–º–æ—Ç—Ä–µ–Ω–∏–µ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2017/05/25/zhizn-posle-rtos-model-aktorov-qpc-uml/d.png" style="width:55%; margin: 0 auto; display:block; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–ó–¥–µ—Å—å –∞–∫—Ç–∏–≤–Ω—ã–π –æ–±—ä–µ–∫—Ç –∑–∞–Ω–∏–º–∞–µ—Ç—Å—è –≤—ã–≤–æ–¥–æ–º –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –¥–∏—Å–ø–ª–µ–π, –æ—Ç—Å—ã–ª–∞—è —Å–æ–æ–±—â–µ–Ω–∏–µ —Å–∞–º–æ–º—É —Å–µ–±–µ. –î–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –ø–∞–º—è—Ç–∏ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ —Å–æ–±—ã—Ç–∏–µ DISPLAY_UPDATE –º–æ–∂–µ—Ç –±—ã—Ç—å &lt;strong&gt;—Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–º&lt;/strong&gt; &lt;code&gt;static QP::QEvt const UPDATE_EVENT = { DISPLAY_UPDATE_SIG, 0U, 0U };&lt;/code&gt; —Ç.–∫. –Ω–∏–∫–∞–∫–∏—Ö –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π —Å –¥–∞–Ω–Ω—ã–º–∏ –≤ –Ω—ë–º –Ω–µ—Ç. –í —Ç–µ–∫—É—â–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —É –¥–∞–Ω–Ω–æ–≥–æ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –æ–±—ä–µ–∫—Ç–∞ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∞–∏–º–µ–Ω—å—à–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –≤ —Å–∏—Å—Ç–µ–º–µ.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2017/05/25/zhizn-posle-rtos-model-aktorov-qpc-uml/l.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–ê–∫—Ç–∏–≤–Ω—ã–π –æ–±—ä–µ–∫—Ç –¥–ª—è –ª–µ–≤—ã—Ö –ª–∞–º–ø–æ—á–µ–∫ —Å–∞–º—ã–π –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π. –¢—É—Ç &lt;strong&gt;–∏–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–π&lt;/strong&gt; –∫–æ–Ω–µ—á–Ω—ã–π –∞–≤—Ç–æ–º–∞—Ç. –ò–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–π –∞–≤—Ç–æ–º–∞—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –≤ —Å–µ–±–µ –¥—Ä—É–≥–∏–µ –∞–≤—Ç–æ–º–∞—Ç—ã. –í –∫–∞–∫–æ–º –±—ã —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –∞–∫—Ç–∏–≤–Ω—ã–π –æ–±—ä–µ–∫—Ç –¥–ª—è –ª–µ–≤—ã—Ö –ª–∞–º–ø–æ—á–µ–∫, –æ–Ω –≤—Å–µ–≥–¥–∞ —Å–ª—É—à–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ –æ –Ω–∞–∂–∞—Ç–æ–π –∫–Ω–æ–ø–æ—á–∫–µ, —Ä–µ–∞–∫—Ü–∏—è –Ω–∞ —Å–æ–±—ã—Ç–∏–µ –æ–¥–∏–Ω–∞–∫–æ–≤–∞—è. –ò–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∏–π –∞–≤—Ç–æ–º–∞—Ç –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–∑–±–µ–∂–∞—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è ‚Äì –ø—Ä–æ—â–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ç—Ä–µ–±—É–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –æ–¥–∏–Ω —Ä–∞–∑ –≤ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏, —á–µ–º –ø–æ–≤—Ç–æ—Ä—è—Ç—å –æ–¥–Ω—É –∏ —Ç—É –∂–µ –ª–æ–≥–∏–∫—É –≤ –¥–æ—á–µ—Ä–Ω–∏—Ö —Å–æ—Å—Ç–æ—è–Ω–∏—è—Ö. –ï—â–µ –æ–¥–∏–Ω –ø–æ–ª–µ–∑–Ω—ã–π –ø—Ä–∏—ë–º, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ø—Ä–æ—Å—Ç–∏—Ç—å –∂–∏–∑–Ω—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É ‚Äì –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π (Transition to History), –ª–∞–º–ø–æ—á–∫–∏ –ø–æ–º–Ω—è—Ç —Å–≤–æ–π —Ü–≤–µ—Ç –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –º–∏–≥–∞–Ω–∏—è.  &lt;/p&gt;
&lt;p&gt;&lt;a href="http://mazko.github.io/MSP430.js/bd5dbe0259a4c493e612fd8f3fa3fbd3"&gt;MSP430.js&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2017/05/25/zhizn-posle-rtos-model-aktorov-qpc-uml/3ao-qv-msp430-js.zip"&gt;–∏—Å—Ö–æ–¥–Ω–∏–∫–∏&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;–ö QP –ø—Ä–∏–ª–∞–≥–∞–µ—Ç—Å—è —Å–µ—Ä—å—ë–∑–Ω–∞—è –∫–Ω–∏–≥–∞ ¬´Practical UML Statecharts in C/C++, Second Edition: Event-Driven Programming for Embedded Systems¬ª –æ—Ç –æ—Å–Ω–æ–≤–∞—Ç–µ–ª—è –∫–æ–º–ø–∞–Ω–∏–∏ Quantum Leaps. –í –¥–∞–Ω–Ω–æ–π –∫–Ω–∏–≥–µ –µ—Å—Ç—å –æ—Ç–¥–µ–ª—å–Ω–∞—è –≥–ª–∞–≤–∞ —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ —á–∞—Å—Ç–æ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –ø—Ä–∏ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–Ω–µ—á–Ω—ã—Ö –∞–≤—Ç–æ–º–∞—Ç–æ–≤. –ù–∞ —Å–∞–π—Ç–µ Quantum Leaps —Ç–∞–∫–∂–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–±—É—á–∞—é—â–∏–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –∏ –ø–æ–ª–µ–∑–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ QP –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π ‚Äì &lt;a href="http://proiot.ru/blog/posts/2014/03/29/tdd-na-urovne-mikrokontrollerov-svezhii-vzgliad/"&gt;—é–Ω–∏—Ç —Ç–µ—Å—Ç—ã&lt;/a&gt; QUTest, QSpy.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2017/06/22/s-dlia-mikrokontrollerov-upravlenie-pamiatiu/"&gt;–î–∞–ª–µ–µ&lt;/a&gt; –∏–≥—Ä–∞ ¬´–ó–º–µ–π–∫–∞¬ª –Ω–∞ QP/C++.&lt;/p&gt;</content><category term="msp430"></category><category term="QP"></category><category term="UML"></category><category term="FSM"></category><category term="RTOS"></category></entry><entry><title>uGFX - –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ GUI –¥–ª—è –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤</title><link href="http://proiot.ru/blog/posts/2017/05/20/ugfx-biblioteka-gui-dlia-mikrokontrollerov/" rel="alternate"></link><published>2017-05-20T00:00:00+03:00</published><updated>2017-05-20T00:00:00+03:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2017-05-20:/blog/posts/2017/05/20/ugfx-biblioteka-gui-dlia-mikrokontrollerov/</id><summary type="html">&lt;p&gt;–ö–æ–≥–¥–∞ –≥–æ–≤–æ—Ä—è—Ç –ø—Ä–æ –≥—Ä–∞—Ñ–∏–∫—É –¥–ª—è –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤, —Ç–æ –æ–±—ã—á–Ω–æ –ø–æ–¥—Ä–∞–∑—É–º–µ–≤–∞—é—Ç —Å—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–æ –Ω–µ–±–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥—Ä–∞—Ñ–∏–∫–∏ –Ω–∏–∑–∫–æ–≥–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è —Å –º–∏–Ω–∏–º—É–º –∞–Ω–∏–º–∞—Ü–∏–∏ ‚Äî —ç—Ç–æ –æ–±—É—Å–ª–æ–≤–ª–µ–Ω–æ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –≤—ã—Å–æ–∫–∏–º–∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º–∏ –∫ –±—ã—Å—Ç—Ä–æ–¥–µ–π—Å—Ç–≤–∏—é –∏ –æ–±—ä–µ–º—É –û–ó–£. –ï—Å–ª–∏ –≤—Å—è –≥—Ä–∞—Ñ–∏–∫–∞ —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ —Å–≤–æ–¥–∏—Ç—Å—è –∫ –≤—ã–≤–æ–¥—É —á–∏—Å–ª–æ–≤–æ–π –∏–ª–∏ —Ç–µ–∫—Å—Ç–æ–≤–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏, —Ç–æ –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–º —Ä–µ—à–µ–Ω–∏–µ–º –º–æ–∂–µ—Ç –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ª–∏–±–æ &lt;a href="http://proiot.ru/blog/posts/2017/01/16/picsimjs-semisegmentnyi-indikator-i-preryvaniia/"&gt;—Å–µ–≥–º–µ–Ω—Ç–Ω—ã—Ö&lt;/a&gt;, –ª–∏–±–æ —Å–∏–º–≤–æ–ª—å–Ω—ã—Ö ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;p&gt;–ö–æ–≥–¥–∞ –≥–æ–≤–æ—Ä—è—Ç –ø—Ä–æ –≥—Ä–∞—Ñ–∏–∫—É –¥–ª—è –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤, —Ç–æ –æ–±—ã—á–Ω–æ –ø–æ–¥—Ä–∞–∑—É–º–µ–≤–∞—é—Ç —Å—Ä–∞–≤–Ω–∏—Ç–µ–ª—å–Ω–æ –Ω–µ–±–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥—Ä–∞—Ñ–∏–∫–∏ –Ω–∏–∑–∫–æ–≥–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è —Å –º–∏–Ω–∏–º—É–º –∞–Ω–∏–º–∞—Ü–∏–∏ ‚Äî —ç—Ç–æ –æ–±—É—Å–ª–æ–≤–ª–µ–Ω–æ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –≤—ã—Å–æ–∫–∏–º–∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º–∏ –∫ –±—ã—Å—Ç—Ä–æ–¥–µ–π—Å—Ç–≤–∏—é –∏ –æ–±—ä–µ–º—É –û–ó–£. –ï—Å–ª–∏ –≤—Å—è –≥—Ä–∞—Ñ–∏–∫–∞ —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ —Å–≤–æ–¥–∏—Ç—Å—è –∫ –≤—ã–≤–æ–¥—É —á–∏—Å–ª–æ–≤–æ–π –∏–ª–∏ —Ç–µ–∫—Å—Ç–æ–≤–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏, —Ç–æ –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–º —Ä–µ—à–µ–Ω–∏–µ–º –º–æ–∂–µ—Ç –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ª–∏–±–æ &lt;a href="http://proiot.ru/blog/posts/2017/01/16/picsimjs-semisegmentnyi-indikator-i-preryvaniia/"&gt;—Å–µ–≥–º–µ–Ω—Ç–Ω—ã—Ö&lt;/a&gt;, –ª–∏–±–æ —Å–∏–º–≤–æ–ª—å–Ω—ã—Ö –¥–∏—Å–ø–ª–µ–µ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–µ &lt;a href="http://proiot.ru/blog/posts/2017/01/27/picsimjs-simvolnyi-displei-na-baze-hd44780/"&gt;HD44780&lt;/a&gt;). –ï—Å–ª–∏ –∂–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –≤—ã–≤–æ–¥ –Ω–µ —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç–æ–≤–æ–π, –Ω–æ –∏ –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, –≥—Ä–∞—Ñ–∏–∫–∏, –¥–∏–∞–≥—Ä–∞–º–º—ã, –∞–Ω–∏–º–∞—Ü–∏—è) –∏ –ø–æ–ø—É—Ç–Ω–æ –æ–±–µ—Å–ø–µ—á–∏—Ç—å –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ–º –ø–æ—Å—Ä–µ–¥—Å—Ç–≤–æ–º –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–≥–æ –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ (GUI), —Ç–æ:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;—É –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ä–µ—Å—É—Ä—Å–æ–≤ ‚Äî –Ω–∞–ø—Ä–∏–º–µ—Ä 1–ö–±–∞–π—Ç –û–ó–£ –Ω—É–∂–Ω–æ —Ç–æ–ª—å–∫–æ –¥–ª—è –∫–∞–¥—Ä–æ–≤–æ–≥–æ –±—É—Ñ–µ—Ä–∞ –¥–≤—É—Ö—Ü–≤–µ—Ç–Ω–æ–≥–æ –¥–∏—Å–ø–ª–µ—è 128x64, –∞ –¥–ª—è —Ü–≤–µ—Ç–Ω—ã—Ö –¥–∏—Å–ø–ª–µ–µ–≤ –ø–æ–º–Ω–æ–∂–∏—Ç—å –µ—â—ë –∏ –Ω–∞ –≥–ª—É–±–∏–Ω—É —Ü–≤–µ—Ç–∞ (–±–∏—Ç–Ω–æ—Å—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;–≤–≤–∏–¥—É —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–π —á–∞—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–æ–≤—ã–≤–∞—Ç—å —Å –Ω—É–ª—è —Å–ª–æ–∂–Ω—ã–π –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–∞–ª–µ–∫–æ –Ω–µ –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ ‚Äî –∫—É–¥–∞ –ø—Ä–æ—â–µ –∏ –Ω–∞–¥—ë–∂–Ω–µ–π –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—É—é –≥—Ä–∞—Ñ–∏—á–µ—Å–∫—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É, —á–µ–º –∑–∞–Ω–æ–≤–æ –∏–∑–æ–±—Ä–µ—Ç–∞—Ç—å –≤–µ–ª–æ—Å–∏–ø–µ–¥&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;uGFX ‚Äî –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ –Ω–µ–∑–∞–≤–∏—Å–∏–º–∞—è, –º–æ–¥—É–ª—å–Ω–∞—è –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞, –Ω–∞–ø–∏—Å–∞–Ω–Ω–∞—è –Ω–∞ –°–∏ –∏ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–∞—è –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Ç–∏–ø–∞–º–∏ –¥–∏—Å–ø–ª–µ–µ–≤ –∏ —Å–µ–Ω—Å–æ—Ä–Ω—ã–º–∏ –ø–∞–Ω–µ–ª—è–º–∏ –≤–æ –≤—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö. –ò–∑ –∫–æ—Ä–æ–±–∫–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏—Ö –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤ –≤ –≤–∏–¥–µ –≥–æ—Ç–æ–≤—ã—Ö –¥—Ä–∞–π–≤–µ—Ä–æ–≤, –∞ –æ—Ç –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–∞ –ª–∏—à—å —Ç—Ä–µ–±—É–µ—Ç—Å—è –≤–∑—è—Ç—å —à–∞–±–ª–æ–Ω –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ –∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–∞—Ä–æ—á–∫—É —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –æ–±–º–µ–Ω–∞ –¥–∞–Ω–Ω—ã–º–∏ –º–µ–∂–¥—É –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–º –∏ –¥–∏—Å–ø–ª–µ–µ–º. –£ –Ω–∞—Å –¥–∏—Å–ø–ª–µ–π &lt;a href="http://proiot.ru/blog/posts/2017/04/25/monokhromnyi-oled-displei-na-kontrollere-ssd1306/"&gt;SSD1306&lt;/a&gt;, –∞ –≤ —à–∞–±–ª–æ–Ω–µ &lt;em&gt;board_SSD1306.h&lt;/em&gt; —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —Ç–æ–ª—å–∫–æ –¥–≤–µ —Ñ—É–Ω–∫—Ü–∏–∏ ‚Äî –∑–∞–ø–∏—Å—å –¥–∞–Ω–Ω—ã—Ö –∏ –∑–∞–ø–∏—Å—å –∫–æ–º–∞–Ω–¥.&lt;/p&gt;
&lt;p&gt;–ï—â—ë uGFX –º–æ–∂–Ω–æ –ª–µ–≥–∫–æ —Å–∫–æ–º–ø–∏–ª–∏—Ä–æ–≤–∞—Ç—å –¥–ª—è –Ω–∞—Å—Ç–æ–ª—å–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º (Linux, Windows, Mac OS), —á—Ç–æ –≤–µ—Å—å–º–∞ —É–¥–æ–±–Ω–æ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø—Ä–æ—Ç–æ—Ç–∏–ø–∏—Ä–æ–≤–∞–Ω–∏—è –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–π —á–∞—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø—Ä—è–º–æ –Ω–∞ –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–æ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ –±–µ–∑ –ø–µ—Ä–µ–ø—Ä–æ—à–∏–≤–∫–∏ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://mazko.github.io/MSP430.js/a3b85b45081d40a4fdbf2a95af723b1c"&gt;MSP430.js&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2017/05/20/ugfx-biblioteka-gui-dlia-mikrokontrollerov/ugfx.draw.msp430.js.zip"&gt;–∏—Å—Ö–æ–¥–Ω–∏–∫–∏&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2017/05/20/ugfx-biblioteka-gui-dlia-mikrokontrollerov/ui.gif" style="width:55%; margin: 0 auto; display:block;"&gt;&lt;/p&gt;
&lt;p&gt;–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ uGFX —Ä–∞–∑–¥–µ–ª–µ–Ω–∞ –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–æ–¥—É–ª–µ–π, –Ω–∞–ø—Ä–∏–º–µ—Ä –º–æ–¥—É–ª–∏ GDISP, GINPUT –æ—Ç–≤–µ—á–∞—é—Ç –∑–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∏—Å–ø–ª–µ–µ–º –∏ –≤–≤–æ–¥ –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Å–µ–Ω—Å–æ—Ä–Ω–æ–π –ø–∞–Ω–µ–ª–∏ / –∫–Ω–æ–ø–æ–∫. –û—Ç–∫–ª—é—á–∏–≤ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –º–æ–¥—É–ª–∏, –º–æ–∂–Ω–æ –¥–æ–±–∏—Ç—å—Å—è –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Å–Ω–∏–∂–µ–Ω–∏—è –æ–±—ä–µ–º–∞ –ø—Ä–æ—à–∏–≤–∫–∏. –ë–æ–ª–µ–µ —Ç–æ–≥–æ —Å–∞–º–∏ –º–æ–¥—É–ª–∏ —Ç–æ–∂–µ –º–æ–∂–Ω–æ –≥–∏–±–∫–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –ø—É—Ç–µ–º –∑–∞–¥–∞–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏–π –º–∞–∫—Ä–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è–º –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–º —Ñ–∞–π–ª–µ &lt;em&gt;gfxconf.h&lt;/em&gt;, –∫–æ—Ç–æ—Ä—ã–π –¥–æ–ª–∂–µ–Ω –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ –∫–∞–∂–¥–æ–º –ø—Ä–æ–µ–∫—Ç–µ, –∏—Å–ø–æ–ª—å–∑—É—é—â–µ–º uGFX. –¢–∞–∫, –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –º–æ–¥—É–ª—è GDISP –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å—Ç—Ä–æ–∫—É &lt;code&gt;#define GFX_USE_GDISP TRUE&lt;/code&gt;. –ù—É –∞ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø—Ä–∏–º–µ—Ä–∞ –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Å–∞–º–æ–≥–æ –º–æ–¥—É–ª—è GDISP –º–æ–∂–µ—Ç –±—ã—Ç—å –º–∞–∫—Ä–æ—Å &lt;code&gt;#define GDISP_NEED_STARTUP_LOGO TRUE&lt;/code&gt;, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –∫—Ä–∞—Ç–∫–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –≤—ã–≤–æ–¥ –ª–æ–≥–æ—Ç–∏–ø–∞ uGFX –Ω–∞ –¥–∏—Å–ø–ª–µ–π —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ —Å—Ç–∞—Ä—Ç–∞ –ø—Ä–æ–≥—Ä–∞–º–º—ã.&lt;/p&gt;
&lt;p&gt;–°–ª–µ–¥—É—é—â–∏–π –ø—Ä–∏–º–µ—Ä –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É —Å –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–º–∏ –ø—Ä–∏–º–∏—Ç–∏–≤–∞–º–∏, –¥–æ—Å—Ç—É–ø–Ω—ã–º–∏ –¥–ª—è —Ä–∏—Å–æ–≤–∞–Ω–∏—è –≤ uGFX. –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ API –∏–¥—É—Ç –≤ –ø–∞—Ä–µ ‚Äî –∫–æ–Ω—Ç—É—Ä –∏–ª–∏ –∑–∞–∫—Ä–∞—Å–∫–∞. –í uGFX –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ–±—â–µ–ø—Ä–∏–Ω—è—Ç–∞—è –≤ –º–∞—à–∏–Ω–Ω–æ–π –≥—Ä–∞—Ñ–∏–∫–µ –¥–µ–∫–∞—Ä—Ç–æ–≤–∞ —Å–∏—Å—Ç–µ–º–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç —Å –Ω–∞—á–∞–ª–æ–º –æ—Ç—Å—á–µ—Ç–∞ –≤ –≤–µ—Ä—Ö–Ω–µ–º –ª–µ–≤–æ–º —É–≥–ª—É:&lt;/p&gt;
&lt;p&gt;&lt;em&gt;main.c&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;gfx.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;stdio.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;show&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;delaytime_t&lt;/span&gt; &lt;span class="n"&gt;ms&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;gdispFlush&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
    &lt;span class="n"&gt;gfxSleepMilliseconds&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ms&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;gdispClear&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Black&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;gdispFlush&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="c1"&gt;// Initialize and clear the display&lt;/span&gt;
    &lt;span class="n"&gt;gfxInit&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;

    &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="n"&gt;coord_t&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;gdispGetHeight&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;w&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;gdispGetWidth&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;

    &lt;span class="c1"&gt;// –†–∏—Å–æ–≤–∞–Ω–∏–µ –ø–æ –ø–∏–∫—Å–µ–ª—è–º&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;coord_t&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;w&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;coord_t&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;gdispDrawPixel&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;White&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="n"&gt;show&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;4444&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="c1"&gt;// –∫–∏—Ä–∏–ª–ª–∏—Ü–∞&lt;/span&gt;
    &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="n"&gt;font_t&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;gdispOpenFont&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Archangelsk Regular 12&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="n"&gt;txt&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;–í—Å–µ –ë—É–¥–µ –î–æ–±—Ä–µ&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;gdispDrawString&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;w&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;gdispGetStringWidth&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;txt&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;txt&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;White&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="n"&gt;str&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
    &lt;span class="n"&gt;sprintf&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;str&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;%dx%d&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;w&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;gdispDrawString&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;w&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;gdispGetStringWidth&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;str&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;str&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;White&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;show&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;4444&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="k"&gt;while&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;TRUE&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="c1"&gt;// –ª–∏–Ω–∏–∏&lt;/span&gt;
        &lt;span class="n"&gt;gdispDrawLine&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;w&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;White&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;gdispDrawLine&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;w&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;White&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;gdispDrawLine&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;w&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;w&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;White&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;gdispDrawLine&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;w&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;White&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;show&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;4444&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

        &lt;span class="c1"&gt;// –ü—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–∏&lt;/span&gt;
        &lt;span class="n"&gt;gdispDrawBox&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;w&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;White&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;gdispFillArea&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;w&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;w&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;w&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;White&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;gdispDrawRoundedBox&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;w&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;White&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;gdispFillRoundedBox&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;w&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;w&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;w&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;White&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;show&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;4444&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

        &lt;span class="c1"&gt;// –û–∫—Ä—É–∂–Ω–æ—Å—Ç—å, –∫—Ä—É–≥, —ç–ª–ª–∏–ø—Å—ã&lt;/span&gt;
        &lt;span class="n"&gt;gdispDrawCircle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;White&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;gdispDrawEllipse&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;w&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;w&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;White&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;gdispFillCircle&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;w&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;White&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;gdispFillEllipse&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;w&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;w&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;w&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;White&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;show&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;4444&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

        &lt;span class="c1"&gt;// –î—É–≥–∞ –∏ —Å–µ–∫—Ç–æ—Ä&lt;/span&gt;
        &lt;span class="n"&gt;gdispFillArc&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;w&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;90&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;White&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;gdispDrawArc&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;w&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;90&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;180&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;White&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;gdispFillArc&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;w&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;180&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;270&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;White&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;gdispDrawArc&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;w&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;270&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;White&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;show&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;4444&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

        &lt;span class="c1"&gt;// –º–Ω–æ–≥–æ—É–≥–æ–ª—å–Ω–∏–∫ (–ø–æ–ª–∏–≥–æ–Ω)&lt;/span&gt;
        &lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="n"&gt;point&lt;/span&gt; &lt;span class="n"&gt;shape&lt;/span&gt;&lt;span class="p"&gt;[]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;GDISP_SCREEN_WIDTH&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;GDISP_SCREEN_HEIGHT&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt;
            &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt;
            &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="n"&gt;GDISP_SCREEN_WIDTH&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;GDISP_SCREEN_HEIGHT&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt;
        &lt;span class="p"&gt;};&lt;/span&gt;
        &lt;span class="n"&gt;gdispDrawPoly&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;w&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;shape&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;shape&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;shape&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]),&lt;/span&gt; &lt;span class="n"&gt;White&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;gdispFillConvexPoly&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;w&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;h&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;shape&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;shape&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;shape&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]),&lt;/span&gt; &lt;span class="n"&gt;White&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;show&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;4444&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;   
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ü–æ –≤—ã–≤–æ–¥—É —Ç–µ–∫—Å—Ç–∞ –ø–æ–∂–∞–ª—É–π —Å—Ç–æ–∏—Ç –ø—Ä–æ–π—Ç–∏—Å—å –æ—Ç–¥–µ–ª—å–Ω–æ. –¢—É—Ç –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ uGFX –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≤–ø–µ—á–∞—Ç–ª—è—é—â–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏, –æ—Å–æ–±–µ–Ω–Ω–æ —É—á–∏—Ç—ã–≤–∞—è –∏–∑–Ω–∞—á–∞–ª—å–Ω—ã–µ –≤—ã—Å–æ–∫–∏–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;—Ä–∞–∑–ª–∏—á–Ω—ã–µ —à—Ä–∏—Ñ—Ç—ã (–≤ –æ–¥–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑–Ω—ã—Ö —à—Ä–∏—Ñ—Ç–æ–≤)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;–∏–º–µ–µ—Ç—Å—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –¥–æ–±–∞–≤–∏—Ç—å —Å–≤–æ–π —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —à—Ä–∏—Ñ—Ç&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;–ø–æ–¥–¥–µ—Ä–∂–∫–∞ Unicode –∏ —Å—Ç–∞–ª–æ –±—ã—Ç—å –∫–∏—Ä–∏–ª–ª–∏—Ü—ã&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;—Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ (anti-aliased)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;–∫–µ—Ä–Ω–∏–Ω–≥ (—É–ø–ª–æ—Ç–Ω–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –∑–∞ —Å—á–µ—Ç —Å–¥–≤–∏–≥–∞ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –±—É–∫–≤ –¥—Ä—É–≥ –∫ –¥—Ä—É–≥—É)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;–≤—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ –ø–æ –ª–µ–≤–æ–º—É, –ø—Ä–∞–≤–æ–º—É –∫—Ä–∞—é –∏–ª–∏ –ø–æ—Å–µ—Ä–µ–¥–∏–Ω–µ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;API –¥–ª—è —Ä–∞—Å—á—ë—Ç–∞ –¥–ª–∏–Ω—ã —Å—Ç—Ä–æ–∫–∏ —Å –∑–∞–¥–∞–Ω–Ω—ã–º —à—Ä–∏—Ñ—Ç–æ–º –≤ –ø–∏–∫—Å–µ–ª—è—Ö –ø–µ—Ä–µ–¥ –≤—ã–≤–æ–¥–æ–º –µ–µ –Ω–∞ —ç–∫—Ä–∞–Ω &lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;–°–ª–µ–¥—É—é—â–∏–π –Ω–µ –º–µ–Ω–µ–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π –ø—Ä–∏–º–µ—Ä –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ uGFX –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∫–∞—Ä—Ç–∏–Ω–æ–∫ –∏ –¥–∞–∂–µ –∞–Ω–∏–º–∞—Ü–∏–∏ –Ω–∞ –±–∞–∑–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∏—Ö –Ω–∏—Ö –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ –∫–æ—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π —É–º–µ–µ—Ç —Å–ø–∞—Ç—å, —Ç–æ—á–∏—Ç—å –∫–æ–≥—Ç–∏ –∏ –≤—Å—ë —Ç–∞–∫–æ–µ.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://mazko.github.io/MSP430.js/48d80b182518a31aecac3beb4cef52a6"&gt;MSP430.js&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2017/05/20/ugfx-biblioteka-gui-dlia-mikrokontrollerov/ugfx.cat.msp430.js.zip"&gt;–∏—Å—Ö–æ–¥–Ω–∏–∫–∏&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2017/05/20/ugfx-biblioteka-gui-dlia-mikrokontrollerov/ui-cat.gif" style="width:55%; margin: 0 auto; display:block;"&gt;&lt;/p&gt;
&lt;p&gt;–í –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏–º–µ—Ä–∞—Ö RTOS –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞—Å—å, –æ–¥–Ω–∞–∫–æ –≤ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–º –∞—Ä—Ö–∏–≤–µ —Å –∏—Å—Ö–æ–¥–Ω–∏–∫–∞–º–∏ uGFX –µ—Å—Ç—å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –ø—Ä–∏–º–µ—Ä–æ–≤ –≤ —Ç–æ–º —á–∏—Å–ª–µ —Å &lt;a href="http://proiot.ru/blog/posts/2017/04/26/freertos-operatsionnaia-sistema-dlia-mikrokontrollerov/"&gt;FreeRTOS&lt;/a&gt; –∏ –¥–∞–∂–µ Raspberry Pi —Å –≥–æ–ª—ã–º Linux –Ω–∞ –±–æ—Ä—Ç—É. –í –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ –≤—Å–µ–º—É –µ—Å—Ç—å –¥–∞–∂–µ –æ—Ç–¥–µ–ª—å–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∫–∞ ¬µGFX-Studio (Windows, Linux and Mac OS X) –¥–ª—è –¥–∏–∑–∞–π–Ω–∞ –∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ —Å–ª–æ–∂–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ –¥–ª—è uGFX.&lt;/p&gt;</content><category term="msp430"></category><category term="SSD1306"></category><category term="uGFX"></category></entry><entry><title>FreeRTOS - –æ–±–º–µ–Ω –¥–∞–Ω–Ω—ã–º–∏ –º–µ–∂–¥—É –∑–∞–¥–∞—á–∞–º–∏</title><link href="http://proiot.ru/blog/posts/2017/04/29/freertos-obmen-dannymi-mezhdu-zadachami/" rel="alternate"></link><published>2017-04-29T00:00:00+03:00</published><updated>2017-04-29T00:00:00+03:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2017-04-29:/blog/posts/2017/04/29/freertos-obmen-dannymi-mezhdu-zadachami/</id><summary type="html">&lt;p&gt;–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º –æ—Å–≤–∞–∏–≤–∞—Ç—å &lt;a href="http://proiot.ru/blog/posts/2017/04/26/freertos-operatsionnaia-sistema-dlia-mikrokontrollerov/"&gt;FreeRTOS&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;–°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π –∏ –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ –ø–æ–Ω—è—Ç–Ω—ã–π —Å–ø–æ—Å–æ–± –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å –æ–±–º–µ–Ω –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –º–µ–∂–¥—É –∑–∞–¥–∞—á–∞–º–∏ ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±—â–∏–µ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ –¥–ª—è &lt;a href="http://proiot.ru/blog/posts/2017/02/05/picsimjs-soprogrammy-i-prosteishaia-mnogozadachnost/"&gt;–∫–æ–æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π&lt;/a&gt; –º–Ω–æ–≥–æ–∑–∞–¥–∞—á–Ω–æ—Å—Ç–∏ —Ç–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ –≤–ø–æ–ª–Ω–µ —É–º–µ—Å—Ç–µ–Ω. –û–¥–Ω–∞–∫–æ –≤ —Å–ª—É—á–∞–µ —Å –≤—ã—Ç–µ—Å–Ω—è—é—â–∏–π –º–Ω–æ–≥–æ–∑–∞–¥–∞—á–Ω–æ—Å—Ç—å—é –ø—Ä–∏ —Å–æ–≤–º–µ—Å—Ç–Ω–æ–º –¥–æ—Å—Ç—É–ø–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∑–∞–¥–∞—á –∫ –æ–±—â–µ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –≤–æ–∑–Ω–∏–∫–∞—é—Ç –ø—Ä–æ–±–ª–µ–º—ã &lt;a href="http://proiot.ru/blog/posts/2017/04/28/freertos-sovmestnyi-dostup-k-obshchim-resursam/"&gt;–∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç–∏&lt;/a&gt; –∏ –ø–æ—ç—Ç–æ–º—É –≤–æ FreeRTOS –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;p&gt;–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º –æ—Å–≤–∞–∏–≤–∞—Ç—å &lt;a href="http://proiot.ru/blog/posts/2017/04/26/freertos-operatsionnaia-sistema-dlia-mikrokontrollerov/"&gt;FreeRTOS&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;–°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π –∏ –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ –ø–æ–Ω—è—Ç–Ω—ã–π —Å–ø–æ—Å–æ–± –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å –æ–±–º–µ–Ω –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –º–µ–∂–¥—É –∑–∞–¥–∞—á–∞–º–∏ ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±—â–∏–µ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ –¥–ª—è &lt;a href="http://proiot.ru/blog/posts/2017/02/05/picsimjs-soprogrammy-i-prosteishaia-mnogozadachnost/"&gt;–∫–æ–æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π&lt;/a&gt; –º–Ω–æ–≥–æ–∑–∞–¥–∞—á–Ω–æ—Å—Ç–∏ —Ç–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ –≤–ø–æ–ª–Ω–µ —É–º–µ—Å—Ç–µ–Ω. –û–¥–Ω–∞–∫–æ –≤ —Å–ª—É—á–∞–µ —Å –≤—ã—Ç–µ—Å–Ω—è—é—â–∏–π –º–Ω–æ–≥–æ–∑–∞–¥–∞—á–Ω–æ—Å—Ç—å—é –ø—Ä–∏ —Å–æ–≤–º–µ—Å—Ç–Ω–æ–º –¥–æ—Å—Ç—É–ø–µ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∑–∞–¥–∞—á –∫ –æ–±—â–µ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –≤–æ–∑–Ω–∏–∫–∞—é—Ç –ø—Ä–æ–±–ª–µ–º—ã &lt;a href="http://proiot.ru/blog/posts/2017/04/28/freertos-sovmestnyi-dostup-k-obshchim-resursam/"&gt;–∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç–∏&lt;/a&gt; –∏ –ø–æ—ç—Ç–æ–º—É –≤–æ FreeRTOS –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –º–µ–∂–¥—É –∑–∞–¥–∞—á–∞–º–∏ –ø—Ä–∏–¥—É–º–∞–ª–∏ &lt;em&gt;–æ—á–µ—Ä–µ–¥–∏&lt;/em&gt;. –û—á–µ—Ä–µ–¥–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç —Å–æ–±–æ–π —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º FreeRTOS, –∫–æ—Ç–æ—Ä—ã–π –ª–µ–∂–∏—Ç –≤ –æ—Å–Ω–æ–≤–µ —Ä–∞–∑–ª–∏—á–Ω–æ–≥–æ —Ä–æ–¥–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–π –∑–∞–¥–∞—á –¥—Ä—É–≥ —Å –¥—Ä—É–≥–æ–º. –û—á–µ—Ä–µ–¥–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∫–∞–∫ –º–µ–∂–¥—É –∑–∞–¥–∞—á–∞–º–∏, —Ç–∞–∫ –∏ –º–µ–∂–¥—É –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è–º–∏ –∏ –∑–∞–¥–∞—á–∞–º–∏. –ï—Å–ª–∏ —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å —Å –≥–ª–æ–±–∞–ª—å–Ω—ã–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏, —Ç–æ –ø–æ–º–∏–º–æ —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º —Å –∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å—é –æ—á–µ—Ä–µ–¥—å –æ–±–ª–∞–¥–∞–µ—Ç —Ä—è–¥–æ–º –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π ‚Äî –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –Ω–∞ —á—Ç–µ–Ω–∏–µ/–∑–∞–ø–∏—Å—å, –ø–æ–∑–≤–æ–ª—è—é—â–∞—è –∑–∞–¥–∞—á–µ –Ω–µ —Ä–∞—Å—Ö–æ–¥–æ–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–Ω–æ–µ –≤—Ä–µ–º—è –Ω–∞ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ –æ–ø—Ä–æ—Å –≥–ª–æ–±–∞–ª—å–Ω–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π, —Ä–∞–∑–º–µ—Ä –æ—á–µ—Ä–µ–¥–∏ –Ω–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω 1, –¥–∞–Ω–Ω—ã–µ –º–æ–∂–Ω–æ –∫–ª–∞—Å—Ç—å –ª–∏–±–æ –≤ –Ω–∞—á–∞–ª–æ –ª–∏–±–æ –≤ –∫–æ–Ω–µ—Ü –æ—á–µ—Ä–µ–¥–∏. &lt;/p&gt;
&lt;p&gt;–í —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–µ–º–æ–º –ø—Ä–∏–º–µ—Ä–µ –æ–¥–Ω–∞ –∑–∞–¥–∞—á–∞ –±—É–¥–µ—Ç —Å–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –∫–Ω–æ–ø–∫–∏ –∏ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –æ –Ω–∞–∂–∞—Ç–∏–∏ –¥–≤—É–º –¥—Ä—É–≥–∏–º –∑–∞–¥–∞—á–∞–º —Å–≤–µ—Ç–æ–¥–∏–æ–¥–Ω—ã—Ö –∞–Ω–∏–º–∞—Ü–∏–π —Å –ø–æ–º–æ—â—å—é –¥–≤—É—Ö –æ—á–µ—Ä–µ–¥–µ–π. &lt;/p&gt;
&lt;p&gt;&lt;a href="http://mazko.github.io/MSP430.js/4dba761b9452073c41acde20a040de6b"&gt;MSP430.js&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2017/04/29/freertos-obmen-dannymi-mezhdu-zadachami/event.zip"&gt;–∏—Å—Ö–æ–¥–Ω–∏–∫–∏&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2017/04/29/freertos-obmen-dannymi-mezhdu-zadachami/ui.gif" style="width:55%; margin: 0 auto; display:block;"&gt;&lt;/p&gt;
&lt;p&gt;–û—á–µ—Ä–µ–¥—å –º–æ–∂–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å –≤ —Å–µ–±–µ –∫–æ–Ω–µ—á–Ω–æ–µ —á–∏—Å–ª–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞.
–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ —á–∏—Å–ª–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤, –∫–æ—Ç–æ—Ä–æ–µ –º–æ–∂–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å –æ—á–µ—Ä–µ–¥—å, –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ä–∞–∑–º–µ—Ä–æ–º –æ—á–µ—Ä–µ–¥–∏. –ö–∞–∫ —Ä–∞–∑–º–µ—Ä —ç–ª–µ–º–µ–Ω—Ç–∞, —Ç–∞–∫ –∏ —Ä–∞–∑–º–µ—Ä –æ—á–µ—Ä–µ–¥–∏ –∑–∞–¥–∞—é—Ç—Å—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –æ—á–µ—Ä–µ–¥–∏ –∏ –æ—Å—Ç–∞—é—Ç—Å—è –Ω–µ–∏–∑–º–µ–Ω–Ω—ã–º–∏ –¥–æ –µ–µ —É–¥–∞–ª–µ–Ω–∏—è. –í –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ –≤ —Ñ–∞–π–ª–µ main.c —Å–æ–∑–¥–∞—é—Ç—Å—è –¥–≤–µ –æ—á–µ—Ä–µ–¥–∏ &lt;code&gt;xQueueBtnsL = xQueueCreate(1, sizeof(char));&lt;/code&gt; –¥–ª—è –ª–µ–≤—ã—Ö –∏ –ø—Ä–∞–≤—ã—Ö –∫–Ω–æ–ø–æ–∫ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ. –ü–æ—Å–∫–æ–ª—å–∫—É —É –∑–∞–¥–∞—á–∏, –∫–æ—Ç–æ—Ä–∞—è –∫–ª–∞–¥—ë—Ç –¥–∞–Ω–Ω—ã–µ –≤ –æ—á–µ—Ä–µ–¥—å, –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –Ω–∏–∂–µ, —á–µ–º —É –∑–∞–±–∏—Ä–∞—é—â–µ–π —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ, —Ç–æ —Ä–∞–∑–º–µ—Ä–∞ –æ—á–µ—Ä–µ–¥–∏ –≤ 1 —ç–ª–µ–º–µ–Ω—Ç –æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ. –ü—Ä–∏ –¥—Ä—É–≥–∏—Ö —Ä–∞—Å–∫–ª–∞–¥–∞—Ö –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤ —Ä–∞–∑–º–µ—Ä –æ—á–µ—Ä–µ–¥–∏ –≤–æ–∑–º–æ–∂–Ω–æ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è —É–≤–µ–ª–∏—á–∏—Ç—å ‚Äî –≤ –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ –≤–æ–∑–º–æ–∂–Ω–∞ —Å–∏—Ç—É–∞—Ü–∏—è, –∫–æ–≥–¥–∞ –¥–∞–Ω–Ω—ã–µ –æ –Ω–∞–∂–∞—Ç–æ–π –∫–Ω–æ–ø–∫–µ –Ω–µ —É—Å–ø–µ–ª–∏ –¥–æ–π—Ç–∏ –¥–æ –∞–¥—Ä–µ—Å–∞—Ç–∞, –∞ –∫–Ω–æ–ø–æ—á–∫—É –Ω–∞–∂–∞–ª–∏ –∑–∞–Ω–æ–≤–æ –∏ —Ç–æ–≥–¥–∞ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç &lt;code&gt;configASSERT&lt;/code&gt; —Ç.–∫. –≤ –æ—á–µ—Ä–µ–¥–∏ –∑–∞–∫–æ–Ω—á–∏–ª–æ—Å—å –º–µ—Å—Ç–æ:&lt;/p&gt;
&lt;p&gt;&lt;em&gt;task_btn_scan.h&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;vTaskScanBtns&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;pvParameters&lt;/span&gt; &lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;queue.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="k"&gt;extern&lt;/span&gt; &lt;span class="k"&gt;volatile&lt;/span&gt; &lt;span class="n"&gt;QueueHandle_t&lt;/span&gt; &lt;span class="n"&gt;xQueueBtnsL&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;xQueueBtnsR&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;em&gt;task_btn_scan.c&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;FreeRTOS.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;task.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;task_btn_scan.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="k"&gt;volatile&lt;/span&gt; &lt;span class="n"&gt;QueueHandle_t&lt;/span&gt; &lt;span class="n"&gt;xQueueBtnsL&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;xQueueBtnsR&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;vTaskScanBtns&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;pvParameters&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="p"&gt;;;&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="n"&gt;P1IN&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt; &lt;span class="c1"&gt;// button pushed&lt;/span&gt;

    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;P1IN&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="n"&gt;b1111&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

      &lt;span class="cm"&gt;/* Send a char to the queue. Don&amp;#39;t block if the queue is already full &lt;/span&gt;
&lt;span class="cm"&gt;        (the third parameter is zero, so not block time is specified). */&lt;/span&gt;
      &lt;span class="n"&gt;configASSERT&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;xQueueSend&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;xQueueBtnsL&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;P1IN&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;pdPASS&lt;/span&gt; &lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="n"&gt;configASSERT&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;xQueueSend&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;xQueueBtnsR&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;P1IN&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;pdPASS&lt;/span&gt; &lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;P1IN&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;  &lt;span class="c1"&gt;// button released&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;

   &lt;span class="n"&gt;vTaskDelete&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="nb"&gt;NULL&lt;/span&gt; &lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–î–ª—è –∑–∞–ø–∏—Å–∏ —ç–ª–µ–º–µ–Ω—Ç–∞ –≤ –∫–æ–Ω–µ—Ü –æ—á–µ—Ä–µ–¥–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è API-—Ñ—É–Ω–∫—Ü–∏—è &lt;code&gt;xQueueSend()&lt;/code&gt;. –í –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ –Ω–∞ –º–æ–º–µ–Ω—Ç –∑–∞–ø–∏—Å–∏ –æ—á–µ—Ä–µ–¥—å –≤—Å–µ–≥–¥–∞ –ø—É—Å—Ç–∞, —Ç.–∫. —É –∑–∞–¥–∞—á–∏-–ø–æ–ª—É—á–∞—Ç–µ–ª—è –±–æ–ª–µ–µ –≤—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç, –ø–æ—ç—Ç–æ–º—É —Ç–∞–π–º–∞—É—Ç (—Ç—Ä–µ—Ç–∏–π –ø–∞—Ä–∞–º–µ—Ç—Ä) –ª–æ–≥–∏—á–Ω–æ –∑–∞–¥–∞—Ç—å ¬´0¬ª. –ú–æ–∂–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å 2 –∑–Ω–∞—á–µ–Ω–∏—è:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;pdPASS ‚Äî –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ —É—Å–ø–µ—à–Ω–æ –∑–∞–ø–∏—Å–∞–Ω—ã –≤ –æ—á–µ—Ä–µ–¥—å. –ï—Å–ª–∏ —Ç–∞–π–º–∞—É—Ç –Ω–µ —Ä–∞–≤–µ–Ω ¬´0¬ª, —Ç–æ –≤–æ–∑–≤—Ä–∞—Ç –∑–Ω–∞—á–µ–Ω–∏—è pdPASS –≥–æ–≤–æ—Ä–∏—Ç –æ —Ç–æ–º, —á—Ç–æ —Å–≤–æ–±–æ–¥–Ω–æ–µ –º–µ—Å—Ç–æ –≤ –æ—á–µ—Ä–µ–¥–∏ –ø–æ—è–≤–∏–ª–æ—Å—å –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è —Ç–∞–π–º–∞—É—Ç–∞ –∏ —ç–ª–µ–º–µ–Ω—Ç –±—ã–ª –ø–æ–º–µ—â–µ–Ω –≤ –æ—á–µ—Ä–µ–¥—å&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;errQUEUE_FULL ‚Äî –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ –Ω–µ –∑–∞–ø–∏—Å–∞–Ω—ã –≤ –æ—á–µ—Ä–µ–¥—å, —Ç–∞–∫ –∫–∞–∫
–æ—á–µ—Ä–µ–¥—å –∑–∞–ø–æ–ª–Ω–µ–Ω–∞. –ï—Å–ª–∏ —Ç–∞–π–º–∞—É—Ç –Ω–µ —Ä–∞–≤–µ–Ω ¬´0¬ª, —Ç–æ –≤–æ–∑–≤—Ä–∞—Ç –∑–Ω–∞—á–µ–Ω–∏—è errQUEUE_FULL –≥–æ–≤–æ—Ä–∏—Ç –æ —Ç–æ–º, —á—Ç–æ —Ç–∞–π–º–∞—É—Ç –∑–∞–≤–µ—Ä—à–µ–Ω, –∞ –º–µ—Å—Ç–æ –≤ –æ—á–µ—Ä–µ–¥–∏ —Ç–∞–∫ –∏ –Ω–µ –æ—Å–≤–æ–±–æ–¥–∏–ª–æ—Å—å&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;–ó–∞–¥–∞—á–∞-–ø–æ–ª—É—á–∞—Ç–µ–ª—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –Ω–∞–∂–∞—Ç–∏–∏ –∫–Ω–æ–ø–∫–∏, –∫–æ—Ç–æ—Ä–∞—è –∑–∞–ø—Ä–∞–≤–ª—è–µ—Ç –∞–Ω–∏–º–∞—Ü–∏—è–º–∏ –ª–µ–≤—ã—Ö —Å–≤–µ—Ç–æ–¥–∏–æ–¥–æ–≤ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Å–ª–µ–¥—É—é—â–∏–π –≤–∏–¥:&lt;/p&gt;
&lt;p&gt;&lt;em&gt;task_l_leds.c&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;FreeRTOS.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;task.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;task_l_leds.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;task_btn_scan.h&amp;quot; // queues&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="k"&gt;volatile&lt;/span&gt; &lt;span class="n"&gt;xSemaphoreHandle&lt;/span&gt; &lt;span class="n"&gt;xP4P5P6Mutex&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="c1"&gt;// C99&lt;/span&gt;
&lt;span class="c1"&gt;// an object that has static storage duration is not initialized explicitly, then:&lt;/span&gt;
&lt;span class="c1"&gt;// ‚Äî if it has pointer type, it is initialized to a null pointer;&lt;/span&gt;
&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="k"&gt;volatile&lt;/span&gt; &lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;port&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;vTaskLedsL&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;pvParameters&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

   &lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="p"&gt;;;&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

      &lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="n"&gt;button&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

      &lt;span class="c1"&gt;// portMAX_DELAY will cause the task to wait indefinitely&lt;/span&gt;
      &lt;span class="c1"&gt;// (without timing out) provided INCLUDE_vTaskSuspend is set to 1&lt;/span&gt;
      &lt;span class="n"&gt;portBASE_TYPE&lt;/span&gt; &lt;span class="n"&gt;xStatus&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;xQueueReceive&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; 
                &lt;span class="n"&gt;xQueueBtnsL&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;button&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;port&lt;/span&gt; &lt;span class="o"&gt;?&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;portMAX_DELAY&lt;/span&gt; &lt;span class="p"&gt;);&lt;/span&gt;

      &lt;span class="cm"&gt;/* Attempt to take the mutex, blocking indefinitely to wait for the mutex */&lt;/span&gt;
      &lt;span class="n"&gt;xSemaphoreTake&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;xP4P5P6Mutex&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;portMAX_DELAY&lt;/span&gt; &lt;span class="p"&gt;);&lt;/span&gt;

      &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;xStatus&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;pdPASS&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="c1"&gt;// set leds color&lt;/span&gt;
        &lt;span class="k"&gt;switch&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;button&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
          &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="nl"&gt;b10&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;   &lt;span class="cm"&gt;/* red blink */&lt;/span&gt;
            &lt;span class="n"&gt;P5OUT&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;=&lt;/span&gt; &lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="n"&gt;b11111&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;P6OUT&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;=&lt;/span&gt; &lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="n"&gt;b11111&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;port&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;P4OUT&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
            &lt;span class="k"&gt;break&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
          &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="nl"&gt;b100&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;  &lt;span class="cm"&gt;/* green blink */&lt;/span&gt;
            &lt;span class="n"&gt;P4OUT&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;=&lt;/span&gt; &lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="n"&gt;b11111&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;P6OUT&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;=&lt;/span&gt; &lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="n"&gt;b11111&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;port&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;P5OUT&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
            &lt;span class="k"&gt;break&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
          &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="nl"&gt;b1000&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="cm"&gt;/* blue blink */&lt;/span&gt;
            &lt;span class="n"&gt;P4OUT&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;=&lt;/span&gt; &lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="n"&gt;b11111&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;P5OUT&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;=&lt;/span&gt; &lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="n"&gt;b11111&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;port&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;P6OUT&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
            &lt;span class="k"&gt;break&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
          &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="nl"&gt;b1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;    &lt;span class="cm"&gt;/* off blink */&lt;/span&gt;
            &lt;span class="n"&gt;P4OUT&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;=&lt;/span&gt; &lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="n"&gt;b11111&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;P5OUT&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;=&lt;/span&gt; &lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="n"&gt;b11111&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;P6OUT&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;=&lt;/span&gt; &lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="n"&gt;b11111&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;port&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
            &lt;span class="k"&gt;break&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;  
        &lt;span class="p"&gt;}&lt;/span&gt;
      &lt;span class="p"&gt;}&lt;/span&gt;

      &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;port&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;port&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;port&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="n"&gt;b11111&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;port&lt;/span&gt; &lt;span class="o"&gt;^&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="n"&gt;b11111&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="n"&gt;b11111&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
      &lt;span class="p"&gt;}&lt;/span&gt;

      &lt;span class="cm"&gt;/* The mutex MUST be given back! */&lt;/span&gt;
      &lt;span class="n"&gt;xSemaphoreGive&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;xP4P5P6Mutex&lt;/span&gt; &lt;span class="p"&gt;);&lt;/span&gt;
   &lt;span class="p"&gt;}&lt;/span&gt;

   &lt;span class="n"&gt;vTaskDelete&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="nb"&gt;NULL&lt;/span&gt; &lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–î–ª—è —Å—á–∏—Ç—ã–≤–∞–Ω–∏—è —ç–ª–µ–º–µ–Ω—Ç–∞ —Å —É–¥–∞–ª–µ–Ω–∏–µ–º –µ–≥–æ –∏–∑ –æ—á–µ—Ä–µ–¥–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è API-—Ñ—É–Ω–∫—Ü–∏—è &lt;code&gt;xQueueReceive()&lt;/code&gt;. –¢–∞–π–º–∞—É—Ç &lt;code&gt;portMAX_DELAY&lt;/code&gt; –≤ &lt;a href="http://proiot.ru/blog/posts/2017/04/28/freertos-sovmestnyi-dostup-k-obshchim-resursam/"&gt;–ø–∞—Ä–µ&lt;/a&gt; —Å &lt;code&gt;INCLUDE_vTaskSuspend&lt;/code&gt; –∑–∞–¥–∞—ë—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–µ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è. –¢–∞–∫–∂–µ –º–æ–∂–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å 2 –∑–Ω–∞—á–µ–Ω–∏—è:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;pdPASS ‚Äî –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –¥–∞–Ω–Ω—ã–µ —É—Å–ø–µ—à–Ω–æ –ø—Ä–æ—á–∏—Ç–∞–Ω—ã –∏–∑ –æ—á–µ—Ä–µ–¥–∏. –ï—Å–ª–∏ —Ç–∞–π–º–∞—É—Ç –Ω–µ —Ä–∞–≤–µ–Ω ¬´0¬ª, —Ç–æ –≤–æ–∑–≤—Ä–∞—Ç –∑–Ω–∞—á–µ–Ω–∏—è pdPASS –≥–æ–≤–æ—Ä–∏—Ç –æ —Ç–æ–º, —á—Ç–æ —ç–ª–µ–º–µ–Ω—Ç –≤ –æ—á–µ—Ä–µ–¥–∏ –ø–æ—è–≤–∏–ª—Å—è (–∏–ª–∏ —É–∂–µ –±—ã–ª —Ç–∞–º) –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è —Ç–∞–π–º-–∞—É—Ç–∞ –∏ –±—ã–ª —É—Å–ø–µ—à–Ω–æ –ø—Ä–æ—á–∏—Ç–∞–Ω&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;errQUEUE_EMPTY ‚Äî –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —ç–ª–µ–º–µ–Ω—Ç –Ω–µ –ø—Ä–æ—á–∏—Ç–∞–Ω –∏–∑ –æ—á–µ—Ä–µ–¥–∏, —Ç–∞–∫ –∫–∞–∫ –æ—á–µ—Ä–µ–¥—å –ø—É—Å—Ç–∞. –ï—Å–ª–∏ —Ç–∞–π–º–∞—É—Ç –Ω–µ —Ä–∞–≤–µ–Ω ¬´0¬ª, —Ç–æ –≤–æ–∑–≤—Ä–∞—Ç –∑–Ω–∞—á–µ–Ω–∏—è errQUEUE_FULL –≥–æ–≤–æ—Ä–∏—Ç –æ —Ç–æ–º, —á—Ç–æ —Ç–∞–π–º–∞—É—Ç –∑–∞–≤–µ—Ä—à–µ–Ω, –∞ –Ω–∏–∫–∞–∫–∞—è –¥—Ä—É–≥–∞—è –∑–∞–¥–∞—á–∞ –∏–ª–∏ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ —Ç–∞–∫ –∏ –Ω–µ –∑–∞–ø–∏—Å–∞–ª–∏ —ç–ª–µ–º–µ–Ω—Ç –≤ –æ—á–µ—Ä–µ–¥—å&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;–í—Å—ë –±—ã —Ö–æ—Ä–æ—à–æ, –æ–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–æ –µ—Å—Ç—å –æ–¥–Ω–æ –Ω–æ ‚Äî –∑–∞—á–µ–º –Ω–∞–º –≤–æ–æ–±—â–µ –æ—Ç–¥–µ–ª—å–Ω–∞—è –∑–∞–¥–∞—á–∞ –¥–ª—è —Å—á–∏—Ç—ã–≤–∞–Ω–∏—è –∫–Ω–æ–ø–æ–∫ ? –í–µ–¥—å –æ–Ω–∞ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –∫—Ä—É—Ç–∏—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ –∏ –ø–æ—Ç—Ä–µ–±–ª—è–µ—Ç —Ä–µ—Å—É—Ä—Å—ã –¥–∞–∂–µ –∫–æ–≥–¥–∞ –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –Ω–∏–∫–∞–∫–æ–π –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Å–æ —Å—Ç–æ—Ä–æ–Ω—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –ö—É–¥–∞ –±–æ–ª–µ–µ –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–º —Ä–µ—à–µ–Ω–∏–µ–º –±—ã–ª–æ –±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –ø–æ–¥–æ–±–Ω—ã—Ö —Ü–µ–ª–µ–π &lt;a href="http://proiot.ru/blog/posts/2017/02/05/picsimjs-soprogrammy-i-prosteishaia-mnogozadachnost/"&gt;–ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ&lt;/a&gt;, –≤—ã–∑—ã–≤–∞–µ–º–æ–µ –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://mazko.github.io/MSP430.js/abb4216611a94d97da323920d61175b6"&gt;MSP430.js&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2017/04/29/freertos-obmen-dannymi-mezhdu-zadachami/event_isr.zip"&gt;–∏—Å—Ö–æ–¥–Ω–∏–∫–∏&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2017/04/29/freertos-obmen-dannymi-mezhdu-zadachami/isr.png" style="width:55%; margin: 0 auto; display:block;"&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;btn_scan.c&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;btn_scan.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="k"&gt;volatile&lt;/span&gt; &lt;span class="n"&gt;QueueHandle_t&lt;/span&gt; &lt;span class="n"&gt;xQueueBtnsL&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;xQueueBtnsR&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;btn_scan_init&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="c1"&gt;// clear the interrupt flag&lt;/span&gt;
  &lt;span class="n"&gt;P1IFG&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="c1"&gt;// enable interrupt on BIT 0..7&lt;/span&gt;
  &lt;span class="n"&gt;P1IE&lt;/span&gt;  &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mh"&gt;0xFF&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;__attribute__&lt;/span&gt; &lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="n"&gt;interrupt&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PORT1_VECTOR&lt;/span&gt;&lt;span class="p"&gt;)))&lt;/span&gt; &lt;span class="n"&gt;Port1_ISR&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;__attribute__&lt;/span&gt; &lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="n"&gt;interrupt&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PORT1_VECTOR&lt;/span&gt;&lt;span class="p"&gt;)))&lt;/span&gt; &lt;span class="n"&gt;Port1_ISR&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="n"&gt;P1IFG&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;  &lt;span class="c1"&gt;// clear the interrupt flag&lt;/span&gt;

  &lt;span class="n"&gt;BaseType_t&lt;/span&gt; &lt;span class="n"&gt;xHigherPriorityTaskWoken&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="cm"&gt;/* xHigherPriorityTaskWoken must be initialised to pdFALSE. */&lt;/span&gt;
  &lt;span class="n"&gt;xHigherPriorityTaskWoken&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pdFALSE&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;P1IN&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="n"&gt;b1111&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

    &lt;span class="cm"&gt;/* xHigherPriorityTaskWoken will get set to pdTRUE if writing to the &lt;/span&gt;
&lt;span class="cm"&gt;       queue causes a task to leave the Blocked state, and the task &lt;/span&gt;
&lt;span class="cm"&gt;       leaving the Blocked state has a priority higher than the currently &lt;/span&gt;
&lt;span class="cm"&gt;       executing task (the task that was interrupted). */&lt;/span&gt;

    &lt;span class="n"&gt;configASSERT&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;xQueueSendFromISR&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; 
        &lt;span class="n"&gt;xQueueBtnsL&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;P1IN&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;xHigherPriorityTaskWoken&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;pdPASS&lt;/span&gt; &lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;configASSERT&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;xQueueSendFromISR&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; 
        &lt;span class="n"&gt;xQueueBtnsR&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;P1IN&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;xHigherPriorityTaskWoken&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;pdPASS&lt;/span&gt; &lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;

  &lt;span class="cm"&gt;/* If xHigherPriorityTaskWoken is now set to pdTRUE then a context&lt;/span&gt;
&lt;span class="cm"&gt;     switch should be requested. */&lt;/span&gt;
  &lt;span class="n"&gt;portYIELD_FROM_ISR&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;xHigherPriorityTaskWoken&lt;/span&gt; &lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ü–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–¥–∞—á —Å–æ–∫—Ä–∞—Ç–∏–ª–æ—Å—å —Å 5 –¥–æ 4 –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ –æ—Å–≤–æ–±–æ–¥–∏–ª–∞—Å—å RAM. –§—É–Ω–∫—Ü–∏—é &lt;code&gt;xQueueSend()&lt;/code&gt; –Ω–µ–ª—å–∑—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è—Ö ‚Äî –¥–ª—è —ç—Ç–æ–≥–æ –µ—Å—Ç—å &lt;code&gt;xQueueSendFromISR()&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2017/04/26/freertos-operatsionnaia-sistema-dlia-mikrokontrollerov/"&gt;–ì–∏–±—Ä–∏–¥–Ω–∞—è&lt;/a&gt; –º–Ω–æ–≥–æ–∑–∞–¥–∞—á–Ω–æ—Å—Ç—å –≤–æ FreeRTOS —è–≤–ª—è–µ—Ç—Å—è –∫–æ–º–±–∏–Ω–∞—Ü–∏–µ–π –≤—ã—Ç–µ—Å–Ω—è—é—â–µ–π –∏ –∫–æ–æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π. –í –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ –ø–æ –Ω–∞–∂–∞—Ç–∏—é –Ω–∞ –∫–Ω–æ–ø–∫—É, –Ω–æ –ø–æ –æ–∫–æ–Ω—á–∞–Ω–∏–∏ —Ä–∞–±–æ—Ç—ã –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –Ω–µ –∫ —Ç–µ–∫—É—â–µ–π –Ω–∏–∑–∫–æ–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–æ–π –∑–∞–¥–∞—á–µ, –∞ –∫ –±–æ–ª–µ–µ –≤—ã—Å–æ–∫–æ–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–æ–π –ø—É—Ç—ë–º –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ &lt;code&gt;portYIELD_FROM_ISR&lt;/code&gt; –Ω–µ –¥–æ–∂–∏–¥–∞—è—Å—å –æ–∫–æ–Ω—á–∞–Ω–∏—è —Ç–µ–∫—É—â–µ–≥–æ –∫–≤–∞–Ω—Ç–∞ –≤—Ä–µ–º–µ–Ω–∏ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞. –ì–∏–±—Ä–∏–¥–Ω–∞—è –ø–æ–¥—Ö–æ–¥ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∫—Ä–∞—Ç–∏—Ç—å –≤—Ä–µ–º—è —Ä–µ–∞–∫—Ü–∏–∏ —Å–∏—Å—Ç–µ–º—ã –Ω–∞ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ.&lt;/p&gt;</content><category term="msp430"></category><category term="RTOS"></category></entry><entry><title>FreeRTOS - —Å–æ–≤–º–µ—Å—Ç–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –æ–±—â–∏–º —Ä–µ—Å—É—Ä—Å–∞–º</title><link href="http://proiot.ru/blog/posts/2017/04/28/freertos-sovmestnyi-dostup-k-obshchim-resursam/" rel="alternate"></link><published>2017-04-28T00:00:00+03:00</published><updated>2017-04-28T00:00:00+03:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2017-04-28:/blog/posts/2017/04/28/freertos-sovmestnyi-dostup-k-obshchim-resursam/</id><summary type="html">&lt;p&gt;–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º –æ—Å–≤–∞–∏–≤–∞—Ç—å &lt;a href="http://proiot.ru/blog/posts/2017/04/26/freertos-operatsionnaia-sistema-dlia-mikrokontrollerov/"&gt;FreeRTOS&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞ –æ—à–∏–±–æ–∫ –≤ RTOS ‚Äî —ç—Ç–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω–Ω—ã–π –æ–±—â–∏–π (—Å–æ–≤–º–µ—Å—Ç–Ω—ã–π) –¥–æ—Å—Ç—É–ø –∫ —Ä–µ—Å—É—Ä—Å–∞–º –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∑–∞–¥–∞—á –∏/–∏–ª–∏ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π. –û–¥–Ω–∞ –∑–∞–¥–∞—á–∞ –ø–æ–ª—É—á–∞–µ—Ç –¥–æ—Å—Ç—É–ø –∫ —Ä–µ—Å—É—Ä—Å—É, –Ω–∞—á–∏–Ω–∞–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è —Å –Ω–∏–º, –Ω–æ –Ω–µ —É—Å–ø–µ–≤–∞–µ—Ç –∑–∞–≤–µ—Ä—à–∏—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å —ç—Ç–∏–º —Ä–µ—Å—É—Ä—Å–æ–º –¥–æ –∫–æ–Ω—Ü–∞ –∫–∞–∫ –≤ —ç—Ç–æ—Ç –º–æ–º–µ–Ω—Ç –º–æ–∂–µ—Ç –ø—Ä–æ–∏–∑–æ–π—Ç–∏ ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;p&gt;–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º –æ—Å–≤–∞–∏–≤–∞—Ç—å &lt;a href="http://proiot.ru/blog/posts/2017/04/26/freertos-operatsionnaia-sistema-dlia-mikrokontrollerov/"&gt;FreeRTOS&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;–ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –ø—Ä–∏—á–∏–Ω–∞ –æ—à–∏–±–æ–∫ –≤ RTOS ‚Äî —ç—Ç–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω–Ω—ã–π –æ–±—â–∏–π (—Å–æ–≤–º–µ—Å—Ç–Ω—ã–π) –¥–æ—Å—Ç—É–ø –∫ —Ä–µ—Å—É—Ä—Å–∞–º –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∑–∞–¥–∞—á –∏/–∏–ª–∏ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π. –û–¥–Ω–∞ –∑–∞–¥–∞—á–∞ –ø–æ–ª—É—á–∞–µ—Ç –¥–æ—Å—Ç—É–ø –∫ —Ä–µ—Å—É—Ä—Å—É, –Ω–∞—á–∏–Ω–∞–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è —Å –Ω–∏–º, –Ω–æ –Ω–µ —É—Å–ø–µ–≤–∞–µ—Ç –∑–∞–≤–µ—Ä—à–∏—Ç—å –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å —ç—Ç–∏–º —Ä–µ—Å—É—Ä—Å–æ–º –¥–æ –∫–æ–Ω—Ü–∞ –∫–∞–∫ –≤ —ç—Ç–æ—Ç –º–æ–º–µ–Ω—Ç –º–æ–∂–µ—Ç –ø—Ä–æ–∏–∑–æ–π—Ç–∏:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;–≤ —Å–ª—É—á–∞–µ —Å –≤—ã—Ç–µ—Å–Ω—è—é—â–µ–π –º–Ω–æ–≥–æ–∑–∞–¥–∞—á–Ω–æ—Å—Ç—å—é ‚Äî –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∑–∞–¥–∞—á–∏ &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;–≤ –ª—é–±–æ–π —Å–∏—Å—Ç–µ–º–µ –¥–∞–∂–µ –±–µ–∑ RTOS ‚Äî &lt;a href="http://proiot.ru/blog/posts/2017/02/05/picsimjs-soprogrammy-i-prosteishaia-mnogozadachnost/"&gt;–ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ&lt;/a&gt; &lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;–ï—Å–ª–∏ –¥—Ä—É–≥–∞—è –∑–∞–¥–∞—á–∞ –∏–ª–∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –≤–æ–∑–Ω–∏–∫—à–µ–≥–æ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è –æ–±—Ä–∞—Ç—è—Ç—Å—è –∫ —ç—Ç–æ–º—É –∂–µ —Å–∞–º–æ–º—É —Ä–µ—Å—É—Ä—Å—É, —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–æ—Å–∏—Ç –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä –∏–∑-–∑–∞ –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏—è –ø–µ—Ä–≤–æ–π –∑–∞–¥–∞—á–∏, —Ç–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞–±–æ—Ç—ã –ø—Ä–æ–≥—Ä–∞–º–º—ã –æ—á–µ–Ω—å —Å–ª–æ–∂–Ω–æ –ø—Ä–µ–¥—É–≥–∞–¥–∞—Ç—å. –ë–∞–≥–∏, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –º–Ω–æ–≥–æ–∑–∞–¥–∞—á–Ω–æ—Å—Ç—å—é –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –æ—á–µ–Ω—å –∫–æ–≤–∞—Ä–Ω—ã, —Ç–∞–∫ –∫–∞–∫ –ø—Ä–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –º–æ–≥—É—Ç –ø—Ä–æ—è–≤–ª—è—Ç—å—Å—è –ø–æ—á—Ç–∏ —Å–ª—É—á–∞–π–Ω—ã–º –æ–±—Ä–∞–∑–æ–º –∏ —Ç—É—Ç –º–Ω–æ–≥–æ–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ –∫–≤–∞–ª–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–∞. &lt;/p&gt;
&lt;p&gt;–í –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ –ª–µ–≤—ã–µ –∏ –ø—Ä–∞–≤—ã–µ RGB —Å–≤–µ—Ç–æ–¥–∏–æ–¥—ã –∏–º–µ—é—Ç –æ–±—â–∏–µ –ø–æ—Ä—Ç—ã P4OUT, P5OUT –∏ P6OUT ‚Äî –±–∏—Ç—ã 0..4 –∑–∞ –ª–µ–≤—ã–º–∏, –∞ 5..7 –∑–∞ –ø—Ä–∞–≤—ã–º–∏. –ê–Ω–∞–ª–æ–≥–∏—á–Ω–∞—è —Å–∏—Ç—É–∞—Ü–∏—è —Å –ø–æ—Ä—Ç–æ–º P3OUT, –≥–¥–µ –¥–≤–∞ –º–ª–∞–¥—à–∏—Ö –±–∏—Ç–∞ –∑–∞ –¥–∏—Å–ø–ª–µ–µ–º, –∞ –æ—Å—Ç–∞–ª—å–Ω—ã–µ 6 –¥–ª—è –¥–≤—É—Ö –ø—Ä–∞–≤—ã—Ö RGB —Å–≤–µ—Ç–æ–¥–∏–æ–¥–æ–≤. –ü—Ä–æ–±–ª–µ–º–∞ –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ç–æ–º, —á—Ç–æ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–µ–π—Å—Ç–≤–∏–π –Ω–∞–¥ –ø–æ—Ä—Ç–∞–º–∏ —Å –æ—á–µ–Ω—å –±–æ–ª—å—à–æ–π –¥–æ–ª–µ–π –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ —è–≤–ª—è–µ—Ç—Å—è –Ω–µ –∞—Ç–æ–º–∞—Ä–Ω–æ–π, –ø–æ—Å–∫–æ–ª—å–∫—É –∑–∞–Ω–∏–º–∞–µ—Ç –±–æ–ª—å—à–µ –æ–¥–Ω–æ–π –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–æ –ø–æ–ª–Ω–æ–≥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è, –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–µ—Ä–≤–∞–Ω–∞ –ø–æ—Å–µ—Ä–µ–¥–∏–Ω–µ. –ù–∞–ø—Ä–∏–º–µ—Ä –ø—É—Å—Ç—å —Å—Ç–æ–∏—Ç –∑–∞–¥–∞—á–∞ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å (—Å–±—Ä–æ—Å–∏—Ç—å, –∏–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å ‚Äî –Ω–µ –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è) –æ–¥–∏–Ω –±–∏—Ç –≤ —Ä–µ–≥–∏—Å—Ç—Ä–µ –ø–æ—Ä—Ç–∞ –≤–≤–æ–¥–∞/–≤—ã–≤–æ–¥–∞. –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–æ–≤ —Ç—Ä–∞–Ω—Å–ª–∏—Ä—É–µ—Ç —Ç–∞–∫–æ–π –∫–æ–¥ –≤ –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π –∞—Å—Å–µ–º–±–ª–µ—Ä–∞:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ—Ä—Ç–∞ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ –≤ —Ä–µ–≥–∏—Å—Ç—Ä –æ–±—â–µ–≥–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;–º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è (—Å–±—Ä–æ—Å–∏—Ç—å, –∏–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∏ —Ç.–¥.) —Ä–µ–≥–∏—Å—Ç—Ä–∞ –æ–±—â–µ–≥–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;–æ–±—Ä–∞—Ç–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –∏–∑ —Ä–µ–≥–∏—Å—Ç—Ä–∞ –æ–±—â–µ–≥–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –≤ –ø–æ—Ä—Ç&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;–ó–∞–¥–∞—á–∞ –ê –∑–∞–≥—Ä—É–∂–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ—Ä—Ç–∞ –≤ —Ä–µ–≥–∏—Å—Ç—Ä –æ–±—â–µ–≥–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è --&amp;gt; –≤ —ç—Ç–æ—Ç –º–æ–º–µ–Ω—Ç –µ–µ –≤—ã—Ç–µ—Å–Ω—è–µ—Ç –∑–∞–¥–∞—á–∞ –ë, –ø—Ä–∏ —ç—Ç–æ–º –∑–∞–¥–∞—á–∞ –ê –Ω–µ ¬´—É—Å–ø–µ–ª–∞¬ª –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –∏ –∑–∞–ø–∏—Å–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –æ–±—Ä–∞—Ç–Ω–æ –≤ –ø–æ—Ä—Ç --&amp;gt; –∑–∞–¥–∞—á–∞ –ë –≤ —Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å —Ç–æ–∂–µ –∏–∑–º–µ–Ω—è–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ—Ä—Ç–∞ –∏ –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è --&amp;gt; –∑–∞–¥–∞—á–∞ –ê –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è —Å —Ç–æ—á–∫–∏, –≤ –∫–æ—Ç–æ—Ä–æ–π –µ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –±—ã–ª–æ –ø—Ä–µ—Ä–≤–∞–Ω–æ. –ö–∞–∫–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –±—É–¥–µ—Ç –∑–∞–ø–∏—Å–∞–Ω–æ –≤ –ø–æ—Ä—Ç ? –Ø–≤–Ω–æ –Ω–µ —Ç–æ, —á—Ç–æ –∑–∞–¥—É–º—ã–≤–∞–ª –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://mazko.github.io/MSP430.js/fb921e5be78d0de2cd0620c4fb8e36c7"&gt;MSP430.js&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2017/04/28/freertos-sovmestnyi-dostup-k-obshchim-resursam/mutex.zip"&gt;–∏—Å—Ö–æ–¥–Ω–∏–∫–∏&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2017/04/28/freertos-sovmestnyi-dostup-k-obshchim-resursam/ui.gif" style="width:55%; margin: 0 auto; display:block;"&gt;&lt;/p&gt;
&lt;p&gt;–î–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –æ–±–µ—Å–ø–µ—á–∏—Ç—å —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏ –¥–æ—Å—Ç—É–ø –∫ —Ä–µ—Å—É—Ä—Å—É, –∫–æ—Ç–æ—Ä—ã–π —è–≤–ª—è–µ—Ç—Å—è –æ–±—â–∏–º –¥–ª—è –∑–∞–¥–∞—á, –ª–∏–±–æ –æ–±—â–∏–º –¥–ª—è –∑–∞–¥–∞—á –∏ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π, –≤ RTOS –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω –º–µ—Ö–∞–Ω–∏–∑–º –≤–∑–∞–∏–º–Ω–æ–≥–æ –∏—Å–∫–ª—é—á–µ–Ω–∏—è (mutual exclusion). –≠—Ç–æ—Ç –º–µ—Ö–∞–Ω–∏–∑–º –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –µ—Å–ª–∏ –∑–∞–¥–∞—á–∞ –Ω–∞—á–∞–ª–∞ –≤—ã–ø–æ–ª–Ω—è—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è —Å —Ä–µ—Å—É—Ä—Å–æ–º, —Ç–æ –Ω–∏–∫–∞–∫–∞—è –¥—Ä—É–≥–∞—è –∑–∞–¥–∞—á–∞ (–∏–ª–∏ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–µ) –Ω–µ —Å–º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω–æ–º—É —Ä–µ—Å—É—Ä—Å—É, –ø–æ–∫–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –Ω–∏–º –Ω–µ –±—É–¥—É—Ç –∑–∞–≤–µ—Ä—à–µ–Ω—ã –ø–µ—Ä–≤–æ–π –∑–∞–¥–∞—á–µ–π.&lt;/p&gt;
&lt;p&gt;FreeRTOS –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –≤–∑–∞–∏–º–Ω–æ–≥–æ –∏—Å–∫–ª—é—á–µ–Ω–∏—è ‚Äî –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Å–µ–∫—Ü–∏–∏, –º—å—é—Ç–µ–∫—Å—ã, –∑–∞–¥–∞—á–∏-—Å—Ç–æ—Ä–æ–∂–∞. –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Å–µ–∫—Ü–∏–∏ ‚Äî —ç—Ç–æ –æ—á–µ–Ω—å –≥—Ä—É–±—ã–π —Å–ø–æ—Å–æ–± —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –≤–∑–∞–∏–º–Ω–æ–≥–æ –∏—Å–∫–ª—é—á–µ–Ω–∏—è, —Ç.–∫. –æ–Ω–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –ª–∏–±–æ –ø—Ä–æ—Å—Ç–æ –ø—É—Ç–µ–º –∑–∞–ø—Ä–µ—Ç–∞ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π –ª–∏–±–æ –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–∫–æ–π –≤—Å–µ–≥–æ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞. –õ—É—á—à–µ –ø–æ –º–µ—Ä–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º—å—é—Ç–µ–∫—Å–∞ –∏–∑ —Ç–µ–ª–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ) –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º—å—é—Ç–µ–∫—Å—ã ‚Äî –¥–ª—è —ç—Ç–æ–≥–æ –Ω—É–∂–Ω–æ –≤ —Ñ–∞–π–ª–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ &lt;em&gt;FreeRTOSConfig.h&lt;/em&gt; –¥–æ–±–∞–≤–∏—Ç—å –º–∞–∫—Ä–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ &lt;code&gt;#define configUSE_MUTEXES 1&lt;/code&gt; –∏ —Ç–∞–∫–∂–µ –º—å—é—Ç–µ–∫—Å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —è–≤–Ω–æ —Å–æ–∑–¥–∞–Ω –ø–µ—Ä–µ–¥ –ø–µ—Ä–≤—ã–º –µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –Ω–∞–ø—Ä–∏–º–µ—Ä &lt;code&gt;xP4P5P6Mutex = xSemaphoreCreateMutex();&lt;/code&gt; –≤ main.c –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞. –ú–∞–∫—Ä–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ &lt;code&gt;#define INCLUDE_vTaskSuspend 1&lt;/code&gt; –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ ‚Äî –µ—Å–ª–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ, —Ç–æ –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã &lt;code&gt;portMAX_DELAY&lt;/code&gt; –∑–∞–¥–∞—á–∞ –º–æ–∂–µ—Ç –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ –±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏ —Å–∫–æ–ª—å —É–≥–æ–¥–Ω–æ –¥–æ–ª–≥–æ. –≠—Ç–æ –∫–∞—Å–∞–µ—Ç—Å—è –Ω–µ —Ç–æ–ª—å–∫–æ –º—å—é—Ç–µ–∫—Å–æ–≤, –Ω–æ –∏ –¥—Ä—É–≥–∏—Ö API FreeRTOS ‚Äî –Ω–∞–ø—Ä–∏–º–µ—Ä –æ—á–µ—Ä–µ–¥–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω—ã –≤ —Å–ª–µ–¥—É—é—â–µ–º –º–∞—Ç–µ—Ä–∏–∞–ª–µ.&lt;/p&gt;
&lt;p&gt;–í–æ—Ç –∫–∞–∫ –±—É–¥–µ—Ç —Ç–µ–ø–µ—Ä—å –≤—ã–≥–ª—è–¥–µ—Ç—å –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è –∑–∞–¥–∞—á–∏ –¥–ª—è –∞–Ω–∏–º–∞—Ü–∏–∏ –ª–µ–≤—ã—Ö —Å–≤–µ—Ç–æ–¥–∏–æ–¥–æ–≤:&lt;/p&gt;
&lt;p&gt;&lt;em&gt;task_l_leds.h&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;vTaskLedsL&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;pvParameters&lt;/span&gt; &lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;FreeRTOS.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;semphr.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="k"&gt;extern&lt;/span&gt; &lt;span class="k"&gt;volatile&lt;/span&gt; &lt;span class="n"&gt;xSemaphoreHandle&lt;/span&gt; &lt;span class="n"&gt;xP4P5P6Mutex&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;em&gt;task_l_leds.c&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;FreeRTOS.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;task.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;task_l_leds.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="k"&gt;volatile&lt;/span&gt; &lt;span class="n"&gt;xSemaphoreHandle&lt;/span&gt; &lt;span class="n"&gt;xP4P5P6Mutex&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="n"&gt;portTickType&lt;/span&gt; &lt;span class="n"&gt;xLastWakeTime&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;rotate_rgb&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;volatile&lt;/span&gt; &lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="n"&gt;port&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

      &lt;span class="cm"&gt;/* Attempt to take the mutex, blocking indefinitely to wait for the mutex */&lt;/span&gt;
      &lt;span class="n"&gt;xSemaphoreTake&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;xP4P5P6Mutex&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;portMAX_DELAY&lt;/span&gt; &lt;span class="p"&gt;);&lt;/span&gt;

      &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;port&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;port&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="n"&gt;b11111&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="n"&gt;b10000&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

      &lt;span class="cm"&gt;/* The mutex MUST be given back! */&lt;/span&gt;
      &lt;span class="n"&gt;xSemaphoreGive&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;xP4P5P6Mutex&lt;/span&gt; &lt;span class="p"&gt;);&lt;/span&gt;

      &lt;span class="n"&gt;vTaskDelayUntil&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;xLastWakeTime&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt; &lt;span class="cm"&gt;/* ticks */&lt;/span&gt; &lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;vTaskLedsL&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;pvParameters&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

   &lt;span class="n"&gt;xLastWakeTime&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;xTaskGetTickCount&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;

   &lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="p"&gt;;;&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
     &lt;span class="n"&gt;rotate_rgb&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;P4OUT&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
     &lt;span class="n"&gt;rotate_rgb&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;P5OUT&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
     &lt;span class="n"&gt;rotate_rgb&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;P6OUT&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
   &lt;span class="p"&gt;}&lt;/span&gt;

   &lt;span class="n"&gt;vTaskDelete&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="nb"&gt;NULL&lt;/span&gt; &lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–¢–æ–ª—å–∫–æ –æ–¥–Ω–∞ –∑–∞–¥–∞—á–∞ –º–æ–∂–µ—Ç –≤–ª–∞–¥–µ—Ç—å –º—å—é—Ç–µ–∫—Å–æ–º. –í –ø—Ä–∏–≤–µ–¥–µ–Ω–Ω–æ–º –ø—Ä–∏–º–µ—Ä–µ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –ø–æ–ø—ã—Ç–∫–∞ –≤–∑—è—Ç—å –º—å—é—Ç–µ–∫—Å  &lt;code&gt;xSemaphoreTake&lt;/code&gt; —Å –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–º –≤—Ä–µ–º–µ–Ω–µ–º –æ–∂–∏–¥–∞–Ω–∏—è &lt;code&gt;portMAX_DELAY&lt;/code&gt; –≤ —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ –æ–Ω –ø–æ–∫–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω. –í—ã—Ö–æ–¥ –∏–∑ &lt;code&gt;xSemaphoreTake()&lt;/code&gt; –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç —Ç–æ–ª—å–∫–æ —Ç–æ–≥–¥–∞, –∫–æ–≥–¥–∞ –º—å—é—Ç–µ–∫—Å —É—Å–ø–µ—à–Ω–æ –ø–æ–ª—É—á–µ–Ω, —Ç–∞–∫ —á—Ç–æ –Ω–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤–æ–∑–≤—Ä–∞—Ç–∞ —Ñ—É–Ω–∫—Ü–∏–∏, –Ω–æ –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ª—é–±–æ–π –¥—Ä—É–≥–æ–π –ø–µ—Ä–∏–æ–¥ –∑–∞–¥–µ—Ä–∂–∫–∏, –æ—Ç–ª–∏—á–Ω—ã–π –æ—Ç &lt;code&gt;portMAX_DELAY&lt;/code&gt;, —Ç–æ –∫–æ–¥ –¥–æ–ª–∂–µ–Ω –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ &lt;code&gt;xSemaphoreTake()&lt;/code&gt; –≤–µ—Ä–Ω—É–ª–∞ &lt;code&gt;pdTRUE&lt;/code&gt;. –ü–æ –æ–∫–æ–Ω—á–∞–Ω–∏–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –¥–µ–π—Å—Ç–≤–∏–π –Ω–∞–¥ –æ–±—â–∏–º —Ä–µ—Å—É—Ä—Å–æ–º –º—å—é—Ç–µ–∫—Å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–æ–∑–≤—Ä–∞—â–µ–Ω –æ–±—Ä–∞—Ç–Ω–æ &lt;code&gt;xSemaphoreGive&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;–í –¥—Ä—É–≥–∏—Ö –∑–∞–¥–∞—á–∞—Ö —Å –∞–Ω–∏–º–∞—Ü–∏—è–º–∏ –ª—é–±—ã–µ –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Ä–∞–∑–¥–µ–ª—è–µ–º—ã—Ö –ø–æ—Ä—Ç–æ–≤ –≤–≤–æ–¥–∞/–≤—ã–≤–æ–¥–∞ —Ç–æ–∂–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å —á–µ—Ä–µ–∑ –º—å—é—Ç–µ–∫—Å ‚Äî –Ω–∞–ø—Ä–∏–º–µ—Ä &lt;code&gt;xSemaphoreTake( xP4P5P6Mutex, portMAX_DELAY ); P4OUT |= ~0b11111; xSemaphoreGive( xP4P5P6Mutex );&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;–ú—å—é—Ç–µ–∫—Å –±—ã–≤–∞–µ—Ç –∏ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω—ã–º —Ç.–µ. –∫–æ–≥–¥–∞ –æ–¥–Ω–∞ –∑–∞–¥–∞—á–∞ –º–æ–∂–µ—Ç –µ–≥–æ –≤–∑—è—Ç—å –¥–≤–∞–∂–¥—ã, –Ω–∞–ø—Ä–∏–º–µ—Ä –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –≤–ª–æ–∂–µ–Ω–Ω–æ–π —Ñ—É–∫–Ω—Ü–∏–∏. –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ –¥–ª—è –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è –µ–≥–æ –æ–Ω–∞ –¥–æ–ª–∂–Ω–∞ –µ–≥–æ —Å—Ç–æ–ª—å–∫–æ –∂–µ —Ä–∞–∑ –≤–µ—Ä–Ω—É—Ç—å –æ–±—Ä–∞—Ç–Ω–æ. –ï—â–µ –æ–¥–Ω–∞ –≤–∞–∂–Ω–∞—è –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å –º—É—Ç–µ–∫—Å–∞ –≤ —Ç–æ–º, —á—Ç–æ –æ–Ω –º–æ–∂–µ—Ç &lt;strong&gt;–∏–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç&lt;/strong&gt; ‚Äî —ç—Ç–æ –∫–æ–≥–¥–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –≤—ã—Å–æ–∫–æ–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–æ–π –∑–∞–¥–∞—á–∏ –æ—Ç–∫–ª–∞–¥—ã–≤–∞–µ—Ç—Å—è –Ω–∏–∑–∫–æ–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–æ–π –∑–∞–¥–∞—á–µ–π, –≤–ª–∞–¥–µ—é—â–µ–π –º—É—Ç–µ–∫—Å–æ–º –Ω–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç. –ò –Ω–∞–∫–æ–Ω–µ—Ü –º—É—Ç–µ–∫—Å—ã –º–æ–≥—É—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ &lt;strong&gt;–≤–∑–∞–∏–º–Ω–æ–π –±–ª–æ–∫–∏—Ä–æ–≤–∫–µ&lt;/strong&gt; (Deadlock –∏–ª–∏ Deadly Embrace) ‚Äî —ç—Ç–æ —Å–∏—Ç—É–∞—Ü–∏—è –≤ –º–Ω–æ–≥–æ–∑–∞–¥–∞—á–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ, –∫–æ–≥–¥–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–∞–¥–∞—á –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–≥–æ –æ–∂–∏–¥–∞–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞ –∫ —Ä–µ—Å—É—Ä—Å–∞–º, –∑–∞–Ω—è—Ç—ã–º —Å–∞–º–∏–º–∏ —ç—Ç–∏–º–∏ –∑–∞–¥–∞—á–∞–º–∏.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2017/04/29/freertos-obmen-dannymi-mezhdu-zadachami/"&gt;–î–∞–ª–µ–µ&lt;/a&gt; –æ–±–º–µ–Ω –¥–∞–Ω–Ω—ã–º–∏ –º–µ–∂–¥—É –∑–∞–¥–∞—á–∞–º–∏.&lt;/p&gt;</content><category term="msp430"></category><category term="RTOS"></category></entry><entry><title>FreeRTOS - –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –æ—à–∏–±–æ–∫ –∏ —Ö—É–∫–∏</title><link href="http://proiot.ru/blog/posts/2017/04/27/freertos-diagnostika-oshibok-i-khuki/" rel="alternate"></link><published>2017-04-27T00:00:00+03:00</published><updated>2017-04-27T00:00:00+03:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2017-04-27:/blog/posts/2017/04/27/freertos-diagnostika-oshibok-i-khuki/</id><summary type="html">&lt;blockquote&gt;
&lt;p&gt;Programming is like sex. One mistake and you have to support it for the rest of your life. ‚Äî Michael Sinz&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º –æ—Å–≤–∞–∏–≤–∞—Ç—å &lt;a href="http://proiot.ru/blog/posts/2017/04/26/freertos-operatsionnaia-sistema-dlia-mikrokontrollerov/"&gt;FreeRTOS&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;–†–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–Ω—ã–π —Ä–∞–Ω–µ–µ –ø—Ä–∏–º–µ—Ä –æ—Ç–ª–∏—á–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç —ç–ª–µ–º–µ–Ω—Ç—ã –º–∞–≥–∏–∏ ‚Äî –Ω–∞–ø—Ä–∏–º–µ—Ä –∫–∞–∫–æ–π —Ä–∞–∑–º–µ—Ä —Å—Ç–µ–∫–∞ –Ω—É–∂–Ω–æ –≤—ã–¥–µ–ª—è—Ç—å –ø–æ–¥ –∑–∞–¥–∞—á—É –¥–∞ –∏ –≤–æ–æ–±—â–µ –∫–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ª–æ–≤–∏—Ç—å –æ—à–∏–±–∫–∏ —è–¥—Ä–∞ RTOS, –∫–æ—Ç–æ—Ä—ã–µ ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;blockquote&gt;
&lt;p&gt;Programming is like sex. One mistake and you have to support it for the rest of your life. ‚Äî Michael Sinz&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º –æ—Å–≤–∞–∏–≤–∞—Ç—å &lt;a href="http://proiot.ru/blog/posts/2017/04/26/freertos-operatsionnaia-sistema-dlia-mikrokontrollerov/"&gt;FreeRTOS&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;–†–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–Ω—ã–π —Ä–∞–Ω–µ–µ –ø—Ä–∏–º–µ—Ä –æ—Ç–ª–∏—á–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç —ç–ª–µ–º–µ–Ω—Ç—ã –º–∞–≥–∏–∏ ‚Äî –Ω–∞–ø—Ä–∏–º–µ—Ä –∫–∞–∫–æ–π —Ä–∞–∑–º–µ—Ä —Å—Ç–µ–∫–∞ –Ω—É–∂–Ω–æ –≤—ã–¥–µ–ª—è—Ç—å –ø–æ–¥ –∑–∞–¥–∞—á—É –¥–∞ –∏ –≤–æ–æ–±—â–µ –∫–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ª–æ–≤–∏—Ç—å –æ—à–∏–±–∫–∏ —è–¥—Ä–∞ RTOS, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ–ª—å–∑—è –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞ —ç—Ç–∞–ø–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è ? –í–æ FreeRTOS –¥–ª—è —ç—Ç–∏—Ö —Ü–µ–ª–µ–π –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;–º–∞–∫—Ä–æ—Å &lt;code&gt;configASSERT()&lt;/code&gt; –∞–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —è–¥—Ä–æ–º, –∞ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –º–æ–∂–µ—Ç (–¥–æ–ª–∂–µ–Ω) –∑–∞–¥–∞—Ç—å —Å–≤–æ—é —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –≤—ã–≤–æ–¥–∞ –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;–≤–æ FreeRTOS —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –≤—ã–¥–µ–ª–µ–Ω–∏—è –ø–∞–º—è—Ç–∏, –∞ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –ø–æ–¥–æ–±–Ω–æ–≥–æ —Ä–æ–¥–∞ –æ—à–∏–±–æ–∫ –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω—ã —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ—Ö–≤–∞—Ç—á–∏–∫–∏ (—Ö—É–∫–∏) &lt;code&gt;configUSE_MALLOC_FAILED_HOOK&lt;/code&gt; –∏ &lt;code&gt;configCHECK_FOR_STACK_OVERFLOW&lt;/code&gt; –∏ –≤–æ–∑–º–æ–∂–Ω–æ —á—Ç–æ-—Ç–æ –µ—â–µ ‚Äî –¥–æ–∫–∏ –≤ —Ä—É–∫–∏&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;–í –Ω–∞—à–µ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –º–æ–Ω–æ—Ö—Ä–æ–º–Ω—ã–π &lt;a href="http://proiot.ru/blog/posts/2017/04/25/monokhromnyi-oled-displei-na-kontrollere-ssd1306/"&gt;–¥–∏—Å–ø–ª–µ–π&lt;/a&gt; –∏ —Ç—É–¥–∞ –∂–µ –±—É–¥–µ–º –∫–∏–¥–∞—Ç—å –≤—Å–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏. –ë—É–¥–µ—Ç –¥–≤–µ –∑–∞–¥–∞—á–∏ ‚Äî –∞–Ω–∏–º–∞—Ü–∏—è –Ω–∞ –ª–µ–≤—ã—Ö —Å–≤–µ—Ç–æ–¥–∏–æ–¥–∞—Ö –∏ –≤—ã–≤–æ–¥ —Ä–∞–∑–ª–∏—á–Ω–æ–π —Å–∏—Å—Ç–µ–º–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –Ω–∞ —ç–∫—Ä–∞–Ω. –ü—Ä–∏ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–∏ –æ—à–∏–±–∫–∏ —è–¥—Ä–∞ –∏–ª–∏ –≤—ã–¥–µ–ª–µ–Ω–∏—è –ø–∞–º—è—Ç–∏ –±—É–¥–µ—Ç ¬´BSoD¬ª ‚Äî –Ω–µ –±–∞–≥, —ç—Ç–æ —Ñ–∏—á–∞. –ë—É–¥–µ–º –Ω–∞–¥–µ—è—Ç—å—Å—è –∑–∞–∫–∞–∑—á–∏–∫ –Ω–∞—à–µ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –µ–≥–æ –Ω–µ —É–≤–∏–¥–∏—Ç ‚Äî –¥–ª—è —ç—Ç–æ–≥–æ –≤ —Ä–µ–ª–∏–∑–µ, —É–∂–µ –ø–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –≤—Å—ë –∑–∞—Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –Ω–∞–¥–æ, –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É –æ—à–∏–±–æ–∫ FreeRTOS –º–æ–∂–Ω–æ (–¥–∞–∂–µ –Ω—É–∂–Ω–æ) –ø—Ä–æ—Å—Ç–æ –∑–∞–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://mazko.github.io/MSP430.js/24a92b4d7a9052f4214b73dac3355e24"&gt;MSP430.js&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2017/04/27/freertos-diagnostika-oshibok-i-khuki/hooks.zip"&gt;–∏—Å—Ö–æ–¥–Ω–∏–∫–∏&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2017/04/27/freertos-diagnostika-oshibok-i-khuki/ui.gif" style="width:55%; margin: 0 auto; display:block;"&gt;&lt;/p&gt;
&lt;p&gt;–í—ã–≤–æ–¥ —Ç–µ–∫—Å—Ç–∞ –Ω–∞ —ç–∫—Ä–∞–Ω –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏—è–º–∏ —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º &lt;code&gt;draw&lt;/code&gt;, –∫–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –±—ã–ª–æ &lt;a href="http://proiot.ru/blog/posts/2017/04/25/monokhromnyi-oled-displei-na-kontrollere-ssd1306/"&gt;—Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–æ&lt;/a&gt; –≤ –æ–¥–Ω–æ–º –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤. –ü–æ—Å–ª–µ –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ–≥–æ –∏–∑—É—á–µ–Ω–∏—è –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –¥–æ–±–∞–≤–∏–º –≤ –≥–¥–µ-—Ç–æ –≤ –∫–æ–Ω–µ—Ü —Ñ–∞–π–ª–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ &lt;em&gt;FreeRTOSConfig.h&lt;/em&gt; —Å–ª–µ–¥—É—é—â–µ–µ:&lt;/p&gt;
&lt;p&gt;&lt;em&gt;FreeRTOSConfig.h&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;// tutorial: 2&lt;/span&gt;
&lt;span class="k"&gt;extern&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;vAssertCalled&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="kt"&gt;unsigned&lt;/span&gt; &lt;span class="kt"&gt;long&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="cp"&gt;#define configASSERT( x ) if( ( x ) == 0 ) vAssertCalled( __LINE__, __FILE__ )&lt;/span&gt;

&lt;span class="c1"&gt;// Method 2 is a bit slower than method 1 &lt;/span&gt;
&lt;span class="c1"&gt;// but it will most likely catch all stack overflows.&lt;/span&gt;
&lt;span class="cp"&gt;#define configCHECK_FOR_STACK_OVERFLOW     2&lt;/span&gt;
&lt;span class="cp"&gt;#define configUSE_MALLOC_FAILED_HOOK       1&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;em&gt;hooks.c&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;FreeRTOS.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;task.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;draw.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;vApplicationStackOverflowHook&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;xTaskHandle&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;pxTsk&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;signed&lt;/span&gt; &lt;span class="n"&gt;portCHAR&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;pcTskNm&lt;/span&gt; &lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;vApplicationStackOverflowHook&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;xTaskHandle&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;pxTsk&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;signed&lt;/span&gt; &lt;span class="n"&gt;portCHAR&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;pcTskNm&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="n"&gt;taskDISABLE_INTERRUPTS&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt; &lt;span class="c1"&gt;// game over&lt;/span&gt;

  &lt;span class="n"&gt;draw_clr&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
  &lt;span class="n"&gt;draw_str&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="s"&gt;&amp;quot;Error: StackOverflow&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;draw_str&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="s"&gt;&amp;quot;Task Name:&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;draw_str&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Task Name:&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)),&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;char&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="n"&gt;pcTskNm&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

  &lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="p"&gt;;;&lt;/span&gt; &lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;vApplicationMallocFailedHook&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;vApplicationMallocFailedHook&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="n"&gt;taskDISABLE_INTERRUPTS&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt; &lt;span class="c1"&gt;// game over&lt;/span&gt;

  &lt;span class="n"&gt;draw_clr&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
  &lt;span class="n"&gt;draw_str&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="s"&gt;&amp;quot;Error: MallocFailed&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

  &lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="p"&gt;;;&lt;/span&gt; &lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;vAssertCalled&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="kt"&gt;unsigned&lt;/span&gt; &lt;span class="kt"&gt;long&lt;/span&gt; &lt;span class="n"&gt;ulLine&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="n"&gt;pcFileName&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="n"&gt;taskDISABLE_INTERRUPTS&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt; &lt;span class="c1"&gt;// game over&lt;/span&gt;

  &lt;span class="n"&gt;draw_clr&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
  &lt;span class="n"&gt;draw_str&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="s"&gt;&amp;quot;Error: AssertCalled&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;draw_str_hex&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;File Name:&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;ulLine&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

  &lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="p"&gt;;;&lt;/span&gt; &lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ó–∞–¥–∞—á–∞ —Å –∞–Ω–∏–º–∞—Ü–∏—è–º–∏ –¥–ª—è –ª–µ–≤—ã—Ö —Å–≤–µ—Ç–æ–¥–∏–æ–¥–æ–≤ –ø–æ—á—Ç–∏ –Ω–∏—á–µ–º –Ω–µ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞, —Ç–æ–ª—å–∫–æ –≤–º–µ—Å—Ç–æ API –≤—Ä–µ–º–µ–Ω–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–∏ &lt;code&gt;vTaskDelay&lt;/code&gt; —Ç–µ–ø–µ—Ä—å &lt;code&gt;vTaskDelayUntil&lt;/code&gt;, –∫–æ—Ç–æ—Ä–∞—è —Ç–æ—á–Ω–µ–µ –ø–µ—Ä–≤–æ–π. –î–ª—è –¥–∞–Ω–Ω–æ–π –∑–∞–¥–∞—á–∏ —Ç–æ—á–Ω–æ—Å—Ç—å –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–∞, –Ω–æ –ø—Ä–∏ –ø–µ—Ä–µ–¥–∞—á–µ –≤ —Ñ—É–Ω–∫—Ü–∏—é &lt;code&gt;vTaskDelayUntil&lt;/code&gt; –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç &lt;code&gt;configASSERT&lt;/code&gt;, —á—Ç–æ –¥–∞—Å—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∞–º—É –ø—Ä–æ–≤–µ—Ä–∫—É:&lt;/p&gt;
&lt;p&gt;&lt;em&gt;task_l_leds.c&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;FreeRTOS.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;task.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;task_l_leds.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="n"&gt;portTickType&lt;/span&gt; &lt;span class="n"&gt;xLastWakeTime&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;rotate_rgb&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;volatile&lt;/span&gt; &lt;span class="kt"&gt;unsigned&lt;/span&gt; &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="n"&gt;port&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;port&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="n"&gt;b10000&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;do&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;vTaskDelayUntil&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;xLastWakeTime&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt; &lt;span class="cm"&gt;/* ticks */&lt;/span&gt; &lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;port&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&amp;gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;port&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;vTaskLedsL&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;pvParameters&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

   &lt;span class="n"&gt;xLastWakeTime&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;xTaskGetTickCount&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;

   &lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="p"&gt;;;&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
     &lt;span class="n"&gt;rotate_rgb&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;P4OUT&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
     &lt;span class="n"&gt;rotate_rgb&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;P5OUT&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
     &lt;span class="n"&gt;rotate_rgb&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;P6OUT&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
   &lt;span class="p"&gt;}&lt;/span&gt;

   &lt;span class="n"&gt;vTaskDelete&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="nb"&gt;NULL&lt;/span&gt; &lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–í—ã–≤–æ–¥ –ø–æ–ª–µ–∑–Ω–æ–π —Ç–µ–∫—É—â–µ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å–∏—Å—Ç–µ–º–µ –º–æ–≥ –±—ã –≤—ã–≥–ª—è–¥–µ—Ç—å –ø—Ä–∏–º–µ—Ä–Ω–æ —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º ‚Äî –æ–ø—è—Ç—å-—Ç–∞–∫–∏ –µ—Å–ª–∏ —Ö–æ—Ä–æ—à–æ –ø–æ–∫–æ–ø–∞—Ç—å—Å—è –≤ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∫ FreeRTOS —Ç–æ –Ω–∞–≤–µ—Ä–Ω—è–∫–∞ –º–æ–∂–Ω–æ –Ω–∞–π—Ç–∏ –µ—â—ë –∫–∞–∫–∏–µ-–Ω–∏–±—É–¥—å –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ —à—Ç—É–∫–æ–≤–∏–Ω—ã, —ç—Ç–æ —Ç–æ–ª—å–∫–æ –Ω–∞–±—Ä–æ—Å–æ–∫ —Ç–æ–≥–æ —á—Ç–æ –ø–æ–ø–∞–ª–æ—Å—å –Ω–∞ –≥–ª–∞–∑–∞: &lt;/p&gt;
&lt;p&gt;&lt;em&gt;task_stat.c&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;FreeRTOS.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;task.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;draw.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;task_stat.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;vTaskStat&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;pvParameters&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

  &lt;span class="c1"&gt;// once&lt;/span&gt;
  &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;128&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;draw_char&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="sc"&gt;&amp;#39;-&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;

  &lt;span class="n"&gt;draw_str_hex&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;portBASE_TYPE&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;portBASE_TYPE&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
  &lt;span class="n"&gt;draw_str_hex&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;portTickType&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;portTickType&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
  &lt;span class="n"&gt;draw_str_hex&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;tick rate (Hz)&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;configTICK_RATE_HZ&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

  &lt;span class="c1"&gt;// loop&lt;/span&gt;
  &lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="p"&gt;;;&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;draw_str_hex&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;uptime&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;xTaskGetTickCount&lt;/span&gt;&lt;span class="p"&gt;());&lt;/span&gt;
    &lt;span class="n"&gt;draw_str_hex&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;freeHeapSize&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;xPortGetFreeHeapSize&lt;/span&gt;&lt;span class="p"&gt;());&lt;/span&gt;
    &lt;span class="n"&gt;draw_str_hex&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;numberOfTasks&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;uxTaskGetNumberOfTasks&lt;/span&gt;&lt;span class="p"&gt;());&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;

  &lt;span class="n"&gt;vTaskDelete&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="nb"&gt;NULL&lt;/span&gt; &lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ò –∫–∞–∫ –≤—ã –¥—É–º–∞–µ—Ç–µ —á—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ ? –ê –ø–æ–ª—É—á–∏–º –º—ã –≤–æ—Ç —Ç–∞–∫—É—é –∫—Ä–∞—Å–æ—Ç—É !&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2017/04/27/freertos-diagnostika-oshibok-i-khuki/stackoverflow.png" style="width:55%; margin: 0 auto; display:block;"&gt;&lt;/p&gt;
&lt;p&gt;–ö–∞–∫ –Ω–µ—Å–ª–æ–∂–Ω–æ –¥–æ–≥–∞–¥–∞—Ç—å—Å—è —Å—Ä–∞–±–æ—Ç–∞–ª –ø–µ—Ä–µ—Ö–≤–∞—Ç—á–∏–∫ &lt;code&gt;vApplicationStackOverflowHook&lt;/code&gt;. –ß—Ç–æ–±—ã –ø–æ—á–∏–Ω–∏—Ç—å —ç—Ç–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —É–≤–µ–ª–∏—á–∏—Ç—å &lt;code&gt;configMINIMAL_STACK_SIZE&lt;/code&gt; —Å 50 –¥–æ 100. –¢–æ—á–Ω–æ —Ç–∞–∫ –∂–µ –≤ –∫–∞—á–µ—Å—Ç–≤–µ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞ –º–æ–∂–Ω–æ —Ç–µ–ø–µ—Ä—å —É–º–µ–Ω—å—à–∏—Ç—å &lt;code&gt;configTOTAL_HEAP_SIZE&lt;/code&gt; —Å–∫–∞–∂–µ–º –¥–æ 42 –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ö—É–∫–∞ &lt;code&gt;vApplicationMallocFailedHook&lt;/code&gt;:&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2017/04/27/freertos-diagnostika-oshibok-i-khuki/maloocfailed.png" style="width:55%; margin: 0 auto; display:block;"&gt;&lt;/p&gt;
&lt;p&gt;–ù—É –∏ –Ω–∞–ø–æ—Å–ª–µ–¥–æ–∫ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∏ –≤—ã–∑–æ–≤–µ &lt;code&gt;vTaskDelayUntil&lt;/code&gt; –ø–µ—Ä–µ–¥–∞—Ç—å –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ª—é–±–æ–≥–æ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ 0 –∏ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç &lt;code&gt;configASSERT&lt;/code&gt;, –∫–æ—Ç–æ—Ä—ã–π –∑–Ω–∞–µ—Ç –∏–º—è —Ñ–∞–π–ª–∞ –∏ –Ω–æ–º–µ—Ä —Å—Ç—Ä–æ–∫–∏ –≥–¥–µ —Å–ª—É—á–∏–ª–∞—Å—å –æ—à–∏–±–∫–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ —è–¥—Ä–∞: &lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2017/04/27/freertos-diagnostika-oshibok-i-khuki/assert.png" style="width:55%; margin: 0 auto; display:block;"&gt;&lt;/p&gt;
&lt;p&gt;–ï—â—ë —É FreeRTOS –µ—Å—Ç—å –æ–¥–∏–Ω –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π –ø–µ—Ä–µ—Ö–≤–∞—Ç—á–∏–∫ –¥–ª—è –∑–∞–¥–∞—á–∏ –ë–µ–∑–¥–µ–π—Å—Ç–≤–∏—è (Idle task) ‚Äî &lt;code&gt;configUSE_IDLE_HOOK&lt;/code&gt;. –ó–∞–¥–∞—á–∞ idle –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—ë—Ç—Å—è –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ –∏ –æ–Ω–∞ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é. –ï–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –∑–∞–¥–∞–µ—Ç—Å—è –º–∞–∫—Ä–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ–º &lt;code&gt;tskIDLE_PRIORITY&lt;/code&gt; –∫–∞–∫ —Å–∞–º—ã–π –Ω–∏–∑–∫–∏–π –≤ –ø—Ä–æ–≥—Ä–∞–º–º–µ (–æ–±—ã—á–Ω–æ 0). –≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –∑–∞–¥–∞—á–∞ –ë–µ–∑–¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è, –ø–æ–∫–∞ –≤ –ø—Ä–æ–≥—Ä–∞–º–º–µ –µ—Å—Ç—å —Ö–æ—Ç—è –±—ã –æ–¥–Ω–∞ –∑–∞–¥–∞—á–∞ –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é –∏ –∫–∞–∫ —Ç–æ–ª—å–∫–æ –ø–æ—è–≤–∏—Ç—Å—è –ª—é–±–∞—è –≥–æ—Ç–æ–≤–∞—è –∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é –∑–∞–¥–∞—á–∞, –∑–∞–¥–∞—á–∞ –ë–µ–∑–¥–µ–π—Å—Ç–≤–∏–µ –±—É–¥–µ—Ç –µ—é –≤—ã—Ç–µ—Å–Ω–µ–Ω–∞. –ï—â—ë —ç—Ç–∞ –∑–∞–¥–∞—á–∞ –∑–∞–Ω–∏–º–∞–µ—Ç—Å—è –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ–º –ø–∞–º—è—Ç–∏, –≤—ã–¥–µ–ª–µ–Ω–Ω–æ–π –∑–∞–¥–∞—á–∞–º, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ —É–¥–∞–ª–µ–Ω—ã –∏ –ø–æ—ç—Ç–æ–º—É –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏—Ö &lt;code&gt;vTaskDelete()&lt;/code&gt;, –≤–∞–∂–Ω–æ –æ–±–µ—Å–ø–µ—á–∏—Ç—å –≤—Ä–µ–º—è –¥–ª—è –∑–∞–¥–∞—á–∏ idle. –¢–∞–∫–∂–µ —á–∞—Å—Ç–æ –∑–∞–¥–∞—á—É –ë–µ–∑–¥–µ–π—Å—Ç–≤–∏–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –≤—ã–∑—ã–≤–∞—Ç—å —Ä–µ–∂–∏–º —ç–Ω–µ—Ä–≥–æ—Å–±–µ—Ä–µ–∂–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2017/04/28/freertos-sovmestnyi-dostup-k-obshchim-resursam/"&gt;–î–∞–ª–µ–µ&lt;/a&gt; –æ –ø—Ä–æ–±–ª–µ–º–∞—Ö –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
—Å–æ–≤–º–µ—Å—Ç–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∑–∞–¥–∞—á/–ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π –∫ –æ–¥–Ω–æ–º—É —Ä–µ—Å—É—Ä—Å—É.&lt;/p&gt;</content><category term="msp430"></category><category term="RTOS"></category></entry><entry><title>FreeRTOS - –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤</title><link href="http://proiot.ru/blog/posts/2017/04/26/freertos-operatsionnaia-sistema-dlia-mikrokontrollerov/" rel="alternate"></link><published>2017-04-26T00:00:00+03:00</published><updated>2017-04-26T00:00:00+03:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2017-04-26:/blog/posts/2017/04/26/freertos-operatsionnaia-sistema-dlia-mikrokontrollerov/</id><summary type="html">&lt;p&gt;FreeRTOS ‚Äî –º–Ω–æ–≥–æ–∑–∞–¥–∞—á–Ω–∞—è, –º—É–ª—å—Ç–∏–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∂–µ—Å—Ç–∫–æ–≥–æ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ (&lt;a href="http://proiot.ru/blog/posts/2017/02/05/picsimjs-soprogrammy-i-prosteishaia-mnogozadachnost/"&gt;RTOS&lt;/a&gt;) –¥–ª—è –≤—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã—Ö —Å–∏—Å—Ç–µ–º. –ù–∞–ø–∏—Å–∞–Ω–∞ –Ω–∞ —è–∑—ã–∫–µ –°–∏ —Å –∞—Å—Å–µ–º–±–ª–µ—Ä–Ω—ã–º–∏ –≤—Å—Ç–∞–≤–∫–∞–º–∏ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∞–ø–ø–∞—Ä–∞—Ç–Ω–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã. –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ FreeRTOS –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ç—Ä–∏ —Ç–∏–ø–∞ –º–Ω–æ–≥–æ–∑–∞–¥–∞—á–Ω–æ—Å—Ç–∏: –≤—ã—Ç–µ—Å–Ω—è—é—â—É—é —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º–∏, &lt;a href="http://proiot.ru/blog/posts/2017/02/05/picsimjs-soprogrammy-i-prosteishaia-mnogozadachnost/"&gt;–∫–æ–æ–ø–µ—Ä–∞—Ç–∏–≤–Ω—É—é&lt;/a&gt; –∏ –≥–∏–±—Ä–∏–¥–Ω—É—é. –ö–∞–∫–∞—è –∏–∑ –Ω–∏—Ö –ª—É—á—à–µ ? –í –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å–ª—É—á–∞–µ–≤ –≤—ã—Ç–µ—Å–Ω—è—é—â–∞—è –º–Ω–æ–≥–æ–∑–∞–¥–∞—á–Ω–æ—Å—Ç—å —è–≤–ª—è–µ—Ç—Å—è –±–æ–ª–µ–µ –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–æ–π —Ç.–∫. –≤ ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;p&gt;FreeRTOS ‚Äî –º–Ω–æ–≥–æ–∑–∞–¥–∞—á–Ω–∞—è, –º—É–ª—å—Ç–∏–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –∂–µ—Å—Ç–∫–æ–≥–æ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ (&lt;a href="http://proiot.ru/blog/posts/2017/02/05/picsimjs-soprogrammy-i-prosteishaia-mnogozadachnost/"&gt;RTOS&lt;/a&gt;) –¥–ª—è –≤—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã—Ö —Å–∏—Å—Ç–µ–º. –ù–∞–ø–∏—Å–∞–Ω–∞ –Ω–∞ —è–∑—ã–∫–µ –°–∏ —Å –∞—Å—Å–µ–º–±–ª–µ—Ä–Ω—ã–º–∏ –≤—Å—Ç–∞–≤–∫–∞–º–∏ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∞–ø–ø–∞—Ä–∞—Ç–Ω–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã. –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ FreeRTOS –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ç—Ä–∏ —Ç–∏–ø–∞ –º–Ω–æ–≥–æ–∑–∞–¥–∞—á–Ω–æ—Å—Ç–∏: –≤—ã—Ç–µ—Å–Ω—è—é—â—É—é —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º–∏, &lt;a href="http://proiot.ru/blog/posts/2017/02/05/picsimjs-soprogrammy-i-prosteishaia-mnogozadachnost/"&gt;–∫–æ–æ–ø–µ—Ä–∞—Ç–∏–≤–Ω—É—é&lt;/a&gt; –∏ –≥–∏–±—Ä–∏–¥–Ω—É—é. –ö–∞–∫–∞—è –∏–∑ –Ω–∏—Ö –ª—É—á—à–µ ? –í –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å–ª—É—á–∞–µ–≤ –≤—ã—Ç–µ—Å–Ω—è—é—â–∞—è –º–Ω–æ–≥–æ–∑–∞–¥–∞—á–Ω–æ—Å—Ç—å —è–≤–ª—è–µ—Ç—Å—è –±–æ–ª–µ–µ –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–æ–π —Ç.–∫. –≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç –∫–æ–æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –º–Ω–æ–≥–æ–∑–∞–¥–∞—á–Ω–æ—Å—Ç–∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –≤–Ω–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö –∑–∞–¥–∞—á, –±–ª–∞–≥–æ–¥–∞—Ä—è —á–µ–º—É –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç—Å—è —Å–≤–æ–µ–≤—Ä–µ–º–µ–Ω–Ω–∞—è —Ä–µ–∞–∫—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã –Ω–∞ –∫–∞–∫–æ–µ-–ª–∏–±–æ –±–æ–ª–µ–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–æ–µ —Å–æ–±—ã—Ç–∏–µ. –¢–∞–∫–∏–µ —Å–∏—Å—Ç–µ–º—ã –ø—Ä–∏–Ω—è—Ç–æ –Ω–∞–∑—ã–≤–∞—Ç—å —Å–∏—Å—Ç–µ–º–∞–º–∏ &lt;strong&gt;–∂–µ—Å—Ç–∫–æ–≥–æ&lt;/strong&gt; —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏. –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ –∫–æ–æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–∞—è –º–Ω–æ–≥–æ–∑–∞–¥–∞—á–Ω–æ—Å—Ç—å –ø–æ —Å–≤–æ–µ–π –ø—Ä–∏—Ä–æ–¥–µ —è–≤–ª—è–µ—Ç—Å—è —Å–∏—Å—Ç–µ–º–æ–π &lt;strong&gt;–º—è–≥–∫–æ–≥–æ&lt;/strong&gt; —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ —Ç.–∫. –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –Ω–µ –º–æ–∂–µ—Ç –ø—Ä–µ—Ä–≤–∞—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–π –∑–∞–¥–∞—á–∏ –¥–∞–∂–µ –µ—Å–ª–∏ –ø–æ—è–≤–∏–ª–∞—Å—å –≥–æ—Ç–æ–≤–∞—è –∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é –∑–∞–¥–∞—á–∞ —Å –±–æ–ª–µ–µ –≤—ã—Å–æ–∫–∏–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º ‚Äî —Ç—É—Ç –∫–∞–∂–¥–∞—è –∑–∞–¥–∞—á–∞ –¥–æ–ª–∂–Ω–∞ —Å–∞–º–æ—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫—É. –ì–∏–±—Ä–∏–¥–Ω–∞—è –∏ –∫–æ–æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–∞—è –º–Ω–æ–≥–æ–∑–∞–¥–∞—á–Ω–æ—Å—Ç—å –≤–æ FreeRTOS —è–≤–ª—è–µ—Ç—Å—è –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º–∏ –∏ –≤ –æ—Å–Ω–æ–≤–Ω–æ–º —Å–ª—É–∂–∞—Ç –¥–ª—è –±–æ–ª–µ–µ —Ä–∞—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞, –∫–æ—Ç–æ—Ä—ã—Ö –≤—Å–µ–≥–¥–∞ –æ—á–µ–Ω—å –º–∞–ª–æ :)&lt;/p&gt;
&lt;p&gt;&lt;a href="http://mazko.github.io/MSP430.js/4762128c15a0dcc8e4d8f849a0998f20"&gt;MSP430.js&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2017/04/26/freertos-operatsionnaia-sistema-dlia-mikrokontrollerov/tasks.zip"&gt;–∏—Å—Ö–æ–¥–Ω–∏–∫–∏&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2017/04/26/freertos-operatsionnaia-sistema-dlia-mikrokontrollerov/ui.gif" style="width:55%; margin: 0 auto; display:block;"&gt;&lt;/p&gt;
&lt;p&gt;–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ FreeRTOS —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –±—Ä–∞—Ç—å –∑–∞ –æ—Å–Ω–æ–≤—É –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π –ø—Ä–æ–µ–∫—Ç –∏–∑ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã—Ö –ø—Ä–∏–º–µ—Ä–æ–≤. –í –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä &lt;a href="http://proiot.ru/blog/posts/2017/03/20/s-18-dlia-mikrokontrollerov-razvedka-boem/"&gt;MSP430F1611&lt;/a&gt;, –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞ makefile –∏ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä (msp430-gcc 6.2.1.16) —Å–∞–º—ã–π —Å–≤–µ–∂–∏–π –Ω–∞ —Ç–µ–∫—É—â–∏–π –º–æ–º–µ–Ω—Ç –æ—Ç &lt;a href="http://www.ti.com/tool/msp430-gcc-opensource" rel="nofollow"&gt;–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—è&lt;/a&gt;. –í—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏, –∫–∞—Å–∞—é—â–∏–µ—Å—è FreeRTOS, –ø—Ä–∏–Ω—è—Ç–æ –ø–æ–º–µ—â–∞—Ç—å –≤ –æ–¥–∏–Ω –æ—Ç–¥–µ–ª—å–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ—á–Ω—ã–π —Ñ–∞–π–ª &lt;em&gt;FreeRTOSConfig.h&lt;/em&gt;. –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –≤ —ç—Ç–æ–º —Ñ–∞–π–ª–µ —è–≤–ª—è—é—Ç—Å—è –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º–∏ —Ç.–∫. —É–∂–µ –∏–º–µ—é—Ç –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –æ–¥–Ω–∞–∫–æ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –Ω—É–∂–Ω–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å –≤ –∫–∞–∂–¥–æ–º –ø—Ä–æ–µ–∫—Ç–µ –∏–±–æ —Å–ª–æ–º–∞–µ—Ç—Å—è –∫–æ–º–ø–∏–ª—è—Ü–∏—è:&lt;/p&gt;
&lt;p&gt;&lt;em&gt;FreeRTOSConfig.h&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#ifndef FREERTOS_CONFIG_H&lt;/span&gt;
&lt;span class="cp"&gt;#define FREERTOS_CONFIG_H&lt;/span&gt;

&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;msp430.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="cm"&gt;/*-----------------------------------------------------------&lt;/span&gt;
&lt;span class="cm"&gt; * Application specific definitions.&lt;/span&gt;
&lt;span class="cm"&gt; *&lt;/span&gt;
&lt;span class="cm"&gt; * These definitions should be adjusted for your particular hardware and&lt;/span&gt;
&lt;span class="cm"&gt; * application requirements.&lt;/span&gt;
&lt;span class="cm"&gt; *&lt;/span&gt;
&lt;span class="cm"&gt; * THESE PARAMETERS ARE DESCRIBED WITHIN THE &amp;#39;CONFIGURATION&amp;#39; SECTION OF THE&lt;/span&gt;
&lt;span class="cm"&gt; * FreeRTOS API DOCUMENTATION AVAILABLE ON THE FreeRTOS.org WEB SITE. &lt;/span&gt;
&lt;span class="cm"&gt; *&lt;/span&gt;
&lt;span class="cm"&gt; * See http://www.freertos.org/a00110.html.&lt;/span&gt;
&lt;span class="cm"&gt; *----------------------------------------------------------*/&lt;/span&gt;

&lt;span class="cp"&gt;#define configUSE_PREEMPTION        1&lt;/span&gt;
&lt;span class="cp"&gt;#define configUSE_IDLE_HOOK         0&lt;/span&gt;
&lt;span class="cp"&gt;#define configUSE_TICK_HOOK         0&lt;/span&gt;
&lt;span class="cp"&gt;#define configCPU_CLOCK_HZ          ( ( unsigned long ) 130000 )&lt;/span&gt;
&lt;span class="cp"&gt;#define configTICK_RATE_HZ          ( ( TickType_t ) 10 )&lt;/span&gt;
&lt;span class="cp"&gt;#define configMAX_PRIORITIES        2&lt;/span&gt;
&lt;span class="cp"&gt;#define configMINIMAL_STACK_SIZE    ( ( unsigned short ) 50 )&lt;/span&gt;
&lt;span class="cp"&gt;#define configTOTAL_HEAP_SIZE       ( ( size_t ) ( 8 * 1024 ) )&lt;/span&gt;
&lt;span class="cp"&gt;#define configUSE_16_BIT_TICKS      1&lt;/span&gt;

&lt;span class="cp"&gt;#endif &lt;/span&gt;&lt;span class="cm"&gt;/* FREERTOS_CONFIG_H */&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ò—Ç–∞–∫ –ø—Ä–æ–±–µ–∂–∏–º—Å—è –ø–æ –ø–æ—Ä—è–¥–∫—É –ø–æ –≤—Å–µ–º —É–∫–∞–∑–∞–Ω–Ω—ã–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;em&gt;configUSE_PREEMPTION&lt;/em&gt; –∑–∞–¥–∞—ë—Ç —Ä–µ–∂–∏–º –º–Ω–æ–≥–æ–∑–∞–¥–∞—á–Ω–æ—Å—Ç–∏ ‚Äî –∫–æ–æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–∞—è (0) –∏–ª–∏ –≤—ã—Ç–µ—Å–Ω—è—é—â–∞—è (1)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;em&gt;configUSE_IDLE_HOOK&lt;/em&gt;, &lt;em&gt;configUSE_TICK_HOOK&lt;/em&gt; ‚Äî —Ö—É–∫–∏ —Å–µ–π—á–∞—Å –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º (0), –Ω–æ –±—É–¥–µ–º –≤ —Å–ª–µ–¥—É—é—â–µ–º –º–∞—Ç–µ—Ä–∏–∞–ª–µ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;em&gt;configCPU_CLOCK_HZ&lt;/em&gt; ‚Äî –≤ –ø–æ–¥–∞–≤–ª—è—é—â–µ–º –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ –∑–∞–¥–∞—á –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ—Ç–º–µ—Ä—è—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã –≤—Ä–µ–º–µ–Ω–∏, –¥–∞–Ω–Ω–∞—è –≤–µ–ª–∏—á–∏–Ω–∞ ‚Äî —Ç–∞–∫—Ç–æ–≤–∞—è —á–∞—Å—Ç–æ—Ç—ã –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ (–ø–æ—Ö–æ–∂–µ –ø–æ—Ä—Ç MSP430 –µ—ë –Ω–∏–≥–¥–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç, —Å–µ–π—á–∞—Å —Ç–∞–º –ø—Ä–∏ —Ä–∞—Å—á—ë—Ç–µ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∫–≤–∞–Ω—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è &lt;code&gt;portACLK_FREQUENCY_HZ&lt;/code&gt; –∏–∑ —Ä–∞—Å—á—ë—Ç–∞ &lt;code&gt;LFXT1CLK = 32768 Hz&lt;/code&gt;)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;em&gt;configTICK_RATE_HZ&lt;/em&gt; ‚Äî –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –º–µ–∂–¥—É –∑–∞–¥–∞—á–∞–º–∏ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ —Ä–∞–≤–Ω—ã–µ –∫–≤–∞–Ω—Ç—ã –≤—Ä–µ–º–µ–Ω–∏ —Ä–∞–±–æ—Ç—ã –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞ –∏ –≤—Ä–µ–º—è —Ä–µ–∞–∫—Ü–∏–∏ FreeRTOS –Ω–∞ –≤–Ω–µ—à–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è –≤ —Ä–µ–∂–∏–º–µ –≤—ã—Ç–µ—Å–Ω—è—é—â–µ–π –º–Ω–æ–≥–æ–∑–∞–¥–∞—á–Ω–æ—Å—Ç–∏ –Ω–µ –ø—Ä–µ–≤—ã—à–∞–µ—Ç –æ–¥–Ω–æ–≥–æ –∫–≤–∞–Ω—Ç–∞. –ü–æ –∏–¥–µ–µ —á–µ–º –º–µ–Ω—å—à–µ –∫–≤–∞–Ω—Ç —Ç–µ–º –ª—É—á—à–µ, –æ–¥–Ω–∞–∫–æ –∑–∞ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ–º —á–∞—Å—Ç–æ—Ç—ã –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–π —Å–ª–µ–¥—É–µ—Ç —Ç–æ, —á—Ç–æ —è–¥—Ä–æ —Å–∏—Å—Ç–µ–º—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –±–æ–ª—å—à–µ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –∏ —Ç–æ–≥–¥–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ –º–µ–Ω—å—à–µ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–Ω–æ–≥–æ –≤—Ä–µ–º—è –æ—Å—Ç–∞—ë—Ç—Å—è –ø–æ–¥ –∑–∞–¥–∞—á–∏. –ß–µ–º –≤—ã—à–µ —Ç–∞–∫—Ç–æ–≤–∞—è —á–∞—Å—Ç–æ—Ç–∞, —Ç–µ–º –±–æ–ª—å—à—É—é —á–∞—Å—Ç–æ—Ç—É –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –º–æ–∂–Ω–æ –∑–∞–¥–∞–≤–∞—Ç—å&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;em&gt;configMAX_PRIORITIES&lt;/em&gt; ‚Äî –∫–∞–∂–¥–æ–π –∑–∞–¥–∞—á–µ –Ω–∞–∑–Ω–∞—á–∞–µ—Ç—Å—è –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –æ—Ç 0 –¥–æ (configMAX_PRIORITIES - 1). –ù–∞–∏–±–æ–ª–µ–µ –Ω–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç —É –∑–∞–¥–∞—á–∏ ¬´–±–µ–∑–¥–µ–π—Å—Ç–≤–∏–µ¬ª, –∑–Ω–∞—á–µ–Ω–∏–µ –∫–æ—Ç–æ—Ä–æ–≥–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ –∫–∞–∫ 0. –£–º–µ–Ω—å—à–µ–Ω–∏–µ configMAX_PRIORITIES –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–º–µ–Ω—å—à–∏—Ç—å –æ–±—ä–µ–º –û–ó–£, –ø–æ—Ç—Ä–µ–±–ª—è–µ–º—ã–π —è–¥—Ä–æ–º&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;em&gt;configMINIMAL_STACK_SIZE&lt;/em&gt;, &lt;em&gt;configTOTAL_HEAP_SIZE&lt;/em&gt; ‚Äî –ø–æ–∫–∞ —á—Ç–æ –ø—É—Å—Ç—å —ç—Ç–æ –±—É–¥—É—Ç –Ω–µ–∫–∏–µ &lt;a href="http://proiot.ru/blog/posts/2012/10/08/idiomy-v-ansi-c/"&gt;–º–∞–≥–∏—á–µ—Å–∫–∏–µ —á–∏—Å–ª–∞&lt;/a&gt;, –æ–ø—Ä–µ–¥–µ–ª—è—é—â–∏–µ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–π –æ–±—ä—ë–º –ø–∞–º—è—Ç–∏ –¥–ª—è –Ω–æ—Ä–º–∞–ª—å–Ω–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–¥–∞—á. –ß—Ç–æ –±—É–¥–µ—Ç –µ—Å–ª–∏ –∏—Ö –ø–æ–º–µ–Ω—è—Ç—å –∏–ª–∏ –∑–∞–¥–∞—Ç—å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–∏–º –≤ —Å–ª–µ–¥—É—é—â–µ–º –º–∞—Ç–µ—Ä–∏–∞–ª–µ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;em&gt;configUSE_16_BIT_TICKS&lt;/em&gt; ‚Äî —Ä–∞–∑—Ä—è–¥–Ω–æ—Å—Ç—å —Å—á—ë—Ç—á–∏–∫–∞ –∫–≤–∞–Ω—Ç–æ–≤ –≤—Ä–µ–º–µ–Ω–∏, –ø—Ä–æ—à–µ–¥—à–∏—Ö —Å –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã 16 –±–∏—Ç (1) –∏–ª–∏ 32 –±–∏—Ç (0)&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ RTOS –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –∏–∑ —Å–µ–±—è –Ω–∞–±–æ—Ä —Å–æ–æ–±—â–∞—é—â–∏—Ö—Å—è –º–µ–∂–¥—É —Å–æ–±–æ–π –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö –∑–∞–¥–∞—á. –ö–∞–∂–¥–∞—è –∑–∞–¥–∞—á–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ —Å–≤–æ—ë–º —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ. –í —Ä–∞–º–∫–∞—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –º–æ–∂–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–Ω–∞ –∑–∞–¥–∞—á–∞, –∏ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Ç–æ, –∫–∞–∫–∏–µ –∑–∞–¥–∞—á–∏ –∫–æ–≥–¥–∞ –¥–æ–ª–∂–Ω—ã –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è. –í—ã—Ç–µ—Å–Ω—è—é—â–∏–π –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ —Å–∞–º –ø—Ä–∏–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∏ –≤–æ–∑–æ–±–Ω–æ–≤–ª—è–µ—Ç –∑–∞–¥–∞—á–∏ (–ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç –∑–∞–¥–∞—á–∏) –≤–æ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –∏ —Ç.–∫. –∑–∞–¥–∞—á–∞ –Ω–µ –∑–Ω–∞–µ—Ç –æ –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞, —Ç–æ –∏–º–µ–Ω–Ω–æ –æ–Ω –∏ –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞, —á—Ç–æ–±—ã –∑–∞–¥–∞—á–∞ –±—ã–ª–∞ –≤–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∞ –≤ —Ç–æ–º –∂–µ —Å–æ—Å—Ç–æ—è–Ω–∏–∏, —á—Ç–æ –∏ –±—ã–ª–∞ –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞. –î–ª—è —ç—Ç–æ–≥–æ –∫–∞–∂–¥–æ–π –∑–∞–¥–∞—á–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –æ—Ç–¥–µ–ª—å–Ω—ã–π —Å—Ç–µ–∫. –ö–æ–≥–¥–∞ –∑–∞–¥–∞—á–∞ –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞, –∫–æ–Ω—Ç–µ–∫—Å—Ç –∑–∞–¥–∞—á–∏ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ —Å—Ç–µ–∫–µ –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –ø–µ—Ä–µ–¥ –≤–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º.&lt;/p&gt;
&lt;p&gt;–¢–µ–ø–µ—Ä—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ –ø–æ—Ä–∞ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∏ —Å–∞–º–∏ –∑–∞–¥–∞—á–∏. –£ –Ω–∞—Å –¥–≤–µ –≥—Ä—É–ø–ø—ã —Å–≤–µ—Ç–æ–¥–∏–æ–¥–æ–≤ ‚Äî –ª–µ–≤—ã–µ –∏ –ø—Ä–∞–≤—ã–µ –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ –¥–≤–µ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ –∑–∞–¥–∞—á–∏ —Å –∞–Ω–∏–º–∞—Ü–∏—è–º–∏ –¥–ª—è –∫–∞–∂–¥–æ–π –≥—Ä—É–ø–ø—ã.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;task_r_leds.c&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;FreeRTOS.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;task.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;task_r_leds.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;vTaskLedsR&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;pvParameters&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
   &lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="p"&gt;;;&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
     &lt;span class="n"&gt;P3OUT&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;P3OUT&lt;/span&gt; &lt;span class="o"&gt;^&lt;/span&gt; &lt;span class="mh"&gt;0xFF&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="n"&gt;b11&lt;/span&gt; &lt;span class="cm"&gt;/* don&amp;#39;t toggle LCD pins 0b11 */&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
     &lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="k"&gt;volatile&lt;/span&gt; &lt;span class="kt"&gt;uint16_t&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;10000&lt;/span&gt; &lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="p"&gt;);&lt;/span&gt; &lt;span class="c1"&gt;// delay&lt;/span&gt;
   &lt;span class="p"&gt;}&lt;/span&gt;

  &lt;span class="cm"&gt;/* Should the task implementation ever break out of the above loop, then the task&lt;/span&gt;
&lt;span class="cm"&gt;    must be deleted before reaching the end of its implementing function. The NULL&lt;/span&gt;
&lt;span class="cm"&gt;    parameter passed to the vTaskDelete() API function indicates that the task to be&lt;/span&gt;
&lt;span class="cm"&gt;    deleted is the calling (this) task. */&lt;/span&gt;

   &lt;span class="n"&gt;vTaskDelete&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="nb"&gt;NULL&lt;/span&gt; &lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;em&gt;task_l_leds.c&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;FreeRTOS.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;task.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;task_l_leds.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;rotate_rgb&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;volatile&lt;/span&gt; &lt;span class="kt"&gt;unsigned&lt;/span&gt; &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="n"&gt;port&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;port&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="n"&gt;b10000&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;do&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="k"&gt;volatile&lt;/span&gt; &lt;span class="kt"&gt;uint16_t&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;5000&lt;/span&gt; &lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="p"&gt;);&lt;/span&gt; &lt;span class="c1"&gt;// delay&lt;/span&gt;
        &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;port&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&amp;gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;port&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;vTaskLedsL&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;pvParameters&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
   &lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="p"&gt;;;&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
     &lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="k"&gt;volatile&lt;/span&gt; &lt;span class="kt"&gt;uint16_t&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;42000&lt;/span&gt; &lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="p"&gt;);&lt;/span&gt;   &lt;span class="c1"&gt;// delay&lt;/span&gt;
     &lt;span class="n"&gt;rotate_rgb&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;P4OUT&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
     &lt;span class="n"&gt;rotate_rgb&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;P5OUT&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
     &lt;span class="n"&gt;rotate_rgb&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;P6OUT&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
   &lt;span class="p"&gt;}&lt;/span&gt;

   &lt;span class="n"&gt;vTaskDelete&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="nb"&gt;NULL&lt;/span&gt; &lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ò–º–µ–Ω–∞ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–æ–≤ –≤ –∏—Å—Ö–æ–¥–Ω–æ–º –∫–æ–¥–µ —è–¥—Ä–∞ FreeRTOS –∏ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö –ø–æ–¥—á–∏–Ω—è—é—Ç—Å—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º —Å–æ–≥–ª–∞—à–µ–Ω–∏—è–º –æ–± –∏–º–µ–Ω–æ–≤–∞–Ω–∏–∏, –∑–Ω–∞—è –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–æ—â–µ –ø–æ–Ω–∏–º–∞—Ç—å —Ç–µ–∫—Å—Ç—ã –ø—Ä–æ–≥—Ä–∞–º–º. –ò–º–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏ —Ñ—É–Ω–∫—Ü–∏–π –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã –≤ –ø—Ä–µ—Ñ–∏–∫—Å–Ω–æ–π —Ñ–æ—Ä–º–µ (—Ç–∞–∫ –Ω–∞–∑—ã–≤–∞–µ–º–∞—è
–í–µ–Ω–≥–µ—Ä—Å–∫–∞—è –Ω–æ—Ç–∞—Ü–∏—è), –Ω–∞–ø—Ä–∏–º–µ—Ä &lt;code&gt;ulMemCheck&lt;/code&gt; ‚Äî –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è —Ç–∏–ø–∞ &lt;code&gt;unsigned long&lt;/code&gt;, &lt;code&gt;pxCreatedTask&lt;/code&gt; ‚Äî –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è —Ç–∏–ø–∞ ¬´—É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—É¬ª, –≤ –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ &lt;code&gt;vTaskDelete&lt;/code&gt; ‚Äî —Ñ—É–Ω–∫—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –Ω–∏—á–µ–≥–æ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç &lt;code&gt;void&lt;/code&gt;. –§—É–Ω–∫—Ü–∏–∏-–∑–∞–¥–∞—á–∏ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –ø—Ä–µ—Ä—ã–≤–∞—é—Ç—Å—è, –ø–æ—ç—Ç–æ–º—É –æ–±—ã—á–Ω–æ —Ä–µ–∞–ª–∏–∑—É—é—Ç—Å—è –ø—Ä–∏ –ø–æ–º–æ—â–∏ –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–≥–æ —Ü–∏–∫–ª–∞, –∞ –µ—Å–ª–∏ –≤—Å–µ-—Ç–∞–∫–∏ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç –≤—ã—Ö–æ–¥ –∏–∑ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–≥–æ —Ü–∏–∫–ª–∞, —Ç–æ –∑–∞–¥–∞—á–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —É–Ω–∏—á—Ç–æ–∂–µ–Ω–∞ –¥–æ –∫–æ–Ω—Ü–∞ —Ñ—É–Ω–∫—Ü–∏–∏ ‚Äî –ø–æ –∫—Ä–∞–π–Ω–µ–π –º–µ—Ä–µ —Ç–∞–∫ –ø–æ–∫–∞–∑–∞–Ω–æ –≤ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã—Ö –ø—Ä–∏–º–µ—Ä–∞—Ö –∫ FreeRTOS. –ü–∞—Ä–∞–º–µ—Ç—Ä NULL –æ–±–æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ —É–Ω–∏—á—Ç–æ–∂–∞–µ—Ç—Å—è —Å–∞–º–∞ –∑–∞–¥–∞—á–∞, –∏–∑ –∫–æ—Ç–æ—Ä–æ–π –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤—ã–∑–æ–≤ API-—Ñ—É–Ω–∫—Ü–∏–∏ &lt;code&gt;vTaskDelete()&lt;/code&gt; (—Ö–∞—Ä–∞–∫–∏—Ä–∏).&lt;/p&gt;
&lt;p&gt;–§—Ä–∞–≥–º–µ–Ω—Ç –∫–æ–¥–∞ —Å &lt;code&gt;disable_watchdog&lt;/code&gt; –Ω–µ –∏–º–µ–µ—Ç –æ—Ç–Ω–æ—à–µ–Ω–∏—è –∫ FreeRTOS ‚Äî —ç—Ç–æ –æ–±—Ö–æ–¥ –≥—Ä–∞–±–ª–µ–π –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞. –ë–µ–∑ —ç—Ç–æ–≥–æ –∫–æ—Å—Ç—ã–ª—è –ø—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–æ–ª—å—à–∏—Ö –º–∞—Å—Å–∏–≤–æ–≤ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç &lt;a href="http://proiot.ru/blog/posts/2017/01/17/picsimjs-storozhevoi-taimer-i-spiashchii-rezhim/"&gt;—Å—Ç–æ—Ä–æ–∂–µ–≤–æ–π —Ç–∞–π–º–µ—Ä&lt;/a&gt; –µ—â—ë –¥–æ —Ç–æ—á–∫–∏ –≤—Ö–æ–¥–∞ &lt;code&gt;int main( void )&lt;/code&gt; –∏ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä :(&lt;/p&gt;
&lt;p&gt;&lt;em&gt;main.c&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;FreeRTOS.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;task.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;task_r_leds.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;task_l_leds.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="c1"&gt;// !!!!   msp430-gcc 6.2.1.16   !!!!&lt;/span&gt;
&lt;span class="c1"&gt;// msp430_gcc/examples/watchdog.txt&lt;/span&gt;

&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;__attribute__&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="kr"&gt;naked&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;section&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;.crt_0042&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;used&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;span class="n"&gt;disable_watchdog&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="n"&gt;WDTCTL&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;WDTPW&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;WDTHOLD&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="c1"&gt;// Stop watchdog timer&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="cm"&gt;/* Demo task priorities. */&lt;/span&gt;

&lt;span class="k"&gt;enum&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; 
  &lt;span class="n"&gt;main_TASK_PRIORITY_LEDS_L&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;tskIDLE_PRIORITY&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
  &lt;span class="n"&gt;main_TASK_PRIORITY_LEDS_R&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;main_TASK_PRIORITY_LEDS_L&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="p"&gt;};&lt;/span&gt;

&lt;span class="cm"&gt;/*&lt;/span&gt;
&lt;span class="cm"&gt; * Start the demo application tasks - then start the real time scheduler.&lt;/span&gt;
&lt;span class="cm"&gt; */&lt;/span&gt;
&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

  &lt;span class="cm"&gt;/* Setup the hardware ready for the demo. */&lt;/span&gt;

  &lt;span class="c1"&gt;// DCO = 3, RSEL = 0, f = 0.13 MHz&lt;/span&gt;
  &lt;span class="n"&gt;DCOCTL&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="cm"&gt;/* DCO2 + */&lt;/span&gt; &lt;span class="n"&gt;DCO1&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;DCO0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; 
  &lt;span class="n"&gt;BCSCTL1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;XT2OFF&lt;/span&gt; &lt;span class="cm"&gt;/* + RSEL1 + RSEL0 + RSEL2 */&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="c1"&gt;// Shared between L/R tasks 8*RGB LEDS &lt;/span&gt;
  &lt;span class="n"&gt;P4OUT&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;P5OUT&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;P6OUT&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;P4DIR&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;P5DIR&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;P6DIR&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mh"&gt;0xFF&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="c1"&gt;// 2 RGB LEDS (pins 2..7)&lt;/span&gt;
  &lt;span class="n"&gt;P3OUT&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;P3DIR&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mh"&gt;0xFF&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="c1"&gt;// create tasks&lt;/span&gt;
  &lt;span class="c1"&gt;// Passing a uxPriority value above (configMAX_PRIORITIES ‚Äì 1) &lt;/span&gt;
  &lt;span class="c1"&gt;// will result in the priority assigned to the task&lt;/span&gt;
  &lt;span class="c1"&gt;// being capped silently to the maximum legitimate value.&lt;/span&gt;

  &lt;span class="cm"&gt;/* Task: left side LEDS animation */&lt;/span&gt;
  &lt;span class="n"&gt;xTaskCreate&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;vTaskLedsL&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; 
          &lt;span class="s"&gt;&amp;quot;LedsL&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; 
          &lt;span class="n"&gt;configMINIMAL_STACK_SIZE&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; 
          &lt;span class="nb"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; 
          &lt;span class="n"&gt;main_TASK_PRIORITY_LEDS_L&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; 
          &lt;span class="nb"&gt;NULL&lt;/span&gt; &lt;span class="p"&gt;);&lt;/span&gt;

  &lt;span class="cm"&gt;/* Task: right side LEDS animation */&lt;/span&gt;
  &lt;span class="n"&gt;xTaskCreate&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;vTaskLedsR&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; 
          &lt;span class="s"&gt;&amp;quot;LedsR&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; 
          &lt;span class="n"&gt;configMINIMAL_STACK_SIZE&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; 
          &lt;span class="nb"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; 
          &lt;span class="n"&gt;main_TASK_PRIORITY_LEDS_R&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; 
          &lt;span class="nb"&gt;NULL&lt;/span&gt; &lt;span class="p"&gt;);&lt;/span&gt;

  &lt;span class="cm"&gt;/* Start the scheduler. */&lt;/span&gt;
  &lt;span class="n"&gt;vTaskStartScheduler&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;

  &lt;span class="cm"&gt;/* As the scheduler has been started the demo applications tasks will be&lt;/span&gt;
&lt;span class="cm"&gt;  executing and we should never get here! */&lt;/span&gt;
  &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–í—Å–µ –∑–∞–¥–∞—á–∏ –º–æ–≥—É—Ç –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ –æ–¥–Ω–æ–º –∏–∑ —Å–ª–µ–¥—É—é—â–∏—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Running (–∑–∞–ø—É—â–µ–Ω–∞) ‚Äî –∑–∞–¥–∞—á–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è, –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä –∑–∞–Ω—è—Ç –µ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Ready (–≥–æ—Ç–æ–≤–∞) ‚Äî –≥–æ—Ç–æ–≤–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é, –Ω–æ –≤ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä –∑–∞–Ω—è—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –¥—Ä—É–≥–æ–π –∑–∞–¥–∞—á–∏. –ü–æ –æ–∫–æ–Ω—á–∞–Ω–∏–∏ —Ç–µ–∫—É—â–µ–≥–æ –∫–≤–∞–Ω—Ç–∞ –≤—Ä–µ–º–µ–Ω–∏ –∏–∑ –≤—Å–µ—Ö –≥–æ—Ç–æ–≤—ã—Ö –∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é –∑–∞–¥–∞—á –±—É–¥–µ—Ç –∑–∞–ø—É—â–µ–Ω–∞ (–ø–µ—Ä–µ–π–¥—ë—Ç –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è) –∑–∞–¥–∞—á–∞ —Å –Ω–∞–∏–±–æ–ª—å—à–∏–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º. –ï—Å–ª–∏ –∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é –≥–æ—Ç–æ–≤—ã –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–∞–¥–∞—á —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–º, —Ç–æ –±–∏—à—å –∫–∞–∫ –≤ –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ —Å &lt;code&gt;vTaskLedsL&lt;/code&gt; –∏ &lt;code&gt;vTaskLedsR&lt;/code&gt;, —Ç–æ –æ–Ω–∏ –ø–æ –æ—á–µ—Ä–µ–¥–∏ –ø–µ—Ä–µ—Ö–æ–¥—è—Ç –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∏ –ø—Ä–µ–±—ã–≤–∞—é—Ç –≤ –Ω–µ–º –≤ —Ç–µ—á–µ–Ω–∏–µ –æ–¥–Ω–æ–≥–æ —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –∫–≤–∞–Ω—Ç–∞&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Blocked (–∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–∞) ‚Äî –∑–∞–¥–∞—á–∞ –æ–∂–∏–¥–∞–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –∏–ª–∏ –≤–Ω–µ—à–Ω–µ–≥–æ —Å–æ–±—ã—Ç–∏—è. –ù–∞–ø—Ä–∏–º–µ—Ä,
–≤—ã–∑–≤–∞–≤ API-—Ñ—É–Ω–∫—Ü–∏—é &lt;code&gt;vTaskDelay(42)&lt;/code&gt;, –∑–∞–¥–∞—á–∞ –ø–µ—Ä–µ–≤–µ–¥–µ—Ç —Å–µ–±—è –≤ –±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –Ω–µ –ø—Ä–æ–π–¥–µ—Ç –≤—Ä–µ–º–µ–Ω–Ω–æ–π –ø–µ—Ä–∏–æ–¥ –∑–∞–¥–µ—Ä–∂–∫–∏ 42. –ë–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –∑–∞–¥–∞—á–∞ –Ω–µ —Ä–∞—Å—Ö–æ–¥—É–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏, —ç—Ç–æ –≤—Ä–µ–º—è –º–æ–∂–Ω–æ —Å –ø–æ–ª—å–∑–æ–π –¥–ª—è –¥–µ–ª–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –º–µ–Ω–µ–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã—Ö –∑–∞–¥–∞—á–∞—Ö&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Suspended (–ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞) ‚Äî —Ç–∞–∫–∏–µ –∑–∞–¥–∞—á–∏ —Ç–∞–∫–∂–µ –Ω–µ –ø–æ–ª—É—á–∞–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏, –æ–¥–Ω–∞–∫–æ –≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç –±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è, –ø–µ—Ä–µ—Ö–æ–¥ –≤ –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ –≤—ã—Ö–æ–¥ –∏–∑ –Ω–µ–≥–æ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –≤ —è–≤–Ω–æ–º –≤–∏–¥–µ –≤—ã–∑–æ–≤–æ–º API-—Ñ—É–Ω–∫—Ü–∏–π &lt;code&gt;vTaskSuspend()&lt;/code&gt; –∏ &lt;code&gt;xTaskResume()&lt;/code&gt;. –ó–∞–¥–∞—á–∞ –º–æ–∂–µ—Ç –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–π —Å–∫–æ–ª—å —É–≥–æ–¥–Ω–æ –¥–æ–ª–≥–æ&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;–í –ø—Ä–∏–≤–µ–¥–µ–Ω–Ω–æ–º –ø—Ä–∏–º–µ—Ä–µ –∑–∞–¥–∞—á–∏ &lt;code&gt;vTaskLedsL&lt;/code&gt; –∏ &lt;code&gt;vTaskLedsR&lt;/code&gt; –≤—ã–ø–æ–ª–Ω—è—é—Ç –ø–æ–ª–µ–∑–Ω–æ–µ –¥–µ–π—Å—Ç–≤–∏–µ (–≤ –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ ‚Äî –º–∏–≥–∞—é—Ç), –ø–æ—Å–ª–µ —á–µ–≥–æ –æ–∂–∏–¥–∞—é—Ç –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π –ø—Ä–æ–º–µ–∂—É—Ç–æ–∫ –≤—Ä–µ–º–µ–Ω–∏. –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–¥–µ—Ä–∂–∫–∏ –≤ –≤–∏–¥–µ –ø—É—Å—Ç–æ–≥–æ —Ü–∏–∫–ª–∞ &lt;code&gt;for(volatile uint16_t i = 42; i--;);&lt;/code&gt; –∫—Ä–∞–π–Ω–µ –Ω–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞ ‚Äî –æ–Ω–∞ –∫–∞–∫ –±—ã —Å–ª–∏—à–∫–æ–º ¬´–∂–∞–¥–Ω–∞—è¬ª. –ß—Ç–æ –±—É–¥–µ—Ç, –µ—Å–ª–∏ —Ç–∞–∫–∏–º –∑–∞–¥–∞—á–∞–º –Ω–∞–∑–Ω–∞—á–∏—Ç—å —Ä–∞–∑–Ω—ã–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç ? –í—ã—Å–æ–∫–æ–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–∞—è –∑–∞–¥–∞—á–∞ –≤—Å–µ –≤—Ä–µ–º—è –æ—Å—Ç–∞–µ—Ç—Å—è –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é (–Ω–µ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –Ω–∏ –≤ –±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ, –Ω–∏ –≤ –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ), –æ–Ω–∞ –ø–æ–≥–ª–æ—â–∞–µ—Ç –≤—Å–µ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–Ω–æ–µ –≤—Ä–µ–º—è, –≤—Å–ª–µ–¥—Å—Ç–≤–∏–µ —á–µ–≥–æ –Ω–∏–∑–∫–æ–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ –∑–∞–¥–∞—á–∏ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è. –î–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∑–∞–¥–µ—Ä–∂–µ–∫ —Å—Ä–µ–¥—Å—Ç–≤–∞–º–∏ FreeRTOS –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω–∞ API-—Ñ—É–Ω–∫—Ü–∏—è &lt;code&gt;vTaskDelay()&lt;/code&gt;, –∫–æ—Ç–æ—Ä–∞—è –ø–µ—Ä–µ–≤–æ–¥–∏—Ç –∑–∞–¥–∞—á—É, –≤—ã–∑—ã–≤–∞—é—â—É—é —ç—Ç—É —Ñ—É–Ω–∫—Ü–∏—é, –≤ –±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–∞ —Ç—Ä–µ–±—É–µ–º–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–≤–∞–Ω—Ç–æ–≤ –≤—Ä–µ–º–µ–Ω–∏. –î–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —ç—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤ —Ñ–∞–π–ª–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ &lt;em&gt;FreeRTOSConfig.h&lt;/em&gt; –¥–æ–±–∞–≤–∏—Ç—å –º–∞–∫—Ä–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ &lt;code&gt;#define INCLUDE_vTaskDelay 1&lt;/code&gt;, –∞ –µ—Å–ª–∏ –∑–∞–±—ã—Ç—å —ç—Ç–æ —Å–¥–µ–ª–∞—Ç—å, —Ç–æ –ø—Ä–æ–µ–∫—Ç –ø–æ–ø—Ä–æ—Å—Ç—É –Ω–µ —Å–æ–±–µ—Ä—ë—Ç—Å—è:&lt;/p&gt;
&lt;p&gt;&lt;em&gt;task_r_leds.c&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;FreeRTOS.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;task.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;task_r_leds.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;vTaskLedsR&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;pvParameters&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
   &lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="p"&gt;;;&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
     &lt;span class="n"&gt;P3OUT&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;P3OUT&lt;/span&gt; &lt;span class="o"&gt;^&lt;/span&gt; &lt;span class="mh"&gt;0xFF&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="n"&gt;b11&lt;/span&gt; &lt;span class="cm"&gt;/* don&amp;#39;t toggle LCD pins 0b11 */&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
     &lt;span class="n"&gt;vTaskDelay&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;15&lt;/span&gt; &lt;span class="cm"&gt;/* ticks */&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
   &lt;span class="p"&gt;}&lt;/span&gt;

   &lt;span class="n"&gt;vTaskDelete&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="nb"&gt;NULL&lt;/span&gt; &lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;em&gt;task_l_leds.c&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;FreeRTOS.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;task.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;task_l_leds.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;rotate_rgb&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;volatile&lt;/span&gt; &lt;span class="kt"&gt;unsigned&lt;/span&gt; &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="n"&gt;port&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;port&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="n"&gt;b10000&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;do&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;vTaskDelay&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt; &lt;span class="cm"&gt;/* ticks */&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;port&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&amp;gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;port&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;vTaskLedsL&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;pvParameters&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
   &lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="p"&gt;;;&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
     &lt;span class="n"&gt;vTaskDelay&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;42&lt;/span&gt; &lt;span class="cm"&gt;/* ticks */&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
     &lt;span class="n"&gt;rotate_rgb&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;P4OUT&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
     &lt;span class="n"&gt;rotate_rgb&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;P5OUT&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
     &lt;span class="n"&gt;rotate_rgb&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;P6OUT&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
   &lt;span class="p"&gt;}&lt;/span&gt;

   &lt;span class="n"&gt;vTaskDelete&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="nb"&gt;NULL&lt;/span&gt; &lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–û–∫, –∞ –ø–æ—á–µ–º—É –≤ —Ñ–∞–π–ª–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ &lt;em&gt;FreeRTOSConfig.h&lt;/em&gt; –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –º–∞–∫—Ä–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ &lt;code&gt;#define INCLUDE_vTaskDelete 1&lt;/code&gt;, –∞ –ø—Ä–æ–µ–∫—Ç –ø—Ä–æ—Ö–æ–¥–∏—Ç –∫–æ–º–ø–∏–ª—è—Ü–∏—é –±–µ–∑ –æ—à–∏–±–æ–∫ ? –¢—É—Ç –≤—Å—ë –¥–µ–ª–æ –≤ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞ ‚Äî –ø–µ—Ä–µ–¥ –≤—ã–∑–æ–≤–æ–º &lt;code&gt;vTaskDelete&lt;/code&gt; –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –≤–∏–¥–∏—Ç –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ü–∏–∫–ª –∏ –ø—Ä–æ—Å—Ç–æ –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç –≤–µ—Å—å –∫–æ–¥ –ø–æ—Å–ª–µ –Ω–µ–≥–æ, —á—Ç–æ –≤ –ø—Ä–∏–Ω—Ü–∏–ø–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ. –ù–æ —Å—Ç–æ–∏—Ç –Ω–∞–ø—Ä–∏–º–µ—Ä –ø–æ –æ—à–∏–±–∫–µ –≤—ã–π—Ç–∏ –∏–∑ —Ü–∏–∫–ª–∞ &lt;code&gt;break&lt;/code&gt; –∏ –±—É–¥–µ—Ç –æ—à–∏–±–∫–∞ –ø—Ä–∏ —Å–±–æ—Ä–∫–µ.&lt;/p&gt;
&lt;p&gt;P.S. –í –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∏–º–µ–Ω–∞ –ø–æ–¥–∫–ª—é—á–∞–µ–º—ã—Ö —Ñ–∞–π–ª–æ–≤ FreeRTOS –±–µ—Ä—É—Ç—Å—è –≤ –∫–∞–≤—ã—á–∫–∏ –Ω–∞–ø—Ä–∏–º–µ—Ä &lt;code&gt;#include "FreeRTOS.h"&lt;/code&gt;, –≤ —Ç–µ–∫—É—â–∏—Ö –ø—Ä–∏–º–µ—Ä–∞—Ö –µ—Å—Ç—å –Ω–µ–±–æ–ª—å—à–æ–µ –æ—Ç–ª–∏—á–∏–µ &lt;code&gt;#include &amp;lt;FreeRTOS.h&amp;gt;&lt;/code&gt;. –≠—Ç–æ –ª–µ–≥–∫–æ –ø—Ä–∏ –∂–µ–ª–∞–Ω–∏–∏ –ø–æ–º–µ–Ω—è—Ç—å:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ ls -1 *.h *.c &lt;span class="p"&gt;|&lt;/span&gt; xargs -n1 sed -i                          &lt;span class="se"&gt;\&lt;/span&gt;
      -e &lt;span class="s1"&gt;&amp;#39;s/#include\s\+&amp;lt;FreeRTOS.h&amp;gt;/#include &amp;quot;FreeRTOS.h&amp;quot;/&amp;#39;&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
      -e &lt;span class="s1"&gt;&amp;#39;s/#include\s\+&amp;lt;task.h&amp;gt;/#include &amp;quot;task.h&amp;quot;/&amp;#39;&lt;/span&gt;         &lt;span class="se"&gt;\&lt;/span&gt;
      -e &lt;span class="s1"&gt;&amp;#39;s/#include\s\+&amp;lt;semphr.h&amp;gt;/#include &amp;quot;semphr.h&amp;quot;/&amp;#39;&lt;/span&gt;     &lt;span class="se"&gt;\&lt;/span&gt;
      -e &lt;span class="s1"&gt;&amp;#39;s/#include\s\+&amp;lt;queue.h&amp;gt;/#include &amp;quot;queue.h&amp;quot;/&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ù–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏–º–µ—Ä–æ–≤ —ç—Ç–æ –Ω–∏–∫–∞–∫ –Ω–µ –≤–ª–∏—è–µ—Ç ‚Äî –±–∏–Ω–∞—Ä–Ω–∏–∫ –Ω–∞ –≤—ã—Ö–æ–¥–µ &lt;em&gt;a.out&lt;/em&gt; –±—É–¥–µ—Ç –æ–¥–∏–Ω–∞–∫–æ–≤ –≤ –æ–±–æ–∏—Ö —Å–ª—É—á–∞—è—Ö.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2017/04/27/freertos-diagnostika-oshibok-i-khuki/"&gt;–î–∞–ª–µ–µ&lt;/a&gt; —Ö—É–∫–∏.&lt;/p&gt;</content><category term="msp430"></category><category term="RTOS"></category></entry><entry><title>–ú–æ–Ω–æ—Ö—Ä–æ–º–Ω—ã–π OLED –¥–∏—Å–ø–ª–µ–π –Ω–∞ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–µ SSD1306</title><link href="http://proiot.ru/blog/posts/2017/04/25/monokhromnyi-oled-displei-na-kontrollere-ssd1306/" rel="alternate"></link><published>2017-04-25T00:00:00+03:00</published><updated>2017-04-25T00:00:00+03:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2017-04-25:/blog/posts/2017/04/25/monokhromnyi-oled-displei-na-kontrollere-ssd1306/</id><summary type="html">&lt;p&gt;–î–∞–Ω–Ω—ã–π –¥–≤—É—Ö—Ü–≤–µ—Ç–Ω—ã–π (—á—ë—Ä–Ω–æ-–±–µ–ª—ã–π) —ç–∫—Ä–∞–Ω—á–∏–∫ –∏–º–µ–µ—Ç —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ 128—Ö64 –ø–∏–∫—Å–µ–ª–∞ –∏ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä SSD1306 —Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –ª–∏–±–æ –ø–æ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–º—É 8-–±–∏—Ç–Ω–æ–º—É –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É 6800/8080 –ª–∏–±–æ –ø–æ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–º—É I2C/SPI. –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤ —Ü–µ–ª–æ–º –ø–æ—Ö–æ–∂ –Ω–∞ &lt;a href="http://proiot.ru/blog/posts/2017/01/27/picsimjs-simvolnyi-displei-na-baze-hd44780/"&gt;HD44780&lt;/a&gt; - –¥–ª—è –æ–¥–Ω–æ—Å—Ç–æ—Ä–æ–Ω–Ω–µ–≥–æ –æ–±–º–µ–Ω–∞ –¥–∞–Ω–Ω—ã–º–∏ (–∑–∞–ø–∏—Å–∏) –≤—ã—Å—Ç–∞–≤–ª—è—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ 8 –±–∏—Ç, –µ—â—ë –æ–¥–∏–Ω –±–∏—Ç —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –∫–æ–º–∞–Ω–¥—É/–¥–∞–Ω–Ω—ã–µ, –∏ –æ–¥–∏–Ω ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;p&gt;–î–∞–Ω–Ω—ã–π –¥–≤—É—Ö—Ü–≤–µ—Ç–Ω—ã–π (—á—ë—Ä–Ω–æ-–±–µ–ª—ã–π) —ç–∫—Ä–∞–Ω—á–∏–∫ –∏–º–µ–µ—Ç —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ 128—Ö64 –ø–∏–∫—Å–µ–ª–∞ –∏ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä SSD1306 —Å —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º –ª–∏–±–æ –ø–æ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–º—É 8-–±–∏—Ç–Ω–æ–º—É –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É 6800/8080 –ª–∏–±–æ –ø–æ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–º—É I2C/SPI. –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤ —Ü–µ–ª–æ–º –ø–æ—Ö–æ–∂ –Ω–∞ &lt;a href="http://proiot.ru/blog/posts/2017/01/27/picsimjs-simvolnyi-displei-na-baze-hd44780/"&gt;HD44780&lt;/a&gt; - –¥–ª—è –æ–¥–Ω–æ—Å—Ç–æ—Ä–æ–Ω–Ω–µ–≥–æ –æ–±–º–µ–Ω–∞ –¥–∞–Ω–Ω—ã–º–∏ (–∑–∞–ø–∏—Å–∏) –≤—ã—Å—Ç–∞–≤–ª—è—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ 8 –±–∏—Ç, –µ—â—ë –æ–¥–∏–Ω –±–∏—Ç —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –∫–æ–º–∞–Ω–¥—É/–¥–∞–Ω–Ω—ã–µ, –∏ –æ–¥–∏–Ω –±–∏—Ç –¥–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —ç—Ç–æ–π –ø–∞—Ä–æ—á–∫–∏ –∏—Ç–æ–≥–æ –º–∏–Ω–∏–º—É–º 10 –Ω–æ–≥ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞. –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –ø–æ–∑–≤–æ–ª—è—é—Ç –æ–±–æ–π—Ç–∏—Å—å –º–µ–Ω—å—à–∏–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π, –Ω–æ —Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç—É–ø–∞—é—Ç –≤ —Å–∫–æ—Ä–æ—Å—Ç–∏ –æ–±–º–µ–Ω–∞ –¥–∞–Ω–Ω—ã–º–∏. –£ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ msp430f1611 –ø—Ä–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≤—ã–≤–æ–¥–æ–≤ –∏ –≤ –¥–∞–Ω–Ω–æ–º –æ–±—É—á–∞—é—â–µ–º –º–∞—Ç–µ—Ä–∏–∞–ª–µ —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç—Å—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –ø–µ—Ä–∏—Ñ–µ—Ä–∏—é I2C/SPI, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ—Å—Ä–µ–¥–æ—Ç–æ—á–∏—Ç—å—Å—è –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –Ω–∞ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—è—Ö SSD1306. –ü—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–µ –Ω–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±—É–¥–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å —Ç–æ–ª—å–∫–æ –¥–≤–µ —Ñ—É–Ω–∫—Ü–∏–∏ - &lt;code&gt;ssd1306_write_data&lt;/code&gt; –∏ &lt;code&gt;ssd1306_write_instruction&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://mazko.github.io/MSP430.js/4a1dee2b02e6d149594b10d03b7925c8"&gt;MSP430.js&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2017/04/25/monokhromnyi-oled-displei-na-kontrollere-ssd1306/img.zip"&gt;–∏—Å—Ö–æ–¥–Ω–∏–∫–∏&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2017/04/25/monokhromnyi-oled-displei-na-kontrollere-ssd1306/ui.gif" style="width:55%; margin: 0 auto; display:block;"&gt;&lt;/p&gt;
&lt;p&gt;–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ SSD1306 –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç—Å—è –¥–≤—É–º—è —Ñ—É–Ω–∫—Ü–∏—è–º–∏ - –∑–∞–ø–∏—Å—å –¥–∞–Ω–Ω—ã—Ö –∏ –∑–∞–ø–∏—Å—å –∫–æ–º–∞–Ω–¥. –ö–∞—Ä—Ç–∞ –ø–∞–º—è—Ç–∏ GDDRAM –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞–Ω–∞ 8-—é —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏ –ø–æ 128 –±–∞–π—Ç. –°–∏—Å—Ç–µ–º–∞ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –∏–º–µ–µ—Ç –Ω–∞—á–∞–ª–æ –≤ –ª–µ–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É. –î–ª—è –∑–∞–ø–∏—Å–∏ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º–æ–≥–æ –±–∞–π—Ç–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø–æ –∑–∞–¥–∞–Ω–Ω–æ–º—É –∞–¥—Ä–µ—Å—É –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏—è &lt;code&gt;ssd1306_write_byte&lt;/code&gt;. –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –ø–∞–º—è—Ç–∏ SSD1306 –Ω–µ –¥–∞—ë—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∑–∞–¥–∞–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—É—é —Ç–æ—á–∫—É –Ω–∞ –¥–∏—Å–ø–ª–µ–µ, —Ç–æ–ª—å–∫–æ –±–∞–π—Ç. –ï—Å–ª–∏ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–æ—Ä–∏—Å–æ–≤—ã–≤–∞—Ç—å –æ—Ç–¥–µ–ª—å–Ω—ã–µ –ø–∏–∫—Å–µ–ª–∏ –≤–º–µ—Å—Ç–æ –±–∞–π—Ç –Ω—É–∂–Ω–æ –¥–µ—Ä–∂–∞—Ç—å –≤—Å–µ –ø–∏–∫—Å–µ–ª–∏ –≤ –ø–∞–º—è—Ç–∏ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ (–±—É—Ñ–µ—Ä 128x8) –∏ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏ —Å–∫–∏–¥—ã–≤–∞—Ç—å –∏—Ö –Ω–∞ –¥–∏—Å–ø–ª–µ–π –ø–æ–±–∞–π—Ç–æ–≤–æ. –ü—Ä–∏ –∑–∞–ø–∏—Å–∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –±–∞–π—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∑–∞–¥–∞—Ç—å –Ω–∞—á–∞–ª—å–Ω—ã–π –∞–¥—Ä–µ—Å —Ç.–∫. –∫–∞–∂–¥–æ–µ –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ GDDRAM –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–º—É –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç—É –∞–¥—Ä–µ—Å–∞ —Å—Ç–æ–ª–±—Ü–∞, –ø–æ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ –∫–æ–Ω–µ—á–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è (128) —Å—á—ë—Ç—á–∏–∫ –∞–¥—Ä–µ—Å–∞ —Å—Ç–æ–ª–±—Ü–∞ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –≤ –Ω–∞—á–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ (0), –∞ —Å—á—ë—Ç—á–∏–∫ –∞–¥—Ä–µ—Å–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –Ω–∞ –µ–¥–∏–Ω–∏—Ü—É. –ü–æ—Å–ª–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è —Å—á—ë—Ç—á–∏–∫–æ–º –∞–¥—Ä–µ—Å–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∫–æ–Ω–µ—á–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è (8) –æ–±–∞ —Å—á—ë—Ç—á–∏–∫–∞ —Å–±—Ä–æ—Å—è—Ç—Å—è –≤ –Ω–∞—á–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –∏ –ø—Ä–æ—Ü–µ—Å—Å –ø–æ–π–¥—ë—Ç –ø–æ –≤—Ç–æ—Ä–æ–º—É –∫—Ä—É–≥—É.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;ssd1306.c&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;// Address setting commands&lt;/span&gt;
&lt;span class="cp"&gt;#define SSD1306_SET_COL_LO_NIBBLE    0x00&lt;/span&gt;
&lt;span class="cp"&gt;#define SSD1306_SET_COL_HI_NIBBLE    0x10&lt;/span&gt;
&lt;span class="cp"&gt;#define SSD1306_SET_PAGE_START_ADDR  0xB0&lt;/span&gt;

&lt;span class="c1"&gt;// pins&lt;/span&gt;
&lt;span class="cp"&gt;#define SSD1306_DATA_INST            0&lt;/span&gt;
&lt;span class="cp"&gt;#define SSD1306_DATA_E               1&lt;/span&gt;

&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;strobe&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="n"&gt;P3OUT&lt;/span&gt; &lt;span class="o"&gt;|=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;SSD1306_DATA_E&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;P3OUT&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;=&lt;/span&gt; &lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;SSD1306_DATA_E&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt;
&lt;span class="nf"&gt;ssd1306_write_data&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="n"&gt;byte&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="n"&gt;P2OUT&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;byte&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;P3OUT&lt;/span&gt; &lt;span class="o"&gt;|=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;SSD1306_DATA_INST&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;strobe&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt;
&lt;span class="nf"&gt;ssd1306_write_instruction&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="n"&gt;byte&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="n"&gt;P2OUT&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;byte&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;P3OUT&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;=&lt;/span&gt; &lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;SSD1306_DATA_INST&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;strobe&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt;
&lt;span class="nf"&gt;ssd1306_write_byte&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="n"&gt;page&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="n"&gt;byte&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="n"&gt;ssd1306_write_instruction&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;SSD1306_SET_PAGE_START_ADDR&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;page&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;ssd1306_write_instruction&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;SSD1306_SET_COL_LO_NIBBLE&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="mh"&gt;0xF&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
  &lt;span class="n"&gt;ssd1306_write_instruction&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;SSD1306_SET_COL_HI_NIBBLE&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
  &lt;span class="n"&gt;ssd1306_write_data&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;byte&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–õ—é–±–∞—è –∫–∞—Ä—Ç–∏–Ω–∫–∞ –∏–ª–∏ —Ç–µ–∫—Å—Ç —ç—Ç–æ –≤—Å–µ–≥–æ-–ª–∏—à—å –Ω–∞–±–æ—Ä –ø–∏–∫—Å–µ–ª–µ–π. –í —Å–ª—É—á–∞–µ SSD1306 —Ü–≤–µ—Ç–∞ –≤—Å–µ–≥–æ –¥–≤–∞ –æ–¥–∏–Ω –∏–∑ –Ω–∏—Ö —á—ë—Ä–Ω—ã–π. –î–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –ª—é–±–æ–≥–æ —Ñ–∞–π–ª–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –°–∏ –º–∞—Å—Å–∏–≤ –ø–æ—Å–ª—É–∂–∏—Ç —Å–ª–µ–¥—É—é—â–∏–π —Å–∫—Ä–∏–ø—Ç –Ω–∞ –ø–∏—Ç–æ–Ω–µ + ImageMagick:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# http://grep.js.org/?gist=96caa480d220062b18a693f1b2e9f275&lt;/span&gt;
~$ &lt;span class="nb"&gt;alias&lt;/span&gt; &lt;span class="nv"&gt;c128x64&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;convert -resize 128x64!&amp;#39;&lt;/span&gt;
~$ c128x64 eyes.eps xbm:- &lt;span class="p"&gt;|&lt;/span&gt; grep -o &lt;span class="s1"&gt;&amp;#39;0[xX][0-9a-fA-F]\+&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; python3 -c &lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;

&lt;span class="s1"&gt;import sys&lt;/span&gt;

&lt;span class="s1"&gt;# parse stdin image&lt;/span&gt;
&lt;span class="s1"&gt;xbm = [int(line, 16) for line in sys.stdin]&lt;/span&gt;

&lt;span class="s1"&gt;# convert&lt;/span&gt;
&lt;span class="s1"&gt;out = [[0]*128 for i in range(8)]&lt;/span&gt;
&lt;span class="s1"&gt;for y in range(64):&lt;/span&gt;
&lt;span class="s1"&gt;  for x in range(128):&lt;/span&gt;
&lt;span class="s1"&gt;    if x &amp;amp; 7:&lt;/span&gt;
&lt;span class="s1"&gt;      byte &amp;gt;&amp;gt;= 1&lt;/span&gt;
&lt;span class="s1"&gt;    else:&lt;/span&gt;
&lt;span class="s1"&gt;      # 128 / 8 = 16 bytes in one xbm row&lt;/span&gt;
&lt;span class="s1"&gt;      byte = xbm[y * 16 + x // 8]&lt;/span&gt;
&lt;span class="s1"&gt;    if not byte &amp;amp; 1:&lt;/span&gt;
&lt;span class="s1"&gt;      out[y // 8][x] |= (1 &amp;lt;&amp;lt; y % 8)&lt;/span&gt;

&lt;span class="s1"&gt;# print array&lt;/span&gt;
&lt;span class="s1"&gt;for p in out:&lt;/span&gt;
&lt;span class="s1"&gt;  print(&amp;quot;{&amp;quot; + &amp;quot;,&amp;quot;.join(hex(x) for x in p) + &amp;quot;},&amp;quot;)&lt;/span&gt;
&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–î–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ —Ç–æ–∂–µ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –Ω–∞–±–æ—Ä –≥–æ—Ç–æ–≤—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Å–∏–º–≤–æ–ª–∞. –ù–∞–∏–±–æ–ª–µ–µ –ø—Ä–æ—Å—Ç–æ–π —Å–ª—É—á–∞–π - –º–æ–Ω–æ—à–∏—Ä–∏–Ω–Ω—ã–π —à—Ä–∏—Ñ—Ç –≤—Å–µ –∑–Ω–∞–∫–∏ (–ø–ª–æ—â–∞–¥–∫–∏ –∑–Ω–∞–∫–æ–≤) –∫–æ—Ç–æ—Ä–æ–≥–æ –∏–º–µ—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—É—é —à–∏—Ä–∏–Ω—É. –ù–∞–ø—Ä–∏–º–µ—Ä &lt;a href="https://github.com/adafruit/Adafruit-GFX-Library/blob/master/glcdfont.c" rel="nofollow"&gt;—à—Ä–∏—Ñ—Ç&lt;/a&gt; –¥–ª—è ASCII —Å–∏–º–≤–æ–ª–æ–≤ 5x7.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2017/04/25/monokhromnyi-oled-displei-na-kontrollere-ssd1306/font.png" style="width:55%; margin: 0 auto; display:block;"&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="http://mazko.github.io/MSP430.js/56a600e7efa1f648c5305d652d14be6a"&gt;MSP430.js&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2017/04/25/monokhromnyi-oled-displei-na-kontrollere-ssd1306/font.zip"&gt;–∏—Å—Ö–æ–¥–Ω–∏–∫–∏&lt;/a&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cm"&gt;/*&lt;/span&gt;

&lt;span class="cm"&gt;reset &amp;amp;&amp;amp; (export GCC_DIR=~/ti/msp430_gcc ; &lt;/span&gt;
&lt;span class="cm"&gt;    $GCC_DIR/bin/msp430-elf-gcc \&lt;/span&gt;
&lt;span class="cm"&gt;    -I $GCC_DIR/include -L $GCC_DIR/include \&lt;/span&gt;
&lt;span class="cm"&gt;    -Werror -Wall -mmcu=msp430f1611 -O2 test.c ssd1306.c)&lt;/span&gt;

&lt;span class="cm"&gt;*/&lt;/span&gt;

&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;msp430.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;stdint.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;ssd1306.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;font.c&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="cp"&gt;#define STATIC_ASSERT(cond) typedef int foo[(cond) ? 1 : -1]&lt;/span&gt;
&lt;span class="n"&gt;STATIC_ASSERT&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;font&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;256&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt; &lt;span class="cm"&gt;/* uint8_t values 0..255 == 256 */&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="cp"&gt;#undef STATIC_ASSERT&lt;/span&gt;

&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;drawchar&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="n"&gt;page&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;ssd1306_write_byte&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;page&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;font&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;drawstr&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="n"&gt;page&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;drawchar&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;page&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;     &lt;span class="c1"&gt;// 6 pixels wide&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;=&lt;/span&gt; &lt;span class="n"&gt;SSD1306_X_PIXELS&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;    &lt;span class="c1"&gt;// ran out of this page&lt;/span&gt;
      &lt;span class="n"&gt;page&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;page&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;=&lt;/span&gt; &lt;span class="n"&gt;SSD1306_PIXEL_PAGES&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
      &lt;span class="k"&gt;break&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;    &lt;span class="c1"&gt;// ran out of space :(&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;WDTCTL&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;WDTPW&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;WDTHOLD&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;     &lt;span class="c1"&gt;// Stop watchdog timer&lt;/span&gt;

    &lt;span class="c1"&gt;// DCO = 3, RSEL = 0, f = 0.13 MHz&lt;/span&gt;
    &lt;span class="n"&gt;DCOCTL&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="cm"&gt;/* DCO2 + */&lt;/span&gt; &lt;span class="n"&gt;DCO1&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;DCO0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; 
    &lt;span class="n"&gt;BCSCTL1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;XT2OFF&lt;/span&gt; &lt;span class="cm"&gt;/* + RSEL1 + RSEL0 + RSEL2 */&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="n"&gt;P2OUT&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;P3OUT&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;P2DIR&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;P3DIR&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mh"&gt;0xFF&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="n"&gt;ssd1306_init_display&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;

    &lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="p"&gt;(;;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="n"&gt;drawstr&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;!&lt;/span&gt;&lt;span class="se"&gt;\&amp;quot;&lt;/span&gt;&lt;span class="s"&gt;#$%&amp;amp;&amp;#39;()*+,-./0123456789:;&amp;lt;=&amp;gt;?@&amp;quot;&lt;/span&gt;
                    &lt;span class="s"&gt;&amp;quot;ABCDEFGHIJKLMNOPQRSTUVWXYZ[&lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s"&gt;]^_`&amp;quot;&lt;/span&gt;
                    &lt;span class="s"&gt;&amp;quot;abcdefghijklmnopqrstuvwxyz{|}~&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ó–¥–µ—Å—å &lt;code&gt;STATIC_ASSERT&lt;/code&gt; —ç—Ç–æ &lt;a href="http://proiot.ru/blog/posts/2012/10/08/idiomy-v-ansi-c/"&gt;–∏–¥–∏–æ–º–∞&lt;/a&gt; –°–∏, –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —ç—Ç–∞–ø–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –±—É–¥–µ—Ç –ø–æ–ª–µ–∑–Ω–∞ –≤ —Å–ª—É—á–∞–µ —Å–º–µ–Ω—ã —à—Ä–∏—Ñ—Ç–∞ - –Ω–∞ —Ç—É –∂–µ –∫–∏—Ä–∏–ª–ª–∏—Ü—É –Ω–∞–ø—Ä–∏–º–µ—Ä. –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ–Ω–µ—á–Ω–æ –ø—Ä–æ—Å—Ç–µ–π—à–∞—è, —Å–º–µ—â–µ–Ω–∏–µ –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏ –∑–∞–¥–∞—ë—Ç—Å—è –≤ –ø–∏–∫—Å–µ–ª—è—Ö, –Ω–æ –Ω–∞–∫–ª–∞–¥—ã–≤–∞–µ—Ç—Å—è –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –Ω–∞ —Å–º–µ—â–µ–Ω–∏–µ –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏ - –º–∞–∫—Å–∏–º—É–º 8 —Å—Ç—Ä–æ–∫. –í –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã—Ö —Å–ª—É—á–∞—è—Ö –º–æ–∂–Ω–æ –∑–∞–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å –∫–∞–∫—É—é-–Ω–∏–±—É–¥—å –≥–æ—Ç–æ–≤—É—é –≥—Ä–∞—Ñ–∏—á–µ—Å–∫—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É –¥–ª—è –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–≥–æ –¥–∏—Å–ø–ª–µ—è –Ω–∞–ø–æ–¥–æ–±–∏–µ &lt;a href="http://proiot.ru/blog/posts/2017/05/20/ugfx-biblioteka-gui-dlia-mikrokontrollerov/"&gt;uGFX&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2017/04/26/freertos-operatsionnaia-sistema-dlia-mikrokontrollerov/"&gt;–î–∞–ª–µ–µ&lt;/a&gt; –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ FreeRTOS.&lt;/p&gt;</content><category term="msp430"></category><category term="SSD1306"></category></entry><entry><title>–°++ –¥–ª—è –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤ - ¬´–î–µ–∫–æ—Ä–∞—Ç–æ—Ä¬ª</title><link href="http://proiot.ru/blog/posts/2017/03/22/s-dlia-mikrokontrollerov-dekorator/" rel="alternate"></link><published>2017-03-22T00:00:00+02:00</published><updated>2017-03-22T00:00:00+02:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2017-03-22:/blog/posts/2017/03/22/s-dlia-mikrokontrollerov-dekorator/</id><summary type="html">&lt;blockquote&gt;
&lt;p&gt;–ï—Å—Ç—å –¥–≤–∞ —Å–ø–æ—Å–æ–±–∞ —Å–æ–∑–¥–∞–Ω–∏—è –¥–∏–∑–∞–π–Ω–∞ –ø—Ä–æ–≥—Ä–∞–º–º—ã. –û–¥–∏–Ω –∏–∑ –Ω–∏—Ö, —ç—Ç–æ —Å–¥–µ–ª–∞—Ç—å –µ–≥–æ –Ω–∞—Å—Ç–æ–ª—å–∫–æ –ø—Ä–æ—Å—Ç—ã–º, —á—Ç–æ –≤ –Ω–µ–º, –æ—á–µ–≤–∏–¥–Ω–æ, –Ω–µ –±—É–¥–µ—Ç –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–æ–≤. –î—Ä—É–≥–æ–π —Å–ø–æ—Å–æ–± ‚Äî —Å–¥–µ–ª–∞—Ç—å –µ–≥–æ –Ω–∞—Å—Ç–æ–ª—å–∫–æ –∑–∞–ø—É—Ç–∞–Ω–Ω—ã–º, —á—Ç–æ –≤ –Ω–µ–º –Ω–µ –±—É–¥–µ—Ç –æ—á–µ–≤–∏–¥–Ω—ã—Ö –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–æ–≤. ‚Äî C.A. R. Hoare&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;¬´–ü—Ä–∏–µ–º—ã –æ–±—ä–µ–∫—Ç–Ω–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è. –ü–∞—Ç—Ç–µ—Ä–Ω—ã –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è¬ª ‚Äî —ç–ø–æ—Ö–∞–ª—å–Ω–∞—è –∫–Ω–∏–≥–∞ 1994 –≥–æ–¥–∞ –æ–± –∏–Ω–∂–µ–Ω–µ—Ä–∏–∏ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;blockquote&gt;
&lt;p&gt;–ï—Å—Ç—å –¥–≤–∞ —Å–ø–æ—Å–æ–±–∞ —Å–æ–∑–¥–∞–Ω–∏—è –¥–∏–∑–∞–π–Ω–∞ –ø—Ä–æ–≥—Ä–∞–º–º—ã. –û–¥–∏–Ω –∏–∑ –Ω–∏—Ö, —ç—Ç–æ —Å–¥–µ–ª–∞—Ç—å –µ–≥–æ –Ω–∞—Å—Ç–æ–ª—å–∫–æ –ø—Ä–æ—Å—Ç—ã–º, —á—Ç–æ –≤ –Ω–µ–º, –æ—á–µ–≤–∏–¥–Ω–æ, –Ω–µ –±—É–¥–µ—Ç –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–æ–≤. –î—Ä—É–≥–æ–π —Å–ø–æ—Å–æ–± ‚Äî —Å–¥–µ–ª–∞—Ç—å –µ–≥–æ –Ω–∞—Å—Ç–æ–ª—å–∫–æ –∑–∞–ø—É—Ç–∞–Ω–Ω—ã–º, —á—Ç–æ –≤ –Ω–µ–º –Ω–µ –±—É–¥–µ—Ç –æ—á–µ–≤–∏–¥–Ω—ã—Ö –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–æ–≤. ‚Äî C.A. R. Hoare&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;¬´–ü—Ä–∏–µ–º—ã –æ–±—ä–µ–∫—Ç–Ω–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è. –ü–∞—Ç—Ç–µ—Ä–Ω—ã –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è¬ª ‚Äî —ç–ø–æ—Ö–∞–ª—å–Ω–∞—è –∫–Ω–∏–≥–∞ 1994 –≥–æ–¥–∞ –æ–± –∏–Ω–∂–µ–Ω–µ—Ä–∏–∏ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è, –æ–ø–∏—Å—ã–≤–∞—é—â–∞—è —Ä–µ—à–µ–Ω–∏—è –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —á–∞—Å—Ç—ã—Ö –ø—Ä–æ–±–ª–µ–º –≤ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –ü–û. –ö–æ–ª–ª–µ–∫—Ç–∏–≤ –∞–≤—Ç–æ—Ä–æ–≤ –≠. –ì–∞–º–º–∞, –†. –•–µ–ª–º, –†. –î–∂–æ–Ω—Å–æ–Ω, –î–∂. –í–ª–∏—Å—Å–∏–¥–µ—Å —Ç–∞–∫–∂–µ –∏–∑–≤–µ—Å—Ç–µ–Ω –∫–∞–∫ ¬´–ë–∞–Ω–¥–∞ —á–µ—Ç—ã—Ä—ë—Ö¬ª, Gang of Four, GoF.&lt;/p&gt;
&lt;p&gt;GoF –¥–∞—ë—Ç —Å–ª–µ–¥—É—é—â–µ–µ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ: –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä (–∞–Ω–≥–ª. Decorator) ‚Äî –ø–∞—Ç—Ç–µ—Ä–Ω, —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä—É—é—â–∏–π –æ–±—ä–µ–∫—Ç—ã. –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –¥–æ–±–∞–≤–ª—è–µ—Ç –æ–±—ä–µ–∫—Ç—É –Ω–æ–≤—ã–µ –æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç–∏. –Ø–≤–ª—è–µ—Ç—Å—è –≥–∏–±–∫–æ–π –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–æ–π –ø–æ—Ä–æ–∂–¥–µ–Ω–∏—é –ø–æ–¥–∫–ª–∞—Å—Å–æ–≤ —Å —Ü–µ–ª—å—é —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏.&lt;/p&gt;
&lt;p&gt;–û–±—ä–µ–∫—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å (–≤ –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ &lt;a href="http://proiot.ru/blog/posts/2017/03/20/s-18-dlia-mikrokontrollerov-razvedka-boem/"&gt;—Å–ª–æ–π&lt;/a&gt; –¥–ª—è –ª–∞–º–ø–æ—á–µ–∫), –≤—ã–ø–æ–ª–Ω—è–µ—Ç –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏. –û–¥–Ω–∞–∫–æ –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –¥–æ–±–∞–≤–∏—Ç—å –∫ –Ω–µ–º—É –Ω–µ–∫–æ—Ç–æ—Ä—É—é –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å (&lt;a href="http://proiot.ru/blog/posts/2017/03/20/s-18-dlia-mikrokontrollerov-razvedka-boem/"&gt;–∞–Ω–∏–º–∞—Ü–∏–∏&lt;/a&gt;), –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –¥–æ, –ø–æ—Å–ª–µ –∏–ª–∏ –¥–∞–∂–µ –≤–º–µ—Å—Ç–æ –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –æ–±—ä–µ–∫—Ç–∞.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2017/03/22/s-dlia-mikrokontrollerov-dekorator/ui.gif" style="width:50%; margin: 0 auto; display:block;"&gt;&lt;/p&gt;
&lt;p&gt;–ü–æ—Å–∫–æ–ª—å–∫—É –∞–Ω–∏–º–∞—Ü–∏–∏ –∏ –∏—Ö –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∑–∞—Ä–∞–Ω–µ–µ –∏–∑–≤–µ—Å—Ç–Ω—ã –Ω–∞ —ç—Ç–∞–ø–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏, –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä –ª–µ–≥–∫–æ —Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è –Ω–∞ –°++ —à–∞–±–ª–æ–Ω–∞—Ö. –¢–∞–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –±—É–¥–µ—Ç –∑–∞–Ω–∏–º–∞—Ç—å –±–æ–ª—å—à–µ –ø–∞–º—è—Ç–∏ ROM (code bloat), –Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –¥–æ–ª–∂–Ω–∞ —à—É—Å—Ç—Ä–µ–µ - —Ö–æ—Ç—è –¥–ª—è –º–∏–≥–∞—é—â–∏—Ö –ª–∞–º–ø–æ—á–µ–∫ —ç—Ç–æ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ. –ï—â—ë –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–æ–≤ –¥–∞—ë—Ç —É–¥–æ–±–Ω—É—é –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –¥–µ–ª–∞—Ç—å –ø—Ä–æ—Å—Ç—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ &lt;code&gt;static_assert()&lt;/code&gt; –Ω–∞ —ç—Ç–∞–ø–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏. –ù–µ—á—Ç–æ –ø–æ–¥–æ–±–Ω–æ–µ &lt;a href="http://proiot.ru/blog/posts/2012/10/08/idiomy-v-ansi-c/"&gt;–º–æ–∂–Ω–æ&lt;/a&gt; –∫–æ–Ω–µ—á–Ω–æ –∂–µ —Å–æ–æ—Ä—É–¥–∏—Ç—å –∏ –Ω–∞ –°–∏ —Å –ø–æ–º–æ—â—å—é –º–∞–∫—Ä–æ—Å–æ–≤, –Ω–æ –≤ –°++ &lt;code&gt;static_assert()&lt;/code&gt; —ç—Ç–æ —É–∂–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –∏ –≤–µ—Å—å–º–∞ –ø–æ–ª–µ–∑–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º —Ç–∞–∫ —á—Ç–æ –Ω–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è –∑–∞–Ω–æ–≤–æ –∏–∑–æ–±—Ä–µ—Ç–∞—Ç—å –≤–µ–ª–æ—Å–∏–ø–µ–¥.&lt;/p&gt;
&lt;p&gt;–í—Å–µ –∫–ª–∞—Å—Å—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∞–Ω–∏–º–∞—Ü–∏–π —Ä–µ–∞–ª–∏–∑—É—é—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –î–µ–∫–æ—Ä–∞—Ç–æ—Ä–∞ - –º–µ—Ç–æ–¥—ã &lt;code&gt;void draw(RgbStripLayer&amp;amp; layer);&lt;/code&gt; –∏ &lt;code&gt;void set_color(const auto&amp;amp; co)&lt;/code&gt;. –†–∞–±–æ—Ç–∞—è –≤ —Ü–µ–ø–æ—á–∫–µ –∫–∞–∂–¥—ã–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –¥–æ–±–∞–≤–ª—è–µ—Ç (–¥–µ–∫–æ—Ä–∏—Ä—É–µ—Ç) –∫ —Å–ª–æ—é &lt;code&gt;RgbStripLayer&lt;/code&gt; –Ω–æ–≤—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞. –≠—Ç–∏ –∫–ª–∞—Å—Å—ã –≤–∑–∞–∏–º–æ–∑–∞–º–µ–Ω—è–µ–º—ã, –∏—Ö –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É—é –∞–Ω–∏–º–∞—Ü–∏—é. –í –ø—Ä–∏–ª–∞–≥–∞–µ–º—ã—Ö –∏—Å—Ö–æ–¥–Ω–∏–∫–∞—Ö –¥–æ–±–∞–≤–ª–µ–Ω–æ –±–æ–ª—å—à–µ –∞–Ω–∏–º–∞—Ü–∏–π –ø–ª—é—Å –ø—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π —à–∞–±–ª–æ–Ω–æ–≤ (STL) –≤ –°++ - –∞–ª–≥–æ—Ä–∏—Ç–º &lt;code&gt;std::rotate&lt;/code&gt; –¥–ª—è –º–∞—Å—Å–∏–≤–æ–≤.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2017/03/22/s-dlia-mikrokontrollerov-dekorator/a.out"&gt;elf&lt;/a&gt; | &lt;a href="http://mazko.github.io/MSP430.js/3523e01e3e6c96088d0ac6a4c335609b"&gt;MSP430.js&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2017/03/22/s-dlia-mikrokontrollerov-dekorator/src.zip"&gt;–∏—Å—Ö–æ–¥–Ω–∏–∫–∏&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;app.cpp&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;animation.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="k"&gt;namespace&lt;/span&gt; &lt;span class="n"&gt;app&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

    &lt;span class="k"&gt;using&lt;/span&gt; &lt;span class="k"&gt;namespace&lt;/span&gt; &lt;span class="n"&gt;animation&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="k"&gt;constexpr&lt;/span&gt; &lt;span class="k"&gt;auto&lt;/span&gt; &lt;span class="n"&gt;SZ&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;RgbStripLayer&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;STRIP_SZ&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;run&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

        &lt;span class="n"&gt;RgbStripLayer&lt;/span&gt; &lt;span class="n"&gt;l1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(;;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;EachColor&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;DynFill&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;SZ&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Flush&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;Sleep&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;55555&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Nop&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="n"&gt;draw&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;l1&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
            &lt;span class="n"&gt;EachColor&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;FillCW&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;Sleep&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;4444&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Flush&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;gt;&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="n"&gt;draw&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;l1&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
            &lt;span class="n"&gt;EachColor&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;FillCCW&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;Sleep&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;4444&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Flush&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;gt;&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;().&lt;/span&gt;&lt;span class="n"&gt;draw&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;l1&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;

        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;em&gt;animation.h&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;rgb.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="k"&gt;namespace&lt;/span&gt; &lt;span class="n"&gt;animation&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

    &lt;span class="k"&gt;using&lt;/span&gt; &lt;span class="k"&gt;namespace&lt;/span&gt; &lt;span class="n"&gt;rgb&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="k"&gt;struct&lt;/span&gt; &lt;span class="nl"&gt;Nop&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;NonCopyable&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="n"&gt;draw&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;RgbStripLayer&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;layer&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{}&lt;/span&gt;
    &lt;span class="p"&gt;};&lt;/span&gt;

    &lt;span class="k"&gt;template&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;A&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Nop&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Flush&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;NonCopyable&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="n"&gt;m_stream&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;public&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
        &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="n"&gt;draw&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;RgbStripLayer&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;layer&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;layer&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;flush&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
            &lt;span class="n"&gt;m_stream&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;draw&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;layer&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;};&lt;/span&gt;

    &lt;span class="k"&gt;template&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="n"&gt;std&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="kt"&gt;int32_t&lt;/span&gt; &lt;span class="n"&gt;cycles&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;A&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Sleep&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;NonCopyable&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="n"&gt;m_stream&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;public&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
        &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="n"&gt;draw&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;RgbStripLayer&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;layer&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;static_assert&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cycles&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
            &lt;span class="n"&gt;__delay_cycles&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cycles&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
            &lt;span class="n"&gt;m_stream&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;draw&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;layer&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;};&lt;/span&gt;

    &lt;span class="k"&gt;template&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;A&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="n"&gt;RgbStripLayer&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;RGB&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;RgbStripLayer&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;RED&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;FillCW&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;NonCopyable&lt;/span&gt; &lt;span class="cm"&gt;/* clockwise */&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="n"&gt;m_stream&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;RgbStripLayer&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;RGB&lt;/span&gt; &lt;span class="n"&gt;m_color&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;public&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
        &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="n"&gt;draw&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;RgbStripLayer&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;layer&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;auto&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="nl"&gt;m&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;layer&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;mem&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;m&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;m_color&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
                &lt;span class="n"&gt;m_stream&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;draw&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;layer&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
            &lt;span class="p"&gt;}&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;

        &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="n"&gt;set_color&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="k"&gt;auto&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;co&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;m_color&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;co&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;};&lt;/span&gt;

    &lt;span class="k"&gt;template&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;A&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="n"&gt;RgbStripLayer&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;RGB&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;RgbStripLayer&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;RED&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;FillCCW&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;NonCopyable&lt;/span&gt; &lt;span class="cm"&gt;/* counterclockwise */&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="n"&gt;m_stream&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;RgbStripLayer&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;RGB&lt;/span&gt; &lt;span class="n"&gt;m_color&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;public&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
        &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="n"&gt;draw&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;RgbStripLayer&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;layer&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="c1"&gt;// while a pointer is a form of iterator,&lt;/span&gt;
            &lt;span class="c1"&gt;// not all iterators have the same functionality of pointer&lt;/span&gt;
            &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;auto&lt;/span&gt; &lt;span class="n"&gt;it&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;layer&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;mem&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;rbegin&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt; &lt;span class="n"&gt;it&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="n"&gt;layer&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;mem&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;crend&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt; &lt;span class="n"&gt;it&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
                &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;it&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;m_color&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
                &lt;span class="n"&gt;m_stream&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;draw&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;layer&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
            &lt;span class="p"&gt;}&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;

        &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="n"&gt;set_color&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="k"&gt;auto&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;co&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;m_color&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;co&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;};&lt;/span&gt;

    &lt;span class="k"&gt;template&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;A&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;EachColor&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;NonCopyable&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="n"&gt;m_stream&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="k"&gt;constexpr&lt;/span&gt; &lt;span class="k"&gt;auto&lt;/span&gt; &lt;span class="n"&gt;colors&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;RgbStripLayer&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;RED&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;    &lt;span class="n"&gt;RgbStripLayer&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;GREEN&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="n"&gt;RgbStripLayer&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;BLUE&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;   &lt;span class="n"&gt;RgbStripLayer&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;YELLOW&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="n"&gt;RgbStripLayer&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;VIOLET&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;RgbStripLayer&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;CYAN&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="n"&gt;RgbStripLayer&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;WHITE&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  
        &lt;span class="p"&gt;};&lt;/span&gt;

    &lt;span class="k"&gt;public&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
        &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="n"&gt;draw&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;RgbStripLayer&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;layer&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="k"&gt;auto&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="nl"&gt;c&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;colors&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;m_stream&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;set_color&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
                &lt;span class="n"&gt;m_stream&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;draw&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;layer&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
            &lt;span class="p"&gt;}&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;};&lt;/span&gt;

    &lt;span class="k"&gt;template&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="n"&gt;std&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="kt"&gt;int8_t&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="n"&gt;std&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="kt"&gt;int8_t&lt;/span&gt; &lt;span class="n"&gt;l&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;A&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;DynFill&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;NonCopyable&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="n"&gt;m_stream&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;RgbStripLayer&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;RGB&lt;/span&gt; &lt;span class="n"&gt;m_color&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;RgbStripLayer&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;RED&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;public&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
        &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="n"&gt;draw&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;RgbStripLayer&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;layer&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;static_assert&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
            &lt;span class="k"&gt;static_assert&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;l&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
            &lt;span class="k"&gt;static_assert&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;l&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;layer&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;mem&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;size&lt;/span&gt;&lt;span class="p"&gt;());&lt;/span&gt;
            &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;auto&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;l&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;layer&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;mem&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;m_color&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
            &lt;span class="p"&gt;}&lt;/span&gt;
            &lt;span class="n"&gt;m_stream&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;draw&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;layer&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;

        &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="n"&gt;set_color&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="k"&gt;auto&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;co&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;m_color&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;co&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;};&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –∏ –û–û–ü –≤ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞—Ö –∏–º–µ–µ—Ç —Å–≤–æ—é —Å–ø–µ—Ü–∏—Ñ–∏–∫—É, –Ω–∞–∫–ª–∞–¥—ã–≤–∞–µ–º—É—é –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –º–æ–¥–µ–ª—å—é —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∞–º—è—Ç—å—é. –ù–µ–≤–∞–∂–Ω–æ –Ω–∞ —á—ë–º –ø–∏—Å–∞—Ç—å ‚Äî –°–∏ –∏–ª–∏ –°++ –¥–ª—è –≤—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã—Ö —Å–∏—Å—Ç–µ–º –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–µ–π –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–∞–º—è—Ç—å –≤ —Å—Ç–µ–∫–µ —Ç.–∫. –æ–Ω–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–æ–º. –í —Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –≤—ã–¥–µ–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏ –Ω–∞ –∫—É—á–µ &lt;strong&gt;–Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–æ–º&lt;/strong&gt; –∏ –∫–∞–∫ —Å–ª–µ–¥—Å—Ç–≤–∏–µ –µ—ë –Ω–∞–ª–∏—á–∏–µ –≤ –Ω—É–∂–Ω—ã–π –º–æ–º–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º—ã –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç—Å—è. –û–û–ü –∂–µ –±–æ–ª—å—à–µ –ª—é–±–∏—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –≤—ã–¥–µ–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏ ‚Äî –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã &lt;code&gt;new&lt;/code&gt;, &lt;code&gt;malloc&lt;/code&gt;, —É–º–Ω—ã–µ —É–∫–∞–∑–∞—Ç–µ–ª–∏. –ù–µ —Å—Ç–æ–∏—Ç —ç—Ç–æ–≥–æ –≤—Å–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞—Ö –±–µ–∑ —è—Å–Ω–æ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è –≤–æ–∑–º–æ–∂–Ω—ã—Ö –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏–π.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2017/06/22/s-dlia-mikrokontrollerov-upravlenie-pamiatiu/"&gt;–î–∞–ª–µ–µ&lt;/a&gt; –∏–≥—Ä–∞ ¬´–ó–º–µ–π–∫–∞¬ª –≥–¥–µ —Ä–∞–±–æ—Ç–∞ —Å –ø–∞–º—è—Ç—å—é –±—É–¥–µ—Ç –æ–ø–∏—Å–∞–Ω–∞ –±–æ–ª–µ–µ –ø–æ–¥—Ä–æ–±–Ω–æ.&lt;/p&gt;</content><category term="msp430"></category><category term="–ü–∞—Ç—Ç–µ—Ä–Ω"></category></entry><entry><title>–°++ (18+) –¥–ª—è –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤ - —Ä–∞–∑–≤–µ–¥–∫–∞ –±–æ–µ–º</title><link href="http://proiot.ru/blog/posts/2017/03/20/s-18-dlia-mikrokontrollerov-razvedka-boem/" rel="alternate"></link><published>2017-03-20T00:00:00+02:00</published><updated>2017-03-20T00:00:00+02:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2017-03-20:/blog/posts/2017/03/20/s-18-dlia-mikrokontrollerov-razvedka-boem/</id><summary type="html">&lt;blockquote&gt;
&lt;p&gt;–ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –°++ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–æ–≤ –Ω–µ –∑–Ω–∞—é—Ç, —á—Ç–æ –¥–µ–ª–∞–µ—Ç –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –°++ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–æ–≤. ‚Äî –ê–Ω–¥—Ä–µ–π –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–µ—Å–∫—É&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;–ü—Ä–æ–≥—Ä–∞–º–º—ã –¥–ª—è –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤ –¥–µ-—Ñ–∞–∫—Ç–æ &lt;a href="http://proiot.ru/blog/posts/2017/01/13/simuliatsiia-mikrokontrollerov-picsimjs/"&gt;–ø–∏—à—É—Ç—Å—è&lt;/a&gt; –ª–∏–±–æ –Ω–∞ –°–∏ –ª–∏–±–æ –Ω–∞ –∞—Å—Å–µ–º–±–ª–µ—Ä–µ. –°–∏ —ç—Ç–æ –ø—Ä–æ—Ü–µ–¥—É—Ä–Ω—ã–π —è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–ª–∞–±–æ–π —Ç–∏–ø–∏–∑–∞—Ü–∏–µ–π, –æ–±–ª–∞–¥–∞—é—â–∏–π –ø—Ä–æ—Å—Ç—ã–º –∏ –ø–æ–Ω—è—Ç–Ω—ã–º —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–æ–º, –≤—ã—Å–æ–∫–æ–π –ø–µ—Ä–µ–Ω–æ—Å–∏–º–æ—Å—Ç—å—é (–≤ —Å—Ä–∞–≤–Ω–µ–Ω–∏–∏ —Å –∞—Å—Å–µ–º–±–ª–µ—Ä–æ–º), –æ–Ω —Ö–æ—Ä–æ—à–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –∏ ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;blockquote&gt;
&lt;p&gt;–ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –°++ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–æ–≤ –Ω–µ –∑–Ω–∞—é—Ç, —á—Ç–æ –¥–µ–ª–∞–µ—Ç –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –°++ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–æ–≤. ‚Äî –ê–Ω–¥—Ä–µ–π –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–µ—Å–∫—É&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;–ü—Ä–æ–≥—Ä–∞–º–º—ã –¥–ª—è –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤ –¥–µ-—Ñ–∞–∫—Ç–æ &lt;a href="http://proiot.ru/blog/posts/2017/01/13/simuliatsiia-mikrokontrollerov-picsimjs/"&gt;–ø–∏—à—É—Ç—Å—è&lt;/a&gt; –ª–∏–±–æ –Ω–∞ –°–∏ –ª–∏–±–æ –Ω–∞ –∞—Å—Å–µ–º–±–ª–µ—Ä–µ. –°–∏ —ç—Ç–æ –ø—Ä–æ—Ü–µ–¥—É—Ä–Ω—ã–π —è–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–π —Å–ª–∞–±–æ–π —Ç–∏–ø–∏–∑–∞—Ü–∏–µ–π, –æ–±–ª–∞–¥–∞—é—â–∏–π –ø—Ä–æ—Å—Ç—ã–º –∏ –ø–æ–Ω—è—Ç–Ω—ã–º —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–æ–º, –≤—ã—Å–æ–∫–æ–π –ø–µ—Ä–µ–Ω–æ—Å–∏–º–æ—Å—Ç—å—é (–≤ —Å—Ä–∞–≤–Ω–µ–Ω–∏–∏ —Å –∞—Å—Å–µ–º–±–ª–µ—Ä–æ–º), –æ–Ω —Ö–æ—Ä–æ—à–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Å–∏—Å—Ç–µ–º–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –≤ –∫–æ–Ω—Ü–µ-–∫–æ–Ω—Ü–æ–≤ —É—Å–ø–µ—à–Ω–æ –ø—Ä–æ—à–µ–ª –∏—Å–ø—ã—Ç–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–µ–º. –ò –µ—Å–ª–∏ —É –°–∏ –≤—Å—ë —Ç–∞–∫ —Ö–æ—Ä–æ—à–æ, –∑–∞—á–µ–º –≤—Å–µ –≤–µ–¥—É—â–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–∏ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤ (PIC32, MSP430, AVR) –¥—Ä—É–∂–Ω–æ –ø–æ–¥—Ç—è–Ω—É–ª–∏ –≤ —Å–≤–æ–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ä–∏–∏ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ C++ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä—ã ? –í –æ—Ç–ª–∏—á–∏–µ –æ—Ç —Å–≤–æ–µ–≥–æ –ø—Ä–µ–¥—à–µ—Å—Ç–≤–µ–Ω–Ω–∏–∫–∞ –°–∏, C++ –¥–µ–∫–ª–∞—Ä–∏—Ä—É–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫—É —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –ø–∞—Ä–∞–¥–∏–≥–º –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è ‚Äî –ø—Ä–æ—Ü–µ–¥—É—Ä–Ω–æ–µ, –æ–±—ä–µ–∫—Ç–Ω–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ (–û–û–ü), –æ–±–æ–±—â—ë–Ω–Ω–æ–µ (—à–∞–±–ª–æ–Ω—ã). –í–º–µ—Å—Ç–µ —Å —Ç–µ–º C++ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è —Å–µ—Ä–µ–±—Ä—è–Ω–æ–π –ø—É–ª–µ–π –¥–ª—è —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º —Å–≤–æ–µ–≥–æ –ø—Ä–µ–¥—à–µ—Å—Ç–≤–µ–Ω–Ω–∏–∫–∞ ‚Äî —Ä—É—á–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É –Ω–∞ –ø–ª–µ—á–∞—Ö –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–∞. C++ –¥–æ–±–∞–≤–ª—è–µ—Ç –∫ –°–∏ –æ–±—ä–µ–∫—Ç–Ω–æ-–æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ ‚Äî –≤–≤–æ–¥—è—Ç—Å—è –∫–ª–∞—Å—Å—ã, –∫–æ—Ç–æ—Ä—ã–µ –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç —Ç—Ä–∏ —Å–∞–º—ã—Ö –≤–∞–∂–Ω—ã—Ö —Å–≤–æ–π—Å—Ç–≤–∞ –û–û–ü: –∏–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏—é, –Ω–∞—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –∏ –ø–æ–ª–∏–º–æ—Ä—Ñ–∏–∑–º. –û–û–ü –ø—Ä–∏ –≥—Ä–∞–º–æ—Ç–Ω–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –ø—Ä–∏–∑–≤–∞–Ω–æ –ø–æ–≤—ã—Å–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Ç—Ä—É–¥–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–æ–≤, —á–µ–º—É –ø–æ—Å–≤—è—â–µ–Ω–æ –Ω–µ–º–∞–ª–æ —Ä–∞–∑–ª–∏—á–Ω–æ–π –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä—ã –Ω–∞ –ª—é–±–æ–π –≤–∫—É—Å –∏ —Ü–≤–µ—Ç.&lt;/p&gt;
&lt;p&gt;–ï—Å–ª–∏ –æ—Ç–±—Ä–æ—Å–∏—Ç—å —Ä–µ–ª–∏–≥–∏–æ–∑–Ω—ã–µ –ø—Ä–∏—Å—Ç—Ä–∞—Å—Ç–∏—è, —Ç–æ —Å—Ç–æ–∏—Ç –ø—Ä–∏–∑–Ω–∞—Ç—å, —á—Ç–æ –Ω–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç C++ —ç—Ç–æ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –Ω–∞—Ç–∏–≤–Ω—ã–π —è–∑—ã–∫ –±–µ–∑ GC (garbage collector), –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –ª–µ–≥–∫–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –æ—Ç —Å–∞–º–æ–≥–æ –Ω–∏–∑–∫–æ–≥–æ —É—Ä–æ–≤–Ω—è, –±–ª–∏–∑–∫–æ–≥–æ –∫ –∞–ø–ø–∞—Ä–∞—Ç—É—Ä–µ, –¥–æ –æ—á–µ–Ω—å –≤—ã—Å–æ–∫–æ–≥–æ, –≤—Ä–æ–¥–µ –û–û–ü –∏ –æ–±–æ–±—â–µ–Ω–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è. –ü—Ä–∏ —ç—Ç–æ–º –¥–∞–Ω–Ω—ã–π —è–∑—ã–∫ —Å–Ω–∞–±–∂–µ–Ω —à–∏—Ä–æ–∫–∏–º –Ω–∞–±–æ—Ä–æ–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ä–∏—è, –∫–Ω–∏–≥ –∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏, —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∏–Ω—Ç–µ—Ä–Ω–µ—Ç-—Ä–µ—Å—É—Ä—Å–æ–≤. –ü–ª—é—Å –æ–≥—Ä–æ–º–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –≤–æ –≤—Å–µ–º –º–∏—Ä–µ.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2017/03/20/s-18-dlia-mikrokontrollerov-razvedka-boem/ui.gif" style="width:50%; margin: 0 auto; display:block;"&gt;&lt;/p&gt;
&lt;p&gt;–ó–∞–ø—É—Å–∫–∞—Ç—å—Å—è –±—É–¥–µ–º –Ω–∞ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞—Ö MSP430, –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –∫–∞–∫ –æ–±—ã—á–Ω–æ –Ω–∞ —Å–∞–π—Ç–µ &lt;a href="http://www.ti.com/tool/msp430-gcc-opensource" rel="nofollow"&gt;–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—è&lt;/a&gt;. MSP430 ‚Äî —Å–µ–º–µ–π—Å—Ç–≤–æ 16-—Ä–∞–∑—Ä—è–¥–Ω—ã—Ö –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤ —Ñ–∏—Ä–º—ã ¬´Texas Instruments¬ª, –∫–æ—Ç–æ—Ä—ã–µ –∏–º–µ—é—Ç —Ñ–æ–Ω-–ù–µ–π–º–∞–Ω–æ–≤—Å–∫—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É —Å –µ–¥–∏–Ω—ã–º –∞–¥—Ä–µ—Å–Ω—ã–º –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ–º –¥–ª—è –∫–æ–º–∞–Ω–¥ –∏ –¥–∞–Ω–Ω—ã—Ö (–¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è —É Microchip &lt;a href="http://proiot.ru/blog/posts/2017/01/13/simuliatsiia-mikrokontrollerov-picsimjs/"&gt;PIC&lt;/a&gt; –∏ Atmel AVR –ì–∞—Ä–≤–∞—Ä–¥—Å–∫–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞).&lt;/p&gt;
&lt;p&gt;C++ –≤ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å–ª—É—á–∞–µ–≤ –æ–±—Ä–∞—Ç–Ω–æ —Å–æ–≤–º–µ—Å—Ç–∏–º —Å–æ —Å–≤–æ–∏–º –ø—Ä–µ–¥—à–µ—Å—Ç–≤–µ–Ω–Ω–∏–∫–æ–º, —Ç–∞–∫ —á—Ç–æ –ø–æ–Ω–∞—á–∞–ª—É –≤—Å—ë –≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫ –≤ —Å—Ç–∞—Ä–æ–º –¥–æ–±—Ä–æ–º –°–∏ –∏ —Å–æ–≤—Å–µ–º –Ω–µ—Å—Ç—Ä–∞—à–Ω–æ. –ß–∞—Å—Ç–æ—Ç–∞ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤ MSP430 –∑–∞–¥–∞—ë—Ç—Å—è –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ –∏ –º–æ–∂–µ—Ç –º–µ–Ω—è—Ç—å—Å—è –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–ª—è —Å–Ω–∏–∂–µ–Ω–∏—è —ç–Ω–µ—Ä–≥–æ–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è. –°–µ—Ç–∫–∞ —á–∞—Å—Ç–æ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ —Ç–∞–∫—Ç–æ–≤–æ–≥–æ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞ –æ–ø–∏—Å–∞–Ω–∞ –≤ &lt;a href="http://www.ti.com/lit/ds/symlink/msp430f1611.pdf" rel="nofollow"&gt;–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏&lt;/a&gt; - —Ä–µ–≥–∏—Å—Ç—Ä—ã RSEL —Å–ª—É–∂–∞—Ç –¥–ª—è –≥—Ä—É–±–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, DCO –¥–ª—è –±–æ–ª–µ–µ —Ç–æ—á–Ω–æ–π. –ú–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä msp430f1611 –∏–º–µ–µ—Ç —à–µ—Å—Ç—å –≤–æ—Å—å–º–∏–±–∏—Ç–Ω—ã—Ö –ø–æ—Ä—Ç–æ–≤ –≤–≤–æ–¥–∞-–≤—ã–≤–æ–¥–∞, –∞ —à–µ—Å—Ç—å –¥–µ–ª–∏—Ç—Å—è –Ω–∞ —Ç—Ä–∏ –∏ –ø–æ–ª—É—á–∞–µ–º 16 RGB —Å–≤–µ—Ç–æ–¥–∏–æ–¥–æ–≤.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2017/03/20/s-18-dlia-mikrokontrollerov-razvedka-boem/a.out"&gt;elf&lt;/a&gt; | &lt;a href="http://mazko.github.io/MSP430.js/6f9f42f42b3dbdb860b36607e12e34cf"&gt;MSP430.js&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2017/03/20/s-18-dlia-mikrokontrollerov-razvedka-boem/src.zip"&gt;–∏—Å—Ö–æ–¥–Ω–∏–∫–∏&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;main.cpp&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cm"&gt;/*&lt;/span&gt;
&lt;span class="cm"&gt;reset &amp;amp;&amp;amp; (export GCC_DIR=~/ti/msp430_gcc ; &lt;/span&gt;
&lt;span class="cm"&gt;    $GCC_DIR/bin/msp430-elf-c++ \&lt;/span&gt;
&lt;span class="cm"&gt;    -I $GCC_DIR/include -L $GCC_DIR/include \&lt;/span&gt;
&lt;span class="cm"&gt;    -Werror -Wall -Weffc++ -mmcu=msp430f1611 -O2 *.cpp)&lt;/span&gt;
&lt;span class="cm"&gt;*/&lt;/span&gt;

&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;msp430.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;app.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;WDTCTL&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;WDTPW&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;WDTHOLD&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;     &lt;span class="c1"&gt;// Stop watchdog timer&lt;/span&gt;

    &lt;span class="c1"&gt;// DCO = 3, RSEL = 0, f = 0.13 MHz&lt;/span&gt;
    &lt;span class="n"&gt;DCOCTL&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="cm"&gt;/* DCO2 + */&lt;/span&gt; &lt;span class="n"&gt;DCO1&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;DCO0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; 
    &lt;span class="n"&gt;BCSCTL1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;XT2OFF&lt;/span&gt; &lt;span class="cm"&gt;/* + RSEL1 + RSEL0 + RSEL2 */&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="k"&gt;constexpr&lt;/span&gt; &lt;span class="k"&gt;auto&lt;/span&gt; &lt;span class="n"&gt;O&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="n"&gt;P1OUT&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;O&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;P2OUT&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;O&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;P3OUT&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;O&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;P4OUT&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;O&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;P5OUT&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;O&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;P6OUT&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;O&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;P1DIR&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;P2DIR&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;P3DIR&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;P4DIR&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;P5DIR&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;P6DIR&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mh"&gt;0xFF&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;app&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;run&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–¢—É—Ç –≤ –∫–æ–¥–µ —Ç—Ä–∏ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã—Ö –º–æ–º–µ–Ω—Ç–∞, –∫–∞—Å–∞—é—â–∏—Ö—Å—è –°++:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;constexpr&lt;/code&gt; - –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞ –Ω–∞ —ç—Ç–∞–ø–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏, –≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç &lt;code&gt;const&lt;/code&gt; –Ω–µ –∑–∞–Ω–∏–º–∞–µ—Ç —Ñ–∏–∑–∏—á–µ—Å–∫–∏–π –∞–¥—Ä–µ—Å –≤ –ø–∞–º—è—Ç–∏&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;auto&lt;/code&gt; - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤—ã–≤–µ–¥–µ–Ω–∏–µ —Ç–∏–ø–∞ –Ω–∞ —ç—Ç–∞–ø–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –∏—Å—Ö–æ–¥—è –∏–∑ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ–º–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;app::run()&lt;/code&gt; - –≤—ã–∑–æ–≤ –º–µ—Ç–æ–¥–∞ –∏–∑ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –∏–º—ë–Ω app&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;em&gt;app.h&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;namespace&lt;/span&gt; &lt;span class="n"&gt;app&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;run&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;em&gt;app.cpp&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;initializer_list&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;rgb.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="k"&gt;namespace&lt;/span&gt; &lt;span class="n"&gt;app&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

    &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;run&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

        &lt;span class="c1"&gt;// rgb_strip: default initialization&lt;/span&gt;
        &lt;span class="n"&gt;rgb&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;RgbStripLayer&lt;/span&gt; &lt;span class="n"&gt;rgb_strip&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

        &lt;span class="k"&gt;constexpr&lt;/span&gt; &lt;span class="k"&gt;auto&lt;/span&gt; &lt;span class="n"&gt;colors&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;rgb_strip&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;RED&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;    &lt;span class="n"&gt;rgb_strip&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;GREEN&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="n"&gt;rgb_strip&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;BLUE&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;   &lt;span class="n"&gt;rgb_strip&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;YELLOW&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="n"&gt;rgb_strip&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;VIOLET&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;rgb_strip&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;CYAN&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="n"&gt;rgb_strip&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;WHITE&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="n"&gt;rgb_strip&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;BLACK&lt;/span&gt;
        &lt;span class="p"&gt;};&lt;/span&gt;

        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(;;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="k"&gt;auto&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="nl"&gt;c&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;colors&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
                &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;auto&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="nl"&gt;m&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;rgb_strip&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;mem&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
                    &lt;span class="n"&gt;m&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
                    &lt;span class="n"&gt;rgb_strip&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;flush&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
                    &lt;span class="n"&gt;__delay_cycles&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10000&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
                &lt;span class="p"&gt;}&lt;/span&gt;
            &lt;span class="p"&gt;}&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;—Ñ—É–Ω–∫—Ü–∏—è &lt;code&gt;run&lt;/code&gt; –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ –∏–º—ë–Ω &lt;code&gt;namespace app&lt;/code&gt; - –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –æ–¥–Ω–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ –∏–º—ë–Ω –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—ã (–∏–º–µ–Ω–∞) –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã, —Ç–æ–≥–¥–∞ –∫–∞–∫ –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –º–æ–∂–µ—Ç –±—ã—Ç—å –æ–ø—Ä–µ–¥–µ–ª—ë–Ω –≤ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞—Ö –∏–º—ë–Ω&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;–¥–ª—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π &lt;code&gt;rgb_strip&lt;/code&gt; –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ –ø–æ—ç—Ç–æ–º—É –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é - –¥–ª—è –∫–ª–∞—Å—Å–æ–≤, —Å—Ç—Ä—É–∫—Ç—É—Ä –∏ –æ–±—ä–µ–¥–∏–Ω–µ–Ω–∏–π —ç—Ç–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å –ø–æ–º–æ—â—å—é –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (–¥–æ –∫–ª–∞—Å—Å–æ–≤ –º—ã –µ—â—ë –¥–æ–π–¥—ë–º)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;—Ü–∏–∫–ª –ø–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É &lt;code&gt;for (const auto&amp;amp; c : colors)&lt;/code&gt; –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ–π—Ç–∏—Å—å –ø–æ –≤—Å–µ–º —ç–ª–µ–º–µ–Ω—Ç–∞–º –±–µ–∑ —è–≤–Ω–æ–≥–æ —É–∫–∞–∑–∞–Ω–∏—è –∏–Ω–¥–µ–∫—Å–∞ –∏ —Å—Ç–∞–ª–æ –±—ã—Ç—å –±–µ–∑ –æ—à–∏–±–æ–∫, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –∏–Ω–¥–µ–∫—Å–æ–º –∑–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;–°++ –¥–∞—ë—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç—É –∏–∑–±–µ–≥–∞—Ç—å –ª–∏—à–Ω–∏—Ö –∑–≤—ë–∑–¥–æ—á–µ–∫ - –¥–æ—Å—Ç—É–ø –∫ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º –ø–æ —Å—Å—ã–ª–∫–µ &lt;code&gt;auto&amp;amp; c&lt;/code&gt; –æ–±—ã—á–Ω–æ –±–µ–∑–æ–ø–∞—Å–Ω–µ–µ –∏ –±–æ–ª–µ–µ —Å—Ç—Ä–æ–≥–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–æ–º —á–µ–º —á–µ—Ä–µ–∑ —Ä–∞–∑—ã–º–µ–Ω–æ–≤—ã–≤–∞–Ω–∏–µ —É–∫–∞–∑–∞—Ç–µ–ª—è &lt;code&gt;*—Å&lt;/code&gt; –≤ —Å—Ç–∏–ª–µ –°–∏&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;em&gt;hal.h&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;pin.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;msp430.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;cstdint&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="k"&gt;namespace&lt;/span&gt; &lt;span class="n"&gt;pin&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="c1"&gt;// MSP430 aliases&lt;/span&gt;
    &lt;span class="k"&gt;using&lt;/span&gt; &lt;span class="n"&gt;msp430_port_t&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;decltype&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;P1OUT&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;using&lt;/span&gt; &lt;span class="n"&gt;msp430_pin_t&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Pin&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;msp430_port_t&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;std&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="kt"&gt;uint8_t&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;using msp430_port_t = decltype(P1OUT);&lt;/code&gt; - –ø—Å–µ–≤–¥–æ–Ω–∏–º —Ç–∏–ø–∞, –≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –º–æ–∂–Ω–æ –±—ã–ª–æ –±—ã —Å–ø–æ–∫–æ–π–Ω–æ –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ C–∏ &lt;code&gt;typedef decltype(P1OUT) msp430_port_t&lt;/code&gt; - —ç—Ç–æ –¥–µ–ª–æ –≤–∫—É—Å–∞ –∏ —Å—Ç–∏–ª—è&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;decltype(P1OUT)&lt;/code&gt; - –≤ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å–ª—É—á–∞–µ–≤ –Ω–∞–º –Ω–µ –Ω—É–∂–Ω–æ –∑–Ω–∞—Ç—å –∫–∞–∫–æ–π —Ç–∞–º –∏–º–µ–Ω–Ω–æ —É –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ –ø–æ—Ä—Ç - 8, 16 –∏–ª–∏ 32 –±–∏—Ç, –Ω–æ –µ–≥–æ —Ç–∏–ø –Ω–∞–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è —Ç.–∫. –ø—Ä–æ–≤–µ—Ä–∫—É —Ç–∏–ø–æ–≤ –Ω–∞ —ç—Ç–∞–ø–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –Ω–∏–∫—Ç–æ –Ω–µ –æ—Ç–º–µ–Ω—è–ª&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;Pin&amp;lt;msp430_port_t, std::uint8_t&amp;gt;&lt;/code&gt; - –ø—Å–µ–≤–¥–æ–Ω–∏–º —à–∞–±–ª–æ–Ω–∞, –∫—Ç–æ —ç—Ç–æ —Ç–∞–∫–æ–π –∏ –∑–∞—á–µ–º –æ–Ω –Ω—É–∂–µ–Ω —Å—Ç–∞–Ω–µ—Ç –ø–æ–Ω—è—Ç–Ω–æ —á—É—Ç—å –¥–∞–ª—å—à–µ&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;em&gt;non-copyable.h&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;// C++ compile time check idiom: Non-Copyable Class&lt;/span&gt;
&lt;span class="c1"&gt;// TODO: inheritance approach bloats the code size&lt;/span&gt;
&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;NonCopyable&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="k"&gt;protected&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;NonCopyable&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;NonCopyable&lt;/span&gt; &lt;span class="k"&gt;const&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;delete&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;NonCopyable&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="k"&gt;operator&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;NonCopyable&lt;/span&gt; &lt;span class="k"&gt;const&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;delete&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;NonCopyable&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;default&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;};&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è... –í –≤–µ–∂–ª–∏–≤–æ–π —Ñ–æ—Ä–º–µ –ø—Ä–µ–¥–ª–∞–≥–∞—é –µ–≥–æ —Å—Ä–∞–∑—É –æ—Ç–∫–ª—é—á–∞—Ç—å –∏ –∑–∞–±—ã—Ç—å - –¥–ª—è —ç—Ç–æ–≥–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–æ—Å—Ç–æ –Ω–∞—Å–ª–µ–¥–æ–≤–∞—Ç—å –∫–ª–∞—Å—Å—ã –æ—Ç –∫–ª–∞—Å—Å–∞ &lt;code&gt;NonCopyable&lt;/code&gt;. –í —Ç–∞–∫–æ–º —Å–ª—É—á–∞–µ –∫—Ä–∏–≤–æ–π –∫–æ–¥, –ø—ã—Ç–∞—é—â–∏–π—Å—è —Å–æ–∑–¥–∞—Ç—å –ø–æ–±–∏—Ç–æ–≤—É—é –∫–æ–ø–∏—é –æ–±—ä–µ–∫—Ç–∞ –ø—Ä–æ—Å—Ç–æ —Å–ª–æ–º–∞–µ—Ç –∫–æ–º–ø–∏–ª—è—Ü–∏—é –∏ —ç—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;rgb.h&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;hal.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;array&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="k"&gt;namespace&lt;/span&gt; &lt;span class="n"&gt;rgb&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

    &lt;span class="k"&gt;using&lt;/span&gt; &lt;span class="k"&gt;namespace&lt;/span&gt; &lt;span class="n"&gt;pin&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;RgbStripLayer&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;NonCopyable&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

        &lt;span class="k"&gt;template&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;msp430_port_t&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;p1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;msp430_port_t&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;p2&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="k"&gt;struct&lt;/span&gt; &lt;span class="n"&gt;MonoStrip&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="n"&gt;MonoStrip&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;P1OUT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;P2OUT&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;red&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="n"&gt;MonoStrip&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;P3OUT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;P4OUT&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;green&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="n"&gt;MonoStrip&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;P5OUT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;P6OUT&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;blue&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="k"&gt;public&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
        &lt;span class="c1"&gt;// mem: value initialization&lt;/span&gt;
        &lt;span class="n"&gt;RgbStripLayer&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;mem&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{}&lt;/span&gt;

        &lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="k"&gt;constexpr&lt;/span&gt; &lt;span class="n"&gt;std&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="kt"&gt;size_t&lt;/span&gt; &lt;span class="n"&gt;STRIP_SZ&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

        &lt;span class="k"&gt;struct&lt;/span&gt; &lt;span class="n"&gt;RGB&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="kt"&gt;bool&lt;/span&gt; &lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;g&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;};&lt;/span&gt;

        &lt;span class="n"&gt;std&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;array&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;RGB&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;STRIP_SZ&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;mem&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

        &lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="k"&gt;constexpr&lt;/span&gt; &lt;span class="n"&gt;RGB&lt;/span&gt; &lt;span class="n"&gt;RED&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="n"&gt;GREEN&lt;/span&gt;  &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="p"&gt;},&lt;/span&gt; 
                         &lt;span class="n"&gt;BLUE&lt;/span&gt;    &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="n"&gt;YELLOW&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="p"&gt;},&lt;/span&gt; 
                         &lt;span class="n"&gt;CYAN&lt;/span&gt;    &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="n"&gt;VIOLET&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="p"&gt;},&lt;/span&gt; 
                         &lt;span class="n"&gt;WHITE&lt;/span&gt;   &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="n"&gt;BLACK&lt;/span&gt;  &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="p"&gt;};&lt;/span&gt;

        &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;flush&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;

        &lt;span class="n"&gt;RgbStripLayer&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="k"&gt;operator&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="n"&gt;RgbStripLayer&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;layer&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;};&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ò—Ç–∞–∫ –û–û–ü.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;–≤—Å–µ –ø–æ–ª—è –∏ –º–µ—Ç–æ–¥—ã –∫–ª–∞—Å—Å–æ–≤ &lt;code&gt;class&lt;/code&gt; (–∞ —Ç–∞–∫–∂–µ —Å—Ç—Ä—É–∫—Ç—É—Ä &lt;code&gt;struct&lt;/code&gt;) –∏–º–µ—é—Ç –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ - –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤—Å–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∫–ª–∞—Å—Å–∞ —è–≤–ª—è–µ—Ç—Å—è –¥–æ—Å—Ç—É–ø–Ω—ã–º –¥–ª—è —á—Ç–µ–Ω–∏—è –∏ –∑–∞–ø–∏—Å–∏ —Ç–æ–ª—å–∫–æ –¥–ª—è –Ω–µ–≥–æ —Å–∞–º–æ–≥–æ —Ç.–µ. –∑–∞–∫—Ä—ã—Ç–æ (private), –∞ –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã &lt;code&gt;struct&lt;/code&gt; –Ω–∞–æ–±–æ—Ä–æ—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤—Å—ë –æ—Ç–∫—Ä—ã—Ç–æ –¥–ª—è –≤—Å–µ—Ö (public)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;–ø–æ–ª—è red, green, blue –≤ –∫–ª–∞—Å—Å–µ &lt;code&gt;RgbStripLayer&lt;/code&gt; (—Å–ª–æ–π –∞–Ω–∏–º–∞—Ü–∏–∏) —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ - –≤—Å–µ —ç–∫–∑–µ–º–ø–ª—è—Ä—ã —ç—Ç–æ–≥–æ –∫–ª–∞—Å—Å–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–¥–Ω—É –∏ —Ç—É –∂–µ –∫–æ–ø–∏—é —ç—Ç–∏—Ö –ø–æ–ª–µ–π –∏ —Ç–µ–º —Å–∞–º—ã–º —ç–∫–æ–Ω–æ–º–∏—Ç—Å—è –ø–∞–º—è—Ç—å RAM&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;std::array&lt;/code&gt; - —ç—Ç–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –º–∞—Å—Å–∏–≤–∞ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞, –∏–º–µ–µ—Ç —Ç—É –∂–µ —Å–µ–º–∞–Ω—Ç–∏–∫—É, —á—Ç–æ –∏ C–∏ –º–∞—Å—Å–∏–≤—ã –ø–ª—é—Å –∑–Ω–∞–µ—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —Ä–∞–∑–º–µ—Ä, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ, –∏—Ç–µ—Ä–∞—Ç–æ—Ä—ã –∏ —Ç.–¥.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;–º–µ—Ç–æ–¥—ã, —Å–æ–≤–ø–∞–¥–∞—é—â–∏–µ —Å –∏–º–µ–Ω–µ–º –∫–ª–∞—Å—Å–∞ —ç—Ç–æ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ã, &lt;code&gt;RgbStripLayer(): mem() {}&lt;/code&gt; —ç—Ç–æ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ç.–∫. –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤, –≤ –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä &lt;code&gt;mem&lt;/code&gt; –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è –Ω—É–ª—è–º–∏&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;—Å–ª–æ–∏ –∞–Ω–∏–º–∞—Ü–∏–π &lt;code&gt;RgbStripLayer&lt;/code&gt; –º–æ–∂–Ω–æ —Å–º–µ—à–∏–≤–∞—Ç—å –º–µ–∂–¥—É —Å–æ–±–æ–π - –¥–ª—è —ç—Ç–æ–≥–æ –ø–µ—Ä–µ–≥—Ä—É–∂–µ–Ω –æ–ø–µ—Ä–∞—Ç–æ—Ä &lt;code&gt;+=&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;em&gt;rgb.cpp&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;rgb.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="k"&gt;namespace&lt;/span&gt; &lt;span class="n"&gt;rgb&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

    &lt;span class="k"&gt;template&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;msp430_port_t&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;p1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;msp430_port_t&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;p2&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="k"&gt;struct&lt;/span&gt; &lt;span class="n"&gt;RgbStripLayer&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="nl"&gt;MonoStrip&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;NonCopyable&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;msp430_pin_t&lt;/span&gt; &lt;span class="n"&gt;leds&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;STRIP_SZ&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="n"&gt;p1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="n"&gt;p1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="n"&gt;p1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="n"&gt;p1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt; &lt;span class="p"&gt;},&lt;/span&gt;
            &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="n"&gt;p1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt; &lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="n"&gt;p1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt; &lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="n"&gt;p1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt; &lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="n"&gt;p1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;7&lt;/span&gt; &lt;span class="p"&gt;},&lt;/span&gt;
            &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="n"&gt;p2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="n"&gt;p2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="n"&gt;p2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="n"&gt;p2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt; &lt;span class="p"&gt;},&lt;/span&gt;
            &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="n"&gt;p2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt; &lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="n"&gt;p2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt; &lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="n"&gt;p2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt; &lt;span class="p"&gt;},&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="n"&gt;p2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;7&lt;/span&gt; &lt;span class="p"&gt;},&lt;/span&gt;
        &lt;span class="p"&gt;};&lt;/span&gt;
    &lt;span class="p"&gt;};&lt;/span&gt;

    &lt;span class="k"&gt;decltype&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;RgbStripLayer&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;red&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;RgbStripLayer&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;red&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;decltype&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;RgbStripLayer&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;green&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;RgbStripLayer&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;green&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;decltype&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;RgbStripLayer&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;blue&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;RgbStripLayer&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;blue&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="n"&gt;RgbStripLayer&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;flush&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;auto&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;mem&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;size&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="p"&gt;;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;red&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;leds&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;].&lt;/span&gt;&lt;span class="n"&gt;set&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mem&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;].&lt;/span&gt;&lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
            &lt;span class="n"&gt;green&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;leds&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;].&lt;/span&gt;&lt;span class="n"&gt;set&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mem&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;].&lt;/span&gt;&lt;span class="n"&gt;g&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
            &lt;span class="n"&gt;blue&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;leds&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;].&lt;/span&gt;&lt;span class="n"&gt;set&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mem&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;].&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="n"&gt;RgbStripLayer&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;RgbStripLayer&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="k"&gt;operator&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="n"&gt;RgbStripLayer&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;layer&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;auto&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;mem&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;size&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="p"&gt;;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;mem&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;].&lt;/span&gt;&lt;span class="n"&gt;r&lt;/span&gt; &lt;span class="o"&gt;|=&lt;/span&gt; &lt;span class="n"&gt;layer&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;mem&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;].&lt;/span&gt;&lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
            &lt;span class="n"&gt;mem&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;].&lt;/span&gt;&lt;span class="n"&gt;g&lt;/span&gt; &lt;span class="o"&gt;|=&lt;/span&gt; &lt;span class="n"&gt;layer&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;mem&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;].&lt;/span&gt;&lt;span class="n"&gt;g&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
            &lt;span class="n"&gt;mem&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;].&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt; &lt;span class="o"&gt;|=&lt;/span&gt; &lt;span class="n"&gt;layer&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;mem&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;].&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;

        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;–æ–±—ä—è–≤–ª–µ–Ω–∏–µ –∫–ª–∞—Å—Å–∞ –∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –≤ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–∞—Ö –≤ –°++ –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–π, –æ–¥–Ω–∞–∫–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —É—Å–∫–æ—Ä–∏—Ç—å —Å–±–æ—Ä–∫—É –ø—Ä–æ–µ–∫—Ç–∞ –∑–∞ —Å—á—ë—Ç —Ç.–Ω. —Ä–∞–∑–¥–µ–ª—å–Ω–æ–π –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ - —Ç–∞–∫–∂–µ –∫–∞–∫ –∏ –≤ –°–∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;—à–∞–±–ª–æ–Ω—ã C++ –ø–æ–∑–≤–æ–ª—è—é—Ç –∑–∞–¥–∞–≤–∞—Ç—å –æ–±–æ–±—â—ë–Ω–Ω—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã –±–µ–∑ –ø—Ä–∏–≤—è–∑–∫–∏ –∫ –Ω–µ–∫–æ—Ç–æ—Ä—ã–º –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º - –≤ —Å–ª—É—á–∞–µ c &lt;code&gt;MonoStrip&lt;/code&gt; —ç—Ç–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –ø–æ—Ä—Ç—ã –≤–≤–æ–¥–∞ –≤—ã–≤–æ–¥–∞ p1, p2 —Ä–∞–∑–ª–∏—á–Ω—ã–µ —É –∫–∞–∂–¥–æ–≥–æ —Ü–≤–µ—Ç–∞, –∫–æ–¥ —à–∞–±–ª–æ–Ω–∞ —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –Ω–∞ —ç—Ç–∞–ø–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –∏ –≤ —ç—Ç–æ–º –æ–Ω–∏ —Å—Ö–æ–∂–∏ —Å –º–∞–∫—Ä–æ—Å–∞–º–∏ –°–∏&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;–∫–∞–∂–¥—ã–π –∫–ª–∞—Å—Å –≤ C++ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–≤–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –∏–º–µ–Ω, –µ—Å–ª–∏ –≤–Ω—É—Ç—Ä–∏ –∫–ª–∞—Å—Å–∞ –∑–∞–ø–∏—Å–∞–Ω–æ —Ç–æ–ª—å–∫–æ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ, —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –≤ –¥—Ä—É–≥–æ–º –º–µ—Å—Ç–µ —Å –ø–æ–º–æ—â—å—é –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ –æ–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏ ::&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;–ù—É –∏ –ø–æ—Å–ª–µ–¥–Ω–∏–π –∫–ª–∞—Å—Å –æ–Ω —Å–æ–≤—Å–µ–º –ø—Ä–æ—Å—Ç–æ–π - –∫–∞–∂–¥–∞—è –Ω–æ–≥–∞ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ —ç—Ç–æ –æ–±—ä–µ–∫—Ç. –ó–∞ —Å—á—ë—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —à–∞–±–ª–æ–Ω–æ–≤ –∫–ª–∞—Å—Å Pin –Ω–∏—á–µ–≥–æ –Ω–µ –∑–Ω–∞–µ—Ç –æ–± –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ - —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö –ø–æ—Ä—Ç–∞ –≤–≤–æ–¥–∞-–≤—ã–≤–æ–¥–∞ —è–≤–ª—è–µ—Ç—Å—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º —à–∞–±–ª–æ–Ω–∞:&lt;/p&gt;
&lt;p&gt;&lt;em&gt;pin.h&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;non-copyable.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="k"&gt;namespace&lt;/span&gt; &lt;span class="n"&gt;pin&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;template&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="k"&gt;typename&lt;/span&gt; &lt;span class="n"&gt;port_t&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;typename&lt;/span&gt; &lt;span class="n"&gt;pos_t&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Pin&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;NonCopyable&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;port_t&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;m_port&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="n"&gt;port_t&lt;/span&gt; &lt;span class="n"&gt;m_mask&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;public&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;Pin&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;port_t&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;port&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="n"&gt;pos_t&lt;/span&gt; &lt;span class="n"&gt;pos&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;m_port&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;port&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;m_mask&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;pos&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{}&lt;/span&gt;

        &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="n"&gt;set&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="kt"&gt;bool&lt;/span&gt; &lt;span class="n"&gt;v&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;true&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;m_port&lt;/span&gt; &lt;span class="o"&gt;|=&lt;/span&gt; &lt;span class="n"&gt;m_mask&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
            &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;clr&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
            &lt;span class="p"&gt;}&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;

        &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="n"&gt;clr&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;m_port&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;=&lt;/span&gt; &lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="n"&gt;m_mask&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;};&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;–µ—Å–ª–∏ —Ç–µ–ª–æ –º–µ—Ç–æ–¥–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–æ –ø—Ä–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏–∏ –∫–ª–∞—Å—Å–∞, –º–µ—Ç–æ–¥ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —è–≤–ª—è—é—Ç—Å—è –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º (inline) - –æ–±—ã—á–Ω–æ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º–∏ –¥–µ–ª–∞—é—Ç –∫–æ—Ä–æ—Ç–∫–∏–µ –º–µ—Ç–æ–¥—ã&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;–∞—Ä–≥—É–º–µ–Ω—Ç—ã —Ñ—É–Ω–∫—Ü–∏–π –≤ –°++ –º–æ–≥—É—Ç –∏–º–µ—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—è –∫–∞–∫ –Ω–∞–ø—Ä–∏–º–µ—Ä &lt;code&gt;const bool v = true&lt;/code&gt; , —ç—Ç–æ –∂–µ –º–æ–∂–Ω–æ –±—ã–ª–æ –±—ã —Å–¥–µ–ª–∞—Ç—å –∏ —Å –ø–æ–º–æ—â—å—é –ø–µ—Ä–µ–≥—Ä—É–∑–∫–∏ —Ñ—É–Ω–∫—Ü–∏–π&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;–û–¥–Ω–æ–π –∏–∑ —Ç–∏–ø–∏—á–Ω—ã—Ö –æ—à–∏–±–æ–∫ –ø—Ä–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–∏ –Ω–∞ C++ —è–≤–ª—è–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ &lt;strong&gt;–Ω–µ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö&lt;/strong&gt;. –ß—Ç–µ–Ω–∏–µ –∏–∑ –Ω–µ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –ø–æ –°—Ç–∞–Ω–¥–∞—Ä—Ç—É —è–≤–ª—è–µ—Ç—Å—è –Ω–µ–æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–º –ø–æ–≤–µ–¥–µ–Ω–∏–µ–º. –ù–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ –æ–±—ã—á–Ω–æ –æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–º –∫–∞–∫–æ–µ-—Ç–æ –ø–æ–ª—É—Å–ª—É—á–∞–π–Ω–æ–µ –º—É—Å–æ—Ä–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –ø—Ä–∏—á—ë–º –æ–Ω–æ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–∞–∑–Ω—ã–º –æ—Ç –∑–∞–ø—É—Å–∫–∞ –∫ –∑–∞–ø—É—Å–∫—É –∏ —Ä–∞–∑–Ω—ã–º –Ω–∞ —Ä–∞–∑–Ω—ã—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Ö. –û—Ç—Å—é–¥–∞ –∏ –ø–æ–ª—É—á–∞–µ—Ç—Å—è, —á—Ç–æ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –Ω–∏ —Å —Ç–æ–≥–æ –Ω–∏ —Å —Å–µ–≥–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ-—Ä–∞–∑–Ω–æ–º—É.&lt;/p&gt;
&lt;p&gt;–ö–∞–∫ –∏ –≤ –°–∏, –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–æ—Å—Ç—ã—Ö —Ç–∏–ø–æ–≤ –≤ –°++ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É—é—Ç—Å—è –Ω—É–ª—è–º–∏, –ª–æ–∫–∞–ª—å–Ω—ã–µ ‚Äî –Ω–µ—Ç. –ï—Å–ª–∏ –∂–µ –º—ã —Ä–∞–±–æ—Ç–∞–µ–º —Å –æ–±—ä–µ–∫—Ç–∞–º–∏, –¥–ª—è –∫–æ—Ç–æ—Ä—ã—Ö –æ–ø—Ä–µ–¥–µ–ª—ë–Ω –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –æ–Ω –±—É–¥–µ—Ç –≤—ã–∑–≤–∞–Ω –≤ –ª—é–±–æ–º —Å–ª—É—á–∞–µ –∏ –≤ –Ω—ë–º —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –ø–æ–ª—è, —á—Ç–æ–±—ã –Ω–µ —Å—Ç–∞–ª–∫–∏–≤–∞—Ç—å—Å—è —Å —Ç–µ–º, —á—Ç–æ –ø—Ä–æ–≥—Ä–∞–º–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ. –†–∞—Å—Å–º–æ—Ç—Ä–∏–º —Å–ª–µ–¥—É—é—â–∏–π –ø—Ä–∏–º–µ—Ä:&lt;/p&gt;
&lt;p&gt;&lt;em&gt;app.h&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cm"&gt;/*&lt;/span&gt;
&lt;span class="cm"&gt;reset &amp;amp;&amp;amp; (export GCC_DIR=~/ti/gcc ; &lt;/span&gt;
&lt;span class="cm"&gt;    $GCC_DIR/bin/msp430-elf-c++ \&lt;/span&gt;
&lt;span class="cm"&gt;    -I $GCC_DIR/include -L $GCC_DIR/include \&lt;/span&gt;
&lt;span class="cm"&gt;    -Werror -Wall -mmcu=msp430f1611 *.cpp)&lt;/span&gt;
&lt;span class="cm"&gt;*/&lt;/span&gt;

&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;rgb.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="k"&gt;using&lt;/span&gt; &lt;span class="k"&gt;namespace&lt;/span&gt; &lt;span class="n"&gt;rgb&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="k"&gt;namespace&lt;/span&gt; &lt;span class="n"&gt;app&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;run&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(;;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;RgbStripLayer&lt;/span&gt; &lt;span class="n"&gt;rgb_strip&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
            &lt;span class="n"&gt;rgb_strip&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;flush&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
            &lt;span class="k"&gt;auto&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;bug&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;rgb_strip&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;mem&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
            &lt;span class="n"&gt;bug&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;RgbStripLayer&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;RED&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞ –∏ —É–±—Ä–∞—Ç—å –∏–∑ &lt;code&gt;rgb.h&lt;/code&gt; –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é &lt;code&gt;RgbStripLayer(): mem() {}&lt;/code&gt; –∫–∞–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –Ω–∞—á–Ω—ë—Ç –≤–µ—Å—Ç–∏ —Å–µ–±—è –ø–æ-—Ä–∞–∑–Ω–æ–º—É &lt;a href="http://mazko.github.io/MSP430.js/89cdcc2f31e21ba31c3d218c0463e8d4"&gt;ok&lt;/a&gt; | &lt;a href="http://mazko.github.io/MSP430.js/602b5588cb3fb1200af441cd9fc6efee"&gt;bug&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;–í–æ–æ–±—â–µ –ø–æ-—Ö–æ—Ä–æ—à–µ–º—É –Ω–æ—Ä–º–∞–ª—å–Ω—ã–π —è–∑—ã–∫ –ø—Ä–æ—Å—Ç–æ –Ω–µ –¥–æ–ª–∂–µ–Ω –ø–æ–∑–≤–æ–ª—è—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ. –ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –Ω—É–∂–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –∑–Ω–∞—á–µ–Ω–∏–µ–º –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –º–æ–∂–µ—Ç —Å—Ç–∞—Ç—å –≤—Å–µ —Ç–æ—Ç –∂–µ –Ω–æ–ª—å. –î–ª—è –≤—ã—è–≤–ª–µ–Ω–∏—è –Ω–µ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö —É gcc –ø–æ–¥–æ–±–Ω—ã—Ö –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–æ–≤ –µ—Å—Ç—å –æ–ø—Ü–∏—è –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ &lt;code&gt;-Weffc++&lt;/code&gt;, —Ç–∞–∫–∂–µ –º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤ —Å—Ç–æ—Ä–æ–Ω—É Valgrind –∏–ª–∏ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏—Ö –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–æ–≤ –∫–æ–¥–∞.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2017/03/22/s-dlia-mikrokontrollerov-dekorator/"&gt;–î–∞–ª–µ–µ&lt;/a&gt; –ø–∞—Ç—Ç–µ—Ä–Ω –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä.&lt;/p&gt;</content><category term="msp430"></category></entry><entry><title>PICSim.js - –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –∏ –æ–±—Ä–∞—Ç–Ω–∞—è –ø–æ–ª—å—Å–∫–∞—è –∑–∞–ø–∏—Å—å</title><link href="http://proiot.ru/blog/posts/2017/02/14/picsimjs-kalkuliator-i-obratnaia-polskaia-zapis/" rel="alternate"></link><published>2017-02-14T00:00:00+02:00</published><updated>2017-02-14T00:00:00+02:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2017-02-14:/blog/posts/2017/02/14/picsimjs-kalkuliator-i-obratnaia-polskaia-zapis/</id><summary type="html">&lt;p&gt;–û–±—Ä–∞—Ç–Ω–∞—è –ü–æ–ª—å—Å–∫–∞—è –ó–∞–ø–∏—Å—å –∞–Ω–≥–ª. (Reverse Polish Notation, RPN) –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–∑–±–∞–≤–∏—Ç—å—Å—è –æ—Ç —Å–∫–æ–±–æ–∫ –≤ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏—è—Ö. –°–Ω–∞—á–∞–ª–∞ —Å–ª–µ–¥—É—é—Ç –¥–≤–∞ –æ–ø–µ—Ä–∞–Ω–¥–∞ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏, –∞ –∑–∞—Ç–µ–º –∑–Ω–∞–∫ –æ–ø–µ—Ä–∞—Ü–∏–∏. –ù–∞–ø—Ä–∏–º–µ—Ä &lt;code&gt;4 2 + = 4 + 2 = 6&lt;/code&gt; –∏–ª–∏ &lt;code&gt;4 2 * 3 5 / - = (4 * 2) - (3 / 5) = 7.4&lt;/code&gt;. –ü—Ä–æ–≥—Ä–∞–º–º–∞-—Ç—Ä–∞–Ω—Å–ª—è—Ç–æ—Ä RPN-–≤—ã—Ä–∞–∂–µ–Ω–∏–π –æ—Å–Ω–æ–≤—ã–≤–∞–µ—Ç—Å—è –Ω–∞ —Å—Ç–µ–∫–µ - –∫–∞–∂–¥—ã–π –æ–ø–µ—Ä–∞–Ω–¥ –ø–æ—Å—ã–ª–∞–µ—Ç—Å—è ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;p&gt;–û–±—Ä–∞—Ç–Ω–∞—è –ü–æ–ª—å—Å–∫–∞—è –ó–∞–ø–∏—Å—å –∞–Ω–≥–ª. (Reverse Polish Notation, RPN) –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–∑–±–∞–≤–∏—Ç—å—Å—è –æ—Ç —Å–∫–æ–±–æ–∫ –≤ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏—è—Ö. –°–Ω–∞—á–∞–ª–∞ —Å–ª–µ–¥—É—é—Ç –¥–≤–∞ –æ–ø–µ—Ä–∞–Ω–¥–∞ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏, –∞ –∑–∞—Ç–µ–º –∑–Ω–∞–∫ –æ–ø–µ—Ä–∞—Ü–∏–∏. –ù–∞–ø—Ä–∏–º–µ—Ä &lt;code&gt;4 2 + = 4 + 2 = 6&lt;/code&gt; –∏–ª–∏ &lt;code&gt;4 2 * 3 5 / - = (4 * 2) - (3 / 5) = 7.4&lt;/code&gt;. –ü—Ä–æ–≥—Ä–∞–º–º–∞-—Ç—Ä–∞–Ω—Å–ª—è—Ç–æ—Ä RPN-–≤—ã—Ä–∞–∂–µ–Ω–∏–π –æ—Å–Ω–æ–≤—ã–≤–∞–µ—Ç—Å—è –Ω–∞ —Å—Ç–µ–∫–µ - –∫–∞–∂–¥—ã–π –æ–ø–µ—Ä–∞–Ω–¥ –ø–æ—Å—ã–ª–∞–µ—Ç—Å—è –≤ —Å—Ç–µ–∫, –∞ –µ—Å–ª–∏ –≤—Å—Ç—Ä–µ—á–∞–µ—Ç—Å—è –æ–ø–µ—Ä–∞—Ç–æ—Ä, —Ç–æ –∏–∑ —Å—Ç–µ–∫–∞ –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è –¥–≤–∞ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –æ–ø–µ—Ä–∞–Ω–¥–∞ –∏ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è
–æ–ø–µ—Ä–∞—Ü–∏—è, –ø–æ—Å–ª–µ —á–µ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ—Å—ã–ª–∞–µ—Ç—Å—è –æ–±—Ä–∞—Ç–Ω–æ –≤ —Å—Ç–µ–∫. –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞ –Ω–∞ –±–∞–∑–µ –æ–±—Ä–∞—Ç–Ω–æ–π –ø–æ–ª—å—Å–∫–æ–π –∑–∞–ø–∏—Å–∏ –ø–æ–¥—Ä–æ–±–Ω–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∞ –≤ –∫–Ω–∏–≥–µ ¬´–Ø–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è –°–∏¬ª –ë—Ä–∞–π–∞–Ω–∞ –ö–µ—Ä–Ω–∏–≥–∞–Ω–∞ –∏ –î–µ–Ω–Ω–∏—Å–∞ –†–∏—Ç—á–∏ (–ø–æ—Å–ª–µ–¥–Ω–∏–π –æ–¥–∏–Ω –∏–∑ –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω—ã—Ö –∞–≤—Ç–æ—Ä–æ–≤ –∏ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —è–∑—ã–∫–∞ –°–∏). –í –æ–±—â–µ–º —Å–ª—É—á–∞–µ –∞–ª–≥–æ—Ä–∏—Ç–º —Ä–µ—à–µ–Ω–∏—è –ø–æ–¥–æ–±–Ω—ã—Ö –∑–∞–¥–∞—á —Å–≤–æ–¥–∏—Ç—Å—è –∫ –¥–≤—É–º —ç—Ç–∞–ø–∞–º:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;–ª–µ–∫—Å–∏—á–µ—Å–∫–æ–π –∞–Ω–∞–ª–∏–∑ - —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –∏ –≤—ã–¥–µ–ª–µ–Ω–∏–µ –ª–µ–∫—Å–µ–º –∏–∑ –≤—Ö–æ–¥–Ω–æ–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —Å–∏–º–≤–æ–ª–æ–≤. –í —Å–ª—É—á–∞–µ RPN –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞ –Ω–∞ –≤—ã—Ö–æ–¥–µ –ø–æ–ª—É—á–∞–µ–º —á–∏—Å–ª–∞ –∏ –∞—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;—Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑ - –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ª–µ–∫—Å–µ–º –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç—Å—è –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä–∞—è —Ö–æ—Ä–æ—à–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏. –í —É–ø—Ä–æ—â—ë–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –¥–ª—è RPN –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞ —ç—Ç–æ —Å—Ç–µ–∫&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;–û—à–∏–±–∫–∏ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –ø—Ä–æ–≥—Ä–∞–º–º—ã –º–æ–≥—É—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç—å –Ω–∞ –æ–±–æ–∏—Ö —ç—Ç–∞–ø–∞—Ö - –∑–∞ –≤–≤–æ–¥–æ–º –Ω–µ–¥–æ–ø—É—Å—Ç–∏–º—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä –±—É–∫–≤) –¥–æ–ª–∂–µ–Ω —Å–ª–µ–¥–∏—Ç—å –ª–µ–∫—Å–∏—á–µ—Å–∫–æ–π –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä, –∞ –≤–æ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–µ–ª–µ–Ω–∏—è –Ω–∞ –Ω–æ–ª—å –∏–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ —Å—Ç–µ–∫–µ —ç—Ç–æ —É–∂–µ –∑–æ–Ω–∞ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2017/02/14/picsimjs-kalkuliator-i-obratnaia-polskaia-zapis/rpn.zip"&gt;–∏—Å—Ö–æ–¥–Ω–∏–∫–∏&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2017/02/14/picsimjs-kalkuliator-i-obratnaia-polskaia-zapis/main.hex"&gt;hex&lt;/a&gt; | &lt;a href="http://mazko.github.io/picsim.js/da43c25591f9e336ec3229d51fbdb495"&gt;picsim.js&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2017/02/14/picsimjs-kalkuliator-i-obratnaia-polskaia-zapis/ui.gif" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–ü—Ä–∏ –≤—ã–±–æ—Ä–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ä–∏—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ª–µ–∫—Å–∏—á–µ—Å–∫–æ–≥–æ / —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–∞ —Å—Ç–æ–∏—Ç —É—á–∏—Ç—ã–≤–∞—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤. –ê–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä –Ω–µ –¥–æ–ª–∂–µ–Ω –∑–∞–≤–∏—Å–µ—Ç—å –æ—Ç —Å–∏—Å—Ç–µ–º—ã –∏ —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫, –ø–æ—ç—Ç–æ–º—É Flex/Bison –æ—Ç–ø–∞–¥–∞—é—Ç —Å—Ä–∞–∑—É —Ç.–∫. –∑–∞–≤—è–∑–∞–Ω—ã –Ω–∞ POSIX, –∞ —É –Ω–∞—Å —Ç—É—Ç –≥–æ–ª–æ–µ –∂–µ–ª–µ–∑–æ. –¢–∞–∫–∂–µ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä—ã –¥–ª—è PIC18 –∏ –Ω–∏–∂–µ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç —Ä–µ–∫—É—Ä—Å–∏–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (–¥–∞ –¥–∞). –í–æ–±—â–µ–º –æ—Å–æ–±–æ –Ω–µ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å—Å—è. –ù–æ –≤—Å—ë –∂–µ –Ω–∞—à–µ–ª—Å—è –æ–¥–∏–Ω –æ—á–µ–Ω—å –¥–æ—Å—Ç–æ–π–Ω—ã–π –∫–∞–Ω–¥–∏–¥–∞—Ç - &lt;a href="http://re2c.org/" rel="nofollow"&gt;re2c&lt;/a&gt;. –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ª–µ–∫—Å–∏—á–µ—Å–∫–∏—Ö –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–æ–≤ re2c –æ—á–µ–Ω—å –ø–æ—Ö–æ–∂ –Ω–∞ Flex - –ø—Ä–∞–≤–∏–ª–∞ –∑–∞–¥–∞—é—Ç—Å—è –≤ –≤–∏–¥–µ —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π —Å–ª–µ–≤–∞, –∫–æ–¥ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–ø—Ä–∞–≤–∞. –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥ –ø–æ—Ö–æ–∂ –Ω–∞ —á–µ–ª–æ–≤–µ—á–µ—Å–∫–∏–π –∏ –±–µ–∑ –ø—Ä–æ–±–ª–µ–º —Å–æ–±–∏—Ä–∞–µ—Ç—Å—è –¥–∞–∂–µ –ø–æ–¥ bare metal. –§—É–Ω–∫—Ü–∏—è &lt;code&gt;lex_flt&lt;/code&gt; —ç—Ç–æ –æ–±–ª–µ–≥—á—ë–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è &lt;code&gt;atof&lt;/code&gt;/&lt;code&gt;strtod&lt;/code&gt;, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–∞—è –¥–ª—è RPN –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;stack.c&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;stdint.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;stdbool.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="k"&gt;struct&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="kt"&gt;float&lt;/span&gt; &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;RPN_MAX_CHARS&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
  &lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="n"&gt;sp&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="n"&gt;_stack&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="c1"&gt;// 0 == SUCCESS&lt;/span&gt;
&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;bool&lt;/span&gt; &lt;span class="nf"&gt;stack_push&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="kt"&gt;float&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;_stack&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sp&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt; &lt;span class="n"&gt;_stack&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;_stack&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;_stack&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;_stack&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sp&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="nb"&gt;false&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;
  &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="nb"&gt;true&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="c1"&gt;// 0 == SUCCESS&lt;/span&gt;
&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;bool&lt;/span&gt; &lt;span class="nf"&gt;stack_pop&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;float&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;_stack&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sp&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;_stack&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;_stack&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sp&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="nb"&gt;false&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;
  &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="nb"&gt;true&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;stack_clr&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="n"&gt;_stack&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sp&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;em&gt;rpn.re.c&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;stdbool.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;stack.c&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="c1"&gt;// 0 == SUCCESS&lt;/span&gt;
&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;bool&lt;/span&gt; &lt;span class="nf"&gt;lex_flt&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;float&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="kt"&gt;float&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="kt"&gt;bool&lt;/span&gt; &lt;span class="n"&gt;neg&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;false&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="cm"&gt;/*!re2c&lt;/span&gt;
&lt;span class="cm"&gt;      re2c:yyfill:enable = 0;&lt;/span&gt;
&lt;span class="cm"&gt;      re2c:define:YYCTYPE = char;&lt;/span&gt;
&lt;span class="cm"&gt;      re2c:define:YYCURSOR = s;&lt;/span&gt;

&lt;span class="cm"&gt;      &amp;quot;-&amp;quot;    { neg = true; goto mant_int; }&lt;/span&gt;
&lt;span class="cm"&gt;      &amp;quot;&amp;quot;     { goto mant_int; }&lt;/span&gt;
&lt;span class="cm"&gt;  */&lt;/span&gt;
&lt;span class="nl"&gt;mant_int&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
  &lt;span class="cm"&gt;/*!re2c&lt;/span&gt;
&lt;span class="cm"&gt;      &amp;quot;.&amp;quot;    { goto mant_frac; }&lt;/span&gt;
&lt;span class="cm"&gt;      &amp;quot;&amp;quot;     { goto end; }&lt;/span&gt;
&lt;span class="cm"&gt;      [0-9]  { *f = (*f * 10) + (s[-1] - &amp;#39;0&amp;#39;); goto mant_int; }&lt;/span&gt;
&lt;span class="cm"&gt;  */&lt;/span&gt;
&lt;span class="nl"&gt;mant_frac&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
  &lt;span class="cm"&gt;/*!re2c&lt;/span&gt;
&lt;span class="cm"&gt;      &amp;quot;&amp;quot;     { goto end; }&lt;/span&gt;
&lt;span class="cm"&gt;      [0-9]  { *f += (x /= 10) * (s[-1] - &amp;#39;0&amp;#39;); goto mant_frac; }&lt;/span&gt;
&lt;span class="cm"&gt;  */&lt;/span&gt;
&lt;span class="nl"&gt;end&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
  &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;neg&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt; &lt;span class="o"&gt;*=&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;

  &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="c1"&gt;// 0 == SUCCESS&lt;/span&gt;
&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;bool&lt;/span&gt; &lt;span class="nf"&gt;cc&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="kt"&gt;float&lt;/span&gt; &lt;span class="n"&gt;o1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;o2&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="n"&gt;stack_pop&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;o2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="n"&gt;stack_pop&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;o1&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;switch&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="sc"&gt;&amp;#39;+&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;stack_push&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;o1&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;o2&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
      &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="sc"&gt;&amp;#39;-&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;stack_push&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;o1&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;o2&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
      &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="sc"&gt;&amp;#39;/&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;o2&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="n"&gt;stack_push&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;o1&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="n"&gt;o2&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
      &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="sc"&gt;&amp;#39;*&amp;#39;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;stack_push&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;o1&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;o2&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt; 
  &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="nb"&gt;true&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="c1"&gt;// 0 == SUCCESS&lt;/span&gt;
&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;bool&lt;/span&gt; &lt;span class="nf"&gt;lex&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;cur&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

  &lt;span class="c1"&gt;// YYMARKER is needed because rules overlap:&lt;/span&gt;
  &lt;span class="c1"&gt;// it backups input position of the longest successful match&lt;/span&gt;
  &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;YYMARKER&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="p"&gt;(;;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;tok&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;cur&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="kt"&gt;float&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="cm"&gt;/*!re2c&lt;/span&gt;
&lt;span class="cm"&gt;        re2c:yyfill:enable = 0;&lt;/span&gt;
&lt;span class="cm"&gt;        re2c:define:YYCTYPE = char;&lt;/span&gt;
&lt;span class="cm"&gt;        re2c:define:YYCURSOR = cur;&lt;/span&gt;

&lt;span class="cm"&gt;        flt = &amp;quot;-&amp;quot; ? ([0-9]+ | [0-9]* &amp;quot;.&amp;quot; [0-9]+);&lt;/span&gt;
&lt;span class="cm"&gt;        mop = [-+*\/];&lt;/span&gt;

&lt;span class="cm"&gt;        *       { return true; }&lt;/span&gt;
&lt;span class="cm"&gt;        &amp;quot;\x00&amp;quot;  { return false; }&lt;/span&gt;
&lt;span class="cm"&gt;        flt     { if (lex_flt(tok, cur, &amp;amp;f) || stack_push(f)) return true; continue; }&lt;/span&gt;
&lt;span class="cm"&gt;        &amp;quot; &amp;quot; flt { if (lex_flt(tok + 1, cur, &amp;amp;f) || stack_push(f)) return true; continue; }&lt;/span&gt;
&lt;span class="cm"&gt;        mop     { if (cc(*tok)) return true; continue; }&lt;/span&gt;
&lt;span class="cm"&gt;        &amp;quot; &amp;quot; mop { if (cc(*(tok + 1))) return true; continue; }&lt;/span&gt;
&lt;span class="cm"&gt;    */&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="c1"&gt;// 0 == SUCCESS&lt;/span&gt;
&lt;span class="kt"&gt;bool&lt;/span&gt; &lt;span class="nf"&gt;rpn&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;cur&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;float&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="n"&gt;stack_clr&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
  &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;lex&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cur&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; &lt;span class="n"&gt;stack_pop&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–†–∞–±–æ—Ç–∞ —Å —Å–∏–º–≤–æ–ª—å–Ω—ã–º &lt;a href="http://proiot.ru/blog/posts/2017/01/27/picsimjs-simvolnyi-displei-na-baze-hd44780/"&gt;–¥–∏—Å–ø–ª–µ–µ–º&lt;/a&gt; –∏ &lt;a href="http://proiot.ru/blog/posts/2017/01/30/picsimjs-matrichnaia-klaviatura/"&gt;–º–∞—Ç—Ä–∏—á–Ω–æ–π&lt;/a&gt; –∫–ª–∞–≤–∏–∞—Ç—É—Ä–æ–π –æ–ø–∏—Å—ã–≤–∞–ª–∏—Å—å –≤ –ø—Ä–µ–¥—ã–¥—É—â–µ–º –º–∞—Ç–µ—Ä–∏–∞–ª–µ.&lt;/p&gt;
&lt;p&gt;–î–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –≤—ã—Ä–∞–∂–µ–Ω–∏–π –∏–∑ –æ–±—ã—á–Ω–æ–π (–Ω–∞–ø—Ä–∏–º–µ—Ä &lt;code&gt;3 + 4 * (2 - 1)&lt;/code&gt;) –∏–Ω—Ñ–∏–∫—Å–Ω–æ–π –Ω–æ—Ç–∞—Ü–∏–∏ –≤ –ø–æ—Å—Ç—Ñ–∏–∫—Å–Ω—É—é (RPN) —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∞–ª–≥–æ—Ä–∏—Ç–º ¬´—Å–æ—Ä—Ç–∏—Ä–æ–≤–æ—á–Ω–∞—è —Å—Ç–∞–Ω—Ü–∏—è¬ª, –∫–æ—Ç–æ—Ä—ã–π —Ç–∞–∫ –∂–µ –∫–∞–∫ –∏ RPN –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ —Å—Ç–µ–∫–µ –∏ –ª–µ–≥–∫–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω –ø–æ–¥ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –Ω–µ—Å–ª–æ–∂–Ω–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∞—Ç—å –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –¥–ª—è –æ–±—ã—á–Ω—ã–π –ª—é–¥–µ–π.&lt;/p&gt;
&lt;p&gt;–ï—â—ë —Ä–∞–∑ —Å—Å—ã–ª–∫–∞ –Ω–∞ &lt;a href="http://proiot.ru/blog/posts/2017/02/14/picsimjs-kalkuliator-i-obratnaia-polskaia-zapis/rpn.zip"&gt;–∏—Å—Ö–æ–¥–Ω–∏–∫–∏&lt;/a&gt; RPN-–∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞. &lt;/p&gt;</content><category term="picsim"></category><category term="re2c"></category><category term="regex"></category></entry><entry><title>PICSim.js - —Å–æ–ø—Ä–æ–≥—Ä–∞–º–º—ã –∏ –ø—Ä–æ—Å—Ç–µ–π—à–∞—è –º–Ω–æ–≥–æ–∑–∞–¥–∞—á–Ω–æ—Å—Ç—å</title><link href="http://proiot.ru/blog/posts/2017/02/05/picsimjs-soprogrammy-i-prosteishaia-mnogozadachnost/" rel="alternate"></link><published>2017-02-05T00:00:00+02:00</published><updated>2017-02-05T00:00:00+02:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2017-02-05:/blog/posts/2017/02/05/picsimjs-soprogrammy-i-prosteishaia-mnogozadachnost/</id><summary type="html">&lt;p&gt;–ú–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç —Ç–æ–ª—å–∫–æ –æ–¥–Ω—É –º–∞—à–∏–Ω–Ω—É—é –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –≤ –∫–∞–∂–¥—ã–π –º–æ–º–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏ (–º–Ω–æ–≥–æ—è–¥–µ—Ä–Ω—ã–µ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã —è –ø–æ–∫–∞ –Ω–µ –≤—Å—Ç—Ä–µ—á–∞–ª). –¢—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω–æ –ø—Ä–æ—Å—Ç–µ–π—à–∞—è &lt;a href="http://proiot.ru/blog/posts/2017/01/13/simuliatsiia-mikrokontrollerov-picsimjs/"&gt;–ø—Ä–æ–≥—Ä–∞–º–º–∞&lt;/a&gt; –¥–ª—è –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ —ç—Ç–æ &lt;em&gt;—Å—É–ø–µ—Ä—Ü–∏–∫–ª&lt;/em&gt; - –æ–¥–Ω–∞ —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ &lt;code&gt;main&lt;/code&gt; —Å –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–º —Ü–∏–∫–ª–æ–º, –≥–¥–µ –∫—Ä—É—Ç–∏—Ç—Å—è –∫–∞–∫–∞—è-—Ç–æ –∑–∞–¥–∞—á–∞. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤ —Ç–∞–∫–∂–µ –ø—Ä–µ–¥—É—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º &lt;a href="http://proiot.ru/blog/posts/2017/01/16/picsimjs-semisegmentnyi-indikator-i-preryvaniia/"&gt;–ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π&lt;/a&gt; - –Ω–µ–º–µ–¥–ª–µ–Ω–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É —Å–æ–±—ã—Ç–∏–π, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–µ—à–∞—Ç—å –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–µ –∑–∞–¥–∞—á–∏ ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;p&gt;–ú–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –≤—ã–ø–æ–ª–Ω—è—é—Ç —Ç–æ–ª—å–∫–æ –æ–¥–Ω—É –º–∞—à–∏–Ω–Ω—É—é –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é –≤ –∫–∞–∂–¥—ã–π –º–æ–º–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏ (–º–Ω–æ–≥–æ—è–¥–µ—Ä–Ω—ã–µ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã —è –ø–æ–∫–∞ –Ω–µ –≤—Å—Ç—Ä–µ—á–∞–ª). –¢—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω–æ –ø—Ä–æ—Å—Ç–µ–π—à–∞—è &lt;a href="http://proiot.ru/blog/posts/2017/01/13/simuliatsiia-mikrokontrollerov-picsimjs/"&gt;–ø—Ä–æ–≥—Ä–∞–º–º–∞&lt;/a&gt; –¥–ª—è –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ —ç—Ç–æ &lt;em&gt;—Å—É–ø–µ—Ä—Ü–∏–∫–ª&lt;/em&gt; - –æ–¥–Ω–∞ —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ &lt;code&gt;main&lt;/code&gt; —Å –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–º —Ü–∏–∫–ª–æ–º, –≥–¥–µ –∫—Ä—É—Ç–∏—Ç—Å—è –∫–∞–∫–∞—è-—Ç–æ –∑–∞–¥–∞—á–∞. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤ —Ç–∞–∫–∂–µ –ø—Ä–µ–¥—É—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º &lt;a href="http://proiot.ru/blog/posts/2017/01/16/picsimjs-semisegmentnyi-indikator-i-preryvaniia/"&gt;–ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π&lt;/a&gt; - –Ω–µ–º–µ–¥–ª–µ–Ω–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É —Å–æ–±—ã—Ç–∏–π, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–µ—à–∞—Ç—å –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–µ –∑–∞–¥–∞—á–∏, –ø—Ä–∏—á—ë–º –≤ —Å–ª—É—á–∞–µ PIC18 —ç—Ç–æ –¥–∞–∂–µ –¥–≤—É—Ö—É—Ä–æ–≤–Ω–µ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π. –û–±—ã—á–Ω–æ –≤—Å–µ–≥–æ —ç—Ç–æ–≥–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ—Å—Ç–æ–π –ª–æ–≥–∏–∫–∏, –æ–¥–Ω–∞–∫–æ –ø—Ä–∏ —É–≤–µ–ª–∏—á–µ–Ω–∏–∏ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –∫ —Å–∏—Å—Ç–µ–º–µ —Ç—Ä–∞–¥–∏—Ü–∏–æ–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥ —Ç–µ—Ä—è–µ—Ç –ø—Ä–∏–≤–ª–µ–∫–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å. –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π –º–µ—Ç–æ–¥ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π —Å–æ—Å—Ç–æ–∏—Ç –≤ —Ç–æ–º, —á—Ç–æ–±—ã –≤—ã–¥–µ–ª–∏—Ç—å –∏ –æ—Ç–¥–µ–ª–∏—Ç—å –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ –ø–æ–¥–∑–∞–¥–∞—á–∏ –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–µ–∫–∏–π –ø—Ä–æ–≥—Ä–∞–º–º–Ω—ã–π –∫–∞—Ä–∫–∞—Å, –∫–æ—Ç–æ—Ä—ã–π —É–ø—Ä–∞–≤–ª—è–µ—Ç —ç—Ç–∏–º–∏ –ø–æ–¥–∑–∞–¥–∞—á–∞–º–∏ —Å–æ–≥–ª–∞—Å–Ω–æ –Ω–∞–±–æ—Ä—É —è—Å–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö –ø—Ä–∞–≤–∏–ª. –ü—Ä–∏ —Ç–∞–∫–æ–º –ø–æ–¥—Ö–æ–¥–µ –º–æ–≥—É—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –Ω–µ—Å–∫–æ–ª—å–∫–æ (–ø—Å–µ–≤–¥–æ)–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –∑–∞–¥–∞—á, —Å–æ–æ–±—â–∞—é—â–∏—Ö—Å—è –º–µ–∂–¥—É —Å–æ–±–æ–π –∏ —É–ø—Ä–∞–≤–ª—è–µ–º—ã—Ö –µ–¥–∏–Ω—ã–º —è–¥—Ä–æ–º. –≠—Ç–æ—Ç –ø–æ–¥—Ö–æ–¥ –∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—é - RTOS (–æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏), –∞ –º–Ω–æ–≥–æ–∑–∞–¥–∞—á–Ω–æ—Å—Ç—å –±—ã–≤–∞–µ—Ç 2 –≤–∏–¥–æ–≤:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;–∫–æ–æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–∞—è - —Å–ª–µ–¥—É—é—â–∞—è –∑–∞–¥–∞—á–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ —Ç–µ–∫—É—â–∞—è –∑–∞–¥–∞—á–∞ —è–≤–Ω–æ –ø–µ—Ä–µ–¥–∞—Å—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;–≤—ã—Ç–µ—Å–Ω—è—é—â–∞—è - –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã —Å–∞–º –ø–µ—Ä–µ–¥–∞–µ—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Ç –æ–¥–Ω–æ–π –∑–∞–¥–∞—á–∏ –¥—Ä—É–≥–æ–π&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;–ö–æ–æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–∞—è –º–Ω–æ–≥–æ–∑–∞–¥–∞—á–Ω–æ—Å—Ç—å —è–≤–ª—è–µ—Ç—Å—è –Ω–∞–∏–±–æ–ª–µ–µ –ø—Ä–æ—Å—Ç–æ–π —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ —Ö–æ—Ä–æ—à–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Å–ª–∞–±—ã—Ö –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2017/02/05/picsimjs-soprogrammy-i-prosteishaia-mnogozadachnost/config-4620.h"&gt;config.h&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2017/02/05/picsimjs-soprogrammy-i-prosteishaia-mnogozadachnost/coroutine.h"&gt;coroutine.h&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2017/02/05/picsimjs-soprogrammy-i-prosteishaia-mnogozadachnost/main.hex"&gt;hex&lt;/a&gt; | &lt;a href="http://mazko.github.io/picsim.js/56fd34dfd1c731a3d6eee89ccd6ee25b"&gt;picsim.js&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2017/02/05/picsimjs-soprogrammy-i-prosteishaia-mnogozadachnost/ui.gif" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–ü—Ä–æ—Å—Ç–µ–π—à—É—é –∫–æ–æ–ø–µ—Ä–∞—Ç–∏–≤–Ω—É—é –º–Ω–æ–≥–æ–∑–∞–¥–∞—á–Ω–æ—Å—Ç—å –≤ —á–∏—Å—Ç–æ–º –° –º–æ–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å –ø–æ–º–æ—â—å—é &lt;a href="http://www.chiark.greenend.org.uk/~sgtatham/coroutines.html" rel="nofollow"&gt;—Å–æ–ø—Ä–æ–≥—Ä–∞–º–º&lt;/a&gt;(coroutine). –≠—Ç–æ –æ—á–µ–Ω—å –ø—Ä–∞–∫—Ç–∏—á–Ω–∞—è –∏ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è, –≥–¥–µ –∫–∞–∂–¥–∞—è —Ñ—É–Ω–∫—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å–≤–æ—ë –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ &lt;a href="http://proiot.ru/blog/posts/2012/10/09/avtomat-s-konechnym-chislom-sostoianii/"&gt;—Å–æ—Å—Ç–æ—è–Ω–∏–µ&lt;/a&gt; –º–µ–∂–¥—É –≤—ã–∑–æ–≤–∞–º–∏, —Ö–∏—Ç—Ä–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞ &lt;code&gt;switch&lt;/code&gt; –∏ –ø–∞—Ä–æ—á–∫–∏ –º–∞–∫—Ä–æ—Å–æ–≤ –¥–∞—ë—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —ç—Ç–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–∏–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å—Å—è, –∞ –ø—Ä–∏ –ø–æ—Å–ª–µ–¥—É—é—â–µ–º –≤—ã–∑–æ–≤–µ –ø—Ä–æ–¥–æ–ª–∂–∞—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –º–µ—Å—Ç–∞ - –∏–º–µ–Ω–Ω–æ —Ç–∞–∫ –∏ –≤–µ–¥—É—Ç —Å–µ–±—è —Å–æ–ø—Ä–æ–≥—Ä–∞–º–º—ã.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;task_r.c&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;xc.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;stdint.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;coroutine.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="cp"&gt;#define YIELD scrReturnV &lt;/span&gt;&lt;span class="c1"&gt;// just readability&lt;/span&gt;

&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;task_leds_r&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="n"&gt;scrBegin&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;port&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="c1"&gt;// infinite task loop&lt;/span&gt;
  &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="c1"&gt;// chasing leds&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="n"&gt;port&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="n"&gt;port&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;port&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="n"&gt;port&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="n"&gt;port&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&amp;gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;port&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="n"&gt;PORTA&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;=&lt;/span&gt; &lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="mh"&gt;0x80&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="n"&gt;PORTA&lt;/span&gt; &lt;span class="o"&gt;|=&lt;/span&gt; &lt;span class="mh"&gt;0x80&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="n"&gt;PORTC&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PORTC&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;TRISC&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;port&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;240&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; 
      &lt;span class="n"&gt;YIELD&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="cm"&gt;/* cooperate delay */&lt;/span&gt; 
    &lt;span class="p"&gt;}&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;

  &lt;span class="n"&gt;scrFinishV&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;em&gt;task_l.c&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;xc.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;stdint.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;stdlib.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;coroutine.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="cp"&gt;#define YIELD scrReturnV &lt;/span&gt;&lt;span class="c1"&gt;// just readability&lt;/span&gt;

&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;task_leds_l&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="n"&gt;scrBegin&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;port&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="c1"&gt;// infinite task loop&lt;/span&gt;
  &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="c1"&gt;// chasing leds&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="n"&gt;port&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="n"&gt;port&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="n"&gt;port&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&amp;lt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="n"&gt;PORTA&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PORTA&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="mh"&gt;0x80&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;port&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;240&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; 
      &lt;span class="n"&gt;YIELD&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="cm"&gt;/* cooperate delay */&lt;/span&gt; 
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="c1"&gt;// blink random leds&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;port&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;port&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;port&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;port&lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="n"&gt;random6&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;do&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
          &lt;span class="n"&gt;random6&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class="cm"&gt;/* 0..6 */&lt;/span&gt; &lt;span class="n"&gt;rand&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;random6&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PORTA&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="mh"&gt;0x80&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
        &lt;span class="n"&gt;PORTA&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PORTA&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="mh"&gt;0x80&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;random6&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;240&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; 
          &lt;span class="n"&gt;YIELD&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="cm"&gt;/* cooperate delay */&lt;/span&gt; 
        &lt;span class="p"&gt;}&lt;/span&gt;
      &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;

  &lt;span class="n"&gt;scrFinishV&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;em&gt;main.c&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cm"&gt;/*&lt;/span&gt;
&lt;span class="cm"&gt;  xc8 --chip=18f4620 main.c&lt;/span&gt;
&lt;span class="cm"&gt;*/&lt;/span&gt;

&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;xc.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;config-4620.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="c1"&gt;// non-reentrant tasks examples&lt;/span&gt;

&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;task_l.c&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;task_r.c&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="c1"&gt;// leds&lt;/span&gt;
  &lt;span class="n"&gt;PORTA&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;TRISA&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;PORTC&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;TRISC&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mh"&gt;0x18&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="c1"&gt;// simplest cooperative scheduler&lt;/span&gt;
  &lt;span class="k"&gt;while&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;task_leds_l&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
    &lt;span class="n"&gt;task_leds_r&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;

  &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–¢—É—Ç –¥–≤–µ –∑–∞–¥–∞—á–∏ - –ª–µ–≤—ã–µ —Å–≤–µ—Ç–æ–¥–∏–æ–¥—ã –∏ –ø—Ä–∞–≤—ã–µ. –ö–∞–∂–¥–∞—è –∑–∞–¥–∞—á–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –∏–∑ —Å–µ–±—è –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ü–∏–∫–ª - –∏ –±—É–¥—å —ç—Ç–æ –æ–±—ã—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤—Å—ë –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–Ω–æ–µ –≤—Ä–µ–º—è —É—à–ª–æ –±—ã –Ω–∞ &lt;code&gt;task_leds_l()&lt;/code&gt;, —Ç–æ–≥–¥–∞ –∫–∞–∫ –¥–æ &lt;code&gt;task_leds_r()&lt;/code&gt; –æ—á–µ—Ä–µ–¥—å –±—ã —Ç–∞–∫ –∏ –Ω–µ –¥–æ—à–ª–∞. –ù–æ –º—ã –∏–º–µ–µ–º –¥–µ–ª–æ –Ω–µ —Å –ø—Ä–æ—Å—Ç—ã–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏, –∞ —Å–æ–ø—Ä–æ–≥—Ä–∞–º–º–∞–º–∏ - –º–∞–∫—Ä–æ—Å YIELD –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–±—Ä–∞—Ç–Ω–æ –≤—ã–∑—ã–≤–∞—é—â–µ–π —Ñ—É–Ω–∫—Ü–∏–∏, –∞ –æ–Ω–∞ –≤ —Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å –ø—Ä–æ—Å—Ç–æ –ø–æ–æ—á–µ—Ä—ë–¥–Ω–æ –≤—ã–∑—ã–≤–∞–µ—Ç –∑–∞–¥–∞—á–∏, –≤—ã–ø–æ–ª–Ω—è—è —Ç–µ–º —Å–∞–º—ã–º —Ñ—É–Ω–∫—Ü–∏—é –ø—Ä–æ—Å—Ç–µ–π—à–µ–≥–æ –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–∞.&lt;/p&gt;
&lt;p&gt;–ü—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å —Å–æ–ø—Ä–æ–≥—Ä–∞–º–º–∞–º–∏ —Å–ª–µ–¥—É–µ—Ç –æ—Å–æ–±–æ–µ –≤–Ω–∏–º–∞–Ω–∏–µ —É–¥–µ–ª—è—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º. –ï—Å–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–æ–ª–∂–Ω–∞ —Å–æ—Ö—Ä–∞–Ω—è—Ç—å —Å–≤–æ—ë –∑–Ω–∞—á–µ–Ω–∏–µ –º–µ–∂–¥—É –≤—ã–∑–æ–≤–∞–º–∏, —Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ–±—ä—è–≤–ª—è—Ç—å –µ—ë &lt;code&gt;static&lt;/code&gt; - –Ω–∞–ø—Ä–∏–º–µ—Ä &lt;code&gt;static uint8_t i, port&lt;/code&gt;, –≤ —Ç–æ –≤—Ä–µ–º—è –∫–∞–∫ –∫ &lt;code&gt;uint8_t random6&lt;/code&gt; —ç—Ç–æ —Å–∞–º–∞—è –æ–±—ã—á–Ω–∞—è (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è) –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è.&lt;/p&gt;
&lt;p&gt;–ê —á—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç, –µ—Å–ª–∏ –∫ —ç—Ç–∏–º –¥–≤—É–º –∑–∞–¥–∞—á–∞–º –¥–æ—Å—ã–ø–∞—Ç—å –µ—â—ë –ø–∞—Ä–æ—á–∫—É ? –û—á–µ–≤–∏–¥–Ω–æ, —á—Ç–æ —Ç–æ–≥–¥–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã –ø—Ä–∏–¥—ë—Ç—Å—è –ø–µ—Ä–µ–±–∏—Ä–∞—Ç—å –∑–∞–Ω–æ–≤–æ:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;// delay&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;240&lt;/span&gt; &lt;span class="cm"&gt;/* new value */&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; 
  &lt;span class="n"&gt;YIELD&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="cm"&gt;/* cooperate delay */&lt;/span&gt; 
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ò —ç—Ç–æ –ø–ª–æ—Ö–æ - —Ç–∞–∫–∏–µ –ø—Ä–æ–µ–∫—Ç—ã —Ç—è–∂–µ–ª–æ —Å–æ–ø—Ä–æ–≤–æ–∂–¥–∞—Ç—å –∏ —Ä–∞–∑–≤–∏–≤–∞—Ç—å. –°—É—â–µ—Å—Ç–≤—É–µ—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± –∏–∑–±–µ–∂–∞—Ç—å —ç—Ç–æ–≥–æ –Ω–µ–∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ–≥–æ —ç—Ñ—Ñ–µ–∫—Ç–∞, –µ—Å–ª–∏ –ø—Ä–∏–≤—è–∑–∞—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã –∫ –∫–∞–∫–æ–º—É-–Ω–∏–±—É–¥—å –∞–ø–ø–∞—Ä–∞—Ç–Ω–æ–º—É —Ç–∞–π–º–µ—Ä—É. –í —Å–ª–µ–¥—É—é—â–µ–º –ø—Ä–∏–º–µ—Ä–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —Ç–∞–π–º–µ—Ä, –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –æ—Ç—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –≤—Ä–µ–º—è —Å –º–æ–º–µ–Ω—Ç–∞ –≤–∫–ª—é—á–µ–Ω–∏—è. –≠—Ç–æ –≤—Ä–µ–º—è –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –≤—ã–ø–æ–ª–Ω—è–µ–º—ã—Ö –∑–∞–¥–∞—á.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2017/02/05/picsimjs-soprogrammy-i-prosteishaia-mnogozadachnost/main2.hex"&gt;hex&lt;/a&gt; | &lt;a href="http://mazko.github.io/picsim.js/a8ff2394bb5884738bbee3ce613be1ce"&gt;picsim.js&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;isr.c&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;xc.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;stdint.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="c1"&gt;// up time since the start of the system&lt;/span&gt;
&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;uint32_t&lt;/span&gt; &lt;span class="n"&gt;_uptime&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="c1"&gt;// http://www.microchip.com/forums/m890404.aspx&lt;/span&gt;
&lt;span class="kt"&gt;uint32_t&lt;/span&gt; &lt;span class="nf"&gt;get_uptime&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;GIE&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;GIE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="c1"&gt;// critical section&lt;/span&gt;
    &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="kt"&gt;uint32_t&lt;/span&gt; &lt;span class="n"&gt;copy&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;_uptime&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;GIE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="c1"&gt;// critical section end&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;copy&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;_uptime&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="c1"&gt;// High priority interrupt&lt;/span&gt;
&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="n"&gt;interrupt&lt;/span&gt; &lt;span class="nf"&gt;isr&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;INTCONbits&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;T0IF&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;INTCONbits&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;T0IE&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;                               
    &lt;span class="n"&gt;INTCONbits&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;T0IF&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;_uptime&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ü–æ—Å–∫–æ–ª—å–∫—É —Ä–∞–∑—Ä—è–¥–Ω–æ—Å—Ç—å —Å—á—ë—Ç—á–∏–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ &lt;code&gt;uint32_t&lt;/code&gt; –±–æ–ª—å—à–µ —Ä–∞–∑—Ä—è–¥–Ω–æ—Å—Ç–∏ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ - –æ–ø–µ—Ä–∞—Ü–∏–∏ –Ω–∞–¥ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π &lt;code&gt;_uptime&lt;/code&gt; –Ω–µ –∞—Ç–æ–º–∞—Ä–Ω—ã, –ø–æ—ç—Ç–æ–º—É –≤ —Ñ—É–Ω–∫—Ü–∏—é &lt;code&gt;get_uptime()&lt;/code&gt; –≤–≤–æ–¥–∏—Ç—Å—è –ø—Ä–æ—Å—Ç–µ–π—à–∏–π –º–µ—Ö–∞–Ω–∏–∑–º —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ GIE. –¢–µ–ø–µ—Ä—å –≤–æ –≤—Å–µ—Ö –∑–∞–¥–∞—á–∞—Ö –ø—Ä–∏ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–≤ –±–æ–ª–µ–µ —Ü–µ–ª–µ—Å–æ–æ–±—Ä–∞–∑–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Ñ—É–Ω–∫—Ü–∏–µ–π &lt;code&gt;get_uptime()&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;uint32_t&lt;/span&gt; &lt;span class="n"&gt;start&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="c1"&gt;// delay&lt;/span&gt;
&lt;span class="c1"&gt;// https://arduino.stackexchange.com/a/12588&lt;/span&gt;
&lt;span class="c1"&gt;// while (millis() &amp;lt; start + ms) ;  // BUGGY version&lt;/span&gt;
&lt;span class="c1"&gt;// while (millis() - start &amp;lt; ms) ;  // CORRECT version&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;start&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;get_uptime&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt; &lt;span class="n"&gt;get_uptime&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;start&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="n"&gt;YIELD&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="cm"&gt;/* cooperate delay */&lt;/span&gt; 
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;em&gt;main.c&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cm"&gt;/*&lt;/span&gt;
&lt;span class="cm"&gt;  xc8 --chip=18f4620 main.c isr.c&lt;/span&gt;
&lt;span class="cm"&gt;*/&lt;/span&gt;

&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;xc.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;config-4620.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="c1"&gt;// non-reentrant tasks examples&lt;/span&gt;

&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;task_l.c&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;task_r.c&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="c1"&gt;// leds&lt;/span&gt;
  &lt;span class="n"&gt;PORTA&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;TRISA&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;PORTC&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;TRISC&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mh"&gt;0x18&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="c1"&gt;// TMR0 high priority Interrupt, 8 bit, 1:32 Prescale&lt;/span&gt;
  &lt;span class="n"&gt;RCONbits&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;IPEN&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;T0CON&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;T0CONbits&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;T08BIT&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;T0CONbits&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;T0PS2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;INTCONbits&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;T0IE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;INTCONbits&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;T0IF&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;INTCON2bits&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;TMR0IP&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;        
  &lt;span class="n"&gt;T0CONbits&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;TMR0ON&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;INTCONbits&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;GIE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="c1"&gt;// simplest cooperative scheduler&lt;/span&gt;
  &lt;span class="k"&gt;while&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;task_leds_l&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
    &lt;span class="n"&gt;task_leds_r&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;

  &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ò–Ω–æ–≥–¥–∞ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å –æ–±–º–µ–Ω–∏–≤–∞—Ç—å—Å—è –¥–∞–Ω–Ω—ã–º–∏ –º–µ–∂–¥—É –∑–∞–¥–∞—á–∞–º–∏. –°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± ‚Äî –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±—â–∏–µ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –¥–æ—Å—Ç—É–ø –∫ –∫–æ—Ç–æ—Ä—ã–º –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∑–∞–¥–∞—á. –ü—Ä–∏—á—ë–º –≤ —Å–ª—É—á–∞–µ —Å –∫–æ–æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –º–Ω–æ–≥–æ–∑–∞–≥–∞–¥–æ—á–Ω–æ—Å—Ç—å—é –ø—Ä–æ–±–ª–µ–º —Å –∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å—é —É —Ç–∞–∫–∏—Ö –≥–ª–æ–±–∞–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –±—ã—Ç—å –Ω–µ –¥–æ–ª–∂–Ω–æ –≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç –≤—ã—Ç–µ—Å–Ω—è—é—â–µ–π –º–Ω–æ–≥–æ–∑–∞–¥–∞—á–Ω–æ—Å—Ç–∏.&lt;/p&gt;
&lt;p&gt;–ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —Å–≤–æ—é –ø—Ä–æ—Å—Ç–æ—Ç—É –æ–ø–∏—Å–∞–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏–∑—É–µ—Ç—Å—è –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ–π –ø–µ—Ä–µ–Ω–æ—Å–∏–º–æ—Å—Ç—å—é - —Ç—É—Ç —á–∏—Å—Ç—ã–π –° –±–µ–∑ –∞—Å—Å–µ–º–±–ª–µ—Ä–Ω—ã—Ö –≤—Å—Ç–∞–≤–æ–∫ –∏ –æ–Ω–æ –≤–ø–æ–ª–Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —Ä–µ–∞–ª—å–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ –∏ –æ—Å–æ–±–µ–Ω–Ω–æ —Ö–æ—Ä–æ—à–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –æ—á–µ–Ω—å —Å–ª–∞–±—ã—Ö –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2017/02/14/picsimjs-kalkuliator-i-obratnaia-polskaia-zapis/"&gt;–î–∞–ª–µ–µ&lt;/a&gt; –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –≤—ã—Ä–∞–∂–µ–Ω–∏–π –≤ –æ–±—Ä–∞—Ç–Ω–æ–π –ø–æ–ª—å—Å–∫–æ–π –Ω–æ—Ç–∞—Ü–∏–∏.&lt;/p&gt;</content><category term="picsim"></category><category term="RTOS"></category><category term="FSM"></category></entry><entry><title>PICSim.js - —á–∞—Å—ã —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ DS1307</title><link href="http://proiot.ru/blog/posts/2017/02/02/picsimjs-chasy-realnogo-vremeni-ds1307/" rel="alternate"></link><published>2017-02-02T00:00:00+02:00</published><updated>2017-02-02T00:00:00+02:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2017-02-02:/blog/posts/2017/02/02/picsimjs-chasy-realnogo-vremeni-ds1307/</id><summary type="html">&lt;p&gt;–ú–∏–∫—Ä–æ—Å—Ö–µ–º–∞ DS1307 –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –∏–∑ —Å–µ–±—è —á–∞—Å–∏–∫–∏ —Å –∫–∞–ª–µ–Ω–¥–∞—Ä–µ–º. –í—Å—ë :) –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—Ö–µ–º–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –∫–≤–∞—Ä—Ü–∞ —Å —á–∞—Å—Ç–æ—Ç–æ–π 32768 –ì—Ü –∏ –∞–≤—Ç–æ–Ω–æ–º–Ω–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –ø–∏—Ç–∞–Ω–∏—è. –ï—Å–ª–∏ –≤–µ—Ä–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—é, –±–∞—Ç–∞—Ä–µ–π–∫–∏ 48–º–ê—á –¥–æ–ª–∂–Ω–æ —Ö–≤–∞—Ç–∏—Ç—å –Ω–∞ 10 –ª–µ—Ç –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–π —Ä–∞–±–æ—Ç—ã —á–∞—Å–æ–≤. –û–±–º–µ–Ω –¥–∞–Ω–Ω—ã–º–∏ –º–µ–∂–¥—É DS1307 –∏ –≤–Ω–µ—à–Ω–∏–º –º–∏—Ä–æ–º –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–º—É –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É I2C, –∫–æ—Ç–æ—Ä—ã–π –∫–∞–∫ ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;p&gt;–ú–∏–∫—Ä–æ—Å—Ö–µ–º–∞ DS1307 –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –∏–∑ —Å–µ–±—è —á–∞—Å–∏–∫–∏ —Å –∫–∞–ª–µ–Ω–¥–∞—Ä–µ–º. –í—Å—ë :) –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è —Å—Ö–µ–º–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –∫–≤–∞—Ä—Ü–∞ —Å —á–∞—Å—Ç–æ—Ç–æ–π 32768 –ì—Ü –∏ –∞–≤—Ç–æ–Ω–æ–º–Ω–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –ø–∏—Ç–∞–Ω–∏—è. –ï—Å–ª–∏ –≤–µ—Ä–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—é, –±–∞—Ç–∞—Ä–µ–π–∫–∏ 48–º–ê—á –¥–æ–ª–∂–Ω–æ —Ö–≤–∞—Ç–∏—Ç—å –Ω–∞ 10 –ª–µ—Ç –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–π —Ä–∞–±–æ—Ç—ã —á–∞—Å–æ–≤. –û–±–º–µ–Ω –¥–∞–Ω–Ω—ã–º–∏ –º–µ–∂–¥—É DS1307 –∏ –≤–Ω–µ—à–Ω–∏–º –º–∏—Ä–æ–º –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–º—É –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É I2C, –∫–æ—Ç–æ—Ä—ã–π –∫–∞–∫ –∏–∑–≤–µ—Å—Ç–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –≤—Å–µ–≥–æ –¥–≤–µ –¥–≤—É–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ª–∏–Ω–∏–∏ —Å–≤—è–∑–∏ (SDA –∏ SCL), –ø—Ä–∏ —ç—Ç–æ–º –Ω–∞ –æ–¥–Ω–æ–π I2C —à–∏–Ω–µ –º–æ–∂–µ—Ç –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –¥–æ 127 —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤. –ú–∏–∫—Ä–æ—Å—Ö–µ–º–∞ DS1307 –≤ —Ç–µ—Ä–º–∏–Ω–∞—Ö I2C –≤—Å–µ–≥–¥–∞ —è–≤–ª—è–µ—Ç—Å—è –≤–µ–¥–æ–º–æ–π (Slave), —Ç.–µ. –Ω–µ –º–æ–∂–µ—Ç –∏–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞—Ç—å –æ–±–º–µ–Ω –¥–∞–Ω–Ω—ã–º–∏. –í–µ–¥—É—â–∏–º (Master) –≤ –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ –±—É–¥–µ—Ç –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä PIC18F4620, —É –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–∞ –±–æ—Ä—Ç—É –∏–º–µ–µ—Ç—Å—è –∞–ø–ø–∞—Ä–∞—Ç–Ω—ã–π I2C.&lt;/p&gt;
&lt;p&gt;–ö –æ–∑–Ω–∞–∫–æ–º–ª–µ–Ω–∏—é –Ω–∞—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è &lt;a href="https://www.sparkfun.com/datasheets/Components/DS1307.pdf" rel="nofollow"&gt;–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–∞—è&lt;/a&gt; –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –Ω–∞ DS1307. –í —Å–ª—É—á–∞–µ —Å —à–∏–Ω–æ–π I2C –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å –≤–∞–∂–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —á–∞—Å—Ç–æ—Ç–∞ —Ç–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è SCL (–æ—Ç —ç—Ç–æ–≥–æ –∑–∞–≤–∏—Å–∏—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö), —Ñ–∏–∑–∏—á–µ—Å–∫–∏–π –∞–¥—Ä–µ—Å –º–∏–∫—Ä–æ—Å—Ö–µ–º—ã (–∏–∑ 127 –≤–æ–∑–º–æ–∂–Ω—ã—Ö) –Ω–∞ —à–∏–Ω–µ –∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –∫–∞—Ä—Ç–∞ –ø–∞–º—è—Ç–∏ (–∞–¥—Ä–µ—Å–∞ —Ä–µ–≥–∏—Å—Ç—Ä–æ–≤). –¢–∞–∫ –∫–∞–∫ I2C —è–≤–ª—è–µ—Ç—Å—è &lt;em&gt;—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º&lt;/em&gt; –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º, —Ç–æ –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –∏–º–µ–Ω–Ω–æ –≤–µ—Ä—Ö–Ω—è—è –≥—Ä–∞–Ω–∏—Ü–∞ —á–∞—Å—Ç–æ—Ç—ã, —Ç–æ–≥–¥–∞ –∫–∞–∫ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å –æ–±–º–µ–Ω–∞ –∑–∞–¥–∞—ë—Ç—Å—è –º–∞—Å—Ç–µ—Ä–æ–º –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –ª—é–±–æ–π –∏ –¥–∞–∂–µ –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–π - –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –º–æ–∂–µ—Ç —Å–ø–æ–∫–æ–π–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –Ω–∞ –±–æ–ª–µ–µ –≤–∞–∂–Ω—ã–µ –∑–∞–¥–∞—á–∏ –±–µ–∑ –ø–æ—Ç–µ—Ä–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–∞ —à–∏–Ω–µ. –≠—Ç–æ —Å–µ—Ä—å—ë–∑–Ω–æ–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ –ø–µ—Ä–µ–¥–∞ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º–∏.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2017/02/02/picsimjs-chasy-realnogo-vremeni-ds1307/config-4620.h"&gt;config.h&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2017/02/02/picsimjs-chasy-realnogo-vremeni-ds1307/i2c-hw.c"&gt;i2c-hw.c&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2017/01/27/picsimjs-simvolnyi-displei-na-baze-hd44780/"&gt;liquid-crystal.c&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2017/02/02/picsimjs-chasy-realnogo-vremeni-ds1307/main.hex"&gt;hex&lt;/a&gt; | &lt;a href="http://mazko.github.io/picsim.js/1bcc58df4b0494fada5bfdc2638e8034"&gt;picsim.js&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2017/02/02/picsimjs-chasy-realnogo-vremeni-ds1307/ui.gif" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–†–∞–±–æ—Ç–∞ —Å —Å–∏–º–≤–æ–ª—å–Ω—ã–º –¥–∏—Å–ø–ª–µ–µ–º –æ–ø–∏—Å—ã–≤–∞–ª–∞—Å—å –≤ –ø—Ä–µ–¥—ã–¥—É—â–µ–º &lt;a href="http://proiot.ru/blog/posts/2017/01/27/picsimjs-simvolnyi-displei-na-baze-hd44780/"&gt;–º–∞—Ç–µ—Ä–∏–∞–ª–µ&lt;/a&gt;. –°–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–µ –¥–µ–ª–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç—ã —Å –∞–ø–ø–∞—Ä–∞—Ç–Ω—ã–º I2C –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ –ø–æ–º–µ—â–µ–Ω—ã –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª &lt;a href="http://proiot.ru/blog/posts/2017/02/02/picsimjs-chasy-realnogo-vremeni-ds1307/i2c-hw.c"&gt;i2c-hw.c&lt;/a&gt;. –ß—Ç–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ DS1307 –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ —Ñ—É–Ω–∫—Ü–∏–∏ rtc_r. –ü–æ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ I2C –≤–µ–¥–æ–º–æ–º—É —Ä–∞–∑—Ä–µ—à–∞–µ—Ç—Å—è –ø—Ä–∏–¥–µ—Ä–∂–∏–≤–∞—Ç—å (–≤—ã—Å—Ç–∞–≤–ª—è—Ç—å –≤ 0) –ª–∏–Ω–∏—é SCL, —Ç–µ–º —Å–∞–º—ã–º —Å–∏–≥–Ω–∞–ª–∏–∑–∏—Ä—É—è –æ –Ω–µ–≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ –∫ –æ–±–º–µ–Ω—É –¥–∞–Ω–Ω—ã–º–∏ - –ø–æ—ç—Ç–æ–º—É —Ñ—É–Ω–∫—Ü–∏—è &lt;code&gt;i2c_idle&lt;/code&gt; –∂–¥—ë—Ç –ø–æ–∫–∞ –Ω–µ –æ—Ç–ø—É—Å—Ç—è—Ç SCL. –° –∫–∞–∂–¥—ã–º —á—Ç–µ–Ω–∏–µ–º –æ—á–µ—Ä–µ–¥–Ω–æ–≥–æ –±–∞–π—Ç–∞ &lt;code&gt;i2c_rb&lt;/code&gt; –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∞–¥—Ä–µ—Å –∫–∞—Ä—Ç—ã –ø–∞–º—è—Ç–∏ DS1307 –∏–Ω–∫—Ä–∏–º–∏–Ω–∏—Ä—É–µ—Ç—Å—è, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ —Å—á–∏—Ç—ã–≤–∞—Ç—å –º–∏–Ω—É—Ç—ã...–≥–æ–¥ –±–µ–∑ —è–≤–Ω–æ–≥–æ —É–∫–∞–∑—ã–≤–∞–Ω–∏—è –∏—Ö –∞–¥—Ä–µ—Å–æ–≤ - –Ω—É–∂–µ–Ω —Ç–æ–ª—å–∫–æ –Ω–∞—á–∞–ª—å–Ω—ã–π –∞–¥—Ä–µ—Å —Å–µ–∫—É–Ω–¥. –í —Å–µ—Ç–∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞ —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º –æ–ø–∏—Å–∞–Ω–∏–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ I2C, –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π &lt;code&gt;i2c_open&lt;/code&gt;, &lt;code&gt;i2c_start&lt;/code&gt; –∏ —Ç.–¥. –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø—Ä–µ–¥–µ–ª—å–Ω–æ —è—Å–Ω—ã–º.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;rtc_r.c&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;stdint.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;stdbool.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;time.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;i2c-hw.c&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="nf"&gt;bcd2dec&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="n"&gt;bcd&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="n"&gt;bcd&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="mi"&gt;16&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;bcd&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="mi"&gt;16&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="c1"&gt;// http://microchip.wikidot.com/i2c:sequential-read&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;rtc_r&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;struct&lt;/span&gt; &lt;span class="n"&gt;tm&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="n"&gt;i2c_open&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;              &lt;span class="c1"&gt;// Open I2C module as master, low speed&lt;/span&gt;

  &lt;span class="n"&gt;i2c_idle&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;              &lt;span class="c1"&gt;// Ensure I2C is idle&lt;/span&gt;
  &lt;span class="n"&gt;i2c_start&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;false&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;        &lt;span class="c1"&gt;// I2C Start condition&lt;/span&gt;
  &lt;span class="n"&gt;i2c_wb&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mh"&gt;0xD0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;            &lt;span class="c1"&gt;// DS1307 slave I2C address + I2C write flag&lt;/span&gt;
  &lt;span class="n"&gt;i2c_idle&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;              &lt;span class="c1"&gt;// Ensure I2C is idle&lt;/span&gt;
  &lt;span class="n"&gt;i2c_wb&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;               &lt;span class="c1"&gt;// Sequential read start address&lt;/span&gt;

  &lt;span class="n"&gt;i2c_idle&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;              &lt;span class="c1"&gt;// Ensure I2C is idle&lt;/span&gt;
  &lt;span class="n"&gt;i2c_start&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;true&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;         &lt;span class="c1"&gt;// Restart condition&lt;/span&gt;
  &lt;span class="n"&gt;i2c_wb&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mh"&gt;0xD1&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;            &lt;span class="c1"&gt;// DS1307 slave I2C address + I2C read flag&lt;/span&gt;

  &lt;span class="n"&gt;i2c_idle&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;              &lt;span class="c1"&gt;// Ensure I2C is idle&lt;/span&gt;
  &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;tm_sec&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;bcd2dec&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i2c_rb&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;true&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt; &lt;span class="c1"&gt;// secs, I2C ACK condition&lt;/span&gt;

  &lt;span class="n"&gt;i2c_idle&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;              &lt;span class="c1"&gt;// Ensure I2C is idle&lt;/span&gt;
  &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;tm_min&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;bcd2dec&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i2c_rb&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;true&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt; &lt;span class="c1"&gt;// minutes, I2C ACK condition&lt;/span&gt;

  &lt;span class="n"&gt;i2c_idle&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;              &lt;span class="c1"&gt;// Ensure I2C is idle&lt;/span&gt;
  &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;tm_hour&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;bcd2dec&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i2c_rb&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;true&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt; &lt;span class="c1"&gt;// hours, I2C ACK condition&lt;/span&gt;

  &lt;span class="n"&gt;i2c_idle&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;              &lt;span class="c1"&gt;// Ensure I2C is idle&lt;/span&gt;
  &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;tm_wday&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;i2c_rb&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;true&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt; &lt;span class="c1"&gt;// Day of Week, I2C ACK condition&lt;/span&gt;

  &lt;span class="n"&gt;i2c_idle&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;              &lt;span class="c1"&gt;// Ensure I2C is idle&lt;/span&gt;
  &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;tm_mday&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;bcd2dec&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i2c_rb&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;true&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt; &lt;span class="c1"&gt;// Day of Month, I2C ACK condition&lt;/span&gt;

  &lt;span class="n"&gt;i2c_idle&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;              &lt;span class="c1"&gt;// Ensure I2C is idle&lt;/span&gt;
  &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;tm_mon&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;bcd2dec&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i2c_rb&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;true&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt; &lt;span class="c1"&gt;// month, I2C ACK condition&lt;/span&gt;

  &lt;span class="n"&gt;i2c_idle&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;              &lt;span class="c1"&gt;// Ensure I2C is idle&lt;/span&gt;
  &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;tm_year&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;bcd2dec&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i2c_rb&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;false&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt; &lt;span class="c1"&gt;// year, I2C NACK condition (end of sequential read)&lt;/span&gt;

  &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;tm_yday&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;tm_isdst&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="c1"&gt;// less than zero if the information is not available&lt;/span&gt;

  &lt;span class="n"&gt;i2c_stop_and_close&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;    &lt;span class="c1"&gt;// I2C Stop condition, then close I2C module&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;em&gt;main.c&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cm"&gt;/*&lt;/span&gt;
&lt;span class="cm"&gt;  xc8 --chip=18f4620 main.c&lt;/span&gt;
&lt;span class="cm"&gt;*/&lt;/span&gt;

&lt;span class="cp"&gt;#define _XTAL_FREQ 25e4&lt;/span&gt;

&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;xc.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;stdio.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;time.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;stdint.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;config-4620.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;liquid-crystal.c&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;rtc_r.c&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="c1"&gt;// http://microchip.wikidot.com/faq:29&lt;/span&gt;
&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;putch&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="n"&gt;byte&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="n"&gt;lcd_dat&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;byte&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="c1"&gt;// lcd&lt;/span&gt;
  &lt;span class="n"&gt;PORTD&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;TRISD&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;PORTE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;TRISE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="c1"&gt;// i2c&lt;/span&gt;
  &lt;span class="n"&gt;TRISC3&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;TRISC4&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="n"&gt;lcd_init&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
  &lt;span class="n"&gt;lcd_no_cursor&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
  &lt;span class="n"&gt;lcd_no_blink&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;

  &lt;span class="k"&gt;while&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="n"&gt;daysOfWeek&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="s"&gt;&amp;quot;Sun.&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Mon.&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Tues.&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Wed.&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Thurs.&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Fri.&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Sat.&amp;quot;&lt;/span&gt;
    &lt;span class="p"&gt;};&lt;/span&gt;
    &lt;span class="k"&gt;struct&lt;/span&gt; &lt;span class="n"&gt;tm&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="n"&gt;lcd_home&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
    &lt;span class="n"&gt;rtc_r&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;%02d:%02d:%02d  %s&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
      &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tm_hour&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tm_min&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tm_sec&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
      &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tm_wday&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tm_wday&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;7&lt;/span&gt; &lt;span class="o"&gt;?&lt;/span&gt; &lt;span class="n"&gt;daysOfWeek&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tm_wday&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;:(&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;lcd_set_cursor&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;%02d/%02d/%02d&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tm_mday&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tm_mon&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;t&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;tm_year&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;

  &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–¢–µ–∫—É—â—É—é –≤—Ä–µ–º—è –∏ –¥–∞—Ç—É –º–æ–∂–Ω–æ –∫–æ–Ω–µ—á–Ω–æ –∂–µ –≤—ã—Å—Ç–∞–≤–ª—è—Ç—å - –∞–¥—Ä–µ—Å–∞ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π –∫–∞—Ä—Ç—ã –ø–∞–º—è—Ç–∏ DS1307 –¥–ª—è –∑–∞–ø–∏—Å–∏ —Ç–∞–∫–∏–µ –∂–µ –∫–∞–∫ –∏ –Ω–∞ —á—Ç–µ–Ω–∏–µ. –ï—Å–ª–∏ —Å–∫–æ—Ä–æ—Å—Ç—å –æ–±–º–µ–Ω–∞ –¥–∞–Ω–Ω—ã–º–∏ –Ω–µ –∏–º–µ–µ—Ç –æ—Å–æ–±–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è, —Ç–æ –Ω–∏—á—Ç–æ –Ω–µ –º–µ—à–∞–µ—Ç –∑–∞–º–µ–Ω–∏—Ç—å –∞–ø–ø–∞—Ä–∞—Ç–Ω—ã–π I2C (—Ñ–∞–π–ª i2c-hw.c) –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–µ–π (–ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ —Å—á–∏—Ç—ã–≤–∞—Ç—å/–≤—ã—Å—Ç–∞–≤–ª—è—Ç—å –Ω–æ–≥–∏ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ SCL/SDA) - —ç—Ç–æ —Ç–∞–∫–∂–µ –ø—Ä–æ–≤–µ—Ä—è–ª–æ—Å—å –∏ –¥–∞–∂–µ –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –≤ —Å–∏–º—É–ª—è—Ü–∏–∏ PICSim.js.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2017/02/05/picsimjs-soprogrammy-i-prosteishaia-mnogozadachnost/"&gt;–î–∞–ª–µ–µ&lt;/a&gt; —Å–æ–ø—Ä–æ–≥—Ä–∞–º–º—ã.&lt;/p&gt;</content><category term="picsim"></category><category term="DS1307"></category><category term="I2C"></category></entry><entry><title>PICSim.js - –º–∞—Ç—Ä–∏—á–Ω–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞</title><link href="http://proiot.ru/blog/posts/2017/01/30/picsimjs-matrichnaia-klaviatura/" rel="alternate"></link><published>2017-01-30T00:00:00+02:00</published><updated>2017-01-30T00:00:00+02:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2017-01-30:/blog/posts/2017/01/30/picsimjs-matrichnaia-klaviatura/</id><summary type="html">&lt;p&gt;–ú–∞—Ç—Ä–∏—á–Ω–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ —Å–æ—Å—Ç–æ–∏—Ç –∏ &lt;a href="http://proiot.ru/blog/posts/2017/01/13/simuliatsiia-mikrokontrollerov-picsimjs/"&gt;–æ–±—ã—á–Ω—ã—Ö&lt;/a&gt; –∫–Ω–æ–ø–æ–∫, —Ç–æ–ª—å–∫–æ —Å–æ–µ–¥–∏–Ω—ë–Ω–Ω—ã—Ö –≤ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ - —Å–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –≤ —Ä—è–¥—ã –∏ —Å—Ç–æ–ª–±—Ü—ã, –æ–±—Ä–∞–∑—É—è –º–∞—Ç—Ä–∏—Ü—É. –¢–∞–∫–æ–µ –≤–∫–ª—é—á–µ–Ω–∏–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–ø—Ä–∞—à–∏–≤–∞—Ç—å –±–æ–ª—å—à–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–Ω–æ–ø–æ–∫, –∑–∞–¥–µ–π—Å—Ç–≤–æ–≤–∞–≤ –ø—Ä–∏ —ç—Ç–æ–º –º–µ–Ω—å—à–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–æ–≥ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ - –Ω–∞–ø—Ä–∏–º–µ—Ä –¥–ª—è —Å—á–∏—Ç—ã–≤–∞–Ω–∏—è 16 –ø—Ä–æ—Å—Ç—ã—Ö –∫–Ω–æ–ø–æ–∫ –ø–æ–Ω–∞–¥–æ–±–∏–ª–æ—Å—å –±—ã —Ü–µ–ª—ã—Ö –¥–≤–∞ 8-–±–∏—Ç–Ω—ã—Ö –ø–æ—Ä—Ç–∞ –≤–≤–æ–¥–∞, —Ç–æ–≥–¥–∞ –∫–∞–∫ –º–∞—Ç—Ä–∏—Ü–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–±–æ–π—Ç–∏—Å—å ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;p&gt;–ú–∞—Ç—Ä–∏—á–Ω–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ —Å–æ—Å—Ç–æ–∏—Ç –∏ &lt;a href="http://proiot.ru/blog/posts/2017/01/13/simuliatsiia-mikrokontrollerov-picsimjs/"&gt;–æ–±—ã—á–Ω—ã—Ö&lt;/a&gt; –∫–Ω–æ–ø–æ–∫, —Ç–æ–ª—å–∫–æ —Å–æ–µ–¥–∏–Ω—ë–Ω–Ω—ã—Ö –≤ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ - —Å–≥—Ä—É–ø–ø–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –≤ —Ä—è–¥—ã –∏ —Å—Ç–æ–ª–±—Ü—ã, –æ–±—Ä–∞–∑—É—è –º–∞—Ç—Ä–∏—Ü—É. –¢–∞–∫–æ–µ –≤–∫–ª—é—á–µ–Ω–∏–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–ø—Ä–∞—à–∏–≤–∞—Ç—å –±–æ–ª—å—à–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∫–Ω–æ–ø–æ–∫, –∑–∞–¥–µ–π—Å—Ç–≤–æ–≤–∞–≤ –ø—Ä–∏ —ç—Ç–æ–º –º–µ–Ω—å—à–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–æ–≥ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ - –Ω–∞–ø—Ä–∏–º–µ—Ä –¥–ª—è —Å—á–∏—Ç—ã–≤–∞–Ω–∏—è 16 –ø—Ä–æ—Å—Ç—ã—Ö –∫–Ω–æ–ø–æ–∫ –ø–æ–Ω–∞–¥–æ–±–∏–ª–æ—Å—å –±—ã —Ü–µ–ª—ã—Ö –¥–≤–∞ 8-–±–∏—Ç–Ω—ã—Ö –ø–æ—Ä—Ç–∞ –≤–≤–æ–¥–∞, —Ç–æ–≥–¥–∞ –∫–∞–∫ –º–∞—Ç—Ä–∏—Ü–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–±–æ–π—Ç–∏—Å—å –≤—Å–µ–≥–æ –æ–¥–Ω–∏–º —Ç.–∫. &lt;code&gt;4*4=16&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;–ú–∞—Ç—Ä–∏—á–Ω–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –Ω–∞ —Ä–∏—Å—É–Ω–∫–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∞ –∫ –ø–æ—Ä—Ç—É PORTB, –≤—Å–µ –Ω–æ–≥–∏ –ø–æ–¥—Ç—è–Ω—É—Ç—ã —Ä–µ–∑–∏—Å—Ç–æ—Ä–∞–º–∏ –∫ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—é –ø–∏—Ç–∞–Ω–∏—è - —Ç.–µ. —á–∏—Ç–∞—é—Ç—Å—è –∫–∞–∫ 1 –µ—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–∂–∞—Ç–æ. –ê–ª–≥–æ—Ä–∏—Ç–º –æ–ø—Ä–æ—Å–∞ –º–∞—Ç—Ä–∏—á–Ω–æ–π –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –Ω–∞ 16 –∫–Ω–æ–ø–æ–∫ —Å–≤–æ–¥–∏—Ç—Å—è –∫ —Å–ª–µ–¥—É—é—â–∏–º —à–∞–≥–∞–º:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è - —á–µ—Ç—ã—Ä–µ —Å–∫–∞–Ω–∏—Ä—É—é—â–∏–µ –Ω–æ–≥–∏ RB0...RB3 –Ω–∞ –≤—ã—Ö–æ–¥, —á–µ—Ç—ã—Ä–µ —Å—á–∏—Ç—ã–≤–∞—é—â–∏–µ RB4...RB7 –Ω–∞ –≤—Ö–æ–¥. –ù–∏—á—Ç–æ –Ω–µ –∑–∞–ø—Ä–µ—â–∞–µ—Ç –ø–æ–º–µ–Ω—è—Ç—å —Å–∫–∞–Ω–∏—Ä—É—é—â–∏–µ/—Å—á–∏—Ç—ã–≤–∞—é—â–∏–µ –≤—ã–≤–æ–¥—ã, —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ —ç—Ç–æ–≥–æ –Ω—É–∂–Ω–æ –ø–æ–º–µ–Ω—è—Ç—å –ø–∞—Ä—É —Å—Ç—Ä–æ—á–µ–∫ –≤ –ø—Ä–∏–≤–µ–¥–µ–Ω–Ω–æ–π –Ω–∏–∂–µ —Ñ—É–Ω–∫—Ü–∏–∏ &lt;code&gt;_keyboard_scan()&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;–æ–ø—Ä–æ—Å - –Ω–∞ –ø–µ—Ä–≤–æ–π –∏—Ç–µ—Ä–∞—Ü–∏–∏ –≤—ã—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –Ω–æ–ª—å –Ω–∞ RB0, –Ω–∞ RB1..RB3 –µ–¥–∏–Ω–∏—Ü—ã, –µ—Å–ª–∏ —ç—Ç–æ –ø—Ä–∏–≤–µ–ª–æ –∫ –ø–æ—Å–∞–¥–∫–µ –ø–æ–¥—Ç—è–≥–∏–≤–∞—é—â–µ–≥–æ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –Ω–∞–ø—Ä–∏–º–µ—Ä –Ω–∞ –≤—Ö–æ–¥–µ RB5, —ç—Ç–æ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –Ω–∞–∂–∞—Ç–∏–µ –∫–Ω–æ–ø–∫–∏ 3. –ï—Å–ª–∏ –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ, –∏—Ç–µ—Ä–∞—Ü–∏—è –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è - —Ç–µ–ø–µ—Ä—å —É–∂–µ RB1 –≤ –Ω–æ–ª—å, &lt;code&gt;RB0=RB2=RB3=1&lt;/code&gt; –∏ —Ç–∞–∫ –≤–ø–ª–æ—Ç—å –¥–æ RB3&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2017/01/30/picsimjs-matrichnaia-klaviatura/config-4620.h"&gt;config.h&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2017/01/27/picsimjs-simvolnyi-displei-na-baze-hd44780/"&gt;liquid-crystal.c&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2017/01/30/picsimjs-matrichnaia-klaviatura/main.hex"&gt;hex&lt;/a&gt; | &lt;a href="http://mazko.github.io/picsim.js/8ec71b12144755531dd59a243e3061bb"&gt;picsim.js&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2017/01/30/picsimjs-matrichnaia-klaviatura/ui.gif" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–†–∞–±–æ—Ç–∞ —Å —Å–∏–º–≤–æ–ª—å–Ω—ã–º –¥–∏—Å–ø–ª–µ–µ–º –æ–ø–∏—Å—ã–≤–∞–ª–∞—Å—å –≤ –ø—Ä–µ–¥—ã–¥—É—â–µ–º &lt;a href="http://proiot.ru/blog/posts/2017/01/27/picsimjs-simvolnyi-displei-na-baze-hd44780/"&gt;–º–∞—Ç–µ—Ä–∏–∞–ª–µ&lt;/a&gt;. –¢—É—Ç —Ä–∞–∑–º–µ—Ä –º–∞—Å—Å–∏–≤–∞ –Ω–∞ —ç—Ç–∞–ø–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é —Ä–∞—Å–ø–∏—Å–∞–Ω–Ω–æ–π —Ä–∞–Ω–µ–µ &lt;a href="http://proiot.ru/blog/posts/2012/10/08/idiomy-v-ansi-c/"&gt;–∏–¥–∏–æ–º—ã&lt;/a&gt; &lt;code&gt;sizeof x / sizeof x[0]&lt;/code&gt;. –§—É–Ω–∫—Ü–∏—è —Å—á–∏—Ç—ã–≤–∞–Ω–∏—è –∫–ª–∞–≤–∏—à–∏ &lt;code&gt;keyboad_get_or_0()&lt;/code&gt; –Ω–µ–±–ª–æ–∫–∏—Ä—É—é—â–∞—è - –µ—Å–ª–∏ –∫–ª–∞–≤–∏—à–∞ –Ω–∞–∂–∞—Ç–∞ (–ø–æ—Å–ª–µ —á–µ–≥–æ –æ—Ç–ø—É—â–µ–Ω–∞), –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –∫–æ–¥ —Å–∏–º–≤–æ–ª–∞, –µ—Å–ª–∏ –∂–µ –Ω–∏—á–µ–≥–æ –Ω–µ –Ω–∞–∂–∞—Ç–æ, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è 0. –ù–µ–±–ª–æ–∫–∏—Ä—É—é—â—É—é —Ñ—É–Ω–∫—Ü–∏—é –≤—Å–µ–≥–¥–∞ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –ø—Ä–∏ –∂–µ–ª–∞–Ω–∏–∏ –±–ª–æ–∫–∏—Ä—É—é—â–µ–π, –µ—Å–ª–∏ –ø–æ–º–µ—Å—Ç–∏—Ç—å –≤ —Ü–∏–∫–ª, –∞ –≤–æ—Ç —Å –±–ª–æ–∫–∏—Ä—É—é—â–∏–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏ –Ω–µ –≤—Å—ë —Ç–∞–∫ –ø—Ä–æ—Å—Ç–æ.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;keyboard.c&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;xc.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;stdint.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="nf"&gt;_keyboard_scan&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

  &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="n"&gt;key_code&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;][&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;1&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;2&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;3&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;+&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt;
    &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;4&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;5&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;6&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;-&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt;
    &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;7&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;8&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;9&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;/&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt;
    &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;*&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;#&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;$&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;}};&lt;/span&gt;

  &lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="n"&gt;r&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;r&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt; &lt;span class="n"&gt;key_code&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;key_code&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="c1"&gt;// set PORTB and some delay for voltage to rise / fall&lt;/span&gt;
    &lt;span class="n"&gt;PORTB&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;__delay_ms&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;key_code&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt; &lt;span class="o"&gt;**&lt;/span&gt;&lt;span class="n"&gt;key_code&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;PORTB&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mh"&gt;0x80&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="p"&gt;)))&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;key_code&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;r&lt;/span&gt;&lt;span class="p"&gt;][&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
      &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;

  &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="nf"&gt;keyboad_get_or_0&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="n"&gt;_last_key&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;_keyboard_scan&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
  &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;_last_key&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;_last_key&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;_last_key&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;_last_key&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;
  &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;em&gt;main.c&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cm"&gt;/*&lt;/span&gt;
&lt;span class="cm"&gt;  xc8 --chip=18f4620 main.c&lt;/span&gt;
&lt;span class="cm"&gt;*/&lt;/span&gt;

&lt;span class="cp"&gt;#define _XTAL_FREQ 5e4&lt;/span&gt;

&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;xc.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;config-4620.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;liquid-crystal.c&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;keyboard.c&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="c1"&gt;// lcd&lt;/span&gt;
  &lt;span class="n"&gt;PORTD&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;TRISD&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;PORTE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;TRISE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="c1"&gt;// matrix keyboard: PORTB AN8..AN12 as digital&lt;/span&gt;
  &lt;span class="n"&gt;ADCON1bits&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;PCFG0&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;ADCON1bits&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;PCFG1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt;
  &lt;span class="n"&gt;ADCON1bits&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;PCFG2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;PORTB&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;TRISB&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mh"&gt;0xF0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="n"&gt;lcd_init&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
  &lt;span class="n"&gt;lcd_no_cursor&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
  &lt;span class="n"&gt;lcd_no_blink&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
  &lt;span class="n"&gt;lcd_print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Keyboard:&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;lcd_set_cursor&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt; &lt;span class="c1"&gt;// row 2&lt;/span&gt;

  &lt;span class="k"&gt;while&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="n"&gt;key&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;keyboad_get_or_0&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="n"&gt;lcd_dat&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;key&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;

  &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ê–ª–≥–æ—Ä–∏—Ç–º, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –≤ –º–∞—Ç—Ä–∏—á–Ω–æ–π –∫–ª–∞–≤–∏–∞—Ç—É—Ä–µ, –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è –≤ —Å—Ç–æ—Ä–æ–Ω—É —É–≤–µ–ª–∏—á–µ–Ω–∏—è - –Ω–∞–ø—Ä–∏–º–µ—Ä 8 –±–∏—Ç –¥–ª—è —Å—á–∏—Ç—ã–≤–∞–Ω–∏—è –∏ 8 –¥–ª—è —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞—Å—Ç &lt;code&gt;8*8=64&lt;/code&gt; –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏, —ç—Ç–æ –æ–¥–∏–Ω –ø–æ—Ä—Ç –≤–≤–æ–¥–∞-–≤—ã–≤–æ–¥–∞ –¥–ª—è 16-–±–∏—Ç–Ω—ã—Ö pic24 –∏–ª–∏ –¥–≤–∞ –ø–æ—Ä—Ç–∞ –¥–ª—è pic18...pic10 –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤. –í —Ç–µ–æ—Ä–∏–∏ –º–∞—Ç—Ä–∏—á–Ω–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ —É—Å—Ç—É–ø–∞–µ—Ç –ø–æ —Å–∫–æ—Ä–æ—Å—Ç–∏ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ—Å—Ç—ã–º –∫–Ω–æ–ø–∫–∞–º –∏ —Ä–∞—Å—Ö–æ–¥—É–µ—Ç –∫–∞–∫—É—é-—Ç–æ –Ω–µ–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—É—é —á–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏, –Ω–æ –≤—Å—ë —ç—Ç–æ —Å –ª–∏—Ö–≤–æ–π –∫–æ–º–ø–µ–Ω—Å–∏—Ä—É–µ—Ç—Å—è –±–æ–ª–µ–µ —Ä–∞—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –ø–æ—Ä—Ç–æ–≤ –≤–≤–æ–¥–∞ –≤—ã–≤–æ–¥–∞. &lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2017/02/02/picsimjs-chasy-realnogo-vremeni-ds1307/"&gt;–î–∞–ª–µ–µ&lt;/a&gt; —á–∞—Å—ã —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏.&lt;/p&gt;</content><category term="picsim"></category></entry><entry><title>PICSim.js - –∞–Ω–∞–ª–æ–≥–æ-—Ü–∏—Ñ—Ä–æ–≤–æ–π –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å</title><link href="http://proiot.ru/blog/posts/2017/01/28/picsimjs-analogo-tsifrovoi-preobrazovatel/" rel="alternate"></link><published>2017-01-28T00:00:00+02:00</published><updated>2017-01-28T00:00:00+02:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2017-01-28:/blog/posts/2017/01/28/picsimjs-analogo-tsifrovoi-preobrazovatel/</id><summary type="html">&lt;p&gt;–ö–∞–∫ –º—ã —É–∂–µ &lt;a href="http://proiot.ru/blog/posts/2017/01/14/picsimjs-shirotno-impulsnaia-moduliatsiia/"&gt;–∑–Ω–∞–µ–º&lt;/a&gt;, —Ü–∏—Ñ—Ä–æ-–∞–Ω–∞–ª–æ–≥–æ–≤—ã–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª–∏ (–¶–ê–ü, DAC) –ø—Ä–µ–æ–±—Ä–∞–∑—É—é—Ç –¥–∏—Å–∫—Ä–µ—Ç–Ω—ã–π (–¥–≤–æ–∏—á–Ω—ã–π) –∫–æ–¥ –≤ –∞–Ω–∞–ª–æ–≥–æ–≤—ã–π —Å–∏–≥–Ω–∞–ª - –∫–∞–∫ –ø—Ä–∞–≤–∏–ª–æ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ. –ù–µ –º–µ–Ω–µ–µ –≤–æ—Å—Ç—Ä–µ–±–æ–≤–∞–Ω–Ω—ã–º –≤ —Ü–∏—Ñ—Ä–æ–≤–æ–π —ç–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–µ —è–≤–ª—è–µ—Ç—Å—è –æ–±—Ä–∞—Ç–Ω–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ - –∞–Ω–∞–ª–æ–≥–æ-—Ü–∏—Ñ—Ä–æ–≤–æ–π –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å (–ê–¶–ü, –∞–Ω–≥–ª. Analog-to-digital converter, ADC). –ù–∞–∏–±–æ–ª–µ–µ –≤–∞–∂–Ω—ã–º–∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º–∏ –ê–¶–ü —è–≤–ª—è—é—Ç—Å—è —Ä–∞–∑—Ä—è–¥–Ω–æ—Å—Ç—å/—Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ - –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –≤–µ–ª–∏—á–∏–Ω—ã –∞–Ω–∞–ª–æ–≥–æ–≤–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞, –∫–æ—Ç–æ—Ä–æ–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–æ ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;p&gt;–ö–∞–∫ –º—ã —É–∂–µ &lt;a href="http://proiot.ru/blog/posts/2017/01/14/picsimjs-shirotno-impulsnaia-moduliatsiia/"&gt;–∑–Ω–∞–µ–º&lt;/a&gt;, —Ü–∏—Ñ—Ä–æ-–∞–Ω–∞–ª–æ–≥–æ–≤—ã–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª–∏ (–¶–ê–ü, DAC) –ø—Ä–µ–æ–±—Ä–∞–∑—É—é—Ç –¥–∏—Å–∫—Ä–µ—Ç–Ω—ã–π (–¥–≤–æ–∏—á–Ω—ã–π) –∫–æ–¥ –≤ –∞–Ω–∞–ª–æ–≥–æ–≤—ã–π —Å–∏–≥–Ω–∞–ª - –∫–∞–∫ –ø—Ä–∞–≤–∏–ª–æ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ. –ù–µ –º–µ–Ω–µ–µ –≤–æ—Å—Ç—Ä–µ–±–æ–≤–∞–Ω–Ω—ã–º –≤ —Ü–∏—Ñ—Ä–æ–≤–æ–π —ç–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–µ —è–≤–ª—è–µ—Ç—Å—è –æ–±—Ä–∞—Ç–Ω–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ - –∞–Ω–∞–ª–æ–≥–æ-—Ü–∏—Ñ—Ä–æ–≤–æ–π –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å (–ê–¶–ü, –∞–Ω–≥–ª. Analog-to-digital converter, ADC). –ù–∞–∏–±–æ–ª–µ–µ –≤–∞–∂–Ω—ã–º–∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º–∏ –ê–¶–ü —è–≤–ª—è—é—Ç—Å—è —Ä–∞–∑—Ä—è–¥–Ω–æ—Å—Ç—å/—Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ - –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –≤–µ–ª–∏—á–∏–Ω—ã –∞–Ω–∞–ª–æ–≥–æ–≤–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞, –∫–æ—Ç–æ—Ä–æ–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–æ, –∞ —Ç–∞–∫–∂–µ —á–∞—Å—Ç–æ—Ç–∞ –¥–∏—Å–∫—Ä–µ—Ç–∏–∑–∞—Ü–∏–∏ (Sampling rate) - —á–∞—Å—Ç–æ—Ç–∞ –≤—ã–±–æ—Ä–∫–∏ —Ü–∏—Ñ—Ä–æ–≤—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –∏–∑ –∞–Ω–∞–ª–æ–≥–æ–≤–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞.&lt;/p&gt;
&lt;p&gt;–ú–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä PIC18F4620 –∏–º–µ–µ—Ç –Ω–∞ –±–æ—Ä—Ç—É –æ–¥–∏–Ω –∞–ø–ø–∞—Ä–∞—Ç–Ω—ã–π –ê–¶–ü —Ä–∞–∑—Ä—è–¥–Ω–æ—Å—Ç—å—é 10 &lt;a href="https://bc.js.org/"&gt;–±–∏—Ç&lt;/a&gt; &lt;code&gt;2^10=1024&lt;/code&gt; —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —á–∞—Å—Ç–æ—Ç–æ–π –¥–∏—Å–∫—Ä–µ—Ç–∏–∑–∞—Ü–∏–∏ (–µ—Å–ª–∏ –≤–µ—Ä–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—é) 100 —Ç—ã—Å—è—á –≤—ã–±–æ—Ä–æ–∫ –≤ —Å–µ–∫—É–Ω–¥—É. –¢–∞–∫–∂–µ –≤ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–µ –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω –º—É–ª—å—Ç–∏–ø–ª–µ–∫—Å–æ—Ä, –ø–æ–∑–≤–æ–ª—è—é—â–∏–π –≤ –Ω—É–∂–Ω—ã–π –º–æ–º–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å –Ω–∞ –≤—Ö–æ–¥ –ê–¶–ü 13 —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –Ω–æ–≥. –í –∫–∞—á–µ—Å—Ç–≤–µ –æ–ø–æ—Ä–Ω–æ–≥–æ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –¥–ª—è –ê–¶–ü –º–æ–∂–µ—Ç —Å–ª—É–∂–∏—Ç—å –∫–∞–∫ –∏—Å—Ç–æ—á–Ω–∏–∫ –ø–∏—Ç–∞–Ω–∏—è Vdd/Vss (–æ–±—ã—á–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞), —Ç–∞–∫ –∏ –≤–Ω–µ—à–Ω–∏–π –∏—Å—Ç–æ—á–Ω–∏–∫ –Ω–∞ –Ω–æ–≥–∞—Ö 4 –∏ 5 (AN2/AN3). –ù–∞–ø—Ä—è–∂–µ–Ω–∏–µ –Ω–∞ –≤—Ö–æ–¥–µ –ê–¶–ü –Ω–µ –¥–æ–ª–∂–Ω–æ –≤—ã—Ö–æ–¥–∏—Ç—å –∑–∞ –ø—Ä–µ–¥–µ–ª—ã –æ–ø–æ—Ä–Ω–æ–≥–æ.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2017/01/28/picsimjs-analogo-tsifrovoi-preobrazovatel/config-4620.h"&gt;config.h&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2017/01/27/picsimjs-simvolnyi-displei-na-baze-hd44780/"&gt;liquid-crystal.c&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2017/01/28/picsimjs-analogo-tsifrovoi-preobrazovatel/main.hex"&gt;hex&lt;/a&gt; | &lt;a href="http://mazko.github.io/picsim.js/b1bb487dc063ae1128e98372a7983519"&gt;picsim.js&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2017/01/28/picsimjs-analogo-tsifrovoi-preobrazovatel/ui.gif" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–†–∞–±–æ—Ç–∞ —Å —Å–∏–º–≤–æ–ª—å–Ω—ã–º –¥–∏—Å–ø–ª–µ–µ–º –æ–ø–∏—Å—ã–≤–∞–ª–∞—Å—å –≤ –ø—Ä–µ–¥—ã–¥—É—â–µ–º &lt;a href="http://proiot.ru/blog/posts/2017/01/27/picsimjs-simvolnyi-displei-na-baze-hd44780/"&gt;–º–∞—Ç–µ—Ä–∏–∞–ª–µ&lt;/a&gt;. –¢—É—Ç –º—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞–ª–∏ —Ñ—É–Ω–∫—Ü–∏—é &lt;code&gt;putch&lt;/code&gt;, —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å LCD —á–µ—Ä–µ–∑ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é –° &lt;code&gt;printf&lt;/code&gt;. –ü–æ—Å–∫–æ–ª—å–∫—É –≤ –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ –¥–ª–∏–Ω–∞ –≤—ã–≤–æ–¥–∏–º–æ–π –Ω–∞ –¥–∏—Å–ø–ª–µ–π —Å—Ç—Ä–æ–∫–∏ –≤—Å–µ–≥–¥–∞ –ø–æ—Å—Ç–æ—è–Ω–Ω–∞, –Ω–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –µ–≥–æ –æ—á–∏—â–∞—Ç—å - –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—å –∫—É—Ä—Å–æ—Ä –¥–æ–º–æ–π –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º –Ω–æ–≤—ã–º –≤—ã–∑–æ–≤–æ–º &lt;code&gt;printf&lt;/code&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cm"&gt;/*&lt;/span&gt;
&lt;span class="cm"&gt;  xc8 --chip=18f4620 main.c&lt;/span&gt;
&lt;span class="cm"&gt;*/&lt;/span&gt;

&lt;span class="cp"&gt;#define _XTAL_FREQ 5e4&lt;/span&gt;

&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;xc.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;stdio.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;stdint.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;config-4620.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;liquid-crystal.c&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="c1"&gt;// http://microchip.wikidot.com/faq:29&lt;/span&gt;
&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;putch&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="n"&gt;byte&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="n"&gt;lcd_dat&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;byte&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="kt"&gt;uint32_t&lt;/span&gt; &lt;span class="n"&gt;adc_samples_counter&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="c1"&gt;// lcd&lt;/span&gt;
  &lt;span class="n"&gt;PORTD&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;TRISD&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;PORTE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;TRISE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="c1"&gt;// ADC input RE0&lt;/span&gt;

  &lt;span class="c1"&gt;// ADC analog input RE0&lt;/span&gt;
  &lt;span class="n"&gt;ADCON0bits&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;CHS3&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;ADCON0bits&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;CHS1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;ADCON0bits&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;CHS2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;ADCON0bits&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;CHS0&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;ADCON0bits&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ADON&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="n"&gt;lcd_init&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
  &lt;span class="n"&gt;lcd_no_cursor&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
  &lt;span class="n"&gt;lcd_no_blink&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;

  &lt;span class="k"&gt;while&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;ADCON0bits&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;GO&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;          &lt;span class="c1"&gt;// start ADC conversion&lt;/span&gt;
    &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ADCON0bits&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;GO&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt; &lt;span class="c1"&gt;// wait untill conversion finish&lt;/span&gt;
    &lt;span class="n"&gt;lcd_home&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
    &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;%4d:0x%04x&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
      &lt;span class="p"&gt;(((&lt;/span&gt;&lt;span class="kt"&gt;uint16_t&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="n"&gt;ADRESH&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ADRESL&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
      &lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="n"&gt;adc_samples_counter&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;

  &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ö–∞–∫ –Ω–µ—Ç—Ä—É–¥–Ω–æ –¥–æ–≥–∞–¥–∞—Ç—å—Å—è –ø–æ –∫–∞—Ä—Ç–∏–Ω–∫–µ —É –¥–∞–Ω–Ω–æ–π —Å–∏–º—É–ª—è—Ü–∏–∏ –æ–ø–æ—Ä–Ω–æ–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ 5 –í–æ–ª—å—Ç. –° –ø–æ–º–æ—â—å—é –±–∏—Ç–æ–≤ CHS3-CHS0 –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è —Å –∫–∞–∫–æ–≥–æ –≤—ã–≤–æ–¥–∞ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ –∞–Ω–∞–ª–æ–≥–æ–≤—ã–π —Å–∏–≥–Ω–∞–ª –ø–æ—Å—Ç—É–ø–∞–µ—Ç –Ω–∞ –≤—Ö–æ–¥ –ê–¶–ü - –≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ —ç—Ç–æ RE0. –ë–∏—Ç ADON –≤–∫–ª—é—á–∞–µ—Ç –ê–¶–ü, –¥–ª—è —Å—Ç–∞—Ä—Ç–∞ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ –≤—ã—Å—Ç–∞–≤–∏—Ç—å —Ñ–ª–∞–≥ GO, –ø–æ –æ–∫–æ–Ω—á–∞–Ω–∏–∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è —ç—Ç–æ—Ç —Ñ–ª–∞–≥ –±—É–¥–µ—Ç —Å–±—Ä–æ—à–µ–Ω –∞–ø–ø–∞—Ä–∞—Ç–Ω–æ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏). –¢–∞–∫ –∫–∞–∫ —Ä–∞–∑—Ä—è–¥–Ω–æ—Å—Ç—å –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ 8 –±–∏—Ç, —á—Ç–æ –º–µ–Ω—å—à–µ —Ä–∞–∑—Ä—è–¥–Ω–æ—Å—Ç–∏ –ê–¶–ü, —Ç–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è —Ä–∞–∑–º–µ—â–∞–µ—Ç—Å—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –≤ –¥–≤—É—Ö —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ö - ADRESH –∏ ADRESL. –í—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ 10 –±–∏—Ç–Ω–æ–≥–æ —á–∏—Å–ª–∞ –≤ —ç—Ç–∏—Ö –¥–≤—É—Ö —Ä–µ–≥–∏—Å—Ç—Ä–æ–≤ –∑–∞–¥–∞—ë—Ç—Å—è –±–∏—Ç–æ–º ADFM, —Ö–æ—Ç—è –Ω–∞–¥–æ–±–Ω–æ—Å—Ç—å –∑–Ω–∞—Ç—å –æ –µ–≥–æ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–∏ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç —Ä–µ–¥–∫–æ.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2017/01/30/picsimjs-matrichnaia-klaviatura/"&gt;–î–∞–ª–µ–µ&lt;/a&gt; –º–∞—Ç—Ä–∏—á–Ω–∞—è –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞.&lt;/p&gt;</content><category term="picsim"></category><category term="–ê–¶–ü"></category></entry><entry><title>PICSim.js - —Å–∏–º–≤–æ–ª—å–Ω—ã–π –¥–∏—Å–ø–ª–µ–π –Ω–∞ –±–∞–∑–µ HD44780</title><link href="http://proiot.ru/blog/posts/2017/01/27/picsimjs-simvolnyi-displei-na-baze-hd44780/" rel="alternate"></link><published>2017-01-27T00:00:00+02:00</published><updated>2017-01-27T00:00:00+02:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2017-01-27:/blog/posts/2017/01/27/picsimjs-simvolnyi-displei-na-baze-hd44780/</id><summary type="html">&lt;p&gt;–°—Ä–µ–¥–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö LCD –¥–∏—Å–ø–ª–µ–µ–≤ –Ω–∞–∏–±–æ–ª–µ–µ –ø—Ä–æ—Å—Ç—ã–º–∏ —è–≤–ª—è—é—Ç—Å—è —Ç–µ–∫—Å—Ç–æ–≤—ã–µ (—Å–∏–º–≤–æ–ª—å–Ω—ã–µ) –¥–∏—Å–ø–ª–µ–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ hd44780 —Å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–º 4-–∏–ª–∏ 8-–±–∏—Ç–Ω—ã–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º. –í —Å—Ä–∞–≤–Ω–µ–Ω–∏–∏ —Å &lt;a href="http://proiot.ru/blog/posts/2017/01/16/picsimjs-semisegmentnyi-indikator-i-preryvaniia/"&gt;7-—Å–µ–≥–º–µ–Ω—Ç–Ω—ã–º–∏&lt;/a&gt; –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞–º–∏, –¥–∏—Å–ø–ª–µ–∏ –Ω–∞ –±–∞–∑–µ HD44780 –æ–±–ª–∞–¥–∞—é—Ç –Ω–∞ –ø–æ—Ä—è–¥–æ–∫ –±–æ–ª—å—à–∏–º–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏ - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫ –Ω–∞ —ç–∫—Ä–∞–Ω–µ —É —Ä–∞–∑–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π - 1,2 –∏–ª–∏ 4; —á–∏—Å–ª–æ –≤–∏–¥–∏–º—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤ –≤ —Å—Ç—Ä–æ–∫–µ ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;p&gt;–°—Ä–µ–¥–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö LCD –¥–∏—Å–ø–ª–µ–µ–≤ –Ω–∞–∏–±–æ–ª–µ–µ –ø—Ä–æ—Å—Ç—ã–º–∏ —è–≤–ª—è—é—Ç—Å—è —Ç–µ–∫—Å—Ç–æ–≤—ã–µ (—Å–∏–º–≤–æ–ª—å–Ω—ã–µ) –¥–∏—Å–ø–ª–µ–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ hd44780 —Å –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–º 4-–∏–ª–∏ 8-–±–∏—Ç–Ω—ã–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º. –í —Å—Ä–∞–≤–Ω–µ–Ω–∏–∏ —Å &lt;a href="http://proiot.ru/blog/posts/2017/01/16/picsimjs-semisegmentnyi-indikator-i-preryvaniia/"&gt;7-—Å–µ–≥–º–µ–Ω—Ç–Ω—ã–º–∏&lt;/a&gt; –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞–º–∏, –¥–∏—Å–ø–ª–µ–∏ –Ω–∞ –±–∞–∑–µ HD44780 –æ–±–ª–∞–¥–∞—é—Ç –Ω–∞ –ø–æ—Ä—è–¥–æ–∫ –±–æ–ª—å—à–∏–º–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º–∏ - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—Ä–æ–∫ –Ω–∞ —ç–∫—Ä–∞–Ω–µ —É —Ä–∞–∑–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π - 1,2 –∏–ª–∏ 4; —á–∏—Å–ª–æ –≤–∏–¥–∏–º—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤ –≤ —Å—Ç—Ä–æ–∫–µ: 8,10,16,20,24,30,32 –∏–ª–∏ 40, –æ–¥–∏–Ω —Å–∏–º–≤–æ–ª –Ω–∞ –¥–∏—Å–ø–ª–µ–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –º–∞—Ç—Ä–∏—Ü—É —Ä–∞–∑–º–µ—Ä–æ–º 5x8 —Ç–æ—á–µ–∫, –∑–∞ –æ—Ç—Ä–∏—Å–æ–≤–∫—É —Å–∏–º–≤–æ–ª–æ–≤ –æ—Ç–≤–µ—á–∞–µ—Ç —Å–∞–º HD44780, —Ç–æ–∫ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ –±–µ–∑ –ø–æ–¥—Å–≤–µ—Ç–∫–∏ –æ—á–µ–Ω—å –º–∞–ª - 100‚Ä¶200 –º–∫–ê. –û–±—ã—á–Ω–æ —Ö–æ—Ä–æ—à–µ–π –ø—Ä–∞–∫—Ç–∏–∫–æ–π –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —è–≤–ª—è–µ—Ç—Å—è –æ–∑–Ω–∞–∫–æ–º–ª–µ–Ω–∏–µ —Å &lt;a href="https://www.sparkfun.com/datasheets/LCD/HD44780.pdf" rel="nofollow"&gt;–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π&lt;/a&gt; –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π.&lt;/p&gt;
&lt;p&gt;–î–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è HD44780 –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–µ–º –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –≤—ã–≤–æ–¥—ã:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;RS - –¥–∏—Å–ø–ª–µ–π –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, —á—Ç–æ –∏–º–µ–Ω–Ω–æ –∫ –Ω–µ–º—É –ø–æ—Å—Ç—É–ø–∞–µ—Ç (–¥–∞–Ω–Ω—ã–µ/–∫–æ–º–∞–Ω–¥–∞)  &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;RW - –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö (—á—Ç–µ–Ω–∏–µ/–∑–∞–ø–∏—Å—å)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;D0-D7 - —à–∏–Ω–∞ –∫–æ–º–∞–Ω–¥/–¥–∞–Ω–Ω—ã—Ö&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;E - —Å—Ç—Ä–æ–±–∏—Ä–æ–≤–∞–Ω–∏–µ (—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–æ–º–∞–Ω–¥/–¥–∞–Ω–Ω—ã—Ö)&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;–í—ã–≤–æ–¥ RW –º–æ–∂–Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–æ–æ–±—â–µ –µ—Å–ª–∏ –Ω–µ—Ç –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–π –Ω—É–∂–¥—ã –ø—Ä–∏–Ω–∏–º–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ –ñ–ö (—ç—Ç–æ –æ–±—ã—á–Ω–∞—è –ø—Ä–∞–∫—Ç–∏–∫–∞), –∑–∞—á–∞—Å—Ç—É—é –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ç–æ–ª—å–∫–æ –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ HD44780. –¢–æ–≥–¥–∞ –≤—Å—ë —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–≤–æ–¥–∏—Ç—Å—è –∫ —Å–ª–µ–¥—É—é—â–µ–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏. –í–µ–¥—É—â–∏–π –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –≤—ã—Å—Ç–∞–≤–ª—è–µ—Ç –ø—Ä–∏–∑–Ω–∞–∫ RS - 0 —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –∫–æ–º–∞–Ω–¥—ã, 1 - –Ω–∞ –¥–∞–Ω–Ω—ã–µ, –≤—ã—Å—Ç–∞–≤–ª—è–µ—Ç –Ω–∞ –ª–∏–Ω–∏—è—Ö DB7‚Ä¶DB0 8-—Ä–∞–∑—Ä—è–¥–Ω—ã–π –∫–æ–¥, –ø–æ—Å–ª–µ —á–µ–≥–æ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –Ω–∞ –≤—ã–≤–æ–¥–µ E —Å—Ç—Ä–æ–±–∏—Ä—É—é—â–∏–π –∏–º–ø—É–ª—å—Å (–∞–∫—Ç–∏–≤–Ω—ã–π —Ñ—Ä–æ–Ω—Ç ‚Äì –∑–∞–¥–Ω–∏–π). –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—É HD44780 –º–æ–∂–µ—Ç –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –∫–∞–∫–æ–µ-—Ç–æ –≤—Ä–µ–º—è —á—Ç–æ–±—ã –ø–µ—Ä–µ–≤–∞—Ä–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ –ø—Ä–∏–Ω—è—Ç–æ–π –∫–æ–º–∞–Ω–¥—ã - –≤—Å–µ —ç—Ç–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–æ –≤ –¥–æ–∫–µ —Ä–æ–≤–Ω–æ –∫–∞–∫ –∏ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫–æ–º–∞–Ω–¥ –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–æ—Å–ª–µ –ø–æ–¥–∞—á–∏ –ø–∏—Ç–∞–Ω–∏—è. –ü–æ—Ä–∞ –±—ã —É–∂–µ –Ω–∞–ø–∏—Å–∞—Ç—å –∫–∞–∫–æ–π-–Ω–∏–±—É–¥—å –∫–æ–¥:  &lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2017/01/27/picsimjs-simvolnyi-displei-na-baze-hd44780/config-4620.h"&gt;config.h&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2017/01/27/picsimjs-simvolnyi-displei-na-baze-hd44780/main.hex"&gt;hex&lt;/a&gt; | &lt;a href="http://mazko.github.io/picsim.js/db3045c11c2927f3da25c387a27e72d0"&gt;picsim.js&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2017/01/27/picsimjs-simvolnyi-displei-na-baze-hd44780/hello.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;HD44780.h&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#ifndef HD44780_h&lt;/span&gt;
&lt;span class="cp"&gt;#define HD44780_h&lt;/span&gt;

&lt;span class="c1"&gt;// commands&lt;/span&gt;
&lt;span class="cp"&gt;#define LCD_CLEARDISPLAY    0x01&lt;/span&gt;
&lt;span class="cp"&gt;#define LCD_RETURNHOME      0x02&lt;/span&gt;
&lt;span class="cp"&gt;#define LCD_ENTRYMODESET    0x04&lt;/span&gt;
&lt;span class="cp"&gt;#define LCD_DISPLAYCONTROL  0x08&lt;/span&gt;
&lt;span class="cp"&gt;#define LCD_CURSORSHIFT     0x10&lt;/span&gt;
&lt;span class="cp"&gt;#define LCD_FUNCTIONSET     0x20&lt;/span&gt;
&lt;span class="cp"&gt;#define LCD_SETCGRAMADDR    0x40&lt;/span&gt;
&lt;span class="cp"&gt;#define LCD_SETDDRAMADDR    0x80&lt;/span&gt;

&lt;span class="c1"&gt;// flags for display entry mode&lt;/span&gt;
&lt;span class="cp"&gt;#define LCD_ENTRYRIGHT          0x00&lt;/span&gt;
&lt;span class="cp"&gt;#define LCD_ENTRYLEFT           0x02&lt;/span&gt;
&lt;span class="cp"&gt;#define LCD_ENTRYSHIFTINCREMENT 0x01&lt;/span&gt;
&lt;span class="cp"&gt;#define LCD_ENTRYSHIFTDECREMENT 0x00&lt;/span&gt;

&lt;span class="c1"&gt;// flags for display on/off control&lt;/span&gt;
&lt;span class="cp"&gt;#define LCD_DISPLAYON     0x04&lt;/span&gt;
&lt;span class="cp"&gt;#define LCD_DISPLAYOFF    0x00&lt;/span&gt;
&lt;span class="cp"&gt;#define LCD_CURSORON      0x02&lt;/span&gt;
&lt;span class="cp"&gt;#define LCD_CURSOROFF     0x00&lt;/span&gt;
&lt;span class="cp"&gt;#define LCD_BLINKON       0x01&lt;/span&gt;
&lt;span class="cp"&gt;#define LCD_BLINKOFF      0x00&lt;/span&gt;

&lt;span class="c1"&gt;// flags for display/cursor shift&lt;/span&gt;
&lt;span class="cp"&gt;#define LCD_DISPLAYMOVE   0x08&lt;/span&gt;
&lt;span class="cp"&gt;#define LCD_CURSORMOVE    0x00&lt;/span&gt;
&lt;span class="cp"&gt;#define LCD_MOVERIGHT     0x04&lt;/span&gt;
&lt;span class="cp"&gt;#define LCD_MOVELEFT      0x00&lt;/span&gt;

&lt;span class="c1"&gt;// flags for function set&lt;/span&gt;
&lt;span class="cp"&gt;#define LCD_8BITMODE      0x10&lt;/span&gt;
&lt;span class="cp"&gt;#define LCD_4BITMODE      0x00&lt;/span&gt;
&lt;span class="cp"&gt;#define LCD_2LINE         0x08&lt;/span&gt;
&lt;span class="cp"&gt;#define LCD_1LINE         0x00&lt;/span&gt;
&lt;span class="cp"&gt;#define LCD_5x10DOTS      0x04&lt;/span&gt;
&lt;span class="cp"&gt;#define LCD_5x8DOTS       0x00&lt;/span&gt;

&lt;span class="cp"&gt;#endif&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ö–∞–∫ –≤–∏–¥–Ω–æ –≤—Å–µ–≥–æ –∫–æ–º–∞–Ω–¥ –Ω–µ —Ç–∞–∫ —É–∂ –∏ –º–Ω–æ–≥–æ &lt;code&gt;LCD_CLEARDISPLAY...LCD_SETDDRAMADDR&lt;/code&gt;, –Ω–æ –¥–ª—è –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –º–æ–≥—É—Ç –±—ã—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ–ª–∞–≥–∏ - –Ω–∞–ø—Ä–∏–º–µ—Ä –¥–ª—è &lt;code&gt;LCD_DISPLAYCONTROL&lt;/code&gt; —ç—Ç–æ &lt;code&gt;LCD_DISPLAYON...LCD_BLINKOFF&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;lcd.c&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;xc.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;HD44780.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="cp"&gt;#define LCD_EN_PIN  PORTEbits.RE1&lt;/span&gt;
&lt;span class="cp"&gt;#define LCD_RS_PIN  PORTEbits.RE2&lt;/span&gt;
&lt;span class="cp"&gt;#define LCD_PORT    PORTD&lt;/span&gt;

&lt;span class="cp"&gt;#define _LCD_DEFAULT_STATE_DISPLAYCONTROL (LCD_DISPLAYON | LCD_CURSORON | LCD_BLINKON)&lt;/span&gt;
&lt;span class="cp"&gt;#define _LCD_DEFAULT_STATE_DISPLAYMODE    (LCD_ENTRYLEFT | LCD_ENTRYSHIFTDECREMENT)&lt;/span&gt;

&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;_lcd_wr&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="kt"&gt;unsigned&lt;/span&gt; &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="n"&gt;val&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="n"&gt;LCD_PORT&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;val&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;_lcd_en_pulse&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="n"&gt;__delay_ms&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;LCD_EN_PIN&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;__delay_ms&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;LCD_EN_PIN&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;lcd_cmd&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="kt"&gt;unsigned&lt;/span&gt; &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="n"&gt;val&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="n"&gt;_lcd_wr&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;val&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;LCD_RS_PIN&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;_lcd_en_pulse&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;lcd_dat&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="kt"&gt;unsigned&lt;/span&gt; &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="n"&gt;val&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="n"&gt;_lcd_wr&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;val&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;LCD_RS_PIN&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;_lcd_en_pulse&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;lcd_init&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="c1"&gt;// SEE PAGE 45/46 FOR INITIALIZATION SPECIFICATION!&lt;/span&gt;
  &lt;span class="c1"&gt;// according to datasheet, we need at least 40ms after power rises above 2.7V&lt;/span&gt;
  &lt;span class="n"&gt;__delay_ms&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;40&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

  &lt;span class="n"&gt;LCD_RS_PIN&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;LCD_EN_PIN&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="c1"&gt;// this is according to the hitachi HD44780 datasheet&lt;/span&gt;
  &lt;span class="c1"&gt;// page 45 figure 23&lt;/span&gt;
  &lt;span class="n"&gt;lcd_cmd&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LCD_FUNCTIONSET&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;LCD_8BITMODE&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;__delay_ms&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;lcd_cmd&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LCD_FUNCTIONSET&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;LCD_8BITMODE&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;__delay_ms&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;lcd_cmd&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LCD_FUNCTIONSET&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;LCD_8BITMODE&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

  &lt;span class="c1"&gt;// finally, set # lines, font size, etc.&lt;/span&gt;
  &lt;span class="n"&gt;lcd_cmd&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LCD_FUNCTIONSET&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;LCD_8BITMODE&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;LCD_2LINE&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

  &lt;span class="c1"&gt;// turn the display off&lt;/span&gt;
  &lt;span class="n"&gt;lcd_cmd&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LCD_DISPLAYCONTROL&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;LCD_DISPLAYOFF&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

  &lt;span class="n"&gt;lcd_cmd&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LCD_CLEARDISPLAY&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt; &lt;span class="c1"&gt;// clear display, set cursor position to zero&lt;/span&gt;
  &lt;span class="n"&gt;__delay_ms&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;             &lt;span class="c1"&gt;// this command takes a long time!&lt;/span&gt;

  &lt;span class="c1"&gt;// turn the display on with default cursor and blinking&lt;/span&gt;
  &lt;span class="n"&gt;lcd_cmd&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LCD_DISPLAYCONTROL&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;_LCD_DEFAULT_STATE_DISPLAYCONTROL&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

  &lt;span class="c1"&gt;// Initialize to default text direction (for romance languages)&lt;/span&gt;
  &lt;span class="n"&gt;lcd_cmd&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LCD_ENTRYMODESET&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;_LCD_DEFAULT_STATE_DISPLAYMODE&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ü—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ &lt;code&gt;lcd_init()&lt;/code&gt; –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–±–ª—é–¥–∞—Ç—å —Ä–∏—Ç—É–∞–ª —Å –≤—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –∑–∞–¥–µ—Ä–∂–∫–∞–º–∏, –æ–ø–∏—Å–∞–Ω–Ω—ã–π –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∫ HD44780.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;main.c&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cm"&gt;/*&lt;/span&gt;
&lt;span class="cm"&gt;  xc8 --chip=18f4620 main.c&lt;/span&gt;
&lt;span class="cm"&gt;*/&lt;/span&gt;

&lt;span class="cp"&gt;#define _XTAL_FREQ 5e4&lt;/span&gt;

&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;xc.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;config-4620.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;lcd.c&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;lcd_print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;str&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;str&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;lcd_dat&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;str&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

  &lt;span class="c1"&gt;// lcd&lt;/span&gt;
  &lt;span class="n"&gt;PORTD&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;TRISD&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;PORTE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;TRISE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="n"&gt;lcd_init&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;

  &lt;span class="n"&gt;lcd_cmd&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LCD_SETDDRAMADDR&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;    &lt;span class="c1"&gt;// first line 0 column&lt;/span&gt;
  &lt;span class="n"&gt;lcd_print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Hey PICSim.js !&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;lcd_cmd&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LCD_SETDDRAMADDR&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mh"&gt;0x40&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt; &lt;span class="c1"&gt;// second line 0 column&lt;/span&gt;
  &lt;span class="n"&gt;lcd_print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Life is good :)&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

  &lt;span class="k"&gt;while&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{}&lt;/span&gt;

  &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–£ PIC18 –¥–æ–≤–æ–ª—å–Ω–æ –º–Ω–æ–≥–æ –±–∏—Ç–æ–≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏, –ø–æ—ç—Ç–æ–º—É –¥–ª—è –Ω–∏—Ö –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª &lt;code&gt;config.h&lt;/code&gt;. –ü–µ—Ä–≤—ã–º –¥–µ–ª–æ–º —Å –ø–æ–º–æ—â—å—é —É–ø—Ä–∞–≤–ª—è—é—â–∏—Ö –∫–æ–º–∞–Ω–¥ &lt;code&gt;lcd_cmd&lt;/code&gt; –¥–∏—Å–ø–ª–µ–π –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è, –∑–∞—Ç–µ–º —Ç–µ–∫—Å—Ç –ø–µ—Ä–µ—Å—ã–ª–∞–µ—Ç—Å—è –≤ –≤–∏–¥–µ –¥–∞–Ω–Ω—ã—Ö &lt;code&gt;lcd_dat&lt;/code&gt;. –•–æ—Ç—è –≤–∏–¥–∏–º—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤ –≤ —Å—Ç—Ä–æ–∫–µ –¥–∏—Å–ø–ª–µ—è –≤ –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ 16, –≤—Å–µ–≥–æ –∏—Ö —Ç–∞–º 64 (0x40) - –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø—Ä–æ—Å—Ç–æ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏ HD44780 –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞.&lt;/p&gt;
&lt;p&gt;–ü—Ä–∏ —Ä–∞–±–æ—Ç–µ HD44780 —Ç—Ä—É–¥–Ω–æ –¥–µ—Ä–∂–∞—Ç—å –≤—Å–µ —É–ø—Ä–∞–≤–ª—è—é—â–∏–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ –≤ –≥–æ–ª–æ–≤–µ, –ø–æ—ç—Ç–æ–º—É –∫–æ–¥ –Ω–µ –ø–æ–º–µ—à–∞–µ—Ç —É–ø—Ä–æ—Å—Ç–∏—Ç—å, –Ω–∞–ø—Ä–∏–º–µ—Ä –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –≤–∏–¥—É arduino –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ ¬´LiquidCrystal¬ª.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2017/01/27/picsimjs-simvolnyi-displei-na-baze-hd44780/config-4620.h"&gt;config.h&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2017/01/27/picsimjs-simvolnyi-displei-na-baze-hd44780/liquid-crystal.c"&gt;liquid-crystal.c&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2017/01/27/picsimjs-simvolnyi-displei-na-baze-hd44780/showtime.hex"&gt;hex&lt;/a&gt; | &lt;a href="http://mazko.github.io/picsim.js/1889b71bb6c0df4349565d08a7c01ddd"&gt;picsim.js&lt;/a&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cm"&gt;/*&lt;/span&gt;
&lt;span class="cm"&gt;  xc8 --chip=18f4620 main.c&lt;/span&gt;
&lt;span class="cm"&gt;*/&lt;/span&gt;

&lt;span class="cp"&gt;#define _XTAL_FREQ 5e4&lt;/span&gt;

&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;xc.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;stdint.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;config-4620.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;liquid-crystal.c&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;clear_print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;str&lt;/span&gt;&lt;span class="p"&gt;){&lt;/span&gt;
  &lt;span class="n"&gt;lcd_clear&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt; &lt;span class="c1"&gt;// clear display, set cursor position to zero&lt;/span&gt;
  &lt;span class="n"&gt;lcd_print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;str&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="c1"&gt;// lcd&lt;/span&gt;
  &lt;span class="n"&gt;PORTD&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;TRISD&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;PORTE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;TRISE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="n"&gt;lcd_init&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;

  &lt;span class="k"&gt;while&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;clear_print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;PICSim.js :)&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;lcd_set_cursor&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt; &lt;span class="c1"&gt;// second line third column&lt;/span&gt;
    &lt;span class="n"&gt;lcd_print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Show time !&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;__delay_ms&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;4444&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="n"&gt;clear_print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;No CURSOR&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;lcd_no_cursor&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;  &lt;span class="c1"&gt;// hide cursor&lt;/span&gt;
    &lt;span class="n"&gt;__delay_ms&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2000&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;lcd_cursor&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;     &lt;span class="c1"&gt;// show cursor&lt;/span&gt;

    &lt;span class="n"&gt;clear_print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;No BLINK&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;lcd_no_blink&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;  &lt;span class="c1"&gt;// blink OFF&lt;/span&gt;
    &lt;span class="n"&gt;__delay_ms&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2000&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;lcd_blink&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;     &lt;span class="c1"&gt;// blink ON&lt;/span&gt;

    &lt;span class="n"&gt;clear_print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;ON/OFF&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="n"&gt;lcd_display&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;    &lt;span class="c1"&gt;// display ON&lt;/span&gt;
      &lt;span class="n"&gt;__delay_ms&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1000&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
      &lt;span class="n"&gt;lcd_no_display&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt; &lt;span class="c1"&gt;// display OFF&lt;/span&gt;
      &lt;span class="n"&gt;__delay_ms&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1000&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="n"&gt;lcd_display&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;

    &lt;span class="n"&gt;clear_print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;SCROLL right&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="n"&gt;__delay_ms&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;500&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
      &lt;span class="n"&gt;lcd_scroll_display_right&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="n"&gt;clear_print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;SCROLL left&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="n"&gt;__delay_ms&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;500&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
      &lt;span class="n"&gt;lcd_scroll_display_left&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="c1"&gt;// PICSimLab: not implemented ?&lt;/span&gt;
    &lt;span class="c1"&gt;// lcd_right_to_left()&lt;/span&gt;
    &lt;span class="c1"&gt;// lcd_autoscroll()&lt;/span&gt;
    &lt;span class="c1"&gt;// lcd_create_char()&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;

  &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–î–∞–Ω–Ω—ã–π –∫–æ–¥ –∑–∞—Ç–æ—á–µ–Ω –Ω–∞ –¥–∏—Å–ø–ª–µ–π, —Å–æ—Å—Ç–æ—è—â–∏–π –∏–∑ –¥–≤—É—Ö —Å—Ç—Ä–æ–∫ - —ç—Ç–æ –∑–∞–¥–∞—ë—Ç—Å—è –Ω–∞ —ç—Ç–∞–ø–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –æ–¥–∏–Ω —Ä–∞–∑ &lt;code&gt;LCD_8BITMODE | LCD_2LINE&lt;/code&gt;. –¢–∞–∫–∂–µ –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏ –Ω–æ–≥ –≤–≤–æ–¥–∞-–≤—ã–≤–æ–¥–∞ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ –º–æ–∂–Ω–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ª–µ–≥–∫–æ –ø–µ—Ä–µ–π—Ç–∏ —Å 8-–±–∏—Ç–Ω–æ–≥–æ –Ω–∞ 4-–±–∏—Ç–Ω—ã–π &lt;code&gt;LCD_4BITMODE&lt;/code&gt; —Ñ–æ—Ä–º–∞—Ç –ø–µ—Ä–µ–¥–∞—á–∏ –∫–æ–º–∞–Ω–¥/–¥–∞–Ω–Ω—ã—Ö, –ø–æ–ø—É—Ç–Ω–æ –Ω–µ–º–Ω–æ–≥–æ –ø–æ–¥–ø—Ä–∞–≤–∏–≤ —Ñ—É–Ω–∫—Ü–∏—é &lt;code&gt;_lcd_wr&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2017/01/27/picsimjs-simvolnyi-displei-na-baze-hd44780/ui.gif" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2017/01/28/picsimjs-analogo-tsifrovoi-preobrazovatel/"&gt;–î–∞–ª–µ–µ&lt;/a&gt; –∞–Ω–∞–ª–æ–≥–æ-—Ü–∏—Ñ—Ä–æ–≤–æ–π –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å (–ê–¶–ü).&lt;/p&gt;</content><category term="picsim"></category><category term="HD44780"></category></entry><entry><title>PICSim.js - —Å—Ç–æ—Ä–æ–∂–µ–≤–æ–π —Ç–∞–π–º–µ—Ä –∏ —Å–ø—è—â–∏–π —Ä–µ–∂–∏–º</title><link href="http://proiot.ru/blog/posts/2017/01/17/picsimjs-storozhevoi-taimer-i-spiashchii-rezhim/" rel="alternate"></link><published>2017-01-17T00:00:00+02:00</published><updated>2017-01-17T00:00:00+02:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2017-01-17:/blog/posts/2017/01/17/picsimjs-storozhevoi-taimer-i-spiashchii-rezhim/</id><summary type="html">&lt;p&gt;–°—Ç–æ—Ä–æ–∂–µ–≤–æ–π —Ç–∞–π–º–µ—Ä (Watchdog Timer - ¬´—Å—Ç–æ—Ä–æ–∂–µ–≤–æ–π –ø—ë—Å¬ª) –≤ PIC –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞—Ö –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –≤–Ω–µ—à–Ω–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –∏–∑ —Å–µ–±—è –æ–±—ã—á–Ω—ã–π &lt;a href="http://proiot.ru/blog/posts/2016/12/22/ngspicejs-schetchiki-i-deliteli-chastoty/"&gt;—Å—á—ë—Ç—á–∏–∫&lt;/a&gt;, –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ —Ç–∞–∫—Ç–∏—Ä—É–µ–º—ã–π –æ—Ç –∞–≤—Ç–æ–Ω–æ–º–Ω–æ–≥–æ RC-–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞. –°—Ç–æ—Ä–æ–∂–µ–≤–æ–π —Ç–∞–π–º–µ—Ä –º–æ–∂–Ω–æ –≥–ª–æ–±–∞–ª—å–Ω–æ –≤–∫–ª—é—á–∞—Ç—å/–æ—Ç–∫–ª—é—á–∞—Ç—å –≤ –±–∏—Ç–∞—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ &lt;code&gt;#pragma config WDTE = OFF|ON&lt;/code&gt; - –µ—Å–ª–∏ –≤–∫–ª—é—á—ë–Ω &lt;code&gt;WDTE = ON&lt;/code&gt;, —Ç–æ –≤ —Å–ª—É—á–∞–µ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏—è —Å—á—ë—Ç—á–∏–∫–∞ –æ–±—ã—á–Ω–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–ø–ø–∞—Ä–∞—Ç–Ω—ã–π ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;p&gt;–°—Ç–æ—Ä–æ–∂–µ–≤–æ–π —Ç–∞–π–º–µ—Ä (Watchdog Timer - ¬´—Å—Ç–æ—Ä–æ–∂–µ–≤–æ–π –ø—ë—Å¬ª) –≤ PIC –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞—Ö –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –≤–Ω–µ—à–Ω–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –∏–∑ —Å–µ–±—è –æ–±—ã—á–Ω—ã–π &lt;a href="http://proiot.ru/blog/posts/2016/12/22/ngspicejs-schetchiki-i-deliteli-chastoty/"&gt;—Å—á—ë—Ç—á–∏–∫&lt;/a&gt;, –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ —Ç–∞–∫—Ç–∏—Ä—É–µ–º—ã–π –æ—Ç –∞–≤—Ç–æ–Ω–æ–º–Ω–æ–≥–æ RC-–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞. –°—Ç–æ—Ä–æ–∂–µ–≤–æ–π —Ç–∞–π–º–µ—Ä –º–æ–∂–Ω–æ –≥–ª–æ–±–∞–ª—å–Ω–æ –≤–∫–ª—é—á–∞—Ç—å/–æ—Ç–∫–ª—é—á–∞—Ç—å –≤ –±–∏—Ç–∞—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ &lt;code&gt;#pragma config WDTE = OFF|ON&lt;/code&gt; - –µ—Å–ª–∏ –≤–∫–ª—é—á—ë–Ω &lt;code&gt;WDTE = ON&lt;/code&gt;, —Ç–æ –≤ —Å–ª—É—á–∞–µ –ø–µ—Ä–µ–ø–æ–ª–Ω–µ–Ω–∏—è —Å—á—ë—Ç—á–∏–∫–∞ –æ–±—ã—á–Ω–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞–ø–ø–∞—Ä–∞—Ç–Ω—ã–π —Å–±—Ä–æ—Å –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞, —Ö–æ—Ç—è —Ç–∞–∫–∂–µ –≤–æ–∑–º–æ–∂–µ–Ω –æ—Å–æ–±—ã–π —Å–ª—É—á–∞–π –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å—Ç–æ—Ä–æ–∂–µ–≤–æ–≥–æ —Ç–∞–π–º–µ—Ä–∞ - —á—Ç–æ–±—ã –≤—ã–≤–µ—Å—Ç–∏ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –∏–∑ —Å–ø—è—â–µ–≥–æ —Ä–µ–∂–∏–º–∞.&lt;/p&gt;
&lt;p&gt;–ó–∞—á–µ–º –Ω—É–∂–µ–Ω —Å—Ç–æ—Ä–æ–∂–µ–≤–æ–π —Ç–∞–π–º–µ—Ä ? –ü—Ä–æ–≥—Ä–∞–º–º—ã –≤ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞—Ö –Ω–∞–ø—Ä—è–º—É—é –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É—é—Ç —Å –∂–µ–ª–µ–∑–æ–º –∏ –∏–Ω–æ–≥–¥–∞ —Å–ª—É—á–∞—é—Ç—Å—è –≤–Ω–µ—à—Ç–∞—Ç–Ω—ã–µ —Å–∏—Ç—É–∞—Ü–∏–∏, –∫–æ–≥–¥–∞ –ø–æ —Ç–µ–º –∏–ª–∏ –∏–Ω—ã–º –ø—Ä–∏—á–∏–Ω–∞–º –ø—Ä–æ–≥—Ä–∞–º–º–∞ –º–æ–∂–µ—Ç –∑–∞–≤–∏—Å–Ω—É—Ç—å - –ø—Ä–∏—á–∏–Ω–æ–π —Ç–æ–º—É –º–æ–∂–µ—Ç –±—ã—Ç—å –∫–∞–∫ –∞–ø–ø–∞—Ä–∞—Ç–Ω—ã–π —Å–±–æ–π, —Ç–∞–∫ –∏ –æ—à–∏–±–∫–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–∞. –í —Ç–∞–∫–∏—Ö —Å–ª—É—á–∞—è—Ö –Ω—É–∂–Ω–æ –∏–¥—Ç–∏ –∏ —Ä—É—á–∫–∞–º–∏ –≤—ã–¥–µ—Ä–≥–∏–≤–∞—Ç—å –ø–∏—Ç–∞–Ω–∏–µ –∏–ª–∏ –Ω–∞–∂–∏–º–∞—Ç—å –∫–Ω–æ–ø–æ—á–∫—É —Å–±—Ä–æ—Å–∞. –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–æ–π —ç—Ç–æ–º—É –∫–∞–∫ —Ä–∞–∑ –∏ —è–≤–ª—è–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å—Ç–æ—Ä–æ–∂–µ–≤–æ–≥–æ —Ç–∞–π–º–µ—Ä–∞, –∫–æ—Ç–æ—Ä—ã–π —Å–±—Ä–æ—Å–∏—Ç –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2017/01/17/picsimjs-storozhevoi-taimer-i-spiashchii-rezhim/main.hex"&gt;hex&lt;/a&gt; | &lt;a href="http://mazko.github.io/picsim.js/3cfca08cb95e5bb6ba688747d58168d2"&gt;picsim.js&lt;/a&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cm"&gt;/*&lt;/span&gt;
&lt;span class="cm"&gt;  xc8 --chip=16f648A main.c&lt;/span&gt;
&lt;span class="cm"&gt;*/&lt;/span&gt;

&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;xc.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;stdint.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="cp"&gt;#pragma config WDTE = ON&lt;/span&gt;

&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

  &lt;span class="c1"&gt;// The WDT has a nominal time-out period of 18 ms (with no prescaler).&lt;/span&gt;
  &lt;span class="c1"&gt;// If longer time-out periods are desired, a postscaler with a division ratio&lt;/span&gt;
  &lt;span class="c1"&gt;// of up to 1:128 can be assigned to the WDT under&lt;/span&gt;
  &lt;span class="c1"&gt;// software control by writing to the OPTION register. Thus,&lt;/span&gt;
  &lt;span class="c1"&gt;// time-out periods up to 2.3 seconds can be realized&lt;/span&gt;

  &lt;span class="n"&gt;OPTION_REGbits&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;PS0&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;OPTION_REGbits&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;PS1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;OPTION_REGbits&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;PS2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="c1"&gt;// 1:128; 2.3 sec&lt;/span&gt;
  &lt;span class="n"&gt;OPTION_REGbits&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;PSA&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="c1"&gt;// prescaler is assigned to watchdog&lt;/span&gt;

  &lt;span class="c1"&gt;// looks like STATUS [TO, PD] are not implemented in original PICSim - always 0&lt;/span&gt;
  &lt;span class="n"&gt;PORTB&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;STATUS&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;PORTA&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;TRISB&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;TRISA&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="n"&gt;RA0&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;uint16_t&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;333&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;;);&lt;/span&gt; &lt;span class="c1"&gt;// simple delay&lt;/span&gt;
  &lt;span class="n"&gt;RA0&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="k"&gt;while&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="c1"&gt;// CLRWDT();&lt;/span&gt;
    &lt;span class="c1"&gt;// do something useful&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;

  &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–π –ø–µ—Ä–∏–æ–¥ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è —Å—Ç–æ—Ä–æ–∂–µ–≤–æ–≥–æ —Ç–∞–π–º–µ—Ä–∞ —É PIC16F648A –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ 18 –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥, &lt;a href="https://bc.js.org/"&gt;–º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π&lt;/a&gt; &lt;code&gt;0.018*128=2.304&lt;/code&gt; —Å–µ–∫—É–Ω–¥—ã. –¢–∞–∫ –∫–∞–∫ –≤ –¥–∞–Ω–Ω–æ–º –ø—Ä–∏–º–µ—Ä–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç –∑–∞–±—ã–ª –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ –æ—á–∏—â–∞—Ç—å —Å—á—ë—Ç—á–∏–∫ —Å—Ç–æ—Ä–æ–∂–µ–≤–æ–≥–æ —Ç–∞–π–º–µ—Ä–∞ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π &lt;code&gt;CLRWDT();&lt;/code&gt; —Ç–æ —á–µ—Ä–µ–∑ –∫–∞–∂–¥—ã–µ 2.3 —Å–µ–∫—É–Ω–¥—ã –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –∏ –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ —Å–≤–µ—Ç–æ–¥–∏–æ–¥ RA0 –º–∏–≥–∞–µ—Ç. –ï—Å–ª–∏ &lt;a href="http://mazko.github.io/picsim.js/098c4473a3356f0082c583d299b8eb95"&gt;—Ä–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å&lt;/a&gt; &lt;code&gt;// CLRWDT();&lt;/code&gt; —Å–≤–µ—Ç–æ–¥–∏–æ–¥ RA0 –∫–æ–Ω–µ—á–Ω–æ –∂–µ –±—É–¥–µ—Ç —Å–≤–µ—Ç–∏—Ç—å—Å—è –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ. –ü—Ä–∏—á–∏–Ω—É —Å–±—Ä–æ—Å–∞ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ –ø–æ –∏–¥–µ–µ –º–æ–∂–Ω–æ —É–∑–Ω–∞—Ç—å –ø–æ —Å–æ—Å—Ç–æ—è–Ω–∏—é —Ñ–ª–∞–≥–æ–≤ TO, PD –≤ —Ä–µ–≥–∏—Å—Ç—Ä–µ STATUS, —Ö–æ—Ç—è –ø–æ—Ö–æ–∂–µ –≤ picsim —ç—Ç–æ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2017/01/17/picsimjs-storozhevoi-taimer-i-spiashchii-rezhim/ui.gif" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–ß—Ç–æ –∫–∞—Å–∞–µ—Ç—Å—è —Å–ø—è—â–∏–π —Ä–µ–∂–∏–º–∞, —Ç–æ –æ–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —Å–Ω–∏–∑–∏—Ç—å —ç–Ω–µ—Ä–≥–æ–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ. –î–ª—è –ø–µ—Ä–µ—Ö–æ–¥–∞ –∞ —Å–ø—è—â–∏–π —Ä–µ–∂–∏–º —É PIC –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤ –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω–∞ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ &lt;code&gt;SPEEP()&lt;/code&gt;, –ø–æ—Å–ª–µ –∫–æ—Ç–æ—Ä–æ–π —Ç–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ –ø—Ä–µ–∫—Ä–∞—â–∞—é—Ç—Å—è, —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤—Å–µ—Ö —Ä–µ–≥–∏—Å—Ç—Ä–æ–≤ –≤ —Ç–æ–º —á–∏—Å–ª–µ –∏ –ø–æ—Ä—Ç–æ–≤ –≤–≤–æ–¥–∞-–≤—ã–≤–æ–¥–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –∏ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ —ç–Ω–µ—Ä–≥–∏–∏ —Å–≤–æ–¥–∏—Ç—Å—è –∫ –º–∏–Ω–∏–º—É–º—É - –æ–±—ã—á–Ω–æ –µ–¥–∏–Ω–∏—Ü—ã –º–∏–∫—Ä–æ–∞–º–ø–µ—Ä. –í—ã–π—Ç–∏ –∏–∑ —Å–ø—è—â–µ–≥–æ —Ä–µ–∂–∏–º–∞ –º–æ–∂–Ω–æ –ª–∏–±–æ –ø–æ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—é –ª–∏–±–æ –ø—Ä–∏ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–∏ —Å—Ç–æ—Ä–æ–∂–µ–≤–æ–≥–æ —Ç–∞–π–º–µ—Ä–∞.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2017/01/17/picsimjs-storozhevoi-taimer-i-spiashchii-rezhim/main-sleep.hex"&gt;hex&lt;/a&gt; | &lt;a href="http://mazko.github.io/picsim.js/7e2d324a527f5bc49a6b891bd4dd7ec7"&gt;picsim.js&lt;/a&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cm"&gt;/*&lt;/span&gt;
&lt;span class="cm"&gt;  xc8 --chip=16f648A main.c&lt;/span&gt;
&lt;span class="cm"&gt;*/&lt;/span&gt;

&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;xc.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;stdint.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="cp"&gt;#pragma config WDTE = ON&lt;/span&gt;

&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

  &lt;span class="n"&gt;OPTION_REGbits&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;PS1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;OPTION_REGbits&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;PS2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;OPTION_REGbits&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;PS0&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="c1"&gt;// 1:64; 1.152 sec&lt;/span&gt;
  &lt;span class="n"&gt;OPTION_REGbits&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;PSA&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="c1"&gt;// prescaler is assigned to watchdog&lt;/span&gt;

  &lt;span class="n"&gt;PORTB&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;TRISB&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="n"&gt;last_led&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="k"&gt;while&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;SLEEP&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
    &lt;span class="n"&gt;last_led&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&amp;lt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="n"&gt;last_led&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="n"&gt;last_led&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="n"&gt;PORTB&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;last_led&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;

  &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–í –¥–∞–Ω–Ω–æ–º –ø—Ä–∏–º–µ—Ä–µ –≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –Ω–µ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –∞ –ø—Ä–æ—Å—ã–ø–∞–µ—Ç—Å—è –æ—Ç —Å—Ç–æ—Ä–æ–∂–µ–≤–æ–≥–æ —Ç–∞–π–º–µ—Ä–∞ –∫–∞–∂–¥—ã–µ 1.152 —Å–µ–∫—É–Ω–¥—ã, –ø–µ—Ä–µ–¥–≤–∏–≥–∞–µ—Ç —Å–≤–µ—Ç–æ–¥–∏–æ–¥ –∏ –∑–∞—Å—ã–ø–∞–µ—Ç –∑–∞–Ω–æ–≤–æ. –û—Å–Ω–æ–≤–Ω–æ–µ —ç–Ω–µ—Ä–≥–æ–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ —Å–≤–µ—á–µ–Ω–∏–µ —Å–≤–µ—Ç–æ–¥–∏–æ–¥–∞.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2017/01/17/picsimjs-storozhevoi-taimer-i-spiashchii-rezhim/ui-sleep.gif" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–°—Ç–æ—Ä–æ–∂–µ–≤–æ–π —Ç–∞–π–º–µ—Ä —è–≤–ª—è–µ—Ç—Å—è –æ—á–µ–Ω—å –ø—Ä–æ—Å—Ç—ã–º –∏ –ø–æ–ª–µ–∑–Ω—ã–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–º, –ø—Ä–∏–¥–∞—é—â–∏–º –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏ —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º–æ–π —Å–∏—Å—Ç–µ–º–µ. –û—Å–æ–±–µ–Ω–Ω–æ –∫–æ–≥–¥–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –ø–æ–∫–∏–¥–∞–µ—Ç –ø—Ä–µ–¥–µ–ª—ã —É—é—Ç–Ω–æ–π –ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏–∏ –∏ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –∏–∑ –±–µ—Ä–µ–∂–Ω—ã—Ö —Ä—É–∫ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –∫ —Ä–µ–∞–ª—å–Ω—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2017/01/27/picsimjs-simvolnyi-displei-na-baze-hd44780/"&gt;–î–∞–ª–µ–µ&lt;/a&gt; –ø–æ–ø—Ä–æ–±—É–µ–º –ª–∏–Ω–µ–π–∫—É PIC18 –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤ –∏ –Ω–∞—á–Ω—ë–º —Å —Å–∏–º–≤–æ–ª—å–Ω–æ–≥–æ LCD –¥–∏—Å–ø–ª–µ—è –Ω–∞ –±–∞–∑–µ –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ HD44780.&lt;/p&gt;</content><category term="picsim"></category></entry><entry><title>PICSim.js - —Å–µ–º–∏—Å–µ–≥–º–µ–Ω—Ç–Ω—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∏ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è</title><link href="http://proiot.ru/blog/posts/2017/01/16/picsimjs-semisegmentnyi-indikator-i-preryvaniia/" rel="alternate"></link><published>2017-01-16T00:00:00+02:00</published><updated>2017-01-16T00:00:00+02:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2017-01-16:/blog/posts/2017/01/16/picsimjs-semisegmentnyi-indikator-i-preryvaniia/</id><summary type="html">&lt;p&gt;–°–µ–º–∏—Å–µ–≥–º–µ–Ω—Ç–Ω—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã - –Ω–∞–∏–±–æ–ª–µ–µ –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± –¥–ª—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Ü–∏—Ñ—Ä–æ–≤–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –≤ –≤–∏–¥–µ –∞—Ä–∞–±—Å–∫–∏—Ö —Ü–∏—Ñ—Ä –∏ –¥–∞–∂–µ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –±—É–∫–≤ (–¥–ª—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –±—É–∫–≤ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–µ –º–Ω–æ–≥–æ—Å–µ–≥–º–µ–Ω—Ç–Ω—ã–µ –∏ –º–∞—Ç—Ä–∏—á–Ω—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã). –°–≤–µ—Ç–æ–¥–∏–æ–¥–Ω—ã–µ —Å–µ–º–∏—Å–µ–≥–º–µ–Ω—Ç–Ω—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –∏–º–µ—é—Ç –≤—ã—Å–æ–∫—É—é —è—Ä–∫–æ—Å—Ç—å, —à–∏—Ä–æ–∫–∏–π –¥–∏–∞–ø–∞–∑–æ–Ω —Ä–∞–±–æ—á–∏—Ö —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä, –Ω–∏–∑–∫—É—é —Å—Ç–æ–∏–º–æ—Å—Ç—å –∏ –æ—á–µ–Ω—å –ø—Ä–æ—Å—Ç—ã –≤ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–∏. –ì–ª–∞–≤–Ω—ã–º–∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∞–º–∏ —Å–≤–µ—Ç–æ–¥–∏–æ–¥–Ω—ã—Ö –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ —è–≤–ª—è—é—Ç—Å—è ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;p&gt;–°–µ–º–∏—Å–µ–≥–º–µ–Ω—Ç–Ω—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã - –Ω–∞–∏–±–æ–ª–µ–µ –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± –¥–ª—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Ü–∏—Ñ—Ä–æ–≤–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –≤ –≤–∏–¥–µ –∞—Ä–∞–±—Å–∫–∏—Ö —Ü–∏—Ñ—Ä –∏ –¥–∞–∂–µ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –±—É–∫–≤ (–¥–ª—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –±—É–∫–≤ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–µ –º–Ω–æ–≥–æ—Å–µ–≥–º–µ–Ω—Ç–Ω—ã–µ –∏ –º–∞—Ç—Ä–∏—á–Ω—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã). –°–≤–µ—Ç–æ–¥–∏–æ–¥–Ω—ã–µ —Å–µ–º–∏—Å–µ–≥–º–µ–Ω—Ç–Ω—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –∏–º–µ—é—Ç –≤—ã—Å–æ–∫—É—é —è—Ä–∫–æ—Å—Ç—å, —à–∏—Ä–æ–∫–∏–π –¥–∏–∞–ø–∞–∑–æ–Ω —Ä–∞–±–æ—á–∏—Ö —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä, –Ω–∏–∑–∫—É—é —Å—Ç–æ–∏–º–æ—Å—Ç—å –∏ –æ—á–µ–Ω—å –ø—Ä–æ—Å—Ç—ã –≤ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–∏. –ì–ª–∞–≤–Ω—ã–º–∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∞–º–∏ —Å–≤–µ—Ç–æ–¥–∏–æ–¥–Ω—ã—Ö –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ —è–≤–ª—è—é—Ç—Å—è –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –≤—ã—Å–æ–∫–æ–µ —ç–Ω–µ—Ä–≥–æ–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –∏ —Å–ª–∞–±–∞—è –≤–∏–¥–∏–º–æ—Å—Ç—å –ø—Ä–∏ —è—Ä–∫–æ–º –æ—Å–≤–µ—â–µ–Ω–∏–∏, —Ö–æ—Ç—è –Ω–∞ –Ω–∞—à–µ–º –º–æ–¥–Ω–æ–º —Ü–≤–µ—Ç–Ω–æ–º –º–æ–±–∏–ª—å–Ω–æ–º —Ç–µ–ª–µ—Ñ–æ–Ω–µ —Ç–æ–∂–µ –Ω–∏—á–µ–≥–æ –Ω–µ –≤–∏–¥–Ω–æ –Ω–∞ —Å–æ–ª–Ω—ã—à–∫–µ –¥–Ω—ë–º :)&lt;/p&gt;
&lt;p&gt;–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–∏–≤–Ω–æ —Å–≤–µ—Ç–æ–¥–∏–æ–¥–Ω—ã–π —Å–µ–º–∏—Å–µ–≥–º–µ–Ω—Ç–Ω—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –≥—Ä—É–ø–ø—É –∏–∑ —Å–µ–º–∏ —Å–≤–µ—Ç–æ–¥–∏–æ–¥–æ–≤, —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–Ω—ã—Ö –≤ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ. –í–∫–ª—é—á–∞—è –∏—Ö –≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∫–æ–º–±–∏–Ω–∞—Ü–∏—è—Ö –º–æ–∂–Ω–æ —Å–æ—Å—Ç–∞–≤–∏—Ç—å —É–ø—Ä–æ—â—ë–Ω–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ü–∏—Ñ—Ä 0..9. –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã —Ä–∞–∑–ª–∏—á–∞—é—Ç—Å—è –ø–æ —Ä–∞–∑–º–µ—Ä—É, —Ç–∏–ø—É —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å–≤–µ—Ç–æ–¥–∏–æ–¥–æ–≤ - –æ–±—â–∏–π –∞–Ω–æ–¥, –æ–±—â–∏–π –∫–∞—Ç–æ–¥, –ø–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º—ã—Ö —Ä–∞–∑—Ä—è–¥–æ–≤ - –æ–¥–Ω–æ—Ä–∞–∑—Ä—è–¥–Ω—ã–µ, –¥–≤—É—Ö—Ä–∞–∑—Ä—è–¥–Ω—ã–µ –∏ –±–æ–ª–µ–µ, –ø–æ —è—Ä–∫–æ—Å—Ç–∏ —Å–≤–µ—á–µ–Ω–∏—è –∏ –ø–æ —Ü–≤–µ—Ç—É - –∫—Ä–∞—Å–Ω—ã–µ, –∂–µ–ª—Ç—ã–µ, –∑–µ–ª–µ–Ω—ã–µ –∏ —Ç.–¥. &lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2017/01/16/picsimjs-semisegmentnyi-indikator-i-preryvaniia/7.hex"&gt;hex&lt;/a&gt; | &lt;a href="http://mazko.github.io/picsim.js/69cc6064062b774abdb3734521cf01a8"&gt;picsim.js&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;display7.c&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;stdint.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="nf"&gt;display7&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="k"&gt;switch&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;value&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
      &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mh"&gt;0xEE&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
      &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mh"&gt;0x28&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
      &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mh"&gt;0xCD&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
      &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mh"&gt;0x6D&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
      &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mh"&gt;0x2B&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
      &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mh"&gt;0x67&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
      &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mh"&gt;0xE7&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
      &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mh"&gt;0x2C&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
      &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mh"&gt;0xEF&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="mi"&gt;9&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
      &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mh"&gt;0x6F&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
      &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mh"&gt;0xAF&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="mi"&gt;11&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
      &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mh"&gt;0xE3&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
      &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mh"&gt;0xC6&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="mi"&gt;13&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
      &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mh"&gt;0xE9&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="mi"&gt;14&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
      &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mh"&gt;0xC7&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="mi"&gt;15&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
      &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mh"&gt;0x87&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;default&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
      &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;em&gt;main.c&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cm"&gt;/*&lt;/span&gt;
&lt;span class="cm"&gt;  xc8 --chip=16f648A main.c&lt;/span&gt;
&lt;span class="cm"&gt;*/&lt;/span&gt;

&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;xc.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;stdint.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;display7.c&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="cp"&gt;#pragma config WDTE = OFF&lt;/span&gt;

&lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="n"&gt;porta_btn_mask&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="n"&gt;b11110&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

  &lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="n"&gt;display_data&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
          &lt;span class="n"&gt;last_buttons&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="n"&gt;PORTB&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;TRISB&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="k"&gt;while&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="n"&gt;buttons&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;PORTA&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;porta_btn_mask&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;last_buttons&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="n"&gt;buttons&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="n"&gt;last_buttons&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;buttons&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
      &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="n"&gt;RA1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;display_data&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
      &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="n"&gt;RA2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;display_data&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
      &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="n"&gt;RA3&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;display_data&lt;/span&gt; &lt;span class="o"&gt;-=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
      &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="n"&gt;RA4&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;display_data&lt;/span&gt; &lt;span class="o"&gt;-=&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
      &lt;span class="p"&gt;}&lt;/span&gt;
      &lt;span class="n"&gt;PORTB&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;display7&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;display_data&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="mh"&gt;0xF&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;

  &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–í –¥–∞–Ω–Ω–æ–º –ø—Ä–∏–º–µ—Ä–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–∞–∏–±–æ–ª–µ–µ –ø—Ä–æ—Å—Ç–æ–π –≤–∏–¥ –∏–Ω–¥–∏–∫–∞—Ü–∏–∏ - &lt;em&gt;—Å—Ç–∞—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è&lt;/em&gt;, –≤ —Ç–∞–∫–æ–º —Ä–µ–∂–∏–º–µ –∫–∞–∂–¥—ã–π —Å–µ–≥–º–µ–Ω—Ç –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –æ–¥–Ω–æ–º –∏–∑ –¥–≤—É—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π - –≤–∫–ª—é—á–µ–Ω –∏–ª–∏ –≤—ã–∫–ª—é—á–µ–Ω. –§—É–Ω–∫—Ü–∏—è &lt;code&gt;display7&lt;/code&gt; –ø—Ä–∏–≤–æ–¥–∏—Ç –¥–≤–æ–∏—á–Ω–æ–µ —á–∏—Å–ª–æ –≤ –∫–æ–¥ —Å–µ–º–∏—Å–µ–≥–º–µ–Ω—Ç–Ω–æ–≥–æ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ –∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å —à–µ—Å—Ç–Ω–∞–¥—Ü–∞—Ç–∏—Ä–∏—á–Ω–æ–µ —á–∏—Å–ª–æ 0..F.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2017/01/16/picsimjs-semisegmentnyi-indikator-i-preryvaniia/ui.gif" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–î–ª—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ä–∞–∑—Ä—è–¥–æ–≤ —Å–µ–º–∏—Å–µ–≥–º–µ–Ω—Ç–Ω–æ–≥–æ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç &lt;em&gt;–¥–∏–Ω–∞–º–∏—á–µ—Å–∫—É—é –∏–Ω–¥–∏–∫–∞—Ü–∏—é&lt;/em&gt; (–¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ), –∫–æ—Ç–æ—Ä–æ–µ –ø–æ–¥—Ä–∞–∑—É–º–µ–≤–∞–µ—Ç –ø–æ–æ—á–µ—Ä–µ–¥–Ω–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ä–∞–∑—Ä—è–¥–æ–≤ —Å —á–∞—Å—Ç–æ—Ç–æ–π, –Ω–µ –≤–æ—Å–ø—Ä–∏–Ω–∏–º–∞–µ–º–æ–π —á–µ–ª–æ–≤–µ—á–µ—Å–∫–∏–º –≥–ª–∞–∑–æ–º. –î–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –∏–Ω–¥–∏–∫–∞—Ü–∏–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è –º–µ–Ω—å—à–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω–æ–≥ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ –∏ –º–µ–Ω—å—à–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤–Ω–µ—à–Ω–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤. –ù–∞ –∏—Å—Å–ª–µ–¥—É–µ–º–æ–π –ø–ª–∞—Ç–µ –Ω–æ–≥–∞ RB4 –∫–∞–∫ —Ä–∞–∑ –∏ –∑–∞–Ω–∏–º–∞–µ—Ç—Å—è –ø–æ–æ—á–µ—Ä—ë–¥–Ω—ã–º –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ–º –¥–≤—É—Ö —Ä–∞–∑—Ä—è–¥–æ–≤ - –ø—Ä–∏ –Ω—É–ª–µ –Ω–∞ RB4 –¥–∞–Ω–Ω—ã–µ —Å PORTB –ø–æ–ø–∞–¥–∞—é—Ç –Ω–∞ –ª–µ–≤—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä, –ø—Ä–∏ –µ–¥–∏–Ω–∏—Ü–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ –Ω–∞ –ø—Ä–∞–≤—ã–π.&lt;/p&gt;
&lt;p&gt;–ó–∞–¥–∞—á–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ä–∞–∑—Ä—è–¥–æ–≤ —Å–µ–º–∏—Å–µ–≥–º–µ–Ω—Ç–Ω—ã—Ö –¥–æ–≤–æ–ª—å–Ω–æ –∫—Ä–∏—Ç–∏—á–Ω–∞ –∫–æ –≤—Ä–µ–º–µ–Ω–∏ - –ø—Ä–∏ –µ–≥–æ –Ω–µ—Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ–º —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–∏ –æ–¥–∏–Ω —Ä–∞–∑—Ä—è–¥ –±—É–¥–µ—Ç —è—Ä—á–µ –¥—Ä—É–≥–æ–≥–æ, —á—Ç–æ –ø—Ä–∏–≤–µ–¥—ë—Ç –∫ –Ω–µ–ø—Ä–∏—è—Ç–Ω—ã–º –¥–ª—è —á–µ–ª–æ–≤–µ—á–µ—Å–∫–æ–≥–æ –≥–ª–∞–∑–∞ —ç—Ñ—Ñ–µ–∫—Ç–∞–º, –º–µ—Ä—Ü–∞–Ω–∏—è–º. –î–ª—è –∑–∞–¥–∞—á, –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –∫–æ –≤—Ä–µ–º–µ–Ω–∏ —Ä–µ–∞–∫—Ü–∏–∏ –Ω–∞ –≤–æ–∑–Ω–∏–∫—à–∏–µ —Å–æ–±—ã—Ç–∏—è –≤ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞—Ö –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω—ã –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è - –æ—Å–Ω–æ–≤–Ω–æ–π —Ü–∏–∫–ª &lt;code&gt;main()&lt;/code&gt; –ø—Ä–∏–æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è (–ø—Ä–µ—Ä—ã–≤–∞–µ—Ç—Å—è), —Å–æ—Ö—Ä–∞–Ω—è—è —Å–≤–æ–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è, –æ—Ç—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ª–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è, –ø–æ—Å–ª–µ —á–µ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–Ω–æ–≤–∞ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è &lt;code&gt;main()&lt;/code&gt;, –ø—Ä–∏ —ç—Ç–æ–º —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–π —Ä–∞–Ω–µ–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2017/01/16/picsimjs-semisegmentnyi-indikator-i-preryvaniia/main.hex"&gt;hex&lt;/a&gt; | &lt;a href="http://mazko.github.io/picsim.js/d7c032cf6e1c90c841d5f42e9130b22f"&gt;picsim.js&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;isr.c&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;xc.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;stdint.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;stdbool.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;display7.c&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="c1"&gt;// C89, section 6.5.7 Initialization.&lt;/span&gt;
&lt;span class="c1"&gt;// If an object that has static storage duration is not initialized explicitly, then:&lt;/span&gt;
&lt;span class="c1"&gt;// - if it has arithmetic type, it is initialized to (positive or unsigned) zero;&lt;/span&gt;

&lt;span class="c1"&gt;// interface&lt;/span&gt;
&lt;span class="k"&gt;volatile&lt;/span&gt; &lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="n"&gt;display_data&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="c1"&gt;// http://microchip.wikidot.com/faq:31&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="n"&gt;interrupt&lt;/span&gt; &lt;span class="nf"&gt;_int_7&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;   &lt;span class="c1"&gt;// interrupt function &lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;bool&lt;/span&gt; &lt;span class="n"&gt;current_7&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;INTCONbits&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;T0IF&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;INTCONbits&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;T0IE&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; 
  &lt;span class="p"&gt;{&lt;/span&gt;                           &lt;span class="c1"&gt;// if timer flag is set &amp;amp; interrupt enabled&lt;/span&gt;
    &lt;span class="n"&gt;INTCONbits&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;T0IF&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;      &lt;span class="c1"&gt;// clear the interrupt flag &lt;/span&gt;
    &lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="n"&gt;data&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;display7&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;current_7&lt;/span&gt; &lt;span class="o"&gt;?&lt;/span&gt; &lt;span class="n"&gt;display_data&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="mh"&gt;0xF&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;display_data&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;PORTB&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;current_7&lt;/span&gt; &lt;span class="o"&gt;?&lt;/span&gt; &lt;span class="n"&gt;data&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="n"&gt;b10000&lt;/span&gt; &lt;span class="cm"&gt;/* RB4 */&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;current_7&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="n"&gt;current_7&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;em&gt;main.c&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cm"&gt;/*&lt;/span&gt;
&lt;span class="cm"&gt;  xc8 --chip=16f648A main.c isr.c&lt;/span&gt;
&lt;span class="cm"&gt;*/&lt;/span&gt;

&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;xc.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;stdint.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="cp"&gt;#pragma config WDTE = OFF&lt;/span&gt;

&lt;span class="k"&gt;extern&lt;/span&gt; &lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="n"&gt;display_data&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

  &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="n"&gt;porta_btn_mask&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="n"&gt;b11110&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="n"&gt;last_buttons&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="n"&gt;OPTION_REGbits&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;T0CS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;     &lt;span class="c1"&gt;// Timer0 increments on instruction clock&lt;/span&gt;
  &lt;span class="n"&gt;OPTION_REGbits&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;PSA&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;      &lt;span class="c1"&gt;// Prescaler is assigned to the Timer0 module&lt;/span&gt;
  &lt;span class="n"&gt;OPTION_REGbits&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;PS0&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;OPTION_REGbits&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;PS1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;OPTION_REGbits&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;PS2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;      &lt;span class="c1"&gt;// Prescaler 1:4; T0IF each 256*4 cycle&lt;/span&gt;
  &lt;span class="n"&gt;INTCONbits&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;T0IE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;         &lt;span class="c1"&gt;// Enable interrupt on TMR0 overflow&lt;/span&gt;
  &lt;span class="n"&gt;INTCONbits&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;GIE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;          &lt;span class="c1"&gt;// Global interrupt enable&lt;/span&gt;

  &lt;span class="n"&gt;PORTB&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;TRISB&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="k"&gt;while&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="n"&gt;buttons&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;PORTA&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;porta_btn_mask&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;last_buttons&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="n"&gt;buttons&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="n"&gt;last_buttons&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;buttons&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
      &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="n"&gt;RA1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;display_data&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
      &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="n"&gt;RA2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;display_data&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
      &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="n"&gt;RA3&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;display_data&lt;/span&gt; &lt;span class="o"&gt;-=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
      &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="n"&gt;RA4&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;display_data&lt;/span&gt; &lt;span class="o"&gt;-=&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
      &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;

  &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–í —Ñ–∞–π–ª–µ &lt;code&gt;isr.c&lt;/code&gt; —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –ª–æ–≥–∏–∫–∞, –æ—Ç–≤–µ—á–∞—é—â–∞—è –∑–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –Ω–∞ —Å–µ–º–∏—Å–µ–≥–º–µ–Ω—Ç–Ω–æ–º –¥–∏—Å–ø–ª–µ–µ. –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è &lt;code&gt;isr.c&lt;/code&gt; —Å –¥—Ä—É–≥–∏–º–∏ –ø—Ä–æ–≥—Ä–∞–º–º–Ω—ã–º–∏ –º–æ–¥—É–ª—è–º–∏, —Ç–∞–∫–∏–º–∏ –∫–∞–∫ &lt;em&gt;main.c&lt;/em&gt;, —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é &lt;code&gt;display_data&lt;/code&gt;. –§—É–Ω–∫—Ü–∏—è &lt;code&gt;display7&lt;/code&gt; –Ω–µ –≤—Ö–æ–¥–∏—Ç –≤ —ç—Ç–æ—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏ –ø–æ—ç—Ç–æ–º—É –æ–±—ä—è–≤–ª–µ–Ω–∞ –∫–∞–∫ &lt;code&gt;static&lt;/code&gt;, —Ç.–µ. –¥–æ—Å—Ç—É–ø–Ω–∞ —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö —Å–≤–æ–µ–≥–æ –º–æ–¥—É–ª—è. –ì—Ä–∞–º–æ—Ç–Ω–æ–µ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç—å –¥–ª—è –º–æ–¥—É–ª–µ–π –∑–æ–Ω—ã –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –∏ –∏–Ω–∫–∞–ø—Å—É–ª–∏—Ä–æ–≤–∞—Ç—å –∏—Ö —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é. 
–ú–æ–¥—É–ª–∏, –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –Ω–∞ —ç—Ç–∞–ø–µ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã, –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –º–∏–Ω–∏–º–∞–ª—å–Ω–æ —Å–≤—è–∑–∞–Ω–Ω—ã –¥—Ä—É–≥ —Å –¥—Ä—É–≥–æ–º (–°–ª–∞–±–∞—è –°–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å, Low Coupling). –ü—Ä–∏ —Ç–∞–∫–æ–º –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –≤ —Å–ª—É—á–∞–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ–¥–Ω–æ–≥–æ –º–æ–¥—É–ª—è –Ω–µ –ø—Ä–∏–¥–µ—Ç—Å—è –ø—Ä–∞–≤–∏—Ç—å –¥—Ä—É–≥–∏–µ –∏–ª–∏ —ç—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –±—É–¥—É—Ç –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º–∏. –ß–µ–º —Å–ª–∞–±–µ–µ —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å, —Ç–µ–º –ª–µ–≥—á–µ –ø–∏—Å–∞—Ç—å/–ø–æ–Ω–∏–º–∞—Ç—å/—Ä–∞—Å—à–∏—Ä—è—Ç—å/—á–∏–Ω–∏—Ç—å –ª—é–±—É—é –ø—Ä–æ–≥—Ä–∞–º–º—É –Ω–∞ –ª—é–±–æ–º —è–∑—ã–∫–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2017/01/16/picsimjs-semisegmentnyi-indikator-i-preryvaniia/ui-int.gif" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–¢–∞–∫ –∫–∞–∫ &lt;a href="http://proiot.ru/blog/posts/2017/01/14/picsimjs-shirotno-impulsnaia-moduliatsiia/"&gt;—Å–∫–≤–∞–∂–Ω–æ—Å—Ç—å&lt;/a&gt; –∏–º–ø—É–ª—å—Å–æ–≤ –Ω–∞ RB4 —Ä–∞–≤–Ω–∞ –¥–≤—É–º —è—Ä–∫–æ—Å—Ç—å —Å–≤–µ—á–µ–Ω–∏—è –∫–∞–∂–¥–æ–≥–æ –∏–∑ —Ä–∞–∑—Ä—è–¥–æ–≤ —Å–µ–º–∏—Å–µ–≥–º–µ–Ω—Ç–Ω–æ–≥–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –ø–æ—Ä–æ–≤–Ω—É –æ—Ç –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π.&lt;/p&gt;
&lt;p&gt;–ò –Ω–∞–ø–æ—Å–ª–µ–¥–æ–∫ –æ–¥–Ω–æ –∑–∞–º–µ—á–∞–Ω–∏–µ –ø–æ –∫–æ–¥—É &lt;code&gt;extern uint8_t display_data;&lt;/code&gt;, –∫–æ—Ç–æ—Ä—ã–π —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –≤ –¥—Ä—É–≥–æ–º —Ñ–∞–π–ª–µ. –ö —Å–æ–∂–∞–ª–µ–Ω–∏—é –≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –°–∏ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä —Ç—É—Ç –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–∏–ø—ã –∏ –ø–æ—ç—Ç–æ–º—É –æ—Å—Ç–∞–≤–∏—Ç –±–µ–∑ –≤–Ω–∏–º–∞–Ω–∏—è –∫–∞–∫—É—é-–Ω–∏–±—É–¥—å –µ—Ä—É–Ω–¥—É —Ç–∏–ø–∞ &lt;code&gt;extern uint16_t display_data;&lt;/code&gt; –ø—Ä–∏ —Ç–æ–º —á—Ç–æ —Ä–µ–∞–ª—å–Ω–∞—è –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è &lt;code&gt;uint8_t&lt;/code&gt;. –ü–æ—ç—Ç–æ–º—É –¥–ª—è –ª—É—á—à–µ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—è —Ç–∏–ø–æ–≤ –¥–µ–∫–ª–∞—Ä–∞—Ü–∏–∏ extern –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö / —Ñ—É–Ω–∫—Ü–∏–π –ø—Ä–∏–Ω—è—Ç–æ –æ–ø–∏—Å—ã–≤–∞—Ç—å –≤ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–∞—Ö.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;display_data.h&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;extern&lt;/span&gt; &lt;span class="k"&gt;volatile&lt;/span&gt; &lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="n"&gt;display_data&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–≠—Ç–æ—Ç —Ñ–∞–π–ª –Ω—É–∂–Ω–æ –≤–∫–ª—é—á–∏—Ç—å &lt;code&gt;#include "display_data.h"&lt;/code&gt; –≤ main.c –∏ isr.c.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2017/01/17/picsimjs-storozhevoi-taimer-i-spiashchii-rezhim/"&gt;–î–∞–ª–µ–µ&lt;/a&gt; —Å—Ç–æ—Ä–æ–∂–µ–≤–æ–π —Ç–∞–π–º–µ—Ä.&lt;/p&gt;</content><category term="picsim"></category></entry><entry><title>PICSim.js - —à–∏—Ä–æ—Ç–Ω–æ-–∏–º–ø—É–ª—å—Å–Ω–∞—è –º–æ–¥—É–ª—è—Ü–∏—è</title><link href="http://proiot.ru/blog/posts/2017/01/14/picsimjs-shirotno-impulsnaia-moduliatsiia/" rel="alternate"></link><published>2017-01-14T00:00:00+02:00</published><updated>2017-01-14T00:00:00+02:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2017-01-14:/blog/posts/2017/01/14/picsimjs-shirotno-impulsnaia-moduliatsiia/</id><summary type="html">&lt;p&gt;–í &lt;a href="http://proiot.ru/blog/posts/2017/01/13/simuliatsiia-mikrokontrollerov-picsimjs/"&gt;–ø—Ä–µ–¥—ã–¥—É—â–µ–º&lt;/a&gt; –ø—Ä–∏–º–µ—Ä–µ —Å–≤–µ—Ç–æ–¥–∏–æ–¥ –ª–∏–±–æ –≥–æ—Ä–∏—Ç –ª–∏–±–æ –Ω–µ—Ç —Ç.–µ. —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ç.–Ω. –∫–ª—é—á–µ–≤–æ–º (—Ü–∏—Ñ—Ä–æ–≤–æ–º) —Ä–µ–∂–∏–º–µ. 
–®–∏—Ä–æ—Ç–Ω–æ-–∏–º–ø—É–ª—å—Å–Ω–∞—è &lt;a href="http://proiot.ru/blog/posts/2016/12/05/ngspicejs-skvazhnost-upravliaemaia-napriazheniem/"&gt;–º–æ–¥—É–ª—è—Ü–∏—è&lt;/a&gt; (–®–ò–ú) –≤ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞—Ö - –æ—á–µ–Ω—å –ø—Ä–æ—Å—Ç–æ–π –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–± –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è —Ü–∏—Ñ—Ä–æ–≤–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞ –≤ –∞–Ω–∞–ª–æ–≥–æ–≤—ã–π —Å –æ—á–µ–Ω—å –≤—ã—Å–æ–∫–∏–º –ö–ü–î. –ó–∞–¥–∞–≤–∞—è —Å–∫–≤–∞–∂–Ω–æ—Å—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ –º–æ–∂–Ω–æ –º–µ–Ω—è—Ç—å —Å—Ä–µ–¥–Ω–µ–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –Ω–∞ –≤—ã—Ö–æ–¥–µ –®–ò–ú –∏ —Ç–µ–º —Å–∞–º—ã–º —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;p&gt;–í &lt;a href="http://proiot.ru/blog/posts/2017/01/13/simuliatsiia-mikrokontrollerov-picsimjs/"&gt;–ø—Ä–µ–¥—ã–¥—É—â–µ–º&lt;/a&gt; –ø—Ä–∏–º–µ—Ä–µ —Å–≤–µ—Ç–æ–¥–∏–æ–¥ –ª–∏–±–æ –≥–æ—Ä–∏—Ç –ª–∏–±–æ –Ω–µ—Ç —Ç.–µ. —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ç.–Ω. –∫–ª—é—á–µ–≤–æ–º (—Ü–∏—Ñ—Ä–æ–≤–æ–º) —Ä–µ–∂–∏–º–µ. 
–®–∏—Ä–æ—Ç–Ω–æ-–∏–º–ø—É–ª—å—Å–Ω–∞—è &lt;a href="http://proiot.ru/blog/posts/2016/12/05/ngspicejs-skvazhnost-upravliaemaia-napriazheniem/"&gt;–º–æ–¥—É–ª—è—Ü–∏—è&lt;/a&gt; (–®–ò–ú) –≤ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞—Ö - –æ—á–µ–Ω—å –ø—Ä–æ—Å—Ç–æ–π –∏ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–± –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è —Ü–∏—Ñ—Ä–æ–≤–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞ –≤ –∞–Ω–∞–ª–æ–≥–æ–≤—ã–π —Å –æ—á–µ–Ω—å –≤—ã—Å–æ–∫–∏–º –ö–ü–î. –ó–∞–¥–∞–≤–∞—è —Å–∫–≤–∞–∂–Ω–æ—Å—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ –º–æ–∂–Ω–æ –º–µ–Ω—è—Ç—å —Å—Ä–µ–¥–Ω–µ–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –Ω–∞ –≤—ã—Ö–æ–¥–µ –®–ò–ú –∏ —Ç–µ–º —Å–∞–º—ã–º —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –∞–Ω–∞–ª–æ–≥–æ–≤—ã–π —Å–∏–≥–Ω–∞–ª –ª—é–±–æ–π —Ñ–æ—Ä–º—ã. –í—ã—Å–æ–∫–∏–π –ö–ü–î –®–ò–ú —Ç–∞–∫–∂–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ —É–ø—Ä–∞–≤–ª—è—Ç—å –∏ –º–æ—â–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–æ–π - –º–æ—Ç–æ—Ä–∞–º–∏, –Ω–∞–≥—Ä–µ–≤–∞—Ç–µ–ª—å–Ω—ã–º–∏ —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏. –ö –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∞–º –®–ò–ú —Å—Ç–æ–∏—Ç –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å –≤—ã—Å–æ–∫–∏–π —É—Ä–æ–≤–µ–Ω—å –ø–æ–º–µ—Ö, –¥–ª—è —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –∫–æ—Ç–æ—Ä—ã—Ö –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–∞–∂–µ —Å–∞–º—É—é –ø—Ä–æ—Å—Ç—É—é –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É—é—â—É—é &lt;a href="http://proiot.ru/blog/posts/2016/10/29/ngspicejs-rc-filtr-nizhnikh-chastot/"&gt;RC-—Ü–µ–ø–æ—á–∫—É&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;–ù–∞–∏–±–æ–ª–µ–µ –ø—Ä–æ—Å—Ç–æ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–µ–π –®–ò–ú –Ω–∞ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–µ —è–≤–ª—è–µ—Ç—Å—è &lt;em&gt;–ø—Ä–æ–≥—Ä–∞–º–º–Ω–∞—è&lt;/em&gt; —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è, –æ–¥–Ω–∞–∫–æ —Ç–∞–∫–∂–µ –ø—Ä–æ–≥—Ä–∞–º–º–Ω—ã–π –º–µ—Ç–æ–¥ –ø–æ–ª—É—á–µ–Ω–∏—è –®–ò–ú —Å–∏–≥–Ω–∞–ª–∞ –æ—á–µ–Ω—å —Ç—Ä–µ–±–æ–≤–∞—Ç–µ–ª–µ–Ω –∫ —á–∞—Å—Ç–æ—Ç–µ —Ä–∞–±–æ—Ç—ã –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ –∏ –∑–∞–Ω–∏–º–∞–µ—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –º–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏. –í —Å–≤—è–∑–∏ —Å —ç—Ç–∏–º –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤ –∏–º–µ–µ—Ç –Ω–∞ –±–æ—Ä—Ç—É –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø–µ—Ä–∏—Ñ–µ—Ä–∏–π–Ω—ã—Ö –º–æ–¥—É–ª—å –∞–ø–ø–∞—Ä–∞—Ç–Ω–æ–≥–æ –®–ò–ú, —Ä–∞–±–æ—Ç–∞—é—â–µ–≥–æ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å –æ—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º–æ–π, –Ω–æ –æ–±–æ –≤—Å—ë–º –ø–æ –ø–æ—Ä—è–¥–∫—É.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2017/01/14/picsimjs-shirotno-impulsnaia-moduliatsiia/soft-pwm.hex"&gt;hex&lt;/a&gt; | &lt;a href="http://mazko.github.io/picsim.js/99041ddce996943a1f04ec2c88b65ecd"&gt;picsim.js&lt;/a&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cm"&gt;/*&lt;/span&gt;
&lt;span class="cm"&gt;  xc8 --chip=16f648A pwm.c&lt;/span&gt;
&lt;span class="cm"&gt;*/&lt;/span&gt;

&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;xc.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="cp"&gt;#pragma config WDTE = OFF&lt;/span&gt;

&lt;span class="cp"&gt;#define DUTY_MAX 12&lt;/span&gt;

&lt;span class="cp"&gt;#define _DUTY_CYCLE_RB0(value)                      \&lt;/span&gt;
&lt;span class="cp"&gt;  do {                                              \&lt;/span&gt;
&lt;span class="cp"&gt;    for (unsigned char i = 0; i &amp;lt; DUTY_MAX; i++) {  \&lt;/span&gt;
&lt;span class="cp"&gt;      RB0 = i &amp;lt; value;                              \&lt;/span&gt;
&lt;span class="cp"&gt;    }                                               \&lt;/span&gt;
&lt;span class="cp"&gt;  } while(0)&lt;/span&gt;

&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

  &lt;span class="n"&gt;PORTB&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;TRISB&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="k"&gt;while&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="n"&gt;RA1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="n"&gt;_DUTY_CYCLE_RB0&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;DUTY_MAX&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="n"&gt;RA2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="n"&gt;_DUTY_CYCLE_RB0&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;DUTY_MAX&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="n"&gt;RA3&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="n"&gt;_DUTY_CYCLE_RB0&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;DUTY_MAX&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="n"&gt;RA4&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="n"&gt;_DUTY_CYCLE_RB0&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;DUTY_MAX&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="c1"&gt;// Do something useful&lt;/span&gt;
    &lt;span class="c1"&gt;// for (unsigned char i=0; --i;);&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;

  &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ö–∞–∂–¥–∞—è –∫–Ω–æ–ø–∫–∞ RA1-RA4 –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç —Å–≤–æ—é —è—Ä–∫–æ—Å—Ç—å —Å–≤–µ—Ç–æ–¥–∏–æ–¥–∞ RB0. –ü–æ—Å–∫–æ–ª—å–∫—É —á–∞—Å—Ç–æ—Ç–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è RB0 –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –±–æ–ª—å—à–∞—è, —á–µ–ª–æ–≤–µ—á–µ—Å–∫–∏–π –≥–ª–∞–∑ –≤–∏–¥–∏—Ç —Å—Ä–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —è—Ä–∫–æ—Å—Ç–∏. –¢–æ—á–Ω–æ —Ä–∞—Å—á–∏—Ç–∞—Ç—å —á–∞—Å—Ç–æ—Ç—É –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è RB0 –∑–∞—Ç—Ä—É–¥–Ω–∏—Ç–µ–ª—å–Ω–æ —Ç.–∫. —Ç—É—Ç –º–Ω–æ–≥–æ–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞ - –Ω—É–∂–Ω–æ —Å–º–æ—Ç—Ä–µ—Ç—å –≤ –∞—Å—Å–µ–º–±–ª–µ—Ä–Ω—ã–π –ª–∏—Å—Ç–∏–Ω–≥. –¢–∞–∫–∂–µ –æ—á–µ–≤–∏–¥–Ω–æ —á—Ç–æ –ª—é–±–∞—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞ –≤ &lt;code&gt;// Do something useful&lt;/code&gt; –æ–∫–∞–∂–µ—Ç &lt;a href="http://mazko.github.io/picsim.js/dab4ea8ec9d49164ac8630482e9b84ec"&gt;—Å–∏–ª—å–Ω–æ–µ&lt;/a&gt; –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –∏—Ç–æ–≥–æ–≤—É—é —Å–∫–≤–∞–∂–Ω–æ—Å—Ç—å –∏–º–ø—É–ª—å—Å–æ–≤ –Ω–∞ –≤—ã—Ö–æ–¥–µ RB0. –ê–ø–ø–∞—Ä–∞—Ç–Ω—ã–π –®–ò–ú –ª–∏—à–µ–Ω –≤—Å–µ—Ö —ç—Ç–∏—Ö –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–æ–≤.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2017/01/14/picsimjs-shirotno-impulsnaia-moduliatsiia/ui.gif" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–î–ª—è —Ä–∞–±–æ—Ç—ã –º–æ–¥—É–ª—è –®–ò–ú —Ç—Ä–µ–±—É–µ—Ç—Å—è –æ–¥–∏–Ω &lt;a href="http://proiot.ru/blog/posts/2016/12/22/ngspicejs-schetchiki-i-deliteli-chastoty/"&gt;—Ç–∞–π–º–µ—Ä&lt;/a&gt; –∏ –º–æ–¥—É–ª—å CCP1. –ù–∞ &lt;a href="http://proiot.ru/blog/posts/2017/01/13/simuliatsiia-mikrokontrollerov-picsimjs/"&gt;–±–ª–æ–∫-—Å—Ö–µ–º–µ&lt;/a&gt;  PIC16f648 –∞–ø–ø–∞—Ä–∞—Ç–Ω—ã–π –º–æ–¥—É–ª—å CCP1 –Ω–∞ –Ω–æ–≥–µ RB3 –ø–æ—ç—Ç–æ–º—É —Ç–∞–º –∏ –±—É–¥–µ—Ç –≥–æ—Ä–µ—Ç—å —Å–≤–µ—Ç–æ–¥–∏–æ–¥. &lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2017/01/14/picsimjs-shirotno-impulsnaia-moduliatsiia/hw-pwm.hex"&gt;hex&lt;/a&gt; | &lt;a href="http://mazko.github.io/picsim.js/27d4e6ff0c8004700dc62985d6f8be93"&gt;picsim.js&lt;/a&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cm"&gt;/*&lt;/span&gt;
&lt;span class="cm"&gt;  xc8 --chip=16f648A pwm.c&lt;/span&gt;
&lt;span class="cm"&gt;*/&lt;/span&gt;

&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;xc.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="cp"&gt;#pragma config WDTE = OFF&lt;/span&gt;

&lt;span class="c1"&gt;// ignore two least significant bits PWMxDCL &lt;/span&gt;
&lt;span class="cp"&gt;#define _DUTY_CYCLE(value) \&lt;/span&gt;
&lt;span class="cp"&gt;  CCPR1L = (4*(249+1)*value)&amp;gt;&amp;gt;2&lt;/span&gt;

&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

  &lt;span class="c1"&gt;// http://microchip.wikidot.com/8bit:10bitpwm&lt;/span&gt;

  &lt;span class="c1"&gt;// 0b01 Prescaler is 4; 0b1xx TMR2 on&lt;/span&gt;
  &lt;span class="n"&gt;T2CON&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="n"&gt;b00000101&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="c1"&gt;// Desired PWM frequency 250Hz&lt;/span&gt;
  &lt;span class="c1"&gt;// PR2=[(Fosc)/(4‚àóTMR2Prescale‚àóPWMFrequency)]‚àí1&lt;/span&gt;
  &lt;span class="c1"&gt;// PR2=(1Mhz/(4*4*250Hz))-1=249&lt;/span&gt;
  &lt;span class="n"&gt;PR2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;249&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="c1"&gt;// 0b11xx - PWM mode;&lt;/span&gt;
  &lt;span class="c1"&gt;// assert log(1e6/249)/log(2) &amp;gt; 8 bit&lt;/span&gt;

  &lt;span class="n"&gt;CCP1CON&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="n"&gt;b00001100&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="n"&gt;PORTB&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;TRISB&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="k"&gt;while&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="n"&gt;RA1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="n"&gt;_DUTY_CYCLE&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="n"&gt;RA2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="n"&gt;_DUTY_CYCLE&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="n"&gt;RA3&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="n"&gt;_DUTY_CYCLE&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="n"&gt;RA4&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="n"&gt;_DUTY_CYCLE&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="c1"&gt;// Do something useful&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;unsigned&lt;/span&gt; &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;;);&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;

  &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ê–ø–ø–∞—Ä–∞—Ç–Ω—ã–π –®–ò–ú –Ω–µ —Ä–∞—Å—Ö–æ–¥—É–µ—Ç —Ä–µ—Å—É—Ä—Å—ã –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞ –∏ –ª–æ–≥–∏–∫–∞ &lt;code&gt;// Do something useful&lt;/code&gt; –Ω–∏–∫–∞–∫ –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ —è—Ä–∫–æ—Å—Ç—å —Å–≤–µ—á–µ–Ω–∏—è —Å–≤–µ—Ç–æ–¥–∏–æ–¥–æ–≤. –î–ª—è —É–º–µ–Ω—å—à–µ–Ω–∏—è —ç–Ω–µ—Ä–≥–æ–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è –º–æ–∂–Ω–æ —Å–ø–æ–∫–æ–π–Ω–æ —É–º–µ–Ω—å—à–∏—Ç—å —Ç–∞–∫—Ç–æ–≤—É—é —á–∞—Å—Ç–æ—Ç—É –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞, –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ—Å—á–∏—Ç–∞–≤ –∑–Ω–∞—á–µ–Ω–∏—è —Ä–µ–≥–∏—Å—Ç—Ä–æ–≤ –®–ò–ú.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2017/01/14/picsimjs-shirotno-impulsnaia-moduliatsiia/ui-hw.gif" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–ö —Ç–æ–º—É –∂–µ —á–∞—Å—Ç–æ—Ç—É –∞–ø–ø–∞—Ä–∞—Ç–Ω–æ–≥–æ –®–ò–ú –≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –º–æ–∂–Ω–æ —Å–æ–≤–µ—Ä—à–µ–Ω–Ω–æ —Ç–æ—á–Ω–æ —Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å –Ω–∞ —ç—Ç–∞–ø–µ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã. &lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2017/01/16/picsimjs-semisegmentnyi-indikator-i-preryvaniia/"&gt;–î–∞–ª–µ–µ&lt;/a&gt; –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è.&lt;/p&gt;</content><category term="picsim"></category><category term="–®–ò–ú"></category></entry><entry><title>–°–∏–º—É–ª—è—Ü–∏—è –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤ PICSim.js</title><link href="http://proiot.ru/blog/posts/2017/01/13/simuliatsiia-mikrokontrollerov-picsimjs/" rel="alternate"></link><published>2017-01-13T00:00:00+02:00</published><updated>2017-01-13T00:00:00+02:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2017-01-13:/blog/posts/2017/01/13/simuliatsiia-mikrokontrollerov-picsimjs/</id><summary type="html">&lt;p&gt;PIC (&lt;strong&gt;P&lt;/strong&gt;eripheral &lt;strong&gt;I&lt;/strong&gt;nterface &lt;strong&gt;C&lt;/strong&gt;ontroller) - —Å–µ—Ä–∏—è –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤, –∏–º–µ—é—â–∏—Ö –≥–∞—Ä–≤–∞—Ä–¥—Å–∫—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏–º—ã—Ö –∫–æ–º–ø–∞–Ω–∏–µ–π Microchip. –ü–æ–¥ –º–∞—Ä–∫–æ–π PIC –≤—ã–ø—É—Å–∫–∞—é—Ç—Å—è 8 (PIC10/12/16/18), 16 (PIC24, dsPIC30, dsPIC33F) –∏ 32-–±–∏—Ç–Ω—ã–µ PIC32 –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã. PIC10 –ª–∏–Ω–µ–π–∫–∞ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –Ω–∏–∑–∫–æ–π —Å—Ç–æ–∏–º–æ—Å—Ç—å—é –∑–∞ —Å—á—ë—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–≥–æ –Ω–∞–±–æ—Ä–∞ –ø–µ—Ä–∏—Ñ–µ—Ä–∏–∏ (–æ–±—ã—á–Ω–æ –ê–¶–ü –∏ –®–ò–ú) –∏ –Ω–µ–≤—ã—Å–æ–∫–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;p&gt;PIC (&lt;strong&gt;P&lt;/strong&gt;eripheral &lt;strong&gt;I&lt;/strong&gt;nterface &lt;strong&gt;C&lt;/strong&gt;ontroller) - —Å–µ—Ä–∏—è –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤, –∏–º–µ—é—â–∏—Ö –≥–∞—Ä–≤–∞—Ä–¥—Å–∫—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏–º—ã—Ö –∫–æ–º–ø–∞–Ω–∏–µ–π Microchip. –ü–æ–¥ –º–∞—Ä–∫–æ–π PIC –≤—ã–ø—É—Å–∫–∞—é—Ç—Å—è 8 (PIC10/12/16/18), 16 (PIC24, dsPIC30, dsPIC33F) –∏ 32-–±–∏—Ç–Ω—ã–µ PIC32 –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã. PIC10 –ª–∏–Ω–µ–π–∫–∞ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –Ω–∏–∑–∫–æ–π —Å—Ç–æ–∏–º–æ—Å—Ç—å—é –∑–∞ —Å—á—ë—Ç –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–æ–≥–æ –Ω–∞–±–æ—Ä–∞ –ø–µ—Ä–∏—Ñ–µ—Ä–∏–∏ (–æ–±—ã—á–Ω–æ –ê–¶–ü –∏ –®–ò–ú) –∏ –Ω–µ–≤—ã—Å–æ–∫–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏. –í —Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å PIC32 –Ω–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç —è–≤–ª—è–µ—Ç—Å—è —Ñ–ª–∞–≥–º–∞–Ω–æ–º –∫–æ–º–ø–∞–Ω–∏–∏ Microchip –Ω–∞ —Ä—ã–Ω–∫–µ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤, –æ–±–ª–∞–¥–∞—è –Ω–∞–∏–±–æ–ª–µ–µ –≤—ã—Å–æ–∫–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é –∏ –Ω–∞–∏–±–æ–ª–µ–µ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–π –ø–µ—Ä–∏—Ñ–µ—Ä–∏–µ–π –Ω–∞ –±–æ—Ä—Ç—É. –ù–∏–∂–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∞ –±–ª–æ–∫-—Å—Ö–µ–º–∞ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ PIC16F648. –í –ø—Ä–∏–Ω—Ü–∏–ø–µ –∑–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–æ—Ä—Ç–æ–≤ –≤–≤–æ–¥–∞-–≤—ã–≤–æ–¥–∞ PORTA, PORTB... –∏ –Ω–∞–±–æ—Ä–∞ –ø–µ—Ä–∏—Ñ–µ—Ä–∏–π–Ω—ã—Ö –º–æ–¥—É–ª–µ–π Timer, CCP1... —ç—Ç–æ—Ç —Ä–∏—Å—É–Ω–æ–∫ —É –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö PIC16 –±—É–¥–µ—Ç –∏–¥–µ–Ω—Ç–∏—á–µ–Ω.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2017/01/13/simuliatsiia-mikrokontrollerov-picsimjs/PIC16F648.svg" style="width:100%;"&gt;&lt;/p&gt;
&lt;p&gt;–ú–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã PIC16 –∏–º–µ—é—Ç –æ—á–µ–Ω—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–π –Ω–∞–±–æ—Ä –∫–æ–º–∞–Ω–¥ - –≤—Å–µ–≥–æ 35. –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –∑–∞ –æ–¥–∏–Ω —Ü–∏–∫–ª, –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å–ª—É—á–∞—è—Ö (—É—Å–ª–æ–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã) 2. –î–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–¥–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ —Ç—Ä–µ–±—É–µ—Ç—Å—è 4 –ø–µ—Ä–∏–æ–¥–∞ —Ç–∞–∫—Ç–æ–≤–æ–π —á–∞—Å—Ç–æ—Ç—ã. –ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –Ω–µ–±–æ–ª—å—à–æ–π –Ω–∞–±–æ—Ä –∫–æ–º–∞–Ω–¥ –Ω–∞ –∏—Ö –æ—Å–Ω–æ–≤–µ –º–æ–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ª—é–±—É—é –ª–æ–≥–∏–∫—É –∏–ª–∏ –µ—Å–ª–∏ –≤—ã—Ä–∞–∂–∞—Ç—å—Å—è –ø–æ-—É–º–Ω–æ–º—É —Ç–æ —Ç–∞–∫–æ–π –Ω–∞–±–æ—Ä –∫–æ–º–∞–Ω–¥ —è–≤–ª—è–µ—Ç—Å—è –ø–æ–ª–Ω—ã–º –ø–æ –¢—å—é—Ä–∏–Ω–≥—É. –ù–∞ –∫–∞–∫–æ–º —è–∑—ã–∫–µ –±—ã –Ω–∏ –±—ã–ª–∞ –Ω–∞–ø–∏—Å–∞–Ω–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –¥–ª—è PIC16 –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞, –ø–æ—Å–ª–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –æ–Ω–∞ –±—É–¥–µ—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∞ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∫–æ–º–∞–Ω–¥ –∏–∑ 35. –°–∫–∞—á–∞—Ç—å C-–∫–æ–º–ø–∏–ª—è—Ç–æ—Ä xc8 –º–æ–∂–Ω–æ c —Å–∞–π—Ç–∞ Microchip.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2017/01/13/simuliatsiia-mikrokontrollerov-picsimjs/blink.hex"&gt;hex&lt;/a&gt; | &lt;a href="http://mazko.github.io/picsim.js/91b059197905b07da98f64848ac9d4f1"&gt;picsim.js&lt;/a&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cm"&gt;/*&lt;/span&gt;
&lt;span class="cm"&gt;  xc8 --chip=16f648A blink.c&lt;/span&gt;
&lt;span class="cm"&gt;*/&lt;/span&gt;

&lt;span class="c1"&gt;// http://microchip.wikidot.com/faq:26&lt;/span&gt;
&lt;span class="c1"&gt;// The delay amount must be a constant (cannot be a variable).&lt;/span&gt;
&lt;span class="cp"&gt;#define _XTAL_FREQ 5e4 &lt;/span&gt;&lt;span class="c1"&gt;// 50 kHz&lt;/span&gt;

&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;xc.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="cp"&gt;#pragma config WDTE = OFF&lt;/span&gt;

&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

  &lt;span class="n"&gt;RB0&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;             &lt;span class="c1"&gt;// RB0 initial value&lt;/span&gt;
  &lt;span class="n"&gt;TRISB&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mh"&gt;0xFF&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;      &lt;span class="c1"&gt;// RB0 as Output PIN&lt;/span&gt;

  &lt;span class="k"&gt;while&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;42&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;RB0&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;           &lt;span class="c1"&gt;// LED ON&lt;/span&gt;
    &lt;span class="n"&gt;__delay_ms&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1000&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;  &lt;span class="c1"&gt;// 1 Second Delay&lt;/span&gt;
    &lt;span class="n"&gt;RB0&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;           &lt;span class="c1"&gt;// LED OFF&lt;/span&gt;
    &lt;span class="n"&gt;__delay_ms&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1000&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;  &lt;span class="c1"&gt;// 1 Second Delay&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;
  &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ú–∞–∫—Ä–æ—Å &lt;code&gt;#define _XTAL_FREQ 1e6&lt;/code&gt; –Ω—É–∂–µ–Ω –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä—É –¥–ª—è —Ä–∞—Å—á—ë—Ç–∞ &lt;code&gt;__delay_ms&lt;/code&gt;. –ü—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ –≤—Å–µ –ø–æ—Ä—Ç—ã –≤–≤–æ–¥–∞-–≤—ã–≤–æ–¥–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –Ω–∞ –≤—Ö–æ–¥, –∞ —á—Ç–æ–±—ã –º–∏–≥–∞—Ç—å –ª–∞–º–ø–æ—á–∫–æ–π RB0 –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ –≤—ã—Ö–æ–¥ –ø–æ—ç—Ç–æ–º—É &lt;code&gt;TRISB = 0xFF-1&lt;/code&gt;. –î–∞–ª–µ–µ –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã—Ö —Ü–∏–∫–ª - –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ, –≤—Ä–µ–º–µ–Ω–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞. –ù–∞ –≤—ã—Ö–æ–¥–∞—Ö RA1-RA3 –ø–æ–¥—Ç—è–≥–∏–≤–∞—é—â–∏–µ —Ä–µ–∑–∏—Å—Ç–æ—Ä—ã, –ø–æ—ç—Ç–æ–º—É –ª–∞–º–ø–æ—á–∫–∏ —Ç–∞–∫–∏–µ –∑–µ–ª—ë–Ω—ã–µ.&lt;/p&gt;
&lt;p&gt;–ï—Å–ª–∏ –Ω–µ –ø–æ–ª–µ–Ω–∏—Ç—å—Å—è –∏ –≤–∑–≥–ª—è–Ω—É—Ç—å –Ω–∞ &lt;code&gt;blink.asm&lt;/code&gt; —Ñ–∞–π–ª (–∞—Å—Å–µ–º–±–ª–µ—Ä–Ω—ã–π –ª–∏—Å—Ç–∏–Ω–≥), —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–æ–º xc8 —Ä—è–¥–æ–º —Å blink.hex, —Ç–æ –º–æ–∂–Ω–æ —É–≤–∏–¥–µ—Ç—å –∫–æ–º–∞–Ω–¥—ã —Ç–∏–ø–∞ &lt;code&gt;bcf&lt;/code&gt;, &lt;code&gt;movlw&lt;/code&gt; –∏ —Ç.–¥. –∫–æ—Ç–æ—Ä—ã–µ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ –∏ –≤—Ö–æ–¥—è—Ç –≤ —Ç–µ 35, —É–ø–æ–º—è–Ω—É—Ç—ã—Ö —Ä–∞–Ω–µ–µ.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2017/01/13/simuliatsiia-mikrokontrollerov-picsimjs/ui.gif" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–°–ª–µ–¥—É—é—â–∞—è —Å–ª–æ–∂–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞ —É–∂–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –ø–æ—Å—Ä–µ–¥—Å—Ç–≤–æ–º –∫–Ω–æ–ø–æ–∫ RA1-RA3. –ö–∞–∂–¥–∞—è –∫–Ω–æ–ø–∫–∞ —Å–∏–≥–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –æ –Ω–∞–∂–∞—Ç–∏–∏ —Å–≤–æ–µ–π –∫–æ–º–±–∏–Ω–∞—Ü–∏–µ–π —Å–≤–µ—Ç–æ–¥–∏–æ–¥–æ–≤ –Ω–∞ PORTB.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2017/01/13/simuliatsiia-mikrokontrollerov-picsimjs/buttons.hex"&gt;hex&lt;/a&gt; | &lt;a href="http://mazko.github.io/picsim.js/651d7b511656cac141c52941dffeb5a3"&gt;picsim.js&lt;/a&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cm"&gt;/*&lt;/span&gt;
&lt;span class="cm"&gt;  xc8 --chip=16f648A buttons.c&lt;/span&gt;
&lt;span class="cm"&gt;*/&lt;/span&gt;

&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;xc.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;stdbool.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="cp"&gt;#pragma config WDTE = OFF&lt;/span&gt;

&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

  &lt;span class="n"&gt;PORTB&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;TRISB&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="k"&gt;while&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;true&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="n"&gt;RA1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="n"&gt;RB0&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;true&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="n"&gt;RA2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="n"&gt;RB0&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;RB1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;true&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="n"&gt;RA3&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="n"&gt;RB0&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;RB1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;RB2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;true&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="n"&gt;RA4&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="n"&gt;RB0&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;RB1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;RB2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;RB3&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;true&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
      &lt;span class="n"&gt;PORTB&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;

  &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–î–∞–Ω–Ω—ã–π –∫–æ–¥ –Ω–µ –±—É–¥–µ—Ç –æ–¥–∏–Ω–∞–∫–æ–≤–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞—Ç—å –≤ —à–∏—Ä–æ–∫–æ–º –¥–∏–∞–ø–∞–∑–æ–Ω–µ —Ç–∞–∫—Ç–æ–≤—ã—Ö —á–∞—Å—Ç–æ—Ç —Ç.–∫. –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –æ—Ç __delay-–ø–æ–¥–æ–±–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π.&lt;/p&gt;
&lt;p&gt;–û—Å–æ–±–æ–µ –≤–Ω–∏–º–∞–Ω–∏–µ —Å—Ç–æ–∏—Ç –æ–±—Ä–∞—Ç–∏—Ç—å –Ω–∞ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ —Ç–∏–ø–∞ &lt;code&gt;PORTB=TRISB=0;&lt;/code&gt; - –∑–¥–µ—Å—å –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏–µ &lt;strong&gt;–∏–¥—ë—Ç —Å–ø—Ä–∞–≤–∞ –Ω–∞–ª–µ–≤–æ&lt;/strong&gt;, —Ç–æ –µ—Å—Ç—å –≤ –ø—Ä–∏–±–ª–∏–∂–µ–Ω–∏–∏ —ç—Ç–æ—Ç –∫–æ–¥ –∞–Ω–∞–ª–æ–≥–∏—á–µ–Ω &lt;code&gt;TRISB=0; /* —á—Ç–æ —Å–µ–π—á–∞—Å –Ω–∞ –≤—ã—Ö–æ–¥–µ PORTB ? */ PORTB=TRISB; /* –≤–æ—Ç —Å–µ–π—á–∞—Å —Ç–æ—á–Ω–æ 0 */&lt;/code&gt;, –Ω–æ –Ω–µ –ª—É—á—à–µ –ª–∏ —Å–¥–µ–ª–∞—Ç—å —Ç–∞–∫ &lt;code&gt;TRISB=PORTB=0;&lt;/code&gt;, —á—Ç–æ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ &lt;code&gt;PORTB=0;TRISB=PORTB;&lt;/code&gt; ? –ü—Ä–æ–±–ª–µ–º–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –≤—ã—Ä–∞–∂–µ–Ω–∏—è –≤ —Ç–æ–º, —á—Ç–æ PORTB —ç—Ç–æ –Ω–µ –æ–±—ã—á–Ω—ã–π —Ä–µ–≥–∏—Å—Ç—Ä, –∞ –ø–æ—Ä—Ç –≤–≤–æ–¥–∞-–≤—ã–≤–æ–¥–∞ –∏ –º–æ–∂–µ—Ç –¥–∞–≤–∞—Ç—å –Ω–∞ —á—Ç–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –æ—Ç–ª–∏—á–Ω–æ–µ –æ—Ç –∑–∞–ø–∏—Å–∞–Ω–Ω–æ–≥–æ. –ò–∑ —ç—Ç–æ–≥–æ –≤—Å–µ–≥–æ —Å–ª–µ–¥—É–µ—Ç, —á—Ç–æ —Å–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π –∏ –Ω–∞–¥—ë–∂–Ω—ã–π —Å–ø–æ—Å–æ–± —ç—Ç–æ &lt;strong&gt;–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Ä—Ç—ã –≤–≤–æ–¥–∞ –≤—ã–≤–æ–¥–∞ —è–≤–Ω–æ&lt;/strong&gt;: &lt;code&gt;PORTB=0;TRISB=0;&lt;/code&gt;. –•–æ—Ç—è –≤ —Ä–µ–∂–∏–º–µ —Å–∏–º—É–ª—è—Ü–∏–∏ –Ω–∏—á–µ–≥–æ ¬´—Å–≥–æ—Ä–µ—Ç—å¬ª –Ω–µ –º–æ–∂–µ—Ç, –ø–æ—ç—Ç–æ–º—É &lt;code&gt;PORTB=TRISB=0;&lt;/code&gt; —Ç–æ–∂–µ –º–æ–∂–Ω–æ :)&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2017/01/13/simuliatsiia-mikrokontrollerov-picsimjs/ui-b.gif" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2017/01/14/picsimjs-shirotno-impulsnaia-moduliatsiia/"&gt;–î–∞–ª–µ–µ&lt;/a&gt; –®–ò–ú.&lt;/p&gt;
&lt;p&gt;P.S. –¢–∞–±–ª–∏—Ü–∞ –ø–µ—Ä–∏—Ñ–µ—Ä–∏–π–Ω—ã—Ö –º–æ–¥—É–ª–µ–π —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –≤ —Å–∏–º—É–ª—è—Ç–æ—Ä–µ &lt;a href="https://github.com/lcgamboa/picsim" rel="nofollow"&gt;PICSim&lt;/a&gt;.&lt;/p&gt;</content><category term="picsim"></category></entry><entry><title>NGSPICE.js - —Å—á–µ—Ç—á–∏–∫–∏ –∏ –¥–µ–ª–∏—Ç–µ–ª–∏ —á–∞—Å—Ç–æ—Ç—ã</title><link href="http://proiot.ru/blog/posts/2016/12/22/ngspicejs-schetchiki-i-deliteli-chastoty/" rel="alternate"></link><published>2016-12-22T00:00:00+02:00</published><updated>2016-12-22T00:00:00+02:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2016-12-22:/blog/posts/2016/12/22/ngspicejs-schetchiki-i-deliteli-chastoty/</id><summary type="html">&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/10/28/vvedenie-v-simuliatsiiu-elektricheskikh-skhem-s-pomoshchiu-ngspicejs/"&gt;–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º&lt;/a&gt; –æ—Å–≤–∞–∏–≤–∞—Ç—å NGSPICE –≤ —Ü–µ–ª–æ–º –∏ &lt;a href="http://proiot.ru/blog/posts/2016/12/18/ngspicejs-logicheskie-ventili/"&gt;—Ü–∏—Ñ—Ä–æ–≤—É—é&lt;/a&gt; —Å—Ö–µ–º–æ—Ç–µ—Ö–Ω–∏–∫—É –≤ —á–∞—Å—Ç–Ω–æ—Å—Ç–∏.&lt;/p&gt;
&lt;p&gt;–í —Ü–∏—Ñ—Ä–æ–≤–æ–π —Å—Ö–µ–º–æ—Ç–µ—Ö–Ω–∏–∫–µ –ø–æ–Ω—è—Ç–∏—è ¬´—Å—á–µ—Ç—á–∏–∫ –∏–º–ø—É–ª—å—Å–æ–≤¬ª –∏ ¬´–¥–µ–ª–∏—Ç–µ–ª—å —á–∞—Å—Ç–æ—Ç—ã¬ª —Ç–µ—Å–Ω–æ —Å–≤—è–∑–∞–Ω—ã. 
–ü–æ–¥ –¥–µ–ª–∏—Ç–µ–ª–µ–º —á–∞—Å—Ç–æ—Ç—ã –ø–æ–Ω–∏–º–∞–µ—Ç—Å—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ, –∫–æ—Ç–æ—Ä–æ–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –≤—Ö–æ–¥–Ω–æ–π —Å–∏–≥–Ω–∞–ª —Å –∑–∞–¥–∞–Ω–Ω–æ–π —á–∞—Å—Ç–æ—Ç–æ–π –∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –≤—ã—Ö–æ–¥–Ω–æ–π —Å–∏–≥–Ω–∞–ª, —á–∞—Å—Ç–æ—Ç–∞ –∫–æ—Ç–æ—Ä–æ–≥–æ –º–µ–Ω—å—à–µ –≤—Ö–æ–¥–Ω–æ–π –≤ n —Ä–∞–∑. –ù–∞ –∫–∞–∂–¥—ã–µ n –∏–º–ø—É–ª—å—Å–æ–≤ –Ω–∞ –≤—Ö–æ–¥–µ ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/10/28/vvedenie-v-simuliatsiiu-elektricheskikh-skhem-s-pomoshchiu-ngspicejs/"&gt;–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º&lt;/a&gt; –æ—Å–≤–∞–∏–≤–∞—Ç—å NGSPICE –≤ —Ü–µ–ª–æ–º –∏ &lt;a href="http://proiot.ru/blog/posts/2016/12/18/ngspicejs-logicheskie-ventili/"&gt;—Ü–∏—Ñ—Ä–æ–≤—É—é&lt;/a&gt; —Å—Ö–µ–º–æ—Ç–µ—Ö–Ω–∏–∫—É –≤ —á–∞—Å—Ç–Ω–æ—Å—Ç–∏.&lt;/p&gt;
&lt;p&gt;–í —Ü–∏—Ñ—Ä–æ–≤–æ–π —Å—Ö–µ–º–æ—Ç–µ—Ö–Ω–∏–∫–µ –ø–æ–Ω—è—Ç–∏—è ¬´—Å—á–µ—Ç—á–∏–∫ –∏–º–ø—É–ª—å—Å–æ–≤¬ª –∏ ¬´–¥–µ–ª–∏—Ç–µ–ª—å —á–∞—Å—Ç–æ—Ç—ã¬ª —Ç–µ—Å–Ω–æ —Å–≤—è–∑–∞–Ω—ã. 
–ü–æ–¥ –¥–µ–ª–∏—Ç–µ–ª–µ–º —á–∞—Å—Ç–æ—Ç—ã –ø–æ–Ω–∏–º–∞–µ—Ç—Å—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ, –∫–æ—Ç–æ—Ä–æ–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –≤—Ö–æ–¥–Ω–æ–π —Å–∏–≥–Ω–∞–ª —Å –∑–∞–¥–∞–Ω–Ω–æ–π —á–∞—Å—Ç–æ—Ç–æ–π –∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –≤—ã—Ö–æ–¥–Ω–æ–π —Å–∏–≥–Ω–∞–ª, —á–∞—Å—Ç–æ—Ç–∞ –∫–æ—Ç–æ—Ä–æ–≥–æ –º–µ–Ω—å—à–µ –≤—Ö–æ–¥–Ω–æ–π –≤ n —Ä–∞–∑. –ù–∞ –∫–∞–∂–¥—ã–µ n –∏–º–ø—É–ª—å—Å–æ–≤ –Ω–∞ –≤—Ö–æ–¥–µ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –æ–¥–∏–Ω –∏–º–ø—É–ª—å—Å –Ω–∞ –≤—ã—Ö–æ–¥–µ. –ü—Ä–æ—Å—Ç–µ–π—à–∏–π –¥–≤–æ–∏—á–Ω—ã–π —Å—á—ë—Ç—á–∏–∫ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –æ—Å–Ω–æ–≤–µ T-—Ç—Ä–∏–≥–≥–µ—Ä–∞, –∫–æ—Ç–æ—Ä—ã–π —è–≤–ª—è–µ—Ç—Å—è –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –¥–≤—É—Ö—Å—Ç—É–ø–µ–Ω—á–∞—Ç—ã–º &lt;a href="http://proiot.ru/blog/posts/2016/12/20/ngspicejs-triggery-kak-elementy-pamiati/"&gt;D-—Ç—Ä–∏–≥–≥–µ—Ä–æ–º&lt;/a&gt; —Å –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑—å—é. –¢–∞–∫–æ–π —Ç—Ä–∏–≥–≥–µ—Ä –¥–µ–ª–∏—Ç —á–∞—Å—Ç–æ—Ç—É –ø–æ—Å—Ç—É–ø–∞—é—â–∏—Ö –Ω–∞ –≤—Ö–æ–¥ –∏–º–ø—É–ª—å—Å–æ–≤ –Ω–∞ –¥–≤–∞ –ø–æ –º–æ–¥—É–ª—é. –û–¥–∏–Ω —Ç—Ä–∏–≥–≥–µ—Ä —Å—á–∏—Ç–∞–µ—Ç –¥–æ –¥–≤—É—Ö, –¥–≤–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–Ω—ã—Ö –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –¥–æ —á–µ—Ç—ã—Ä–µ—Ö, n –¥–æ 2^n –∏–º–ø—É–ª—å—Å–æ–≤. –†–µ–∑—É–ª—å—Ç–∞—Ç —Å—á–µ—Ç–∞ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –≤ –¥–≤–æ–∏—á–Ω–æ–º –∫–æ–¥–µ, –≥–¥–µ –∫–∞–∂–¥—ã–π —Ä–∞–∑—Ä—è–¥ —Ö—Ä–∞–Ω–∏—Ç—å—Å—è –≤ –ø–∞–º—è—Ç–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–≥–æ —Ç—Ä–∏–≥–≥–µ—Ä–∞. –î–≤–æ–∏—á–Ω—ã–π –∫–æ–¥ –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –º–æ–∂–µ—Ç –±—ã—Ç—å —Å—á–∏—Ç–∞–Ω –∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω –¥—Ä—É–≥–∏–º —É–∑–ª–∞–º–∏ - –Ω–∞–ø—Ä–∏–º–µ—Ä –¥–≤–æ–∏—á–Ω–æ-–¥–µ—Å—è—Ç–∏—á–Ω—ã–º –¥–µ—à–∏—Ñ—Ä–∞—Ç–æ—Ä–æ–º. &lt;/p&gt;
&lt;p&gt;–í —Å–ª–µ–¥—É—é—â–∏—Ö —Å—Ö–µ–º–∞—Ö –¥–ª—è —Å–∏–º—É–ª—è—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å SPICE –º–æ–¥–µ–ª–∏ –ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –≤–µ–Ω—Ç–∏–ª–µ–π &lt;a href="http://proiot.ru/blog/posts/2016/12/22/ngspicejs-schetchiki-i-deliteli-chastoty/nand.lib"&gt;–ò-–ù–ï&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2016/12/22/ngspicejs-schetchiki-i-deliteli-chastoty/nor.lib"&gt;–ò–õ–ò-–ù–ï&lt;/a&gt;. SPICE –º–æ–¥–µ–ª—å –¥–≤—É—Ö—Å—Ç—É–ø–µ–Ω—á–∞—Ç–æ–≥–æ &lt;a href="http://proiot.ru/blog/posts/2016/12/22/ngspicejs-schetchiki-i-deliteli-chastoty/dtrigger.lib"&gt;D-—Ç—Ä–∏–≥–≥–µ—Ä–∞&lt;/a&gt; –≤—ã–¥–µ–ª–µ–Ω–∞ –∫–∞–∫ –ø–æ–¥—Å—Ö–µ–º–∞ –∏–∑ &lt;a href="http://proiot.ru/blog/posts/2016/12/20/ngspicejs-triggery-kak-elementy-pamiati/"&gt;–ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ&lt;/a&gt; –º–∞—Ç–µ—Ä–∏–∞–ª–∞ (–ø–ª—é—Å-–º–∏–Ω—É—Å –ø–∞—Ä–æ—á–∫–∞ —Ä–µ–∑–∏—Å—Ç–æ—Ä–æ–≤ –¥–ª—è –∫—Ä–∞—Å–∏–≤–æ–π —Å–∏–º—É–ª—è—Ü–∏–∏) –ø–æ –∞–Ω–∞–ª–æ–≥–∏–∏ —Å &lt;a href="http://proiot.ru/blog/posts/2016/12/18/ngspicejs-logicheskie-ventili/"&gt;–≤–µ–Ω—Ç–∏–ª—è–º–∏&lt;/a&gt;.&lt;/p&gt;
&lt;!-- 
&lt;a href="http://proiot.ru/blog/posts/2016/12/22/ngspicejs-schetchiki-i-deliteli-chastoty/nand42.sym"&gt;&lt;/a&gt;
&lt;a href="http://proiot.ru/blog/posts/2016/12/22/ngspicejs-schetchiki-i-deliteli-chastoty/nor42.sym"&gt;&lt;/a&gt;
&lt;a href="http://proiot.ru/blog/posts/2016/12/22/ngspicejs-schetchiki-i-deliteli-chastoty/d42.sym"&gt;&lt;/a&gt;
--&gt;

&lt;!-- 
sudo cp d42.sym nand42.sym nor42.sym /usr/share/gEDA/sym/local/
--&gt;

&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/12/22/ngspicejs-schetchiki-i-deliteli-chastoty/t.sch"&gt;–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –¥–≤–æ–∏—á–Ω—ã–π —Å—á—ë—Ç—á–∏–∫ –Ω–∞ T-—Ç—Ä–∏–≥–≥–µ—Ä–∞—Ö&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2016/12/22/ngspicejs-schetchiki-i-deliteli-chastoty/t.net"&gt;netlist&lt;/a&gt; | &lt;a href="https://ngspice.js.org/?gist=fc70f8faa3373df6736221deddf16cff"&gt;ngspice.js&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/12/22/ngspicejs-schetchiki-i-deliteli-chastoty/show-img-t.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ngspice 1 -&amp;gt; source t.net
ngspice 2 -&amp;gt; tran 18m 18
ngspice 3 -&amp;gt; plot clock+7 out2+3.5 out4
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ù–∞ –ø—Ä–∏–Ω—Ü–∏–ø–∏–∞–ª—å–Ω–æ–π —Å—Ö–µ–º–µ –ø—Ä–∏ —É—Å–ª–æ–≤–Ω–æ–º –≥—Ä–∞—Ñ–∏—á–µ—Å–∫–æ–º –æ–±–æ–∑–Ω–∞—á–µ–Ω–∏–∏ (–£–ì–û) —Ç—Ä–∏–≥–≥–µ—Ä–∞ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏—á–µ–∫ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ —Ç–æ, —á—Ç–æ —Ç–æ—Ç –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –ø–æ —Ñ—Ä–æ–Ω—Ç—É –∏–º–ø—É–ª—å—Å–∞ –∏ –≤ –¥–∞–Ω–Ω–æ–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º —Å–ª—É—á–∞–µ —ç—Ç–æ –ø–µ—Ä–µ–¥–Ω–∏–π —Ñ—Ä–æ–Ω—Ç. –ï—Å–ª–∏ –∂–µ –∫ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫—É –¥–æ—Ä–∏—Å–æ–≤–∞—Ç—å –∫—Ä—É–∂–æ—á–µ–∫ –∫–∞–∫ –Ω–∞ –∏–Ω–≤–µ—Ä—Å–Ω–æ–º –≤—ã—Ö–æ–¥–µ Q, —Ç–æ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç—Ä–∏–≥–≥–µ—Ä–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ –∑–∞–¥–Ω–µ–º—É —Ñ—Ä–æ–Ω—Ç—É. –î–≤—É—Ö—Å—Ç—É–ø–µ–Ω—á–∞—Ç—ã–π D-—Ç—Ä–∏–≥–≥–µ—Ä, —É –∫–æ—Ç–æ—Ä–æ–≥–æ –∏–Ω–≤–µ—Ä—Å–Ω—ã–π –≤—ã—Ö–æ–¥ –∑–∞–º–∫–Ω—É—Ç –Ω–∞ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π –≤—Ö–æ–¥ –¥–ª—è –¥–∞–Ω–Ω—ã—Ö Data, –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è T-—Ç—Ä–∏–≥–≥–µ—Ä–æ–º. –¢–∞–∫–æ–π —Ç—Ä–∏–≥–≥–µ—Ä –Ω–∞–∑—ã–≤–∞—é—Ç —Å—á–µ—Ç–Ω—ã–º —Ç—Ä–∏–≥–≥–µ—Ä–æ–º, –æ–Ω –∏–º–µ–µ—Ç —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –≤—Ö–æ–¥ (–±–µ–∑ —É—á—ë—Ç–∞ –∞–ø–ø–∞—Ä–∞—Ç–Ω–æ–≥–æ —Å–±—Ä–æ—Å–∞) –∏ –¥–µ–ª–∏—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—Ö–æ–¥–Ω—ã—Ö –∏–º–ø—É–ª—å—Å–æ–≤ –Ω–∞ –¥–≤–∞ —Ç.–∫. –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ –æ–¥–Ω–æ–º—É –∏–∑ –¥–≤—É—Ö —Ñ—Ä–æ–Ω—Ç–æ–≤.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/12/22/ngspicejs-schetchiki-i-deliteli-chastoty/t-canvas.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–ì–ª–∞–≤–Ω—ã–º –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–æ–º —É –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö —Å—á—ë—Ç—á–∏–∫–æ–≤ —è–≤–ª—è–µ—Ç—Å—è —Ç–æ, —á—Ç–æ –∫–∞–∂–¥—ã–π T-—Ç—Ä–∏–≥–≥–µ—Ä –ø–µ—Ä–µ–∫–ª—é—á–∞—é—Ç—Å—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ, –æ–∂–∏–¥–∞—è —Å–æ—Å–µ–¥–∞, —Ç.–µ. –≤ —Ä–∞–∑–ª–∏—á–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã –≤—Ä–µ–º–µ–Ω–∏ —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π –ø–æ –º–µ—Ä–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è —Ü–∏—Ñ—Ä–æ–≤–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞ - –æ—Ç—Å—é–¥–∞ –∏ –Ω–∞–∑–≤–∞–Ω–∏–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π. –ù–∞–ø—Ä–∏–º–µ—Ä —á—Ç–æ–±—ã –ø–æ—Å—Ç—Ä–æ–∏—Ç—å —Ü–∏—Ñ—Ä–æ–≤–æ–π —Ç–∞–π–º–µ—Ä, –∏—Å–ø–æ–ª—å–∑—É—è –∫–≤–∞—Ä—Ü –Ω–∞ 32768 –ì—Ü (&lt;a href="https://bc.js.org/"&gt;2^15&lt;/a&gt;), –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–∞ –≤—ã—Ö–æ–¥–µ —Å—á—ë—Ç—á–∏–∫–∞ 1 –ì—Ü –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ 15 –≤–∫–ª—é—á—ë–Ω–Ω—ã—Ö –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ T-—Ç—Ä–∏–≥–≥–µ—Ä–æ–≤, –∞ –∫–∞–∂–¥—ã–π —Ç—Ä–∏–≥–≥–µ—Ä –¥–æ–±–∞–≤–ª—è–µ—Ç —Å–≤–æ—é –∑–∞–¥–µ—Ä–∂–∫—É –∏ –∫–∞–∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –Ω–∞ –≤—ã—Ö–æ–¥–µ –±—É–¥—É—Ç –∑–∞–ø–∞–∑–¥—ã–≤–∞—Ç—å —É–∂–µ –Ω–∞ 15*x –ø–æ –æ—Ç–Ω–æ—à–µ–Ω–∏—é –∫ –≤—Ö–æ–¥–Ω–æ–º—É —Å–∏–≥–Ω–∞–ª—É. –î–∞–Ω–Ω—ã–π –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ–∫ —É—Å—Ç—Ä–∞–Ω—ë–Ω —É —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö —Å—á—ë—Ç—á–∏–∫–æ–≤.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/12/22/ngspicejs-schetchiki-i-deliteli-chastoty/st.sch"&gt;—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —Å—á—ë—Ç—á–∏–∫&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2016/12/22/ngspicejs-schetchiki-i-deliteli-chastoty/st.net"&gt;netlist&lt;/a&gt; | &lt;a href="https://ngspice.js.org/?gist=9c65b6d93df67c99c99efd09e45b1f4f"&gt;ngspice.js&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/12/22/ngspicejs-schetchiki-i-deliteli-chastoty/show-img-st.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ngspice 1 -&amp;gt; source st.net
ngspice 2 -&amp;gt; tran 18m 18
ngspice 3 -&amp;gt; plot clock+7 out2+3.5 out4
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–í–µ–Ω—Ç–∏–ª–∏ U3-U6 –æ–±—Ä–∞–∑—É—é—Ç –∏—Å–∫–ª—é—á–∞—é—â–µ–µ ¬´–ò–õ–ò¬ª (XOR) - –µ—Å–ª–∏ –ª–æ–≥–∏—á–µ—Å–∫–∏–µ —É—Ä–æ–≤–Ω–∏ –Ω–∞ –≤—Ö–æ–¥–∞—Ö —Ä–∞–≤–Ω—ã –º–µ–∂–¥—É —Å–æ–±–æ–π, —Ç–æ –Ω–∞ –≤—ã—Ö–æ–¥–µ ¬´0¬ª, –≤ –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ ¬´1¬ª.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/12/22/ngspicejs-schetchiki-i-deliteli-chastoty/st-canvas.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–í—Ä–µ–º–µ–Ω–Ω–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞ –≤—ã—Ö–æ–¥–∞ OUT4 —É —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ —Å—á—ë—Ç—á–∏–∫–∞ –Ω–µ–º–Ω–æ–≥–æ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ. –í—Ö–æ–¥–Ω–æ–π —Å–∏–≥–Ω–∞–ª Clock –ø–æ—Å—Ç—É–ø–∞–µ—Ç –Ω–∞ –æ–±–∞ —Ç—Ä–∏–≥–≥–µ—Ä–∞ –≤ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã –≤—Ä–µ–º–µ–Ω–∏. –ü–æ –ø–µ—Ä–≤–æ–º—É –ø–µ—Ä–µ–¥–Ω–µ–º—É —Ñ—Ä–æ–Ω—Ç—É Clock –Ω–∞ OUT2 –∏ OUT4 –ª–æ–≥–∏—á–µ—Å–∫–∏–µ ¬´0¬ª, —Ç.–∫. –¥–æ —ç—Ç–æ–≥–æ –±—ã–ª –∞–ø–ø–∞—Ä–∞—Ç–Ω—ã–π —Å–±—Ä–æ—Å. –ü—Ä–∏ ¬´0¬ª –Ω–∞ –≤—Å–µ—Ö –≤—Ö–æ–¥–∞—Ö XOR –≤—ã–¥–∞—ë—Ç ¬´0¬ª –∏ —Ç—Ä–∏–≥–≥–µ—Ä U2 –∑–∞–ø–æ–º–Ω–∏—Ç ¬´0¬ª. –ü–æ –≤—Ç–æ—Ä–æ–º—É –ø–µ—Ä–µ–¥–Ω–µ–º—É —Ñ—Ä–æ–Ω—Ç—É Clock –Ω–∞ OUT2 —É–∂–µ ¬´1¬ª, –Ω–∞ OUT4 –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É ¬´0¬ª –∏ XOR –¥–∞—Å—Ç ¬´1¬ª, —Ç—Ä–∏–≥–≥–µ—Ä U2 –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è. –í –∏—Ç–æ–≥–µ —á–∞—Å—Ç–æ—Ç–∞ Clock –≤—Å—ë —Ç–∞–∫–∂–µ –¥–µ–ª–∏—Ç—Å—è –Ω–∞ 4 –Ω–∞ –≤—ã—Ö–æ–¥–µ U2, –Ω–æ –≤—Å–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã –ø–µ—Ä–µ–∫–ª—é—á–∞—é—Ç—Å—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –±–µ–∑ –Ω–µ–∂–µ–ª–∞—Ç–µ–ª—å–Ω—ã—Ö –∑–∞–¥–µ—Ä–∂–µ–∫.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/12/22/ngspicejs-schetchiki-i-deliteli-chastoty/3.sch"&gt;—Å—á—ë—Ç—á–∏–∫ –¥–æ 3&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2016/12/22/ngspicejs-schetchiki-i-deliteli-chastoty/3.net"&gt;netlist&lt;/a&gt; | &lt;a href="https://ngspice.js.org/?gist=709d6dad0810bf936168a28e8afe7393"&gt;ngspice.js&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/12/22/ngspicejs-schetchiki-i-deliteli-chastoty/show-img-3.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ngspice 1 -&amp;gt; source 3.net
ngspice 2 -&amp;gt; tran 18m 18
ngspice 3 -&amp;gt; plot clock+3.5 out3
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ú–æ–∂–Ω–æ –¥–∞–∂–µ —Å–º–∞—Å—Ç–µ—Ä–∏—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –¥–µ–ª–∏—Ç–µ–ª—å –Ω–µ –∫—Ä–∞—Ç–Ω—ã–π –¥–≤—É–º, –Ω–∞–ø—Ä–∏–º–µ—Ä 3. –ü—Ä–∞–≤–¥–∞ –≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –Ω–∞ –≤—ã—Ö–æ–¥–µ –ø–æ–ª—É—á–∏—Ç—Å—è –Ω–µ –º–µ–∞–Ω–¥—Ä - –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –≤—ã—Ö–æ–¥–Ω—ã—Ö –∏–º–ø—É–ª—å—Å–æ–≤ –Ω–µ —Ä–∞–≤–µ–Ω 50%.   &lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/12/22/ngspicejs-schetchiki-i-deliteli-chastoty/3-canvas.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–¶–∏—Ñ—Ä–æ–≤—ã–µ —Å—á–µ—Ç—á–∏–∫–∏ –∏–º–ø—É–ª—å—Å–æ–≤ —è–≤–ª—è—é—Ç—Å—è –Ω–µ–æ—Ç—ä–µ–º–ª–µ–º—ã–º–∏ —É–∑–ª–∞–º–∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π —ç–ª–µ–∫—Ç—Ä–æ—Ç–µ—Ö–Ω–∏–∫–∏.
–û–Ω–∏ –Ω–∞—Ö–æ–¥—è—Ç —à–∏—Ä–æ–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –≤ –º–∏–∫—Ä–æ–ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–∞—Ö, —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã—Ö —á–∞—Å–∞—Ö, —Ç–∞–π–º–µ—Ä–∞—Ö, —á–∞—Å—Ç–æ—Ç–æ–º–µ—Ä–∞—Ö, —Å–∏—Å—Ç–µ–º–∞—Ö —Å —Ñ–∞–∑–æ–≤–æ–π –∞–≤—Ç–æ–ø–æ–¥—Å—Ç—Ä–æ–π–∫–æ–π —á–∞—Å—Ç–æ—Ç—ã (–§–ê–ü–ß) –∏ –º–Ω–æ–≥–∏—Ö –¥—Ä—É–≥–∏—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö.&lt;/p&gt;</content><category term="gEDA"></category><category term="ngspice"></category><category term="gate"></category></entry><entry><title>NGSPICE.js - —Ç—Ä–∏–≥–≥–µ—Ä—ã –∫–∞–∫ —ç–ª–µ–º–µ–Ω—Ç—ã –ø–∞–º—è—Ç–∏</title><link href="http://proiot.ru/blog/posts/2016/12/20/ngspicejs-triggery-kak-elementy-pamiati/" rel="alternate"></link><published>2016-12-20T00:00:00+02:00</published><updated>2016-12-20T00:00:00+02:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2016-12-20:/blog/posts/2016/12/20/ngspicejs-triggery-kak-elementy-pamiati/</id><summary type="html">&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/10/28/vvedenie-v-simuliatsiiu-elektricheskikh-skhem-s-pomoshchiu-ngspicejs/"&gt;–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º&lt;/a&gt; –æ—Å–≤–∞–∏–≤–∞—Ç—å NGSPICE –≤ —Ü–µ–ª–æ–º –∏ &lt;a href="http://proiot.ru/blog/posts/2016/12/18/ngspicejs-logicheskie-ventili/"&gt;—Ü–∏—Ñ—Ä–æ–≤—É—é&lt;/a&gt; —Å—Ö–µ–º–æ—Ç–µ—Ö–Ω–∏–∫—É –≤ —á–∞—Å—Ç–Ω–æ—Å—Ç–∏.&lt;/p&gt;
&lt;p&gt;–¢—Ä–∏–≥–≥–µ—Ä (–±–∏—Å—Ç–∞–±–∏–ª—å–Ω—ã–π –º—É–ª—å—Ç–∏–≤–∏–±—Ä–∞—Ç–æ—Ä) –≤—ã–ø–æ–ª–Ω—è–µ—Ç &lt;a href="http://proiot.ru/blog/posts/2016/12/18/ngspicejs-logicheskie-ventili/"&gt;–ª–æ–≥–∏—á–µ—Å–∫—É—é&lt;/a&gt; —Ñ—É–Ω–∫—Ü–∏—é —Å –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑—å—é, –≤ —Å–ª–µ–¥—Å—Ç–≤–∏–µ –∫–æ—Ç–æ—Ä–æ–π –∏–º–µ–µ—Ç —Ç–æ–ª—å–∫–æ –¥–≤–∞ —É—Å—Ç–æ–π—á–∏–≤—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏ —Å–ø–æ—Å–æ–±–µ–Ω –ø–æ–¥ –¥–µ–π—Å—Ç–≤–∏–µ–º –≤—Ö–æ–¥–Ω—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤ —Å–∫–∞—á–∫–æ–º –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –∏–∑ –æ–¥–Ω–æ–≥–æ —É—Å—Ç–æ–π—á–∏–≤–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤ –¥—Ä—É–≥–æ–µ. –í–∞–∂–Ω–æ–π –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å—é —Ç—Ä–∏–≥–≥–µ—Ä–∞ –∫–∞–∫ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ —è–≤–ª—è–µ—Ç—Å—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/10/28/vvedenie-v-simuliatsiiu-elektricheskikh-skhem-s-pomoshchiu-ngspicejs/"&gt;–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º&lt;/a&gt; –æ—Å–≤–∞–∏–≤–∞—Ç—å NGSPICE –≤ —Ü–µ–ª–æ–º –∏ &lt;a href="http://proiot.ru/blog/posts/2016/12/18/ngspicejs-logicheskie-ventili/"&gt;—Ü–∏—Ñ—Ä–æ–≤—É—é&lt;/a&gt; —Å—Ö–µ–º–æ—Ç–µ—Ö–Ω–∏–∫—É –≤ —á–∞—Å—Ç–Ω–æ—Å—Ç–∏.&lt;/p&gt;
&lt;p&gt;–¢—Ä–∏–≥–≥–µ—Ä (–±–∏—Å—Ç–∞–±–∏–ª—å–Ω—ã–π –º—É–ª—å—Ç–∏–≤–∏–±—Ä–∞—Ç–æ—Ä) –≤—ã–ø–æ–ª–Ω—è–µ—Ç &lt;a href="http://proiot.ru/blog/posts/2016/12/18/ngspicejs-logicheskie-ventili/"&gt;–ª–æ–≥–∏—á–µ—Å–∫—É—é&lt;/a&gt; —Ñ—É–Ω–∫—Ü–∏—é —Å –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑—å—é, –≤ —Å–ª–µ–¥—Å—Ç–≤–∏–µ –∫–æ—Ç–æ—Ä–æ–π –∏–º–µ–µ—Ç —Ç–æ–ª—å–∫–æ –¥–≤–∞ —É—Å—Ç–æ–π—á–∏–≤—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏ —Å–ø–æ—Å–æ–±–µ–Ω –ø–æ–¥ –¥–µ–π—Å—Ç–≤–∏–µ–º –≤—Ö–æ–¥–Ω—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤ —Å–∫–∞—á–∫–æ–º –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –∏–∑ –æ–¥–Ω–æ–≥–æ —É—Å—Ç–æ–π—á–∏–≤–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤ –¥—Ä—É–≥–æ–µ. –í–∞–∂–Ω–æ–π –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å—é —Ç—Ä–∏–≥–≥–µ—Ä–∞ –∫–∞–∫ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ —è–≤–ª—è–µ—Ç—Å—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è –≤ –æ–¥–Ω–æ–º –∏–∑ –¥–≤—É—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π –∏ –ø–æ –æ–∫–æ–Ω—á–∞–Ω–∏–∏ –¥–µ–π—Å—Ç–≤–∏—è –ø–µ—Ä–µ–∫–ª—é—á–∞—é—â–µ–≥–æ —Å–∏–≥–Ω–∞–ª–∞. –ü—Ä–∏–Ω—è–≤ –æ–¥–Ω–æ –∏–∑ —Å–æ—Å—Ç–æ—è–Ω–∏–π –∑–∞ ¬´1¬ª, –∞ –¥—Ä—É–≥–æ–µ –∑–∞ ¬´0¬ª, –º–æ–∂–Ω–æ —Å—á–∏—Ç–∞—Ç—å, —á—Ç–æ —Ç—Ä–∏–≥–≥–µ—Ä —Ö—Ä–∞–Ω–∏—Ç (–ø–æ–º–Ω–∏—Ç) –æ–¥–∏–Ω —Ä–∞–∑—Ä—è–¥ —á–∏—Å–ª–∞, –∑–∞–ø–∏—Å–∞–Ω–Ω–æ–≥–æ –≤ –¥–≤–æ–∏—á–Ω–æ–π —Ñ–æ—Ä–º–µ –∏ —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º —è–≤–ª—è–µ—Ç—Å—è —ç–ª–µ–º–µ–Ω—Ç–∞—Ä–Ω–æ–π –±–∏—Ç–æ–≤–æ–π —è—á–µ–π–∫–æ–π –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–≤–æ–∏—á–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏. –¢–∞–∫—É—é –ø–∞–º—è—Ç—å –Ω–∞–∑—ã–≤–∞—é—Ç —Å—Ç–∞—Ç–∏—á–µ—Å–∫–æ–π –ø–æ—Å–∫–æ–ª—å–∫—É –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ–∫–∞ –µ—Å—Ç—å –ø–∏—Ç–∞–Ω–∏–µ. –ü—Ä–∏ –≤–∫–ª—é—á–µ–Ω–∏–∏ –ø–∏—Ç–∞–Ω–∏—è —Ç—Ä–∏–≥–≥–µ—Ä —Å –∫–∞–∫–æ–π-—Ç–æ —Å—Ç–µ–ø–µ–Ω—å—é  –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –æ–¥–Ω–æ –∏–∑ –¥–≤—É—Ö –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π –∏ –ø–æ—ç—Ç–æ–º—É –¥–ª—è –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–π —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Ç—Ä–∏–≥–≥–µ—Ä–∞ –≤ —Ç—Ä–µ–±—É–µ–º–æ–µ –∏—Å—Ö–æ–¥–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –æ–±—ã—á–Ω–æ –ø—Ä–µ–¥—É—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º –∞–ø–ø–∞—Ä–∞—Ç–Ω–æ–≥–æ —Å–±—Ä–æ—Å–∞.&lt;/p&gt;
&lt;p&gt;–í —Å–ª–µ–¥—É—é—â–∏—Ö —Å—Ö–µ–º–∞—Ö –¥–ª—è —Å–∏–º—É–ª—è—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å SPICE –º–æ–¥–µ–ª–∏ –ª–æ–≥–∏—á–µ—Å–∫–∏—Ö &lt;a href="http://proiot.ru/blog/posts/2016/12/18/ngspicejs-logicheskie-ventili/"&gt;–≤–µ–Ω—Ç–∏–ª–µ–π&lt;/a&gt;: &lt;a href="http://proiot.ru/blog/posts/2016/12/20/ngspicejs-triggery-kak-elementy-pamiati/nor.lib"&gt;–ò–õ–ò-–ù–ï&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2016/12/20/ngspicejs-triggery-kak-elementy-pamiati/nand.lib"&gt;–ò-–ù–ï&lt;/a&gt;.&lt;/p&gt;
&lt;!-- 
&lt;a href="http://proiot.ru/blog/posts/2016/12/20/ngspicejs-triggery-kak-elementy-pamiati/nand42.sym"&gt;&lt;/a&gt;
&lt;a href="http://proiot.ru/blog/posts/2016/12/20/ngspicejs-triggery-kak-elementy-pamiati/nor42.sym"&gt;&lt;/a&gt;
--&gt;

&lt;!-- 
sudo cp nor42.sym nand42.sym /usr/share/gEDA/sym/local/
--&gt;

&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/12/20/ngspicejs-triggery-kak-elementy-pamiati/rs.sch"&gt;RS-—Ç—Ä–∏–≥–≥–µ—Ä&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2016/12/20/ngspicejs-triggery-kak-elementy-pamiati/rs.net"&gt;netlist&lt;/a&gt; | &lt;a href="https://ngspice.js.org/?gist=56043bc5c92e810905fe7f0c7c9d05e8"&gt;ngspice.js&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/12/20/ngspicejs-triggery-kak-elementy-pamiati/show-img-rs.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ngspice 1 -&amp;gt; source rs.net
ngspice 2 -&amp;gt; tran 5m 5
ngspice 3 -&amp;gt; plot reset+3.5 set+7 q
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;RS-—Ç—Ä–∏–≥–≥–µ—Ä —è–≤–ª—è–µ—Ç—Å—è –±–∞–∑–æ–≤—ã–º –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã—Ö —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤. –í –ø—Ä–æ—Å—Ç–µ–π—à–µ–º —Å–ª—É—á–∞–µ RS-—Ç—Ä–∏–≥–≥–µ—Ä –∏–º–µ–µ—Ç –¥–≤–∞ –≤—Ö–æ–¥–∞: S (Set) - –≤—Ö–æ–¥ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Ç—Ä–∏–≥–≥–µ—Ä–∞ –≤ –µ–¥–∏–Ω–∏—á–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, R (Reset) - –≤—Ö–æ–¥ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Ç—Ä–∏–≥–≥–µ—Ä–∞ –≤ –Ω—É–ª–µ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ. –í –Ω–æ—Ä–º–∞–ª—å–Ω–æ–º —Ä–µ–∂–∏–º–µ –≤—ã—Ö–æ–¥ nQ —è–≤–ª—è–µ—Ç—Å—è –∏–Ω–≤–µ—Ä—Å–Ω—ã–º –ø–æ –æ—Ç–Ω–æ—à–µ–Ω–∏—é –∫ Q. –ê–∫—Ç–∏–≤–Ω—ã–π —Å–∏–≥–Ω–∞–ª –ø–æ –≤—Ö–æ–¥—É S –≤ –º–æ–º–µ–Ω—Ç –ø–æ—è–≤–ª–µ–Ω–∏—è (–≥–æ–≤–æ—Ä—è—Ç –ø–æ –ø–µ—Ä–µ–¥–Ω–µ–º—É —Ñ—Ä–æ–Ω—Ç—É) –∑–∞—Å—Ç–∞–≤–ª—è–µ—Ç –≤—ã—Ö–æ–¥ Q –ø–µ—Ä–µ–π—Ç–∏ –≤ –µ–¥–∏–Ω–∏—á–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ. –ê–∫—Ç–∏–≤–Ω—ã–π —Å–∏–≥–Ω–∞–ª –ø–æ –≤—Ö–æ–¥—É R –ø–µ—Ä–µ–≤–æ–¥–∏—Ç Q –≤ –Ω—É–ª–µ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ. –ü—Ä–∏ –Ω—É–ª–µ–≤–æ–º —Å–∏–≥–Ω–∞–ª–µ –Ω–∞ –æ–±–æ–∏—Ö –≤—Ö–æ–¥–∞—Ö —Ç—Ä–∏–≥–≥–µ—Ä —Ö—Ä–∞–Ω–∏—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –∞ –≤–æ—Ç –ª–æ–≥–∏–∫–∞, –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–π –Ω–∞ –æ–±–∞ –≤—Ö–æ–¥–∞ R –∏ S –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –ø–æ–¥–∞–Ω—ã –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –µ–¥–∏–Ω–∏—Ü—ã –∑–∞–≤–∏—Å–∏—Ç –æ—Ç —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ RS-—Ç—Ä–∏–≥–≥–µ—Ä–∞ - –≤ –ø—Ä–∏–≤–µ–¥–µ–Ω–Ω–æ–π —Å—Ö–µ–º–µ –æ–±–∞ –≤—ã—Ö–æ–¥–∞ –ø–µ—Ä–µ—Å—Ç–∞—é—Ç –±—ã—Ç—å –∏–Ω–≤–µ—Ä—Å–Ω—ã–º–∏ –∏ –ø–µ—Ä–µ—Ö–æ–¥—è—Ç –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ ¬´0¬ª, –æ–¥–Ω–∞–∫–æ –¥–∞–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —è–≤–ª—è–µ—Ç—Å—è –Ω–µ—É—Å—Ç–æ–π—á–∏–≤—ã–º –∏ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ –æ–¥–Ω–æ –∏–∑ —É—Å—Ç–æ–π—á–∏–≤—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π –ø—Ä–∏ —Å–Ω—è—Ç–∏–∏ —É–ø—Ä–∞–≤–ª—è—é—â–µ–≥–æ —Å–∏–≥–Ω–∞–ª–∞ —Å –æ–¥–Ω–æ–≥–æ –∏–∑ –≤—Ö–æ–¥–æ–≤.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/12/20/ngspicejs-triggery-kak-elementy-pamiati/rs-canvas.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;RS-—Ç—Ä–∏–≥–≥–µ—Ä, –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–π –Ω–∞ –ò-–ù–ï –≤–µ–Ω—Ç–∏–ª—è—Ö –≤–µ–¥—ë—Ç —Å–µ–±—è –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ, —Ç–æ–ª—å–∫–æ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –ª–æ–≥–∏—á–µ—Å–∫–æ–º ¬´0¬ª –Ω–∞ –∫–∞–∫–æ–º-–ª–∏–±–æ –∏–∑ –≤—Ö–æ–¥–æ–≤, –∞ –∫–æ–º–±–∏–Ω–∞—Ü–∏—è ¬´0¬ª –Ω–∞ –æ–±–æ–∏—Ö –≤—Ö–æ–¥–∞—Ö –ø–æ—Ä–æ–∂–¥–∞–µ—Ç –ø—Ä–æ–≤–∞–ª—ã –≤ –ø–∞–º—è—Ç–∏. –ò–∑–±–µ–∂–∞—Ç—å –Ω–µ–∂–µ–ª–∞—Ç–µ–ª—å–Ω—É—é –ª–æ–≥–∏–∫—É –ø–æ–∑–≤–æ–ª—è–µ—Ç –Ω–µ—Ö–∏—Ç—Ä—ã–π D-—Ç—Ä–∏–≥–≥–µ—Ä:&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/12/20/ngspicejs-triggery-kak-elementy-pamiati/d.sch"&gt;D-—Ç—Ä–∏–≥–≥–µ—Ä&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2016/12/20/ngspicejs-triggery-kak-elementy-pamiati/d.net"&gt;netlist&lt;/a&gt; | &lt;a href="https://ngspice.js.org/?gist=4c52e4ee25294c4321a8cb554e4a9591"&gt;ngspice.js&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/12/20/ngspicejs-triggery-kak-elementy-pamiati/show-img-d.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ngspice 1 -&amp;gt; source d.net
ngspice 2 -&amp;gt; tran 9m 9
ngspice 3 -&amp;gt; plot clock+3.5 data+7 q
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–í D-—Ç—Ä–∏–≥–≥–µ—Ä–µ –±–∏—Ç –¥–∞–Ω–Ω—ã—Ö –ø–æ—Å—Ç—É–ø–∞–µ—Ç –Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–π –≤—Ö–æ–¥ Data, –∞ –¥–ª—è –æ—Å—É—â–µ—Å—Ç–≤–ª–µ–Ω–∏—è –∑–∞–ø–∏—Å–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ–¥–∞—Ç—å –∏–º–ø—É–ª—å—Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ Clock –∏ –ø–æ—ç—Ç–æ–º—É –ø–æ–¥–æ–±–Ω—ã–µ —Ç—Ä–∏–≥–≥–µ—Ä—ã –µ—â—ë –Ω–∞–∑—ã–≤–∞—é—Ç —Ç–∞–∫—Ç–∏—Ä—É–µ–º—ã–º–∏ (—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º–∏).&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/12/20/ngspicejs-triggery-kak-elementy-pamiati/d-canvas.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–ü—Ä–∏–≤–µ–¥–µ–Ω–Ω–∞—è —Å—Ö–µ–º—ã D-—Ç—Ä–∏–≥–≥–µ—Ä–∞ —Ç–∞–∫–∂–µ –∏–∑–≤–µ—Å—Ç–Ω–∞ –ø–æ–¥ –Ω–∞–∑–≤–∞–Ω–∏–µ–º ¬´–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Ñ–∏–∫—Å–∞—Ç–æ—Ä¬ª, —Ç.–∫. –≤—ã—Ö–æ–¥ Q –Ω–∞—Å–∫–≤–æ–∑—å –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç (–ø–æ–≤—Ç–æ—Ä—è–µ—Ç) –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã–π –≤—Ö–æ–¥ Data –≤ —Ç–µ—á–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ –¥–µ–π—Å—Ç–≤–∏—è —Ç–∞–∫—Ç–æ–≤–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞ (8 —Å–µ–∫—É–Ω–¥–∞ –Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫–µ). –í –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å–ª—É—á–∞—è—Ö —Ç–∞–∫–∞—è –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å –Ω–µ–∂–µ–ª–∞—Ç–µ–ª—å–Ω–∞ –∏ —Ç–æ–≥–¥–∞ –ø—Ä–∏–º–µ–Ω—è—é—Ç –¥–≤—É—Ö—Å—Ç—É–ø–µ–Ω—á–∞—Ç—ã–µ D-—Ç—Ä–∏–≥–≥–µ—Ä—ã.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/12/20/ngspicejs-triggery-kak-elementy-pamiati/d-master-slave.sch"&gt;–¥–≤—É—Ö—Å—Ç—É–ø–µ–Ω—á–∞—Ç—ã–π D-—Ç—Ä–∏–≥–≥–µ—Ä&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2016/12/20/ngspicejs-triggery-kak-elementy-pamiati/d-master-slave.net"&gt;netlist&lt;/a&gt; | &lt;a href="https://ngspice.js.org/?gist=260267ca527fd24b3e1c836d3e93fb37"&gt;ngspice.js&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/12/20/ngspicejs-triggery-kak-elementy-pamiati/show-img-d-master-slave.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ngspice 1 -&amp;gt; source d-master-slave.net
ngspice 2 -&amp;gt; tran 10m 10
ngspice 3 -&amp;gt; plot clock+3.5 data+7 q
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–î–≤—É—Ö—Å—Ç—É–ø–µ–Ω—á–∞—Ç—ã–π D-—Ç—Ä–∏–≥–≥–µ—Ä —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –¥–≤—É—Ö —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö —Ç—Ä–∏–≥–≥–µ—Ä–æ–≤ - RS-—Ç—Ä–∏–≥–≥–µ—Ä–∞ –Ω–∞ –≤–µ–Ω—Ç–∏–ª—è—Ö U6-U9(–ø—Ä–∏ –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ–º CLR –≤—ã—Ö–æ–¥ U8 –ø–æ—Å—Ç—É–ø–∞–µ—Ç –Ω–∞ –≤—Ö–æ–¥ U9) –∏ D-—Ç—Ä–∏–≥–≥–µ—Ä–∞ –Ω–∞ U1-U5. D-—Ç—Ä–∏–≥–≥–µ—Ä —è–≤–ª—è–µ—Ç—Å—è –≤–µ–¥—É—â–∏–º (master), –∞ –≤—Ç–æ—Ä–æ–π –≤–µ–¥–æ–º—ã–º (slave).&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/12/20/ngspicejs-triggery-kak-elementy-pamiati/d-master-slave-canvas.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–ü—Ä–∏ –Ω—É–ª–µ –Ω–∞ Clock –≤–µ–¥—É—â–∏–π —Ç—Ä–∏–≥–≥–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ ¬´–ø—Ä–æ–∑—Ä–∞—á–Ω—ã–π —Ñ–∏–∫—Å–∞—Ç–æ—Ä¬ª –∏ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç/–ø–æ–≤—Ç–æ—Ä—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –Ω–∞ –≤—Ö–æ–¥–µ Data, —Ç–æ–≥–¥–∞ –∫–∞–∫ –Ω–∞ –≤–µ–¥–æ–º–æ–º –æ—Ç–∫–ª—é—á—ë–Ω —Ä–µ–∂–∏–º –∑–∞–ø–∏—Å–∏ –∏ –æ–Ω –ø—Ä–æ—Å—Ç–æ —Ö—Ä–∞–Ω–∏—Ç —Å–≤–æ—ë –ø—Ä–µ–¥—ã–¥—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ. –ü–æ –ø–µ—Ä–µ–¥–Ω–µ–º—É —Ñ—Ä–æ–Ω—Ç—É –Ω–∞ Clock —Ç–µ–ø–µ—Ä—å —É–∂–µ –∑–∞–ø–∏—Å—å –Ω–∞ –≤–µ–¥—É—â–µ–º –æ—Ç–∫–ª—é—á–µ–Ω–∞, –æ–Ω —Ö—Ä–∞–Ω–∏—Ç —Å–≤–æ—ë –ø—Ä–µ–¥—ã–¥—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, –∞ –≤–µ–¥–æ–º—ã–π –≤ —Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å –∫–æ–ø–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ—Ç –≤–µ–¥—É—â–µ–≥–æ. –î–æ —Ç–µ—Ö –ø–æ—Ä –ø–æ–∫–∞ –Ω–∞ Clock –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å –ª–æ–≥–∏—á–µ—Å–∫–∞—è –µ–¥–∏–Ω–∏—Ü–∞ —É—Ä–æ–≤–µ–Ω—å –Ω–∞ Data –Ω–µ –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è (8 —Å–µ–∫—É–Ω–¥–∞ –Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫–µ). –ß—Ç–æ –∂–µ –ø—Ä–æ–∏–∑–æ–π–¥—ë—Ç –ø–æ –∑–∞–¥–Ω–µ–º—É —Ñ—Ä–æ–Ω—Ç—É Clock ? –ù–∞ –∫–∞—Ä—Ç–∏–Ω–∫–µ —ç—Ç–æ 9 —Å–µ–∫—É–Ω–¥–∞, –ø—Ä–∏ —ç—Ç–æ–º –Ω–∞ Data –ø—Ä–∏—Ö–æ–¥–∏—Ç —É—Ä–æ–≤–µ–Ω—å –µ–¥–∏–Ω–∏—Ü—ã. –í—ã—Ö–æ–¥–∏—Ç —Ç–∞–∫ —á—Ç–æ –∑–∞–ø–∏—Å—å –∑–∞–±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –≤–µ–¥–æ–º–æ–º —Ä–∞–Ω—å—à–µ, —á–µ–º –≤–µ–¥—É—â–∏–π —É—Å–ø–µ–µ—Ç –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è.&lt;/p&gt;
&lt;p&gt;–î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —É–±—Ä–∞—Ç—å –∏–Ω–≤–µ—Ä—Ç–æ—Ä U10 –∏ –¥–≤—É—Ö—Å—Ç—É–ø–µ–Ω—á–∞—Ç—ã–π D-—Ç—Ä–∏–≥–≥–µ—Ä –Ω–∞—á–Ω—ë—Ç –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è —Ç–æ–ª—å–∫–æ –ø–æ –∑–∞–¥–Ω–µ–º—É —Ñ—Ä–æ–Ω—Ç—É Clock. –ê–ø–ø–∞—Ä–∞—Ç–Ω—ã–π —Å–±—Ä–æ—Å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –Ω–∞ —Ü–µ–ø–æ—á–∫–µ R1C1, –∞ SPICE-–¥–∏—Ä–µ–∫—Ç–∏–≤–∞ (initial condition) &lt;code&gt;.ic v(CLR)=0&lt;/code&gt; —è–≤–Ω–æ —É–∫–∞–∑—ã–≤–∞–µ—Ç —Å–∏–º—É–ª—è—Ç–æ—Ä—É –∑–∞—Ä—è–∂–∞—Ç—å –∫–æ–Ω–¥–µ–Ω—Å–∞—Ç–æ—Ä —á–µ—Å—Ç–Ω–æ. –ë–µ–∑ —ç—Ç–æ–π –¥–∏—Ä–µ–∫—Ç–∏–≤—ã –≤ –Ω–∞—á–∞–ª—å–Ω—ã–π –º–æ–º–µ–Ω—Ç —Å–∏–º—É–ª—è—Ü–∏–∏ –∫–æ–Ω–¥–µ–Ω—Å–∞—Ç–æ—Ä –±—É–¥–µ—Ç —É–∂–µ –∑–∞—Ä—è–∂–µ–Ω –∏ –ª–æ–≥–∏–∫–∞ RC —Å–±—Ä–æ—Å–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ –Ω–µ –æ—Ç—Ä–∞–±–æ—Ç–∞–µ—Ç. –ë–µ–∑ –∞–ø–ø–∞—Ä–∞—Ç–Ω–æ–≥–æ —Å–±—Ä–æ—Å–∞ –¥–æ –ø–µ—Ä–≤–æ–π —Å–µ–∫—É–Ω–¥—ã –Ω–∞ –¥–∏–∞–≥—Ä–∞–º–º–µ –ø–æ—Å–ª–µ –ø–æ–¥–∞—á–∏ –ø–∏—Ç–∞–Ω–∏—è –Ω–∞ –≤—ã—Ö–æ–¥–µ –º–æ–∂–Ω–æ –±—ã–ª–æ –±—ã –æ–∂–∏–¥–∞—Ç—å –∫–∞–∫ –ª–æ–≥–∏—á–µ—Å–∫–∏–π ¬´0¬ª —Ç–∞–∫ –∏ ¬´1¬ª.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/12/22/ngspicejs-schetchiki-i-deliteli-chastoty/"&gt;–î–∞–ª–µ–µ&lt;/a&gt; —Ü–∏—Ñ—Ä–æ–≤—ã–µ —Å—á—ë—Ç—á–∏–∫–∏.&lt;/p&gt;</content><category term="gEDA"></category><category term="ngspice"></category><category term="gate"></category></entry><entry><title>NGSPICE.js - –ª–æ–≥–∏—á–µ—Å–∫–∏–µ –≤–µ–Ω—Ç–∏–ª–∏</title><link href="http://proiot.ru/blog/posts/2016/12/18/ngspicejs-logicheskie-ventili/" rel="alternate"></link><published>2016-12-18T00:00:00+02:00</published><updated>2016-12-18T00:00:00+02:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2016-12-18:/blog/posts/2016/12/18/ngspicejs-logicheskie-ventili/</id><summary type="html">&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/10/28/vvedenie-v-simuliatsiiu-elektricheskikh-skhem-s-pomoshchiu-ngspicejs/"&gt;–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º&lt;/a&gt; –æ—Å–≤–∞–∏–≤–∞—Ç—å NGSPICE.&lt;/p&gt;
&lt;p&gt;–ê–Ω–∞–ª–æ–≥–æ–≤—ã–π —Å–∏–≥–Ω–∞–ª –∏–∑–º–µ–Ω—è–µ—Ç—Å—è –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ - –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–π –≤–µ–ª–∏—á–∏–Ω–µ –∏ –º–æ–∂–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å –ª—é–±—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏. –î–∏—Å–∫—Ä–µ—Ç–Ω—ã–π —Å–∏–≥–Ω–∞–ª –∏–º–µ–µ—Ç –∫–æ–Ω–µ—á–Ω–æ–µ —á–∏—Å–ª–æ –∑–Ω–∞—á–µ–Ω–∏–π. –û–±—ã—á–Ω–æ —Ü–∏—Ñ—Ä–æ–≤–æ–π —Å–∏–≥–Ω–∞–ª –º–æ–∂–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å —Ç–æ–ª—å–∫–æ –¥–≤–∞ –¥–∏—Å–∫—Ä–µ—Ç–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏—è 0 –∏ 1 - –Ω–∞–ø—Ä–∏–º–µ—Ä –∑–∞ –Ω–æ–ª—å –ø—Ä–∏–Ω–∏–º–∞–µ—Ç—Å—è —É—Ä–æ–≤–µ–Ω—å –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –æ—Ç 0 –¥–æ 0,5 ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/10/28/vvedenie-v-simuliatsiiu-elektricheskikh-skhem-s-pomoshchiu-ngspicejs/"&gt;–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º&lt;/a&gt; –æ—Å–≤–∞–∏–≤–∞—Ç—å NGSPICE.&lt;/p&gt;
&lt;p&gt;–ê–Ω–∞–ª–æ–≥–æ–≤—ã–π —Å–∏–≥–Ω–∞–ª –∏–∑–º–µ–Ω—è–µ—Ç—Å—è –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ - –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–π –≤–µ–ª–∏—á–∏–Ω–µ –∏ –º–æ–∂–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å –ª—é–±—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤ –ª—é–±–æ–π –º–æ–º–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏. –î–∏—Å–∫—Ä–µ—Ç–Ω—ã–π —Å–∏–≥–Ω–∞–ª –∏–º–µ–µ—Ç –∫–æ–Ω–µ—á–Ω–æ–µ —á–∏—Å–ª–æ –∑–Ω–∞—á–µ–Ω–∏–π. –û–±—ã—á–Ω–æ —Ü–∏—Ñ—Ä–æ–≤–æ–π —Å–∏–≥–Ω–∞–ª –º–æ–∂–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å —Ç–æ–ª—å–∫–æ –¥–≤–∞ –¥–∏—Å–∫—Ä–µ—Ç–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏—è 0 –∏ 1 - –Ω–∞–ø—Ä–∏–º–µ—Ä –∑–∞ –Ω–æ–ª—å –ø—Ä–∏–Ω–∏–º–∞–µ—Ç—Å—è —É—Ä–æ–≤–µ–Ω—å –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –æ—Ç 0 –¥–æ 0,5 –í, –∞ –≤—Å—ë —á—Ç–æ –≤—ã—à–µ —Å—á–∏—Ç–∞–µ—Ç—Å—è –µ–¥–∏–Ω–∏—Ü–µ–π. –ù–∞ —ç—Ç–∞–ø–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –∞–Ω–∞–ª–æ–≥–æ–≤–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞ –≤ —Ü–∏—Ñ—Ä–æ–≤–æ–π —Ñ–∏–∑–∏—á–µ—Å–∫–∞—è –≤–µ–ª–∏—á–∏–Ω–∞ —Ñ–∏–∫—Å–∏—Ä—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã –≤—Ä–µ–º–µ–Ω–∏ –∏ —Ç–æ–ª—å–∫–æ –≤ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö –ø—Ä–µ–¥–µ–ª–∞—Ö (–æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã—Ö —Ä–∞–∑—Ä—è–¥–Ω–æ—Å—Ç—å—é) –∏ –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –Ω–µ–∏–∑–±–µ–∂–Ω–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∫–∞–∫–∞—è-—Ç–æ —á–∞—Å—Ç–∏—á–Ω–∞—è –ø–æ—Ç–µ—Ä—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏, –æ–¥–Ω–∞–∫–æ —Ü–∏—Ñ—Ä–æ–≤—ã–µ —Å–∏–≥–Ω–∞–ª—ã –Ω–∞ –ø–æ—Ä—è–¥–æ–∫ –ª—É—á—à–µ –∑–∞—â–∏—â–µ–Ω—ã –æ—Ç –¥–µ–π—Å—Ç–≤–∏—è —à—É–º–æ–≤, –Ω–∞–≤–æ–¥–æ–∫ –∏ –ø–æ–º–µ—Ö, –≤–µ–¥—å —á—Ç–æ 0.1 –í, —á—Ç–æ 0.3 –í —ç—Ç–æ –≤–µ–¥—å –≤—Å—ë —Ç–æ—Ç –∂–µ 0. –ü–æ–≤–µ–¥–µ–Ω–∏–µ —Ü–∏—Ñ—Ä–æ–≤—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –≤—Å–µ–≥–¥–∞ –º–æ–∂–Ω–æ –∞–±—Å–æ–ª—é—Ç–Ω–æ —Ç–æ—á–Ω–æ —Ä–∞—Å—Å—á–∏—Ç–∞—Ç—å –∏ –ø—Ä–µ–¥—Å–∫–∞–∑–∞—Ç—å –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å –ø–æ–º–æ—â—å—é –ë—É–ª–µ–≤–æ–π –∞–ª–≥–µ–±—Ä—ã. –í –æ—Å–Ω–æ–≤–µ –¥–∞–Ω–Ω–æ–π –∞–ª–≥–µ–±—Ä–∞–∏—á–µ—Å–∫–æ–π —Å–∏—Å—Ç–µ–º—ã –ª–µ–∂–∞—Ç —Å–ª–µ–¥—É—é—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏: –∫–æ–Ω—ä—é–Ω–∫—Ü–∏—è (–ª–æ–≥–∏—á–µ—Å–∫–æ–µ —É–º–Ω–æ–∂–µ–Ω–∏–µ, –æ–ø–µ—Ä–∞—Ç–æ—Ä ¬´AND¬ª), –¥–∏–∑—ä—é–Ω–∫—Ü–∏—è (–ª–æ–≥–∏—á–µ—Å–∫–æ–µ —Å–ª–æ–∂–µ–Ω–∏–µ, –æ–ø–µ—Ä–∞—Ç–æ—Ä ¬´OR¬ª) –∏ –æ—Ç—Ä–∏—Ü–∞–Ω–∏–µ (–æ–ø–µ—Ä–∞—Ç–æ—Ä ¬´NOT¬ª). –¶–∏—Ñ—Ä–æ–≤—ã–µ —Å—Ö–µ–º—ã, —Ä–µ–∞–ª–∏–∑—É—é—â–∏–µ —ç—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–∏–Ω—è—Ç–æ –Ω–∞–∑—ã–≤–∞—Ç—å –ª–æ–≥–∏—á–µ—Å–∫–∏–º–∏ –≤–µ–Ω—Ç–∏–ª—è–º–∏.&lt;/p&gt;
&lt;p&gt;–ü–æ–¥–∞–≤–ª—è—é—â–µ–µ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –º–∏–∫—Ä–æ—Å—Ö–µ–º, –≤ —Ç–æ–º —á–∏—Å–ª–µ –ø—Ä–æ—Ü–µ—Å—Å–æ—Ä–æ–≤, –∏—Å–ø–æ–ª—å–∑—É—é—Ç –ö–ú–û–ü (CMOS) —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—é –Ω–∞ &lt;a href="http://proiot.ru/blog/posts/2016/11/03/ngspicejs-polevoi-tranzistor/"&gt;–ø–æ–ª–µ–≤—ã—Ö&lt;/a&gt; —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä–∞—Ö, —Ç.–∫. –æ–Ω–∞ –≤—ã–≥–æ–¥–Ω–æ –≤—ã–¥–µ–ª—è–µ—Ç—Å—è –æ—á–µ–Ω—å –º–∞–ª—ã–º —ç–Ω–µ—Ä–≥–æ–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ–º –Ω–∞ —Ñ–æ–Ω–µ –¥—Ä—É–≥–∏—Ö –æ–±–∏—Ç–∞—Ç–µ–ª–µ–π –∑–æ–æ–ø–∞—Ä–∫–∞ (–¢–¢–õ, –î–¢–õ, –†–¢–õ, –≠–°–õ –∏ —Ç.–¥.).&lt;/p&gt;
&lt;p&gt;–í —Å–ª–µ–¥—É—é—â–∏—Ö —Å—Ö–µ–º–∞—Ö –¥–ª—è —Å–∏–º—É–ª—è—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å SPICE –º–æ–¥–µ–ª–∏ –∫–æ–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ä–Ω—ã—Ö &lt;a href="http://proiot.ru/blog/posts/2016/11/03/ngspicejs-polevoi-tranzistor/"&gt;MOSFET&lt;/a&gt; —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä–æ–≤: &lt;a href="http://proiot.ru/blog/posts/2016/12/18/ngspicejs-logicheskie-ventili/pMOSe.txt"&gt;p-–∫–∞–Ω–∞–ª&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2016/12/18/ngspicejs-logicheskie-ventili/nMOSe.txt"&gt;n-–∫–∞–Ω–∞–ª&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/12/18/ngspicejs-logicheskie-ventili/logic-gate.sch"&gt;–ö–ú–û–ü –≤–µ–Ω—Ç–∏–ª–∏&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2016/12/18/ngspicejs-logicheskie-ventili/logic-gate.net"&gt;netlist&lt;/a&gt; | &lt;a href="https://ngspice.js.org/?gist=97f3ffa9bf4ef930231b1efb3fe04c58"&gt;ngspice.js&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/12/18/ngspicejs-logicheskie-ventili/show-img-logic-gate.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ngspice 1 -&amp;gt; source logic-gate.net
ngspice 2 -&amp;gt; dc v2 0 3 3 v3 0 3 3
ngspice 3 -&amp;gt; print in1 in2 nor
ngspice 4 -&amp;gt; print ceil(max(in1-0.5,0)/2.5) ceil(max(in2-0.5,0)/2.5) ceil(max(nor-0.5,0)/2.5)
ngspice 5 -&amp;gt; print in1 in2 nand
ngspice 6 -&amp;gt; print ceil(max(in1-0.5,0)/2.5) ceil(max(in2-0.5,0)/2.5) ceil(max(nand-0.5,0)/2.5)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ù–∞ —Å—Ö–µ–º–µ —Å–ª–µ–≤–∞ –≤–µ–Ω—Ç–∏–ª—å –ò–õ–ò-–ù–ï, –∞ —Ä—è–¥–æ–º –ò-–ù–ï. –ü–æ—Å–∫–æ–ª—å–∫—É –º–∞–ª–æ–º–æ—â–Ω—ã–µ –ø–æ–ª–µ–≤—ã–µ —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä—ã –æ—á–µ–Ω—å —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã –∫ —Å—Ç–∞—Ç–∏—Å—Ç–∏—á–µ—Å–∫–æ–º—É —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å—Ç–≤—É, –Ω–∞ –≤—Ö–æ–¥–∞—Ö –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ —Å—Ç–∞–≤—è—Ç –æ–≥—Ä–∞–Ω–∏—á–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∏–æ–¥—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞ –ª–æ–≥–∏–∫—É –Ω–µ –≤–ª–∏—è—é—Ç. –ï—â—ë –µ—Å–ª–∏ –ø—Ä–∏—Å–º–æ—Ç—Ä–µ—Ç—å—Å—è, —Ç–æ –æ—á–µ–≤–∏–¥–Ω–æ &lt;a href="http://proiot.ru/blog/posts/2016/11/09/ngspicejs-usilitelnyi-kaskad-s-obshchim-kollektorom/"&gt;–≤—Ö–æ–¥–Ω–æ–µ&lt;/a&gt; —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä–∞ Q7 &amp;gt; Q8 (—Ä–æ–≤–Ω–æ –∫–∞–∫ –∏ Q2 &amp;gt; Q1) –∏ –¥–ª—è —Å–∏–º–º–µ—Ç—Ä–∏–∏ –ø–æ–¥–ª–æ–∂–∫—É Q7(Q2) –º–æ–∂–Ω–æ –±—ã–ª–æ –±—ã —Å–æ–µ–¥–∏–Ω–∏—Ç—å —Å –ø–æ–¥–ª–æ–∂–∫–æ–π Q8(Q1). –ù–æ —Å —É—á—ë—Ç–æ–º –æ—á–µ–Ω—å –±–æ–ª—å—à–æ–≥–æ –≤—Ö–æ–¥–Ω–æ–≥–æ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏—è —É –ø–æ–ª–µ–≤—ã—Ö —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä–æ–≤ –≤ —É—á–µ–±–Ω—ã—Ö —Ü–µ–ª—è—Ö –∞—Å–∏–º–º–µ—Ç—Ä–∏–µ–π –º–æ–∂–Ω–æ —Å–ø–æ–∫–æ–π–Ω–æ –ø—Ä–µ–Ω–µ–±—Ä–µ—á—å. –¢–∞–±–ª–∏—Ü–∞ –∏—Å—Ç–∏–Ω–Ω–æ—Å—Ç–∏:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;---------------------------------------------------------------------------------
Index             in1                 in2                 nor                nand
---------------------------------------------------------------------------------
0        0.000000e+00        0.000000e+00        1.000000e+00        1.000000e+00
1        1.000000e+00        0.000000e+00        0.000000e+00        1.000000e+00
2        0.000000e+00        1.000000e+00        0.000000e+00        1.000000e+00
3        1.000000e+00        1.000000e+00        0.000000e+00        0.000000e+00
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–í–µ–Ω—Ç–∏–ª–∏ –ò–õ–ò-–ù–ï, –ò-–ù–ï —è–≤–ª—è—é—Ç—Å—è —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–º–∏ –∏ —Å–∞–º–æ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–º–∏ - –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–≥–æ –∏—Ö –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –º–æ–∂–Ω–æ —Å–∏–Ω—Ç–µ–∑–∏—Ä–æ–≤–∞—Ç—å –ª—é–±—É—é –ª–æ–≥–∏–∫—É. –î–ª—è –¥–∞–ª—å–Ω–µ–π—à–∏—Ö —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤ —É–¥–æ–±–Ω–æ –≤—ã–Ω–µ—Å—Ç–∏ –∫–∞–∂–¥—ã–π –≤–µ–Ω—Ç–∏–ª—å –≤ –æ—Ç–¥–µ–ª—å–Ω—É—é –ø–æ–¥—Å—Ö–µ–º—É SUBCKT.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;nand.lib&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;.SUBCKT NAND IN1 IN2 OUT Vcc GND
.model nMOSe nmos (vto=1)
.model pMOSe pmos (vto=-1)
MQ7 OUT IN1 2 2 nMOSe
MQ8 2 IN2 GND GND nMOSe
MQ6 OUT IN2 Vcc Vcc pMOSe
MQ5 OUT IN1 Vcc Vcc pMOSe
.ENDS NAND
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;em&gt;nor.lib&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;.SUBCKT NOR IN1 IN2 OUT Vcc GND
.model nMOSe nmos (vto=1)
.model pMOSe pmos (vto=-1)
MQ3 OUT IN2 GND GND nMOSe
MQ4 OUT IN1 GND GND nMOSe
MQ1 1 IN2 Vcc Vcc pMOSe
MQ2 OUT IN1 1 1 pMOSe
.ENDS NOR
&lt;/pre&gt;&lt;/div&gt;


&lt;!-- 
&lt;a href="http://proiot.ru/blog/posts/2016/12/18/ngspicejs-logicheskie-ventili/nand42.sym"&gt;&lt;/a&gt;
&lt;a href="http://proiot.ru/blog/posts/2016/12/18/ngspicejs-logicheskie-ventili/nor42.sym"&gt;&lt;/a&gt;
&lt;a href="http://proiot.ru/blog/posts/2016/12/18/ngspicejs-logicheskie-ventili/nor.lib"&gt;&lt;/a&gt;
&lt;a href="http://proiot.ru/blog/posts/2016/12/18/ngspicejs-logicheskie-ventili/nand.lib"&gt;&lt;/a&gt;
--&gt;

&lt;!-- 
sudo cp nor42.sym nand42.sym /usr/share/gEDA/sym/local/
--&gt;

&lt;p&gt;–ü—Ä–∞–≤–∏–ª–∞ –¥–µ –ú–æ—Ä–≥–∞–Ω–∞ –≤ –∫—Ä–∞—Ç–∫–æ–π —Ñ–æ—Ä–º–µ - &lt;em&gt;–æ—Ç—Ä–∏—Ü–∞–Ω–∏–µ –∫–æ–Ω—ä—é–Ω–∫—Ü–∏–∏ –µ—Å—Ç—å –¥–∏–∑—ä—é–Ω–∫—Ü–∏—è –æ—Ç—Ä–∏—Ü–∞–Ω–∏–π, –æ—Ç—Ä–∏—Ü–∞–Ω–∏–µ –¥–∏–∑—ä—é–Ω–∫—Ü–∏–∏ –µ—Å—Ç—å –∫–æ–Ω—ä—é–Ω–∫—Ü–∏—è –æ—Ç—Ä–∏—Ü–∞–Ω–∏–π&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/12/18/ngspicejs-logicheskie-ventili/demorgan.sch"&gt;–ø—Ä–∞–≤–∏–ª–∞ –¥–µ –ú–æ—Ä–≥–∞–Ω–∞&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2016/12/18/ngspicejs-logicheskie-ventili/demorgan.net"&gt;netlist&lt;/a&gt; | &lt;a href="https://ngspice.js.org/?gist=03e138a7ac3b861e69b685358b862539"&gt;ngspice.js&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/12/18/ngspicejs-logicheskie-ventili/show-img-demorgan.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ngspice 1 -&amp;gt; source demorgan.net
ngspice 2 -&amp;gt; dc v2 0 3 3 v3 0 3 3
ngspice 3 -&amp;gt; print in1 in2 &amp;quot;or&amp;quot;
ngspice 4 -&amp;gt; print ceil(max(in1-0.5,0)/2.5) ceil(max(in2-0.5,0)/2.5) ceil(max(&amp;quot;or&amp;quot;-0.5,0)/2.5)
ngspice 5 -&amp;gt; print in1 in2 &amp;quot;and&amp;quot;
ngspice 6 -&amp;gt; print ceil(max(in1-0.5,0)/2.5) ceil(max(in2-0.5,0)/2.5) ceil(max(&amp;quot;and&amp;quot;-0.5,0)/2.5)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ö–∞–∫ –Ω–∏ —Å—Ç—Ä–∞–Ω–Ω–æ —Ç–∞–±–ª–∏—Ü–∞ –∏—Å—Ç–∏–Ω–Ω–æ—Å—Ç–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ—Å—Ç—å –ø—Ä–∞–≤–∏–ª –ú–æ—Ä–≥–∞–Ω–∞ –≤ –¥–µ–π—Å—Ç–≤–∏–∏:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;---------------------------------------------------------------------------------
Index             in1                 in2                  or                 and
---------------------------------------------------------------------------------
0        0.000000e+00        0.000000e+00        0.000000e+00        0.000000e+00
1        1.000000e+00        0.000000e+00        1.000000e+00        0.000000e+00
2        0.000000e+00        1.000000e+00        1.000000e+00        0.000000e+00
3        1.000000e+00        1.000000e+00        1.000000e+00        1.000000e+00
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–π –ª–∏–Ω–µ–π–∫–æ–π –∏–Ω—Ç–µ–≥—Ä–∞–ª—å–Ω—ã—Ö —Å—Ö–µ–º –Ω–∞ –ö–ú–û–ü —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ —è–≤–ª—è–µ—Ç—Å—è 4000 —Å–µ—Ä–∏—è, –Ω–∞–ø—Ä–∏–º–µ—Ä –Ω–∞ –±–æ—Ä—Ç—É 4001 —Ä–∞—Å–ø–æ–ª–∞–≥–∞—é—Ç—Å—è —á–µ—Ç—ã—Ä–µ –≤–µ–Ω—Ç–∏–ª—è 2–ò–õ–ò-–ù–ï. –ò –µ—â—ë –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≤—Ö–æ–¥–æ–≤ —É –ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –≤–µ–Ω—Ç–∏–ª–µ–π –Ω–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–æ –¥–≤—É–º—è - –Ω–∞–ø—Ä–∏–º–µ—Ä –±—ã–≤–∞—é—Ç 3–ò–õ–ò, 5–ò-–ù–ï –∏–ª–∏ –±–æ–ª—å—à–µ.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/12/20/ngspicejs-triggery-kak-elementy-pamiati/"&gt;–î–∞–ª–µ–µ&lt;/a&gt; —Ç—Ä–∏–≥–≥–µ—Ä—ã.&lt;/p&gt;</content><category term="gEDA"></category><category term="ngspice"></category><category term="gate"></category></entry><entry><title>NGSPICE.js - –∏–Ω—Ç–µ–≥—Ä–∞–ª—å–Ω—ã–µ —Ç–∞–π–º–µ—Ä—ã</title><link href="http://proiot.ru/blog/posts/2016/12/13/ngspicejs-integralnye-taimery/" rel="alternate"></link><published>2016-12-13T00:00:00+02:00</published><updated>2016-12-13T00:00:00+02:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2016-12-13:/blog/posts/2016/12/13/ngspicejs-integralnye-taimery/</id><summary type="html">&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/10/28/vvedenie-v-simuliatsiiu-elektricheskikh-skhem-s-pomoshchiu-ngspicejs/"&gt;–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º&lt;/a&gt; –æ—Å–≤–∞–∏–≤–∞—Ç—å NGSPICE.&lt;/p&gt;
&lt;p&gt;–ü–µ—Ä–≤—ã–µ –º–∏–∫—Ä–æ—Å—Ö–µ–º—ã –∏–Ω—Ç–µ–≥—Ä–∞–ª—å–Ω—ã—Ö —Ç–∞–π–º–µ—Ä–æ–≤ –ø–æ—è–≤–∏–ª–∏—Å—å –≤ 1971 –≥. –∏ –±—ã–ª–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã —Ñ–∏—Ä–º–æ–π Signetics Corporation (SE555 –∏ NE555), –ø–æ–∑–≤–æ–ª—è—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ç–æ—á–Ω—ã–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã –ø—É—Ç—ë–º –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤—Ä–µ–º—è–∑–∞–¥–∞—é—â–∏—Ö —Ä–µ–∑–∏—Å—Ç–æ—Ä–æ–≤ –∏ –∫–æ–Ω–¥–µ–Ω—Å–∞—Ç–æ—Ä–æ–≤. –ò–Ω—Ç–µ–≥—Ä–∞–ª—å–Ω—ã–µ —Ç–∞–π–º–µ—Ä—ã —Å–æ—á–µ—Ç–∞—é—Ç –≤ —Å–µ–±–µ –∫–∞–∫ —ç–ª–µ–º–µ–Ω—Ç—ã –∞–Ω–∞–ª–æ–≥–æ–≤–æ–π —Å—Ö–µ–º–æ—Ç–µ—Ö–Ω–∏–∫–∏ - &lt;a href="http://proiot.ru/blog/posts/2016/11/24/ngspicejs-komparator-i-trigger-shmitta-na-ou/"&gt;–∫–æ–º–ø–∞—Ä–∞—Ç–æ—Ä—ã&lt;/a&gt;, —Ç–∞–∫ –∏ —Ü–∏—Ñ—Ä–æ–≤–æ–π - &lt;a href="http://proiot.ru/blog/posts/2016/12/20/ngspicejs-triggery-kak-elementy-pamiati/"&gt;—Ç—Ä–∏–≥–≥–µ—Ä—ã&lt;/a&gt;. –í –Ω–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è —Å—É—â–µ—Å—Ç–≤—É–µ—Ç ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/10/28/vvedenie-v-simuliatsiiu-elektricheskikh-skhem-s-pomoshchiu-ngspicejs/"&gt;–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º&lt;/a&gt; –æ—Å–≤–∞–∏–≤–∞—Ç—å NGSPICE.&lt;/p&gt;
&lt;p&gt;–ü–µ—Ä–≤—ã–µ –º–∏–∫—Ä–æ—Å—Ö–µ–º—ã –∏–Ω—Ç–µ–≥—Ä–∞–ª—å–Ω—ã—Ö —Ç–∞–π–º–µ—Ä–æ–≤ –ø–æ—è–≤–∏–ª–∏—Å—å –≤ 1971 –≥. –∏ –±—ã–ª–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ã —Ñ–∏—Ä–º–æ–π Signetics Corporation (SE555 –∏ NE555), –ø–æ–∑–≤–æ–ª—è—è —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ç–æ—á–Ω—ã–µ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã –ø—É—Ç—ë–º –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –≤—Ä–µ–º—è–∑–∞–¥–∞—é—â–∏—Ö —Ä–µ–∑–∏—Å—Ç–æ—Ä–æ–≤ –∏ –∫–æ–Ω–¥–µ–Ω—Å–∞—Ç–æ—Ä–æ–≤. –ò–Ω—Ç–µ–≥—Ä–∞–ª—å–Ω—ã–µ —Ç–∞–π–º–µ—Ä—ã —Å–æ—á–µ—Ç–∞—é—Ç –≤ —Å–µ–±–µ –∫–∞–∫ —ç–ª–µ–º–µ–Ω—Ç—ã –∞–Ω–∞–ª–æ–≥–æ–≤–æ–π —Å—Ö–µ–º–æ—Ç–µ—Ö–Ω–∏–∫–∏ - &lt;a href="http://proiot.ru/blog/posts/2016/11/24/ngspicejs-komparator-i-trigger-shmitta-na-ou/"&gt;–∫–æ–º–ø–∞—Ä–∞—Ç–æ—Ä—ã&lt;/a&gt;, —Ç–∞–∫ –∏ —Ü–∏—Ñ—Ä–æ–≤–æ–π - &lt;a href="http://proiot.ru/blog/posts/2016/12/20/ngspicejs-triggery-kak-elementy-pamiati/"&gt;—Ç—Ä–∏–≥–≥–µ—Ä—ã&lt;/a&gt;. –í –Ω–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –¥–≤–µ —Ä–∞–∑–Ω–æ–≤–∏–¥–Ω–æ—Å—Ç–∏ 555-—Ç–∞–π–º–µ—Ä–æ–≤ - –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–µ, –∏–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–Ω—ã–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ &lt;a href="http://proiot.ru/blog/posts/2016/11/02/ngspicejs-bipoliarnyi-tranzistor/"&gt;–±–∏–ø–æ–ª—è—Ä–Ω—ã—Ö&lt;/a&gt; —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä–æ–≤, –∏ –∏—Ö —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∞–Ω–∞–ª–æ–≥–∏ —Å –º–µ–Ω—å—à–∏–º —ç–Ω–µ—Ä–≥–æ–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ–º –Ω–∞ &lt;a href="http://proiot.ru/blog/posts/2016/11/03/ngspicejs-polevoi-tranzistor/"&gt;–ø–æ–ª–µ–≤—ã—Ö&lt;/a&gt; —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä–∞—Ö. –ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —Ä–∞–∑–ª–∏—á–∏—è –≤ –ø—Ä–∏–Ω—Ü–∏–ø–∏–∞–ª—å–Ω—ã—Ö —Å—Ö–µ–º–∞—Ö –∏ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è—Ö –∏–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è 555-—Ç–∞–π–º–µ—Ä–æ–≤ –æ—Ç —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–µ–π –≤—Å–µ –æ–Ω–∏ –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≤–º–µ—Å—Ç–∏–º—ã –ø–æ –Ω–æ–º–µ—Ä–∞–º –∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—é –≤—ã–≤–æ–¥–æ–≤ –∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ. –ù–∞ –±–ª–æ–∫-—Å—Ö–µ–º–µ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–≥–æ 555-—Ç–∞–π–º–µ—Ä–∞  –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –¥–µ–ª–∏—Ç–µ–ª—å –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –∏–∑ —Ç—Ä—ë—Ö –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö —Ä–µ–∑–∏—Å—Ç–æ—Ä–æ–≤ 5 –∫–û–º - –æ—Ç—Å—é–¥–∞ –∏ –Ω–∞–∑–≤–∞–Ω–∏–µ 555. –í —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –º–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è—Ö –Ω–∞ –ø–æ–ª–µ–≤—ã—Ö —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä–∞—Ö –Ω–æ–º–∏–Ω–∞–ª—ã —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–π –º–æ–≥—É—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/12/13/ngspicejs-integralnye-taimery/LM555_diagram.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–ù–∞ –±–ª–æ–∫-—Å—Ö–µ–º–µ –∏–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—â–∏–π –≤—Ö–æ–¥ –ø–µ—Ä–≤–æ–≥–æ –∫–æ–º–ø–∞—Ä–∞—Ç–æ—Ä–∞ —Å –æ–ø–æ—Ä–Ω—ã–º –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ–º 1/3 –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –ø–∏—Ç–∞–Ω–∏—è —Å–æ–µ–¥–∏–Ω—ë–Ω —Å –Ω–æ–≥–æ–π Trigger. –í —Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å Threshold –ø–æ—Å—Ç—É–ø–∞–µ—Ç –Ω–∞ –Ω–µ–∏–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—â–∏–π –≤—Ö–æ–¥ –≤—Ç–æ—Ä–æ–≥–æ –∫–æ–º–ø–∞—Ä–∞—Ç–æ—Ä–∞ —Å –æ–ø–æ—Ä–Ω—ã–º –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ–º 2/3 –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –ø–∏—Ç–∞–Ω–∏—è. –° –≤—ã—Ö–æ–¥–æ–≤ –æ–±–æ–∏—Ö –∫–æ–º–ø–∞—Ä–∞—Ç–æ—Ä–æ–≤ —Å–∏–≥–Ω–∞–ª –ø–æ—Å—Ç—É–ø–∞–µ—Ç –Ω–∞ RS-—Ç—Ä–∏–≥–≥–µ—Ä (flip-flop). –î–ª—è —Ä–∞–∑–º–∏–Ω–∫–∏ –Ω–∞—á–Ω—ë–º —Å &lt;em&gt;—Ç–∞–±–ª–∏—Ü—ã –∏—Å—Ç–∏–Ω–Ω–æ—Å—Ç–∏&lt;/em&gt; —Ç—Ä–∏–≥–≥–µ—Ä–∞ c —É—á—ë—Ç–æ–º –∏–Ω–≤–µ—Ä—Å–∏–∏ –≤—Ö–æ–¥–∞ Trigger. &lt;/p&gt;
&lt;!-- 
&lt;a href="http://proiot.ru/blog/posts/2016/12/13/ngspicejs-integralnye-taimery/tlc555.mod"&gt;&lt;/a&gt;
--&gt;

&lt;p&gt;–í —Å–ª–µ–¥—É—é—â–∏—Ö —Å—Ö–µ–º–∞—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å SPICE –º–æ–¥–µ–ª—å –∏–Ω—Ç–µ–≥—Ä–∞–ª—å–Ω–æ–≥–æ —Ç–∞–π–º–µ—Ä–∞ TLC555 –Ω–∞ –ø–æ–ª–µ–≤—ã—Ö —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä–∞—Ö:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ wget http://www.ti.com/sc/data/msp/models/tlc555.mod
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/12/13/ngspicejs-integralnye-taimery/truth-table.sch"&gt;—Ç–∞–±–ª–∏—Ü–∞ –∏—Å—Ç–∏–Ω–Ω–æ—Å—Ç–∏&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2016/12/13/ngspicejs-integralnye-taimery/truth-table.net"&gt;netlist&lt;/a&gt; | &lt;a href="https://ngspice.js.org/?gist=b2fe36f55bb43550a2110e80c7b5d0f0"&gt;ngspice.js&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/12/13/ngspicejs-integralnye-taimery/show-img-truth-table.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ngspice 1 -&amp;gt; source truth-table.net
ngspice 2 -&amp;gt; dc rr2 0 1g 1g rs2 0 1g 1g
ngspice 3 -&amp;gt; print s r q
ngspice 4 -&amp;gt; print ceil(max(1.5-s,0)/1.5) ceil(max(r-1.5,0)/1.5) ceil(max(q-1.5,0)/1.5)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ü–æ—Å–ª–µ–¥–Ω—è—è —Å—Ç—Ä–æ—á–∫–∞ –∑–¥–µ—Å—å –ø–æ–º–æ–≥–∞–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∞–Ω–∞–ª–æ–≥–æ–≤—ã–µ –≤–µ–ª–∏—á–∏–Ω—ã –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –∫ –¥–≤–æ–∏—á–Ω–æ–º—É –≤–∏–¥—É 0 –∏–ª–∏ 1. –ü–æ–ª—É—á–µ–Ω–Ω–∞—è —Ç–∞–±–ª–∏—Ü—ã –∏—Å—Ç–∏–Ω–Ω–æ—Å—Ç–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —É–ø—Ä–æ—â—ë–Ω–Ω–∞—è —Ç.–∫. –ø—Ä–µ–¥—ã–¥—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ç—Ä–∏–≥–≥–µ—Ä–∞ –≤—Å–µ–≥–¥–∞ –∞–ø–ø–∞—Ä–∞—Ç–Ω–æ —Å–±—Ä–æ—à–µ–Ω–Ω–æ–µ. –í—Ü–µ–ª–æ–º –ª–æ–≥–∏–∫–∞ —Ç–∏–ø–∏—á–Ω–∞—è –µ—Å–ª–∏ —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å —Å –æ–±—ã—á–Ω—ã–º–∏ RS-—Ç—Ä–∏–≥–≥–µ—Ä–∞–º–∏ (R - reset, S - set) –∑–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º –æ–¥–Ω–æ–π –∫–æ–º–±–∏–Ω–∞—Ü–∏–∏ &lt;code&gt;R=S=1&lt;/code&gt;, –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–π –Ω–∞ –≤—ã—Ö–æ–¥–µ –∏–º–µ–µ–º –µ–¥–∏–Ω–∏—Ü—É - –ø–æ–ª—É—á–∞–µ—Ç—Å—è S –∫–∞–∫ –±—ã —Å–∏–ª—å–Ω–µ–µ R:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;-------------------------------------------------
Index       s               r               q               
-------------------------------------------------
0    1.000000e+00    0.000000e+00    1.000000e+00    
1    1.000000e+00    1.000000e+00    1.000000e+00    
2    0.000000e+00    0.000000e+00    0.000000e+00    
3    0.000000e+00    1.000000e+00    0.000000e+00
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ù–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ 555-—Ç–∞–π–º–µ—Ä—ã —è–≤–ª—è—é—Ç—Å—è –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–º–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏ –∏ –º–æ–≥—É—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏, —Ö–æ—Ç—è –Ω–∞–∏–±–æ–ª—å—à–µ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –Ω–∞—Ö–æ–¥—è—Ç —Ç–æ–ª—å–∫–æ –ø–µ—Ä–≤—ã–µ –¥–≤–µ, –∫–æ—Ç–æ—Ä—ã–µ —è–≤–ª—è—é—Ç—Å—è –∫–ª–∞—Å—Å–∏–∫–æ–π –¥–ª—è –º–∏–∫—Ä–æ—Å—Ö–µ–º –¥–∞–Ω–Ω–æ–≥–æ —Å–µ–º–µ–π—Å—Ç–≤–∞:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;–∂–¥—É—â–∏–π –º—É–ª—å—Ç–∏–≤–∏–±—Ä–∞—Ç–æ—Ä (–∏–Ω–æ–≥–¥–∞ –≥–æ–≤–æ—Ä—è—Ç –æ–¥–Ω–æ–≤–∏–±—Ä–∞—Ç–æ—Ä) &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω—ã—Ö –∏–º–ø—É–ª—å—Å–æ–≤ (–º—É–ª—å—Ç–∏–≤–∏–±—Ä–∞—Ç–æ—Ä)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä, —É–ø—Ä–∞–≤–ª—è–µ–º—ã–π –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ–º (–ì–£–ù)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;—Ç—Ä–∏–≥–≥–µ—Ä &lt;a href="http://proiot.ru/blog/posts/2016/11/24/ngspicejs-komparator-i-trigger-shmitta-na-ou/"&gt;–®–º–∏—Ç—Ç–∞&lt;/a&gt;, RS-—Ç—Ä–∏–≥–≥–µ—Ä (–±–∏—Å—Ç–∞–±–∏–ª—å–Ω—ã–π –º—É–ª—å—Ç–∏–≤–∏–±—Ä–∞—Ç–æ—Ä)&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;–í –∂–¥—É—â–µ–º –º—É–ª—å—Ç–∏–≤–∏–±—Ä–∞—Ç–æ—Ä–µ —Å–∏—Å—Ç–µ–º–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —É—Å—Ç–æ–π—á–∏–≤–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –¥–æ —Ç–µ—Ö –ø–æ—Ä –ø–æ–∫–∞ –Ω–∞ –≤—Ö–æ–¥ –Ω–µ –ø–æ—Å—Ç—É–ø–∏—Ç –∏–º–ø—É–ª—å—Å, –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–µ –∏–º–µ–µ—Ç –æ—Å–æ–±–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è, –ø–æ—Ä–æ–∂–¥–∞—è –≤—ã—Ö–æ–¥–Ω–æ–π –∏–º–ø—É–ª—å—Å —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω–æ–π –ø—Ä–∏ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ —Å—Ö–µ–º—ã –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏. –ù–∞–∂–∞–ª–∏ –∫–Ω–æ–ø–∫—É, –æ—Ç—Ä–∞–±–æ—Ç–∞–ª–∏ –Ω—É–∂–Ω–æ–µ –≤—Ä–µ–º—è –∏ –≤—ã–∫–ª—é—á–∏–ª–æ—Å—å.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/12/13/ngspicejs-integralnye-taimery/monostable.sch"&gt;–∂–¥—É—â–∏–π –º—É–ª—å—Ç–∏–≤–∏–±—Ä–∞—Ç–æ—Ä&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2016/12/13/ngspicejs-integralnye-taimery/monostable.net"&gt;netlist&lt;/a&gt; | &lt;a href="https://ngspice.js.org/?gist=8a127f27d515e1f0b46146afa194fd18"&gt;ngspice.js&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/12/13/ngspicejs-integralnye-taimery/show-img-monostable.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ngspice 1 -&amp;gt; source monostable.net
ngspice 2 -&amp;gt; tran 2.5m 5
ngspice 3 -&amp;gt; plot (v(in)+3) v(out)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ü–æ—Å–ª–µ –ø–æ–¥–∞—á–∏ –ø–∏—Ç–∞–Ω–∏—è —Ç–∞–π–º–µ—Ä –∞–ø–ø–∞—Ä–∞—Ç–Ω–æ —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –∏ –≤—ã—Å—Ç–∞–≤–ª—è–µ—Ç –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –Ω–∞ –≤—ã—Ö–æ–¥–µ 0. –ù–∞ –≤—Ö–æ–¥ TRIG —É –∫–æ–º–ø–∞—Ä–∞—Ç–æ—Ä–∞ –ø–æ–¥–∞—ë—Ç—Å—è –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –±–æ–ª—å—à–µ –æ–ø–æ—Ä–Ω–æ–≥–æ –∏ –Ω–∞ –≤—ã—Ö–æ–¥–µ —É –Ω–µ–≥–æ 0, –∫–æ—Ç–æ—Ä—ã–π –ø–æ—Å—Ç—É–ø–∞–µ—Ç –Ω–∞ –≤—Ö–æ–¥ Set RS-—Ç—Ä–∏–≥–≥–µ—Ä–∞ –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ –Ω–∞ –≤—ã—Ö–æ–¥–µ RS-—Ç—Ä–∏–≥–≥–µ—Ä–∞ –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É 0. –ù–∞ –∏–Ω–≤–µ—Ä—Å–Ω–æ–º –≤—ã—Ö–æ–¥–µ RS-—Ç—Ä–∏–≥–≥–µ—Ä–∞ 1, —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä –æ—Ç–∫—Ä—ã—Ç, –Ω–∞ –≤—Ö–æ–¥–µ —Ç–∞–π–º–µ—Ä–∞ THRES –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –Ω–∏–∂–µ –æ–ø–æ—Ä–Ω–æ–≥–æ —É —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–≥–æ –∫–æ–º–ø–∞—Ä–∞—Ç–æ—Ä–∞ –∏ —Ç–æ–≥–¥–∞ –Ω–∞ –≤—Ö–æ–¥ Reset RS-—Ç—Ä–∏–≥–≥–µ—Ä–∞ –ø–æ—Å—Ç—É–ø–∞–µ—Ç 0.&lt;/p&gt;
&lt;p&gt;–í —Ç–∞–∫–æ–º —Ä–µ–∂–∏–º–µ —Å—Ö–µ–º–∞ –±—É–¥–µ—Ç –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ –¥–æ–ª–≥–æ, –æ–∂–∏–¥–∞—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞ –≤—Ö–æ–¥–µ TRIG. –ü—Ä–∏ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–º –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –∫–æ–º–ø–∞—Ä–∞—Ç–æ—Ä–∞ –Ω–∞ –≤—Ö–æ–¥ Set RS-—Ç—Ä–∏–≥–≥–µ—Ä–∞ –ø–æ—Å—Ç—É–ø–∞–µ—Ç 1, –Ω–∞ –≤—ã—Ö–æ–¥–µ —Ç–∞–π–º–µ—Ä–∞ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è 1, —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä –∑–∞–∫—Ä—ã–≤–∞–µ—Ç—Å—è –∏ –Ω–∞—á–∏–Ω–∞–µ—Ç &lt;a href="http://proiot.ru/blog/posts/2016/11/30/ngspicejs-analogovye-integrator-i-differentsiator/"&gt;—ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ&lt;/a&gt;  –∑–∞—Ä—è–∂–∞—Ç—å—Å—è –∫–æ–Ω–¥–µ–Ω—Å–∞—Ç–æ—Ä C1 —á–µ—Ä–µ–∑ —Ä–µ–∑–∏—Å—Ç–æ—Ä R1 —Å –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–π –≤—Ä–µ–º–µ–Ω–∏ R1C1. –ü–æ–∫–∞ –∑–∞—Ä—è–∂–∞–µ—Ç—Å—è –∫–æ–Ω–¥–µ–Ω—Å–∞—Ç–æ—Ä –Ω–∞ –≤—ã—Ö–æ–¥–µ —Ç–∞–π–º–µ—Ä–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤—ã—Å–æ–∫–∏–π —É—Ä–æ–≤–µ–Ω—å —Ç.–∫. –ø—Ä–∏ &lt;code&gt;R=S=0&lt;/code&gt; RS-—Ç—Ä–∏–≥–≥–µ—Ä —Ö—Ä–∞–Ω–∏—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ. –ö–∞–∫ —Ç–æ–ª—å–∫–æ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –Ω–∞ –∫–æ–Ω–¥–µ–Ω—Å–∞—Ç–æ—Ä–µ –¥–æ—Å—Ç–∏–≥–Ω–µ—Ç 2/3 –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –ø–∏—Ç–∞–Ω–∏—è, –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –∫–æ–º–ø–∞—Ä–∞—Ç–æ—Ä –∏ –Ω–∞ –≤—Ö–æ–¥ Reset RS-—Ç—Ä–∏–≥–≥–µ—Ä–∞ –ø–æ–ø–∞–¥–∞–µ—Ç 1. –¢—É—Ç –µ—Å—Ç—å –¥–≤–∞ –≤–∞—Ä–∏–∞–Ω—Ç–∞, –∫–æ—Ç–æ—Ä—ã–µ –æ—Ç—Ä–∞–∂–µ–Ω—ã –≤ —Ç–∞–±–ª–∏—Ü–µ –∏—Å—Ç–∏–Ω–Ω–æ—Å—Ç–∏ &lt;code&gt;R=1|S=0|Q=0&lt;/code&gt; –∏ &lt;code&gt;R=1|S=1|Q=1&lt;/code&gt;. –í –ª—é–±–æ–º —Å–ª—É—á–∞–µ –ø—Ä–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –≤—ã—Ö–æ–¥–∞ —Å –≤—ã—Å–æ–∫–æ–≥–æ —É—Ä–æ–≤–Ω—è –Ω–∞ –Ω–∏–∑–∫–∏–π —Å—Ö–µ–º–∞ —Å–Ω–æ–≤–∞ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –≤ —Ä–µ–∂–∏–º –æ–∂–∏–¥–∞–Ω–∏—è –≤—Ö–æ–¥–Ω–æ–≥–æ –∏–º–ø—É–ª—å—Å–∞. –í—Ä–µ–º—è –∑–∞–¥–µ—Ä–∂–∫–∏ &lt;a href="https://bc.js.org/"&gt;—Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è&lt;/a&gt; –ø–æ —Ñ–æ—Ä–º—É–ª–µ &lt;code&gt;t = -ln(1 - (2/3))*C*R = l(3)*3*10^6*10^-6 ‚âà 3.3 —Å–µ–∫&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/12/13/ngspicejs-integralnye-taimery/monostable-canvas.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–í —Ä–µ–∂–∏–º–µ –º—É–ª—å—Ç–∏–≤–∏–±—Ä–∞—Ç–æ—Ä–∞ –≤—Ö–æ–¥—ã —Ç–∞–π–º–µ—Ä–∞ TRIG –∏ THRES —Å–æ–µ–¥–∏–Ω–µ–Ω—ã –≤–º–µ—Å—Ç–µ. –ü–æ—Å–ª–µ –ø–æ–¥–∞—á–∏ –ø–∏—Ç–∞–Ω–∏—è –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –Ω–∞ –Ω–∏—Ö –Ω–∏–∂–µ –æ–ø–æ—Ä–Ω—ã—Ö, –Ω–∞ –≤—Ö–æ–¥–µ RS-—Ç—Ä–∏–≥–≥–µ—Ä–∞ Set=1, –Ω–∞ –≤—ã—Ö–æ–¥–µ 1, —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä –∑–∞–∫—Ä—ã—Ç –∏ –∫–æ–Ω–¥–µ–Ω—Å–∞—Ç–æ—Ä –°1 –∑–∞—Ä—è–∂–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ —Å–æ–µ–¥–∏–Ω—ë–Ω–Ω—ã–µ —Ä–µ–∑–∏—Å—Ç–æ—Ä—ã Ra –∏ Rb. –ö–æ–≥–¥–∞ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –Ω–∞ –∫–æ–Ω–¥–µ–Ω—Å–∞—Ç–æ—Ä–µ –¥–æ—Å—Ç–∏–≥–Ω–µ—Ç 1/3 –ø–∏—Ç–∞–Ω–∏—è Set –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—Å—è –≤ 0, –Ω–æ –ø—Ä–∏ S=R=0 RS-—Ç—Ä–∏–≥–≥–µ—Ä —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –ø—Ä–µ–¥—ã–¥—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ. –ü—Ä–∏ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–∏ 2/3 –ø–∏—Ç–∞–Ω–∏—è Reset –ø–µ—Ä–µ–∫–ª—é—á–∏—Ç—Å—è –≤ 1, –Ω–∞ –≤—ã—Ö–æ–¥–µ —Ç–∞–π–º–µ—Ä–∞ 0, —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –∏ –∫–æ–Ω–¥–µ–Ω—Å–∞—Ç–æ—Ä —Ä–∞–∑—Ä—è–∂–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ —Ä–µ–∑–∏—Å—Ç–æ—Ä Rb –¥–æ 1/3 –ø–∏—Ç–∞–Ω–∏—è –∏ –ø—Ä–æ—Ü–µ—Å—Å –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è –∑–∞–Ω–æ–≤–æ. –ü–µ—Ä–µ–¥ —Å–∏–º—É–ª—è—Ü–∏–µ–π –º—É–ª—å—Ç–∏–≤–∏–±—Ä–∞—Ç–æ—Ä–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Å–¥–µ–ª–∞—Ç—å –≥–ª—É–±–æ–∫–∏–π –≤–¥–æ—Ö –∏ –Ω–∞–±—Ä–∞—Ç—å—Å—è —Ç–µ—Ä–ø–µ–Ω–∏—è, —Ç.–∫. –ø—Ä–æ—Ü–µ—Å—Å –∑–∞–Ω–∏–º–∞–µ—Ç –ø–æ—Ä—è–¥–∫–∞ –º–∏–Ω—É—Ç—ã !&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/12/13/ngspicejs-integralnye-taimery/astable.sch"&gt;–º—É–ª—å—Ç–∏–≤–∏–±—Ä–∞—Ç–æ—Ä&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2016/12/13/ngspicejs-integralnye-taimery/astable.net"&gt;netlist&lt;/a&gt; | &lt;a href="https://ngspice.js.org/?gist=715d1adceff6765e6d53ce740fd07d2c"&gt;ngspice.js&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/12/13/ngspicejs-integralnye-taimery/show-img-astable.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ngspice 1 -&amp;gt; source astable.net
ngspice 2 -&amp;gt; tran 0.1u 6.4m 5m
ngspice 3 -&amp;gt; plot v(out)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–í –æ—Ç–ª–∏—á–∏–µ –æ—Ç –º—É–ª—å—Ç–∏–≤–∏–±—Ä–∞—Ç–æ—Ä–∞ –Ω–∞ &lt;a href="http://proiot.ru/blog/posts/2016/11/13/ngspicejs-generatory-kolebanii-na-tranzistorakh/"&gt;—Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä–∞—Ö&lt;/a&gt; –Ω–∞ –≤—ã—Ö–æ–¥–µ –∏–º–µ–µ–º —á—ë—Ç–∫–∏–µ –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω—ã–µ –∏–º–ø—É–ª—å—Å—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Ñ–æ—Ä–º—ã. –ß–∞—Å—Ç–æ—Ç–∞ –∫–æ–ª–µ–±–∞–Ω–∏–π &lt;code&gt;f = 1/(ln(2)*C*(Ra+2*Rb)) = 1/(l(2)*0.15*10^-6*(5000+2*3000)) ‚âà 874 –ì—Ü&lt;/code&gt; | &lt;code&gt;HIGH = ln(2)*C*(Ra+Rb) = l(2)*0.15*10^-6*(5000+3000) ‚âà 0.83 –º—Å&lt;/code&gt; | &lt;code&gt;LOW = ln(2)*C*Rb = l(2)*0.15*10^-6*3000 ‚âà 0.31 –º—Å&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/12/13/ngspicejs-integralnye-taimery/astable-canvas.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;P.S. –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∫ TLC555 –Ω–∞–≥—Ä—É–∑–∫—É R –ø–æ–¥–∫–ª—é—á–∞—é—Ç –∫ Vdd –∞ –Ω–µ –∫ –∑–µ–º–ª–µ.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/12/18/ngspicejs-logicheskie-ventili/"&gt;–î–∞–ª–µ–µ&lt;/a&gt; —Ü–∏—Ñ—Ä–æ–≤–∞—è —ç–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∞.&lt;/p&gt;</content><category term="gEDA"></category><category term="ngspice"></category><category term="555"></category></entry><entry><title>NGSPICE.js - –∏–º–ø—É–ª—å—Å–Ω—ã–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è</title><link href="http://proiot.ru/blog/posts/2016/12/07/ngspicejs-impulsnye-preobrazovateli-napriazheniia/" rel="alternate"></link><published>2016-12-07T00:00:00+02:00</published><updated>2016-12-07T00:00:00+02:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2016-12-07:/blog/posts/2016/12/07/ngspicejs-impulsnye-preobrazovateli-napriazheniia/</id><summary type="html">&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/10/28/vvedenie-v-simuliatsiiu-elektricheskikh-skhem-s-pomoshchiu-ngspicejs/"&gt;–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º&lt;/a&gt; –æ—Å–≤–∞–∏–≤–∞—Ç—å NGSPICE.&lt;/p&gt;
&lt;p&gt;–í –∏–º–ø—É–ª—å—Å–Ω—ã—Ö –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—è—Ö –≤—Ö–æ–¥–Ω–æ–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –Ω–∞—Ä–µ–∑–∞–µ—Ç—Å—è –ø–æ—Ä—Ü–∏—è–º–∏ - –∏–º–ø—É–ª—å—Å–∞–º–∏ c –∑–∞–¥–∞–Ω–Ω–æ–π &lt;a href="http://proiot.ru/blog/posts/2016/12/05/ngspicejs-skvazhnost-upravliaemaia-napriazheniem/"&gt;—Å–∫–≤–∞–∂–Ω–æ—Å—Ç—å—é&lt;/a&gt; –∏ —á–µ–º –º–µ–Ω—å—à–µ —Å–∫–≤–∞–∂–Ω–æ—Å—Ç—å —Ç–µ–º –±–æ–ª—å—à–∞—è —á–∞—Å—Ç—å —ç–Ω–µ—Ä–≥–∏–∏ –ø–æ–ø–∞–¥—ë—Ç –Ω–∞ –≤—ã—Ö–æ–¥. –ï—Å–ª–∏ –∏–º–ø—É–ª—å—Å—ã –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–æ–π —Ñ–æ—Ä–º—ã, —Ç–æ —Å–∏–ª–æ–≤–∞—è —á–∞—Å—Ç—å —Å—Ö–µ–º—ã —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –∫–ª—é—á–µ–≤–æ–º —Ä–µ–∂–∏–º–µ —Ç.–µ. –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ª–∏–±–æ –≤ —Ä–µ–∂–∏–º–µ –æ—Ç—Å–µ—á–∫–∏, –∫–æ–≥–¥–∞ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ, –ª–∏–±–æ –≤ —Ä–µ–∂–∏–º–µ ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/10/28/vvedenie-v-simuliatsiiu-elektricheskikh-skhem-s-pomoshchiu-ngspicejs/"&gt;–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º&lt;/a&gt; –æ—Å–≤–∞–∏–≤–∞—Ç—å NGSPICE.&lt;/p&gt;
&lt;p&gt;–í –∏–º–ø—É–ª—å—Å–Ω—ã—Ö –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—è—Ö –≤—Ö–æ–¥–Ω–æ–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –Ω–∞—Ä–µ–∑–∞–µ—Ç—Å—è –ø–æ—Ä—Ü–∏—è–º–∏ - –∏–º–ø—É–ª—å—Å–∞–º–∏ c –∑–∞–¥–∞–Ω–Ω–æ–π &lt;a href="http://proiot.ru/blog/posts/2016/12/05/ngspicejs-skvazhnost-upravliaemaia-napriazheniem/"&gt;—Å–∫–≤–∞–∂–Ω–æ—Å—Ç—å—é&lt;/a&gt; –∏ —á–µ–º –º–µ–Ω—å—à–µ —Å–∫–≤–∞–∂–Ω–æ—Å—Ç—å —Ç–µ–º –±–æ–ª—å—à–∞—è —á–∞—Å—Ç—å —ç–Ω–µ—Ä–≥–∏–∏ –ø–æ–ø–∞–¥—ë—Ç –Ω–∞ –≤—ã—Ö–æ–¥. –ï—Å–ª–∏ –∏–º–ø—É–ª—å—Å—ã –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–æ–π —Ñ–æ—Ä–º—ã, —Ç–æ —Å–∏–ª–æ–≤–∞—è —á–∞—Å—Ç—å —Å—Ö–µ–º—ã —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –∫–ª—é—á–µ–≤–æ–º —Ä–µ–∂–∏–º–µ —Ç.–µ. –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ª–∏–±–æ –≤ —Ä–µ–∂–∏–º–µ –æ—Ç—Å–µ—á–∫–∏, –∫–æ–≥–¥–∞ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ, –ª–∏–±–æ –≤ —Ä–µ–∂–∏–º–µ –Ω–∞—Å—ã—â–µ–Ω–∏—è - —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ–º. –†–∞—Å—Å–µ–∏–≤–∞–µ–º–∞—è –º–æ—â–Ω–æ—Å—Ç—å –Ω–∞ –∫–ª—é—á–µ &lt;code&gt;P = I*U = 0*I = 0*U = 0&lt;/code&gt; –∏ –≤—ã—Ö–æ–¥–∏—Ç —á—Ç–æ —É –∏–¥–µ–∞–ª—å–Ω—ã—Ö –∏–º–ø—É–ª—å—Å–Ω—ã—Ö –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª–µ–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –ø–æ–ª–µ–∑–Ω–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è (–ö–ü–î) —Å—Ç—Ä–µ–º–∏—Ç—Å—è –∫ 100%. –°–≥–ª–∞–∂–∏–≤–∞–Ω–∏–µ –ø—É–ª—å—Å–∞—Ü–∏–π –≤—ã—Ö–æ–¥–Ω–æ–≥–æ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –±–ª–∞–≥–æ–¥–∞—Ä—è –Ω–∞–ª–∏—á–∏—é –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É—é—â–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤, —Å–ø–æ—Å–æ–±–Ω—ã—Ö –Ω–∞–∫–∞–ø–ª–∏–≤–∞—Ç—å —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫—É—é —ç–Ω–µ—Ä–≥–∏—é –∏ –æ—Ç–¥–∞–≤–∞—Ç—å –µ—ë –≤ –Ω–∞–≥—Ä—É–∑–∫—É. –ï—Å–ª–∏ —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å –∏–º–ø—É–ª—å—Å–Ω—ã–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª–∏ —Å &lt;a href="http://proiot.ru/blog/posts/2016/12/06/ngspicejs-lineinye-stabilizatory-napriazheniia/"&gt;–ª–∏–Ω–µ–π–Ω—ã–º–∏&lt;/a&gt; —Ç–æ –ø–µ—Ä–≤—ã–µ –∫–∞–∫ –ø—Ä–∞–≤–∏–ª–æ –∏–º–µ—é—Ç –±–æ–ª—å—à–∏–µ —Ä–∞–∑–º–µ—Ä—ã –∏ –±–æ–ª—å—à–µ —à—É–º—è—Ç, –Ω–æ –ø—Ä–∏ —ç—Ç–æ–º –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—Ç –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –ª—É—á—à–∏–π –ö–ü–î. –ß—Ç–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ, –∏–º–ø—É–ª—å—Å–Ω—ã–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª–∏ —É–º–µ—é—Ç –Ω–µ —Ç–æ–ª—å–∫–æ –ø–æ–Ω–∏–∂–∞—Ç—å –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ, –Ω–æ –∏ –ø–æ–≤—ã—à–∞—Ç—å –µ–≥–æ !&lt;/p&gt;
&lt;!-- 
&lt;a href="http://proiot.ru/blog/posts/2016/12/07/ngspicejs-impulsnye-preobrazovateli-napriazheniia/irf530.lib"&gt;&lt;/a&gt;
&lt;a href="http://proiot.ru/blog/posts/2016/12/07/ngspicejs-impulsnye-preobrazovateli-napriazheniia/1n5822.txt"&gt;&lt;/a&gt;
--&gt;

&lt;p&gt;–í —Å–ª–µ–¥—É—é—â–∏—Ö —Å—Ö–µ–º–∞—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å SPICE –º–æ–¥–µ–ª–∏ –º–æ—â–Ω–æ–≥–æ &lt;a href="http://proiot.ru/blog/posts/2016/11/03/ngspicejs-polevoi-tranzistor/"&gt;–ø–æ–ª–µ–≤–æ–≥–æ&lt;/a&gt; —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä–∞ IRF530 –∏ &lt;a href="http://proiot.ru/blog/posts/2016/10/31/ngspicejs-poluprovodnikovyi-diod/"&gt;–¥–∏–æ–¥–∞&lt;/a&gt; –®–æ—Ç—Ç–∫–∏ (—Å –º–∞–ª—ã–º –ø–∞–¥–µ–Ω–∏–µ–º –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è &amp;lt; 0.5 –í) 1n5822:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ wget http://www.vishay.com/docs/90181/irf530.lib
~$ wget http://www.vishay.com/docs/88003/1n5822.txt
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/12/07/ngspicejs-impulsnye-preobrazovateli-napriazheniia/buck.sch"&gt;–∏–º–ø—É–ª—å—Å–Ω—ã–π –ø–æ–Ω–∏–∂–∞—é—â–∏–π –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2016/12/07/ngspicejs-impulsnye-preobrazovateli-napriazheniia/buck.net"&gt;netlist&lt;/a&gt; | &lt;a href="https://ngspice.js.org/?gist=3c337ca0b9b0733f8e5cf99197c23836"&gt;ngspice.js&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/12/07/ngspicejs-impulsnye-preobrazovateli-napriazheniia/show-img-buck.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ngspice 1 -&amp;gt; source buck.net
ngspice 2 -&amp;gt; tran 0.3u 1m
ngspice 3 -&amp;gt; plot v(out)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ù–æ–º–∏–Ω–∞–ª—ã –ø–æ–Ω–∏–∂–∞—é—â–µ–≥–æ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—è &lt;a href="http://www.ti.com/lit/an/slva477b/slva477b.pdf" rel="nofollow"&gt;—Ä–∞—Å—á–∏—Ç–∞–Ω—ã&lt;/a&gt; –∏—Å—Ö–æ–¥—è –∏–∑ —Ç—Ä–µ–±—É–µ–º–æ–≥–æ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –Ω–∞ –≤—ã—Ö–æ–¥–µ 3.3 –í, –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –Ω–∞ –≤—Ö–æ–¥–µ 10 –í, —Ç–æ–∫–∞ –Ω–∞–≥—Ä—É–∑–∫–∏ 2 –ê, —á–∞—Å—Ç–æ—Ç—ã –∫–ª—é—á–∞ 50–∫–ì—Ü, –ø—É–ª—å—Å–∞—Ü–∏–∏ —Ç–æ–∫–∞ —á–µ—Ä–µ–∑ –∏–Ω–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—å 30% –∏ –¥–æ–ø—É—Å—Ç–∏–º—ã—Ö –ø—É–ª—å—Å–∞—Ü–∏–π –≤—ã—Ö–æ–¥–Ω–æ–≥–æ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è 25 –º–í.&lt;/p&gt;
&lt;p&gt;&lt;img alt="formula" src="http://proiot.ru/blog/posts/2016/12/07/ngspicejs-impulsnye-preobrazovateli-napriazheniia/buck-L.svg" style="width:25%; margin: 0 auto; display:block;"&gt;&lt;/p&gt;
&lt;p&gt;–ì–¥–µ &lt;code&gt;D = Vout/Vin&lt;/code&gt; —ç—Ç–æ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç &lt;a href="http://proiot.ru/blog/posts/2016/12/05/ngspicejs-skvazhnost-upravliaemaia-napriazheniem/"&gt;–∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è&lt;/a&gt; –∏ —Ç–æ–≥–¥–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∏–Ω–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—å &lt;a href="https://bc.js.org/"&gt;—Ä–∞–≤–Ω–∞&lt;/a&gt; &lt;code&gt;(3.3*(1-3.3/10))/(50000*2*0.3) = 73.7 –º–∫–ì–Ω&lt;/code&gt;. –ö–æ–Ω–¥–µ–Ω—Å–∞—Ç–æ—Ä –¥–ª—è —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏—è –ø—É–ª—å—Å–∞—Ü–∏–π –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –Ω–∞ –≤—ã—Ö–æ–¥–µ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ø–æ —Ñ–æ—Ä–º—É–ª–µ:&lt;/p&gt;
&lt;p&gt;&lt;img alt="formula" src="http://proiot.ru/blog/posts/2016/12/07/ngspicejs-impulsnye-preobrazovateli-napriazheniia/buck-C.svg" style="width:26.5%; margin: 0 auto; display:block;"&gt;&lt;/p&gt;
&lt;p&gt;–ü–æ–ª—É—á–∞–µ–º –º–∏–Ω–∏–º–∞–ª—å–Ω—É—é –Ω–µ–æ–±—Ö–æ–¥–∏–º—É—é —ë–º–∫–æ—Å—Ç—å &lt;code&gt;(2*0.3)/(8*50000*0.025) = 60 –º–∫–§&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/12/07/ngspicejs-impulsnye-preobrazovateli-napriazheniia/buck-canvas.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–ü–æ—Å–∫–æ–ª—å–∫—É —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä X1 –Ω–µ–∏–¥–µ–∞–ª—å–Ω—ã–π –∫–ª—é—á –∏ —Å—É–¥—è –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –µ–≥–æ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏ —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç 0.16 –º–û–º, —Ç–æ –∫ –ø—Ä–∏–º–µ—Ä—É –ø—Ä–∏ —Ç–æ–∫–µ 1 –ê –Ω–∞ –Ω—ë–º –±—É–¥–µ—Ç —Ç–µ—Ä—è—Ç—å—Å—è 0.16 –í –∏ —ç—Ç–æ –ª–µ–≥–∫–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–º–∞–Ω–¥–æ–π &lt;code&gt;plot v(cp1,cp3) ylimit 0 1 xlimit 0.5m 0.6m&lt;/code&gt;. –ù–∞ –¥–∏–æ–¥–µ —Ç–∞–∫–∂–µ –ø—Ä–æ–∏—Å—Ö–æ–¥—è—Ç –ø–æ—Ç–µ—Ä–∏ –∏ —á–µ–º —Å–ª–∞–±–µ–µ –¥–∏–æ–¥ —Ç–µ–º –±–æ–ª—å—à–µ–µ –Ω–∞ –Ω—ë–º –ø—Ä—è–º–æ–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –∏ —Ç–µ–º —Ö—É–∂–µ –æ–Ω —Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å —Ñ—É–Ω–∫—Ü–∏–µ–π –∫–ª—é—á–∞. –ò–∑-–∑–∞ –ø–æ—Ç–µ—Ä—å –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –Ω–∞ –≤—ã—Ö–æ–¥–µ –Ω–µ –¥–æ—Ç—è–≥–∏–≤–∞–µ—Ç –¥–æ 3.3 –í, –Ω–æ –ø–æ–¥–ø—Ä–∞–≤–∏—Ç—å —Å–∏—Ç—É–∞—Ü–∏–∏ –º–æ–∂–Ω–æ —É–≤–µ–ª–∏—á–∏–≤ D —Å 0.33 –¥–æ –ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω–æ 0.37. –ß—Ç–æ –∫–∞—Å–∞–µ—Ç—Å—è —Å–∫–∞—á–∫–∞ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –Ω–∞ —Å—Ç–∞—Ä—Ç–µ —Ç–æ –≤ —Ü–µ–ø–∏ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π &lt;a href="http://proiot.ru/blog/posts/2016/10/30/ngspicejs-kolebatelnyi-kontur/"&gt;–∫–æ–ª–µ–±–∞—Ç–µ–ª—å–Ω—ã–π&lt;/a&gt; –∫–æ–Ω—Ç—É—Ä c –ø–µ—Ä–∏–æ–¥–æ–º –∫–æ–ª–µ–±–∞–Ω–∏–π &lt;code&gt;2*3.14*sqrt(74*10^-6*60*10^-6) ‚âà 0.42 –º—Å&lt;/code&gt;. –ß–µ–º –º–µ–Ω—å—à–µ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ R —Ç–µ–º –º–µ–Ω—å—à–µ –∞–º–ø–ª–∏—Ç—É–¥–∞ —ç—Ç–∏—Ö –∫–æ–ª–µ–±–∞–Ω–∏–π –∏ —Ç–µ–º –±—ã—Å—Ç—Ä–µ–µ –æ–Ω–∏ –∑–∞—Ç—É—Ö–∞—é—Ç.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/12/07/ngspicejs-impulsnye-preobrazovateli-napriazheniia/boost.sch"&gt;–∏–º–ø—É–ª—å—Å–Ω—ã–π –ø–æ–≤—ã—à–∞—é—â–∏–π –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2016/12/07/ngspicejs-impulsnye-preobrazovateli-napriazheniia/boost.net"&gt;netlist&lt;/a&gt; | &lt;a href="https://ngspice.js.org/?gist=8bc2e416c971a2d55fcdda0b6c113eaa"&gt;ngspice.js&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/12/07/ngspicejs-impulsnye-preobrazovateli-napriazheniia/show-img-boost.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ngspice 1 -&amp;gt; source boost.net
ngspice 2 -&amp;gt; tran 0.5u 3m
ngspice 3 -&amp;gt; plot v(out) ylimit 2 10
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ù–æ–º–∏–Ω–∞–ª—ã –ø–æ–≤—ã—à–∞—é—â–µ–≥–æ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—è &lt;a href="http://www.ti.com/lit/an/slva372c/slva372c.pdf" rel="nofollow"&gt;—Ä–∞—Å—á–∏—Ç–∞–Ω—ã&lt;/a&gt; –∏—Å—Ö–æ–¥—è –∏–∑ —Ç—Ä–µ–±—É–µ–º–æ–≥–æ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –Ω–∞ –≤—ã—Ö–æ–¥–µ 10 –í, –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –Ω–∞ –≤—Ö–æ–¥–µ 3.3 –í, —Ç–æ–∫–∞ –Ω–∞–≥—Ä—É–∑–∫–∏ 2 –ê, —á–∞—Å—Ç–æ—Ç—ã –∫–ª—é—á–∞ 50–∫–ì—Ü, –ø—É–ª—å—Å–∞—Ü–∏–∏ —Ç–æ–∫–∞ —á–µ—Ä–µ–∑ –∏–Ω–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—å 30% –∏ –¥–æ–ø—É—Å—Ç–∏–º—ã—Ö –ø—É–ª—å—Å–∞—Ü–∏–π –≤—ã—Ö–æ–¥–Ω–æ–≥–æ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è 250 –º–í.&lt;/p&gt;
&lt;!-- 
L = \frac{V_{in}*D}{\Delta I_{L}*f_{sw}}
--&gt;

&lt;p&gt;&lt;img alt="formula" src="http://proiot.ru/blog/posts/2016/12/07/ngspicejs-impulsnye-preobrazovateli-napriazheniia/boost-L.svg" style="width:19.4%; margin: 0 auto; display:block;"&gt;&lt;/p&gt;
&lt;p&gt;–ì–¥–µ &lt;code&gt;D = 1 - (Vin/Vout)&lt;/code&gt; —ç—Ç–æ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç &lt;a href="http://proiot.ru/blog/posts/2016/12/05/ngspicejs-skvazhnost-upravliaemaia-napriazheniem/"&gt;–∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è&lt;/a&gt; –∏ —Ç–æ–≥–¥–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∏–Ω–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—å &lt;a href="https://bc.js.org/"&gt;—Ä–∞–≤–Ω–∞&lt;/a&gt; &lt;code&gt;(3.3*(1-3.3/10))/(50000*2*0.3) = 73.7 –º–∫–ì–Ω&lt;/code&gt;. –ö–æ–Ω–¥–µ–Ω—Å–∞—Ç–æ—Ä –¥–ª—è —Å–≥–ª–∞–∂–∏–≤–∞–Ω–∏—è –ø—É–ª—å—Å–∞—Ü–∏–π –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –Ω–∞ –≤—ã—Ö–æ–¥–µ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ø–æ —Ñ–æ—Ä–º—É–ª–µ:&lt;/p&gt;
&lt;!-- 
C = \frac{I_{out}*D}{f_{sw}*\Delta V_{out}}
--&gt;

&lt;p&gt;&lt;img alt="formula" src="http://proiot.ru/blog/posts/2016/12/07/ngspicejs-impulsnye-preobrazovateli-napriazheniia/boost-C.svg" style="width:21.8%; margin: 0 auto; display:block;"&gt;&lt;/p&gt;
&lt;p&gt;–ü–æ–ª—É—á–∞–µ–º –º–∏–Ω–∏–º–∞–ª—å–Ω—É—é —ë–º–∫–æ—Å—Ç—å &lt;code&gt;2*(1-3.3/10)/(50000*0.25) = 107.2 –º–∫–§&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/12/07/ngspicejs-impulsnye-preobrazovateli-napriazheniia/boost-canvas.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–ö–æ–º–ø–µ–Ω—Å–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Ç–µ—Ä–∏ –Ω–∞ —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä–µ –∏ –¥–∏–æ–¥–µ –º–æ–∂–Ω–æ –ø–æ–¥—Ç—è–Ω—É–≤ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è D —Å 0.67 –¥–æ 0.74.&lt;/p&gt;
&lt;p&gt;–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é –≤—ã—Ö–æ–¥–Ω–æ–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –∫–∞–∫ –ø–æ–Ω–∏–∂–∞—é—â–µ–≥–æ —Ç–∞–∫ –∏ –ø–æ–≤—ã—à–∞—é—â–µ–≥–æ –∏–º–ø—É–ª—å—Å–Ω–æ–≥–æ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—è –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤—Ö–æ–¥–Ω–æ–≥–æ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –∏ –≤–µ–ª–∏—á–∏–Ω—ã —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏ R. –≠—Ç–æ –Ω–µ—Å–ª–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–º–∞–Ω–¥–æ–π &lt;code&gt;alter r 10k&lt;/code&gt; - –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –≤ –æ–±–æ–∏—Ö –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—è—Ö –ø–æ–ø–æ–ª–∑—ë—Ç –≤–≤–µ—Ä—Ö. –î–ª—è —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏ –≤–≤–æ–¥—è—Ç –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å, –≤ –∫–æ—Ç–æ—Ä–æ–π –æ—à–∏–±–∫–∞ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –Ω–∞ –≤—ã—Ö–æ–¥–µ —É–ø—Ä–∞–≤–ª—è–µ—Ç &lt;a href="http://proiot.ru/blog/posts/2016/12/05/ngspicejs-skvazhnost-upravliaemaia-napriazheniem/"&gt;—Å–∫–≤–∞–∂–Ω–æ—Å—Ç—å—é&lt;/a&gt; –∏–º–ø—É–ª—å—Å–æ–≤ —Å –∫–∞–∫–∏–º-—Ç–æ –∑–∞—Ä–∞–Ω–µ–µ —Ä–∞—Å—Å—á–∏—Ç–∞–Ω–Ω—ã–º –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–º –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –∏ –ø–æ–ª—É—á–∞–µ—Ç—Å—è –ü-—Ä–µ–≥—É–ª—è—Ç–æ—Ä. –î–ª—è —É–º–µ–Ω—å—à–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–∏ –º–µ–∂–¥—É –æ—à–∏–±–∫–æ–π –∏ –µ—ë —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ–º –¥–æ–±–∞–≤–ª—è—é—Ç &lt;a href="http://proiot.ru/blog/posts/2016/11/30/ngspicejs-analogovye-integrator-i-differentsiator/"&gt;–∏–Ω—Ç–µ–≥—Ä–∞–ª—å–Ω—É—é&lt;/a&gt; –∏ &lt;a href="http://proiot.ru/blog/posts/2016/11/30/ngspicejs-analogovye-integrator-i-differentsiator/"&gt;–¥–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏—Ä—É—é—â—É—é&lt;/a&gt; —Å–æ—Å—Ç–∞–≤–ª—è—é—â—É—é –∏ –ø–æ–ª—É—á–∞–µ—Ç—Å—è –ü–ò–î-—Ä–µ–≥—É–ª—è—Ç–æ—Ä. –ö —Å—á–∞—Å—Ç—å—é –º–æ–∂–Ω–æ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≥–æ—Ç–æ–≤—ã–º–∏ –º–∏–∫—Ä–æ—Å—Ö–µ–º–∞–º–∏ DC/DC –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ø—Ä–æ—â–∞—é—Ç –∂–∏–∑–Ω—å, —Å–≤–æ–¥—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ä–∞—Å—á—ë—Ç–æ–≤ –∫ –º–∏–Ω–∏–º—É.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/12/13/ngspicejs-integralnye-taimery/"&gt;–î–∞–ª–µ–µ&lt;/a&gt; –∏–Ω—Ç–µ–≥—Ä–∞–ª—å–Ω—ã–π —Ç–∞–π–º–µ—Ä 555.&lt;/p&gt;</content><category term="gEDA"></category><category term="ngspice"></category><category term="–®–ò–ú"></category></entry><entry><title>NGSPICE.js - –ª–∏–Ω–µ–π–Ω—ã–µ —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ç–æ—Ä—ã –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è</title><link href="http://proiot.ru/blog/posts/2016/12/06/ngspicejs-lineinye-stabilizatory-napriazheniia/" rel="alternate"></link><published>2016-12-06T00:00:00+02:00</published><updated>2016-12-06T00:00:00+02:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2016-12-06:/blog/posts/2016/12/06/ngspicejs-lineinye-stabilizatory-napriazheniia/</id><summary type="html">&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/10/28/vvedenie-v-simuliatsiiu-elektricheskikh-skhem-s-pomoshchiu-ngspicejs/"&gt;–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º&lt;/a&gt; –æ—Å–≤–∞–∏–≤–∞—Ç—å NGSPICE.&lt;/p&gt;
&lt;p&gt;–°—Ç–∞–±–∏–ª–∏–∑–∞—Ç–æ—Ä—ã –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω—ã –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –Ω–∞ –Ω–∞–≥—Ä—É–∑–∫–µ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –µ–≥–æ –∫–æ–ª–µ–±–∞–Ω–∏–π –Ω–∞ –≤—Ö–æ–¥–µ –∏ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏—è —Å–∞–º–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏. –ó–∞—á–µ–º —ç—Ç–æ –Ω–∞–¥–æ ? –†–∞—Å—á—ë—Ç –º–Ω–æ–≥–∏—Ö —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∏—Ö —Ü–µ–ø–µ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è —Å —É—á—ë—Ç–æ–º –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –ø–∏—Ç–∞–Ω–∏—è. –ù–∞–ø—Ä–∏–º–µ—Ä –≤–µ–ª–∏—á–∏–Ω–∞ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –ø–∏—Ç–∞–Ω–∏—è –æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–∏–ª—å–Ω–æ–µ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ —Ä–∞–±–æ—á—É—é —Ç–æ—á–∫—É —É—Å–∏–ª–∏—Ç–µ–ª—è —Å ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/10/28/vvedenie-v-simuliatsiiu-elektricheskikh-skhem-s-pomoshchiu-ngspicejs/"&gt;–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º&lt;/a&gt; –æ—Å–≤–∞–∏–≤–∞—Ç—å NGSPICE.&lt;/p&gt;
&lt;p&gt;–°—Ç–∞–±–∏–ª–∏–∑–∞—Ç–æ—Ä—ã –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω—ã –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∞–Ω–∏—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –Ω–∞ –Ω–∞–≥—Ä—É–∑–∫–µ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –µ–≥–æ –∫–æ–ª–µ–±–∞–Ω–∏–π –Ω–∞ –≤—Ö–æ–¥–µ –∏ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏—è —Å–∞–º–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏. –ó–∞—á–µ–º —ç—Ç–æ –Ω–∞–¥–æ ? –†–∞—Å—á—ë—Ç –º–Ω–æ–≥–∏—Ö —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∏—Ö —Ü–µ–ø–µ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è —Å —É—á—ë—Ç–æ–º –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –ø–∏—Ç–∞–Ω–∏—è. –ù–∞–ø—Ä–∏–º–µ—Ä –≤–µ–ª–∏—á–∏–Ω–∞ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –ø–∏—Ç–∞–Ω–∏—è –æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–∏–ª—å–Ω–æ–µ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ —Ä–∞–±–æ—á—É—é —Ç–æ—á–∫—É —É—Å–∏–ª–∏—Ç–µ–ª—è —Å &lt;a href="http://proiot.ru/blog/posts/2016/11/07/ngspicejs-usilitelnyi-kaskad-s-obshchim-emitterom/"&gt;–û–≠&lt;/a&gt;, —Ç–æ–≥–¥–∞ –∫–∞–∫ –≤ —Å—Ö–µ–º–µ —Å &lt;a href="http://proiot.ru/blog/posts/2016/11/09/ngspicejs-usilitelnyi-kaskad-s-obshchim-kollektorom/"&gt;–û–ö&lt;/a&gt; –∏–ª–∏ –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ &lt;a href="http://proiot.ru/blog/posts/2016/11/18/ngspicejs-idealnyi-operatsionnyi-usilitel/"&gt;–æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —É—Å–∏–ª–∏—Ç–µ–ª–µ–π&lt;/a&gt; –ø–∏—Ç–∞–Ω–∏–µ –º–æ–∂–µ—Ç –æ–∫–∞–∑–∞—Ç—å—Å—è –Ω–µ —Å—Ç–æ–ª—å –∫—Ä–∏—Ç–∏—á–Ω–æ (–≤ —Ä–∞–∑—É–º–Ω—ã–π –ø—Ä–µ–¥–µ–ª–∞—Ö). –ë—ã–≤–∞–µ—Ç —Ç–∞–∫ —á—Ç–æ –∏–∑-–∑–∞ –æ–¥–Ω–æ–π —Ü–µ–ø–æ—á–∫–∏, –∫—Ä–∏—Ç–∏—á–Ω–æ–π –∫ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—é –ø–∏—Ç–∞–Ω–∏—è, –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è –≤–ø—Ä–∏–¥–∞—á—É –∫ –Ω–µ–π —Ç–∞—â–∏—Ç—å —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ç–æ—Ä –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è.&lt;/p&gt;
&lt;!-- 
&lt;a href="http://proiot.ru/blog/posts/2016/12/06/ngspicejs-lineinye-stabilizatory-napriazheniia/2N5686.LIB"&gt;&lt;/a&gt;
&lt;a href="http://proiot.ru/blog/posts/2016/12/06/ngspicejs-lineinye-stabilizatory-napriazheniia/2N2222.LIB"&gt;&lt;/a&gt;
&lt;a href="http://proiot.ru/blog/posts/2016/12/06/ngspicejs-lineinye-stabilizatory-napriazheniia/1N4107.LIB"&gt;&lt;/a&gt;
--&gt;

&lt;p&gt;–í —Å–ª–µ–¥—É—é—â–∏—Ö —Å—Ö–µ–º–∞—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞—Å—å SPICE –º–æ–¥–µ–ª–∏ –±–∏–ø–æ–ª—è—Ä–Ω—ã—Ö —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä–æ–≤ 2N2222, 2N5686 –∏ —Å—Ç–∞–±–∏–ª–∏—Ç—Ä–æ–Ω–∞ 1N4107:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ wget http://www.onsemi.com/pub/Collateral/2N5686.LIB
~$ wget http://www.centralsemi.com/docs/csm/2N2222.LIB
~$ wget http://www.centralsemi.com/docs/csm/1N4107.LIB
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/12/06/ngspicejs-lineinye-stabilizatory-napriazheniia/parametric.sch"&gt;–ø–∞—Ä–∞–º–µ—Ç—Ä–∏—á–µ—Å–∫–∏–µ —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ç–æ—Ä—ã –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2016/12/06/ngspicejs-lineinye-stabilizatory-napriazheniia/parametric.net"&gt;netlist&lt;/a&gt; | &lt;a href="https://ngspice.js.org/?gist=ec33abd90319afd299e4ace6588e4431"&gt;ngspice.js&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/12/06/ngspicejs-lineinye-stabilizatory-napriazheniia/show-img-parametric.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ngspice 1 -&amp;gt; source parametric.net
ngspice 2 -&amp;gt; dc r3 0 10k 100
ngspice 3 -&amp;gt; dc r5 0 10k 100
ngspice 4 -&amp;gt; plot dc1.v(out_a) dc2.v(out_b)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ù–∞ –∫–∞—Ä—Ç–∏–Ω–∫–µ –Ω–∏–∂–µ –ø–æ –±–æ–ª—å—à–æ–º—É —Å—á—ë—Ç—É –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∞ –≤–æ–ª—å—Ç-–∞–º–ø–µ—Ä–Ω–∞—è —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ (–í–ê–•) –æ–¥–Ω–æ–≥–æ –∏ —Ç–æ–≥–æ –∂–µ –Ω–µ–ª–∏–Ω–µ–π–Ω–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ - &lt;a href="http://proiot.ru/blog/posts/2016/10/31/ngspicejs-poluprovodnikovyi-diod/"&gt;—Å—Ç–∞–±–∏–ª–∏—Ç—Ä–æ–Ω–∞&lt;/a&gt;, —Ç–æ–ª—å–∫–æ –≤–æ –≤—Ç–æ—Ä–æ–º —Å–ª—É—á–∞–µ –ø–æ–º–Ω–æ–∂–µ–Ω–Ω–∞—è –Ω–∞ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –ø–µ—Ä–µ–¥–∞—á–∏ —Å–æ—Å—Ç–∞–≤–Ω–æ–≥–æ —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä–∞ &lt;code&gt;Œ≤ = Œ≤1*Œ≤2&lt;/code&gt;. –°–æ—Å—Ç–∞–≤–Ω–æ–π —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä –≤–∫–ª—é—á—ë–Ω –ø–æ —Å—Ö–µ–º–µ —Å &lt;a href="http://proiot.ru/blog/posts/2016/11/09/ngspicejs-usilitelnyi-kaskad-s-obshchim-kollektorom/"&gt;–û–ö&lt;/a&gt; –∏ —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –ø–æ–≤—Ç–æ—Ä—è–µ—Ç –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –Ω–∞ —Å—Ç–∞–±–∏–ª–∏—Ç—Ä–æ–Ω–µ. –ü–æ–¥–æ–±–Ω—ã–µ —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ç–æ—Ä—ã –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –ø—Ä–∏–Ω—è—Ç–æ –Ω–∞–∑—ã–≤–∞—Ç—å &lt;strong&gt;–ø–∞—Ä–∞–º–µ—Ç—Ä–∏—á–µ—Å–∫–∏–º–∏&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/12/06/ngspicejs-lineinye-stabilizatory-napriazheniia/parametric-canvas.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–°—É–¥—è –ø–æ –≥—Ä–∞—Ñ–∏–∫—É –ø–∞—Ä–∞–º–µ—Ç—Ä–∏—á–µ—Å–∫–∏–π —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ç–æ—Ä —Å –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä–æ–≤ –≤—Ü–µ–ª–æ–º –¥–æ—Å—Ç–æ–π–Ω–æ —Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Å–æ —Å–≤–æ–µ–π –∑–∞–¥–∞—á–µ–π, –æ–¥–Ω–∞–∫–æ —Ç–µ—Ä—è–µ—Ç—Å—è —á–∞—Å—Ç—å –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –Ω–∞ –ø–µ—Ä–µ—Ö–æ–¥–∞—Ö —ç–º–∏—Ç—Ç–µ—Ä-–±–∞–∑–∞ –ø–æ—Ä—è–¥–∫–∞ &lt;code&gt;2*0.7&lt;/code&gt; –í–æ–ª—å—Ç–∞. –°–ª–µ–¥—É—é—â–∞—è —Ö–∏—Ç—Ä–∞—è —Å—Ö–µ–º–∞ –ø–æ–∑–≤–æ–ª–∏—Ç –∫–æ–º–ø–µ–Ω—Å–∏—Ä–æ–≤–∞—Ç—å —ç—Ç—É —Ä–∞–∑–Ω–∏—Ü—É: &lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/12/06/ngspicejs-lineinye-stabilizatory-napriazheniia/compensation.sch"&gt;–∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏–æ–Ω–Ω—ã–π —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ç–æ—Ä –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2016/12/06/ngspicejs-lineinye-stabilizatory-napriazheniia/compensation.net"&gt;netlist&lt;/a&gt; | &lt;a href="https://ngspice.js.org/?gist=531926881037edfff328aa4fce22868a"&gt;ngspice.js&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/12/06/ngspicejs-lineinye-stabilizatory-napriazheniia/show-img-compensation.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ngspice 1 -&amp;gt; source compensation.net
ngspice 2 -&amp;gt; dc r5 0 10k 100
ngspice 3 -&amp;gt; plot v(out)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–£ &lt;strong&gt;–∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ç–æ—Ä–æ–≤&lt;/strong&gt; –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –∏–¥–µ–∞–ª—å–Ω—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏ –∏ –ø–æ—ç—Ç–æ–º—É –¥–ª—è –Ω–∏—Ö  —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ª–∏–Ω–µ–π–∫–∞ –º–∏–∫—Ä–æ—Å—Ö–µ–º –ö–†142–ï–ù5x-–ö–†142–ï–ù18x, –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã—Ö –≤ –æ–¥–Ω–æ–º –∫–æ—Ä–ø—É—Å–µ, –≥–¥–µ 5 –∏ 18 –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏ (–∏–º–ø–æ—Ä—Ç–Ω—ã–π –∞–Ω–∞–ª–æ–≥ 7805-7818). –¢–∞–∫–∂–µ –≤ —É–ø–æ–º—è–Ω—É—Ç—ã—Ö –º–∏–∫—Ä–æ—Å—Ö–µ–º–∞—Ö –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω–∞ –∑–∞—â–∏—Ç–∞ –æ—Ç –∫–æ—Ä–æ—Ç–∫–æ–≥–æ –∑–∞–º—ã–∫–∞–Ω–∏—è (–ö–ó) –Ω–∞ –≤—ã—Ö–æ–¥–µ.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/12/06/ngspicejs-lineinye-stabilizatory-napriazheniia/compensation-canvas.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–í—Å—ë —ç—Ç–æ –∫–æ–Ω–µ—á–Ω–æ —Ö–æ—Ä–æ—à–æ, –Ω–æ —É –¥–∞–Ω–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π –µ—Å—Ç—å –¥–≤–∞ –æ—á–µ–Ω—å —Å–µ—Ä—å—ë–∑–Ω—ã—Ö –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∞:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;–º–æ—â–Ω–æ—Å—Ç—å &lt;code&gt;P=I*U&lt;/code&gt;, –≥–¥–µ U –æ–±—É—Å–ª–æ–≤–ª–µ–Ω–æ —Ä–∞–∑–Ω–∏—Ü–µ–π –º–µ–∂–¥—É –≤—Ö–æ–¥–Ω—ã–º –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ–º –∏ –≤—ã—Ö–æ–¥–Ω—ã–º –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ–º —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏–∏, —Ä–∞—Å—Å–µ–∏–≤–∞–µ—Ç—Å—è –≤ –≤–∏–¥–µ –±–µ—Å–ø–æ–ª–µ–∑–Ω–æ–≥–æ —Ç–µ–ø–ª–∞ - –ø—Ä–∏ –±–æ–ª—å—à–∏—Ö –º–æ—â–Ω–æ—Å—Ç—è—Ö –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è —Å—Ç–∞–≤–∏—Ç—å —Ä–∞–¥–∏–∞—Ç–æ—Ä –æ—Ö–ª–∞–∂–¥–µ–Ω–∏—è, –∞ –ø—Ä–∏ –æ—á–µ–Ω—å –±–æ–ª—å—à–∏—Ö –º–æ–∂–Ω–æ —É–∂–µ –æ—Ç–∞–ø–ª–∏–≤–∞—Ç—å –ø–æ–º–µ—â–µ–Ω–∏–µ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;–¥–∞–Ω–Ω—ã–µ —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ç–æ—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç —Ç–æ–ª—å–∫–æ –Ω–∞ –ø–æ–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è, –∞ –≤ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–π —Å—Ö–µ–º–æ—Ç–µ—Ö–Ω–∏–∫–µ –ø–æ–Ω–∞–ø—Ä–∏–¥—É–º—ã–≤–∞–ª–∏ —Ü–µ–ª—ã–π –∑–æ–æ–ø–∞—Ä–∫ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –º–∏–∫—Ä–æ—Å—Ö–µ–º, –¥–ª—è –∫–æ—Ç–æ—Ä—ã—Ö —á–∞—Å—Ç–æ —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–µ–ª–∞—Ç—å –ø–æ–≤—ã—à–∞—é—â–µ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/12/07/ngspicejs-impulsnye-preobrazovateli-napriazheniia/"&gt;–î–∞–ª–µ–µ&lt;/a&gt;
–∏–º–ø—É–ª—å—Å–Ω—ã–µ —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ç–æ—Ä—ã –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è.&lt;/p&gt;</content><category term="gEDA"></category><category term="ngspice"></category></entry><entry><title>NGSPICE.js - —Å–∫–≤–∞–∂–Ω–æ—Å—Ç—å —É–ø—Ä–∞–≤–ª—è–µ–º–∞—è –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ–º</title><link href="http://proiot.ru/blog/posts/2016/12/05/ngspicejs-skvazhnost-upravliaemaia-napriazheniem/" rel="alternate"></link><published>2016-12-05T00:00:00+02:00</published><updated>2016-12-05T00:00:00+02:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2016-12-05:/blog/posts/2016/12/05/ngspicejs-skvazhnost-upravliaemaia-napriazheniem/</id><summary type="html">&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/10/28/vvedenie-v-simuliatsiiu-elektricheskikh-skhem-s-pomoshchiu-ngspicejs/"&gt;–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º&lt;/a&gt; –æ—Å–≤–∞–∏–≤–∞—Ç—å NGSPICE –≤–æ–æ–±—â–µ –∏ &lt;a href="http://proiot.ru/blog/posts/2016/11/18/ngspicejs-idealnyi-operatsionnyi-usilitel/"&gt;–û–£&lt;/a&gt; –≤ —á–∞—Å—Ç–Ω–æ—Å—Ç–∏.&lt;/p&gt;
&lt;p&gt;–î–ª—è –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏—Ö –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω—ã—Ö –∏–º–ø—É–ª—å—Å–æ–≤ –º–æ–∂–Ω–æ –≤—ã–¥–µ–ª–∏—Ç—å —Ç—Ä–∏ –≥–ª–∞–≤–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–∞: –∞–º–ø–ª–∏—Ç—É–¥–∞, —á–∞—Å—Ç–æ—Ç–∞ –∏ —Ç.–Ω. &lt;strong&gt;–∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è&lt;/strong&gt; (duty cycle) - –Ω–µ–∫–∞—è –±–µ–∑—Ä–∞–∑–º–µ—Ä–Ω–∞—è —Ñ–∏–∑–∏—á–µ—Å–∫–∞—è –≤–µ–ª–∏—á–∏–Ω–∞ —Ä–∞–≤–Ω–∞—è –æ—Ç–Ω–æ—à–µ–Ω–∏—é –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏–º–ø—É–ª—å—Å–∞ –∫ –µ–≥–æ –ø–µ—Ä–∏–æ–¥—É. &lt;strong&gt;–°–∫–≤–∞–∂–Ω–æ—Å—Ç—å&lt;/strong&gt; —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏–∑—É–µ—Ç —Ç–æ –∂–µ —Å–∞–º–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ, —á—Ç–æ –∏ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è, –ø—Ä–æ—Å—Ç–æ —ç—Ç–æ –æ–±—Ä–∞—Ç–Ω–∞—è ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/10/28/vvedenie-v-simuliatsiiu-elektricheskikh-skhem-s-pomoshchiu-ngspicejs/"&gt;–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º&lt;/a&gt; –æ—Å–≤–∞–∏–≤–∞—Ç—å NGSPICE –≤–æ–æ–±—â–µ –∏ &lt;a href="http://proiot.ru/blog/posts/2016/11/18/ngspicejs-idealnyi-operatsionnyi-usilitel/"&gt;–û–£&lt;/a&gt; –≤ —á–∞—Å—Ç–Ω–æ—Å—Ç–∏.&lt;/p&gt;
&lt;p&gt;–î–ª—è –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏—Ö –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω—ã—Ö –∏–º–ø—É–ª—å—Å–æ–≤ –º–æ–∂–Ω–æ –≤—ã–¥–µ–ª–∏—Ç—å —Ç—Ä–∏ –≥–ª–∞–≤–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–∞: –∞–º–ø–ª–∏—Ç—É–¥–∞, —á–∞—Å—Ç–æ—Ç–∞ –∏ —Ç.–Ω. &lt;strong&gt;–∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è&lt;/strong&gt; (duty cycle) - –Ω–µ–∫–∞—è –±–µ–∑—Ä–∞–∑–º–µ—Ä–Ω–∞—è —Ñ–∏–∑–∏—á–µ—Å–∫–∞—è –≤–µ–ª–∏—á–∏–Ω–∞ —Ä–∞–≤–Ω–∞—è –æ—Ç–Ω–æ—à–µ–Ω–∏—é –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏–º–ø—É–ª—å—Å–∞ –∫ –µ–≥–æ –ø–µ—Ä–∏–æ–¥—É. &lt;strong&gt;–°–∫–≤–∞–∂–Ω–æ—Å—Ç—å&lt;/strong&gt; —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏–∑—É–µ—Ç —Ç–æ –∂–µ —Å–∞–º–æ–µ —Å–≤–æ–π—Å—Ç–≤–æ, —á—Ç–æ –∏ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è, –ø—Ä–æ—Å—Ç–æ —ç—Ç–æ –æ–±—Ä–∞—Ç–Ω–∞—è –≤–µ–ª–∏—á–∏–Ω–∞ &lt;code&gt;S = 1/D&lt;/code&gt;, –≥–¥–µ S - —Å–∫–≤–∞–∂–Ω–æ—Å—Ç—å, D - –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –æ—Ç 0 –¥–æ 100%. –ï—Å–ª–∏ –¥–ª–∏–Ω–∞ –∏–º–ø—É–ª—å—Å–∞ —Ä–∞–≤–Ω–∞ –ø–æ–ª–æ–≤–∏–Ω–µ –ø–µ—Ä–∏–æ–¥–∞, —Ç–æ —Ç–∞–∫–æ–π —Å–∏–º–º–µ—Ç—Ä–∏—á–Ω—ã–π —Å–∏–≥–Ω–∞–ª –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è –º–µ–∞–Ω–¥—Ä–æ–º. –ß–µ–º –±–æ–ª—å—à–µ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è, —Ç–µ–º –±–æ–ª—å—à–∞—è &lt;em&gt;—Å—Ä–µ–¥–Ω—è—è&lt;/em&gt; –º–æ—â–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –æ—Ç –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –∫ –Ω–∞–≥—Ä—É–∑–∫–µ –∏ —Ç–∞–∫ –≤–ø–ª–æ—Ç—å –¥–æ 100% (–ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –Ω–∞ –Ω–∞–≥—Ä—É–∑–∫–µ). –ü–æ—Å–∫–æ–ª—å–∫—É —Ü–µ–ø—å —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø—É –≤–∫–ª—é—á—ë–Ω/–≤—ã–∫–ª—é—á–µ–Ω, —Ç–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –ø–æ—Ç–µ—Ä–∏ –ø—Ä–∏ –ø–µ—Ä–µ–¥–∞—á–µ —ç–Ω–µ—Ä–≥–∏–∏ –∏ –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ —É–ø—Ä–∞–≤–ª—è—è —Å–∫–≤–∞–∂–Ω–æ—Å—Ç—å—é –º–æ–∂–Ω–æ —Ä–µ–≥—É–ª–∏—Ä–æ–≤–∞—Ç—å –º–æ—â–Ω–æ—Å—Ç—å –Ω–∞ –Ω–∞–≥—Ä—É–∑–∫–µ –æ—Ç 0 –¥–æ 100% —Å –æ—á–µ–Ω—å –≤—ã—Å–æ–∫–∏–º –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–º  –ø–æ–ª–µ–∑–Ω–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è (–ö–ü–î). –ì–æ–≤–æ—Ä—è –±–æ–ª–µ–µ —Ñ–æ—Ä–º–∞–ª—å–Ω—ã–º —è–∑—ã–∫–æ–º –º—ã –∏–º–µ–µ–º –¥–µ–ª–æ —Å —à–∏—Ä–æ—Ç–Ω–æ-–∏–º–ø—É–ª—å—Å–Ω–æ–π –º–æ–¥—É–ª—è—Ü–∏–µ–π (–®–ò–ú, –∞–Ω–≥–ª. pulse-width modulation (PWM)) - –ø—Ä–æ—Ü–µ—Å—Å–æ–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –º–æ—â–Ω–æ—Å—Ç—å—é, –ø–æ–¥–≤–æ–¥–∏–º–æ–π –∫ –Ω–∞–≥—Ä—É–∑–∫–µ, –ø—É—Ç—ë–º –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–∫–≤–∞–∂–Ω–æ—Å—Ç–∏ –∏–º–ø—É–ª—å—Å–æ–≤ –ø—Ä–∏ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–π —á–∞—Å—Ç–æ—Ç–µ.&lt;/p&gt;
&lt;!-- 
&lt;a href="http://proiot.ru/blog/posts/2016/12/05/ngspicejs-skvazhnost-upravliaemaia-napriazheniem/LT1007CS.txt"&gt;&lt;/a&gt;
--&gt;

&lt;p&gt;–í —Å–ª–µ–¥—É—é—â–∏—Ö —Å—Ö–µ–º–∞—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞—Å—å SPICE –º–æ–¥–µ–ª—å –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —É—Å–∏–ª–∏—Ç–µ–ª—è LT1007:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ wget http://cds.linear.com/docs/en/software-and-simulation/LT1007CS.txt
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/12/05/ngspicejs-skvazhnost-upravliaemaia-napriazheniem/comparator-single.sch"&gt;–ª–∏–Ω–µ–π–Ω—ã–π –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ - —Å–∫–≤–∞–∂–Ω–æ—Å—Ç—å&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2016/12/05/ngspicejs-skvazhnost-upravliaemaia-napriazheniem/comparator-single.net"&gt;netlist&lt;/a&gt; | &lt;a href="https://ngspice.js.org/?gist=9a661744aef8b6f491f7664f18f79a51"&gt;ngspice.js&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/12/05/ngspicejs-skvazhnost-upravliaemaia-napriazheniem/show-img-comparator-single.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ngspice 1 -&amp;gt; source comparator-single.net
ngspice 2 -&amp;gt; tran 10m 4
ngspice 3 -&amp;gt; plot v(out) v(triangle)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–í –æ—Å–Ω–æ–≤–µ –ª–µ–∂–µ—Ç –æ—á–µ–Ω—å –ø—Ä–æ—Å—Ç–∞—è –∏–¥–µ—è - —Å–∏–≥–Ω–∞–ª —Å –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞ —Ç—Ä–µ—É–≥–æ–ª—å–Ω—ã—Ö –∏–º–ø—É–ª—å—Å–æ–≤ –ø–æ—Å—Ç—É–ø–∞–µ—Ç –Ω–∞ –≤—Ö–æ–¥ &lt;a href="http://proiot.ru/blog/posts/2016/11/24/ngspicejs-komparator-i-trigger-shmitta-na-ou/"&gt;–∫–æ–º–ø–∞—Ä–∞—Ç–æ—Ä–∞&lt;/a&gt;. –ó–∞–¥–∞–≤–∞—è –æ–ø–æ—Ä–Ω–æ–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –∫–æ–º–ø–∞—Ä–∞—Ç–æ—Ä–∞ –Ω–∞—Ä–µ–∑–∞—é—Ç—Å—è &lt;em&gt;–ø–æ–¥–æ–±–Ω—ã–µ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∏&lt;/em&gt; (—É–≥–ª—ã —Ä–∞–≤–Ω—ã). –ö–∞–∫ –º—ã –∑–Ω–∞–µ–º (–¥–∞ –¥–∞) –∏–∑ —à–∫–æ–ª—å–Ω–æ–≥–æ –∫—É—Ä—Å–∞ –ø–æ –≥–µ–æ–º–µ—Ç—Ä–∏–∏ –ø–æ–¥–æ–±–Ω—ã–µ —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏–∑—É—é—Ç—Å—è &lt;em&gt;–∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–º –ø–æ–¥–æ–±–∏—è&lt;/em&gt;  k, —Ä–∞–≤–Ω—ã–º –æ—Ç–Ω–æ—à–µ–Ω–∏—é —Å—Ö–æ–¥—Å—Ç–≤–µ–Ω–Ω—ã—Ö —Å—Ç–æ—Ä–æ–Ω. –ü—Ä–∏ —ç—Ç–æ–º –æ—Ç–Ω–æ—à–µ–Ω–∏–µ –¥–ª–∏–Ω  –≤—ã—Å–æ—Ç —Ç–∞–∫–∂–µ —Ä–∞–≤–Ω–æ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—É –ø–æ–¥–æ–±–∏—è. –í –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ –≤—ã—Å–æ—Ç–∞ —ç—Ç–æ –æ–ø–æ—Ä–Ω–æ–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –∫–æ–º–ø–∞—Ä–∞—Ç–æ—Ä–∞, –æ–Ω–∞ –æ–ø—É—â–µ–Ω–∞ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω—É —Ç—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫–∞, –∫–æ—Ç–æ—Ä–∞—è —è–≤–ª—è–µ—Ç—Å—è –ø–µ—Ä–∏–æ–¥–æ–º —Å–ª–µ–¥–æ–≤–∞–Ω–∏—è —Ç—Ä–µ—É–≥–æ–ª—å–Ω—ã—Ö –∏–º–ø—É–ª—å—Å–æ–≤. –í –∏—Ç–æ–≥–µ –∏–º–µ–µ–º &lt;em&gt;–ª–∏–Ω–µ–π–Ω—É—é –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å&lt;/em&gt; —Å–∫–≤–∞–∂–Ω–æ—Å—Ç–∏ –æ—Ç –æ–ø–æ—Ä–Ω–æ–≥–æ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –Ω–∞ –∫–æ–º–ø–∞—Ä–∞—Ç–æ—Ä–µ !&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/12/05/ngspicejs-skvazhnost-upravliaemaia-napriazheniem/comparator-single-canvas.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–ù–∞ –∫–∞—Ä—Ç–∏–Ω–∫–µ —Å–≤–µ—Ä—Ö—É –ø–æ–ª—É—á–∏–ª—Å—è –º–µ–∞–Ω–¥—Ä —Ç.–∫. —Å–∫–≤–∞–∂–Ω–æ—Å—Ç—å 0.5. –¢—Ä–µ—É–≥–æ–ª—å–Ω–∏–∫ –º–æ–∂–µ—Ç –±—ã—Ç—å —Å –ª—é–±—ã–º–∏ —É–≥–ª–∞–º–∏. –î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ &lt;a href="https://ngspice.js.org/?gist=86f37ddc1a91384f8a7e88988986c8d8"&gt;–ø–æ–¥–Ω–∏–º–µ–º&lt;/a&gt; –æ–ø–æ—Ä–Ω–æ–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ —Å 5 –¥–æ 7.5 –∫–æ–º–∞–Ω–¥–æ–π &lt;code&gt;alter v2 7.5&lt;/code&gt;, —á—Ç–æ–±—ã —Å–∫–≤–∞–∂–Ω–æ—Å—Ç—å &lt;a href="https://bc.js.org/"&gt;–±—ã–ª–∞&lt;/a&gt; &lt;code&gt;(3.75-1.5)/(3.75-0.75) = 0.75&lt;/code&gt;:&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/12/05/ngspicejs-skvazhnost-upravliaemaia-napriazheniem/comparator-single-canvas-75.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–û—Å—Ç–∞–ª–æ—Å—å –Ω–∞—É—á–∏—Ç—å—Å—è –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ç—Ä–µ—É–≥–æ–ª—å–Ω—ã–µ –∏–º–ø—É–ª—å—Å—ã –∏ –¥–µ–ª–æ –≤ —à–ª—è–ø–µ. –û–¥–∏–Ω –∏–∑ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–≤–∞ –û–£ - –ø–µ—Ä–≤—ã–π —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —Ç—Ä–∏–≥–≥–µ—Ä &lt;a href="http://proiot.ru/blog/posts/2016/11/24/ngspicejs-komparator-i-trigger-shmitta-na-ou/"&gt;–®–º–∏—Ç—Ç–∞&lt;/a&gt;, –∞ –≤—Ç–æ—Ä–æ–π - –∫–∞–∫ &lt;a href="http://proiot.ru/blog/posts/2016/11/30/ngspicejs-analogovye-integrator-i-differentsiator/"&gt;–∏–Ω—Ç–µ–≥—Ä–∞—Ç–æ—Ä&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/12/05/ngspicejs-skvazhnost-upravliaemaia-napriazheniem/triangle-generator.sch"&gt;–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä —Ç—Ä–µ—É–≥–æ–ª—å–Ω—ã—Ö –∏–º–ø—É–ª—å—Å–æ–≤ –Ω–∞ –û–£&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2016/12/05/ngspicejs-skvazhnost-upravliaemaia-napriazheniem/triangle-generator.net"&gt;netlist&lt;/a&gt; | &lt;a href="https://ngspice.js.org/?gist=7eb81126c9ae10683180e8213c3e0099"&gt;ngspice.js&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/12/05/ngspicejs-skvazhnost-upravliaemaia-napriazheniem/show-img-triangle-generator.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ngspice 1 -&amp;gt; source triangle-generator.net
ngspice 2 -&amp;gt; tran 10u 5m
ngspice 3 -&amp;gt; plot v(out)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ß–∞—Å—Ç–æ—Ç–∞ —Ç—Ä–µ—É–≥–æ–ª—å–Ω—ã—Ö –∏–º–ø—É–ª—å—Å–æ–≤ &lt;a href="https://bc.js.org/"&gt;—Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è&lt;/a&gt; –ø–æ —Ñ–æ—Ä–º—É–ª–µ &lt;code&gt;1/(2*R5*C1) = 1/(2*10^5*10^-8) = 500 –ì—Ü&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/12/05/ngspicejs-skvazhnost-upravliaemaia-napriazheniem/triangle-generator-canvas.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/12/06/ngspicejs-lineinye-stabilizatory-napriazheniia/"&gt;–î–∞–ª–µ–µ&lt;/a&gt; —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ç–æ—Ä—ã –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è&lt;/p&gt;</content><category term="gEDA"></category><category term="ngspice"></category><category term="–û–£"></category><category term="–®–ò–ú"></category></entry><entry><title>NGSPICE.js - –∞–Ω–∞–ª–æ–≥–æ–≤—ã–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ç–æ—Ä –∏ –¥–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏–∞—Ç–æ—Ä</title><link href="http://proiot.ru/blog/posts/2016/11/30/ngspicejs-analogovye-integrator-i-differentsiator/" rel="alternate"></link><published>2016-11-30T00:00:00+02:00</published><updated>2016-11-30T00:00:00+02:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2016-11-30:/blog/posts/2016/11/30/ngspicejs-analogovye-integrator-i-differentsiator/</id><summary type="html">&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/10/28/vvedenie-v-simuliatsiiu-elektricheskikh-skhem-s-pomoshchiu-ngspicejs/"&gt;–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º&lt;/a&gt; –æ—Å–≤–∞–∏–≤–∞—Ç—å NGSPICE –≤–æ–æ–±—â–µ –∏ &lt;a href="http://proiot.ru/blog/posts/2016/11/18/ngspicejs-idealnyi-operatsionnyi-usilitel/"&gt;–û–£&lt;/a&gt; –≤ —á–∞—Å—Ç–Ω–æ—Å—Ç–∏.&lt;/p&gt;
&lt;p&gt;–ò–Ω—Ç–µ–≥—Ä–∞—Ç–æ—Ä - —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ, —É—Ä–æ–≤–µ–Ω—å –≤—ã—Ö–æ–¥–Ω–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞ –∫–æ—Ç–æ—Ä–æ–≥–æ –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª–µ–Ω &lt;em&gt;–∏–Ω—Ç–µ–≥—Ä–∞–ª—É&lt;/em&gt; (—Å—É–º–º—ã –¥–ª—è –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–≥–æ —á–∏—Å–ª–∞ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ –º–∞–ª—ã—Ö —Å–ª–∞–≥–∞–µ–º—ã—Ö), –æ–±—ã—á–Ω–æ –ø–æ –≤—Ä–µ–º–µ–Ω–∏, –æ—Ç –≤—Ö–æ–¥–Ω–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞. –í —Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å –¥–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏–∞—Ç–æ—Ä –≤—ã–ø–æ–ª–Ω—è–µ—Ç –æ–±—Ä–∞—Ç–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é - —É—Ä–æ–≤–µ–Ω—å –≤—ã—Ö–æ–¥–Ω–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞ –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª–µ–Ω &lt;em&gt;—Å–∫–æ—Ä–æ—Å—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è&lt;/em&gt; —Å–∏–≥–Ω–∞–ª–∞ –Ω–∞ –≤—Ö–æ–¥–µ. –ê–Ω–∞–ª–æ–≥–æ–≤—ã–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ç–æ—Ä –∏ –¥–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏–∞—Ç–æ—Ä –≤ ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/10/28/vvedenie-v-simuliatsiiu-elektricheskikh-skhem-s-pomoshchiu-ngspicejs/"&gt;–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º&lt;/a&gt; –æ—Å–≤–∞–∏–≤–∞—Ç—å NGSPICE –≤–æ–æ–±—â–µ –∏ &lt;a href="http://proiot.ru/blog/posts/2016/11/18/ngspicejs-idealnyi-operatsionnyi-usilitel/"&gt;–û–£&lt;/a&gt; –≤ —á–∞—Å—Ç–Ω–æ—Å—Ç–∏.&lt;/p&gt;
&lt;p&gt;–ò–Ω—Ç–µ–≥—Ä–∞—Ç–æ—Ä - —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ, —É—Ä–æ–≤–µ–Ω—å –≤—ã—Ö–æ–¥–Ω–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞ –∫–æ—Ç–æ—Ä–æ–≥–æ –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª–µ–Ω &lt;em&gt;–∏–Ω—Ç–µ–≥—Ä–∞–ª—É&lt;/em&gt; (—Å—É–º–º—ã –¥–ª—è –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–≥–æ —á–∏—Å–ª–∞ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ –º–∞–ª—ã—Ö —Å–ª–∞–≥–∞–µ–º—ã—Ö), –æ–±—ã—á–Ω–æ –ø–æ –≤—Ä–µ–º–µ–Ω–∏, –æ—Ç –≤—Ö–æ–¥–Ω–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞. –í —Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å –¥–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏–∞—Ç–æ—Ä –≤—ã–ø–æ–ª–Ω—è–µ—Ç –æ–±—Ä–∞—Ç–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é - —É—Ä–æ–≤–µ–Ω—å –≤—ã—Ö–æ–¥–Ω–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞ –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª–µ–Ω &lt;em&gt;—Å–∫–æ—Ä–æ—Å—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è&lt;/em&gt; —Å–∏–≥–Ω–∞–ª–∞ –Ω–∞ –≤—Ö–æ–¥–µ. –ê–Ω–∞–ª–æ–≥–æ–≤—ã–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ç–æ—Ä –∏ –¥–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏–∞—Ç–æ—Ä –≤ –ø—Ä–æ—Å—Ç–µ–π—à–µ–º —Å–ª—É—á–∞–µ –º–æ–≥—É—Ç –±—ã—Ç—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –Ω–∞ RC &lt;a href="http://proiot.ru/blog/posts/2016/10/29/ngspicejs-rc-filtr-nizhnikh-chastot/"&gt;—Ü–µ–ø–æ—á–∫–µ&lt;/a&gt;, —Ç.–µ. –ø—Ä–∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–º –≤–∫–ª—é—á–µ–Ω–∏–∏ –∫–æ–Ω–¥–µ–Ω—Å–∞—Ç–æ—Ä–∞ –∏ —Ä–µ–∑–∏—Å—Ç–æ—Ä–∞, –Ω–æ –æ–±–æ –≤—Å—ë–º –ø–æ –ø–æ—Ä—è–¥–∫—É. –ö—Å—Ç–∞—Ç–∏ –ø–æ—á–µ–º—É –≤ &lt;a href="http://proiot.ru/blog/posts/2016/10/29/ngspicejs-rc-filtr-nizhnikh-chastot/"&gt;–ø—Ä–µ–¥—ã–¥—É—â–µ–º&lt;/a&gt; –ø—Ä–∏–º–µ—Ä–µ RC —Ü–µ–ø–æ—á–∫–∏ —Ñ–∞–∑—ã –≤—Ö–æ–¥–Ω–æ–≥–æ –∏ –≤—ã—Ö–æ–¥–Ω–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞ —Å–¥–≤–∏–Ω—É—Ç—ã –Ω–∞ 90¬∞ ? –ß–µ–º—É —Ä–∞–≤–µ–Ω –∏–Ω—Ç–µ–≥—Ä–∞–ª –æ—Ç sin(x) –ø–æ x ? –ß–µ–º—É —Ä–∞–≤–Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–Ω–∞—è –æ—Ç sin(x) ? &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;
&lt;span class="s1"&gt;    set term png truecolor size 1280,720&lt;/span&gt;
&lt;span class="s1"&gt;    set xrange [0:2*pi]&lt;/span&gt;
&lt;span class="s1"&gt;    set xtics (0, &amp;quot;œÄ/2&amp;quot; pi/2, &amp;quot;œÄ&amp;quot; pi, &amp;quot;œÄ3/2&amp;quot; 3*pi/2, &amp;quot;2œÄ&amp;quot; 2*pi)&lt;/span&gt;
&lt;span class="s1"&gt;    set grid ytics xtics&lt;/span&gt;
&lt;span class="s1"&gt;    plot sin(x), -cos(x)&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;#39;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; gnuplot &amp;gt; rc.sin.cos.png
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–†–∏—Å–æ–≤–∞—Ç—å –≥—Ä–∞—Ñ–∏–∫–∏ —É–¥–æ–±–Ω–æ —Å –ø–æ–º–æ—â—å—é GnuPlot. –í–∞–∂–Ω–µ–π—à–∞—è –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—å —Å–∏–Ω—É—Å–æ–∏–¥–∞–ª—å–Ω—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤ –≤ —Ç–æ–º, —á—Ç–æ –ø—Ä–∏ –¥–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏—Ä–æ–≤–∞–Ω–∏–∏/–∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ñ–æ—Ä–º–∞ —Å–∏–≥–Ω–∞–ª–∞ –Ω–µ –º–µ–Ω—è–µ—Ç—Å—è - –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å—Å—è —Ç–æ–ª—å–∫–æ —Ñ–∞–∑–∞:&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/11/30/ngspicejs-analogovye-integrator-i-differentsiator/rc.sin.cos.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–í—Å–ø–æ–º–Ω–∏–º –Ω–µ–º–Ω–æ–≥–æ –º–∞—Ç–µ–º–∞—Ç–∏–∫–∏. –ö–∞–∫ –∏–∑–≤–µ—Å—Ç–Ω–æ –∏–∑ —Ç–µ–æ—Ä–∏–∏ —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∏—Ö —Ü–µ–ø–µ–π –≤ —Å–ª—É—á–∞–µ &lt;em&gt;–ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–≥–æ&lt;/em&gt; —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è &lt;em&gt;—Ä–µ–∑–∏—Å—Ç–æ—Ä–∞&lt;/em&gt; –∏ &lt;em&gt;–∫–æ–Ω–¥–µ–Ω—Å–∞—Ç–æ—Ä–∞&lt;/em&gt; –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –≤—ã—Ö–æ–¥–Ω–æ–≥–æ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –æ—Ç –≤—Ö–æ–¥–Ω–æ–≥–æ –æ–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –¥–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–º —É—Ä–∞–≤–Ω–µ–Ω–∏–µ–º:&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/11/30/ngspicejs-analogovye-integrator-i-differentsiator/main-formula.svg" style="width:75%; margin: 0 auto; display:block;"&gt;&lt;/p&gt;
&lt;p&gt;–ì–¥–µ &lt;code&gt;Uout&lt;/code&gt; - –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –Ω–∞ —Ä–µ–∑–∏—Å—Ç–æ—Ä–µ –≤ –í–æ–ª—å—Ç–∞—Ö, &lt;code&gt;–°&lt;/code&gt; - —ë–º–∫–æ—Å—Ç—å –∫–æ–Ω–¥–µ–Ω—Å–∞—Ç–æ—Ä–∞ –≤ –§–∞—Ä–∞–¥–∞—Ö, &lt;code&gt;R&lt;/code&gt; - —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ —Ä–µ–∑–∏—Å—Ç–æ—Ä–∞ –≤ –û–º–∞—Ö, &lt;code&gt;dUin/dt&lt;/code&gt; –∏ &lt;code&gt;dUout/dt&lt;/code&gt; - –ø—Ä–æ–∏–∑–≤–æ–¥–Ω—ã–µ –≤—Ö–æ–¥–Ω–æ–≥–æ –∏ –≤—ã—Ö–æ–¥–Ω–æ–≥–æ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–π –ø–æ –≤—Ä–µ–º–µ–Ω–∏. –ö–∞–∫–æ–π —Ñ–∏–∑–∏—á–µ—Å–∫–∏–π —Å–º—ã—Å–ª —É –¥–∞–Ω–Ω–æ–≥–æ —É—Ä–∞–≤–Ω–µ–Ω–∏—è ?&lt;/p&gt;
&lt;p&gt;–°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ª—É—á–∞–π - –Ω–∞ –≤—Ö–æ–¥–µ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ, —Ç–æ–≥–¥–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–Ω–∞—è &lt;code&gt;dUin/dt&lt;/code&gt; —Ä–∞–≤–Ω–∞ –Ω—É–ª—é –∏ —Ñ–æ—Ä–º—É–ª–∞ –ø—Ä–∏–≤–æ–¥–∏—Ç—Å—è –∫ –≤–∏–¥—É &lt;code&gt;dUout/Uout = -dt/RC&lt;/code&gt;. –ü—Ä–æ–∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–≤ –ª–µ–≤—É—é –∏ –ø—Ä–∞–≤—É—é —á–∞—Å—Ç—å –∏–º–µ–µ–º &lt;code&gt;‚à´dUout/Uout = ‚à´-dt/RC&lt;/code&gt;, –≥–¥–µ &lt;code&gt;‚à´dUout/Uout = ln|Uout| + const&lt;/code&gt; —ç—Ç–æ —Ç–∞–±–ª–∏—á–Ω—ã–π –∏–Ω—Ç–µ–≥—Ä–∞–ª –∏ –µ–≥–æ —É–º–Ω—ã–µ –ª—é–¥–∏ —É–∂–µ –¥–∞–≤–Ω–æ —Ä–∞—Å—Å—á–∏—Ç–∞–ª–∏, –∞ &lt;code&gt;‚à´-dt/RC = (-t/RC) + const&lt;/code&gt;. –û–∫–æ–Ω—á–∞—Ç–µ–ª—å–Ω–æ –ø–æ–ª—É—á–∞–µ–º &lt;code&gt;Uout = exp(-t/RC) * const&lt;/code&gt;. –ü–æ—Ä–∏—Å—É–µ–º:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;
&lt;span class="s1"&gt;    set term png truecolor size 1280,720&lt;/span&gt;
&lt;span class="s1"&gt;    R=42e3&lt;/span&gt;
&lt;span class="s1"&gt;    C=1e-6&lt;/span&gt;
&lt;span class="s1"&gt;    V=12&lt;/span&gt;
&lt;span class="s1"&gt;    œÑ=R*C&lt;/span&gt;
&lt;span class="s1"&gt;    set xrange [0:6*œÑ]&lt;/span&gt;
&lt;span class="s1"&gt;    set xtics (&amp;quot;œÑ(f)&amp;quot; œÑ, &amp;quot;2œÑ&amp;quot; 2*œÑ, &amp;quot;3œÑ(%g)&amp;quot; 3*œÑ, &amp;quot;4œÑ&amp;quot; 4*œÑ, &amp;quot;5œÑ&amp;quot; 5*œÑ, &amp;quot;6œÑ&amp;quot; 6*œÑ)&lt;/span&gt;
&lt;span class="s1"&gt;    set xlabel &amp;quot;Time(second)&amp;quot;&lt;/span&gt;
&lt;span class="s1"&gt;    set ylabel &amp;quot;Voltage(Volt)&amp;quot;&lt;/span&gt;
&lt;span class="s1"&gt;    set grid ytics xtics&lt;/span&gt;
&lt;span class="s1"&gt;    set key center&lt;/span&gt;
&lt;span class="s1"&gt;    plot V*(1-exp(-x/œÑ)), V*exp(-x/œÑ)&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;#39;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; gnuplot &amp;gt; rc.tau.png
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ï—Å–ª–∏ –∏–∑–º–µ—Ä—è—Ç—å –≤—Ä–µ–º—è –≤–µ–ª–∏—á–∏–Ω–∞–º–∏ RC, —Ç–æ –≥—Ä–∞—Ñ–∏–∫ –±—É–¥–µ—Ç –≤—Å–µ–≥–¥–∞ –æ–¥–∏–Ω–∞–∫–æ–≤ –¥–ª—è –ª—é–±–æ–π RC —Ü–µ–ø–∏. –ü–æ—ç—Ç–æ–º—É –≤–µ–ª–∏—á–∏–Ω—É &lt;code&gt;œÑ = R*C&lt;/code&gt; –ø—Ä–∏–Ω—è—Ç–æ –Ω–∞–∑—ã–≤–∞—Ç—å &lt;em&gt;–ø–æ—Å—Ç–æ—è–Ω–Ω–æ–π –≤—Ä–µ–º–µ–Ω–∏&lt;/em&gt;. –¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –Ω–∞ –∫–æ–Ω–¥–µ–Ω—Å–∞—Ç–æ—Ä–µ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –¥–æ—Å—Ç–∏–≥–Ω–µ—Ç –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –ø–∏—Ç–∞–Ω–∏—è, –Ω–æ –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ —Å—á–∏—Ç–∞–µ—Ç—Å—è —á—Ç–æ –≤—Ä–µ–º–µ–Ω–∏ 5œÑ –∏ –±–æ–ª–µ–µ —É–∂–µ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ: &lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/11/30/ngspicejs-analogovye-integrator-i-differentsiator/rc.tau.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–í –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω–æ—Å—Ç—å –∫ –ø—Ä–µ–¥—ã–¥—É—â–µ–º—É —Å–ª—É—á–∞—é –ø—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —á—Ç–æ –≤—Ö–æ–¥–Ω–æ–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å —Å 0 –¥–æ U –∑–∞ –≤—Ä–µ–º—è –º–Ω–æ–≥–æ –º–µ–Ω—å—à–µ–µ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–π –≤—Ä–µ–º–µ–Ω–∏ &lt;code&gt;dt &amp;lt;&amp;lt; œÑ&lt;/code&gt;. –¢–æ–≥–¥–∞ &lt;code&gt;Uout = œÑ*dUin/dt - œÑ*(Uout-0)/dt&lt;/code&gt; –∏–ª–∏ &lt;code&gt;Uout = œÑ*dUin/dt - œÑ*Uout/dt&lt;/code&gt;, –∞ —É—á–∏—Ç—ã–≤–∞—è &lt;code&gt;Uout &amp;lt;&amp;lt; œÑ*Uout/dt&lt;/code&gt; –º–æ–∂–Ω–æ –ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–∏—Ä–∞–≤–Ω—è—Ç—å &lt;code&gt;dUin/dt ‚âà dUout/dt&lt;/code&gt;, —Ç.–µ. –≤—Å—ë –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –Ω–∞ –≤—Ö–æ–¥–µ RC —Ü–µ–ø–æ—á–∫–∏ –æ—Å–µ–¥–∞–µ—Ç –Ω–∞ —Ä–µ–∑–∏—Å—Ç–æ—Ä–µ —Ç.–∫. –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –Ω–∞ –∫–æ–Ω–¥–µ–Ω—Å–∞—Ç–æ—Ä–µ –Ω–µ –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ.&lt;/p&gt;
&lt;p&gt;–ê –µ—Å–ª–∏ –≤—Ö–æ–¥–Ω–æ–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å —Å 0 –¥–æ U –∑–∞ –≤—Ä–µ–º—è –º–Ω–æ–≥–æ –±–æ–ª—å—à–µ–µ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–π –≤—Ä–µ–º–µ–Ω–∏ &lt;code&gt;dt &amp;gt;&amp;gt; œÑ&lt;/code&gt; ? –¢–æ–≥–¥–∞ &lt;code&gt;Uout &amp;gt;&amp;gt; œÑ*Uout/dt&lt;/code&gt; –∏ –º–æ–∂–Ω–æ –ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–∏—Ä–∞–≤–Ω—è—Ç—å &lt;code&gt;Uout ‚âà œÑ*dUin/dt&lt;/code&gt;, —Ç.–µ. –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ç–∞–∫–∞—è RC —Ü–µ–ø–æ—á–∫–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç &lt;strong&gt;–æ–ø–µ—Ä–∞—Ü–∏—é –¥–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏—Ä–æ–≤–∞–Ω–∏—è&lt;/strong&gt; - –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –Ω–∞ —Ä–µ–∑–∏—Å—Ç–æ—Ä–µ —è–≤–ª—è–µ—Ç—Å—è &lt;em&gt;–ø—Ä–æ–∏–∑–≤–æ–¥–Ω–æ–π&lt;/em&gt; –æ—Ç —Ñ—É–Ω–∫—Ü–∏–∏ –≤—Ö–æ–¥–Ω–æ–≥–æ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –ø–æ –≤—Ä–µ–º–µ–Ω–∏ —Å –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–º œÑ:&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/11/30/ngspicejs-analogovye-integrator-i-differentsiator/differentiator.svg" style="width:42%; margin: 0 auto; display:block;"&gt;&lt;/p&gt;
&lt;p&gt;–ï—Å–ª–∏ —Ç–µ–ø–µ—Ä—å –≤—ã—Ö–æ–¥–Ω–æ–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ —Å–Ω–∏–º–∞—Ç—å –Ω–µ —Å —Ä–µ–∑–∏—Å—Ç–æ—Ä–∞, –∞ —Å –µ–º–∫–æ—Å—Ç–∏, —Ç.–µ. Uout = Uc, —Ç–æ –¥–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–µ —É—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø—Ä–∏–º–µ—Ç –≤–∏–¥ &lt;code&gt;Uout + œÑ*dUout/dt = Uin&lt;/code&gt;. –í —Å–ª—É—á–∞–µ &lt;code&gt;dt &amp;gt;&amp;gt; œÑ&lt;/code&gt; –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –Ω–∞ –∫–æ–Ω–¥–µ–Ω—Å–∞—Ç–æ—Ä–µ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –Ω–∞ –≤—Ö–æ–¥–µ - –ø–æ –∏—Å—Ç–µ—á–µ–Ω–∏–∏ –±–æ–ª—å—à–æ–≥–æ –ø—Ä–æ–º–µ–∂—É—Ç–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ &lt;code&gt;Uout ‚âà Uin&lt;/code&gt;. –í —Å–ª—É—á–∞–µ &lt;code&gt;dt &amp;lt;&amp;lt; œÑ&lt;/code&gt; –∏–º–µ–µ–º  &lt;code&gt;Uin ‚âà œÑ*dUout/dt&lt;/code&gt;, —Ç–∞–∫–∞—è RC —Ü–µ–ø–æ—á–∫–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç &lt;strong&gt;–æ–ø–µ—Ä–∞—Ü–∏—é –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∏—è&lt;/strong&gt; –æ—Ç —Ñ—É–Ω–∫—Ü–∏–∏ –≤—Ö–æ–¥–Ω–æ–≥–æ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è c –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–º 1/œÑ:&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/11/30/ngspicejs-analogovye-integrator-i-differentsiator/integrator.svg" style="width:55%; margin: 0 auto; display:block;"&gt;&lt;/p&gt;
&lt;p&gt;–° —É—á—ë—Ç–æ–º –≤—ã—à–µ—Å–∫–∞–∑–∞–Ω–Ω–æ–≥–æ —Ä–µ–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–æ–≥–æ–≤—ã–π –∏–Ω—Ç–µ–≥—Ä–∞—Ç–æ—Ä/–¥–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏–∞—Ç–æ—Ä –¥–æ–ª–∂–µ–Ω –ø–æ–±–æ—Ä–æ—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∏ –ø—Ä–æ—Å—Ç–æ–π RC —Ü–µ–ø–æ—á–∫–∏:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;–∫–æ–º–ø–µ–Ω—Å–∏—Ä–æ–≤–∞—Ç—å –æ—Å–ª–∞–±–ª–µ–Ω–∏–µ —Å–∏–≥–Ω–∞–ª–∞, –∫–æ—Ç–æ—Ä–æ–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø—Ä–∏ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–∏ —á–µ—Ä–µ–∑ RC —Ü–µ–ø—å&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;–¥–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ —É—Ä–∞–≤–Ω–µ–Ω–∏—è –Ω–µ —É—á–∏—Ç—ã–≤–∞—é—Ç &lt;a href="http://proiot.ru/blog/posts/2016/11/04/ngspicejs-soglasovanie-istochnika-s-nagruzkoi/"&gt;–≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ&lt;/a&gt; —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏—è –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è —Ä–æ–≤–Ω–æ –∫–∞–∫ –∏ –≤–ª–∏—è–Ω–∏—è —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏ &lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- 
&lt;a href="http://proiot.ru/blog/posts/2016/11/30/ngspicejs-analogovye-integrator-i-differentsiator/LT1007CS.txt"&gt;&lt;/a&gt;
--&gt;

&lt;p&gt;–° —ç—Ç–∏–º–∏ –æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç—è–º–∏ –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ —Å–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —É—Å–∏–ª–∏—Ç–µ–ª—å. –í —Å–ª–µ–¥—É—é—â–∏—Ö —Å—Ö–µ–º–∞—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞—Å—å SPICE –º–æ–¥–µ–ª—å –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —É—Å–∏–ª–∏—Ç–µ–ª—è LT1007:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ wget http://cds.linear.com/docs/en/software-and-simulation/LT1007CS.txt
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/11/30/ngspicejs-analogovye-integrator-i-differentsiator/integrator.sch"&gt;–∏–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—â–∏–π –∏–Ω—Ç–µ–≥—Ä–∞—Ç–æ—Ä –Ω–∞ –û–£&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2016/11/30/ngspicejs-analogovye-integrator-i-differentsiator/integrator.net"&gt;netlist&lt;/a&gt; | &lt;a href="https://ngspice.js.org/?gist=fc93f44bdc51d7769320c239e98b86f7"&gt;ngspice.js&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/11/30/ngspicejs-analogovye-integrator-i-differentsiator/show-img-integrator.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ngspice 1 -&amp;gt; source integrator.net
ngspice 2 -&amp;gt; tran 10u 100m 94m
ngspice 3 -&amp;gt; plot v(out) v(in)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ö–æ–Ω–¥–µ–Ω—Å–∞—Ç–æ—Ä –°f, –∫—Ä–æ–º–µ –∑–∞—Ä—è–¥–∞ –≤—Ö–æ–¥–Ω—ã–º —Ç–æ–∫–æ–º –∑–∞—Ä—è–∂–∞–µ—Ç—Å—è —Ä–∞–∑–ª–∏—á–Ω—ã–º–∏ —Ç–æ–∫–∞–º–∏ —É—Ç–µ—á–∫–∏ –∏ —Å–º–µ—â–µ–Ω–∏—è –û–£ –∏ –¥–ª—è –±–æ—Ä—å–±—ã —Å —ç—Ç–∏–º —è–≤–ª–µ–Ω–∏–µ–º —Å—Ç–∞–≤–∏—Ç—Å—è —à—É–Ω—Ç–∏—Ä—É—é—â–∏–π —Ä–µ–∑–∏—Å—Ç–æ—Ä Rf, –≥–¥–µ &lt;code&gt;Rf &amp;gt;&amp;gt; Rg&lt;/code&gt;. –†–∞—Å—Å—á–∏—Ç–∞–µ–º –ø–æ–≤–µ–¥–µ–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ç–æ—Ä–∞ –∏—Å—Ö–æ–¥—è –∏–∑ –≤—Ö–æ–¥–Ω–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞ –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–æ–π —Ñ–æ—Ä–º—ã –∞–º–ø–ª–∏—Ç—É–¥–æ–π 3–í –∏ —á–∞—Å—Ç–æ—Ç–æ–π 500–ì—Ü –ø—Ä–∏ –°f = 0.1–º–∫–§ –∏ Rg = 5–∫–û–º. –ü—Ä–æ–∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–≤ &lt;code&gt;Uout = -1/RC‚à´(Uin)dt = -Ut/RC&lt;/code&gt; –∏–ª–∏ –µ—Å–ª–∏ —á–µ–ª–æ–≤–µ—á–µ—Å–∫–∏–º —è–∑—ã–∫–æ–º, —Ç–æ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –≤—ã—Ö–æ–¥–Ω–æ–≥–æ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –≤–æ –≤—Ä–µ–º–µ–Ω–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –Ω–∞–∫–ª–æ–Ω–Ω—É—é –ø—Ä—è–º—É—é —Å –ø–æ–ª—è—Ä–Ω–æ—Å—Ç—å—é, –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω–æ–π –ø–æ–ª—è—Ä–Ω–æ—Å—Ç–∏ –≤—Ö–æ–¥–Ω–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞. –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ–º –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –æ—Ç 0 –¥–æ &lt;code&gt;1/(2*500–ì—Ü)=1–º—Å&lt;/code&gt; &lt;a href="https://bc.js.org/"&gt;–ø–æ–ª—É—á–∏–º&lt;/a&gt; –∑–Ω–∞—á–µ–Ω–∏–µ &lt;code&gt;Uout = -3*10^-3/(10^-7*5*10^3) = -6 –í–æ–ª—å—Ç&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/11/30/ngspicejs-analogovye-integrator-i-differentsiator/integrator-canvas.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–ï—Å–ª–∏ –Ω–∞ –ø—Ä–µ–¥—ã–¥—É—â–µ–π —Å—Ö–µ–º–µ –≤—Å–µ–≥–æ-–Ω–∞–≤—Å–µ–≥–æ –ø–æ–º–µ–Ω—è—Ç—å —Ä–µ–∑–∏—Å—Ç–æ—Ä –∏ –∫–æ–Ω–¥–µ–Ω—Å–∞—Ç–æ—Ä –º–µ—Å—Ç–∞–º–∏ –ø–æ–ª—É—á–∏–º –¥–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏–∞—Ç–æ—Ä. –î–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è —Å–∞–º–æ–≤–æ–∑–±—É–∂–¥–µ–Ω–∏—è –¥–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏–∞—Ç–æ—Ä–∞ –Ω–∞ –≤—ã—Å–æ–∫–∏—Ö —á–∞—Å—Ç–æ—Ç–∞—Ö –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –≤–≤–æ–¥—è—Ç—Å—è —Ä–µ–∑–∏—Å—Ç–æ—Ä Rg –∏ –∫–æ–Ω–¥–µ–Ω—Å–∞—Ç–æ—Ä Cf –æ–±—ã—á–Ω–æ –ø—Ä–∏ —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–∏ &lt;code&gt;Rg*Cg = Rf*Cf&lt;/code&gt;: &lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/11/30/ngspicejs-analogovye-integrator-i-differentsiator/differentiator.sch"&gt;–∏–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—â–∏–π –¥–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏–∞—Ç–æ—Ä –Ω–∞ –û–£&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2016/11/30/ngspicejs-analogovye-integrator-i-differentsiator/differentiator.net"&gt;netlist&lt;/a&gt; | &lt;a href="https://ngspice.js.org/?gist=e7cdf966f76ff7eef4d726f3af2cae31"&gt;ngspice.js&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/11/30/ngspicejs-analogovye-integrator-i-differentsiator/show-img-differentiator.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ngspice 1 -&amp;gt; source differentiator.net
ngspice 2 -&amp;gt; tran 0.25m 0.25
ngspice 3 -&amp;gt; plot v(out) v(in)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ö –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∞–º –¥–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏–∞—Ç–æ—Ä–æ–≤ –ø—Ä–µ–∂–¥–µ –≤—Å–µ–≥–æ –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –æ—á–µ–Ω—å –±–æ–ª—å—à–∞—è —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫ —à—É–º–∞–º –∏ –ø–æ–º–µ—Ö–∞–º —É –≤—Ö–æ–¥–Ω–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞.  –ü—Ä–∏ —Ä–µ–∑–∫–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –≤—Ö–æ–¥–Ω–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–Ω–∞—è –æ—á–µ–Ω—å –±–æ–ª—å—à–∞—è –∏ –û–£ –≤—Ö–æ–¥–∏—Ç –≤ —Ä–µ–∂–∏–º –Ω–∞—Å—ã—â–µ–Ω–∏—è. –ü–æ–ª—É—á–∞–µ–º —Ç–∞–∫–æ–π –≤–æ—Ç –∫–∞–∫—Ç—É—Å (—à—É—Ç–∫–∞):&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/11/30/ngspicejs-analogovye-integrator-i-differentsiator/differentiator-canvas.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–º –ø—Ä–∏–º–µ—Ä–æ–º –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏–Ω—Ç–µ–≥—Ä–∞—Ç–æ—Ä–∞ –∏ –¥–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏–∞—Ç–æ—Ä–∞ —è–≤–ª—è–µ—Ç—Å—è –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω–æ-–∏–Ω—Ç–µ–≥—Ä–∞–ª—å–Ω–æ-–¥–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏—Ä—É—é—â–∏–π (–ü–ò–î) —Ä–µ–≥—É–ª—è—Ç–æ—Ä.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/12/05/ngspicejs-skvazhnost-upravliaemaia-napriazheniem/"&gt;–î–∞–ª–µ–µ&lt;/a&gt; —à–∏—Ä–æ—Ç–Ω–æ-–∏–º–ø—É–ª—å—Å–Ω–∞—è –º–æ–¥—É–ª—è—Ü–∏—è (–®–ò–ú) –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–º –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è.&lt;/p&gt;</content><category term="gEDA"></category><category term="ngspice"></category><category term="–û–£"></category><category term="GnuPlot"></category></entry><entry><title>NGSPICE.js - –¥–≤—É—Ö—Ç–∞–∫—Ç–Ω—ã–µ —É—Å–∏–ª–∏—Ç–µ–ª–∏ –º–æ—â–Ω–æ—Å—Ç–∏</title><link href="http://proiot.ru/blog/posts/2016/11/28/ngspicejs-dvukhtaktnye-usiliteli-moshchnosti/" rel="alternate"></link><published>2016-11-28T00:00:00+02:00</published><updated>2016-11-28T00:00:00+02:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2016-11-28:/blog/posts/2016/11/28/ngspicejs-dvukhtaktnye-usiliteli-moshchnosti/</id><summary type="html">&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/10/28/vvedenie-v-simuliatsiiu-elektricheskikh-skhem-s-pomoshchiu-ngspicejs/"&gt;–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º&lt;/a&gt; –æ—Å–≤–∞–∏–≤–∞—Ç—å NGSPICE –≤–æ–æ–±—â–µ –∏ &lt;a href="http://proiot.ru/blog/posts/2016/11/18/ngspicejs-idealnyi-operatsionnyi-usilitel/"&gt;–û–£&lt;/a&gt; –≤ —á–∞—Å—Ç–Ω–æ—Å—Ç–∏.&lt;/p&gt;
&lt;p&gt;–ò–∑ —à–∫–æ–ª—å–Ω–æ–≥–æ –∫—É—Ä—Å–∞ –ø–æ —Ñ–∏–∑–∏–∫–µ —Ö–æ—Ä–æ—à–æ –∏–∑–≤–µ—Å—Ç–Ω–∞ —Ñ–æ—Ä–º—É–ª–∞ –º–æ—â–Ω–æ—Å—Ç–∏ &lt;code&gt;P = U*I = U*U/R = I*I*R&lt;/code&gt;, –≥–¥–µ –ø–æ—Å–ª–µ–¥–Ω–∏–µ –¥–≤–µ —Ñ–æ—Ä–º—É–ª—ã —ç–ª–µ–º–µ–Ω—Ç–∞—Ä–Ω–æ –≤—ã–≤–æ–¥—è—Ç—Å—è –∏–∑ –∑–∞–∫–æ–Ω–∞ –û–º–∞, –∞ R - –Ω–µ —á—Ç–æ –∏–Ω–æ–µ, –∫–∞–∫ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –µ—Å–ª–∏ –≤–∑—è—Ç—å —É—Å–∏–ª–∏—Ç–µ–ª—å –ø–æ —Å—Ö–µ–º–µ ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/10/28/vvedenie-v-simuliatsiiu-elektricheskikh-skhem-s-pomoshchiu-ngspicejs/"&gt;–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º&lt;/a&gt; –æ—Å–≤–∞–∏–≤–∞—Ç—å NGSPICE –≤–æ–æ–±—â–µ –∏ &lt;a href="http://proiot.ru/blog/posts/2016/11/18/ngspicejs-idealnyi-operatsionnyi-usilitel/"&gt;–û–£&lt;/a&gt; –≤ —á–∞—Å—Ç–Ω–æ—Å—Ç–∏.&lt;/p&gt;
&lt;p&gt;–ò–∑ —à–∫–æ–ª—å–Ω–æ–≥–æ –∫—É—Ä—Å–∞ –ø–æ —Ñ–∏–∑–∏–∫–µ —Ö–æ—Ä–æ—à–æ –∏–∑–≤–µ—Å—Ç–Ω–∞ —Ñ–æ—Ä–º—É–ª–∞ –º–æ—â–Ω–æ—Å—Ç–∏ &lt;code&gt;P = U*I = U*U/R = I*I*R&lt;/code&gt;, –≥–¥–µ –ø–æ—Å–ª–µ–¥–Ω–∏–µ –¥–≤–µ —Ñ–æ—Ä–º—É–ª—ã —ç–ª–µ–º–µ–Ω—Ç–∞—Ä–Ω–æ –≤—ã–≤–æ–¥—è—Ç—Å—è –∏–∑ –∑–∞–∫–æ–Ω–∞ –û–º–∞, –∞ R - –Ω–µ —á—Ç–æ –∏–Ω–æ–µ, –∫–∞–∫ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –µ—Å–ª–∏ –≤–∑—è—Ç—å —É—Å–∏–ª–∏—Ç–µ–ª—å –ø–æ —Å—Ö–µ–º–µ —Å &lt;a href="http://proiot.ru/blog/posts/2016/11/07/ngspicejs-usilitelnyi-kaskad-s-obshchim-emitterom/"&gt;–û–≠&lt;/a&gt; –∏ –ø–µ—Ä–µ—Å—á–∏—Ç–∞—Ç—å –Ω–∞ –º–µ–Ω—å—à–µ–µ –≤—ã—Ö–æ–¥–Ω–æ–µ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ, —Ç–æ –º–æ—â–Ω–æ—Å—Ç—å –Ω–∞ –≤—ã—Ö–æ–¥–µ —É–≤–µ–ª–∏—á–∏—Ç—Å—è ? –í —Ç–µ–æ—Ä–∏–∏ –¥–∞, –æ–¥–Ω–∞–∫–æ –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ –º—ã —Å—Ç–æ–ª–∫–Ω—ë–º—Å—è —Å–æ —Å–ª–µ–¥—É—é—â–∏–º–∏ –ø—Ä–æ–±–ª–µ–º–∞–º–∏:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;—É –ª—é–±–æ–≥–æ —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –µ—Å—Ç—å –ø—Ä–µ–¥–µ–ª—å–Ω–æ –¥–æ–ø—É—Å—Ç–∏–º–∞—è –º–æ—â–Ω–æ—Å—Ç—å, –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ–º–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–µ–º - –¥–ª—è 2N2222 —ç—Ç–æ –ø–æ—Ä—è–¥–∫–∞ 0.5 –í—Ç, —Ç–∞–∫ —á—Ç–æ —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ –Ω–∞–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –±–æ–ª–µ–µ –º–æ—â–Ω—ã–π —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;–≤ —Ä–µ–∂–∏–º–µ –ø–æ–∫–æ—è (–ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –≤—Ö–æ–¥–Ω–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞) –≤ —Å—Ö–µ–º–µ —Å &lt;a href="http://proiot.ru/blog/posts/2016/11/07/ngspicejs-usilitelnyi-kaskad-s-obshchim-emitterom/"&gt;–û–≠&lt;/a&gt; —á–µ—Ä–µ–∑ –Ω–∞–≥—Ä—É–∑–∫—É R –ø—Ä–æ—Ç–µ–∫–∞–µ—Ç —Ç–æ–∫ &lt;code&gt;U/(2*R)&lt;/code&gt;, –ø–æ—ç—Ç–æ–º—É —á–µ–º –º–µ–Ω—å—à–µ R —Ç–µ–º –±–æ–ª—å—à–µ –±–µ—Å–ø–æ–ª–µ–∑–Ω–∞—è —Ç—Ä–∞—Ç–∞ —ç–ª–µ–∫—Ç—Ä–æ—ç–Ω–µ—Ä–≥–∏–∏&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;–ü–æ–±–æ—Ä–æ—Ç—å —ç—Ç–∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∏ –ø—Ä–∏–∑–≤–∞–Ω–∞ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–∞—è —Å—Ö–µ–º–∞, –∏–º–µ–Ω—É–µ–º–∞—è &lt;em&gt;–¥–≤—É—Ö—Ç–∞–∫—Ç–Ω—ã–º —É—Å–∏–ª–∏—Ç–µ–ª–µ–º&lt;/em&gt;. –†–∞—Å—Å–º–æ—Ç—Ä–∏–º –±–æ–ª–µ–µ –¥–µ—Ç–∞–ª—å–Ω–æ –æ–¥–Ω—É –∏–∑ –µ—ë —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–π –Ω–∞ –∫–æ–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ä–Ω–æ–π –ø–∞—Ä–µ &lt;a href="http://proiot.ru/blog/posts/2016/11/02/ngspicejs-bipoliarnyi-tranzistor/"&gt;–±–∏–ø–æ–ª—è—Ä–Ω—ã—Ö&lt;/a&gt; —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä–æ–≤ - —Ç–æ –µ—Å—Ç—å —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä–æ–≤ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã (p-n-p –∏ n-p-n), –Ω–æ —Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –±–ª–∏–∑–∫–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏.&lt;/p&gt;
&lt;!-- 
&lt;a href="http://proiot.ru/blog/posts/2016/11/28/ngspicejs-dvukhtaktnye-usiliteli-moshchnosti/LT1007CS.txt"&gt;&lt;/a&gt;
&lt;a href="http://proiot.ru/blog/posts/2016/11/28/ngspicejs-dvukhtaktnye-usiliteli-moshchnosti/2N5686.LIB"&gt;&lt;/a&gt;
&lt;a href="http://proiot.ru/blog/posts/2016/11/28/ngspicejs-dvukhtaktnye-usiliteli-moshchnosti/2N5684.LIB"&gt;&lt;/a&gt;
--&gt;

&lt;p&gt;–í —Å–ª–µ–¥—É—é—â–∏—Ö —Å—Ö–µ–º–∞—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å SPICE –º–æ–¥–µ–ª–∏ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —É—Å–∏–ª–∏—Ç–µ–ª—è LT1007 –∏ –∫–æ–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ä–Ω–æ–π –ø–∞—Ä—ã –º–æ—â–Ω—ã—Ö —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä–æ–≤ 2N5684 | 2N5686&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ wget http://cds.linear.com/docs/en/software-and-simulation/LT1007CS.txt
~$ wget http://www.onsemi.com/pub/Collateral/2N5686.LIB
~$ wget http://www.onsemi.com/pub/Collateral/2N5684.LIB
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/11/28/ngspicejs-dvukhtaktnye-usiliteli-moshchnosti/push-pull.sch"&gt;–¥–≤—É—Ö—Ç–∞–∫—Ç–Ω—ã—Ö —É—Å–∏–ª–∏—Ç–µ–ª—å –Ω–∞ –∫–æ–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ä–Ω–æ–π –ø–∞—Ä–µ&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2016/11/28/ngspicejs-dvukhtaktnye-usiliteli-moshchnosti/push-pull.net"&gt;netlist&lt;/a&gt; | &lt;a href="https://ngspice.js.org/?gist=563e8f84d54d533ad33e0dd8d271145d"&gt;ngspice.js&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/11/28/ngspicejs-dvukhtaktnye-usiliteli-moshchnosti/show-img-push-pull.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ngspice 1 -&amp;gt; source push-pull.net
ngspice 2 -&amp;gt; tran 5u 2m
ngspice 3 -&amp;gt; plot v(out) v(in)
ngspice 4 -&amp;gt; fourier 3k v(out)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–°—Ö–µ–º–∞ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –¥–≤—É—Ö —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä–æ–≤ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã, –≤–∫–ª—é—á—ë–Ω–Ω—ã—Ö –ø–æ —Å—Ö–µ–º–µ —Å &lt;a href="http://proiot.ru/blog/posts/2016/11/09/ngspicejs-usilitelnyi-kaskad-s-obshchim-kollektorom/"&gt;–û–ö&lt;/a&gt;. –ü—Ä–∏ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–π –ø–æ–ª—É–≤–æ–ª–Ω–µ –≤—Ö–æ–¥–Ω–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –æ–¥–∏–Ω —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä, –ø—Ä–∏ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–π –¥—Ä—É–≥–æ–π. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –º–æ—â–Ω–æ—Å—Ç—å —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –Ω–∞ –æ–±–∞ —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä–∞ –ø–æ—Ä–æ–≤–Ω—É. –°—Ö–µ–º–∞ —Å –û–ö –æ–±–ª–∞–¥–∞–µ—Ç –≤—ã—Å–æ–∫–∏–º –≤—Ö–æ–¥–Ω—ã–º —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ–º, –Ω–∏–∑–∫–∏–º –≤—ã—Ö–æ–¥–Ω—ã–º –∏ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–º —É—Å–∏–ª–µ–Ω–∏—è –ø–æ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—é –ø–æ—Ä—è–¥–∫–∞ –µ–¥–∏–Ω–∏—Ü—ã.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/11/28/ngspicejs-dvukhtaktnye-usiliteli-moshchnosti/push-pull-canvas.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–°–∏–ª—å–Ω—ã–µ –∏—Å–∫–∞–∂–µ–Ω–∏—è –≤—ã—Ö–æ–¥–Ω–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞ –Ω–∞ —Ä–∏—Å—É–Ω–∫–µ (fourier 35 %) –æ–±—ä—è—Å–Ω—è—é—Ç—Å—è —Ç–µ–º, —á—Ç–æ –±–∏–ø–æ–ª—è—Ä–Ω—ã–π —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –Ω–µ —Å—Ä–∞–∑—É, –∞ —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ 0.6 –í–æ–ª—å—Ç. –ß—Ç–æ–±—ã –ø–æ–Ω–∏–∑–∏—Ç—å –∏—Å–∫–∞–∂–µ–Ω–∏—è —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä—ã –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –¥–µ—Ä–∂–∞—Ç—å –≤ –ø—Ä–∏–æ—Ç–∫—Ä—ã—Ç–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏, –∑–∞–¥–∞–≤ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ Rb3:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ngspice 1 -&amp;gt; source push-pull.net
ngspice 2 -&amp;gt; alter rb3 1k
ngspice 3 -&amp;gt; tran 5u 2m
ngspice 4 -&amp;gt; plot v(out)
ngspice 5 -&amp;gt; fourier 3k v(out)
ngspice 6 -&amp;gt; op
ngspice 7 -&amp;gt; print i(v1)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –Ω–µ–ª–∏–Ω–µ–π–Ω—ã—Ö –∏—Å–∫–∞–∂–µ–Ω–∏–π (–ö–ù–ù) - –≤ —Ç–µ—Ä–º–∏–Ω–∞—Ö ngspice Total Harmonic Distortion (THD) &lt;a href="https://ngspice.js.org/?gist=267e04b8fa5e4a66ea82ccae2caf9c83"&gt;—Å–Ω–∏–∑–∏–ª—Å—è&lt;/a&gt; –¥–æ 0.0625869 %, –≤ —Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å–æ —Å—Ö–µ–º–æ–π —Å &lt;a href="http://proiot.ru/blog/posts/2016/11/07/ngspicejs-usilitelnyi-kaskad-s-obshchim-emitterom/"&gt;–û–≠&lt;/a&gt; –ö–ü–î –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –ø–æ–≤—ã—Å–∏–ª—Å—è —Ç–∞–∫ –∫–∞–∫ —Ç–æ–∫ –ø–æ–∫–æ—è –¥–∞–Ω–Ω–æ–π —Å—Ö–µ–º—ã &lt;code&gt;print i(v1)&lt;/code&gt; ‚âà 95 –º–ê, —á—Ç–æ –Ω–∞ –ø–æ—Ä—è–¥–æ–∫ –º–µ–Ω—å—à–µ —á–µ–º &lt;code&gt;U/(2*R) = 30/16 ‚âà 2 –ê&lt;/code&gt;. –ù–æ –º–æ–∂–Ω–æ –ª—É—á—à–µ !&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/11/28/ngspicejs-dvukhtaktnye-usiliteli-moshchnosti/push-pull-canvas-bias.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–ü—Ä–∏ –æ–¥–Ω–æ–ø–æ–ª—è—Ä–Ω–æ–º –ø–∏—Ç–∞–Ω–∏–∏ –Ω–∞ –≤—ã—Ö–æ–¥–µ —É—Å–∏–ª–∏—Ç–µ–ª—è —Å—Ç–∞–≤—è—Ç —Ä–∞–∑–≤—è–∑—ã–≤–∞—é—â–∏–π –∫–æ–Ω–¥–µ–Ω—Å–∞—Ç–æ—Ä, –ø—Ä–∏—á—ë–º —É—á–∏—Ç—ã–≤–∞—è –Ω–µ–±–æ–ª—å—à–æ–µ –≤—ã—Ö–æ–¥–Ω–æ–µ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ –∫–∞—Å–∫–∞–¥–∞ —Å &lt;a href="http://proiot.ru/blog/posts/2016/11/09/ngspicejs-usilitelnyi-kaskad-s-obshchim-kollektorom/"&gt;–û–ö&lt;/a&gt; –¥–ª—è –∑–≤—É–∫–æ–≤—ã—Ö —á–∞—Å—Ç–æ—Ç –µ–≥–æ —ë–º–∫–æ—Å—Ç—å –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø–∞—Ä—É —Ç—ã—Å—è—á –º–∏–∫—Ä–æ—Ñ–∞—Ä–∞–¥ - —Ç–∞–∫–æ–π —Å–µ–±–µ –±–æ—á–æ–Ω–æ–∫ –≤–Ω—É—à–∏—Ç–µ–ª—å–Ω—ã—Ö —Ä–∞–∑–º–µ—Ä–æ–≤.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/11/28/ngspicejs-dvukhtaktnye-usiliteli-moshchnosti/op-amp-push-pull.sch"&gt;–¥–≤—É—Ö—Ç–∞–∫—Ç–Ω—ã—Ö —É—Å–∏–ª–∏—Ç–µ–ª—å –Ω–∞ –û–£ —Å –æ–¥–Ω–æ–ø–æ–ª—è—Ä–Ω—ã–º –ø–∏—Ç–∞–Ω–∏–µ–º&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2016/11/28/ngspicejs-dvukhtaktnye-usiliteli-moshchnosti/op-amp-push-pull.net"&gt;netlist&lt;/a&gt; | &lt;a href="https://ngspice.js.org/?gist=2d0f909cb8624234a0126fa2f3b094dd"&gt;ngspice.js&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/11/28/ngspicejs-dvukhtaktnye-usiliteli-moshchnosti/show-img-op-amp-push-pull.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ngspice 1 -&amp;gt; source op-amp-push-pull.net
ngspice 2 -&amp;gt; tran 5u 2m
ngspice 3 -&amp;gt; plot v(out)
ngspice 4 -&amp;gt; fourier 3k v(out)
ngspice 5 -&amp;gt; op
ngspice 6 -&amp;gt; print i(v1)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ü–æ—á–µ–º—É –Ω–µ—Ç –∏—Å–∫–∞–∂–µ–Ω–∏–π –≤ —ç—Ç–æ–π —Å—Ö–µ–º–µ ? –≠—Ç–æ –º–∞–≥–∏—á–µ—Å–∫–æ–µ –≤–æ–∑–¥–µ–π—Å—Ç–≤–∏–µ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏ - –±–æ–ª—å—à–æ–π –∑–∞–ø–∞—Å —É—Å–∏–ª–µ–Ω–∏—è –≤—ã—Ç—è–≥–∏–≤–∞–µ—Ç –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –¥–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–≥–æ —É—Ä–æ–≤–Ω—è, –∑–∞–¥–∞–Ω–Ω–æ–≥–æ –û–û–°, –∏ —Ç–µ–º —Å–∞–º—ã–º —É–±–∏—Ä–∞–µ—Ç –∏—Å–∫–∞–∂–µ–Ω–∏—è. –ü–æ –∑–∞–º–µ—Ä–∞–º THD: 0.0387129 % —Ç–æ–≥–¥–∞ –∫–∞–∫ —Ç–æ–∫, –ø–æ—Ç—Ä–µ–±–ª—è–µ–º—ã–π –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –≤—Ö–æ–¥–Ω–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞, –≤—Å–µ–≥–æ –ª–∏—à—å 2.8 –º–ê ! –û—á–µ–Ω—å –∫—Ä–∞—Å–∏–≤–æ–µ –∏ –ø—Ä–∞–∫—Ç–∏—á–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –ø–æ—Ä—Ç–∞—Ç–∏–≤–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤, –∫–æ—Ç–æ—Ä—ã–µ —Ä–∞–±–æ—Ç–∞—é—Ç –æ—Ç –±–∞—Ç–∞—Ä–µ–µ–∫.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/11/28/ngspicejs-dvukhtaktnye-usiliteli-moshchnosti/op-amp-push-pull-canvas.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/11/30/ngspicejs-analogovye-integrator-i-differentsiator/"&gt;–î–∞–ª–µ–µ&lt;/a&gt; –∏–Ω—Ç–µ–≥—Ä–∞—Ç–æ—Ä –∏ –¥–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏–∞—Ç–æ—Ä –Ω–∞ –û–£.&lt;/p&gt;</content><category term="gEDA"></category><category term="ngspice"></category><category term="–û–£"></category></entry><entry><title>NGSPICE.js - –∫–æ–º–ø–∞—Ä–∞—Ç–æ—Ä –∏ —Ç—Ä–∏–≥–≥–µ—Ä –®–º–∏—Ç—Ç–∞ –Ω–∞ –û–£</title><link href="http://proiot.ru/blog/posts/2016/11/24/ngspicejs-komparator-i-trigger-shmitta-na-ou/" rel="alternate"></link><published>2016-11-24T00:00:00+02:00</published><updated>2016-11-24T00:00:00+02:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2016-11-24:/blog/posts/2016/11/24/ngspicejs-komparator-i-trigger-shmitta-na-ou/</id><summary type="html">&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/10/28/vvedenie-v-simuliatsiiu-elektricheskikh-skhem-s-pomoshchiu-ngspicejs/"&gt;–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º&lt;/a&gt; –æ—Å–≤–∞–∏–≤–∞—Ç—å NGSPICE –≤–æ–æ–±—â–µ –∏ &lt;a href="http://proiot.ru/blog/posts/2016/11/18/ngspicejs-idealnyi-operatsionnyi-usilitel/"&gt;–û–£&lt;/a&gt; –≤ —á–∞—Å—Ç–Ω–æ—Å—Ç–∏.&lt;/p&gt;
&lt;p&gt;–ö–æ–º–ø–∞—Ä–∞—Ç–æ—Ä —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç –¥–≤–∞ &lt;em&gt;–∞–Ω–∞–ª–æ–≥–æ–≤—ã—Ö&lt;/em&gt; —Å–∏–≥–Ω–∞–ª–∞ –∏ –≤—ã–¥–∞—ë—Ç –¥–≤–æ–∏—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –≤–∏–¥–µ 0 –∏–ª–∏ 1 –Ω–∞ –≤—ã—Ö–æ–¥–µ. –ü—Ä–æ—Å—Ç–µ–π—à—É—é —Å—Ö–µ–º—É –∫–æ–º–ø–∞—Ä–∞—Ç–æ—Ä–∞ –Ω–∞ &lt;a href="http://proiot.ru/blog/posts/2016/11/18/ngspicejs-idealnyi-operatsionnyi-usilitel/"&gt;–û–£&lt;/a&gt; –º—ã —É–∂–µ –ø–æ—Å—Ç—Ä–æ–∏–ª–∏ —Ä–∞–Ω–µ–µ - –Ω–∞ –æ–¥–∏–Ω –∏–∑ –≤—Ö–æ–¥–æ–≤ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —É—Å–∏–ª–∏—Ç–µ–ª—è –ø–æ–¥–∞–µ—Ç—Å—è –∏–∑–≤–µ—Å—Ç–Ω–æ–µ –æ–ø–æ—Ä–Ω–æ–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ, –Ω–∞ –¥—Ä—É–≥–æ–π - —Å—Ä–∞–≤–Ω–∏–≤–∞–µ–º—ã–π –∞–Ω–∞–ª–æ–≥–æ–≤—ã–π —Å–∏–≥–Ω–∞–ª, –Ω–∞–ø—Ä–∏–º–µ—Ä —Å–∏–≥–Ω–∞–ª ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/10/28/vvedenie-v-simuliatsiiu-elektricheskikh-skhem-s-pomoshchiu-ngspicejs/"&gt;–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º&lt;/a&gt; –æ—Å–≤–∞–∏–≤–∞—Ç—å NGSPICE –≤–æ–æ–±—â–µ –∏ &lt;a href="http://proiot.ru/blog/posts/2016/11/18/ngspicejs-idealnyi-operatsionnyi-usilitel/"&gt;–û–£&lt;/a&gt; –≤ —á–∞—Å—Ç–Ω–æ—Å—Ç–∏.&lt;/p&gt;
&lt;p&gt;–ö–æ–º–ø–∞—Ä–∞—Ç–æ—Ä —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç –¥–≤–∞ &lt;em&gt;–∞–Ω–∞–ª–æ–≥–æ–≤—ã—Ö&lt;/em&gt; —Å–∏–≥–Ω–∞–ª–∞ –∏ –≤—ã–¥–∞—ë—Ç –¥–≤–æ–∏—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –≤–∏–¥–µ 0 –∏–ª–∏ 1 –Ω–∞ –≤—ã—Ö–æ–¥–µ. –ü—Ä–æ—Å—Ç–µ–π—à—É—é —Å—Ö–µ–º—É –∫–æ–º–ø–∞—Ä–∞—Ç–æ—Ä–∞ –Ω–∞ &lt;a href="http://proiot.ru/blog/posts/2016/11/18/ngspicejs-idealnyi-operatsionnyi-usilitel/"&gt;–û–£&lt;/a&gt; –º—ã —É–∂–µ –ø–æ—Å—Ç—Ä–æ–∏–ª–∏ —Ä–∞–Ω–µ–µ - –Ω–∞ –æ–¥–∏–Ω –∏–∑ –≤—Ö–æ–¥–æ–≤ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —É—Å–∏–ª–∏—Ç–µ–ª—è –ø–æ–¥–∞–µ—Ç—Å—è –∏–∑–≤–µ—Å—Ç–Ω–æ–µ –æ–ø–æ—Ä–Ω–æ–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ, –Ω–∞ –¥—Ä—É–≥–æ–π - —Å—Ä–∞–≤–Ω–∏–≤–∞–µ–º—ã–π –∞–Ω–∞–ª–æ–≥–æ–≤—ã–π —Å–∏–≥–Ω–∞–ª, –Ω–∞–ø—Ä–∏–º–µ—Ä —Å–∏–≥–Ω–∞–ª —Å –¥–∞—Ç—á–∏–∫–∞. –¢–∞–∫ –∫–∞–∫ –≤ —Å—Ö–µ–º–µ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å, —Ç–æ –∏–¥–µ–∞–ª—å–Ω—ã–π –û–£ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ç–æ–ª—å–∫–æ –≤ —Ä–µ–∂–∏–º–µ –Ω–∞—Å—ã—â–µ–Ω–∏—è –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ –ª–∏–±–æ —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º –ª–∏–±–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–º —É—Ä–æ–≤–Ω–µ–º –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –ø–∏—Ç–∞–Ω–∏—è –Ω–∞ –≤—ã—Ö–æ–¥–µ. –í –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–æ–≥–æ –Ω–∞ –∫–∞–∫–æ–π –∏–∑ –¥–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –≤—Ö–æ–¥–æ–≤ –ø–æ–¥–∞—ë—Ç—Å—è –æ–ø–æ—Ä–Ω–æ–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –∫–æ–º–ø–∞—Ä–∞—Ç–æ—Ä –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ –∏–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—â–∏–º –∏ –Ω–µ–∏–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—â–∏–º.&lt;/p&gt;
&lt;!-- 
&lt;a href="http://proiot.ru/blog/posts/2016/11/24/ngspicejs-komparator-i-trigger-shmitta-na-ou/LT1007CS.txt"&gt;&lt;/a&gt;
--&gt;

&lt;p&gt;–í —Å–ª–µ–¥—É—é—â–∏—Ö —Å—Ö–µ–º–∞—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞—Å—å SPICE –º–æ–¥–µ–ª—å –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —É—Å–∏–ª–∏—Ç–µ–ª—è LT1007:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ wget http://cds.linear.com/docs/en/software-and-simulation/LT1007CS.txt
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/11/24/ngspicejs-komparator-i-trigger-shmitta-na-ou/comparator-single.sch"&gt;–Ω–µ–∏–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—â–∏–π –∫–æ–º–ø–∞—Ä–∞—Ç–æ—Ä —Å –æ–¥–Ω–æ–ø–æ–ª—è—Ä–Ω—ã–º –ø–∏—Ç–∞–Ω–∏–µ–º&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2016/11/24/ngspicejs-komparator-i-trigger-shmitta-na-ou/comparator-single.net"&gt;netlist&lt;/a&gt; | &lt;a href="https://ngspice.js.org/?gist=d120122d336d4f1856b1582c12a9a205"&gt;ngspice.js&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/11/24/ngspicejs-komparator-i-trigger-shmitta-na-ou/show-img-comparator-single.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ngspice 1 -&amp;gt; source comparator-single.net
ngspice 2 -&amp;gt; tran 10u 4m
ngspice 3 -&amp;gt; plot v(out) v(in)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–û–ø–æ—Ä–Ω–æ–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –∑–∞–¥–∞–Ω–æ –¥–µ–ª–∏—Ç–µ–ª–µ–º Rf1/Rf2 –∏ –æ—á–µ–≤–∏–¥–Ω–æ —Ä–∞–≤–Ω–æ 5–í. –ü—Ä–∏ —ç—Ç–æ–º –Ω–∞ –≤—Ö–æ–¥ –ø–æ—Å—Ç—É–ø–∞–µ—Ç —Å–∏–≥–Ω–∞–ª —Å–ª–æ–∂–Ω–æ–π —Ñ–æ—Ä–º—ã. –ö–æ–º–ø–∞—Ä–∞—Ç–æ—Ä –æ—Ç—Ä–∞–±–æ—Ç–∞–ª –ª–æ–≥–∏—á–µ—Å–∫–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å—Ä–∞–±–æ—Ç–∞–≤ —á–µ—Ç—ã—Ä–µ–∂–¥—ã —Ç.–∫. –≤—Ö–æ–¥–Ω–æ–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ —á–µ—Ç—ã—Ä–µ–∂–¥—ã –ø–µ—Ä–µ–≤–∞–ª–∏–ª–æ –æ—Ç–º–µ—Ç–∫—É 5–í, –æ–¥–Ω–∞–∫–æ –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ –∑–∞—á–∞—Å—Ç—É—é —Ç—Ä–µ–±—É–µ—Ç—Å—è –∏–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –µ—Å–ª–∏ –ø—Ä–µ–¥–ø–æ–ª–æ–∂–∏—Ç—å —á—Ç–æ –ø—Ä–æ–≤–∞–ª –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –ø–æ—Å—Ä–µ–¥–∏–Ω–µ —ç—Ç–æ –±—ã–ª–∞ –ø–æ–º–µ—Ö–∞. –î–ª—è –±–æ—Ä—å–±—ã —Å —ç—Ç–∏–º –Ω–µ–ø—Ä–∏—è—Ç–Ω—ã–º —è–≤–ª–µ–Ω–∏–µ–º –≤ –∫–æ–º–ø–∞—Ä–∞—Ç–æ—Ä —Å –ø–æ–º–æ—â—å—é –ü–û–° –¥–æ–±–∞–≤–ª—è—é—Ç &lt;em&gt;–≥–∏—Å—Ç–µ—Ä–µ–∑–∏—Å&lt;/em&gt; –∏ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–∞–∫–æ–µ —Ä–µ—à–µ–Ω–∏–µ &lt;a href="http://www.pcbheaven.com/wikipages/The_Schmitt_Trigger/" rel="nofollow"&gt;—Ç—Ä–∏–≥–≥–µ—Ä–æ–º –®–º–∏—Ç—Ç–∞&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/11/24/ngspicejs-komparator-i-trigger-shmitta-na-ou/comparator-single-canvas.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–ö–∞–∫ –≤–∏–¥–Ω–æ –Ω–∞ —Å–ª–µ–¥—É—é—â–µ–π —Å—Ö–µ–º–µ, —Ç—Ä–∏–≥–≥–µ—Ä –®–º–∏—Ç—Ç–∞ –æ—á–µ–Ω—å –ø–æ—Ö–æ–∂ –Ω–∞ –æ–±—ã—á–Ω—ã–π –∫–æ–º–ø–∞—Ä–∞—Ç–æ—Ä –∑–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–π –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏ —á–µ—Ä–µ–∑ —Ä–µ–∑–∏—Å—Ç–æ—Ä &lt;strong&gt;Rf&lt;/strong&gt;. –ì–∏—Å—Ç–µ—Ä–µ–∑–∏—Å –¥–æ–±–∞–≤–ª—è–µ—Ç –∑–∞–¥–µ—Ä–∂–∫—É –≤—ã–∫–ª—é—á–µ–Ω–∏—è –∫–æ–º–ø–∞—Ä–∞—Ç–æ—Ä–∞ –∏ —Ç–µ–º —Å–∞–º—ã–º –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç—Å—è –±–æ–ª–µ–µ –≤—ã—Å–æ–∫–∞—è –ø–æ–º–µ—Ö–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å —Å—Ö–µ–º—ã. &lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/11/24/ngspicejs-komparator-i-trigger-shmitta-na-ou/shmitt-trigger-single.sch"&gt;–∏–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—â–∏–π —Ç—Ä–∏–≥–≥–µ—Ä –®–º–∏—Ç—Ç–∞ —Å –æ–¥–Ω–æ–ø–æ–ª—è—Ä–Ω—ã–º –ø–∏—Ç–∞–Ω–∏–µ–º&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2016/11/24/ngspicejs-komparator-i-trigger-shmitta-na-ou/shmitt-trigger-single.net"&gt;netlist&lt;/a&gt; | &lt;a href="https://ngspice.js.org/?gist=22dbe97a1a4b121e6678a1b27ceffc12"&gt;ngspice.js&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/11/24/ngspicejs-komparator-i-trigger-shmitta-na-ou/show-img-shmitt-trigger-single.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ngspice 1 -&amp;gt; source shmitt-trigger-single.net
ngspice 2 -&amp;gt; tran 10u 4m
ngspice 3 -&amp;gt; plot v(out) v(in)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ü—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω—ã–π &lt;a href="https://bc.js.org/"&gt;—Ä–∞—Å—á—ë—Ç&lt;/a&gt; –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–π —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è —Å –≥–∏—Å—Ç–µ—Ä–µ–∑–∏—Å–æ–º:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;–≤–µ—Ä—Ö–Ω–∏–π –ø–æ—Ä–æ–≥ &lt;code&gt;V1*Rf2/(Rf2+Rx) = 15*15000/(15000+29876) ‚âà 5 –í&lt;/code&gt;, –≥–¥–µ &lt;code&gt;Rx = (Rf1*Rf)/(Rf1+Rf) = 47000*82000/(47000+82000) ‚âà 29876 –û–º&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;–Ω–∏–∂–Ω–∏–π –ø–æ—Ä–æ–≥ &lt;code&gt;V1*Rx/(Rf1+Rx) = 15*12680/(47000+12680) ‚âà 3.2 –í&lt;/code&gt;, –≥–¥–µ &lt;code&gt;Rx = (Rf2*Rf)/(Rf2+Rf) = 15000*82000/(15000+82000) ‚âà 12680 –û–º&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;–ù—É –∞ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫–µ –≤–µ—Ä—Ö–Ω–∏–π –ø–æ—Ä–æ–≥ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏—è –ø–æ–ª—É—á–∏–ª—Å—è —á—É—Ç—å –º–µ–Ω—å—à–µ 5 –í–æ–ª—å—Ç, —Ç–æ–≥–¥–∞ –∫–∞–∫ –Ω–∏–∂–Ω–∏–π —á—É—Ç—å –±–æ–ª—å—à–µ 3 –í–æ–ª—å—Ç.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/11/24/ngspicejs-komparator-i-trigger-shmitta-na-ou/shmitt-trigger-single-canvas.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/11/28/ngspicejs-dvukhtaktnye-usiliteli-moshchnosti/"&gt;–î–∞–ª–µ–µ&lt;/a&gt; –Ω–µ–º–Ω–æ–≥–æ –æ –≤—ã—Ö–æ–¥–Ω—ã—Ö –∫–∞—Å–∫–∞–¥–∞—Ö —É—Å–∏–ª–∏—Ç–µ–ª–µ–π.&lt;/p&gt;</content><category term="gEDA"></category><category term="ngspice"></category><category term="–û–£"></category></entry><entry><title>NGSPICE.js - —Å—É–º–º–∞—Ç–æ—Ä—ã –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–π –Ω–∞ –û–£</title><link href="http://proiot.ru/blog/posts/2016/11/23/ngspicejs-summatory-napriazhenii-na-ou/" rel="alternate"></link><published>2016-11-23T00:00:00+02:00</published><updated>2016-11-23T00:00:00+02:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2016-11-23:/blog/posts/2016/11/23/ngspicejs-summatory-napriazhenii-na-ou/</id><summary type="html">&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/10/28/vvedenie-v-simuliatsiiu-elektricheskikh-skhem-s-pomoshchiu-ngspicejs/"&gt;–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º&lt;/a&gt; –æ—Å–≤–∞–∏–≤–∞—Ç—å NGSPICE –≤–æ–æ–±—â–µ –∏ &lt;a href="http://proiot.ru/blog/posts/2016/11/18/ngspicejs-idealnyi-operatsionnyi-usilitel/"&gt;–û–£&lt;/a&gt; –≤ —á–∞—Å—Ç–Ω–æ—Å—Ç–∏.&lt;/p&gt;
&lt;p&gt;–ù–∞–ª–∏—á–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –∑–µ–º–ª–∏ –≤ &lt;a href="http://proiot.ru/blog/posts/2016/11/22/ngspicejs-invertiruiushchii-usilitel-na-ou/"&gt;–∏–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—â–µ–º&lt;/a&gt; —É—Å–∏–ª–∏—Ç–µ–ª–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ—Å—Ç–æ –∏ —ç–ª–µ–≥–∞–Ω—Ç–Ω–æ —Ä–µ—à–∏—Ç—å –∑–∞–¥–∞—á—É —Å–ª–æ–∂–µ–Ω–∏—è –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–π –≤—Ö–æ–¥–Ω—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤ –æ—Ç —Ä–∞–∑–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —á—Ç–æ–±—ã –æ–Ω–∏ –Ω–µ –æ–∫–∞–∑—ã–≤–∞–ª–∏ –≤–∑–∞–∏–º–Ω–æ–≥–æ –≤–ª–∏—è–Ω–∏—è –¥—Ä—É–≥ –Ω–∞ –¥—Ä—É–≥–∞. –ü—Ä–∏ —ç—Ç–æ–º –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–∑ –≤—Ö–æ–¥–Ω—ã—Ö –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–π –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Å–≤–æ–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –∏–ª–∏ ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/10/28/vvedenie-v-simuliatsiiu-elektricheskikh-skhem-s-pomoshchiu-ngspicejs/"&gt;–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º&lt;/a&gt; –æ—Å–≤–∞–∏–≤–∞—Ç—å NGSPICE –≤–æ–æ–±—â–µ –∏ &lt;a href="http://proiot.ru/blog/posts/2016/11/18/ngspicejs-idealnyi-operatsionnyi-usilitel/"&gt;–û–£&lt;/a&gt; –≤ —á–∞—Å—Ç–Ω–æ—Å—Ç–∏.&lt;/p&gt;
&lt;p&gt;–ù–∞–ª–∏—á–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –∑–µ–º–ª–∏ –≤ &lt;a href="http://proiot.ru/blog/posts/2016/11/22/ngspicejs-invertiruiushchii-usilitel-na-ou/"&gt;–∏–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—â–µ–º&lt;/a&gt; —É—Å–∏–ª–∏—Ç–µ–ª–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–æ—Å—Ç–æ –∏ —ç–ª–µ–≥–∞–Ω—Ç–Ω–æ —Ä–µ—à–∏—Ç—å –∑–∞–¥–∞—á—É —Å–ª–æ–∂–µ–Ω–∏—è –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–π –≤—Ö–æ–¥–Ω—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤ –æ—Ç —Ä–∞–∑–Ω—ã—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —á—Ç–æ–±—ã –æ–Ω–∏ –Ω–µ –æ–∫–∞–∑—ã–≤–∞–ª–∏ –≤–∑–∞–∏–º–Ω–æ–≥–æ –≤–ª–∏—è–Ω–∏—è –¥—Ä—É–≥ –Ω–∞ –¥—Ä—É–≥–∞. –ü—Ä–∏ —ç—Ç–æ–º –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–∑ –≤—Ö–æ–¥–Ω—ã—Ö –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–π –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Å–≤–æ–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –∏–ª–∏ –∫–∞–∫ –µ—â—ë –≥–æ–≤–æ—Ä—è—Ç –≤–µ—Å. –î–∞–Ω–Ω–∞—è —Å—Ö–µ–º–∞ –≤–∫–ª—é—á–µ–Ω–∏—è –ø–æ–ª—É—á–∏–ª–∞ –Ω–∞–∑–≤–∞–Ω–∏–µ &lt;em&gt;–∏–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—â–∏–π —Å—É–º–º–∞—Ç–æ—Ä&lt;/em&gt; –∏ –¥–ª—è –∏–¥–µ–∞–ª—å–Ω–æ–≥–æ –û–£ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –Ω–∞ –≤—ã—Ö–æ–¥–µ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ø–æ –ø—Ä–æ—Å—Ç–æ–π —Ñ–æ—Ä–º—É–ª–µ &lt;code&gt;Vout = -Rf*((Vin1/Rf1)+(Vin2/Rf2)+...)&lt;/code&gt; –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å—É–º–º–∏—Ä—É–µ–º—ã—Ö –≤—Ö–æ–¥–æ–≤.&lt;/p&gt;
&lt;!-- 
&lt;a href="http://proiot.ru/blog/posts/2016/11/23/ngspicejs-summatory-napriazhenii-na-ou/LT1007CS.txt"&gt;&lt;/a&gt;
--&gt;

&lt;p&gt;–í —Å–ª–µ–¥—É—é—â–∏—Ö —Å—Ö–µ–º–∞—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞—Å—å SPICE –º–æ–¥–µ–ª—å –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —É—Å–∏–ª–∏—Ç–µ–ª—è LT1007:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ wget http://cds.linear.com/docs/en/software-and-simulation/LT1007CS.txt
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/11/23/ngspicejs-summatory-napriazhenii-na-ou/inverting-summator.sch"&gt;—Å—Ö–µ–º–∞ –∏–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—â–µ–≥–æ —Å—É–º–º–∞—Ç–æ—Ä–∞ + —Ç–µ—Å—Ç–æ–≤—ã–π —Å—É–º–º–∞—Ç–æ—Ä –±–µ–∑ –û–£&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2016/11/23/ngspicejs-summatory-napriazhenii-na-ou/inverting-summator.net"&gt;netlist&lt;/a&gt; | &lt;a href="https://ngspice.js.org/?gist=a4ad89b810370046865df1eb4beca38c"&gt;ngspice.js&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/11/23/ngspicejs-summatory-napriazhenii-na-ou/show-img-inverting-summator.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ngspice 1 -&amp;gt; source inverting-summator.net
ngspice 2 -&amp;gt; dc vin1 -10 4 0.1
ngspice 3 -&amp;gt; plot v(out) (-v(test))
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ü—Ä–∏ &lt;code&gt;Vin1=-10&lt;/code&gt; –∞–ª–≥–µ–±—Ä–∞–∏—á–µ—Å–∫–∞—è —Å—É–º–º–∞ –≤—Ö–æ–¥–Ω—ã—Ö –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–π &lt;code&gt;-10+3-5=-12&lt;/code&gt; –∏–ª–∏ &lt;code&gt;12&lt;/code&gt; —Å –∏–Ω–≤–µ—Ä—Å–∏–µ–π –∏ —Ç.–¥. –ö–∞–∫ –≤–∏–¥–Ω–æ –Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫–µ –µ—Å–ª–∏ –±—ã –º—ã –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ –û–£ –∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ –æ–±—ã—á–Ω—ã–µ —Ä–µ–∑–∏—Å—Ç–æ—Ä—ã Rx —Ç–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ç—Ä—É–¥–Ω–æ –Ω–∞–∑–≤–∞—Ç—å —Å—É–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ–º –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–π.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/11/23/ngspicejs-summatory-napriazhenii-na-ou/inverting-summator-canvas.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–¢–∞–∫ –∫–∞–∫ –≤ –æ—Å–Ω–æ–≤–µ –∏–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—â–µ–≥–æ —Å—É–º–º–∞—Ç–æ—Ä–∞ –ª–µ–∂–∏—Ç –∏–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—â–µ–≥–æ —É—Å–∏–ª–∏—Ç–µ–ª—å —Ç–æ –¥–ª—è –æ–¥–Ω–æ–ø–æ–ª—è—Ä–Ω–æ–≥–æ –ø–∏—Ç–∞–Ω–∏—è –≤ –ø—Ä–∏–Ω—Ü–∏–ø–µ –≤—Å—ë —Ç–∞–∫ –∂–µ. –ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π —Å–ª—É—á–∞–π –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è —Å–ª–µ–¥—É—é—â–µ–π —Å—Ö–µ–º—ã - –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –º–∏–∫—à–µ—Ä –∞—É–¥–∏–æ —Å–∏–≥–Ω–∞–ª–æ–≤ –æ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/11/23/ngspicejs-summatory-napriazhenii-na-ou/inverting-summator-single.sch"&gt;–∏–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—â–∏–π —Å—É–º–º–∞—Ç–æ—Ä —Å –æ–¥–Ω–æ–ø–æ–ª—è—Ä–Ω—ã–º –ø–∏—Ç–∞–Ω–∏–µ–º&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2016/11/23/ngspicejs-summatory-napriazhenii-na-ou/inverting-summator-single.net"&gt;netlist&lt;/a&gt; | &lt;a href="https://ngspice.js.org/?gist=240fbcd9cd54346102e19984c5d24eba"&gt;ngspice.js&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/11/23/ngspicejs-summatory-napriazhenii-na-ou/show-img-inverting-summator-single.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ngspice 1 -&amp;gt; source inverting-summator-single.net
ngspice 2 -&amp;gt; tran 1u 0.5m
ngspice 3 -&amp;gt; plot v(out) v(in1) v(in2) v(vgnd)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —É—Å–∏–ª–µ–Ω–∏—è –ø–æ–¥–æ–±—Ä–∞–Ω –µ–¥–∏–Ω–∏—Ü–µ –¥–ª—è –∫—Ä–∞—Å–æ—Ç—ã –∫–∞—Ä—Ç–∏–Ω–∫–∏ - –ø—Ä–∏ –∂–µ–ª–∞–Ω–∏–∏ –µ–≥–æ –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/11/23/ngspicejs-summatory-napriazhenii-na-ou/inverting-summator-single-canvas.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/11/24/ngspicejs-komparator-i-trigger-shmitta-na-ou/"&gt;–î–∞–ª–µ–µ&lt;/a&gt; —Ç—Ä–∏–≥–≥–µ—Ä –®–º–∏–¥—Ç–∞ –Ω–∞ –û–£.&lt;/p&gt;</content><category term="gEDA"></category><category term="ngspice"></category><category term="–û–£"></category></entry><entry><title>NGSPICE.js - –∏–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—â–∏–π —É—Å–∏–ª–∏—Ç–µ–ª—å –Ω–∞ –û–£</title><link href="http://proiot.ru/blog/posts/2016/11/22/ngspicejs-invertiruiushchii-usilitel-na-ou/" rel="alternate"></link><published>2016-11-22T00:00:00+02:00</published><updated>2016-11-22T00:00:00+02:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2016-11-22:/blog/posts/2016/11/22/ngspicejs-invertiruiushchii-usilitel-na-ou/</id><summary type="html">&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/10/28/vvedenie-v-simuliatsiiu-elektricheskikh-skhem-s-pomoshchiu-ngspicejs/"&gt;–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º&lt;/a&gt; –æ—Å–≤–∞–∏–≤–∞—Ç—å NGSPICE –≤–æ–æ–±—â–µ –∏ &lt;a href="http://proiot.ru/blog/posts/2016/11/18/ngspicejs-idealnyi-operatsionnyi-usilitel/"&gt;–û–£&lt;/a&gt; –≤ —á–∞—Å—Ç–Ω–æ—Å—Ç–∏.&lt;/p&gt;
&lt;p&gt;–í –∏–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—â–µ–º —É—Å–∏–ª–∏—Ç–µ–ª–µ –≤—Ö–æ–¥–Ω–æ–π —Å–∏–≥–Ω–∞–ª –ø–æ–¥–∞—ë—Ç—Å—è –Ω–∞ –∏–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—â–∏–π –≤—Ö–æ–¥ –û–£, —Ç—É–¥–∞ –∂–µ –∑–∞–≤–µ–¥–µ–Ω–∞ –û–û–°, –ø—Ä–∏ —ç—Ç–æ–º –Ω–µ–∏–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—â–∏–π –≤—Ö–æ–¥ –∑–∞–∑–µ–º–ª—ë–Ω. –û—Ç–ª–∏—á–∏—Ç–µ–ª—å–Ω—ã–º–∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—è–º–∏ –¥–∞–Ω–Ω–æ–π —Å—Ö–µ–º—ã –¥–ª—è –∏–¥–µ–∞–ª—å–Ω–æ–≥–æ –û–£ —è–≤–ª—è—é—Ç—Å—è:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/11/04/ngspicejs-soglasovanie-istochnika-s-nagruzkoi/"&gt;–≤—Ö–æ–¥–Ω–æ–µ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ&lt;/a&gt; —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω–æ –≤–µ–ª–∏—á–∏–Ω–µ —Ä–µ–∑–∏—Å—Ç–æ—Ä–∞ Rg&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;—Ñ–∞–∑–∞ —Å–∏–≥–Ω–∞–ª–∞ –Ω–∞ –≤—ã—Ö–æ–¥–µ —Å–¥–≤–∏–Ω—É—Ç–∞ –Ω–∞ 180¬∞ –ø–æ –æ—Ç–Ω–æ—à–µ–Ω–∏—é ‚Ä¶&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;</summary><content type="html">&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/10/28/vvedenie-v-simuliatsiiu-elektricheskikh-skhem-s-pomoshchiu-ngspicejs/"&gt;–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º&lt;/a&gt; –æ—Å–≤–∞–∏–≤–∞—Ç—å NGSPICE –≤–æ–æ–±—â–µ –∏ &lt;a href="http://proiot.ru/blog/posts/2016/11/18/ngspicejs-idealnyi-operatsionnyi-usilitel/"&gt;–û–£&lt;/a&gt; –≤ —á–∞—Å—Ç–Ω–æ—Å—Ç–∏.&lt;/p&gt;
&lt;p&gt;–í –∏–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—â–µ–º —É—Å–∏–ª–∏—Ç–µ–ª–µ –≤—Ö–æ–¥–Ω–æ–π —Å–∏–≥–Ω–∞–ª –ø–æ–¥–∞—ë—Ç—Å—è –Ω–∞ –∏–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—â–∏–π –≤—Ö–æ–¥ –û–£, —Ç—É–¥–∞ –∂–µ –∑–∞–≤–µ–¥–µ–Ω–∞ –û–û–°, –ø—Ä–∏ —ç—Ç–æ–º –Ω–µ–∏–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—â–∏–π –≤—Ö–æ–¥ –∑–∞–∑–µ–º–ª—ë–Ω. –û—Ç–ª–∏—á–∏—Ç–µ–ª—å–Ω—ã–º–∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—è–º–∏ –¥–∞–Ω–Ω–æ–π —Å—Ö–µ–º—ã –¥–ª—è –∏–¥–µ–∞–ª—å–Ω–æ–≥–æ –û–£ —è–≤–ª—è—é—Ç—Å—è:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/11/04/ngspicejs-soglasovanie-istochnika-s-nagruzkoi/"&gt;–≤—Ö–æ–¥–Ω–æ–µ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ&lt;/a&gt; —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω–æ –≤–µ–ª–∏—á–∏–Ω–µ —Ä–µ–∑–∏—Å—Ç–æ—Ä–∞ Rg&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;—Ñ–∞–∑–∞ —Å–∏–≥–Ω–∞–ª–∞ –Ω–∞ –≤—ã—Ö–æ–¥–µ —Å–¥–≤–∏–Ω—É—Ç–∞ –Ω–∞ 180¬∞ –ø–æ –æ—Ç–Ω–æ—à–µ–Ω–∏—é –∫ –≤—Ö–æ–¥–Ω–æ–º—É&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;–∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —É—Å–∏–ª–µ–Ω–∏—è –ø–æ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—é &lt;code&gt;-Rf/Rg&lt;/code&gt;, —Ç.–µ. –º–æ–∂–µ—Ç –±—ã—Ç—å &amp;lt; 1 –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ –¥–∏–∞–ø–∞–∑–æ–Ω —à–∏—Ä–µ —á–µ–º —É &lt;a href="http://proiot.ru/blog/posts/2016/11/21/ngspicejs-neinvertiruiushchii-usilitel-na-ou/"&gt;–Ω–µ–∏–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—â–µ–≥–æ&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;–í –ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏–∏, —á—Ç–æ —Ä–∞–∑–Ω–æ—Å—Ç—å –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–π –º–µ–∂–¥—É –≤—Ö–æ–¥–∞–º–∏ –û–£ —Ä–∞–≤–Ω–∞ –Ω—É–ª—é, —Ü–µ–ø—å –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏ –¥–æ–ª–∂–Ω–∞ —Ä–∞–±–æ—Ç–∞—Ç—å —Ç–∞–∫, —á—Ç–æ–±—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª –∏–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—â–µ–≥–æ –≤—Ö–æ–¥–∞ —Ç–∞–∫–∂–µ —Ä–∞–≤–Ω—ã–º –Ω—É–ª—é. –≠—Ç–æ—Ç –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª –∏–Ω–æ–≥–¥–∞ –Ω–∞–∑—ã–≤–∞—é—Ç &lt;strong&gt;–≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –∑–µ–º–ª—ë–π&lt;/strong&gt; &lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- 
&lt;a href="http://proiot.ru/blog/posts/2016/11/22/ngspicejs-invertiruiushchii-usilitel-na-ou/LT1007CS.txt"&gt;&lt;/a&gt;
--&gt;

&lt;p&gt;–í —Å–ª–µ–¥—É—é—â–∏—Ö —Å—Ö–µ–º–∞—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞—Å—å SPICE –º–æ–¥–µ–ª—å –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —É—Å–∏–ª–∏—Ç–µ–ª—è LT1007:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ wget http://cds.linear.com/docs/en/software-and-simulation/LT1007CS.txt
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/11/22/ngspicejs-invertiruiushchii-usilitel-na-ou/inverting.sch"&gt;—Å—Ö–µ–º–∞ –∏–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—â–µ–≥–æ —É—Å–∏–ª–∏—Ç–µ–ª—è&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2016/11/22/ngspicejs-invertiruiushchii-usilitel-na-ou/inverting.net"&gt;netlist&lt;/a&gt; | &lt;a href="https://ngspice.js.org/?gist=2b635c0b8bae28e0ab4152cde6eb475d"&gt;ngspice.js&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/11/22/ngspicejs-invertiruiushchii-usilitel-na-ou/show-img-inverting.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ngspice 1 -&amp;gt; source inverting.net
ngspice 2 -&amp;gt; dc vin -10m 10m 20u
ngspice 3 -&amp;gt; plot v(out) ylimit -10 10
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —É—Å–∏–ª–µ–Ω–∏—è —Å—Ö–µ–º—ã &lt;code&gt;365000/365 = 1000&lt;/code&gt;, —Ç.–µ. –ø—Ä–∏ 10 –º–í –Ω–∞ –≤—Ö–æ–¥–µ –Ω–∞ –≤—ã—Ö–æ–¥–µ –±—É–¥–µ—Ç 10 –í.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/11/22/ngspicejs-invertiruiushchii-usilitel-na-ou/inverting-canvas.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–ü—Ä–∏ –æ–¥–Ω–æ–ø–æ–ª—è—Ä–Ω–æ–º –ø–∏—Ç–∞–Ω–∏–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ–¥–∞—Ç—å —Å—Ç–∞–±–∏–ª—å–Ω–æ–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ —Å–º–µ—â–µ–Ω–∏—è - –≤ –ø—Ä–æ—Å—Ç–µ–π—à–µ–º —Å–ª—É—á–∞–µ —ç—Ç–æ –∫–æ–Ω–¥–µ–Ω—Å–∞—Ç–æ—Ä C2, –Ω–∞–ª–∏—á–∏–µ –∫–æ—Ç–æ—Ä–æ–≥–æ –ø–æ–≤—ã—à–∞–µ—Ç —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã –æ—Ç —Å–∞–º–æ–≤–æ–∑–±—É–∂–¥–µ–Ω–∏—è –ø—Ä–∏ –ø—Ä–æ—Å–∞–¥–∫–∞—Ö –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –≤ –Ω–µ–∏–¥–µ–∞–ª—å–Ω–æ–º –∏—Å—Ç–æ—á–Ω–∏–∫–µ –ø–∏—Ç–∞–Ω–∏—è.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/11/22/ngspicejs-invertiruiushchii-usilitel-na-ou/inverting-single.sch"&gt;–∏–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—â–∏–π —É—Å–∏–ª–∏—Ç–µ–ª—å —Å –æ–¥–Ω–æ–ø–æ–ª—è—Ä–Ω—ã–º –ø–∏—Ç–∞–Ω–∏–µ–º&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2016/11/22/ngspicejs-invertiruiushchii-usilitel-na-ou/inverting-single.net"&gt;netlist&lt;/a&gt; | &lt;a href="https://ngspice.js.org/?gist=fb963c63f640a5012853ae869a6ee912"&gt;ngspice.js&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/11/22/ngspicejs-invertiruiushchii-usilitel-na-ou/show-img-inverting-single.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ngspice 1 -&amp;gt; source inverting-single.net
ngspice 2 -&amp;gt; tran 1u 0.5m
ngspice 3 -&amp;gt; plot v(out) v(in) v(vgnd)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —É—Å–∏–ª–µ–Ω–∏—è &lt;code&gt;100k/50k = 2&lt;/code&gt;, –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ —Å–º–µ—â–µ–Ω–∏–µ –∫–∞–∫ –æ–±—ã—á–Ω–æ –ø–æ–ª–æ–≤–∏–Ω–∞ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –ø–∏—Ç–∞–Ω–∏—è. –í –∞–∫—Ç–∏–≤–Ω–æ–º —Ä–µ–∂–∏–º–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –≤ —Ç–æ—á–∫–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –∑–µ–º–ª–∏ —Ä–∞–≤–Ω–æ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—é —Å–º–µ—â–µ–Ω–∏—è –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —É—Ä–æ–≤–Ω—è –≤—Ö–æ–¥–Ω–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞. –§–∞–∑—ã –≤—Ö–æ–¥–Ω–æ–≥–æ –∏ –≤—ã—Ö–æ–¥–Ω–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞ —Å–¥–≤–∏–Ω—É—Ç—ã –Ω–∞ 180¬∞.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/11/22/ngspicejs-invertiruiushchii-usilitel-na-ou/inverting-single-canvas.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –Ω–µ–ª–∏–Ω–µ–π–Ω—ã—Ö –∏—Å–∫–∞–∂–µ–Ω–∏–π –¥–ª—è –û–£ —É—Å–∏–ª–∏—Ç–µ–ª–µ–π –æ—á–µ–Ω—å &lt;a href="https://ngspice.js.org/?gist=ba2f8531a36037d47487ce7074520f84"&gt;–Ω–∏–∑–∫–∏–π&lt;/a&gt; THD: 5.6773e-05 %, —á—Ç–æ —è–≤–ª—è–µ—Ç—Å—è —Å–ª–µ–¥—Å—Ç–≤–∏–µ–º —Å–∏–ª—å–Ω–æ–π –û–û–°.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ngspice 4 -&amp;gt; fourier 10k v(out)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/11/23/ngspicejs-summatory-napriazhenii-na-ou/"&gt;–î–∞–ª–µ–µ&lt;/a&gt; —Å—É–º–º–∞—Ç–æ—Ä—ã –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–π –Ω–∞ –û–£.&lt;/p&gt;</content><category term="gEDA"></category><category term="ngspice"></category><category term="–û–£"></category></entry><entry><title>NGSPICE.js - –Ω–µ–∏–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—â–∏–π —É—Å–∏–ª–∏—Ç–µ–ª—å –Ω–∞ –û–£</title><link href="http://proiot.ru/blog/posts/2016/11/21/ngspicejs-neinvertiruiushchii-usilitel-na-ou/" rel="alternate"></link><published>2016-11-21T00:00:00+02:00</published><updated>2016-11-21T00:00:00+02:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2016-11-21:/blog/posts/2016/11/21/ngspicejs-neinvertiruiushchii-usilitel-na-ou/</id><summary type="html">&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/10/28/vvedenie-v-simuliatsiiu-elektricheskikh-skhem-s-pomoshchiu-ngspicejs/"&gt;–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º&lt;/a&gt; –æ—Å–≤–∞–∏–≤–∞—Ç—å NGSPICE –≤–æ–æ–±—â–µ –∏ &lt;a href="http://proiot.ru/blog/posts/2016/11/18/ngspicejs-idealnyi-operatsionnyi-usilitel/"&gt;–û–£&lt;/a&gt; –≤ —á–∞—Å—Ç–Ω–æ—Å—Ç–∏.&lt;/p&gt;
&lt;p&gt;–í –Ω–µ–∏–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—â–µ–º —É—Å–∏–ª–∏—Ç–µ–ª–µ –≤—Ö–æ–¥–Ω–æ–π —Å–∏–≥–Ω–∞–ª –ø–æ–¥–∞—ë—Ç—Å—è –Ω–∞ –Ω–µ–∏–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—â–∏–π –≤—Ö–æ–¥ –û–£, –∞ –û–û–° –∑–∞–≤–µ–¥–µ–Ω–∞ —Å –≤—ã—Ö–æ–¥–∞ –Ω–∞ –∏–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—â–∏–π –≤—Ö–æ–¥. –û—Ç–ª–∏—á–∏—Ç–µ–ª—å–Ω—ã–º–∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—è–º–∏ –¥–∞–Ω–Ω–æ–π —Å—Ö–µ–º—ã –¥–ª—è –∏–¥–µ–∞–ª—å–Ω–æ–≥–æ –û–£ —è–≤–ª—è—é—Ç—Å—è:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;–±–µ—Å–∫–æ–Ω–µ—á–Ω–æ –±–æ–ª—å—à–æ–µ &lt;a href="http://proiot.ru/blog/posts/2016/11/04/ngspicejs-soglasovanie-istochnika-s-nagruzkoi/"&gt;–≤—Ö–æ–¥–Ω–æ–µ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;—Ñ–∞–∑–∞ —Å–∏–≥–Ω–∞–ª–∞ –Ω–∞ –≤—Ö–æ–¥–µ –∏ –Ω–∞ –≤—ã—Ö–æ–¥–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;–∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —É—Å–∏–ª–µ–Ω–∏—è –ø–æ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—é ‚Ä¶&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;</summary><content type="html">&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/10/28/vvedenie-v-simuliatsiiu-elektricheskikh-skhem-s-pomoshchiu-ngspicejs/"&gt;–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º&lt;/a&gt; –æ—Å–≤–∞–∏–≤–∞—Ç—å NGSPICE –≤–æ–æ–±—â–µ –∏ &lt;a href="http://proiot.ru/blog/posts/2016/11/18/ngspicejs-idealnyi-operatsionnyi-usilitel/"&gt;–û–£&lt;/a&gt; –≤ —á–∞—Å—Ç–Ω–æ—Å—Ç–∏.&lt;/p&gt;
&lt;p&gt;–í –Ω–µ–∏–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—â–µ–º —É—Å–∏–ª–∏—Ç–µ–ª–µ –≤—Ö–æ–¥–Ω–æ–π —Å–∏–≥–Ω–∞–ª –ø–æ–¥–∞—ë—Ç—Å—è –Ω–∞ –Ω–µ–∏–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—â–∏–π –≤—Ö–æ–¥ –û–£, –∞ –û–û–° –∑–∞–≤–µ–¥–µ–Ω–∞ —Å –≤—ã—Ö–æ–¥–∞ –Ω–∞ –∏–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—â–∏–π –≤—Ö–æ–¥. –û—Ç–ª–∏—á–∏—Ç–µ–ª—å–Ω—ã–º–∏ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—è–º–∏ –¥–∞–Ω–Ω–æ–π —Å—Ö–µ–º—ã –¥–ª—è –∏–¥–µ–∞–ª—å–Ω–æ–≥–æ –û–£ —è–≤–ª—è—é—Ç—Å—è:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;–±–µ—Å–∫–æ–Ω–µ—á–Ω–æ –±–æ–ª—å—à–æ–µ &lt;a href="http://proiot.ru/blog/posts/2016/11/04/ngspicejs-soglasovanie-istochnika-s-nagruzkoi/"&gt;–≤—Ö–æ–¥–Ω–æ–µ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;—Ñ–∞–∑–∞ —Å–∏–≥–Ω–∞–ª–∞ –Ω–∞ –≤—Ö–æ–¥–µ –∏ –Ω–∞ –≤—ã—Ö–æ–¥–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;–∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —É—Å–∏–ª–µ–Ω–∏—è –ø–æ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—é &lt;code&gt;1+Rf/Rg&lt;/code&gt;, –∫–∞–∫ –Ω–µ —Å–ª–æ–∂–Ω–æ –¥–æ–≥–∞–¥–∞—Ç—å—Å—è –æ–Ω &lt;strong&gt;–Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –º–µ–Ω—å—à–µ 1&lt;/strong&gt; - —É—Å–∏–ª–∏—Ç–µ–ª—å —Å –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–º 1 –∏–Ω–æ–≥–¥–∞ –Ω–∞–∑—ã–≤–∞—é—Ç –±—É—Ñ–µ—Ä–æ–º&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- 
&lt;a href="http://proiot.ru/blog/posts/2016/11/21/ngspicejs-neinvertiruiushchii-usilitel-na-ou/LT1007CS.txt"&gt;&lt;/a&gt;
--&gt;

&lt;p&gt;–í —Å–ª–µ–¥—É—é—â–∏—Ö —Å—Ö–µ–º–∞—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞—Å—å SPICE –º–æ–¥–µ–ª—å –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —É—Å–∏–ª–∏—Ç–µ–ª—è LT1007:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ wget http://cds.linear.com/docs/en/software-and-simulation/LT1007CS.txt
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/11/21/ngspicejs-neinvertiruiushchii-usilitel-na-ou/non-inverting.sch"&gt;—Å—Ö–µ–º–∞ –Ω–µ–∏–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—â–µ–≥–æ —É—Å–∏–ª–∏—Ç–µ–ª—è&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2016/11/21/ngspicejs-neinvertiruiushchii-usilitel-na-ou/non-inverting.net"&gt;netlist&lt;/a&gt; | &lt;a href="https://ngspice.js.org/?gist=afbeb59caf6deff2cfead830a50cfb59"&gt;ngspice.js&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/11/21/ngspicejs-neinvertiruiushchii-usilitel-na-ou/show-img-non-inverting.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ngspice 1 -&amp;gt; source non-inverting.net
ngspice 2 -&amp;gt; dc vin -10m 10m 20u
ngspice 3 -&amp;gt; plot v(out) ylimit -10 10
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —É—Å–∏–ª–µ–Ω–∏—è —Å—Ö–µ–º—ã &lt;code&gt;1+365000/365 = 1001&lt;/code&gt;, —Ç.–µ. –ø—Ä–∏ 10 –º–í –Ω–∞ –≤—Ö–æ–¥–µ –Ω–∞ –≤—ã—Ö–æ–¥–µ –±—É–¥–µ—Ç 10.01 –í. –î–ª—è –∫—Ä–∞—Å–æ—Ç—ã –∫–∞—Ä—Ç–∏–Ω–∫–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –æ–∫—Ä—É–≥–ª—ë–Ω –¥–æ 10 —Å –ø–æ–º–æ—â—å—é &lt;code&gt;ylimit&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/11/21/ngspicejs-neinvertiruiushchii-usilitel-na-ou/non-inverting-canvas.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–ö–ª–∞—Å—Å–∏—á–µ—Å–∫–∞—è —Å—Ö–µ–º–∞ –≤–∫–ª—é—á–µ–Ω–∏—è –û–£ –ø–æ–¥—Ä–∞–∑—É–º–µ–≤–∞–µ—Ç –±–∏–ø–æ–ª—è—Ä–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –ø–∏—Ç–∞–Ω–∏—è, –≤ –ø—Ä–µ–¥—ã–¥—É—â–µ–º –ø—Ä–∏–º–µ—Ä–µ —ç—Ç–æ ¬± 15–í. –ï—Å–ª–∏ –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –∫ –û–£ –Ω–µ —É–ø–æ–º—è–Ω—É—Ç–æ –æ–±—Ä–∞—Ç–Ω–æ–µ, —Ç–æ –æ–¥–Ω–æ–ø–æ–ª—è—Ä–Ω–æ–µ –ø–∏—Ç–∞–Ω–∏–µ –∑–∞—á–∞—Å—Ç—É—é —Ç–∞–∫–∂–µ –≤–æ–∑–º–æ–∂–Ω–æ, –æ–¥–Ω–∞–∫–æ –ø–æ—Ç—Ä–µ–±—É—é—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–µ–ª–æ–¥–≤–∏–∂–µ–Ω–∏—è - –Ω–∞–ø—Ä–∏–º–µ—Ä –ø–æ–¥–∞—á–∞ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è —Å–º–µ—â–µ–Ω–∏—è, –≥–∞–ª—å–≤–∞–Ω–∏—á–µ—Å–∫–∞—è —Ä–∞–∑–≤—è–∑–∫–∞ –∏ –ø–æ–Ω–∏–º–∞–Ω–∏–µ –∑–∞—á–µ–º —ç—Ç–æ –Ω–∞–¥–æ. –ò–¥–µ—è —Ç–∞–∫–∞—è –∂–µ  –∫–∞–∫ –∏ –≤ &lt;a href="http://proiot.ru/blog/posts/2016/11/07/ngspicejs-usilitelnyi-kaskad-s-obshchim-emitterom/"&gt;—Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä–Ω—ã—Ö&lt;/a&gt; —Å—Ö–µ–º–∞—Ö —É—Å–∏–ª–∏—Ç–µ–ª–µ–π:&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/11/21/ngspicejs-neinvertiruiushchii-usilitel-na-ou/non-inverting-single.sch"&gt;–Ω–µ–∏–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—â–∏–π —É—Å–∏–ª–∏—Ç–µ–ª—å —Å –æ–¥–Ω–æ–ø–æ–ª—è—Ä–Ω—ã–º –ø–∏—Ç–∞–Ω–∏–µ–º&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2016/11/21/ngspicejs-neinvertiruiushchii-usilitel-na-ou/non-inverting-single.net"&gt;netlist&lt;/a&gt; | &lt;a href="https://ngspice.js.org/?gist=d07144c7716c6e14452bb449f8a4d129"&gt;ngspice.js&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/11/21/ngspicejs-neinvertiruiushchii-usilitel-na-ou/show-img-non-inverting-single.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ngspice 1 -&amp;gt; source non-inverting-single.net
ngspice 2 -&amp;gt; tran 1u 0.5m
ngspice 3 -&amp;gt; plot v(out) v(in)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–û—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å (–û–û–°) –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —É—Å–∏–ª–µ–Ω–∏—è &lt;code&gt;1+100/50 = 3&lt;/code&gt; –¥–ª—è –≤—ã—Å–æ–∫–æ—á–∞—Å—Ç–æ—Ç–Ω—ã—Ö —Å–∏–≥–Ω–∞–ª–æ–≤ –∏ —Ä–∞–≤–Ω—ã–π &lt;strong&gt;–µ–¥–∏–Ω–∏—Ü–µ&lt;/strong&gt; –¥–ª—è –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–π —Å–æ—Å—Ç–∞–≤–ª—è—é—â–µ–π - –≤ –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ –û–£ –±—É–¥–µ—Ç —É—Å–∏–ª–∏–≤–∞—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è —Å–º–µ—â–µ–Ω–∏—è. –¢–∞–∫–∂–µ –Ω–µ—Å–ª–æ–∂–Ω–æ —É–±–µ–¥–∏—Ç—å—Å—è —Ñ–∞–∑–∞ –≤—Ö–æ–¥–Ω–æ–≥–æ –∏ –≤—ã—Ö–æ–¥–Ω–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞ —Å–æ–≤–ø–∞–¥–∞–µ—Ç. –ù–∞–ø—Ä—è–∂–µ–Ω–∏–µ —Å–º–µ—â–µ–Ω–∏–µ –æ–±—ã—á–Ω–æ –∑–∞–¥–∞—é—Ç —Ä–∞–≤–Ω—ã–º –ø–æ–ª–æ–≤–∏–Ω–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –ø–∏—Ç–∞–Ω–∏—è.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/11/21/ngspicejs-neinvertiruiushchii-usilitel-na-ou/non-inverting-single-canvas.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –Ω–µ–ª–∏–Ω–µ–π–Ω—ã—Ö –∏—Å–∫–∞–∂–µ–Ω–∏–π –¥–ª—è –û–£ —É—Å–∏–ª–∏—Ç–µ–ª–µ–π –æ—á–µ–Ω—å &lt;a href="https://ngspice.js.org/?gist=27956fb8325c49b6b8bf595ed3f49868"&gt;–Ω–∏–∑–∫–∏–π&lt;/a&gt; THD: 0.00109449 %, —á—Ç–æ —è–≤–ª—è–µ—Ç—Å—è —Å–ª–µ–¥—Å—Ç–≤–∏–µ–º —Å–∏–ª—å–Ω–æ–π –û–û–°.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ngspice 4 -&amp;gt; fourier 10k v(out)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/11/22/ngspicejs-invertiruiushchii-usilitel-na-ou/"&gt;–î–∞–ª–µ–µ&lt;/a&gt; –∏–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—â–∏–π —É—Å–∏–ª–∏—Ç–µ–ª—å –Ω–∞ –û–£.&lt;/p&gt;</content><category term="gEDA"></category><category term="ngspice"></category><category term="–û–£"></category></entry><entry><title>NGSPICE.js - –∏–¥–µ–∞–ª—å–Ω—ã–π –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —É—Å–∏–ª–∏—Ç–µ–ª—å</title><link href="http://proiot.ru/blog/posts/2016/11/18/ngspicejs-idealnyi-operatsionnyi-usilitel/" rel="alternate"></link><published>2016-11-18T00:00:00+02:00</published><updated>2016-11-18T00:00:00+02:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2016-11-18:/blog/posts/2016/11/18/ngspicejs-idealnyi-operatsionnyi-usilitel/</id><summary type="html">&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/10/28/vvedenie-v-simuliatsiiu-elektricheskikh-skhem-s-pomoshchiu-ngspicejs/"&gt;–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º&lt;/a&gt; –æ—Å–≤–∞–∏–≤–∞—Ç—å NGSPICE.&lt;/p&gt;
&lt;p&gt;–û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —É—Å–∏–ª–∏—Ç–µ–ª—å (–û–£) - —ç—Ç–æ –º–æ–¥—É–ª—å–Ω—ã–π –º–Ω–æ–≥–æ–∫–∞—Å–∫–∞–¥–Ω—ã–π —É—Å–∏–ª–∏—Ç–µ–ª—å —Å –¥–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–º –≤—Ö–æ–¥–æ–º. –î–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã —Ä–∞—Å—á—ë—Ç–æ–≤ —É–¥–æ–±–Ω–æ –æ–ø–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–æ–Ω—è—Ç–∏–µ–º &lt;em&gt;–∏–¥–µ–∞–ª—å–Ω–æ–≥–æ –û–£&lt;/em&gt; - —Ç–∞–∫–æ–≥–æ —Å–µ–±–µ –Ω–µ–ø—Ä–æ–∑—Ä–∞—á–Ω–æ–≥–æ —è—â–∏—á–∫–∞ —Å –º–∞–≥–∏–µ–π –≤–Ω—É—Ç—Ä–∏. –î–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π –≤—Ö–æ–¥ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç –¥–≤–∞ –≤—Ö–æ–¥–∞ - –∏–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—â–∏–π –∏ –Ω–µ–∏–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—â–∏–π. –¢–∞–∫–∂–µ —É –û–£ –µ—Å—Ç—å –¥–≤–µ –Ω–æ–≥–∏ –¥–ª—è –ø–∏—Ç–∞–Ω–∏—è –∏ –æ–±—ã—á–Ω–æ –æ–¥–∏–Ω –≤—ã—Ö–æ–¥, —É—Ä–æ–≤–µ–Ω—å –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/10/28/vvedenie-v-simuliatsiiu-elektricheskikh-skhem-s-pomoshchiu-ngspicejs/"&gt;–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º&lt;/a&gt; –æ—Å–≤–∞–∏–≤–∞—Ç—å NGSPICE.&lt;/p&gt;
&lt;p&gt;–û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —É—Å–∏–ª–∏—Ç–µ–ª—å (–û–£) - —ç—Ç–æ –º–æ–¥—É–ª—å–Ω—ã–π –º–Ω–æ–≥–æ–∫–∞—Å–∫–∞–¥–Ω—ã–π —É—Å–∏–ª–∏—Ç–µ–ª—å —Å –¥–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–º –≤—Ö–æ–¥–æ–º. –î–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã —Ä–∞—Å—á—ë—Ç–æ–≤ —É–¥–æ–±–Ω–æ –æ–ø–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–æ–Ω—è—Ç–∏–µ–º &lt;em&gt;–∏–¥–µ–∞–ª—å–Ω–æ–≥–æ –û–£&lt;/em&gt; - —Ç–∞–∫–æ–≥–æ —Å–µ–±–µ –Ω–µ–ø—Ä–æ–∑—Ä–∞—á–Ω–æ–≥–æ —è—â–∏—á–∫–∞ —Å –º–∞–≥–∏–µ–π –≤–Ω—É—Ç—Ä–∏. –î–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π –≤—Ö–æ–¥ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç –¥–≤–∞ –≤—Ö–æ–¥–∞ - –∏–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—â–∏–π –∏ –Ω–µ–∏–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—â–∏–π. –¢–∞–∫–∂–µ —É –û–£ –µ—Å—Ç—å –¥–≤–µ –Ω–æ–≥–∏ –¥–ª—è –ø–∏—Ç–∞–Ω–∏—è –∏ –æ–±—ã—á–Ω–æ –æ–¥–∏–Ω –≤—ã—Ö–æ–¥, —É—Ä–æ–≤–µ–Ω—å –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º —è–≤–ª—è–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏–µ–π –æ—Ç —Ä–∞–∑–Ω–æ—Å—Ç–∏ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–π –Ω–∞ –≤—Ö–æ–¥–∞—Ö. –ü–æ–¥ –∏–¥–µ–∞–ª—å–Ω—ã–º –ø–æ–¥—Ä–∞–∑—É–º–µ–≤–∞—é—Ç:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;–±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–µ &lt;a href="http://proiot.ru/blog/posts/2016/11/04/ngspicejs-soglasovanie-istochnika-s-nagruzkoi/"&gt;–≤—Ö–æ–¥–Ω–æ–µ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;–Ω—É–ª–µ–≤–æ–µ –≤—ã—Ö–æ–¥–Ω–æ–µ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;–±–µ—Å–∫–æ–Ω–µ—á–Ω–∞—è —à–∏—Ä–∏–Ω–∞ &lt;a href="http://proiot.ru/blog/posts/2016/10/29/ngspicejs-rc-filtr-nizhnikh-chastot/"&gt;–ø–æ–ª–æ—Å—ã –ø—Ä–æ–ø—É—Å–∫–∞–Ω–∏—è&lt;/a&gt; –∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∑–∞–¥–µ—Ä–∂–∫–∏ –ø—Ä–∏ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–∏ —Å–∏–≥–Ω–∞–ª–∞ —á–µ—Ä–µ–∑ —É—Å–∏–ª–∏—Ç–µ–ª—å&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;–±–µ—Å–∫–æ–Ω–µ—á–Ω–æ –±–æ–ª—å—à–æ–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —É—Å–∏–ª–µ–Ω–∏—è –ø–æ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—é —Å —Ä–∞–∑–æ–º–∫–Ω—É—Ç–æ–π –ø–µ—Ç–ª–µ–π &lt;a href="http://proiot.ru/blog/posts/2016/11/13/ngspicejs-generatory-kolebanii-na-tranzistorakh/"&gt;–æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;–ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏–µ –æ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ—Å—Ç–∏ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞ —É—Å–∏–ª–µ–Ω–∏—è –∏–¥–µ–∞–ª—å–Ω–æ–≥–æ
–û–£ –≤–ª–µ—á—ë—Ç –∑–∞ —Å–æ–±–æ–π –ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏–µ –æ —Ç–æ–º, —á—Ç–æ —Ä–∞–∑–Ω–æ—Å—Ç—å –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–π –º–µ–∂–¥—É –≤—Ö–æ–¥–∞–º–∏ —Å—Ç—Ä–µ–º–∏—Ç—Å—è –∫ –Ω—É–ª—é –≤ –∞–∫—Ç–∏–≤–Ω–æ–º —Ä–µ–∂–∏–º–µ —É—Å–∏–ª–µ–Ω–∏—è&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- 
&lt;a href="http://proiot.ru/blog/posts/2016/11/18/ngspicejs-idealnyi-operatsionnyi-usilitel/LT1007CS.txt"&gt;&lt;/a&gt;
--&gt;

&lt;p&gt;–ù–∞ —Ç–µ–∫—É—â–∏–π –º–æ–º–µ–Ω—Ç &lt;a href="https://ngspice.js.org/"&gt;ngspice.js&lt;/a&gt; —Å–æ–±—Ä–∞–Ω –±–µ–∑ —Ñ–ª–∞–≥–∞  &lt;code&gt;--enable-xspice&lt;/code&gt;, –ø–æ—ç—Ç–æ–º—É –≤ —Å–ª–µ–¥—É—é—â–∏—Ö —Å—Ö–µ–º–∞—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞—Å—å SPICE –º–æ–¥–µ–ª—å –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–≥–æ —É—Å–∏–ª–∏—Ç–µ–ª—è LT1007, –∞ –Ω–µ –±–æ–ª–µ–µ —à–∏—Ä–æ–∫–æ –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –∏ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö LM321 –∏–ª–∏ uA741/–ö140–£–î7 —Ç.–∫. –¥–ª—è —Å–∏–º—É–ª—è—Ü–∏–∏ –æ–Ω–∏ —Ç—Ä–µ–±—É—é—Ç –Ω–∞–ª–∏—á–∏—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è &lt;strong&gt;xspice&lt;/strong&gt; - –≤ —Ç–∞–∫–∏—Ö —Å–ª—É—á–∞—è—Ö —Å—Ç–æ–∏—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–∞—Ç–∏–≤–Ω—ã–π &lt;strong&gt;ngspice&lt;/strong&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ wget http://cds.linear.com/docs/en/software-and-simulation/LT1007CS.txt
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/11/18/ngspicejs-idealnyi-operatsionnyi-usilitel/basic.sch"&gt;—Å—Ö–µ–º–∞ –û–£ –±–µ–∑ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2016/11/18/ngspicejs-idealnyi-operatsionnyi-usilitel/basic.net"&gt;netlist&lt;/a&gt; | &lt;a href="https://ngspice.js.org/?gist=2451008bf8176a886539a9f9b54a448c"&gt;ngspice.js&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/11/18/ngspicejs-idealnyi-operatsionnyi-usilitel/show-img-basic.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ngspice 1 -&amp;gt; source basic.net
ngspice 2 -&amp;gt; alter vn 0.1m
ngspice 3 -&amp;gt; dc vp 60u 0.1m 50n
ngspice 4 -&amp;gt; plot v(out)
ngspice 5 -&amp;gt; alter vp 0.1m
ngspice 6 -&amp;gt; op
ngspice 7 -&amp;gt; print i(vp) i(vn)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∫–æ–º–∞–Ω–¥—ã &lt;code&gt;op&lt;/code&gt; —Å–ª–µ–¥—É—é—â–∏–µ i(vp) = -8.96560e-09 | i(vn) = -2.09159e-08 –∏–∑ —á–µ–≥–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å &lt;a href="https://bc.js.org/"&gt;–≤—ã–≤–æ–¥&lt;/a&gt; —á—Ç–æ –≤—Ö–æ–¥–Ω–æ–µ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ &lt;code&gt;(10^-4)/(8.96560*10^-09) ‚âà 10 –∫–û–º&lt;/code&gt; | &lt;code&gt;(10^-4)/(2.09159*10^-08) ‚âà 5 –∫–û–º&lt;/code&gt; —á—Ç–æ –≤–æ–±—â–µ–º –Ω–µ–º–Ω–æ–≥–æ. –ß—Ç–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ –¥–ª—è –±–æ–ª–µ–µ –≤—ã—Å–æ–∫–∏—Ö –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–π Vp –∏ Vn –≤—Ö–æ–¥–Ω–æ–µ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ –æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –Ω–∞ &lt;a href="https://ngspice.js.org/?gist=3793a35c63184e8a1d26c67a16888fc2"&gt;–ø–æ—Ä—è–¥–æ–∫&lt;/a&gt; –±–æ–ª—å—à–µ - –¥–µ—Å—è—Ç–∫–∏ –º–µ–≥–∞–æ–º:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ngspice 8 -&amp;gt; alter vp 1
ngspice 9 -&amp;gt; alter vn 1
ngspice 10 -&amp;gt; op
ngspice 11 -&amp;gt; print i(vp) i(vn)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–°—É–¥—è –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ LT1007 —Å–ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω –Ω–∞ &lt;a href="http://proiot.ru/blog/posts/2016/11/02/ngspicejs-bipoliarnyi-tranzistor/"&gt;–±–∏–ø–æ–ª—è—Ä–Ω—ã—Ö —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä–∞—Ö&lt;/a&gt;, —á—Ç–æ –≤–æ–∑–º–æ–∂–Ω–æ –æ–±—ä—è—Å–Ω—è–µ—Ç –Ω–µ–±–æ–ª—å—à–æ–µ –ø–æ –º–µ—Ä–∫–∞–º –û–£ –≤—Ö–æ–¥–Ω–æ–µ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/11/18/ngspicejs-idealnyi-operatsionnyi-usilitel/basic-canvas.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–ù–∞ –∫–∞—Ä—Ç–∏–Ω–∫–µ –ø–∞—Ä–∞ –º–∏–∫—Ä–æ–≤–æ–ª—å—Ç –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞ –û–£ –Ω–∞ –≤—Ö–æ–¥–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–≤–æ—Ä–∞—á–∏–≤–∞—é—Ç –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –Ω–∞ –≤—ã—Ö–æ–¥–µ –∏–∑ –Ω–∏–∂–Ω–µ–≥–æ —Ä–µ–∂–∏–º–∞ –∞ –Ω–∞—Å—ã—â–µ–Ω–∏—è –≤ –≤–µ—Ä—Ö–Ω–∏–π, —á—Ç–æ –≥–æ–≤–æ—Ä–∏—Ç –æ–± –æ—á–µ–Ω—å –±–æ–ª—å—à–æ–º –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–µ —É—Å–∏–ª–µ–Ω–∏—è –ø–æ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—é &lt;code&gt;(8+8)/(2*10^-6) = 8 –º–∏–ª–ª–∏–æ–Ω–æ–≤ = 20*log(8*10^6)=20*l(8*10^6)/l(10) = 138 –¥–ë&lt;/code&gt;. –ü–æ—ç—Ç–æ–º—É –¥–ª—è –Ω–æ—Ä–º–∞–ª—å–Ω–æ–π —Ä–∞–±–æ—Ç—ã –û–£ –≤–≤–æ–¥—è—Ç –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å - –∫–∞–∫ –ø—Ä–∞–≤–∏–ª–æ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—É—é.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/11/21/ngspicejs-neinvertiruiushchii-usilitel-na-ou/"&gt;–î–∞–ª–µ–µ&lt;/a&gt; –Ω–µ–∏–Ω–≤–µ—Ä—Ç–∏—Ä—É—é—â–∏–π —É—Å–∏–ª–∏—Ç–µ–ª—å –Ω–∞ –û–£.&lt;/p&gt;</content><category term="gEDA"></category><category term="ngspice"></category><category term="–û–£"></category></entry><entry><title>NGSPICE.js - –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã –∫–æ–ª–µ–±–∞–Ω–∏–π –Ω–∞ —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä–∞—Ö</title><link href="http://proiot.ru/blog/posts/2016/11/13/ngspicejs-generatory-kolebanii-na-tranzistorakh/" rel="alternate"></link><published>2016-11-13T00:00:00+02:00</published><updated>2016-11-13T00:00:00+02:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2016-11-13:/blog/posts/2016/11/13/ngspicejs-generatory-kolebanii-na-tranzistorakh/</id><summary type="html">&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/10/28/vvedenie-v-simuliatsiiu-elektricheskikh-skhem-s-pomoshchiu-ngspicejs/"&gt;–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º&lt;/a&gt; –æ—Å–≤–∞–∏–≤–∞—Ç—å NGSPICE.&lt;/p&gt;
&lt;p&gt;–ï—Å–ª–∏ –Ω–µ–∫–æ—Ç–æ—Ä–∞—è —á–∞—Å—Ç—å –≤—ã—Ö–æ–¥–Ω–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞ —É—Å–∏–ª–∏—Ç–µ–ª—è –ø–æ–¥–∞—ë—Ç—Å—è –æ–±—Ä–∞—Ç–Ω–æ –Ω–∞ –≤—Ö–æ–¥, —Ç–∞–∫ —á—Ç–æ —É—Å–∏–ª–∏—Ç–µ–ª—å —É—Å–∏–ª–∏–≤–∞–µ—Ç —á–∞—Å—Ç—å —Å–≤–æ–µ–≥–æ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –≤—ã—Ö–æ–¥–Ω–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞, —Ç–æ –º—ã –ø–æ–ª—É—á–∞–µ–º —Ç.–Ω.  –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å. –û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ –¥–≤—É—Ö —Ä–∞–∑–Ω–æ–≤–∏–¥–Ω–æ—Å—Ç—è—Ö: –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–∞—è (—Ç–∞–∫–∂–µ –Ω–∞–∑—ã–≤–∞–µ–º–∞—è —Ä–µ–≥–µ–Ω–µ—Ä–∞—Ç–∏–≤–Ω–æ–π) –∏ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–∞—è (–û–û–°). –ü—Ä–∏ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–π –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏ (–ü–û–°) —á–∞—Å—Ç—å –≤—ã—Ö–æ–¥–Ω–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞ ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/10/28/vvedenie-v-simuliatsiiu-elektricheskikh-skhem-s-pomoshchiu-ngspicejs/"&gt;–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º&lt;/a&gt; –æ—Å–≤–∞–∏–≤–∞—Ç—å NGSPICE.&lt;/p&gt;
&lt;p&gt;–ï—Å–ª–∏ –Ω–µ–∫–æ—Ç–æ—Ä–∞—è —á–∞—Å—Ç—å –≤—ã—Ö–æ–¥–Ω–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞ —É—Å–∏–ª–∏—Ç–µ–ª—è –ø–æ–¥–∞—ë—Ç—Å—è –æ–±—Ä–∞—Ç–Ω–æ –Ω–∞ –≤—Ö–æ–¥, —Ç–∞–∫ —á—Ç–æ —É—Å–∏–ª–∏—Ç–µ–ª—å —É—Å–∏–ª–∏–≤–∞–µ—Ç —á–∞—Å—Ç—å —Å–≤–æ–µ–≥–æ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –≤—ã—Ö–æ–¥–Ω–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞, —Ç–æ –º—ã –ø–æ–ª—É—á–∞–µ–º —Ç.–Ω.  –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å. –û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ –¥–≤—É—Ö —Ä–∞–∑–Ω–æ–≤–∏–¥–Ω–æ—Å—Ç—è—Ö: –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–∞—è (—Ç–∞–∫–∂–µ –Ω–∞–∑—ã–≤–∞–µ–º–∞—è —Ä–µ–≥–µ–Ω–µ—Ä–∞—Ç–∏–≤–Ω–æ–π) –∏ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–∞—è (–û–û–°). –ü—Ä–∏ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–π –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏ (–ü–û–°) —á–∞—Å—Ç—å –≤—ã—Ö–æ–¥–Ω–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞ —Å–∫–ª–∞–¥—ã–≤–∞–µ—Ç—Å—è —Å –≤—Ö–æ–¥–Ω—ã–º —Å–∏–≥–Ω–∞–ª–æ–º —Ç–æ–≥–¥–∞ –∫–∞–∫ –ø—Ä–∏ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–π –≤—ã—á–∏—Ç–∞–µ—Ç—Å—è. –¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –û–û–° —Å –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ–º —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä–æ–≤ &lt;a href="http://proiot.ru/blog/posts/2016/11/10/ngspicejs-usilitelnyi-kaskad-s-obshchei-bazoi/"&gt;–û–ë&lt;/a&gt; –∏ &lt;a href="http://proiot.ru/blog/posts/2016/11/09/ngspicejs-usilitelnyi-kaskad-s-obshchim-kollektorom/"&gt;–û–ö&lt;/a&gt;. –û–û–° –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ —Å–Ω–∏–∂–µ–Ω–∏—é –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞ —É—Å–∏–ª–µ–Ω–∏—è, –æ–¥–Ω–∞–∫–æ –¥–∞—ë—Ç –∏ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞: —É–º–µ–Ω—å—à–µ–Ω–∏–µ –∏—Å–∫–∞–∂–µ–Ω–∏–π, —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –ø–æ–ª–æ—Å—ã –ø—Ä–æ–ø—É—Å–∫–∞–Ω–∏—è, —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–Ω–∞—è —Å—Ç–∞–±–∏–ª–∏–∑–∞—Ü–∏—è. –°–∏–ª—å–Ω—É—é –ü–û–° –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –∏—Å–ø–æ–ª—å–∑—É—é—Ç –≤ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞—Ö —Å–∏–≥–Ω–∞–ª–æ–≤. –°–ª–∞–±–∞—è –ü–û–° —Ç–∞–∫–∂–µ –Ω–∞—Ö–æ–¥–∏—Ç –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ - –Ω–∞–ø—Ä–∏–º–µ—Ä –≤ —Ä–µ–≥–µ–Ω–µ—Ä–∞—Ç–∏–≤–Ω—ã—Ö —Ä–∞–¥–∏–æ–ø—Ä–∏—ë–º–Ω–∏–∫–∞—Ö –¥–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –±–æ–ª—å—à–æ–≥–æ (–æ–≥—Ä–æ–º–Ω–æ–≥–æ) —É—Å–∏–ª–µ–Ω–∏—è.&lt;/p&gt;
&lt;p&gt;–ü—Ä–æ—Å—Ç–µ–π—à–∏–π &lt;strong&gt;RC-–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä&lt;/strong&gt; —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –æ–¥–Ω–æ–≥–æ —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä–∞ –∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –∏–∑ —Å–µ–±—è —É—Å–∏–ª–∏—Ç–µ–ª—å–Ω—ã–π –∫–∞—Å–∫–∞–¥ —Å –æ–±—â–∏–º —ç–º–∏—Ç—Ç–µ—Ä–æ–º &lt;a href="http://proiot.ru/blog/posts/2016/11/07/ngspicejs-usilitelnyi-kaskad-s-obshchim-emitterom/"&gt;–û–≠&lt;/a&gt;, –æ—Ö–≤–∞—á–µ–Ω–Ω—ã–π –ü–û–°. –¶–µ–ø—å –ü–û–° —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —Ç—Ä–µ—Ö —Ñ–∞–∑–æ–≤—Ä–∞—â–∞—é—â–∏—Ö RC-—Ü–µ–ø–æ—á–µ–∫, –∫–∞–∂–¥–∞—è –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Å–¥–≤–∏–≥ —Ñ–∞–∑ 60 –≥—Ä–∞–¥—É—Å–æ–≤ —Ç.–µ. –≤ —Å—É–º–º–µ. 180¬∞ –∏ –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –û–û–° —Å –∫–æ–ª–ª–µ–∫—Ç–æ—Ä–∞ –Ω–∞ –±–∞–∑—É –ø—Ä–µ–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ –ü–û–° (180+180=360=0). –ü—Ä–∏ —É—Å–ª–æ–≤–∏–∏ &lt;code&gt;Rph1=Rph2=Rph3=R&lt;/code&gt; –∏ &lt;code&gt;–°ph1=–°ph2=–°ph3=–°&lt;/code&gt;
—Ç–∞–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –≤—ã—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≥–∞—Ä–º–æ–Ω–∏—á–µ—Å–∫–∏–µ –∫–æ–ª–µ–±–∞–Ω–∏—è —Å &lt;a href="https://bc.js.org/"&gt;—á–∞—Å—Ç–æ—Ç–æ–π&lt;/a&gt; &lt;code&gt;f = 1/(2*œÄ*sqrt(6)*R*C) ‚âà 0.065/(R*C) = 0.065/(22000*10^-7) ‚âà 29.5 –ì—Ü&lt;/code&gt;&lt;/p&gt;
&lt;!-- 
&lt;a href="http://proiot.ru/blog/posts/2016/11/13/ngspicejs-generatory-kolebanii-na-tranzistorakh/2N2222.LIB"&gt;&lt;/a&gt;
--&gt;

&lt;p&gt;–í —Å–ª–µ–¥—É—é—â–∏—Ö —Å—Ö–µ–º–∞—Ö –¥–ª—è —Å–∏–º—É–ª—è—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞—Å—å SPICE –º–æ–¥–µ–ª—å –ø–æ–ø—É–ª—è—Ä–Ω–æ–≥–æ n-p-n —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä–∞ 2N2222:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ wget -nc http://www.centralsemi.com/docs/csm/2N2222.LIB
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/11/13/ngspicejs-generatory-kolebanii-na-tranzistorakh/rc-phase-shift.sch"&gt;—Å—Ö–µ–º–∞ RC-–∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞ —Å —Ç—Ä–µ—Ö—Ñ–∞–∑–Ω–æ–π —Ñ–∞–∑–∏—Ä—É—é—â–µ–π —Ü–µ–ø–æ—á–∫–æ–π&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2016/11/13/ngspicejs-generatory-kolebanii-na-tranzistorakh/rc-phase-shift.net"&gt;netlist&lt;/a&gt; | &lt;a href="https://ngspice.js.org/?gist=af9112f7d9ce726eb2b2b6dfb8695a99"&gt;ngspice.js&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/11/13/ngspicejs-generatory-kolebanii-na-tranzistorakh/show-img-rc-phase-shift.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ngspice 1 -&amp;gt; source rc-phase-shift.net
ngspice 2 -&amp;gt; tran 0.4m 0.8
ngspice 3 -&amp;gt; plot v(out)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ù–∞ –∫–∞—Ä—Ç–∏–Ω–∫–µ –ø—Ä–∏–º–µ—Ä–Ω–æ 15 –ø—É–ø—ã—Ä—ã—à–µ–∫ –∑–∞ 400 –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥ —á—Ç–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —á–∞—Å—Ç–æ—Ç–µ 15/0.4 = 37.5 –ì—Ü, –∞ —Ä–∞–∑–Ω–∏—Ü–∞ —Å —Ä–∞—Å—á—ë—Ç–∞–º–∏ –≤–∏–¥–∏–º–æ —Å–≤—è–∑–∞–Ω–∞ —Å —Ç–µ–º —á—Ç–æ –≤—Ö–æ–¥–Ω–æ–µ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ –∫–∞—Å–∫–∞–¥–∞ —è–≤–Ω–æ &amp;lt; 22 –ö–û–º (—Å—É–¥—è –ø–æ &lt;a href="http://proiot.ru/blog/posts/2016/11/07/ngspicejs-usilitelnyi-kaskad-s-obshchim-emitterom/"&gt;–∑–∞–º–µ—Ä–∞–º&lt;/a&gt; –ø–æ—Ä—è–¥–∫–∞ 5 –ö–û–º). –£ &lt;a href="http://proiot.ru/blog/posts/2016/11/03/ngspicejs-polevoi-tranzistor/"&gt;–ø–æ–ª–µ–≤—ã—Ö&lt;/a&gt; —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä–æ–≤ –≤—Ö–æ–¥–Ω–æ–µ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –±–æ–ª—å—à–µ –∏ –ø–æ—ç—Ç–æ–º—É –æ–Ω–∏ –Ω–∞–≤–µ—Ä–Ω—è–∫–∞ –¥–∞–¥—É—Ç –ª—É—á—à—É—é —Ä–∞—Å—á—ë—Ç–Ω—É—é —Ç–æ—á–Ω–æ—Å—Ç—å –≤ –ø–æ–¥–æ–±–Ω—ã—Ö —Å—Ö–µ–º–∞—Ö. –ö—Å—Ç–∞—Ç–∏ –ø–æ —ç—Ç–æ–π –∂–µ –ø—Ä–∏—á–∏–Ω–µ –≤—ã—Ö–æ–¥–Ω–æ–µ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ Rc (–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ Re) —Ç–æ–∂–µ –Ω–µ–ø–ª–æ—Ö–æ –±—ã —É–º–µ–Ω—å—à–∏—Ç—å —ç–¥–∞–∫ —Ä–∞–∑ –≤ 10, –Ω–æ —Ç—É—Ç –≥–ª–∞–≤–Ω–æ–µ –Ω–µ —Å–æ—Ä–≤–∞—Ç—å –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –≤–µ–¥—å –æ—Ç Rc –∑–∞–≤–∏—Å–∏—Ç –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —É—Å–∏–ª–µ–Ω–∏—è –ø–æ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—é.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/11/13/ngspicejs-generatory-kolebanii-na-tranzistorakh/rc-phase-shift-canvas.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–ù–∞ –≤—ã—Å–æ–∫–∏—Ö —á–∞—Å—Ç–æ—Ç–∞—Ö —à–∏—Ä–æ–∫–æ–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–ª—É—á–∏–ª–∏ &lt;strong&gt;LC-–≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã&lt;/strong&gt;. –¢—É—Ç –Ω–µ–ø–ª–æ—Ö–æ –±—ã –≤—Å–ø–æ–º–Ω–∏—Ç—å –æ–± —ç—Ñ—Ñ–µ–∫—Ç–µ &lt;a href="http://proiot.ru/blog/posts/2016/11/11/ngspicejs-kaskodnyi-usilitel/"&gt;–ú–∏–ª–ª–µ—Ä–∞&lt;/a&gt; –∏ —Å—Ö–µ–º–µ —Å &lt;a href="http://proiot.ru/blog/posts/2016/11/10/ngspicejs-usilitelnyi-kaskad-s-obshchei-bazoi/"&gt;–û–ë&lt;/a&gt;. –ö–∞—Å–∫–∞–¥ —Å –æ–±—â–µ–π –±–∞–∑–æ–π —Ñ–∞–∑—É –Ω–µ —Å–¥–≤–∏–≥–∞–µ—Ç –ø–æ—ç—Ç–æ–º—É —Å–∏–≥–Ω–∞–ª –ø–æ–¥–∞–Ω–Ω—ã–π —Å –∫–æ–ª–ª–µ–∫—Ç–æ—Ä–∞ –≤ —ç–º–∏—Ç—Ç–µ—Ä –ø–æ—Ä–æ–∂–¥–∞–µ—Ç –ü–û–°.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/11/13/ngspicejs-generatory-kolebanii-na-tranzistorakh/colpitts.sch"&gt;—Å—Ö–µ–º–∞ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –ö–æ–ª–ø–∏—Ç—Ü–∞ (—ë–º–∫–æ—Å—Ç–Ω–∞—è —Ç—Ä—ë—Ö—Ç–æ—á–∫–∞)&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2016/11/13/ngspicejs-generatory-kolebanii-na-tranzistorakh/colpitts.net"&gt;netlist&lt;/a&gt; | &lt;a href="https://ngspice.js.org/?gist=eaf8b585ee3ffbcdbe09f75d77bf4bca"&gt;ngspice.js&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/11/13/ngspicejs-generatory-kolebanii-na-tranzistorakh/show-img-colpitts.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ngspice 1 -&amp;gt; source colpitts.net
ngspice 2 -&amp;gt; tran 1n 10u 9.5u
ngspice 3 -&amp;gt; plot v(out)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–î–∞–Ω–Ω–∞—è —Å—Ö–µ–º–∞ –≤–≤–∏–¥—É —Å–≤–æ–µ–π –ø—Ä–æ—Å—Ç–æ—Ç—ã –∏ –¥–µ—à–µ–≤–∏–∑–Ω—ã —á–∞—Å—Ç–æ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –≤ –±—é–¥–∂–µ—Ç–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö - —Ä–∞–¥–∏–æ—É–ø—Ä–∞–≤–ª—è–µ–º—ã—Ö –º–æ–¥–µ–ª—è—Ö, –∂—É—á–∫–∞—Ö –∏ —Ç.–¥. &lt;a href="https://bc.js.org/"&gt;–ß–∞—Å—Ç–æ—Ç–∞ (scale=100)&lt;/a&gt; &lt;code&gt;f = 1/(2*œÄ*sqrt(L*C1*C2/(C1+C2))) = 1/(2*3.14*sqrt(150*10^-9*10^-10*10^-10/(10^-10+10^-10))) ‚âà 58 –ú–ì—Ü&lt;/code&gt; –∞ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∞—è —á–∞—Å—Ç–æ—Ç–∞ –Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫–µ &lt;code&gt;18/(0.5*10^-6) = 36 –ú–ì—Ü&lt;/code&gt; - –ø–æ –≤—Å–µ–π –≤–∏–¥–∏–º–æ—Å—Ç–∏ —Å–∫–∞–∑—ã–≤–∞—é—Ç—Å—è —ë–º–∫–æ—Å—Ç–∏ p-n –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä–∞.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/11/13/ngspicejs-generatory-kolebanii-na-tranzistorakh/colpitts-canvas.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–û–¥–Ω–∏–º –∏–∑ —Å–∞–º—ã—Ö —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω—ã—Ö –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–æ–≤ –∏–º–ø—É–ª—å—Å–æ–≤ –ø–æ—á—Ç–∏ –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–æ–π —Ñ–æ—Ä–º—ã —è–≤–ª—è–µ—Ç—Å—è &lt;strong&gt;–ú—É–ª—å—Ç–∏–≤–∏–±—Ä–∞—Ç–æ—Ä&lt;/strong&gt;, –æ–±—ã—á–Ω–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –¥–≤—É—Ö–∫–∞—Å–∫–∞–¥–Ω—ã–π —Ä–µ–∑–∏—Å—Ç–∏–≤–Ω—ã–π —É—Å–∏–ª–∏—Ç–µ–ª—å, –æ—Ö–≤–∞—á–µ–Ω–Ω—ã–π –≥–ª—É–±–æ–∫–æ–π –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–π –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑—å—é. –ü—Ä–∏ –ø–æ–ø–∞—Ä–Ω–æ–º —Ä–∞–≤–µ–Ω—Å—Ç–≤–µ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–π —Ä–µ–∑–∏—Å—Ç–æ—Ä–æ–≤ R1 –∏ R4, R2 –∏ R3, —ë–º–∫–æ—Å—Ç–µ–π –∫–æ–Ω–¥–µ–Ω—Å–∞—Ç–æ—Ä–æ–≤ C1 –∏ C2, –∞ —Ç–∞–∫–∂–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä–æ–≤ Q1 –∏ Q2 –º—É–ª—å—Ç–∏–≤–∏–±—Ä–∞—Ç–æ—Ä —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è &lt;em&gt;—Å–∏–º–º–µ—Ç—Ä–∏—á–Ω—ã–º&lt;/em&gt; - –æ–Ω –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω—ã–µ –∫–æ–ª–µ–±–∞–Ω–∏—è (¬´–º–µ–∞–Ω–¥—Ä¬ª) —Å–æ —Å–∫–≤–∞–∂–Ω–æ—Å—Ç—å—é 2, —Ç–æ –µ—Å—Ç—å —Å–∏–≥–Ω–∞–ª —É –∫–æ—Ç–æ—Ä–æ–≥–æ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏–º–ø—É–ª—å—Å–∞ –∏ –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–∞—É–∑—ã –æ–¥–∏–Ω–∞–∫–æ–≤—ã.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/11/13/ngspicejs-generatory-kolebanii-na-tranzistorakh/symmetric-multivibrator.sch"&gt;—Å—Ö–µ–º–∞ —Å–∏–º–º–µ—Ç—Ä–∏—á–Ω—ã–π –º—É–ª—å—Ç–∏–≤–∏–±—Ä–∞—Ç–æ—Ä&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2016/11/13/ngspicejs-generatory-kolebanii-na-tranzistorakh/symmetric-multivibrator.net"&gt;netlist&lt;/a&gt; | &lt;a href="https://ngspice.js.org/?gist=16c76d4430f3f30c74e6779da48d1bf9"&gt;ngspice.js&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/11/13/ngspicejs-generatory-kolebanii-na-tranzistorakh/show-img-symmetric-multivibrator.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ngspice 1 -&amp;gt; source symmetric-multivibrator.net
ngspice 2 -&amp;gt; tran 50u 50m 5m
ngspice 3 -&amp;gt; plot v(out)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;a href="https://bc.js.org/"&gt;–ß–∞—Å—Ç–æ—Ç–∞&lt;/a&gt; –º—É–ª—å—Ç–∏–≤–∏–±—Ä–∞—Ç–æ—Ä–∞ &lt;code&gt;f = 1/(ln(2)*(R2*C1+R3*C2)) = 1/(l(2)*(47000*10^-7+47000*10^-7)) ‚âà 153 –ì—Ü&lt;/code&gt; –∏ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∞—è —á–∞—Å—Ç–æ—Ç–∞ &lt;code&gt;7/(50*10^-3) = 140 –ì—Ü&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/11/13/ngspicejs-generatory-kolebanii-na-tranzistorakh/symmetric-multivibrator-canvas.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/11/18/ngspicejs-idealnyi-operatsionnyi-usilitel/"&gt;–î–∞–ª–µ–µ&lt;/a&gt; –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —É—Å–∏–ª–∏—Ç–µ–ª—å.&lt;/p&gt;</content><category term="gEDA"></category><category term="ngspice"></category></entry><entry><title>NGSPICE.js - –∫–∞—Å–∫–æ–¥–Ω—ã–π —É—Å–∏–ª–∏—Ç–µ–ª—å</title><link href="http://proiot.ru/blog/posts/2016/11/11/ngspicejs-kaskodnyi-usilitel/" rel="alternate"></link><published>2016-11-11T00:00:00+02:00</published><updated>2016-11-11T00:00:00+02:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2016-11-11:/blog/posts/2016/11/11/ngspicejs-kaskodnyi-usilitel/</id><summary type="html">&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/10/28/vvedenie-v-simuliatsiiu-elektricheskikh-skhem-s-pomoshchiu-ngspicejs/"&gt;–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º&lt;/a&gt; –æ—Å–≤–∞–∏–≤–∞—Ç—å NGSPICE.&lt;/p&gt;
&lt;p&gt;–û—Å–Ω–æ–≤–Ω—ã–º –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–æ–º —É—Å–∏–ª–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∫–∞—Å–∫–∞–¥–∞ —Å –æ–±—â–µ–π –±–∞–∑–æ–π (–û–ë) —è–≤–ª—è–µ—Ç—Å—è —Ç–æ —á—Ç–æ &lt;a href="http://proiot.ru/blog/posts/2016/11/04/ngspicejs-soglasovanie-istochnika-s-nagruzkoi/"&gt;–≤—ã—Ö–æ–¥–Ω–æ–µ&lt;/a&gt; —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ –Ω–∞ –ø–æ—Ä—è–¥–æ–∫ –±–æ–ª—å—à–µ –≤—Ö–æ–¥–Ω–æ–≥–æ. –≠—Ç–æ–≥–æ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∞ –ª–∏—à–µ–Ω–∞ &lt;em&gt;–∫–∞—Å–∫–æ–¥–Ω–∞—è —Å—Ö–µ–º–∞&lt;/em&gt; –∏–ª–∏ &lt;em&gt;–∫–∞—Å–∫–æ–¥&lt;/em&gt;, –∫–æ—Ç–æ—Ä–∞—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∞ –Ω–∞ —Ä–∏—Å—É–Ω–∫–µ –Ω–∏–∂–µ. –í —Ç–∞–∫–æ–π —Å—Ö–µ–º–µ —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä—ã —Å–æ–µ–¥–∏–Ω–µ–Ω—ã –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ, –ø—Ä–∏ —ç—Ç–æ–º –≤—Ö–æ–¥–Ω–æ–π —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä –≤–∫–ª—é—á–µ–Ω –ø–æ —Å—Ö–µ–º–µ —Å –æ–±—â–∏–º —ç–º–∏—Ç—Ç–µ—Ä–æ–º &lt;a href="http://proiot.ru/blog/posts/2016/11/07/ngspicejs-usilitelnyi-kaskad-s-obshchim-emitterom/"&gt;–û–≠&lt;/a&gt;, –∞ ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/10/28/vvedenie-v-simuliatsiiu-elektricheskikh-skhem-s-pomoshchiu-ngspicejs/"&gt;–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º&lt;/a&gt; –æ—Å–≤–∞–∏–≤–∞—Ç—å NGSPICE.&lt;/p&gt;
&lt;p&gt;–û—Å–Ω–æ–≤–Ω—ã–º –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–æ–º —É—Å–∏–ª–∏—Ç–µ–ª—å–Ω–æ–≥–æ –∫–∞—Å–∫–∞–¥–∞ —Å –æ–±—â–µ–π –±–∞–∑–æ–π (–û–ë) —è–≤–ª—è–µ—Ç—Å—è —Ç–æ —á—Ç–æ &lt;a href="http://proiot.ru/blog/posts/2016/11/04/ngspicejs-soglasovanie-istochnika-s-nagruzkoi/"&gt;–≤—ã—Ö–æ–¥–Ω–æ–µ&lt;/a&gt; —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ –Ω–∞ –ø–æ—Ä—è–¥–æ–∫ –±–æ–ª—å—à–µ –≤—Ö–æ–¥–Ω–æ–≥–æ. –≠—Ç–æ–≥–æ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∞ –ª–∏—à–µ–Ω–∞ &lt;em&gt;–∫–∞—Å–∫–æ–¥–Ω–∞—è —Å—Ö–µ–º–∞&lt;/em&gt; –∏–ª–∏ &lt;em&gt;–∫–∞—Å–∫–æ–¥&lt;/em&gt;, –∫–æ—Ç–æ—Ä–∞—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∞ –Ω–∞ —Ä–∏—Å—É–Ω–∫–µ –Ω–∏–∂–µ. –í —Ç–∞–∫–æ–π —Å—Ö–µ–º–µ —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä—ã —Å–æ–µ–¥–∏–Ω–µ–Ω—ã –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ, –ø—Ä–∏ —ç—Ç–æ–º –≤—Ö–æ–¥–Ω–æ–π —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä –≤–∫–ª—é—á–µ–Ω –ø–æ —Å—Ö–µ–º–µ —Å –æ–±—â–∏–º —ç–º–∏—Ç—Ç–µ—Ä–æ–º &lt;a href="http://proiot.ru/blog/posts/2016/11/07/ngspicejs-usilitelnyi-kaskad-s-obshchim-emitterom/"&gt;–û–≠&lt;/a&gt;, –∞ –¥—Ä—É–≥–æ–π - –ø–æ —Å—Ö–µ–º–µ —Å –æ–±—â–µ–π –±–∞–∑–æ–π &lt;a href="http://proiot.ru/blog/posts/2016/11/10/ngspicejs-usilitelnyi-kaskad-s-obshchei-bazoi/"&gt;–û–ë&lt;/a&gt;. –ö–∞—Å–∫–æ–¥–Ω–∞—è —Å—Ö–µ–º–∞ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫–æ–µ –∂–µ —É—Å–∏–ª–µ–Ω–∏–µ –ø–æ —Ç–æ–∫—É –∏ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—é, —á—Ç–æ –∏ —Å—Ö–µ–º–∞ —Å –æ–±—â–∏–º —ç–º–∏—Ç—Ç–µ—Ä–æ–º. &lt;/p&gt;
&lt;p&gt;–ö–∞–∫ –∏–∑–≤–µ—Å—Ç–Ω–æ –Ω–∞ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞—Ö –∫–∞—Å–∫–∞–¥–∞ —Å –æ–±—â–∏–º —ç–º–∏—Ç—Ç–µ—Ä–æ–º &lt;a href="http://proiot.ru/blog/posts/2016/11/07/ngspicejs-usilitelnyi-kaskad-s-obshchim-emitterom/"&gt;–û–≠&lt;/a&gt;
–Ω–µ–≥–∞—Ç–∏–≤–Ω–æ —Å–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —ç—Ñ—Ñ–µ–∫—Ç –ú–∏–ª–ª–µ—Ä–∞, –ø—Ä–∏ –∫–æ—Ç–æ—Ä–æ–º –∏–∑-–∑–∞ —Å–¥–≤–∏–≥–∞ —Ñ–∞–∑—ã –≤—ã—Ö–æ–¥–Ω–æ–≥–æ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –Ω–∞ 180¬∞ –ø–æ –æ—Ç–Ω–æ—à–µ–Ω–∏—é –∫ –≤—Ö–æ–¥–Ω–æ–º—É –µ–º–∫–æ—Å—Ç—å –∫–æ–ª–ª–µ–∫—Ç–æ—Ä-–±–∞–∑–∞ —Å–æ–∑–¥–∞—ë—Ç –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—É—é –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å –ø–æ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–º—É —Ç–æ–∫—É –Ω–∞ –≤—ã—Å–æ–∫–∏—Ö —á–∞—Å—Ç–æ—Ç–∞—Ö. –¢–∞–∫–∞—è –ø–∞—Ä–∞–∑–∏—Ç–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å —ç–∫–≤–∏–≤–∞–ª–µ–Ω—Ç–Ω–∞ –≤–∫–ª—é—á–µ–Ω–∏—é –Ω–∞ –≤—Ö–æ–¥–µ —É—Å–∏–ª–∏—Ç–µ–ª—è —à—É–Ω—Ç–∏—Ä—É—é—â–µ–π –µ–º–∫–æ—Å—Ç–∏, –≤–µ–ª–∏—á–∏–Ω–∞ –∫–æ—Ç–æ—Ä–æ–π –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω–∞ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—É —É—Å–∏–ª–µ–Ω–∏—è –ø–æ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—é –∫–∞—Å–∫–∞–¥–∞. &lt;/p&gt;
&lt;p&gt;–í –∫–∞—Å–∫–æ–¥–Ω–æ–π —Å—Ö–µ–º–µ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —É—Å–∏–ª–µ–Ω–∏—è –ø–æ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—é –∫–∞—Å–∫–∞–¥–∞ —Å &lt;a href="http://proiot.ru/blog/posts/2016/11/07/ngspicejs-usilitelnyi-kaskad-s-obshchim-emitterom/"&gt;–û–≠&lt;/a&gt; –Ω–µ–≤–µ–ª–∏–∫ - —ç—Ç–æ –æ–±—É—Å–ª–æ–≤–ª–µ–Ω–æ –º–∞–ª—ã–º –≤—Ö–æ–¥–Ω—ã–º —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏—è –∫–∞—Å–∫–∞–¥–∞ —Å –æ–±—â–µ–π –±–∞–∑–æ–π &lt;a href="http://proiot.ru/blog/posts/2016/11/10/ngspicejs-usilitelnyi-kaskad-s-obshchei-bazoi/"&gt;–û–ë&lt;/a&gt;. –ù–µ–±–æ–ª—å—à–æ–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —É—Å–∏–ª–µ–Ω–∏—è –ø–æ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—é –∫–∞—Å–∫–∞–¥–∞ —Å –û–≠ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –æ—Å–ª–∞–±–ª—è–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç –ú–∏–ª–ª–µ—Ä–∞. –ß—Ç–æ –∫–∞—Å–∞–µ—Ç—Å—è –∫–∞—Å–∫–∞–¥–∞ —Å &lt;a href="http://proiot.ru/blog/posts/2016/11/10/ngspicejs-usilitelnyi-kaskad-s-obshchei-bazoi/"&gt;–û–ë&lt;/a&gt; —Ç–æ –≤ –Ω—ë–º —ç—Ñ—Ñ–µ–∫—Ç –ú–∏–ª–ª–µ—Ä–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∫–∞–∫ —Ç–∞–∫–æ–≤–æ–π. –í –∏—Ç–æ–≥–µ –ø–æ–ª—É—á–∞–µ–º —É—Å–∏–ª–µ–Ω–∏–µ –ø–æ —Ç–æ–∫—É –≤ –û–≠ + —É—Å–∏–ª–µ–Ω–∏–µ –ø–æ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—é –≤ –û–ë –Ω–æ –±–µ–∑ –Ω–µ–≥–∞—Ç–∏–≤–Ω–æ–≥–æ –≤–ª–∏—è–Ω–∏—è —ç—Ñ—Ñ–µ–∫—Ç–∞ –ú–∏–ª–ª–µ—Ä–∞.&lt;/p&gt;
&lt;!-- 
&lt;a href="http://proiot.ru/blog/posts/2016/11/11/ngspicejs-kaskodnyi-usilitel/2N2222.LIB"&gt;&lt;/a&gt;
--&gt;

&lt;p&gt;–í —Å–ª–µ–¥—É—é—â–∏—Ö —Å—Ö–µ–º–∞—Ö –¥–ª—è —Å–∏–º—É–ª—è—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞—Å—å SPICE –º–æ–¥–µ–ª—å –ø–æ–ø—É–ª—è—Ä–Ω–æ–≥–æ n-p-n —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä–∞ 2N2222:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ wget -nc http://www.centralsemi.com/docs/csm/2N2222.LIB
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/11/11/ngspicejs-kaskodnyi-usilitel/cascode.sch"&gt;–∫–∞—Å–∫–æ–¥–Ω–∞—è —Å—Ö–µ–º–∞(—Å–ø—Ä–∞–≤–∞ –æ—Ç IN)&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2016/11/11/ngspicejs-kaskodnyi-usilitel/cascode.net"&gt;netlist&lt;/a&gt; | &lt;a href="https://ngspice.js.org/?gist=add2c348f915252851fa41fbd3afe97d"&gt;ngspice.js&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/11/11/ngspicejs-kaskodnyi-usilitel/show-img-cascode.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ngspice 1 -&amp;gt; source cascode.net
ngspice 2 -&amp;gt; ac dec 100 1k 50Meg
ngspice 3 -&amp;gt; plot db(out/in) db(x_out/in)
ngspice 4 -&amp;gt; op
ngspice 5 -&amp;gt; print out cp1 cp2 cp3 cp4
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–°—Ç–∞—Ç–∏—á–µ—Å–∫–æ–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ, —Ñ–∏–∫—Å–∏—Ä—É–µ–º–æ–µ –∫–æ–º–∞–Ω–¥–æ–π &lt;code&gt;op&lt;/code&gt; –≤ –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã—Ö —Ç–æ—á–∫–∞—Ö &lt;code&gt;out = 10.96302&lt;/code&gt; | &lt;code&gt;cp1 = 5.215810&lt;/code&gt; | &lt;code&gt;cp2 = 1.202128&lt;/code&gt; | &lt;code&gt;cp3 = 5.903849&lt;/code&gt; | &lt;code&gt;cp4 = 1.890720&lt;/code&gt;. –ü–æ–ø—Ä–æ–±—É–µ–º –ø–æ—Å—á–∏—Ç–∞—Ç—å:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;–ó–Ω–∞—è –∞–º–ø–ª–∏—Ç—É–¥—É –≤—Ö–æ–¥–Ω–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞ 50 –º–í &lt;a href="https://bc.js.org/"&gt;–Ω–∞–π–¥—ë–º&lt;/a&gt; –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ç–æ–∫ –±–∞–∑—ã Q1 &lt;code&gt;Ib(max) ‚âà 0.05/10k ‚âà 5*10^-6 A&lt;/code&gt;. –¢–æ–∫ –ø–æ–∫–æ—è –∫–∞—Å–∫–∞–¥–∞ —Å –¥–≤–æ–π–Ω—ã–º –∑–∞–ø–∞—Å–æ–º &lt;code&gt;Ic = Ib(max)*Œ≤ ‚âà 200*5*10^-6 = 1 –º–ê&lt;/code&gt; –ø—Ä–∏ —Ç–æ–∫–µ —Å–º–µ—â–µ–Ω–∏—è 5 –º–∫–ê&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;–ù–∞–ø—Ä—è–∂–µ–Ω–∏–µ –Ω–∞ —Å—Ç–∞–±–∏–ª–∏–∑–∏—Ä—É—é—â–µ–º —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–∏ 10-20% –æ—Ç –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –ø–∏—Ç–∞–Ω–∏—è –∏ —Ç–æ–≥–¥–∞ –µ–≥–æ –≤–µ–ª–∏—á–∏–Ω–∞ &lt;code&gt;Re = 0.1*V1/Ie = 0.1*15/(10^-3) ‚âà 1.5 –∫–û–º&lt;/code&gt; –∏ –ø–∞–¥–µ–Ω–∏–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –Ω–∞ –Ω—ë–º &lt;code&gt;Ue = I*R = 1.5 –í&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;–î–ª—è –∫–∞—Å–∫–∞–¥–∞ Q1 –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ —Å–º–µ—â–µ–Ω–∏—è &lt;code&gt;Ubias = Ue + Ube = 1.5 + 0.7 = 2.2 –í&lt;/code&gt;. –î–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä –Ω–µ –≤–ª–∏—è–ª –Ω–∞ –≤—ã—Ö–æ–¥–Ω–æ–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –¥–µ–ª–∏—Ç–µ–ª—è R2 –∏ R3 —Ç–æ–∫ —á–µ—Ä–µ–∑ —ç—Ç–∏ —Ä–µ–∑–∏—Å—Ç–æ—Ä—ã –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è –≤ –¥–µ—Å—è—Ç—å —Ä–∞–∑ –±–æ–ª—å—à–µ —Ç–æ–∫–∞ –±–∞–∑—ã —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä–∞ &lt;code&gt;Id = 10*Ib = 50 –º–∫–ê&lt;/code&gt;. –¢–æ–≥–¥–∞ &lt;code&gt;R3 = Ubias/Id = 2.2/(5*10^-5) ‚âà 43 –∫–û–º&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;–ë—É–¥–µ–º –∏—Å—Ö–æ–¥–∏—Ç—å –∏–∑ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –Ω–∞ –∫–æ–ª–ª–µ–∫—Ç–æ—Ä–µ Q2 &lt;code&gt;Uc = V1*2/3 = 10 –í&lt;/code&gt; —Ç–æ–≥–¥–∞ &lt;code&gt;Rc = V1/(3*Ic) = 15/(3*10^-3) ‚âà 5.1 –∫–û–º&lt;/code&gt;. –°—É–º–º–∞—Ä–Ω–æ–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –Ω–∞ –æ–±–æ–∏—Ö –ø–µ—Ä–µ—Ö–æ–¥–∞—Ö –∫–æ–ª–ª–µ–∫—Ç–æ—Ä-—ç–º–∏—Ç—Ç–µ—Ä Q1 –∏ Q2 &lt;code&gt;Us = Uc - Ue = 10 - 1.5 = 8.5 –í&lt;/code&gt; –∏ –µ—Å–ª–∏ –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è —Ä–∞—Å—á—ë—Ç–æ–≤ –ø—Ä–µ–¥–ø–æ–ª–æ–∂–∏—Ç—å —á—Ç–æ —ç—Ç–∏ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è —Ä–∞–≤–Ω—ã —Ç–æ–≥–¥–∞ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ —Å–º–µ—â–µ–Ω–∏—è –¥–ª—è –∫–∞—Å–∫–∞–¥–∞ Q2 &lt;code&gt;Ubias = (Uc - Us/2) + Ube = (10-8.5/2)+0.7 = 6.45 –í&lt;/code&gt;. –¢–æ–≥–¥–∞ &lt;code&gt;R1 = (V1-Ubias)/Id = (15-6.45)/(5*10^-5) ‚âà 169 –∫–û–º&lt;/code&gt; –∏ –∑–Ω–∞—è —Ä–∞–∑–Ω–æ—Å—Ç—å –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–π Ubias &lt;code&gt;R2 = ŒîUbias/Id = (6.45-2.5)/(5*10^-5) ‚âà 82 –∫–û–º&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;–î–ª—è —Å–Ω—è—Ç–∏—è &lt;a href="http://proiot.ru/blog/posts/2016/10/29/ngspicejs-rc-filtr-nizhnikh-chastot/"&gt;–ê–ß–•&lt;/a&gt; –∞–º–ø–ª–∏—Ç—É–¥–∞ –≤—Ö–æ–¥–Ω–æ–≥–æ –≤—ã–±—Ä–∞–Ω–∞ —Å–∏–≥–Ω–∞–ª–∞ Vin 50–º–í, –Ω–∞ –∫–æ—Ç–æ—Ä—ã–π –º—ã —Ä–∞—Å—Å—á–∏—Ç–∞–ª–∏ —Ä–∞–Ω–µ–µ —Å—Ö–µ–º—É —Å &lt;a href="http://proiot.ru/blog/posts/2016/11/07/ngspicejs-usilitelnyi-kaskad-s-obshchim-emitterom/"&gt;–û–≠&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/11/11/ngspicejs-kaskodnyi-usilitel/cascode-canvas.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–¢–æ–≥–¥–∞ –∫–∞–∫ —Å–æ–≥–ª–∞—Å–Ω–æ –≥—Ä–∞—Ñ–∏–∫—É –ê–ß–• —É –∫–∞—Å–∫–æ–¥–Ω–æ–≥–æ —É—Å–∏–ª–∏—Ç–µ–ª—è –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —É—Å–∏–ª–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ –Ω–∞—á–∏–Ω–∞–µ—Ç –∑–∞–≤–∞–ª–∏–≤–∞—Ç—å—Å—è –Ω–∞ —á–∞—Å—Ç–æ—Ç–µ 1–ú–ì—Ü/30–¥–ë, –∫–∞—Å–∫–∞–¥ —Å –û–≠ –Ω–∞ —ç—Ç–æ–π —á–∞—Å—Ç–æ—Ç–µ —É–∂–µ —á—É–≤—Å—Ç–≤—É–µ—Ç —Å–µ–±—è –æ—á–µ–Ω—å –ø–ª–æ—Ö–æ &amp;lt; 10 –¥–ë.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/11/11/ngspicejs-kaskodnyi-usilitel/cascode-canvas-tran.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ngspice 1 -&amp;gt; source cascode.net
ngspice 2 -&amp;gt; alter @vin[sin] [ 0 50m 1meg ]
ngspice 3 -&amp;gt; tran 10n 5u
ngspice 4 -&amp;gt; plot v(out) v(x_out)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ö–æ–Ω—Ç—Ä–æ–ª—å–Ω–∞—è &lt;a href="https://ngspice.js.org/?gist=764af0bb80c15e3de059ec33b65471fe"&gt;–ø—Ä–æ–≤–µ—Ä–∫–∞&lt;/a&gt; - –¥–∞–∂–µ –≤–∏–∑—É–∞–ª—å–Ω–æ –≤–∏–¥–Ω–æ —á—Ç–æ –Ω–∏–∂–Ω—è—è –ø–æ–ª—É–≤–æ–ª–Ω–∞ –Ω–µ—Å–∏–º–º–µ—Ç—Ä–∏—á–Ω–∞ –ø–æ –æ—Ç–Ω–æ—à–µ–Ω–∏—é –∫ –≤–µ—Ä—Ö–Ω–µ–π, —Ç.–µ. —Å–∏–≥–Ω–∞–ª –Ω–µ–º–Ω–æ–≥–æ –Ω–æ –∏—Å–∫–∞–∂–µ–Ω. –ó–∞—á–∞—Å—Ç—É—é –¥–ª—è –≤—ã—Å–æ–∫–æ—á–∞—Å—Ç–æ—Ç–Ω–æ–≥–æ —Ç—Ä–∞–∫—Ç–∞ —ç—Ç–æ –Ω–µ —Å—Ç–æ–ª—å –∫—Ä–∏—Ç–∏—á–Ω–æ, –ø–æ—Å–∫–æ–ª—å–∫—É –≤–∞–∂–Ω–∞ –Ω–µ —Å—Ç–æ–ª—å–∫–æ —Ñ–æ—Ä–º–∞ —Å–∏–≥–Ω–∞–ª–∞ —Å–∫–æ–ª—å–∫–æ –µ–≥–æ –ø—Ä–æ–∏–∑–≤–æ–¥–Ω–∞—è - –Ω–∞–ø—Ä–∏–º–µ—Ä –∞–º–ø–ª–∏—Ç—É–¥—ã (–∞–º–ø–ª–∏—Ç—É–¥–Ω–∞—è –º–æ–¥—É–ª—è—Ü–∏—è) –∏–ª–∏ —á–∞—Å—Ç–æ—Ç—ã (—á–∞—Å—Ç–æ—Ç–Ω–∞—è –º–æ–¥—É–ª—è—Ü–∏—è). –ü—Ä–∏ —Ä–∞—Å—á—ë—Ç–µ —Ä–∞–±–æ—á–µ–π —Ç–æ—á–∫–∏ –º—ã –∏—Å—Ö–æ–¥–∏–ª–∏ –∏–∑ —Ä–∞–≤–Ω—ã—Ö –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–π –Ω–∞ Q2 –∏ Q1, —Å—Ç–æ–∏—Ç –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –æ—Ç–¥–∞—Ç—å Q2 –±–æ–ª—å—à–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –∏ —Å–Ω–æ–≤–∞ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –∏—Å–∫–∞–∂–µ–Ω–∏–π. &lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/11/13/ngspicejs-generatory-kolebanii-na-tranzistorakh/"&gt;–î–∞–ª–µ–µ&lt;/a&gt; –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã –∫–æ–ª–µ–±–∞–Ω–∏–π –Ω–∞ —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä–∞—Ö.&lt;/p&gt;</content><category term="gEDA"></category><category term="ngspice"></category></entry><entry><title>NGSPICE.js - —É—Å–∏–ª–∏—Ç–µ–ª—å–Ω—ã–π –∫–∞—Å–∫–∞–¥ —Å –æ–±—â–µ–π –±–∞–∑–æ–π</title><link href="http://proiot.ru/blog/posts/2016/11/10/ngspicejs-usilitelnyi-kaskad-s-obshchei-bazoi/" rel="alternate"></link><published>2016-11-10T00:00:00+02:00</published><updated>2016-11-10T00:00:00+02:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2016-11-10:/blog/posts/2016/11/10/ngspicejs-usilitelnyi-kaskad-s-obshchei-bazoi/</id><summary type="html">&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/10/28/vvedenie-v-simuliatsiiu-elektricheskikh-skhem-s-pomoshchiu-ngspicejs/"&gt;–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º&lt;/a&gt; –æ—Å–≤–∞–∏–≤–∞—Ç—å NGSPICE.&lt;/p&gt;
&lt;p&gt;–ü—Ä–∏ —Å—Ö–µ–º–µ –≤–∫–ª—é—á–µ–Ω–∏—è &lt;a href="http://proiot.ru/blog/posts/2016/11/02/ngspicejs-bipoliarnyi-tranzistor/"&gt;–±–∏–ø–æ–ª—è—Ä–Ω–æ–≥–æ —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä–∞&lt;/a&gt; —Å –æ–±—â–µ–π –±–∞–∑–æ–π (–û–ë) –∫–∞—Å–∫–∞–¥ —É—Å–∏–ª–∏–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ —Ç–æ–≥–¥–∞ –∫–∞–∫ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –ø–µ—Ä–µ–¥–∞—á–∏ –ø–æ —Ç–æ–∫—É –±–ª–∏–∑–æ–∫ –∫ –µ–¥–∏–Ω–∏—Ü–µ (–ø–æ —Ñ–∞–∫—Ç—É –Ω–µ–º–Ω–æ–≥–æ –º–µ–Ω—å—à–µ). –í—Ö–æ–¥–Ω–æ–π —Å–∏–≥–Ω–∞–ª –ø–æ–¥–∞—ë—Ç—Å—è –Ω–∞ —ç–º–∏—Ç—Ç–µ—Ä, –∞ –≤—ã—Ö–æ–¥–Ω–æ–π —Å–Ω–∏–º–∞–µ—Ç—Å—è —Å –∫–æ–ª–ª–µ–∫—Ç–æ—Ä–∞. –û—Å–Ω–æ–≤–Ω—ã–µ –æ—Ç–ª–∏—á–∏—è –æ—Ç –∫–∞—Å–∫–∞–¥–∞ —Å &lt;a href="http://proiot.ru/blog/posts/2016/11/07/ngspicejs-usilitelnyi-kaskad-s-obshchim-emitterom/"&gt;–û–≠&lt;/a&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;–º–∞–ª–æ–µ &lt;a href="http://proiot.ru/blog/posts/2016/11/04/ngspicejs-soglasovanie-istochnika-s-nagruzkoi/"&gt;–≤—Ö–æ–¥–Ω–æ–µ&lt;/a&gt; –∏ –±–æ–ª—å—à–æ–µ –≤—ã—Ö–æ–¥–Ω–æ–µ ‚Ä¶&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;</summary><content type="html">&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/10/28/vvedenie-v-simuliatsiiu-elektricheskikh-skhem-s-pomoshchiu-ngspicejs/"&gt;–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º&lt;/a&gt; –æ—Å–≤–∞–∏–≤–∞—Ç—å NGSPICE.&lt;/p&gt;
&lt;p&gt;–ü—Ä–∏ —Å—Ö–µ–º–µ –≤–∫–ª—é—á–µ–Ω–∏—è &lt;a href="http://proiot.ru/blog/posts/2016/11/02/ngspicejs-bipoliarnyi-tranzistor/"&gt;–±–∏–ø–æ–ª—è—Ä–Ω–æ–≥–æ —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä–∞&lt;/a&gt; —Å –æ–±—â–µ–π –±–∞–∑–æ–π (–û–ë) –∫–∞—Å–∫–∞–¥ —É—Å–∏–ª–∏–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ —Ç–æ–≥–¥–∞ –∫–∞–∫ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –ø–µ—Ä–µ–¥–∞—á–∏ –ø–æ —Ç–æ–∫—É –±–ª–∏–∑–æ–∫ –∫ –µ–¥–∏–Ω–∏—Ü–µ (–ø–æ —Ñ–∞–∫—Ç—É –Ω–µ–º–Ω–æ–≥–æ –º–µ–Ω—å—à–µ). –í—Ö–æ–¥–Ω–æ–π —Å–∏–≥–Ω–∞–ª –ø–æ–¥–∞—ë—Ç—Å—è –Ω–∞ —ç–º–∏—Ç—Ç–µ—Ä, –∞ –≤—ã—Ö–æ–¥–Ω–æ–π —Å–Ω–∏–º–∞–µ—Ç—Å—è —Å –∫–æ–ª–ª–µ–∫—Ç–æ—Ä–∞. –û—Å–Ω–æ–≤–Ω—ã–µ –æ—Ç–ª–∏—á–∏—è –æ—Ç –∫–∞—Å–∫–∞–¥–∞ —Å &lt;a href="http://proiot.ru/blog/posts/2016/11/07/ngspicejs-usilitelnyi-kaskad-s-obshchim-emitterom/"&gt;–û–≠&lt;/a&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;–º–∞–ª–æ–µ &lt;a href="http://proiot.ru/blog/posts/2016/11/04/ngspicejs-soglasovanie-istochnika-s-nagruzkoi/"&gt;–≤—Ö–æ–¥–Ω–æ–µ&lt;/a&gt; –∏ –±–æ–ª—å—à–æ–µ –≤—ã—Ö–æ–¥–Ω–æ–µ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;–∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –ø–µ—Ä–µ–¥–∞—á–∏ –ø–æ —Ç–æ–∫—É –±–ª–∏–∑–æ–∫ –∫ –µ–¥–∏–Ω–∏—Ü–µ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;—Ñ–∞–∑—ã –≤—Ö–æ–¥–Ω–æ–≥–æ –∏ –≤—ã—Ö–æ–¥–Ω–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞ —Å–æ–≤–ø–∞–¥–∞—é—Ç&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;–æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç ¬´–ø–∞—Ä–∞–∑–∏—Ç–Ω–∞—è¬ª –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å –Ω–∞ –≤—ã—Å–æ–∫–∏—Ö —á–∞—Å—Ç–æ—Ç–∞—Ö —Å –≤—ã—Ö–æ–¥–∞ –Ω–∞ –≤—Ö–æ–¥ —á–µ—Ä–µ–∑ —ë–º–∫–æ—Å—Ç—å –º–µ–∂–¥—É –±–∞–∑–æ–π –∏ –∫–æ–ª–ª–µ–∫—Ç–æ—Ä–æ–º (—ë–º–∫–æ—Å—Ç—å &lt;a href="http://proiot.ru/blog/posts/2016/11/11/ngspicejs-kaskodnyi-usilitel/"&gt;–ú–∏–ª–ª–µ—Ä–∞&lt;/a&gt;), –ø–æ—ç—Ç–æ–º—É —Å—Ö–µ–º–∞ —Å –æ–±—â–µ–π –±–∞–∑–æ–π –Ω–∞–∏–±–æ–ª–µ–µ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –≤—ã—Å–æ–∫–æ—á–∞—Å—Ç–æ—Ç–Ω—ã—Ö —É—Å–∏–ª–∏—Ç–µ–ª–µ–π&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- 
&lt;a href="http://proiot.ru/blog/posts/2016/11/10/ngspicejs-usilitelnyi-kaskad-s-obshchei-bazoi/2N2222.LIB"&gt;&lt;/a&gt;
--&gt;

&lt;p&gt;–í —Å–ª–µ–¥—É—é—â–∏—Ö —Å—Ö–µ–º–∞—Ö –¥–ª—è —Å–∏–º—É–ª—è—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞—Å—å SPICE –º–æ–¥–µ–ª—å –ø–æ–ø—É–ª—è—Ä–Ω–æ–≥–æ n-p-n —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä–∞ 2N2222:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ wget -nc http://www.centralsemi.com/docs/csm/2N2222.LIB
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/11/10/ngspicejs-usilitelnyi-kaskad-s-obshchei-bazoi/simple.sch"&gt;–ø—Ä–æ—Å—Ç–µ–π—à–∏–π –∫–∞—Å–∫–∞–¥ —Å –û–ë&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2016/11/10/ngspicejs-usilitelnyi-kaskad-s-obshchei-bazoi/simple.net"&gt;netlist&lt;/a&gt; | &lt;a href="https://ngspice.js.org/?gist=44fd7de297163ea25acb498aecc87003"&gt;ngspice.js&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/11/10/ngspicejs-usilitelnyi-kaskad-s-obshchei-bazoi/show-img-simple.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ngspice 1 -&amp;gt; source simple.net
ngspice 2 -&amp;gt; dc i1 0 2.5m 5u
ngspice 3 -&amp;gt; plot -i(v1)
ngspice 4 -&amp;gt; alter i1 0.1m
ngspice 5 -&amp;gt; op
ngspice 6 -&amp;gt; show q1
ngspice 7 -&amp;gt; alter i1 2m
ngspice 8 -&amp;gt; op
ngspice 9 -&amp;gt; show q1
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ö–æ–º–∞–Ω–¥–∞ &lt;code&gt;op&lt;/code&gt; –ø–æ –¥–≤—É–º —Ç–æ—á–∫–∞–º —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è - ie:-0.000100001 | ic:9.90469e-05 | vbe:0.633027 –∏ ie:-0.00200004 | ic:0.00198885 | vbe:0.712851&lt;/p&gt;
&lt;p&gt;–£—Å–∏–ª–µ–Ω–∏–µ –ø–æ —Ç–æ–∫—É –∫–∞—Å–∫–∞–¥–∞ c –û–ë &lt;a href="https://bc.js.org/"&gt;‚âà 1 ‚âà 0 –¥–ë&lt;/a&gt; &lt;code&gt;(0.00198885-9.90469*10^-05)/(0.00200004-0.000100001) ‚âà 0.995&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;–£—Å–∏–ª–µ–Ω–∏–µ –ø–æ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—é &lt;a href="https://bc.js.org/"&gt;‚âà 111&lt;/a&gt; &lt;code&gt;4700*(0.00198885-9.90469*10^-05)/(0.712851-0.633027)&lt;/code&gt; &lt;a href="https://bc.js.org/"&gt;‚âà 40.9 –¥–ë&lt;/a&gt; &lt;code&gt;20*log(111)=20*l(111)/l(10)&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/11/04/ngspicejs-soglasovanie-istochnika-s-nagruzkoi/"&gt;–í—Ö–æ–¥–Ω–æ–µ&lt;/a&gt; —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ &lt;a href="https://bc.js.org/"&gt;‚âà 42 –û–º&lt;/a&gt; &lt;code&gt;(0.712851-0.633027)/(0.00200004-0.000100001)&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;–í—ã—Ö–æ–¥–Ω–æ–µ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ –æ—á–µ–≤–∏–¥–Ω–æ ‚âà Rc ‚âà 4.7&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/11/10/ngspicejs-usilitelnyi-kaskad-s-obshchei-bazoi/simple-canvas.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–ü–æ –∞–Ω–∞–ª–æ–≥–∏–∏ —Å &lt;a href="http://proiot.ru/blog/posts/2016/11/07/ngspicejs-usilitelnyi-kaskad-s-obshchim-emitterom/"&gt;–û–≠&lt;/a&gt; –¥–ª—è —Ç–æ–≥–æ —Ç–æ–±—ã —É—Å–∏–ª–∏–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–π (—Å–∏–Ω—É—Å–æ–∏–¥–∞–ª—å–Ω—ã–π) —Å–∏–≥–Ω–∞–ª –≤ —Å—Ö–µ–º—É –æ–±—ã—á–Ω–æ –¥–æ–±–∞–≤–ª—è—é—Ç –≥–∞–ª—å–≤–∞–Ω–∏—á–µ—Å–∫—É—é —Ä–∞–∑–≤—è–∑–∫—É –ø–æ –≤—Ö–æ–¥—É –∏ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ —Å–º–µ—â–µ–Ω–∏—è.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/11/11/ngspicejs-kaskodnyi-usilitel/"&gt;–î–∞–ª–µ–µ&lt;/a&gt; –∫–∞—Å–∫–æ–¥–Ω—ã–π —É—Å–∏–ª–∏—Ç–µ–ª—å.&lt;/p&gt;</content><category term="gEDA"></category><category term="ngspice"></category></entry><entry><title>NGSPICE.js - —É—Å–∏–ª–∏—Ç–µ–ª—å–Ω—ã–π –∫–∞—Å–∫–∞–¥ —Å –æ–±—â–∏–º –∫–æ–ª–ª–µ–∫—Ç–æ—Ä–æ–º</title><link href="http://proiot.ru/blog/posts/2016/11/09/ngspicejs-usilitelnyi-kaskad-s-obshchim-kollektorom/" rel="alternate"></link><published>2016-11-09T00:00:00+02:00</published><updated>2016-11-09T00:00:00+02:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2016-11-09:/blog/posts/2016/11/09/ngspicejs-usilitelnyi-kaskad-s-obshchim-kollektorom/</id><summary type="html">&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/10/28/vvedenie-v-simuliatsiiu-elektricheskikh-skhem-s-pomoshchiu-ngspicejs/"&gt;–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º&lt;/a&gt; –æ—Å–≤–∞–∏–≤–∞—Ç—å NGSPICE.&lt;/p&gt;
&lt;p&gt;–ü—Ä–∏ —Å—Ö–µ–º–µ –≤–∫–ª—é—á–µ–Ω–∏—è &lt;a href="http://proiot.ru/blog/posts/2016/11/02/ngspicejs-bipoliarnyi-tranzistor/"&gt;–±–∏–ø–æ–ª—è—Ä–Ω–æ–≥–æ —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä–∞&lt;/a&gt; —Å –æ–±—â–∏–º –∫–æ–ª–ª–µ–∫—Ç–æ—Ä–æ–º (–û–ö) –∫–∞—Å–∫–∞–¥ —É—Å–∏–ª–∏–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Ç–æ–∫ —Ç–æ–≥–¥–∞ –∫–∞–∫ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –ø–µ—Ä–µ–¥–∞—á–∏ –ø–æ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—é –±–ª–∏–∑–æ–∫ –∫ –µ–¥–∏–Ω–∏—Ü–µ (—Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏ –Ω–µ–º–Ω–æ–≥–æ –º–µ–Ω—å—à–µ). –ü–æ—Å–∫–æ–ª—å–∫—É –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –Ω–∞ –≤—ã—Ö–æ–¥–µ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –Ω–∞ –≤—Ö–æ–¥–µ —Ç–æ —Å—Ö–µ–º—É –≤–∫–ª—é—á–µ–Ω–∏—è —Å –û–ö —á–∞—Å—Ç–æ –Ω–∞–∑—ã–≤–∞—é—Ç &lt;em&gt;—ç–º–∏—Ç—Ç–µ—Ä–Ω—ã–º –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ–ª–µ–º&lt;/em&gt;. –û—Å–Ω–æ–≤–Ω—ã–µ –æ—Ç–ª–∏—á–∏—è –æ—Ç –∫–∞—Å–∫–∞–¥–∞ —Å ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/10/28/vvedenie-v-simuliatsiiu-elektricheskikh-skhem-s-pomoshchiu-ngspicejs/"&gt;–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º&lt;/a&gt; –æ—Å–≤–∞–∏–≤–∞—Ç—å NGSPICE.&lt;/p&gt;
&lt;p&gt;–ü—Ä–∏ —Å—Ö–µ–º–µ –≤–∫–ª—é—á–µ–Ω–∏—è &lt;a href="http://proiot.ru/blog/posts/2016/11/02/ngspicejs-bipoliarnyi-tranzistor/"&gt;–±–∏–ø–æ–ª—è—Ä–Ω–æ–≥–æ —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä–∞&lt;/a&gt; —Å –æ–±—â–∏–º –∫–æ–ª–ª–µ–∫—Ç–æ—Ä–æ–º (–û–ö) –∫–∞—Å–∫–∞–¥ —É—Å–∏–ª–∏–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Ç–æ–∫ —Ç–æ–≥–¥–∞ –∫–∞–∫ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –ø–µ—Ä–µ–¥–∞—á–∏ –ø–æ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—é –±–ª–∏–∑–æ–∫ –∫ –µ–¥–∏–Ω–∏—Ü–µ (—Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏ –Ω–µ–º–Ω–æ–≥–æ –º–µ–Ω—å—à–µ). –ü–æ—Å–∫–æ–ª—å–∫—É –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –Ω–∞ –≤—ã—Ö–æ–¥–µ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –Ω–∞ –≤—Ö–æ–¥–µ —Ç–æ —Å—Ö–µ–º—É –≤–∫–ª—é—á–µ–Ω–∏—è —Å –û–ö —á–∞—Å—Ç–æ –Ω–∞–∑—ã–≤–∞—é—Ç &lt;em&gt;—ç–º–∏—Ç—Ç–µ—Ä–Ω—ã–º –ø–æ–≤—Ç–æ—Ä–∏—Ç–µ–ª–µ–º&lt;/em&gt;. –û—Å–Ω–æ–≤–Ω—ã–µ –æ—Ç–ª–∏—á–∏—è –æ—Ç –∫–∞—Å–∫–∞–¥–∞ —Å &lt;a href="http://proiot.ru/blog/posts/2016/11/07/ngspicejs-usilitelnyi-kaskad-s-obshchim-emitterom/"&gt;–û–≠&lt;/a&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;100% –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å –ø–æ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—é  –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–º–µ–Ω—å—à–∏—Ç—å –Ω–µ–ª–∏–Ω–µ–π–Ω—ã–µ –∏—Å–∫–∞–∂–µ–Ω–∏—è&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;–±–æ–ª—å—à–æ–µ &lt;a href="http://proiot.ru/blog/posts/2016/11/04/ngspicejs-soglasovanie-istochnika-s-nagruzkoi/"&gt;–≤—Ö–æ–¥–Ω–æ–µ&lt;/a&gt; –∏ –º–∞–ª–æ–µ –≤—ã—Ö–æ–¥–Ω–æ–µ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;–∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –ø–µ—Ä–µ–¥–∞—á–∏ –ø–æ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—é –±–ª–∏–∑–æ–∫ –∫ –µ–¥–∏–Ω–∏—Ü–µ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;—Ñ–∞–∑—ã –≤—Ö–æ–¥–Ω–æ–≥–æ –∏ –≤—ã—Ö–æ–¥–Ω–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞ —Å–æ–≤–ø–∞–¥–∞—é—Ç&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;!-- 
&lt;a href="http://proiot.ru/blog/posts/2016/11/09/ngspicejs-usilitelnyi-kaskad-s-obshchim-kollektorom/2N2222.LIB"&gt;&lt;/a&gt;
--&gt;

&lt;p&gt;–í —Å–ª–µ–¥—É—é—â–∏—Ö —Å—Ö–µ–º–∞—Ö –¥–ª—è —Å–∏–º—É–ª—è—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞—Å—å SPICE –º–æ–¥–µ–ª—å –ø–æ–ø—É–ª—è—Ä–Ω–æ–≥–æ n-p-n —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä–∞ 2N2222:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ wget -nc http://www.centralsemi.com/docs/csm/2N2222.LIB
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/11/09/ngspicejs-usilitelnyi-kaskad-s-obshchim-kollektorom/simple.sch"&gt;–ø—Ä–æ—Å—Ç–µ–π—à–∏–π –∫–∞—Å–∫–∞–¥ —Å –û–ö&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2016/11/09/ngspicejs-usilitelnyi-kaskad-s-obshchim-kollektorom/simple.net"&gt;netlist&lt;/a&gt; | &lt;a href="https://ngspice.js.org/?gist=5ce99532a7aa87358fcdfc949e821a94"&gt;ngspice.js&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/11/09/ngspicejs-usilitelnyi-kaskad-s-obshchim-kollektorom/show-img-simple.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ngspice 1 -&amp;gt; source simple.net
ngspice 2 -&amp;gt; set temp=0
ngspice 3 -&amp;gt; dc vin 0 11 0.1
ngspice 4 -&amp;gt; set temp=50
ngspice 5 -&amp;gt; dc vin 0 11 0.1
ngspice 6 -&amp;gt; alter r 1k
ngspice 7 -&amp;gt; dc vin 0 11 0.1
ngspice 8 -&amp;gt; plot dc1.v(out) dc2.v(out) dc3.v(out)
ngspice 9 -&amp;gt; alter vin 1
ngspice 10 -&amp;gt; op
ngspice 11 -&amp;gt; show q1
ngspice 12 -&amp;gt; alter vin 9
ngspice 13 -&amp;gt; op
ngspice 14 -&amp;gt; show q1
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ö–æ–º–∞–Ω–¥–∞ &lt;code&gt;op&lt;/code&gt; –ø–æ –¥–≤—É–º —Ç–æ—á–∫–∞–º –∞–∫—Ç–∏–≤–Ω–æ–≥–æ (–ª–∏–Ω–µ–π–Ω–æ–≥–æ) —Ä–µ–∂–∏–º–∞ —Ä–∞–±–æ—Ç—ã —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä–∞ —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è - ie:-0.000373456 | ib:2.29529e-06 –∏ ie:-0.00828277 | ib:3.71691e-05&lt;/p&gt;
&lt;p&gt;–£—Å–∏–ª–µ–Ω–∏–µ –ø–æ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—é –∫–∞—Å–∫–∞–¥–∞ c –û–ö &lt;a href="https://bc.js.org/"&gt;‚âà 1 ‚âà 0 –¥–ë&lt;/a&gt; &lt;code&gt;1000*(0.00828277-0.000373456)/(9-1) ‚âà 0.9887&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;–£—Å–∏–ª–µ–Ω–∏–µ –ø–æ —Ç–æ–∫—É &lt;a href="https://bc.js.org/"&gt;‚âà 227&lt;/a&gt; &lt;code&gt;(0.00828277-0.000373456)/(3.71691*10^-05-2.29529*10^-06)&lt;/code&gt; &lt;a href="https://bc.js.org/"&gt;‚âà 47 –¥–ë&lt;/a&gt; &lt;code&gt;20*log(227)=20*l(227)/l(10)&lt;/code&gt; –∏–ª–∏ –∏—Å—Ö–æ–¥—è –∏–∑ &lt;a href="http://proiot.ru/blog/posts/2016/10/28/vvedenie-v-simuliatsiiu-elektricheskikh-skhem-s-pomoshchiu-ngspicejs/"&gt;–ø–µ—Ä–≤–æ–≥–æ –∑–∞–∫–æ–Ω–∞ –ö–∏—Ä—Ö–≥–æ—Ñ–∞&lt;/a&gt; &lt;code&gt;Ie/Ib = (Ic + Ib)/Ib = Œ≤ + 1&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/11/04/ngspicejs-soglasovanie-istochnika-s-nagruzkoi/"&gt;–í—Ö–æ–¥–Ω–æ–µ&lt;/a&gt; —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ &lt;a href="https://bc.js.org/"&gt;‚âà 230 –∫–û–º&lt;/a&gt; &lt;code&gt;(9-1)/(3.71691*10^-05-2.29529*10^-06)&lt;/code&gt; –∏–ª–∏ —É–ø—Ä–æ—â—ë–Ω–Ω–æ &lt;code&gt;Œ≤*R = (227-1)*1000 ‚âà 230 –∫–û–º&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;–í—ã—Ö–æ–¥–Ω–æ–µ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ –æ—á–µ–≤–∏–¥–Ω–æ ‚âà R ‚âà 1 –∫–û–º (42 –û–º)&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/11/09/ngspicejs-usilitelnyi-kaskad-s-obshchim-kollektorom/simple-canvas.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–ü–æ –∞–Ω–∞–ª–æ–≥–∏–∏ —Å &lt;a href="http://proiot.ru/blog/posts/2016/11/07/ngspicejs-usilitelnyi-kaskad-s-obshchim-emitterom/"&gt;–û–≠&lt;/a&gt; –¥–ª—è —Ç–æ–≥–æ —Ç–æ–±—ã —É—Å–∏–ª–∏–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–π (—Å–∏–Ω—É—Å–æ–∏–¥–∞–ª—å–Ω—ã–π) —Å–∏–≥–Ω–∞–ª –≤ —Å—Ö–µ–º—É –æ–±—ã—á–Ω–æ –¥–æ–±–∞–≤–ª—è—é—Ç –≥–∞–ª—å–≤–∞–Ω–∏—á–µ—Å–∫—É—é —Ä–∞–∑–≤—è–∑–∫—É –ø–æ –≤—Ö–æ–¥—É –∏ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ —Å–º–µ—â–µ–Ω–∏—è.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/11/10/ngspicejs-usilitelnyi-kaskad-s-obshchei-bazoi/"&gt;–î–∞–ª–µ–µ&lt;/a&gt; —É—Å–∏–ª–∏—Ç–µ–ª—å–Ω—ã–π –∫–∞—Å–∫–∞–¥ —Å –æ–±—â–µ–π –±–∞–∑–æ–π.&lt;/p&gt;</content><category term="gEDA"></category><category term="ngspice"></category></entry><entry><title>NGSPICE.js - —É—Å–∏–ª–∏—Ç–µ–ª—å–Ω—ã–π –∫–∞—Å–∫–∞–¥ —Å –æ–±—â–∏–º —ç–º–∏—Ç—Ç–µ—Ä–æ–º</title><link href="http://proiot.ru/blog/posts/2016/11/07/ngspicejs-usilitelnyi-kaskad-s-obshchim-emitterom/" rel="alternate"></link><published>2016-11-07T00:00:00+02:00</published><updated>2016-11-07T00:00:00+02:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2016-11-07:/blog/posts/2016/11/07/ngspicejs-usilitelnyi-kaskad-s-obshchim-emitterom/</id><summary type="html">&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/10/28/vvedenie-v-simuliatsiiu-elektricheskikh-skhem-s-pomoshchiu-ngspicejs/"&gt;–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º&lt;/a&gt; –æ—Å–≤–∞–∏–≤–∞—Ç—å NGSPICE.&lt;/p&gt;
&lt;p&gt;–ü—Ä–∏ —Å—Ö–µ–º–µ –≤–∫–ª—é—á–µ–Ω–∏—è &lt;a href="http://proiot.ru/blog/posts/2016/11/02/ngspicejs-bipoliarnyi-tranzistor/"&gt;–±–∏–ø–æ–ª—è—Ä–Ω–æ–≥–æ —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä–∞&lt;/a&gt; —Å –æ–±—â–∏–º —ç–º–∏—Ç—Ç–µ—Ä–æ–º (–û–≠) —É—Å–∏–ª–∏—Ç–µ–ª—å–Ω—ã–π –∫–∞—Å–∫–∞–¥ —É—Å–∏–ª–∏–≤–∞–µ—Ç –∫–∞–∫ —Ç–æ–∫ —Ç–∞–∫ –∏ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ, —Ç.–µ. –¥–∞–Ω–Ω–æ–µ –≤–∫–ª—é—á–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –Ω–∞–∏–±–æ–ª—å—à–µ–µ —É—Å–∏–ª–µ–Ω–∏–µ –ø–æ –º–æ—â–Ω–æ—Å—Ç–∏. –ö –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∞–º —Ç–∞–∫–æ–π —Å—Ö–µ–º—ã —Å—Ç–æ–∏—Ç –æ—Ç–Ω–µ—Å—Ç–∏ –Ω–µ–ª–∏–Ω–µ–π–Ω—ã–µ –∏—Å–∫–∞–∂–µ–Ω–∏—è —Å–∏–≥–Ω–∞–ª–∞ (–±–æ–ª—å—à–µ, —á–µ–º –≤ —Å—Ö–µ–º–∞—Ö —Å –æ–±—â–µ–π –±–∞–∑–æ–π –∏–ª–∏ —Å –æ–±—â–∏–º ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/10/28/vvedenie-v-simuliatsiiu-elektricheskikh-skhem-s-pomoshchiu-ngspicejs/"&gt;–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º&lt;/a&gt; –æ—Å–≤–∞–∏–≤–∞—Ç—å NGSPICE.&lt;/p&gt;
&lt;p&gt;–ü—Ä–∏ —Å—Ö–µ–º–µ –≤–∫–ª—é—á–µ–Ω–∏—è &lt;a href="http://proiot.ru/blog/posts/2016/11/02/ngspicejs-bipoliarnyi-tranzistor/"&gt;–±–∏–ø–æ–ª—è—Ä–Ω–æ–≥–æ —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä–∞&lt;/a&gt; —Å –æ–±—â–∏–º —ç–º–∏—Ç—Ç–µ—Ä–æ–º (–û–≠) —É—Å–∏–ª–∏—Ç–µ–ª—å–Ω—ã–π –∫–∞—Å–∫–∞–¥ —É—Å–∏–ª–∏–≤–∞–µ—Ç –∫–∞–∫ —Ç–æ–∫ —Ç–∞–∫ –∏ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ, —Ç.–µ. –¥–∞–Ω–Ω–æ–µ –≤–∫–ª—é—á–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –Ω–∞–∏–±–æ–ª—å—à–µ–µ —É—Å–∏–ª–µ–Ω–∏–µ –ø–æ –º–æ—â–Ω–æ—Å—Ç–∏. –ö –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∞–º —Ç–∞–∫–æ–π —Å—Ö–µ–º—ã —Å—Ç–æ–∏—Ç –æ—Ç–Ω–µ—Å—Ç–∏ –Ω–µ–ª–∏–Ω–µ–π–Ω—ã–µ –∏—Å–∫–∞–∂–µ–Ω–∏—è —Å–∏–≥–Ω–∞–ª–∞ (–±–æ–ª—å—à–µ, —á–µ–º –≤ —Å—Ö–µ–º–∞—Ö —Å –æ–±—â–µ–π –±–∞–∑–æ–π –∏–ª–∏ —Å –æ–±—â–∏–º –∫–æ–ª–ª–µ–∫—Ç–æ—Ä–æ–º) –∏ —Ç–æ —á—Ç–æ –Ω–∞ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ —É—Å–∏–ª–∏—Ç–µ–ª—è –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ–µ –≤–ª–∏—è–Ω–∏–µ –æ–∫–∞–∑—ã–≤–∞—é—Ç –≤–Ω–µ—à–Ω–∏–µ —Ñ–∞–∫—Ç–æ—Ä—ã, —Ç–∞–∫–∏–µ –∫–∞–∫ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –ø–∏—Ç–∞–Ω–∏—è –∏–ª–∏ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –æ–∫—Ä—É–∂–∞—é—â–µ–π —Å—Ä–µ–¥—ã. –û–±—ã—á–Ω–æ –¥–ª—è –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏–∏ —ç—Ç–∏—Ö —Ñ–∞–∫—Ç–æ—Ä–æ–≤ –ø—Ä–∏–º–µ–Ω—è—é—Ç –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—É—é –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å, –Ω–æ –æ–Ω–∞ —Å–Ω–∏–∂–∞–µ—Ç –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —É—Å–∏–ª–µ–Ω–∏—è.&lt;/p&gt;
&lt;!-- 
&lt;a href="http://proiot.ru/blog/posts/2016/11/07/ngspicejs-usilitelnyi-kaskad-s-obshchim-emitterom/2N2222.LIB"&gt;&lt;/a&gt;
--&gt;

&lt;p&gt;–í —Å–ª–µ–¥—É—é—â–∏—Ö —Å—Ö–µ–º–∞—Ö –¥–ª—è —Å–∏–º—É–ª—è—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞—Å—å SPICE –º–æ–¥–µ–ª—å –ø–æ–ø—É–ª—è—Ä–Ω–æ–≥–æ n-p-n —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä–∞ 2N2222:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ wget -nc http://www.centralsemi.com/docs/csm/2N2222.LIB
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/11/07/ngspicejs-usilitelnyi-kaskad-s-obshchim-emitterom/quick.sch"&gt;–ø—Ä–æ—Å—Ç–µ–π—à–∏–π –∫–∞—Å–∫–∞–¥ —Å –û–≠&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2016/11/07/ngspicejs-usilitelnyi-kaskad-s-obshchim-emitterom/quick.net"&gt;netlist&lt;/a&gt; | &lt;a href="https://ngspice.js.org/?gist=5caf9c51187c6b94386582162a08f1dd"&gt;ngspice.js&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/11/07/ngspicejs-usilitelnyi-kaskad-s-obshchim-emitterom/show-img-quick.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ngspice 1 -&amp;gt; source quick.net
ngspice 2 -&amp;gt; dc i1 0 18u 18n
ngspice 3 -&amp;gt; alter r 3.3k
ngspice 4 -&amp;gt; dc i1 0 18u 18n
ngspice 5 -&amp;gt; plot dc1.v(out) dc2.v(out)
ngspice 6 -&amp;gt; alter i1 2u
ngspice 7 -&amp;gt; op
ngspice 8 -&amp;gt; show q1
ngspice 9 -&amp;gt; alter i1 14u
ngspice 10 -&amp;gt; op
ngspice 11 -&amp;gt; show q1
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ö–∞–∫ –≤–∏–¥–Ω–æ –Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫–µ –Ω–∏–∂–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ –≤—ã—Ö–æ–¥–Ω–æ–≥–æ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –∏–¥—ë—Ç –≤ –ø—Ä–æ—Ç–∏–≤–æ—Ñ–∞–∑–µ —Å –∏–∑–º–µ–Ω–µ–Ω–∏–µ–º –≤—Ö–æ–¥–Ω–æ–≥–æ (180¬∞). –ß–µ–º –±–æ–ª—å—à–µ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ –≤ —Ü–µ–ø–∏ –∫–æ–ª–ª–µ–∫—Ç–æ—Ä–∞ R, —Ç–µ–º –∫—Ä—É—á–µ –í–ê–• –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ —Ç–µ–º –±–æ–ª—å—à–∏–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —É—Å–∏–ª–µ–Ω–∏—è –ø–æ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—é, –Ω–æ &lt;code&gt;R(max) ‚âà (V1-0.3)/(Œ≤*Ib(max)) ‚âà (10-0.3)/(191*18*10^-6)&lt;/code&gt; &lt;a href="https://bc.js.org/"&gt;‚âà 2821 –û–º&lt;/a&gt;. –í –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ —ç—Ç–æ —É—Å–ª–æ–≤–∏–µ –Ω–∞—Ä—É—à–µ–Ω–æ —Ç.–∫. &lt;strong&gt;R &amp;gt; 2821&lt;/strong&gt; –∏ –∏–º–µ–Ω–Ω–æ –ø–æ—ç—Ç–æ–º—É –≤–Ω–∏–∑—É –≤–∏—Å—è—Ç –¥–≤–µ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—ã–µ —Å–æ–ø–ª–∏, —Ç.–µ –ø—Ä–∏ –∞–º–ø–ª–∏—Ç—É–¥–µ –≤—Ö–æ–¥–Ω–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞ 18–º–∫–ê —á–∞—Å—Ç—å —É—Å–∏–ª–µ–Ω–Ω–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞ –±—É–¥–µ—Ç —Å—Ä–µ–∑–∞–Ω–∞ :(&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/11/07/ngspicejs-usilitelnyi-kaskad-s-obshchim-emitterom/quick-canvas.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–ö–æ–º–∞–Ω–¥–∞ &lt;code&gt;op&lt;/code&gt; –ø–æ –¥–≤—É–º —Ç–æ—á–∫–∞–º –∞–∫—Ç–∏–≤–Ω–æ–≥–æ (–ª–∏–Ω–µ–π–Ω–æ–≥–æ) —Ä–µ–∂–∏–º–∞ —Ä–∞–±–æ—Ç—ã —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä–∞ —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è - ic:0.000268091 | ib:2.00001e-06 | vbe:0.659054 –∏ ic:0.00255927 | ib:1.4e-05 | vbe:0.719389&lt;/p&gt;
&lt;p&gt;–£—Å–∏–ª–µ–Ω–∏–µ –ø–æ —Ç–æ–∫—É —Ä–∞–≤–Ω–æ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç—É –ø–µ—Ä–µ–¥–∞—á–∏ –ø–æ —Ç–æ–∫—É Œ≤ –∏ &lt;a href="https://bc.js.org/"&gt;‚âà 191&lt;/a&gt; &lt;code&gt;(0.00255927-0.000268091)/(1.4*10^-05-2.00001*10^-06)&lt;/code&gt; &lt;a href="https://bc.js.org/"&gt;‚âà 45.6 –¥–ë&lt;/a&gt; &lt;code&gt;20*log(191)=20*l(191)/l(10)&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;–£—Å–∏–ª–µ–Ω–∏–µ –ø–æ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—é &lt;a href="https://bc.js.org/"&gt;‚âà 125.3&lt;/a&gt; &lt;code&gt;((10-0.000268091*3300)-(10-0.00255927*3300))/(0.719389-0.659054)&lt;/code&gt; &lt;a href="https://bc.js.org/"&gt;‚âà 41.95 –¥–ë&lt;/a&gt; &lt;code&gt;20*l(125.3)/l(10)&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/11/04/ngspicejs-soglasovanie-istochnika-s-nagruzkoi/"&gt;–í—Ö–æ–¥–Ω–æ–µ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ&lt;/a&gt;(—Å—Ä–µ–¥–Ω–µ–µ) –∫–∞—Å–∫–∞–¥–∞ &lt;a href="https://bc.js.org/"&gt;‚âà 5028 –û–º&lt;/a&gt; &lt;code&gt;(0.719389-0.659054)/(1.4*10^-05-2.00001*10^-06)&lt;/code&gt;. –ü–æ—Å–∫–æ–ª—å–∫—É –±–∞–∑–∞-—ç–º–∏—Ç—Ç–µ—Ä —ç—Ç–æ –¥–∏–æ–¥, –Ω–∞ –º–∞–ª—ã—Ö —Ç–æ–∫–∞—Ö –≤—Ö–æ–¥–Ω–æ–µ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ –Ω–µ–ª–∏–Ω–µ–π–Ω–æ - —á–µ–º –±–æ–ª—å—à–∏–π —Ç–æ–∫, —Ç–µ–º –º–µ–Ω—å—à–µ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ (–¥–∏—Ñ—Ñ–µ—Ä–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–µ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ ŒîU/ŒîI –ø—Ä–∏ –º–∞–ª—ã—Ö Œî). –ï—Å–ª–∏ –≤–µ–ª–∏—á–∏–Ω–∞ —ç—Ç–æ–≥–æ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏—è —Å–æ–ø–æ—Å—Ç–∞–≤–∏–º–∞ —Å –≤–µ–ª–∏—á–∏–Ω–æ–π –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏—è –∏—Å—Ç–æ—á–Ω–∏–∫–∞ —É—Å–∏–ª–∏–≤–∞–µ–º–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞ (—Å—Ö–µ–º–∞ c bias –Ω–∏–∂–µ), –Ω–∞–ø—Ä–∏–º–µ—Ä –ø—Ä–∏ &lt;a href="http://proiot.ru/blog/posts/2016/11/04/ngspicejs-soglasovanie-istochnika-s-nagruzkoi/"&gt;—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–∏ –ø–æ –º–æ—â–Ω–æ—Å—Ç–∏&lt;/a&gt;, —Ç–æ –∏–º–µ–µ–º &lt;strong&gt;–Ω–µ–ª–∏–Ω–µ–π–Ω—ã–µ –∏—Å–∫–∞–∂–µ–Ω–∏—è&lt;/strong&gt; –µ—â—ë –Ω–∞ –≤—Ö–æ–¥–µ (–¥–æ —É—Å–∏–ª–µ–Ω–∏—è). –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –æ—Å–ª–∞–±–∏—Ç—å —Ç–∞–∫–∏–µ –∏—Å–∫–∞–∂–µ–Ω–∏—è –º–æ–∂–Ω–æ —É–≤–µ–ª–∏—á–∏–≤ –æ–±—â–µ–µ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ –≤—Ö–æ–¥–Ω–æ–π —Ü–µ–ø–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä –ø–æ—Å—Ç–∞–≤–∏–≤ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Ä–µ–∑–∏—Å—Ç–æ—Ä –º–µ–∂–¥—É –∏—Å—Ç–æ—á–Ω–∏–∫–æ–º —Å–∏–≥–Ω–∞–ª–∞ –∏ –≤—Ö–æ–¥–æ–º —É—Å–∏–ª–∏—Ç–µ–ª—è, –æ–¥–Ω–∞–∫–æ —ç—Ç–æ —Å–Ω–∏–∑–∏—Ç –æ–±—â–∏–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —É—Å–∏–ª–µ–Ω–∏—è –∫–∞—Å–∫–∞–¥–∞ –≤—Ü–µ–ª–æ–º. –ó–∞ –≤—Å—ë –Ω—É–∂–Ω–æ –ø–ª–∞—Ç–∏—Ç—å :)&lt;/p&gt;
&lt;p&gt;–í—ã—Ö–æ–¥–Ω–æ–µ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ –æ—á–µ–≤–∏–¥–Ω–æ ‚âà R ‚âà 3.3 k–û–º.&lt;/p&gt;
&lt;p&gt;–î–ª—è —Ç–æ–≥–æ —á—Ç–æ–±—ã —É—Å–∏–ª–∏–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–π (—Å–∏–Ω—É—Å–æ–∏–¥–∞–ª—å–Ω—ã–π) —Ç–æ–∫, –Ω–∞–ø—Ä–∏–º–µ—Ä –∑–≤—É–∫–æ–≤–æ–π —Å–∏–≥–Ω–∞–ª, –≤ —Å—Ö–µ–º—É –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –µ—â—ë –¥–æ–±–∞–≤–∏—Ç—å –≥–∞–ª—å–≤–∞–Ω–∏—á–µ—Å–∫—É—é —Ä–∞–∑–≤—è–∑–∫—É –ø–æ –≤—Ö–æ–¥—É –≤ –≤–∏–¥–µ –∫–æ–Ω–¥–µ–Ω—Å–∞—Ç–æ—Ä–∞ –∏ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ —Å–º–µ—â–µ–Ω–∏—è (Bias) –±–∞–∑–∞-—ç–º–∏—Ç—Ç–µ—Ä:&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/11/07/ngspicejs-usilitelnyi-kaskad-s-obshchim-emitterom/bias.sch"&gt;–û–≠ —Å–æ —Å–º–µ—â–µ–Ω–∏–µ–º –∏ –≥–∞–ª—å–≤–∞–Ω–∏—á–µ—Å–∫–æ–π —Ä–∞–∑–≤—è–∑–∫–æ–π&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2016/11/07/ngspicejs-usilitelnyi-kaskad-s-obshchim-emitterom/bias.net"&gt;netlist&lt;/a&gt; | &lt;a href="https://ngspice.js.org/?gist=d5d84f15744ea255196d136b735e6570"&gt;ngspice.js&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/11/07/ngspicejs-usilitelnyi-kaskad-s-obshchim-emitterom/show-img-bias.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ngspice 1 -&amp;gt; source bias.net
ngspice 2 -&amp;gt; alter rbias 42meg
ngspice 3 -&amp;gt; tran 9u 3m
ngspice 4 -&amp;gt; alter rbias 1.8meg
ngspice 5 -&amp;gt; tran 9u 3m
ngspice 6 -&amp;gt; plot tran1.v(out) tran2.v(out)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–¢–æ–∫ —Å–º–µ—â–µ–Ω–∏—è –≤ —Ç–∞–∫–æ–π —Å—Ö–µ–º–µ –æ–±—ã—á–Ω–æ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –Ω–∞ –ø–æ–ª–æ–≤–∏–Ω—É –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –Ω–∞ –∫–æ–ª–ª–µ–∫—Ç–æ—Ä–µ –≤ —Ä–µ–∂–∏–º–µ –ø–æ–∫–æ—è (—Ä–∞–±–æ—á–∞—è —Ç–æ—á–∫–∞): &lt;code&gt;Ibias = U(max)/(2*R*Œ≤) = 10/(2*5100*191) ‚âà 5.133 –º–∫A&lt;/code&gt; –∏ —Ç–æ–≥–¥–∞ &lt;code&gt;Rbias ‚âà (V1-0.7)/Ibias = (10-0.7)/(5.133*10^-6) ‚âà 1.8 –ú–û–º&lt;/code&gt;. –ü—Ä–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–º —Å–º–µ—â–µ–Ω–∏–∏ —Å–∏–≥–Ω–∞–ª –Ω–∞ –≤—ã—Ö–æ–¥–µ –±—É–¥–µ—Ç –∏—Å–∫–∞–∂–µ–Ω.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/11/07/ngspicejs-usilitelnyi-kaskad-s-obshchim-emitterom/bias-canvas.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–ì–ª–∞–≤–Ω—ã–º –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–æ–º –≤—ã—à–µ–æ–ø–∏—Å–∞–Ω–Ω–æ–π —Å—Ö–µ–º—ã —è–≤–ª—è–µ—Ç—Å—è —Å–ª–∏—à–∫–æ–º —è–≤–Ω–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å —Ä–∞–±–æ—á–µ–π —Ç–æ—á–∫–∏ –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö —Ñ–∞–∫—Ç–æ—Ä–æ–≤ - –∫ –ø—Ä–∏–º–µ—Ä—É –∏–∑–º–µ–Ω–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏ —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä–∞, –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –ø–∏—Ç–∞–Ω–∏—è –∏–ª–∏ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã –æ–∫—Ä—É–∂–∞—é—â–µ–π —Å—Ä–µ–¥—ã –ø–æ—Ç—Ä–µ–±—É–µ—Ç –ø–µ—Ä–µ—Å—á—ë—Ç–∞ –≤–µ–ª–∏—á–∏–Ω—ã Rbias. –í —ç—Ç–æ–π —Å–≤—è–∑–∏ –Ω–∞–∏–±–æ–ª—å—à–µ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –ø–æ–ª—É—á–∏–ª–∞ –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ö–µ–º–∞ –∫–∞—Å–∫–∞–¥–∞ —Å –û–≠, –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞—é—â–∞—è –Ω–∞–ª–∏—á–∏–µ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω–æ–π –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑—å—é –ø–æ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–º—É —Ç–æ–∫—É:&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/11/07/ngspicejs-usilitelnyi-kaskad-s-obshchim-emitterom/h-bias.sch"&gt;–û–≠ —Å H-—Å–º–µ—â–µ–Ω–∏–µ–º&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2016/11/07/ngspicejs-usilitelnyi-kaskad-s-obshchim-emitterom/h-bias.net"&gt;netlist&lt;/a&gt; | &lt;a href="https://ngspice.js.org/?gist=ff5ede71d7db3d4e17d0448c88f9443d"&gt;ngspice.js&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/11/07/ngspicejs-usilitelnyi-kaskad-s-obshchim-emitterom/show-img-h-bias.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ngspice 1 -&amp;gt; source h-bias.net
ngspice 2 -&amp;gt; tran 9u 3m
ngspice 3 -&amp;gt; plot v(out)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ü–æ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–º—É —Ç–æ–∫—É —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ –∫–æ–Ω–¥–µ–Ω—Å–∞—Ç–æ—Ä–∞ Ce –æ–±—Ä–∞—Ç–Ω–æ –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω–æ —á–∞—Å—Ç–æ—Ç–µ &lt;code&gt;1/(2*œÄ*F*C) = 1/(2*3.14*3000*10*10^-6) ‚âà 5.3 –û–º&lt;/code&gt; —Ç.–µ. —Ä–µ–∑–∏—Å—Ç–æ—Ä Re —à—É–Ω—Ç–∏—Ä—É–µ—Ç—Å—è –∏ —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –ø–æ—á—Ç–∏ –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç —É—Å–∏–ª–µ–Ω–∏—è –∫–∞—Å–∫–∞–¥–∞. –û—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–æ—á–Ω—ã–π —Ä–∞—Å—á—ë—Ç —Å—Ö–µ–º—ã —Å H-—Å–º–µ—â–µ–Ω–∏–µ–º:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;–ó–Ω–∞—è –∞–º–ø–ª–∏—Ç—É–¥—É –≤—Ö–æ–¥–Ω–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞ 50 –º–í –Ω–∞–π–¥—ë–º –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ç–æ–∫ –±–∞–∑—ã &lt;code&gt;Ib(max) ‚âà 0.05/10k ‚âà 5*10^-6 A&lt;/code&gt; –ï—Å–ª–∏ –º—ã —Ö–æ—Ç–∏–º –¥–æ–±–∏—Ç—å—Å—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ —É—Å–∏–ª–µ–Ω–∏—è –ø–æ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—é &lt;code&gt;Rc(max) ‚âà (V1-0.3)/(Œ≤*Ib(max)) ‚âà (10-0.3)/(191*5*10^-6) ‚âà 10 –∫–û–º&lt;/code&gt;. –ï—Å–ª–∏ —Å –¥–≤–æ–π–Ω—ã–º –∑–∞–ø–∞—Å–æ–º –¥–ª—è —Ä–∞–∑–º–∞—Ö–∞ –≤—ã—Ö–æ–¥–Ω–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞ —Ç–æ R—Å = 5.1 –∫–û–º&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;–ù–∞–ø—Ä—è–∂–µ–Ω–∏–µ –Ω–∞ –∫–æ–ª–ª–µ–∫—Ç–æ—Ä–µ –æ–±—ã—á–Ω–æ –ø—Ä–∏–Ω–∏–º–∞—é—Ç –ø–æ–ª–æ–≤–∏–Ω–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –ø–∏—Ç–∞–Ω–∏—è –∏ —Ç–æ–≥–¥–∞ —Ç–æ–∫ –∫–æ–ª–ª–µ–∫—Ç–æ—Ä–∞ &lt;code&gt;Ic = V1/(2*R—Å) = 10/(2*5100) ‚âà 0.98 –º–ê&lt;/code&gt;. –ù–∞–ø—Ä—è–∂–µ–Ω–∏–µ –Ω–∞ —Å—Ç–∞–±–∏–ª–∏–∑–∏—Ä—É—é—â–µ–º —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–∏ –æ–±—ã—á–Ω–æ —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç 10-20% –æ—Ç –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –ø–∏—Ç–∞–Ω–∏—è –∏ —Ç–æ–≥–¥–∞ –µ–≥–æ –≤–µ–ª–∏—á–∏–Ω–∞ &lt;code&gt;Re = 0.1*V1/Ic = 0.1*10/(98*10^-5) ‚âà 1 –∫–û–º&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;–ó–Ω–∞—è –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –ø–µ—Ä–µ–¥–∞—á–∏ Œ≤ –æ–ø—Ä–µ–¥–µ–ª–∏–º —Ç–æ–∫ –±–∞–∑—ã &lt;code&gt;Ib = Ic/Œ≤ = (98*10^-5)/191 ‚âà 5.13 –º–∫A&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;–ü—Ä–æ—Å—Ç–æ–π —Ä–∞—Å—á—ë—Ç Rb1 –∏ Rb2:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;–î–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä –Ω–µ –≤–ª–∏—è–ª –Ω–∞ –≤—ã—Ö–æ–¥–Ω–æ–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –¥–µ–ª–∏—Ç–µ–ª—è Rb1 –∏ Rb2 —Ç–æ–∫ —á–µ—Ä–µ–∑ —ç—Ç–∏ —Ä–µ–∑–∏—Å—Ç–æ—Ä—ã –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è –≤ –¥–µ—Å—è—Ç—å —Ä–∞–∑ –±–æ–ª—å—à–µ —Ç–æ–∫–∞ –±–∞–∑—ã —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä–∞ &lt;code&gt;Id = 10*Ib = 51.3 –º–∫A&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;–ù–∞–ø—Ä—è–∂–µ–Ω–∏–µ –Ω–∞ –≤—ã—Ö–æ–¥–µ –¥–µ–ª–∏—Ç–µ–ª—è Rb1 –∏ Rb2, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—â–µ–µ —Ç–æ–∫ –±–∞–∑—ã 5.13 –º–∫A &lt;code&gt;Vd ‚âà Ve + Vbe = 1 + 0.7 ‚âà 1.7 –í&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;Rb1 = (V1-Vd)/Id = (10-1.7)/(513*10^-7) ‚âà 161793 –û–º&lt;/code&gt; | &lt;code&gt;Rb2 = Vd/Id = 1.7/(513*10^-7) ‚âà 33138 –û–º&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;–ß—É—Ç—å –±–æ–ª–µ–µ —Å–ª–æ–∂–Ω—ã–π –∏ —Ç–æ—á–Ω—ã–π —Ä–∞—Å—á—ë—Ç Rb1 –∏ Rb2:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;–ò—Å—Ö–æ–¥—è –∏–∑ —Ç–µ–æ—Ä–µ–º—ã –¢–µ–≤–µ–Ω–∏–Ω–∞ –ø–æ –æ—Ç–Ω–æ—à–µ–Ω–∏—é –∫ –±–∞–∑–µ —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä–∞ —Ä–µ–∑–∏—Å—Ç–æ—Ä—ã Rb1 –∏ Rb2 —Å–æ–µ–¥–∏–Ω–µ–Ω—ã –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ &lt;code&gt;Rb = Rb1*Rb2/(Rb2+Rb2)&lt;/code&gt;. Rb –æ–±—ã—á–Ω–æ —Ä–∞—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º —á—Ç–æ–±—ã –±—ã—Ç—å –Ω–∞ –ø–æ—Ä—è–¥–æ–∫ –º–µ–Ω—å—à–µ —á–µ–º –≤—Ö–æ–¥–Ω–æ–µ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ –∫–∞—Å–∫–∞–¥–∞ –ø–æ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–º—É —Ç–æ–∫—É - –Ω–∞–ø—Ä–∏–º–µ—Ä –≤ 10 —Ä–∞–∑ &lt;code&gt;Rb = Œ≤*Re/10 = 191*1000/10 ‚âà 19 –∫–û–º&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;–ù–∞–ø—Ä—è–∂–µ–Ω–∏–µ, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—â–µ–µ —Ç–æ–∫ –±–∞–∑—ã 5.13 –º–∫A &lt;code&gt;Vbb ‚âà Ve + Vbe + Ib*Rb = 1 + 0.7 + 19000*5.13*10^-6 ‚âà 1.7975 –í&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;Rb1 = Rb*V1/Vbb = 19000*10/1.7975 ‚âà 105702 –û–º&lt;/code&gt; | &lt;code&gt;Rb2 = Rb/(1-Vbb/V1) = 19000/(1-1.7975/10) ‚âà 23164 –û–º&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/11/07/ngspicejs-usilitelnyi-kaskad-s-obshchim-emitterom/h-bias-canvas.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–ò—Ç–∞–∫, –º—ã –ø—Ä–æ–≤–µ–ª–∏ –≤—Ä–µ–º–µ–Ω–Ω–æ–π –∞–Ω–∞–ª–∏–∑ —Å—Ö–µ–º—ã —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã &lt;code&gt;tran&lt;/code&gt;. –ö–∞–∫ –Ω–∞—Å—á—ë—Ç –æ—Ü–µ–Ω–∫–∏ —É—Ä–æ–≤–Ω—è –∏—Å–∫–∞–∂–µ–Ω–∏–π, –≤–Ω–æ—Å–∏–º—ã—Ö —Å–∏—Å—Ç–µ–º–æ–π –ø–æ –æ—Ç–Ω–æ—à–µ–Ω–∏—é –∫ –≤—Ö–æ–¥–Ω–æ–º—É —Å–∏–≥–Ω–∞–ª—É ?
–í SPICE –¥–ª—è —ç—Ç–∏—Ö —Ü–µ–ª–µ–π –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω —Å–ø–µ–∫—Ç—Ä–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –§—É—Ä—å–µ. &lt;a href="https://ngspice.js.org/?gist=db86a12399a231108e27d323955eb7c3"&gt;–ü—Ä–æ–±—É–µ–º&lt;/a&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ngspice 4 -&amp;gt; fourier 3k v(out)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–†–µ–∑—É–ª—å—Ç–∞—Ç –¥–æ–≤–æ–ª—å–Ω–æ –º—É–¥—Ä—ë–Ω—ã–π THD: 5.7116 %. –ö–æ–º–∞–Ω–¥–∞ &lt;code&gt;fourier&lt;/code&gt; —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –ø–∞—Ä–µ —Å &lt;code&gt;tran&lt;/code&gt;, –∞ —á–∞—Å—Ç–æ—Ç–∞ 3–∫–ì—Ü - —á–∞—Å—Ç–æ—Ç–∞ –≤—Ö–æ–¥–Ω–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞ Vin. –í—ã—Å–æ–∫–∏–µ –Ω–µ–ª–∏–Ω–µ–π–Ω—ã–µ –∏—Å–∫–∞–∂–µ–Ω–∏—è —è–≤–ª—è—é—Ç—Å—è –≥–ª–∞–≤–Ω—ã–º –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–æ–º —Å—Ö–µ–º—ã —Å –û–≠ –Ω–∞ –Ω–∏–∑–∫–∏—Ö —á–∞—Å—Ç–æ—Ç–∞—Ö. –ù–∞ –≤—ã—Å–æ–∫–∏—Ö —á–∞—Å—Ç–æ—Ç–∞—Ö –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –µ—â—ë –æ–¥–∏–Ω –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ–∫, —Å–≤—è–∑–∞–Ω–Ω—ã–π —Å —ë–º–∫–æ—Å—Ç—å—é &lt;a href="http://proiot.ru/blog/posts/2016/11/11/ngspicejs-kaskodnyi-usilitel/"&gt;–ú–∏–ª–ª–µ—Ä–∞&lt;/a&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Fourier analysis for v(out):
  No. Harmonics: 10, THD: 5.7116 %, Gridsize: 200, Interpolation Degree: 1

Harmonic Frequency   Magnitude   Phase       Norm. Mag   Norm. Phase
-------- ---------   ---------   -----       ---------   -----------
 0       0           4.91942     0           0           0          
 1       3000        2.57366     -178.92     1           0          
 2       6000        0.145903    79.9197     0.0566906   258.843    
 3       9000        0.0174992   -138.8      0.00679933  40.1225    
 4       12000       0.00350968  150.054     0.00136369  328.977    
 5       15000       0.00132934  54.0063     0.000516515 232.93     
 6       18000       0.000550078 -51.496     0.000213733 127.427    
 7       21000       0.000187626 -157.57     7.29022e-05 21.358     
 8       24000       7.55946e-05 79.2634     2.93724e-05 258.187    
 9       27000       3.78454e-05 3.827       1.47049e-05 182.75
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/11/09/ngspicejs-usilitelnyi-kaskad-s-obshchim-kollektorom/"&gt;–î–∞–ª–µ–µ&lt;/a&gt; —É—Å–∏–ª–∏—Ç–µ–ª—å–Ω—ã–π –∫–∞—Å–∫–∞–¥ —Å –æ–±—â–∏–º –∫–æ–ª–ª–µ–∫—Ç–æ—Ä–æ–º.&lt;/p&gt;</content><category term="gEDA"></category><category term="ngspice"></category></entry><entry><title>NGSPICE.js - —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ —Å –Ω–∞–≥—Ä—É–∑–∫–æ–π</title><link href="http://proiot.ru/blog/posts/2016/11/04/ngspicejs-soglasovanie-istochnika-s-nagruzkoi/" rel="alternate"></link><published>2016-11-04T00:00:00+02:00</published><updated>2016-11-04T00:00:00+02:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2016-11-04:/blog/posts/2016/11/04/ngspicejs-soglasovanie-istochnika-s-nagruzkoi/</id><summary type="html">&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/10/28/vvedenie-v-simuliatsiiu-elektricheskikh-skhem-s-pomoshchiu-ngspicejs/"&gt;–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º&lt;/a&gt; –æ—Å–≤–∞–∏–≤–∞—Ç—å NGSPICE.&lt;/p&gt;
&lt;p&gt;–°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –∏ –Ω–∞–≥—Ä—É–∑–∫–∏ - —ç—Ç–æ –≤—ã–±–æ—Ä —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏—è —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏ –∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏—è –∏—Å—Ç–æ—á–Ω–∏–∫–∞ —Å —Ü–µ–ª—å—é –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –∑–∞–¥–∞–Ω–Ω—ã—Ö —Å–≤–æ–π—Å—Ç–≤ –ø–æ–ª—É—á–µ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã. –ù–∞–∏–±–æ–ª–µ–µ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–µ —Ç–∏–ø—ã —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;–°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ –ø–æ –º–æ—â–Ω–æ—Å—Ç–∏ - –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ (—Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º–∏ –ø–æ—Ç–µ—Ä—è–º–∏) —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ –ø–æ –º–æ—â–Ω–æ—Å—Ç–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ —Å–∏–≥–Ω–∞–ª–∞ –∏ –Ω–∞–≥—Ä—É–∑–∫–∏. –ü—Ä–∏ —É—Å–ª–æ–≤–∏–∏ &lt;strong&gt;Ri = Rn&lt;/strong&gt; –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –ø–µ—Ä–µ–¥–∞—á–∏ –ø–æ ‚Ä¶&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;</summary><content type="html">&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/10/28/vvedenie-v-simuliatsiiu-elektricheskikh-skhem-s-pomoshchiu-ngspicejs/"&gt;–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º&lt;/a&gt; –æ—Å–≤–∞–∏–≤–∞—Ç—å NGSPICE.&lt;/p&gt;
&lt;p&gt;–°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –∏ –Ω–∞–≥—Ä—É–∑–∫–∏ - —ç—Ç–æ –≤—ã–±–æ—Ä —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏—è —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏—è –Ω–∞–≥—Ä—É–∑–∫–∏ –∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏—è –∏—Å—Ç–æ—á–Ω–∏–∫–∞ —Å —Ü–µ–ª—å—é –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –∑–∞–¥–∞–Ω–Ω—ã—Ö —Å–≤–æ–π—Å—Ç–≤ –ø–æ–ª—É—á–µ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã. –ù–∞–∏–±–æ–ª–µ–µ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Å–ª–µ–¥—É—é—â–∏–µ —Ç–∏–ø—ã —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;–°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ –ø–æ –º–æ—â–Ω–æ—Å—Ç–∏ - –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ (—Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º–∏ –ø–æ—Ç–µ—Ä—è–º–∏) —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ –ø–æ –º–æ—â–Ω–æ—Å—Ç–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ —Å–∏–≥–Ω–∞–ª–∞ –∏ –Ω–∞–≥—Ä—É–∑–∫–∏. –ü—Ä–∏ —É—Å–ª–æ–≤–∏–∏ &lt;strong&gt;Ri = Rn&lt;/strong&gt; –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –ø–µ—Ä–µ–¥–∞—á–∏ –ø–æ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—é Ku —Ä–∞–≤–µ–Ω &lt;code&gt;Un/Vi(max) = I*Rn/(I*Ri+I*Rn) = Rn/(Ri+Rn) = 0.5&lt;/code&gt;, –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –ø–µ—Ä–µ–¥–∞—á–∏ —Ç–æ–∫–∞ Ki —Ä–∞–≤–µ–Ω &lt;code&gt;In/Ii(max) = (Vi/(Ri+Rn))/(Vi/Ri) = Ri/(Ri+Rn)&lt;/code&gt;, –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –ø–µ—Ä–µ–¥–∞—á–∏ –ø–æ –º–æ—â–Ω–æ—Å—Ç–∏ Kp —Ä–∞–≤–µ–Ω &lt;code&gt;Kp = Pn/Pi(max) = Ku*Ki = Ri*R–Ω/(Ri + Rn)^2 = 0.25&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;–°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ –ø–æ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—é - –ø–æ–ª—É—á–µ–Ω–∏–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞ –ø–µ—Ä–µ–¥–∞—á–∏ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –≤ –Ω–∞–≥—Ä—É–∑–∫—É. –≠—Ç–æ –∏–º–µ–µ—Ç –º–µ—Å—Ç–æ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ —É—Å–ª–æ–≤–∏—è &lt;strong&gt;Rn &amp;gt;&amp;gt; Ri&lt;/strong&gt; (–∏–ª–∏ Rn -&amp;gt; ‚àû). –ü—Ä–∏ —ç—Ç–æ–º Ku —Å—Ç—Ä–µ–º–∏—Ç—Å—è –∫ –µ–¥–∏–Ω–∏—Ü–µ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;–°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ –ø–æ —Ç–æ–∫—É –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ –ø–æ–ª—É—á–µ–Ω–∏–∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞ –ø–µ—Ä–µ–¥–∞—á–∏ —Ç–æ–∫–∞ Ki –≤ –Ω–∞–≥—Ä—É–∑–∫—É. –ü—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ —É—Å–ª–æ–≤–∏—è &lt;strong&gt;Ri &amp;gt;&amp;gt; Rn&lt;/strong&gt; (–∏–ª–∏ Rn -&amp;gt; 0) Ki —Å—Ç—Ä–µ–º–∏—Ç—Å—è –∫ –µ–¥–∏–Ω–∏—Ü–µ&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/11/04/ngspicejs-soglasovanie-istochnika-s-nagruzkoi/io.sch"&gt;—Å—Ö–µ–º–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –∏ –Ω–∞–≥—Ä—É–∑–∫–∏&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2016/11/04/ngspicejs-soglasovanie-istochnika-s-nagruzkoi/io.net"&gt;netlist&lt;/a&gt; | &lt;a href="https://ngspice.js.org/?gist=a6fae4b564d851c5f1759643dc279823"&gt;ngspice.js&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/11/04/ngspicejs-soglasovanie-istochnika-s-nagruzkoi/show-img-io.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ngspice 1 -&amp;gt; source io.net
ngspice 2 -&amp;gt; alter ri 3k
ngspice 3 -&amp;gt; dc rn 1 10k 10
ngspice 4 -&amp;gt; plot v(n)^2/&amp;quot;res-sweep&amp;quot;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ù–∞ –∫–∞—Ä—Ç–∏–Ω–∫–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ä–∞—Å—Å–µ–∏–≤–∞–µ–º–∞—è –º–æ—â–Ω–æ—Å—Ç—å –Ω–∞ –Ω–∞–≥—Ä—É–∑–∫–µ &lt;code&gt;Pn = Un*In = Un^2/Rn&lt;/code&gt; –Ω–∞–±–ª—é–¥–∞–µ—Ç—Å—è –ø—Ä–∏ &lt;strong&gt;Rn = Ri&lt;/strong&gt;, –ø—Ä–∏–º–µ—Ä &lt;a href="https://bc.js.org/"&gt;—Ä–∞—Å—á—ë—Ç–∞&lt;/a&gt;: &lt;code&gt;Pmax = Un*In = Vi^2*Rn/(Rn+Ri)^2 = Vi^2/(4*Rn) = 42^2/(4*3000) = 0.147&lt;/code&gt;:&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/11/04/ngspicejs-soglasovanie-istochnika-s-nagruzkoi/io-canvas-u2.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ngspice 1 -&amp;gt; source io.net
ngspice 2 -&amp;gt; alter ri 5
ngspice 3 -&amp;gt; dc rn 0 25 50m
ngspice 4 -&amp;gt; plot 5*&amp;quot;res-sweep&amp;quot;/(5 + &amp;quot;res-sweep&amp;quot;)^2 &amp;quot;res-sweep&amp;quot;/(&amp;quot;res-sweep&amp;quot; + 5) 5/(&amp;quot;res-sweep&amp;quot; + 5)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç &lt;a href="https://ngspice.js.org/?gist=02707f2545ae01e6202d6ed48ff10493"&gt;–ø–µ—Ä–µ–¥–∞—á–∏&lt;/a&gt; –ø–æ –º–æ—â–Ω–æ—Å—Ç–∏ Kp –Ω–∞ –º–∞–∫—Å–∏–º—É–º–µ —Ä–∞–≤–µ–Ω 0.25 –ø—Ä–∏ &lt;strong&gt;Rn = Ri&lt;/strong&gt; –∏ &lt;strong&gt;Ku = Ki = 0.5&lt;/strong&gt;:&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/11/04/ngspicejs-soglasovanie-istochnika-s-nagruzkoi/io-canvas.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/11/07/ngspicejs-usilitelnyi-kaskad-s-obshchim-emitterom/"&gt;–î–∞–ª–µ–µ&lt;/a&gt; —É—Å–∏–ª–∏—Ç–µ–ª—å–Ω—ã–π –∫–∞—Å–∫–∞–¥ —Å –æ–±—â–∏–º —ç–º–∏—Ç—Ç–µ—Ä–æ–º.&lt;/p&gt;</content><category term="gEDA"></category><category term="ngspice"></category></entry><entry><title>NGSPICE.js - –ø–æ–ª–µ–≤–æ–π —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä</title><link href="http://proiot.ru/blog/posts/2016/11/03/ngspicejs-polevoi-tranzistor/" rel="alternate"></link><published>2016-11-03T00:00:00+02:00</published><updated>2016-11-03T00:00:00+02:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2016-11-03:/blog/posts/2016/11/03/ngspicejs-polevoi-tranzistor/</id><summary type="html">&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/10/28/vvedenie-v-simuliatsiiu-elektricheskikh-skhem-s-pomoshchiu-ngspicejs/"&gt;–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º&lt;/a&gt; –æ—Å–≤–∞–∏–≤–∞—Ç—å NGSPICE.&lt;/p&gt;
&lt;p&gt;–ü–æ–ª–µ–≤–æ–π (—É–Ω–∏–ø–æ–ª—è—Ä–Ω—ã–π) —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä - –ø–æ–ª—É–ø—Ä–æ–≤–æ–¥–Ω–∏–∫–æ–≤—ã–π –ø—Ä–∏–±–æ—Ä, —Ä–∞–±–æ—Ç–∞ –∫–æ—Ç–æ—Ä–æ–≥–æ –æ—Å–Ω–æ–≤–∞–Ω–∞ –Ω–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∏–º —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ–º —Ç–æ–∫–æ–ø—Ä–æ–≤–æ–¥—è—â–µ–≥–æ –∫–∞–Ω–∞–ª–∞ –ø–æ–ø–µ—Ä–µ—á–Ω—ã–º —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∏–º –ø–æ–ª–µ–º, —Å–æ–∑–¥–∞–≤–∞–µ–º—ã–º –ø—Ä–∏–ª–æ–∂–µ–Ω–Ω—ã–º –∫ –∑–∞—Ç–≤–æ—Ä—É –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ–º. –¢–∞–∫–∂–µ –∫–∞–∫ –∏ &lt;a href="http://proiot.ru/blog/posts/2016/11/02/ngspicejs-bipoliarnyi-tranzistor/"&gt;–±–∏–ø–æ–ª—è—Ä–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä—ã&lt;/a&gt; –ø–æ–ª–µ–≤—ã–µ —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä—ã –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –≤ —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö –¥–ª—è —É—Å–∏–ª–µ–Ω–∏—è –∏–ª–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∏—Ö –∫–æ–ª–µ–±–∞–Ω–∏–π.&lt;/p&gt;
&lt;p&gt;–≠–ª–µ–∫—Ç—Ä–æ–¥—ã –ø–æ–ª–µ–≤–æ–≥–æ —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä–∞ –Ω–∞–∑—ã–≤–∞—é—Ç &lt;strong&gt;–∏—Å—Ç–æ–∫–æ–º&lt;/strong&gt; (–ò), &lt;strong&gt;—Å—Ç–æ–∫–æ–º&lt;/strong&gt; (–° ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/10/28/vvedenie-v-simuliatsiiu-elektricheskikh-skhem-s-pomoshchiu-ngspicejs/"&gt;–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º&lt;/a&gt; –æ—Å–≤–∞–∏–≤–∞—Ç—å NGSPICE.&lt;/p&gt;
&lt;p&gt;–ü–æ–ª–µ–≤–æ–π (—É–Ω–∏–ø–æ–ª—è—Ä–Ω—ã–π) —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä - –ø–æ–ª—É–ø—Ä–æ–≤–æ–¥–Ω–∏–∫–æ–≤—ã–π –ø—Ä–∏–±–æ—Ä, —Ä–∞–±–æ—Ç–∞ –∫–æ—Ç–æ—Ä–æ–≥–æ –æ—Å–Ω–æ–≤–∞–Ω–∞ –Ω–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∏–º —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ–º —Ç–æ–∫–æ–ø—Ä–æ–≤–æ–¥—è—â–µ–≥–æ –∫–∞–Ω–∞–ª–∞ –ø–æ–ø–µ—Ä–µ—á–Ω—ã–º —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∏–º –ø–æ–ª–µ–º, —Å–æ–∑–¥–∞–≤–∞–µ–º—ã–º –ø—Ä–∏–ª–æ–∂–µ–Ω–Ω—ã–º –∫ –∑–∞—Ç–≤–æ—Ä—É –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ–º. –¢–∞–∫–∂–µ –∫–∞–∫ –∏ &lt;a href="http://proiot.ru/blog/posts/2016/11/02/ngspicejs-bipoliarnyi-tranzistor/"&gt;–±–∏–ø–æ–ª—è—Ä–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä—ã&lt;/a&gt; –ø–æ–ª–µ–≤—ã–µ —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä—ã –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è –≤ —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö –¥–ª—è —É—Å–∏–ª–µ–Ω–∏—è –∏–ª–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∏—Ö –∫–æ–ª–µ–±–∞–Ω–∏–π.&lt;/p&gt;
&lt;p&gt;–≠–ª–µ–∫—Ç—Ä–æ–¥—ã –ø–æ–ª–µ–≤–æ–≥–æ —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä–∞ –Ω–∞–∑—ã–≤–∞—é—Ç &lt;strong&gt;–∏—Å—Ç–æ–∫–æ–º&lt;/strong&gt; (–ò), &lt;strong&gt;—Å—Ç–æ–∫–æ–º&lt;/strong&gt; (–°) –∏ &lt;strong&gt;–∑–∞—Ç–≤–æ—Ä–æ–º&lt;/strong&gt; (–ó). –£–ø—Ä–∞–≤–ª—è—é—â–µ–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –ø—Ä–∏–∫–ª–∞–¥—ã–≤–∞–µ—Ç—Å—è –º–µ–∂–¥—É –∑–∞—Ç–≤–æ—Ä–æ–º –∏ –∏—Å—Ç–æ–∫–æ–º. –û—Ç –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –º–µ–∂–¥—É –∑–∞—Ç–≤–æ—Ä–æ–º –∏ –∏—Å—Ç–æ–∫–æ–º –∑–∞–≤–∏—Å–∏—Ç –ø—Ä–æ–≤–æ–¥–∏–º–æ—Å—Ç—å –∫–∞–Ω–∞–ª–∞ –∏, —Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ, –≤–µ–ª–∏—á–∏–Ω–∞ —Ç–æ–∫–∞ —Å—Ç–æ–∫–∞. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –ø–æ–ª–µ–≤–æ–π —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä –º–æ–∂–Ω–æ —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –∫–∞–∫ –∏—Å—Ç–æ—á–Ω–∏–∫ —Ç–æ–∫–∞, —É–ø—Ä–∞–≤–ª—è–µ–º—ã–π –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ–º –∑–∞—Ç–≤–æ—Ä-–∏—Å—Ç–æ–∫. &lt;/p&gt;
&lt;p&gt;–ü–æ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ–ª–µ–≤—ã–µ —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä—ã –º–æ–∂–Ω–æ —Ä–∞–∑–±–∏—Ç—å –Ω–∞ –¥–≤–µ –≥—Ä—É–ø–ø—ã:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;—Å —É–ø—Ä–∞–≤–ª—è—é—â–∏–º p-n-–ø–µ—Ä–µ—Ö–æ–¥–æ–º (JFET)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;—Å –º–µ—Ç–∞–ª–ª–∏—á–µ—Å–∫–∏–º –∑–∞—Ç–≤–æ—Ä–æ–º, –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –æ—Ç –∫–∞–Ω–∞–ª–∞ –¥–∏—ç–ª–µ–∫—Ç—Ä–∏–∫–æ–º (MOSFET). –¢—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä—ã –¥–∞–Ω–Ω–æ–≥–æ –≤–∏–¥–∞ –Ω–∞–∑—ã–≤–∞—é—Ç –ú–î–ü-—Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä–∞–º–∏ (–º–µ—Ç–∞–ª–ª - –¥–∏—ç–ª–µ–∫—Ç—Ä–∏–∫ - –ø–æ–ª—É–ø—Ä–æ–≤–æ–¥–Ω–∏–∫). –ú–î–ü-—Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä–∞–º–∏ —Ç–∞–∫–∂–µ –º–æ–∂–Ω–æ —Ä–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞ —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä—ã —Å –∏–Ω–¥—É—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–º (Enhancement) –∏ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–º (Depletion) –∫–∞–Ω–∞–ª–æ–º&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;–ü—Ä–æ–≤–æ–¥–∏–º–æ—Å—Ç—å –∫–∞–Ω–∞–ª–∞ –ø–æ–ª–µ–≤–æ–≥–æ —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π (n-–∫–∞–Ω–∞–ª)
–∏–ª–∏ –¥—ã—Ä–æ—á–Ω–æ–π (p-–∫–∞–Ω–∞–ª).&lt;/p&gt;
&lt;p&gt;–í —Å–ª–µ–¥—É—é—â–∏—Ö —Å—Ö–µ–º–∞—Ö –¥–ª—è —Å–∏–º—É–ª—è—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å SPICE –º–æ–¥–µ–ª–∏ –ø–æ–ª–µ–≤—ã—Ö —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä–æ–≤ —Å n-–∫–∞–Ω–∞–ª–æ–º: &lt;a href="http://proiot.ru/blog/posts/2016/11/03/ngspicejs-polevoi-tranzistor/nMOSd.txt"&gt;–ú–î–ü –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –∫–∞–Ω–∞–ª&lt;/a&gt;  | &lt;a href="http://proiot.ru/blog/posts/2016/11/03/ngspicejs-polevoi-tranzistor/nMOSe.txt"&gt;–ú–î–ü –∏–Ω–¥—É—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–∞–Ω–∞–ª&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2016/11/03/ngspicejs-polevoi-tranzistor/nJFET.txt"&gt;JFET&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;–ü–æ—Å–∫–æ–ª—å–∫—É –≤—Ö–æ–¥–Ω–æ–µ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ –ø–æ–ª–µ–≤—ã—Ö —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä–æ–≤ —Å–æ—Å—Ç–∞–≤–ª—è–µ—Ç –¥–µ—Å—è—Ç–∫–∏ –º–µ–≥–∞–æ–º, —Ç–æ –≤—Ö–æ–¥–Ω—ã–µ —Ç–æ–∫–∏ –ø–æ–ª–µ–≤—ã—Ö —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä–æ–≤ —á—Ä–µ–∑–≤—ã—á–∞–π–Ω–æ –º–∞–ª—ã –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–∫–æ–º –≤ –≤—ã—Ö–æ–¥–Ω–æ–π —Ü–µ–ø–∏ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –≤—Ö–æ–¥–Ω—ã–º –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ–º. –í —ç—Ç–æ–π —Å–≤—è–∑–∏ —É—Å–∏–ª–∏—Ç–µ–ª—å–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞ –ø–æ–ª–µ–≤–æ–≥–æ —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä–∞, –∫–∞–∫ –∏ —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã—Ö –ª–∞–º–ø, —Ü–µ–ª–µ—Å–æ–æ–±—Ä–∞–∑–Ω–æ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏–∑–æ–≤–∞—Ç—å –∫—Ä—É—Ç–∏–∑–Ω–æ–π –ø—Ä–æ—Ö–æ–¥–Ω–æ–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/11/03/ngspicejs-polevoi-tranzistor/va.sch"&gt;–∫—Ä—É—Ç–∏–∑–Ω–∞ –ø–æ–ª–µ–≤–æ–≥–æ —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä–∞&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2016/11/03/ngspicejs-polevoi-tranzistor/va.net"&gt;netlist&lt;/a&gt; | &lt;a href="https://ngspice.js.org/?gist=fb28e1d10199273970066a5b30fdd454"&gt;ngspice.js&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/11/03/ngspicejs-polevoi-tranzistor/show-img-va.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ngspice 1 -&amp;gt; source va.net
ngspice 2 -&amp;gt; set temp=0
ngspice 3 -&amp;gt; dc vdd 0 10 10m
ngspice 4 -&amp;gt; set temp=25
ngspice 5 -&amp;gt; dc vdd 0 10 10m
ngspice 6 -&amp;gt; set temp=50
ngspice 7 -&amp;gt; dc vdd 0 10 10m
ngspice 8 -&amp;gt; plot (-dc1.i(vdd)) (-dc2.i(vdd)) (-dc3.i(vdd))
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ù–∞ –∫–∞—Ä—Ç–∏–Ω–∫–µ 0...1–í - –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –Ω–∞—Å—ã—â–µ–Ω–∏—è —Å—Ç–æ–∫-–∏—Å—Ç–æ–∫, –ø–æ—Å–ª–µ –∫–æ—Ç–æ—Ä–æ–≥–æ —É—á–∞—Å—Ç–æ–∫ 1–í...MAX —è–≤–ª—è–µ—Ç—Å—è –∞–∫—Ç–∏–≤–Ω—ã–º —Ä–µ–∂–∏–º–æ–º —Ä–∞–±–æ—Ç—ã —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä–∞. –ö—Ä—É—Ç–∏–∑–Ω–∞ –í–ê–• –≤ –∏–¥–µ–∞–ª–µ –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è —Å—Ç–æ–∫-–∏—Å—Ç–æ–∫.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/11/03/ngspicejs-polevoi-tranzistor/va-canvas.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–ú–î–ü-—Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä —Å –∏–Ω–¥—É—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –∫–∞–Ω–∞–ª–æ–º –ø—Ä–∏ –Ω—É–ª–µ–≤–æ–º –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–∏ –∑–∞—Ç–≤–æ—Ä-–∏—Å—Ç–æ–∫ –∑–∞–∫—Ä—ã—Ç (—Ç–æ–∫ —Å—Ç–æ–∫–∞ —Ä–∞–≤–µ–Ω –Ω—É–ª—é) –∏ –∏–º–µ–Ω–Ω–æ –ø–æ—ç—Ç–æ–º—É –Ω–∞ —Å—Ö–µ–º–∞—Ö –µ–≥–æ –∫–∞–Ω–∞–ª –ø—Ä–∏–Ω—è—Ç–æ –æ–±–æ–∑–Ω–∞—á–∞—Ç—å –ø—É–Ω–∫—Ç–∏—Ä–æ–º.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/11/03/ngspicejs-polevoi-tranzistor/all.sch"&gt;–Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –∑–∞—Ç–≤–æ—Ä–∞/—Ç–æ–∫ —Å—Ç–æ–∫–∞&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2016/11/03/ngspicejs-polevoi-tranzistor/all.net"&gt;netlist&lt;/a&gt; | &lt;a href="https://ngspice.js.org/?gist=af228d54e01cd660eb56d6851a960df2"&gt;ngspice.js&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/11/03/ngspicejs-polevoi-tranzistor/show-img-all.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ngspice 1 -&amp;gt; source all.net
ngspice 2 -&amp;gt; dc vin -1 9 10m
ngspice 3 -&amp;gt; plot (-i(VnMOSe)) (-i(VnMOSd)) (-i(Vnjfet))
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ö–∞–∫ –≤–∏–¥–Ω–æ –Ω–∞ –≥—Ä–∞—Ñ–∏–∫–µ —É JFET —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä–æ–≤ –±–æ–ª–µ–µ –∫—Ä—É—Ç–∞—è –í–ê–• –∏ –ø–æ–ª—è—Ä–Ω–æ—Å—Ç—å —É—Å–∏–ª–∏–≤–∞–µ–º–æ–≥–æ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –∑–∞—Ç–≤–æ—Ä-–∏—Å—Ç–æ–∫ JFET –∏ MOSFET –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω–∞—è:&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/11/03/ngspicejs-polevoi-tranzistor/all-canvas.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/11/04/ngspicejs-soglasovanie-istochnika-s-nagruzkoi/"&gt;–î–∞–ª–µ–µ&lt;/a&gt; –æ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –∏ –Ω–∞–≥—Ä—É–∑–∫–∏.&lt;/p&gt;</content><category term="gEDA"></category><category term="ngspice"></category></entry><entry><title>NGSPICE.js - –±–∏–ø–æ–ª—è—Ä–Ω—ã–π —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä</title><link href="http://proiot.ru/blog/posts/2016/11/02/ngspicejs-bipoliarnyi-tranzistor/" rel="alternate"></link><published>2016-11-02T00:00:00+02:00</published><updated>2016-11-02T00:00:00+02:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2016-11-02:/blog/posts/2016/11/02/ngspicejs-bipoliarnyi-tranzistor/</id><summary type="html">&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/10/28/vvedenie-v-simuliatsiiu-elektricheskikh-skhem-s-pomoshchiu-ngspicejs/"&gt;–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º&lt;/a&gt; –æ—Å–≤–∞–∏–≤–∞—Ç—å NGSPICE.&lt;/p&gt;
&lt;p&gt;–¢–∞–∫–∂–µ –∫–∞–∫ –∏ &lt;a href="http://proiot.ru/blog/posts/2016/10/31/ngspicejs-poluprovodnikovyi-diod/"&gt;–¥–∏–æ–¥&lt;/a&gt; –±–∏–ø–æ–ª—è—Ä–Ω—ã–π —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä (&lt;strong&gt;B&lt;/strong&gt;ipolar &lt;strong&gt;J&lt;/strong&gt;unction &lt;strong&gt;T&lt;/strong&gt;ransistor - BJT)  –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ —Ñ–∏–∑–∏—á–µ—Å–∫–∏—Ö —Å–≤–æ–π—Å—Ç–≤–∞—Ö &lt;em&gt;p-n&lt;/em&gt; –ø–µ—Ä–µ—Ö–æ–¥–∞. –ü—Ä–∏–±–æ—Ä —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —Ç—Ä—ë—Ö –ø–æ–ª—É–ø—Ä–æ–≤–æ–¥–Ω–∏–∫–æ–≤—ã—Ö —Å–ª–æ—ë–≤ —Å —á–µ—Ä–µ–¥—É—é—â–∏–º—Å—è —Ç–∏–ø–æ–º –ø—Ä–∏–º–µ—Å–Ω–æ–π –ø—Ä–æ–≤–æ–¥–∏–º–æ—Å—Ç–∏: —ç–º–∏—Ç—Ç–µ—Ä–∞ - –±–∞–∑—ã - –∫–æ–ª–ª–µ–∫—Ç–æ—Ä–∞. –í –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ø–æ—Ä—è–¥–∫–∞ —á–µ—Ä–µ–¥–æ–≤–∞–Ω–∏—è —Å–ª–æ—ë–≤ —Ä–∞–∑–ª–∏—á–∞—é—Ç &lt;em&gt;n-p-n&lt;/em&gt; (—ç–º–∏—Ç—Ç–µ—Ä n-–ø–æ–ª—É–ø—Ä–æ–≤–æ–¥–Ω–∏–∫, –±–∞–∑–∞ p-–ø–æ–ª—É–ø—Ä–æ–≤–æ–¥–Ω–∏–∫, –∫–æ–ª–ª–µ–∫—Ç–æ—Ä n-–ø–æ–ª—É–ø—Ä–æ–≤–æ–¥–Ω–∏–∫ ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/10/28/vvedenie-v-simuliatsiiu-elektricheskikh-skhem-s-pomoshchiu-ngspicejs/"&gt;–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º&lt;/a&gt; –æ—Å–≤–∞–∏–≤–∞—Ç—å NGSPICE.&lt;/p&gt;
&lt;p&gt;–¢–∞–∫–∂–µ –∫–∞–∫ –∏ &lt;a href="http://proiot.ru/blog/posts/2016/10/31/ngspicejs-poluprovodnikovyi-diod/"&gt;–¥–∏–æ–¥&lt;/a&gt; –±–∏–ø–æ–ª—è—Ä–Ω—ã–π —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä (&lt;strong&gt;B&lt;/strong&gt;ipolar &lt;strong&gt;J&lt;/strong&gt;unction &lt;strong&gt;T&lt;/strong&gt;ransistor - BJT)  –æ—Å–Ω–æ–≤–∞–Ω –Ω–∞ —Ñ–∏–∑–∏—á–µ—Å–∫–∏—Ö —Å–≤–æ–π—Å—Ç–≤–∞—Ö &lt;em&gt;p-n&lt;/em&gt; –ø–µ—Ä–µ—Ö–æ–¥–∞. –ü—Ä–∏–±–æ—Ä —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —Ç—Ä—ë—Ö –ø–æ–ª—É–ø—Ä–æ–≤–æ–¥–Ω–∏–∫–æ–≤—ã—Ö —Å–ª–æ—ë–≤ —Å —á–µ—Ä–µ–¥—É—é—â–∏–º—Å—è —Ç–∏–ø–æ–º –ø—Ä–∏–º–µ—Å–Ω–æ–π –ø—Ä–æ–≤–æ–¥–∏–º–æ—Å—Ç–∏: —ç–º–∏—Ç—Ç–µ—Ä–∞ - –±–∞–∑—ã - –∫–æ–ª–ª–µ–∫—Ç–æ—Ä–∞. –í –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –ø–æ—Ä—è–¥–∫–∞ —á–µ—Ä–µ–¥–æ–≤–∞–Ω–∏—è —Å–ª–æ—ë–≤ —Ä–∞–∑–ª–∏—á–∞—é—Ç &lt;em&gt;n-p-n&lt;/em&gt; (—ç–º–∏—Ç—Ç–µ—Ä n-–ø–æ–ª—É–ø—Ä–æ–≤–æ–¥–Ω–∏–∫, –±–∞–∑–∞ p-–ø–æ–ª—É–ø—Ä–æ–≤–æ–¥–Ω–∏–∫, –∫–æ–ª–ª–µ–∫—Ç–æ—Ä n-–ø–æ–ª—É–ø—Ä–æ–≤–æ–¥–Ω–∏–∫) –∏ &lt;em&gt;p-n-p&lt;/em&gt; —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä—ã. –ü–æ—Å–∫–æ–ª—å–∫—É –±–∏–ø–æ–ª—è—Ä–Ω—ã–π —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –¥–≤—É—Ö p-n-–ø–µ—Ä–µ—Ö–æ–¥–æ–≤ –æ—Ç—Å—é–¥–∞ –Ω–∞–∑–≤–∞–Ω–∏–µ ¬´–±–∏–ø–æ–ª—è—Ä–Ω—ã–π¬ª. –ü—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä –≤ —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö –¥–ª—è —É—Å–∏–ª–µ–Ω–∏—è –∏–ª–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∏—Ö –∫–æ–ª–µ–±–∞–Ω–∏–π.&lt;/p&gt;
&lt;!-- 
&lt;a href="http://proiot.ru/blog/posts/2016/11/02/ngspicejs-bipoliarnyi-tranzistor/2N2222.LIB"&gt;&lt;/a&gt;
--&gt;

&lt;p&gt;–í —Å–ª–µ–¥—É—é—â–∏—Ö —Å—Ö–µ–º–∞—Ö –¥–ª—è —Å–∏–º—É–ª—è—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞—Å—å SPICE –º–æ–¥–µ–ª—å –ø–æ–ø—É–ª—è—Ä–Ω–æ–≥–æ n-p-n —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä–∞ 2N2222:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ wget -nc http://www.centralsemi.com/docs/csm/2N2222.LIB
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/11/02/ngspicejs-bipoliarnyi-tranzistor/alpha.sch"&gt;—Å—Ö–µ–º–∞ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –ø–µ—Ä–µ–¥–∞—á–∏ —Ç–æ–∫–∞ —ç–º–∏—Ç—Ç–µ—Ä–∞&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2016/11/02/ngspicejs-bipoliarnyi-tranzistor/alpha.net"&gt;netlist&lt;/a&gt; | &lt;a href="https://ngspice.js.org/?gist=bb2492380d572bb61a545a6c474f3673"&gt;ngspice.js&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;–ö–∞–∫ –≤—ã—Ç–µ–∫–∞–µ—Ç –∏–∑ &lt;a href="http://proiot.ru/blog/posts/2016/10/28/vvedenie-v-simuliatsiiu-elektricheskikh-skhem-s-pomoshchiu-ngspicejs/"&gt;–ø–µ—Ä–≤–æ–≥–æ –∑–∞–∫–æ–Ω–∞ –ö–∏—Ä—Ö–≥–æ—Ñ–∞&lt;/a&gt; I—ç=I–± + I–∫, –≥–¥–µ I—ç I–± I–∫ —Ç–æ–∫–∏ —ç–º–∏—Ç—Ç–µ—Ä–∞ –±–∞–∑—ã –∏ –∫–æ–ª–ª–µ–∫—Ç–æ—Ä–∞ —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä–∞. –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç Œ±, —Å–≤—è–∑—ã–≤–∞—é—â–∏–π —Ç–æ–∫ —ç–º–∏—Ç—Ç–µ—Ä–∞ –∏ —Ç–æ–∫ –∫–æ–ª–ª–µ–∫—Ç–æ—Ä–∞ (I–∫ = Œ± * I—ç), –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–º –ø–µ—Ä–µ–¥–∞—á–∏ —Ç–æ–∫–∞ —ç–º–∏—Ç—Ç–µ—Ä–∞. –ß–∏—Å–ª–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞ Œ± = 0,9...0,999. –ß–µ–º –±–æ–ª—å—à–µ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç, —Ç–µ–º —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–µ–π —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä –ø–µ—Ä–µ–¥–∞—ë—Ç —Ç–æ–∫. –≠—Ç–æ—Ç –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –º–∞–ª–æ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –∫–æ–ª–ª–µ–∫—Ç–æ—Ä-–±–∞–∑–∞ –∏ –±–∞–∑–∞-—ç–º–∏—Ç—Ç–µ—Ä. –ü–æ—ç—Ç–æ–º—É –≤ —à–∏—Ä–æ–∫–æ–º –¥–∏–∞–ø–∞–∑–æ–Ω–µ —Ä–∞–±–æ—á–∏—Ö –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–π —Ç–æ–∫ –∫–æ–ª–ª–µ–∫—Ç–æ—Ä–∞ –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª–µ–Ω —Ç–æ–∫—É –±–∞–∑—ã, –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ —Ä–∞–≤–µ–Ω Œ≤ = Œ±/(1 ‚àí Œ±) = I–∫/I–± = I–∫/(I—ç - I–∫), –æ–±—ã—á–Ω–æ –æ—Ç 10 –¥–æ 1000.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/11/02/ngspicejs-bipoliarnyi-tranzistor/show-img-alpha.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ngspice 1 -&amp;gt; source alpha.net
ngspice 2 -&amp;gt; set temp=0
ngspice 3 -&amp;gt; dc v1 0 2 2m
ngspice 4 -&amp;gt; set temp=25
ngspice 5 -&amp;gt; dc v1 0 2 2m
ngspice 6 -&amp;gt; set temp=50
ngspice 7 -&amp;gt; dc v1 0 2 2m
ngspice 8 -&amp;gt; plot (-dc1.i(v1)) (-dc2.i(v1)) (-dc3.i(v1)) ylimit 0 2m
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ù–∞ –∫–∞—Ä—Ç–∏–Ω–∫–µ 0...0.2–í - –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –Ω–∞—Å—ã—â–µ–Ω–∏—è –∫–æ–ª–ª–µ–∫—Ç–æ—Ä-—ç–º–∏—Ç—Ç–µ—Ä, –ø–æ—Å–ª–µ –∫–æ—Ç–æ—Ä–æ–≥–æ —É—á–∞—Å—Ç–æ–∫ 0.2–í...MAX —è–≤–ª—è–µ—Ç—Å—è –∞–∫—Ç–∏–≤–Ω—ã–º —Ä–µ–∂–∏–º–æ–º —Ä–∞–±–æ—Ç—ã —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä–∞. –ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –ø–µ—Ä–µ–¥–∞—á–∏ –ø–æ —Ç–æ–∫—É –ø–æ—á—Ç–∏ –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –∫–æ–ª–ª–µ–∫—Ç–æ—Ä-—ç–º–∏—Ç—Ç–µ—Ä.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/11/02/ngspicejs-bipoliarnyi-tranzistor/alpha-canvas.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –ø–µ—Ä–µ–¥–∞—á–∏ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –º–æ–¥–µ–ª–∏ —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä–∞, —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã –∏ —á–∞—Å—Ç–æ—Ç—ã —É—Å–∏–ª–∏–≤–∞–µ–º–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞. –ü–æ—Å–ª–µ–¥–Ω–∏–π –ø–∞—Ä–∞–º–µ—Ç—Ä –Ω–∞–∑—ã–≤–∞—é—Ç –ø—Ä–µ–¥–µ–ª—å–Ω–æ–π —á–∞—Å—Ç–æ—Ç–æ–π –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–∞ –ø–µ—Ä–µ–¥–∞—á–∏ —Ç–æ–∫–∞ –±–∞–∑—ã.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ngspice 1 -&amp;gt; source alpha.net
ngspice 2 -&amp;gt; alter v1 10
ngspice 3 -&amp;gt; set temp=0
ngspice 4 -&amp;gt; dc i1 0 2m 2u
ngspice 5 -&amp;gt; set temp=25
ngspice 6 -&amp;gt; dc i1 0 2m 2u
ngspice 7 -&amp;gt; set temp=50
ngspice 8 -&amp;gt; dc i1 0 2m 2u
ngspice 9 -&amp;gt; plot (-dc1.i(v1)) (-dc2.i(v1)) (-dc3.i(v1))
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–í –∏–¥–µ–∞–ª—å–Ω–æ–º –º–∏—Ä–µ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –ø–µ—Ä–µ–¥–∞—á–∏ —Ç–æ–∫–∞ –¥–æ–ª–∂–µ–Ω –±—ã–ª –±—ã –±—ã—Ç—å –∫–æ–Ω—Å—Ç–∞–Ω—Ç–æ–π, –æ–¥–Ω–∞–∫–æ –Ω–∞ &lt;a href="https://ngspice.js.org/?gist=9870d6a51429e0c4a779d228cc41dd62"&gt;–∫–∞—Ä—Ç–∏–Ω–∫–µ&lt;/a&gt; –≤–∏–¥–Ω–æ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–µ –æ—Ç –ø—Ä—è–º–æ–π –ª–∏–Ω–∏–∏. –ù–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ, –µ—Å–ª–∏ —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —É—Å–∏–ª–µ–Ω–∏—è —Å–∏–≥–Ω–∞–ª–∞, —ç—Ç–æ –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ —Ç.–Ω. &lt;em&gt;–Ω–µ–ª–∏–Ω–µ–π–Ω—ã–º –∏—Å–∫–∞–∂–µ–Ω–∏—è–º&lt;/em&gt;. &lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/11/02/ngspicejs-bipoliarnyi-tranzistor/alpha-i-canvas.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/11/03/ngspicejs-polevoi-tranzistor/"&gt;–î–∞–ª–µ–µ&lt;/a&gt; –ø–æ–ª–µ–≤—ã–µ —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä—ã.&lt;/p&gt;</content><category term="gEDA"></category><category term="ngspice"></category></entry><entry><title>NGSPICE.js - –≤—ã–ø—Ä—è–º–∏—Ç–µ–ª—å –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–≥–æ —Ç–æ–∫–∞ –Ω–∞ –¥–∏–æ–¥–∞—Ö</title><link href="http://proiot.ru/blog/posts/2016/11/01/ngspicejs-vypriamitel-peremennogo-toka-na-diodakh/" rel="alternate"></link><published>2016-11-01T00:00:00+02:00</published><updated>2016-11-01T00:00:00+02:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2016-11-01:/blog/posts/2016/11/01/ngspicejs-vypriamitel-peremennogo-toka-na-diodakh/</id><summary type="html">&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/10/28/vvedenie-v-simuliatsiiu-elektricheskikh-skhem-s-pomoshchiu-ngspicejs/"&gt;–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º&lt;/a&gt; –æ—Å–≤–∞–∏–≤–∞—Ç—å NGSPICE –∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ &lt;a href="http://proiot.ru/blog/posts/2016/10/31/ngspicejs-poluprovodnikovyi-diod/"&gt;–ø–æ–ª—É–ø—Ä–æ–≤–æ–¥–Ω–∏–∫–æ–≤—ã—Ö –¥–∏–æ–¥–æ–≤&lt;/a&gt; –≤ —á–∞—Å—Ç–Ω–æ—Å—Ç–∏.&lt;/p&gt;
&lt;p&gt;–í—ã–ø—Ä—è–º–∏—Ç–µ–ª—å —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–æ–≥–æ —Ç–æ–∫–∞ - –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–æ–π —ç–Ω–µ—Ä–≥–∏–∏ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–π –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –≤—Ö–æ–¥–Ω–æ–≥–æ —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–æ–≥–æ —Ç–æ–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ —Ç–æ–∫ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è. –í—ã–ø—Ä—è–º–∏—Ç–µ–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —ç–ª–µ–∫—Ç—Ä–æ–ø—Ä–∏–±–æ—Ä–∞—Ö - –æ—Ç –∑–∞—Ä—è–¥–∫–∏ –¥–ª—è –º–æ–±–∏–ª—å–Ω–æ–≥–æ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –¥–æ —Ç–µ–ª–µ–≤–∏–∑–æ—Ä–æ–≤ –∏ –Ω–æ—É—Ç–±—É–∫–æ–≤. –í —Å–ª–µ–¥—É—é—â–∏—Ö —Å—Ö–µ–º–∞—Ö –¥–ª—è —Å–∏–º—É–ª—è—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞—Å—å SPICE ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/10/28/vvedenie-v-simuliatsiiu-elektricheskikh-skhem-s-pomoshchiu-ngspicejs/"&gt;–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º&lt;/a&gt; –æ—Å–≤–∞–∏–≤–∞—Ç—å NGSPICE –∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ &lt;a href="http://proiot.ru/blog/posts/2016/10/31/ngspicejs-poluprovodnikovyi-diod/"&gt;–ø–æ–ª—É–ø—Ä–æ–≤–æ–¥–Ω–∏–∫–æ–≤—ã—Ö –¥–∏–æ–¥–æ–≤&lt;/a&gt; –≤ —á–∞—Å—Ç–Ω–æ—Å—Ç–∏.&lt;/p&gt;
&lt;p&gt;–í—ã–ø—Ä—è–º–∏—Ç–µ–ª—å —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–æ–≥–æ —Ç–æ–∫–∞ - –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–æ–π —ç–Ω–µ—Ä–≥–∏–∏ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–π –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –≤—Ö–æ–¥–Ω–æ–≥–æ —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–æ–≥–æ —Ç–æ–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ —Ç–æ–∫ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è. –í—ã–ø—Ä—è–º–∏—Ç–µ–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —ç–ª–µ–∫—Ç—Ä–æ–ø—Ä–∏–±–æ—Ä–∞—Ö - –æ—Ç –∑–∞—Ä—è–¥–∫–∏ –¥–ª—è –º–æ–±–∏–ª—å–Ω–æ–≥–æ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –¥–æ —Ç–µ–ª–µ–≤–∏–∑–æ—Ä–æ–≤ –∏ –Ω–æ—É—Ç–±—É–∫–æ–≤. –í —Å–ª–µ–¥—É—é—â–∏—Ö —Å—Ö–µ–º–∞—Ö –¥–ª—è —Å–∏–º—É–ª—è—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∞—Å—å SPICE –º–æ–¥–µ–ª—å –¥–∏–æ–¥–∞ 1n4007.&lt;/p&gt;
&lt;!-- 
&lt;a href="http://proiot.ru/blog/posts/2016/11/01/ngspicejs-vypriamitel-peremennogo-toka-na-diodakh/1n4007.txt"&gt;&lt;/a&gt;
--&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ wget -nc http://www.vishay.com/docs/88000/1n4007.txt
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/11/01/ngspicejs-vypriamitel-peremennogo-toka-na-diodakh/half-wave.sch"&gt;—Å—Ö–µ–º–∞ –æ–¥–Ω–æ–ø–æ–ª—É–ø–µ—Ä–∏–æ–¥–Ω–æ–≥–æ –≤—ã–ø—Ä—è–º–∏—Ç–µ–ª—è&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2016/11/01/ngspicejs-vypriamitel-peremennogo-toka-na-diodakh/half-wave.net"&gt;netlist&lt;/a&gt; | &lt;a href="https://ngspice.js.org/?gist=fd2a88aab52c56f971179c9a1bd9a502"&gt;ngspice.js&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/11/01/ngspicejs-vypriamitel-peremennogo-toka-na-diodakh/show-img-half-wave.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–£ –æ–¥–Ω–æ–ø–æ–ª—É–ø–µ—Ä–∏–æ–¥–Ω—ã—Ö –≤—ã–ø—Ä—è–º–∏—Ç–µ–ª–µ–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–Ω–∞ –ø–æ–ª—É–≤–æ–ª–Ω–∞ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ —Ç–æ–∫–∞ –Ω–∞ –≤—ã—Ö–æ–¥–µ –ø—Ä–∏ –∫–∞–∂–¥–æ–º –ø–æ–ª–Ω–æ–º —Ü–∏–∫–ª–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–≥–æ —Ç–æ–∫–∞ –Ω–∞ –≤—Ö–æ–¥–µ.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/11/01/ngspicejs-vypriamitel-peremennogo-toka-na-diodakh/half-wave-canvas.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ngspice 1 -&amp;gt; source half-wave.net
ngspice 2 -&amp;gt; tran 0.5m 150m
ngspice 3 -&amp;gt; alter r1 1
ngspice 4 -&amp;gt; tran 0.5m 150m
ngspice 5 -&amp;gt; plot tran1.v(n1) tran2.v(n1)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ö—É–¥–∞ –±–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω—ã–º–∏ —è–≤–ª—è—é—Ç—Å—è –¥–≤—É—Ö–ø–æ–ª—É–ø–µ—Ä–∏–æ–¥–Ω—ã–µ –≤—ã–ø—Ä—è–º–∏—Ç–µ–ª–∏. &lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/11/01/ngspicejs-vypriamitel-peremennogo-toka-na-diodakh/bridge.sch"&gt;—Å—Ö–µ–º–∞ –¥–∏–æ–¥–Ω—ã–π –º–æ—Å—Ç&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2016/11/01/ngspicejs-vypriamitel-peremennogo-toka-na-diodakh/bridge.net"&gt;netlist&lt;/a&gt; | &lt;a href="https://ngspice.js.org/?gist=2cf3ee433d7f6ab178d903d7f1c8ecef"&gt;ngspice.js&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/11/01/ngspicejs-vypriamitel-peremennogo-toka-na-diodakh/show-img-bridge.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ngspice 1 -&amp;gt; source bridge.net
ngspice 2 -&amp;gt; tran 0.5m 150m
ngspice 3 -&amp;gt; alter r1 1
ngspice 4 -&amp;gt; tran 0.5m 150m
ngspice 5 -&amp;gt; plot tran1.v(n3) tran2.v(n3)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–î–∏–æ–¥–Ω—ã–π –º–æ—Å—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ–±–∞ –ø–æ–ª—É–ø–µ—Ä–∏–æ–¥–∞ –≤—Ö–æ–¥–Ω–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞ –∏ –ø–æ—ç—Ç–æ–º—É –∏–º–µ–µ–º –º–µ–Ω—å—à—É—é –ø—É–ª—å—Å–∞—Ü–∏—é –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –Ω–∞ –≤—ã—Ö–æ–¥–µ –∏ —ç—Ç–æ –µ—Å—Ç—å –æ—á–µ–Ω—å —Ö–æ—Ä–æ—à–æ:&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/11/01/ngspicejs-vypriamitel-peremennogo-toka-na-diodakh/bridge-canvas.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–ï—â—ë –æ–¥–Ω–æ–π –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–π —Å—Ö–µ–º–æ–π –≤—ã–ø—Ä—è–º–∏—Ç–µ–ª—è —è–≤–ª—è–µ—Ç—Å—è —É–º–Ω–æ–∂–∏—Ç–µ–ª—å –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è:&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/11/01/ngspicejs-vypriamitel-peremennogo-toka-na-diodakh/mul.sch"&gt;—Å—Ö–µ–º–∞ —É–º–Ω–æ–∂–∏—Ç–µ–ª—å –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2016/11/01/ngspicejs-vypriamitel-peremennogo-toka-na-diodakh/mul.net"&gt;netlist&lt;/a&gt; | &lt;a href="https://ngspice.js.org/?gist=b390ade98165e3b89c957c865dff87d2"&gt;ngspice.js&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/11/01/ngspicejs-vypriamitel-peremennogo-toka-na-diodakh/show-img-mul.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ngspice 1 -&amp;gt; source mul.net
ngspice 2 -&amp;gt; tran 1m 500m
ngspice 3 -&amp;gt; plot n2 n4
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–í—Ö–æ–¥–Ω–æ–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–π –ø–∞—Ä—ã –¥–∏–æ–¥–æ–≤ —É–º–Ω–æ–∂–∞–µ—Ç—Å—è –Ω–∞ ~2x (—á–∞—Å—Ç—å –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è —Ç–µ—Ä—è–µ—Ç—Å—è –Ω–∞ –¥–∏–æ–¥–∞—Ö). –í–µ–ª–∏—á–∏–Ω–∞ –≤—ã—Ö–æ–¥–Ω–æ–≥–æ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è, –¥–æ—Å—Ç–∏–≥–Ω—É—Ç–∞—è —Å –ø–æ–º–æ—â—å—é –¥–∞–Ω–Ω–æ–π —Å—Ö–µ–º—ã, –º–æ–∂–µ—Ç –±—ã—Ç—å –≤–µ—Å—å–º–∞ –≤–µ–ª–∏–∫–∞ - –Ω–∞–ø—Ä–∏–º–µ—Ä —É –ª—é—Å—Ç—Ä—ã –ß–∏–∂–µ–≤—Å–∫–æ–≥–æ —ç—Ç–æ –¥–µ—Å—è—Ç–∫–∏ —Ç—ã—Å—è—á –≤–æ–ª—å—Ç.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/11/01/ngspicejs-vypriamitel-peremennogo-toka-na-diodakh/mul-canvas.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/11/02/ngspicejs-bipoliarnyi-tranzistor/"&gt;–î–∞–ª–µ–µ&lt;/a&gt; –±–∏–ø–æ–ª—è—Ä–Ω—ã–π —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä.&lt;/p&gt;</content><category term="gEDA"></category><category term="ngspice"></category></entry><entry><title>NGSPICE.js - –ø–æ–ª—É–ø—Ä–æ–≤–æ–¥–Ω–∏–∫–æ–≤—ã–π –¥–∏–æ–¥</title><link href="http://proiot.ru/blog/posts/2016/10/31/ngspicejs-poluprovodnikovyi-diod/" rel="alternate"></link><published>2016-10-31T00:00:00+02:00</published><updated>2016-10-31T00:00:00+02:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2016-10-31:/blog/posts/2016/10/31/ngspicejs-poluprovodnikovyi-diod/</id><summary type="html">&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/10/28/vvedenie-v-simuliatsiiu-elektricheskikh-skhem-s-pomoshchiu-ngspicejs/"&gt;–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º&lt;/a&gt; –æ—Å–≤–∞–∏–≤–∞—Ç—å NGSPICE.&lt;/p&gt;
&lt;p&gt;–ü–æ–ª—É–ø—Ä–æ–≤–æ–¥–Ω–∏–∫–æ–≤—ã–π –¥–∏–æ–¥ - —Å–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π –ø–æ–ª—É–ø—Ä–æ–≤–æ–¥–Ω–∏–∫–æ–≤—ã–π –ø—Ä–∏–±–æ—Ä, —Å–æ—Å—Ç–æ—è—â–∏–π –∏–∑ –æ–¥–Ω–æ–≥–æ PN –ø–µ—Ä–µ—Ö–æ–¥–∞. –û—Å–Ω–æ–≤–Ω–∞—è –µ–≥–æ —Ñ—É–Ω–∫—Ü–∏—è - —ç—Ç–æ –ø—Ä–æ–≤–æ–¥–∏—Ç—å —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∏–π —Ç–æ–∫ –≤ –æ–¥–Ω–æ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏, –∏ –Ω–µ –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å –µ–≥–æ –≤ –æ–±—Ä–∞—Ç–Ω–æ–º. –°–≤–æ–π—Å—Ç–≤–∞ –¥–∏–æ–¥–æ–≤ –Ω–∞–≥–ª—è–¥–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤–æ–ª—å—Ç-–∞–º–ø–µ—Ä–Ω–∞—è —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ (–í–ê–•) - –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å —Ç–æ–∫–∞ —á–µ—Ä–µ–∑ –¥–≤—É—Ö–ø–æ–ª—é—Å–Ω–∏–∫ –æ—Ç –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –Ω–∞ —ç—Ç–æ–º –¥–≤—É—Ö–ø–æ–ª—é—Å–Ω–∏–∫–µ. –ö–∞–∫ –º—ã —Å–µ–π—á–∞—Å —É–±–µ–¥–∏–º—Å—è ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/10/28/vvedenie-v-simuliatsiiu-elektricheskikh-skhem-s-pomoshchiu-ngspicejs/"&gt;–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º&lt;/a&gt; –æ—Å–≤–∞–∏–≤–∞—Ç—å NGSPICE.&lt;/p&gt;
&lt;p&gt;–ü–æ–ª—É–ø—Ä–æ–≤–æ–¥–Ω–∏–∫–æ–≤—ã–π –¥–∏–æ–¥ - —Å–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π –ø–æ–ª—É–ø—Ä–æ–≤–æ–¥–Ω–∏–∫–æ–≤—ã–π –ø—Ä–∏–±–æ—Ä, —Å–æ—Å—Ç–æ—è—â–∏–π –∏–∑ –æ–¥–Ω–æ–≥–æ PN –ø–µ—Ä–µ—Ö–æ–¥–∞. –û—Å–Ω–æ–≤–Ω–∞—è –µ–≥–æ —Ñ—É–Ω–∫—Ü–∏—è - —ç—Ç–æ –ø—Ä–æ–≤–æ–¥–∏—Ç—å —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∏–π —Ç–æ–∫ –≤ –æ–¥–Ω–æ–º –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–∏, –∏ –Ω–µ –ø—Ä–æ–ø—É—Å–∫–∞—Ç—å –µ–≥–æ –≤ –æ–±—Ä–∞—Ç–Ω–æ–º. –°–≤–æ–π—Å—Ç–≤–∞ –¥–∏–æ–¥–æ–≤ –Ω–∞–≥–ª—è–¥–Ω–æ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –≤–æ–ª—å—Ç-–∞–º–ø–µ—Ä–Ω–∞—è —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ (–í–ê–•) - –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å —Ç–æ–∫–∞ —á–µ—Ä–µ–∑ –¥–≤—É—Ö–ø–æ–ª—é—Å–Ω–∏–∫ –æ—Ç –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –Ω–∞ —ç—Ç–æ–º –¥–≤—É—Ö–ø–æ–ª—é—Å–Ω–∏–∫–µ. –ö–∞–∫ –º—ã —Å–µ–π—á–∞—Å —É–±–µ–¥–∏–º—Å—è –í–ê–• –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –º–æ–¥–µ–ª–∏ –¥–∏–æ–¥–∞ –∏ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã –æ–∫—Ä—É–∂–∞—é—â–µ–π —Å—Ä–µ–¥—ã.&lt;/p&gt;
&lt;!-- 
&lt;a href="http://proiot.ru/blog/posts/2016/10/31/ngspicejs-poluprovodnikovyi-diod/1n4007.txt"&gt;&lt;/a&gt;
--&gt;

&lt;p&gt;–î–ª—è —Å–∏–º—É–ª—è—Ü–∏–∏ –¥–∏–æ–¥–∞ –≤ NGSPICE –Ω–µ–æ–±—Ö–æ–¥–∏–º –Ω–∞–π—Ç–∏ (–æ–±—ã—á–Ω–æ –Ω–∞ &lt;a href="https://www.centralsemi.com/content/engineering/spicemodels/" rel="nofollow"&gt;—Å–∞–π—Ç–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—è&lt;/a&gt;) –µ–≥–æ SPICE –º–æ–¥–µ–ª—å - –Ω–∞–ø—Ä–∏–º–µ—Ä 1n4007:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ wget -nc http://www.vishay.com/docs/88000/1n4007.txt
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/10/31/ngspicejs-poluprovodnikovyi-diod/diode-forward.sch"&gt;—Å—Ö–µ–º–∞ –ø—Ä—è–º–æ–≥–æ –≤–∫–ª—é—á–µ–Ω–∏—è –¥–∏–æ–¥–∞&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2016/10/31/ngspicejs-poluprovodnikovyi-diod/diode-forward.net"&gt;netlist&lt;/a&gt; | &lt;a href="https://ngspice.js.org/?gist=e93497542d39976cfcb6df1d193658c3"&gt;ngspice.js&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/10/31/ngspicejs-poluprovodnikovyi-diod/show-img-diode-forward.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ngspice 1 -&amp;gt; source diode-forward.net
ngspice 2 -&amp;gt; set temp=0
ngspice 3 -&amp;gt; dc i1 0 1 0.001
ngspice 4 -&amp;gt; set temp=25
ngspice 5 -&amp;gt; dc i1 0 1 0.001
ngspice 6 -&amp;gt; set temp=50
ngspice 7 -&amp;gt; dc i1 0 1 0.001
ngspice 8 -&amp;gt; plot dc1.v(n1) dc2.v(n1) dc3.v(n1)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ö—Ä–µ–º–Ω–∏–µ–≤—ã–π –¥–∏–æ–¥ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–∏ ~0.6 –í. –ß–µ–º –≤—ã—à–µ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –æ–∫—Ä—É–∂–∞—é—â–µ–π —Å—Ä–µ–¥—ã, —Ç–µ–º —ç—Ç–æ—Ç –ø–æ—Ä–æ–≥ –æ—Ç–∫—Ä—ã–≤–∞–Ω–∏—è –Ω–µ–º–Ω–æ–≥–æ –º–µ–Ω—å—à–µ.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/10/31/ngspicejs-poluprovodnikovyi-diod/diode-forward-canvas.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–í —É—á–µ–±–Ω–∏–∫–∞—Ö –ø–æ —ç–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–µ –¥–∞—é—Ç –æ–±—ã—á–Ω–æ &lt;a href="https://ngspice.js.org/?gist=38b99db6363f932c6487c70c84502eb0"&gt;–ø–µ—Ä–µ–≤—ë—Ä–Ω—É—Ç—ã–π&lt;/a&gt; –≥—Ä–∞—Ñ–∏–∫ –í–ê–• &lt;code&gt;ngspice 8 -&amp;gt; plot "i-sweep" vs dc1.v(n1) "i-sweep" vs dc2.v(n1) "i-sweep" vs dc3.v(n1)&lt;/code&gt;:&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/10/31/ngspicejs-poluprovodnikovyi-diod/diode-forward-90-canvas.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–ü—Ä–∏ &lt;a href="https://ngspice.js.org/?gist=31de19f98b10bfad7842b38ad3d99ce9"&gt;–æ–±—Ä–∞—Ç–Ω–æ–º –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–∏&lt;/a&gt; —á–µ—Ä–µ–∑ –¥–∏–æ–¥ –ø—Ä–æ—Ç–µ–∫–∞—é—Ç –Ω–µ–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–æ–∫–∏ —É—Ç–µ—á–∫–∏ –∏ —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –µ–≥–æ –∞–∫—Ç–∏–≤–Ω–æ–µ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏–µ –æ—á–µ–Ω—å –±–æ–ª—å—à–æ–µ. –û–¥–Ω–∞–∫–æ –ø—Ä–∏ –≤—ã—Å–æ–∫–æ–º –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–∏, –∫–æ—Ç–æ—Ä–æ–µ –º–æ–∂–µ—Ç –≤–∞—Ä—å–∏—Ä–æ–≤–∞—Ç—å—Å—è –≤ —à–∏—Ä–æ–∫–∏—Ö –ø—Ä–µ–¥–µ–ª–∞—Ö –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –º–æ–¥–µ–ª–∏ –¥–∏–æ–¥–∞, –Ω–∞—Å—Ç—É–ø–∞–µ—Ç –ø—Ä–æ–±–æ–π –∏ —Ç–æ–∫ —á–µ—Ä–µ–∑ —Ä–µ–∑–∫–æ –≤–æ–∑—Ä–∞—Å—Ç–∞–µ—Ç:&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/10/31/ngspicejs-poluprovodnikovyi-diod/diode-backward-90-canvas.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ngspice 1 -&amp;gt; source diode-forward.net
ngspice 2 -&amp;gt; set temp=0
ngspice 3 -&amp;gt; dc i1 -10m 0 10u
ngspice 4 -&amp;gt; set temp=25
ngspice 5 -&amp;gt; dc i1 -10m 0 10u
ngspice 6 -&amp;gt; set temp=50
ngspice 7 -&amp;gt; dc i1 -10m 0 10u
ngspice 8 -&amp;gt; plot &amp;quot;i-sweep&amp;quot; vs dc1.v(n1) &amp;quot;i-sweep&amp;quot; vs dc2.v(n1) &amp;quot;i-sweep&amp;quot; vs dc3.v(n1)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–°–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π —Ç–æ–∫ –≤—ã–∑–æ–≤–µ—Ç –Ω–µ–æ–±—Ä–∞—Ç–∏–º—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫—Ä–∏—Å—Ç–∞–ª–ª–µ –¥–∏–æ–¥–∞, –∞ –≤–æ—Ç –¥–ª—è –Ω–µ–±–æ–ª—å—à–∏—Ö —Ç–æ–∫–æ–≤ —è–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–æ—è –æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤–µ—Å—å–º–∞ –ø–æ–ª–µ–∑–Ω—ã–º. –°—É—â–µ—Å—Ç–≤—É–µ—Ç —Ü–µ–ª–æ–µ –ø–æ–¥—Å–µ–º–µ–π—Å—Ç–≤–æ –ø–æ–ª—É–ø—Ä–æ–≤–æ–¥–Ω–∏–∫–æ–≤—ã—Ö –¥–∏–æ–¥–æ–≤, –Ω–∞–∑—ã–≤–∞–µ–º—ã—Ö —Å—Ç–∞–±–∏–ª–∏—Ç—Ä–æ–Ω–∞–º–∏ –∏–ª–∏ –¥–∏–æ–¥–∞–º–∏ –ó–µ–Ω–µ—Ä–∞, –¥–ª—è –∫–æ—Ç–æ—Ä—ã—Ö –æ–±—Ä–∞—Ç–Ω—ã–π —Ä–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã —è–≤–ª—è–µ—Ç—Å—è –æ—Å–Ω–æ–≤–Ω—ã–º. –í —Ä–µ–∂–∏–º–µ –ø—Ä–æ–±–æ—è –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –Ω–∞ —Å—Ç–∞–±–∏–ª–∏—Ç—Ä–æ–Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —Å –∑–∞–¥–∞–Ω–Ω–æ–π —Ç–æ—á–Ω–æ—Å—Ç—å—é –≤ —à–∏—Ä–æ–∫–æ–º –¥–∏–∞–ø–∞–∑–æ–Ω–µ –æ–±—Ä–∞—Ç–Ω—ã—Ö —Ç–æ–∫–æ–≤.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/11/01/ngspicejs-vypriamitel-peremennogo-toka-na-diodakh/"&gt;–î–∞–ª–µ–µ&lt;/a&gt; –≤—ã–ø—Ä—è–º–∏—Ç–µ–ª—å –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–≥–æ —Ç–æ–∫–∞ –Ω–∞ –¥–∏–æ–¥–∞—Ö. &lt;/p&gt;</content><category term="gEDA"></category><category term="ngspice"></category></entry><entry><title>NGSPICE.js - –∫–æ–ª–µ–±–∞—Ç–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç—É—Ä</title><link href="http://proiot.ru/blog/posts/2016/10/30/ngspicejs-kolebatelnyi-kontur/" rel="alternate"></link><published>2016-10-30T00:00:00+03:00</published><updated>2016-10-30T00:00:00+03:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2016-10-30:/blog/posts/2016/10/30/ngspicejs-kolebatelnyi-kontur/</id><summary type="html">&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/10/28/vvedenie-v-simuliatsiiu-elektricheskikh-skhem-s-pomoshchiu-ngspicejs/"&gt;–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º&lt;/a&gt; –æ—Å–≤–∞–∏–≤–∞—Ç—å NGSPICE.&lt;/p&gt;
&lt;p&gt;–ö–æ–ª–µ–±–∞—Ç–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç—É—Ä (–ö–ö) - —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∞—è —Ü–µ–ø—å, —Å–æ–¥–µ—Ä–∂–∞—â–∞—è –∫–∞—Ç—É—à–∫—É –∏–Ω–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏, –∫–æ–Ω–¥–µ–Ω—Å–∞—Ç–æ—Ä –∏ –∏—Å—Ç–æ—á–Ω–∏–∫ —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–æ–π —ç–Ω–µ—Ä–≥–∏–∏. –ï—Å–ª–∏ —á–∞—Å—Ç–æ—Ç–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ —ç–Ω–µ—Ä–≥–∏–∏ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–π —á–∞—Å—Ç–æ—Ç–æ–π –∫–æ–Ω—Ç—É—Ä–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∑–∞–º–µ—á–∞—Ç–µ–ª—å–Ω–æ–µ —è–≤–ª–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –≤ —Ñ–∏–∑–∏–∫–µ –Ω–∞–∑—ã–≤–∞—é—Ç —Ä–µ–∑–æ–Ω–∞–Ω—Å–æ–º. –†–µ–∑–æ–Ω–∞–Ω—Å–Ω–∞—è —á–∞—Å—Ç–æ—Ç–∞ –∫–æ–Ω—Ç—É—Ä–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è —Ç–∞–∫ –Ω–∞–∑—ã–≤–∞–µ–º–æ–π —Ñ–æ—Ä–º—É–ª–æ–π –¢–æ–º—Å–æ–Ω–∞: &lt;code&gt;f = 1/(2œÄ‚àöLC)&lt;/code&gt;. –ü—Ä–∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–∏ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Ü–µ–ø–∏ ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/10/28/vvedenie-v-simuliatsiiu-elektricheskikh-skhem-s-pomoshchiu-ngspicejs/"&gt;–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º&lt;/a&gt; –æ—Å–≤–∞–∏–≤–∞—Ç—å NGSPICE.&lt;/p&gt;
&lt;p&gt;–ö–æ–ª–µ–±–∞—Ç–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç—É—Ä (–ö–ö) - —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∞—è —Ü–µ–ø—å, —Å–æ–¥–µ—Ä–∂–∞—â–∞—è –∫–∞—Ç—É—à–∫—É –∏–Ω–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏, –∫–æ–Ω–¥–µ–Ω—Å–∞—Ç–æ—Ä –∏ –∏—Å—Ç–æ—á–Ω–∏–∫ —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–æ–π —ç–Ω–µ—Ä–≥–∏–∏. –ï—Å–ª–∏ —á–∞—Å—Ç–æ—Ç–∞ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ —ç–Ω–µ—Ä–≥–∏–∏ —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–π —á–∞—Å—Ç–æ—Ç–æ–π –∫–æ–Ω—Ç—É—Ä–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∑–∞–º–µ—á–∞—Ç–µ–ª—å–Ω–æ–µ —è–≤–ª–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –≤ —Ñ–∏–∑–∏–∫–µ –Ω–∞–∑—ã–≤–∞—é—Ç —Ä–µ–∑–æ–Ω–∞–Ω—Å–æ–º. –†–µ–∑–æ–Ω–∞–Ω—Å–Ω–∞—è —á–∞—Å—Ç–æ—Ç–∞ –∫–æ–Ω—Ç—É—Ä–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è —Ç–∞–∫ –Ω–∞–∑—ã–≤–∞–µ–º–æ–π —Ñ–æ—Ä–º—É–ª–æ–π –¢–æ–º—Å–æ–Ω–∞: &lt;code&gt;f = 1/(2œÄ‚àöLC)&lt;/code&gt;. –ü—Ä–∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–∏ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Ü–µ–ø–∏ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ä–µ–∑–æ–Ω–∞–Ω—Å –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–π, –ø—Ä–∏ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–º - —Ä–µ–∑–æ–Ω–∞–Ω—Å —Ç–æ–∫–æ–≤.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/10/30/ngspicejs-kolebatelnyi-kontur/serial.sch"&gt;—Å—Ö–µ–º–∞ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–≥–æ –ö–ö&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2016/10/30/ngspicejs-kolebatelnyi-kontur/serial.net"&gt;netlist&lt;/a&gt; | &lt;a href="https://ngspice.js.org/?gist=5e3f4a6715af6a2a93ffb06da9f3d023"&gt;ngspice.js&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/10/30/ngspicejs-kolebatelnyi-kontur/show-img-serial.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ngspice 1 -&amp;gt; source serial.net
ngspice 2 -&amp;gt; ac lin 1000 3780Hz 3800Hz
ngspice 3 -&amp;gt; alter r1 2m
ngspice 4 -&amp;gt; ac lin 1000 3780Hz 3800Hz
ngspice 5 -&amp;gt; plot ac1.i(v1) ac2.i(v1)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ü—Ä–∏ —Ä–µ–∑–æ–Ω–∞–Ω—Å–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–π —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∏–π –∏–º–ø–µ–¥–∞–Ω—Å –ö–ö —Å—Ç—Ä–µ–º–∏—Ç—Å—è –∫ –≤–µ–ª–∏—á–∏–Ω–µ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏—è R1. –î–æ–±—Ä–æ—Ç–Ω–æ—Å—Ç—å –ö–ö –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –≤–µ–ª–∏—á–∏–Ω–æ–π —Å–æ–ø—Ä–æ—Ç–∏–≤–ª–µ–Ω–∏—è R1 - —á–µ–º –æ–Ω–æ –º–µ–Ω—å—à–µ —Ç–µ–º –≤—ã—à–µ –¥–æ–±—Ä–æ—Ç–Ω–æ—Å—Ç—å –∏ —Ç–µ–º —É–∂–µ –ø–æ–ª–æ—Å–∞ –ø—Ä–æ–ø—É—Å–∫–∞–Ω–∏—è. –ü–æ —Ñ–æ—Ä–º—É–ª–µ —á–∞—Å—Ç–æ—Ç–∞ —Ä–µ–∑–æ–Ω–∞–Ω—Å–∞ &lt;a href="https://bc.js.org/"&gt;—Ä–∞–≤–Ω–∞&lt;/a&gt; &lt;code&gt;1/(2*3.14*sqrt(42*10^-6*42*10^-6)) = 3791.3&lt;/code&gt; –ì—Ü.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/10/30/ngspicejs-kolebatelnyi-kontur/serial-canvas.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–í —Å–ª–µ–¥—É—é—â–µ–π —Å—Ö–µ–º–µ –¥–ª—è –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏—è —Ä–∞–±–æ—Ç—ã –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–≥–æ –ö–ö –∏—Å—Ç–æ—á–Ω–∏–∫ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –∑–∞–º–µ–Ω—ë–Ω –Ω–∞ –∏—Å—Ç–æ—á–Ω–∏–∫ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–≥–æ —Ç–æ–∫–∞:&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/10/30/ngspicejs-kolebatelnyi-kontur/parallel.sch"&gt;—Å—Ö–µ–º–∞ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–≥–æ –ö–ö&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2016/10/30/ngspicejs-kolebatelnyi-kontur/parallel.net"&gt;netlist&lt;/a&gt; | &lt;a href="https://ngspice.js.org/?gist=21c6cf0b8c1274661bf845c5313b6408"&gt;ngspice.js&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/10/30/ngspicejs-kolebatelnyi-kontur/show-img-parallel.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ngspice 1 -&amp;gt; source parallel.net
ngspice 2 -&amp;gt; ac lin 1000 3780Hz 3800Hz
ngspice 3 -&amp;gt; alter r1 2k
ngspice 4 -&amp;gt; ac lin 1000 3780Hz 3800Hz
ngspice 5 -&amp;gt; plot ac1.v(n1) ac2.v(n1)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ü—Ä–∏ —Ä–µ–∑–æ–Ω–∞–Ω—Å–µ —Ç–æ–∫–æ–≤ –∏–º–ø–µ–¥–∞–Ω—Å –ö–ö —Ç–∞–∫–∂–µ —Å—Ç—Ä–µ–º–∏—Ç—Å—è –∫ –≤–µ–ª–∏—á–∏–Ω–µ R1, –ø—Ä–∏ —ç—Ç–æ–º –ø–æ–ª–æ—Å–∞ –ø—Ä–æ–ø—É—Å–∫–∞–Ω–∏—è —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è –ø—Ä–∏ —É–≤–µ–ª–∏—á–µ–Ω–∏–∏ R1. &lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/10/30/ngspicejs-kolebatelnyi-kontur/parallel-canvas.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–î–∞–ª–µ–µ &lt;a href="http://proiot.ru/blog/posts/2016/10/31/ngspicejs-poluprovodnikovyi-diod/"&gt;–ø–æ–ª—É–ø—Ä–æ–≤–æ–¥–Ω–∏–∫–∏&lt;/a&gt;.&lt;/p&gt;</content><category term="gEDA"></category><category term="ngspice"></category></entry><entry><title>NGSPICE.js - RC —Ñ–∏–ª—å—Ç—Ä –Ω–∏–∂–Ω–∏—Ö —á–∞—Å—Ç–æ—Ç</title><link href="http://proiot.ru/blog/posts/2016/10/29/ngspicejs-rc-filtr-nizhnikh-chastot/" rel="alternate"></link><published>2016-10-29T00:00:00+03:00</published><updated>2016-10-29T00:00:00+03:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2016-10-29:/blog/posts/2016/10/29/ngspicejs-rc-filtr-nizhnikh-chastot/</id><summary type="html">&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/10/28/vvedenie-v-simuliatsiiu-elektricheskikh-skhem-s-pomoshchiu-ngspicejs/"&gt;–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º&lt;/a&gt; –æ—Å–≤–∞–∏–≤–∞—Ç—å NGSPICE.&lt;/p&gt;
&lt;p&gt;–§–∏–ª—å—Ç—Ä –Ω–∏–∂–Ω–∏—Ö —á–∞—Å—Ç–æ—Ç (–§–ù–ß, low-pass filter) - —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã–π –∏–ª–∏ –ª—é–±–æ–π –¥—Ä—É–≥–æ–π —Ñ–∏–ª—å—Ç—Ä, —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –ø—Ä–æ–ø—É—Å–∫–∞—é—â–∏–π —á–∞—Å—Ç–æ—Ç–Ω—ã–π —Å–ø–µ–∫—Ç—Ä —Å–∏–≥–Ω–∞–ª–∞ –Ω–∏–∂–µ –Ω–µ–∫–æ—Ç–æ—Ä–æ–π —á–∞—Å—Ç–æ—Ç—ã (—á–∞—Å—Ç–æ—Ç—ã —Å—Ä–µ–∑–∞) –∏ –ø–æ–¥–∞–≤–ª—è—é—â–∏–π —á–∞—Å—Ç–æ—Ç—ã —Å–∏–≥–Ω–∞–ª–∞ –≤—ã—à–µ —ç—Ç–æ–π —á–∞—Å—Ç–æ—Ç—ã. –§–í–ß - —ç—Ç–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ high-pass filter.&lt;/p&gt;
&lt;p&gt;RC-—Ñ–∏–ª—å—Ç—Ä—ã –ø—Ä–µ–¥—Å—Ç–≤–∞–ª—è—é—Ç —Å–æ–±–æ–π —Ü–µ–ø–æ—á–∫—É, —Å–æ—Å—Ç–æ—è—â—É—é –∏–∑ —Ä–µ–∑–∏—Å—Ç–æ—Ä–∞ –∏ –∫–æ–Ω–¥–µ–Ω—Å–∞—Ç–æ—Ä–∞. –í –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∏—Ö —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏—è ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/10/28/vvedenie-v-simuliatsiiu-elektricheskikh-skhem-s-pomoshchiu-ngspicejs/"&gt;–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º&lt;/a&gt; –æ—Å–≤–∞–∏–≤–∞—Ç—å NGSPICE.&lt;/p&gt;
&lt;p&gt;–§–∏–ª—å—Ç—Ä –Ω–∏–∂–Ω–∏—Ö —á–∞—Å—Ç–æ—Ç (–§–ù–ß, low-pass filter) - —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã–π –∏–ª–∏ –ª—é–±–æ–π –¥—Ä—É–≥–æ–π —Ñ–∏–ª—å—Ç—Ä, —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –ø—Ä–æ–ø—É—Å–∫–∞—é—â–∏–π —á–∞—Å—Ç–æ—Ç–Ω—ã–π —Å–ø–µ–∫—Ç—Ä —Å–∏–≥–Ω–∞–ª–∞ –Ω–∏–∂–µ –Ω–µ–∫–æ—Ç–æ—Ä–æ–π —á–∞—Å—Ç–æ—Ç—ã (—á–∞—Å—Ç–æ—Ç—ã —Å—Ä–µ–∑–∞) –∏ –ø–æ–¥–∞–≤–ª—è—é—â–∏–π —á–∞—Å—Ç–æ—Ç—ã —Å–∏–≥–Ω–∞–ª–∞ –≤—ã—à–µ —ç—Ç–æ–π —á–∞—Å—Ç–æ—Ç—ã. –§–í–ß - —ç—Ç–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ high-pass filter.&lt;/p&gt;
&lt;p&gt;RC-—Ñ–∏–ª—å—Ç—Ä—ã –ø—Ä–µ–¥—Å—Ç–≤–∞–ª—è—é—Ç —Å–æ–±–æ–π —Ü–µ–ø–æ—á–∫—É, —Å–æ—Å—Ç–æ—è—â—É—é –∏–∑ —Ä–µ–∑–∏—Å—Ç–æ—Ä–∞ –∏ –∫–æ–Ω–¥–µ–Ω—Å–∞—Ç–æ—Ä–∞. –í –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∏—Ö —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏—è —Ñ–∏–ª—å—Ç—Ä –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç –∏–ª–∏ –≤–µ—Ä—Ö–Ω–∏–µ –∏–ª–∏ –Ω–∏–∂–Ω–∏–µ —á–∞—Å—Ç–æ—Ç—ã. –ß–∞—Å—Ç–æ—Ç–∞ —Å—Ä–µ–∑–∞ &lt;code&gt;f = 1/(2œÄRC)&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/10/29/ngspicejs-rc-filtr-nizhnikh-chastot/rcSIN.sch"&gt;—Å—Ö–µ–º–∞ –§–ù–ß&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2016/10/29/ngspicejs-rc-filtr-nizhnikh-chastot/rcSIN.net"&gt;netlist&lt;/a&gt; | &lt;a href="https://ngspice.js.org/?gist=1bc9e1a86a0a9de1d2d14ad8c7ed381e"&gt;ngspice.js&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/10/29/ngspicejs-rc-filtr-nizhnikh-chastot/show-img-sin.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ngspice 1 -&amp;gt; source rcSIN.net
ngspice 2 -&amp;gt; tran 0.05us 25us
ngspice 3 -&amp;gt; plot n0 n1
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Transient (tran) - –∞–Ω–∞–ª–∏–∑ –ø–æ–≤–µ–¥–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã –≤–æ –≤—Ä–µ–º–µ–Ω–∏. –í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ —à–∞–≥ 0.05, –æ–±—â–µ–µ –≤—Ä–µ–º—è 25.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/10/29/ngspicejs-rc-filtr-nizhnikh-chastot/sin-canvas.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–ê–º–ø–ª–∏—Ç—É–¥–Ω–æ-—á–∞—Å—Ç–æ—Ç–Ω–∞—è —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ (–ê–ß–•) - –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –∞–º–ø–ª–∏—Ç—É–¥—ã –≤—ã—Ö–æ–¥–Ω–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞ –æ—Ç —á–∞—Å—Ç–æ—Ç—ã –≤—Ö–æ–¥–Ω–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞:&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/10/29/ngspicejs-rc-filtr-nizhnikh-chastot/rcAC.sch"&gt;—Å—Ö–µ–º–∞ –§–ù–ß&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2016/10/29/ngspicejs-rc-filtr-nizhnikh-chastot/rcAC.net"&gt;netlist&lt;/a&gt; | &lt;a href="https://ngspice.js.org/?gist=5e8d12da0a8572c0100f671b8fdfe348"&gt;ngspice.js&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/10/29/ngspicejs-rc-filtr-nizhnikh-chastot/show-img-ac.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ngspice 1 -&amp;gt; source rcAC.net
ngspice 2 -&amp;gt; ac lin 1000 0.1 250kHz
ngspice 3 -&amp;gt; plot n0 n1
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ß–∞—Å—Ç–æ—Ç–∞ —Å—Ä–µ–∑–∞ –ø–æ &lt;a href="https://bc.js.org/"&gt;—Ñ–æ—Ä–º—É–ª–µ&lt;/a&gt; &lt;code&gt;1/(2*3.14*10000*10^-9) = 15923.57 Hz&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/10/29/ngspicejs-rc-filtr-nizhnikh-chastot/ac-canvas.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ngspice 1 -&amp;gt; source rcAC.net
ngspice 2 -&amp;gt; ac lin 1000 0.1 250kHz
ngspice 3 -&amp;gt; plot n1 xlog
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–î–ª—è –ê–ß–• &lt;a href="https://ngspice.js.org/?gist=cb74cef950521d483073204ba92ce141"&gt;–ª–æ–≥–∞—Ä–∏—Ñ–º–∏—á–µ—Å–∫–∞—è&lt;/a&gt; —à–∫–∞–ª–∞ –∫–∞–∫ –ø—Ä–∞–≤–∏–ª–æ –≤—ã–≥–ª—è–¥–∏—Ç –Ω–∞–≥–ª—è–¥–Ω–µ–µ:&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/10/29/ngspicejs-rc-filtr-nizhnikh-chastot/ac-xlog-canvas.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/10/30/ngspicejs-kolebatelnyi-kontur/"&gt;–î–∞–ª–µ–µ&lt;/a&gt; —è–≤–ª–µ–Ω–∏–µ —Ä–µ–∑–æ–Ω–∞–Ω—Å–∞.&lt;/p&gt;</content><category term="gEDA"></category><category term="ngspice"></category></entry><entry><title>–í–≤–µ–¥–µ–Ω–∏–µ –≤ —Å–∏–º—É–ª—è—Ü–∏—é —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∏—Ö —Å—Ö–µ–º —Å –ø–æ–º–æ—â—å—é NGSPICE.js</title><link href="http://proiot.ru/blog/posts/2016/10/28/vvedenie-v-simuliatsiiu-elektricheskikh-skhem-s-pomoshchiu-ngspicejs/" rel="alternate"></link><published>2016-10-28T00:00:00+03:00</published><updated>2016-10-28T00:00:00+03:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2016-10-28:/blog/posts/2016/10/28/vvedenie-v-simuliatsiiu-elektricheskikh-skhem-s-pomoshchiu-ngspicejs/</id><summary type="html">&lt;p&gt;SPICE (&lt;strong&gt;S&lt;/strong&gt;imulation &lt;strong&gt;P&lt;/strong&gt;rogram with &lt;strong&gt;I&lt;/strong&gt;ntegrated &lt;strong&gt;C&lt;/strong&gt;ircuit &lt;strong&gt;E&lt;/strong&gt;mphasis) - –∞–ª–≥–æ—Ä–∏—Ç–º –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤, –ø—Ä–æ—Ç–µ–∫–∞—é—â–∏—Ö –≤ —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∏—Ö —Å—Ö–µ–º–∞—Ö, —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π –≤ –∫–æ–Ω—Ü–µ 70-—Ö –≥–æ–¥–æ–≤ –≤ —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–µ –ë–µ—Ä–∫–ª–∏ (–ö–∞–ª–∏—Ñ–æ—Ä–Ω–∏—è). NGSPICE —è–≤–ª—è–µ—Ç—Å—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ Spice3f5 —Å –æ—Ç–∫—Ä—ã—Ç—ã–º –∫–æ–¥–æ–º.&lt;/p&gt;
&lt;p&gt;–ù–∞–∏–±–æ–ª–µ–µ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è 5 –≤–∏–¥–æ–≤ –∞–Ω–∞–ª–∏–∑–∞ —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã—Ö —Å—Ö–µ–º:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;OP: –ó–∞–º–µ—Ä –∑–Ω–∞—á–µ–Ω–∏–π –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è/—Ç–æ–∫–∞ –ø—Ä–∏ ‚Ä¶&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;</summary><content type="html">&lt;p&gt;SPICE (&lt;strong&gt;S&lt;/strong&gt;imulation &lt;strong&gt;P&lt;/strong&gt;rogram with &lt;strong&gt;I&lt;/strong&gt;ntegrated &lt;strong&gt;C&lt;/strong&gt;ircuit &lt;strong&gt;E&lt;/strong&gt;mphasis) - –∞–ª–≥–æ—Ä–∏—Ç–º –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤, –ø—Ä–æ—Ç–µ–∫–∞—é—â–∏—Ö –≤ —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∏—Ö —Å—Ö–µ–º–∞—Ö, —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π –≤ –∫–æ–Ω—Ü–µ 70-—Ö –≥–æ–¥–æ–≤ –≤ —É–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–µ –ë–µ—Ä–∫–ª–∏ (–ö–∞–ª–∏—Ñ–æ—Ä–Ω–∏—è). NGSPICE —è–≤–ª—è–µ—Ç—Å—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ Spice3f5 —Å –æ—Ç–∫—Ä—ã—Ç—ã–º –∫–æ–¥–æ–º.&lt;/p&gt;
&lt;p&gt;–ù–∞–∏–±–æ–ª–µ–µ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è 5 –≤–∏–¥–æ–≤ –∞–Ω–∞–ª–∏–∑–∞ —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã—Ö —Å—Ö–µ–º:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;OP: –ó–∞–º–µ—Ä –∑–Ω–∞—á–µ–Ω–∏–π –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è/—Ç–æ–∫–∞ –ø—Ä–∏ —É—Å—Ç–æ–π—á–∏–≤–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏ —Å–∏—Å—Ç–µ–º—ã. –ù–∞–ø—Ä–∏–º–µ—Ä –∑–∞–º–µ—Ä –ø–æ—Ç—Ä–µ–±–ª—è–µ–º–æ–π –º–æ—â–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –≤—Ö–æ–¥–Ω–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;DC: –∞–Ω–∞–ª–∏–∑ –ø–æ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–º—É —Ç–æ–∫—É –ø–æ—Å—Ä–µ–¥—Å—Ç–≤–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–≥–æ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –∏/–∏–ª–∏ —Ç–æ–∫–∞. –ü—Ä–∏–º–µ—Ä - —Å–Ω—è—Ç–∏–µ –≤–æ–ª—å—Ç-–∞–º–ø–µ—Ä–Ω–æ–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –¥–∏–æ–¥–∞&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;AC: –∞–Ω–∞–ª–∏–∑ –ø–æ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–º—É —Ç–æ–∫—É –ø–æ—Å—Ä–µ–¥—Å—Ç–≤–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è —á–∞—Å—Ç–æ—Ç—ã. –ü—Ä–∏–º–µ—Ä - –∞–Ω–∞–ª–∏–∑ —á–∞—Å—Ç–æ—Ç–Ω–æ–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ RC —Ñ–∏–ª—å—Ç—Ä–∞&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Transient: –ê–Ω–∞–ª–∏–∑ –ø–æ–≤–µ–¥–µ–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã –≤–æ –≤—Ä–µ–º–µ–Ω–∏. –ù–∞–ø—Ä–∏–º–µ—Ä –ø–æ–¥–±–æ—Ä –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Å—Ö–µ–º—ã –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞ —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∏—Ö –∫–æ–ª–µ–±–∞–Ω–∏–π&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Fourier: –†–∞–∑–ª–æ–∂–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –≤ —Ä—è–¥ –§—É—Ä—å–µ. –ü–æ–∑–≤–æ–ª—è–µ—Ç –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ –æ—Ü–µ–Ω–∏—Ç—å –Ω–µ–ª–∏–Ω–µ–π–Ω—ã–µ –∏—Å–∫–∞–∂–µ–Ω–∏—è —Å–∏–≥–Ω–∞–ª–∞&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;–ù–∞—á–Ω—ë–º —Å –ø—Ä–æ–≤–µ—Ä–∫–∏ –∑–∞–∫–æ–Ω–æ–≤ –ö–∏—Ä—Ö–≥–æ—Ñ–∞ —Å –ø–æ–º–æ—â—å—é –ø—Ä–æ—Å—Ç–æ–≥–æ OP –∞–Ω–∞–ª–∏–∑–∞.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/10/28/vvedenie-v-simuliatsiiu-elektricheskikh-skhem-s-pomoshchiu-ngspicejs/ui.gif" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–ù–∞ –≤—Ö–æ–¥ ngspice –ø—Ä–∏—Ö–æ–¥–∏—Ç —Å—Ö–µ–º–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ &lt;a href="https://ru.wikipedia.org/wiki/%D0%A1%D0%BF%D0%B8%D1%81%D0%BE%D0%BA_%D1%81%D0%BE%D0%B5%D0%B4%D0%B8%D0%BD%D0%B5%D0%BD%D0%B8%D0%B9" rel="nofollow"&gt;netlist&lt;/a&gt;. –í –¥–∞–Ω–Ω–æ–º –º–∞—Ç–µ—Ä–∏–∞–ª–µ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∏—Ö —Å—Ö–µ–º –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è &lt;a href="http://wiki.geda-project.org/geda:ngspice_and_gschem" rel="nofollow"&gt;gschem&lt;/a&gt; + gnetlist.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ gnetlist -g spice-sdb -o kirghof.net kirghof.sch
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/10/28/vvedenie-v-simuliatsiiu-elektricheskikh-skhem-s-pomoshchiu-ngspicejs/kirghof.sch"&gt;—Å—Ö–µ–º–∞&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2016/10/28/vvedenie-v-simuliatsiiu-elektricheskikh-skhem-s-pomoshchiu-ngspicejs/kirghof.net"&gt;netlist&lt;/a&gt; | &lt;a href="https://ngspice.js.org/?gist=f416efb827fa91fd7badacc588c55bd8"&gt;ngspice.js&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/10/28/vvedenie-v-simuliatsiiu-elektricheskikh-skhem-s-pomoshchiu-ngspicejs/show-img-kirghof.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;ngspice 1 -&amp;gt; source kirghof.net
ngspice 2 -&amp;gt; op
ngspice 3 -&amp;gt; show v1 v2 v3
ngspice 4 -&amp;gt; print i(v1) i(v2) i(v3)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–†–µ–∑—É–ª—å—Ç–∞—Ç: i(v1) = -2.54545 | i(v2) = -1.18182 | i(v3) = -3.72727&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;–ü–µ—Ä–≤—ã–π –∑–∞–∫–æ–Ω –ö–∏—Ä—Ö–≥–æ—Ñ–∞&lt;/strong&gt;: &lt;em&gt;–∞–ª–≥–µ–±—Ä–∞–∏—á–µ—Å–∫–∞—è —Å—É–º–º–∞ —Ç–æ–∫–æ–≤, —Å—Ö–æ–¥—è—â–∏—Ö—Å—è –≤ –ª—é–±–æ–º —É–∑–ª–µ, —Ä–∞–≤–Ω–∞ –Ω—É–ª—é&lt;/em&gt; ( &lt;code&gt;-2.54545 -1.18182 = -3.72727&lt;/code&gt; )&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;–í—Ç–æ—Ä–æ–π –∑–∞–∫–æ–Ω –ö–∏—Ä—Ö–≥–æ—Ñ–∞&lt;/strong&gt;: &lt;em&gt;–∞–ª–≥–µ–±—Ä–∞–∏—á–µ—Å–∫–∞—è —Å—É–º–º–∞ –ø–∞–¥–µ–Ω–∏–π –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–π –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —É—á–∞—Å—Ç–∫–∞—Ö –∑–∞–º–∫–Ω—É—Ç–æ–≥–æ –∫–æ–Ω—Ç—É—Ä–∞, –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–æ –≤—ã–¥–µ–ª–µ–Ω–Ω–æ–≥–æ –≤ —Å–ª–æ–∂–Ω–æ–π —Ä–∞–∑–≤–µ—Ç–≤–ª–µ–Ω–Ω–æ–π —Ü–µ–ø–∏, —Ä–∞–≤–Ω–∞ –∞–ª–≥–µ–±—Ä–∞–∏—á–µ—Å–∫–æ–π —Å—É–º–º–µ –≠–î–° –≤ —ç—Ç–æ–º –∫–æ–Ω—Ç—É—Ä–µ&lt;/em&gt; ( &lt;code&gt;2.54545*10 - 1.18182*30 = 40-50&lt;/code&gt; )&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/10/29/ngspicejs-rc-filtr-nizhnikh-chastot/"&gt;–î–∞–ª–µ–µ&lt;/a&gt; RC - —Ü–µ–ø–æ—á–∫–∞.&lt;/p&gt;</content><category term="gEDA"></category><category term="ngspice"></category></entry><entry><title>–£–º–Ω—ã–π –î–æ–º - –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π UPnP/DLNA</title><link href="http://proiot.ru/blog/posts/2016/08/12/umnyi-dom-avtomatizatsiia-ustroistv-s-podderzhkoi-upnpdlna/" rel="alternate"></link><published>2016-08-12T00:00:00+03:00</published><updated>2016-08-12T00:00:00+03:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2016-08-12:/blog/posts/2016/08/12/umnyi-dom-avtomatizatsiia-ustroistv-s-podderzhkoi-upnpdlna/</id><summary type="html">&lt;p&gt;Universal Plug and Play (&lt;a href="http://upnp.org/specs/arch/UPnP-arch-DeviceArchitecture-v1.1.pdf" rel="nofollow"&gt;UPnP&lt;/a&gt;) - —ç—Ç–æ –Ω–∞–±–æ—Ä –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤ –¥–ª—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –∏ –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å–µ—Ç–µ–≤—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤. –î–µ–≤–∞–π—Å–æ–º –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ—á—Ç–∏ –≤—Å–µ —á—Ç–æ —É–≥–æ–¥–Ω–æ: —Ä–æ—É—Ç–µ—Ä, –ø—Ä–∏–Ω—Ç–µ—Ä, Smart TV, –º–æ–±–∏–ª—å–Ω—ã–π —Ç–µ–ª–µ—Ñ–æ–Ω - –≥–ª–∞–≤–Ω–æ–µ —á—Ç–æ–±—ã –æ–Ω –±—ã–ª –ø–æ–¥–∫–ª—é—á—ë–Ω –∫ —Å–µ—Ç–∏ –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–ª —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—é UPnP/DLNA.&lt;/p&gt;
&lt;p&gt;–¢—É—Ç –ø–æ–∂–∞–ª—É–π —Å—Ç–æ–∏—Ç —Å–¥–µ–ª–∞—Ç—å —Ä–∏—Ç–æ—Ä–∏—á–µ—Å–∫–æ–µ –æ—Ç—Å—Ç—É–ø–ª–µ–Ω–∏–µ. –ó–∞—á–µ–º –Ω–∞–º &lt;a href="http://2gusia.livejournal.com/37929.html" rel="nofollow"&gt;–¥–≤–µ ‚Ä¶&lt;/a&gt;&lt;/p&gt;</summary><content type="html">&lt;p&gt;Universal Plug and Play (&lt;a href="http://upnp.org/specs/arch/UPnP-arch-DeviceArchitecture-v1.1.pdf" rel="nofollow"&gt;UPnP&lt;/a&gt;) - —ç—Ç–æ –Ω–∞–±–æ—Ä –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤ –¥–ª—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –∏ –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å–µ—Ç–µ–≤—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤. –î–µ–≤–∞–π—Å–æ–º –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ—á—Ç–∏ –≤—Å–µ —á—Ç–æ —É–≥–æ–¥–Ω–æ: —Ä–æ—É—Ç–µ—Ä, –ø—Ä–∏–Ω—Ç–µ—Ä, Smart TV, –º–æ–±–∏–ª—å–Ω—ã–π —Ç–µ–ª–µ—Ñ–æ–Ω - –≥–ª–∞–≤–Ω–æ–µ —á—Ç–æ–±—ã –æ–Ω –±—ã–ª –ø–æ–¥–∫–ª—é—á—ë–Ω –∫ —Å–µ—Ç–∏ –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–ª —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—é UPnP/DLNA.&lt;/p&gt;
&lt;p&gt;–¢—É—Ç –ø–æ–∂–∞–ª—É–π —Å—Ç–æ–∏—Ç —Å–¥–µ–ª–∞—Ç—å —Ä–∏—Ç–æ—Ä–∏—á–µ—Å–∫–æ–µ –æ—Ç—Å—Ç—É–ø–ª–µ–Ω–∏–µ. –ó–∞—á–µ–º –Ω–∞–º &lt;a href="http://2gusia.livejournal.com/37929.html" rel="nofollow"&gt;–¥–≤–µ&lt;/a&gt; —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ UPnP –∏ DLNA ? –¢–∞–∫ —Å–ª–æ–∂–∏–ª–æ—Å—å –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏. –° —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è –±—ã—Ç–æ–≤–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è - —ç—Ç–æ –ø–æ—á—Ç–∏ –æ–¥–Ω–æ –∏ —Ç–æ –∂–µ. –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏ DLNA –±–∞–∑–∏—Ä—É–µ—Ç—Å—è –Ω–∞ UPnP, –Ω–∞–∫–ª–∞–¥—ã–≤–∞—è –Ω–∞ –Ω–µ–≥–æ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è.
UPnP - –Ω–∞–±–æ—Ä –æ—Ç–∫—Ä—ã—Ç—ã—Ö –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö —Å–µ—Ç–µ–≤—ã—Ö –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤, –≤ —Ç–æ –≤—Ä–µ–º—è –∫–∞–∫ –¥–ª—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏  DLNA –æ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—è –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è —Ç—Ä–µ–±—É–µ—Ç—Å—è –∑–∞–ø–ª–∞—Ç–∏—Ç—å &lt;a href="http://www.dlna.org/certification/certification" rel="nofollow"&gt;–¥–µ–Ω—é—à–∫—É&lt;/a&gt;. –¢–∞–∫–∂–µ DLNA –ø—Ä–∏–≤–Ω–æ—Å–∏—Ç –∏–Ω—Ç–µ—Ä–µ—Å—ã –ø—Ä–∞–≤–æ–æ–±–ª–∞–¥–∞—Ç–µ–ª—è, —Å—Ç—Ä–µ–º—è—Å—å –¥–æ–ø—É—Å—Ç–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–æ–ª—å–∫–æ "–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ" –º–µ–¥–∏–∞–∫–æ–Ω—Ç–µ–Ω—Ç–∞. –•–æ—Ä–æ—à–∏–π –ø—Ä–∏–º–µ—Ä - —Ñ–æ—Ä–º–∞—Ç mkv, —Å—Ç–æ–ª—å —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω—ã–π –≤ —Å–µ—Ç–∏ –∏ —Å—Ç–æ–ª—å –Ω–µ–Ω–∞–≤–∏—Å—Ç–Ω—ã–π –º–Ω–æ–≥–∏–º –ø—Ä–∞–≤–æ–æ–±–ª–∞–¥–∞—Ç–µ–ª—è–º. –í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ —ç—Ç–æ—Ç —Ñ–æ—Ä–º–∞—Ç, –≤–ø–æ–ª–Ω–µ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π —Å UPnP, –æ–∫–∞–∑–∞–ª—Å—è –∑–∞ –±–æ—Ä—Ç–æ–º —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–π DLNA –∏ –º–Ω–æ–∂–µ—Å—Ç–≤–æ DLNA —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –Ω–µ –º–æ–≥—É—Ç —Å –Ω–∏–º —Ä–∞–±–æ—Ç–∞—Ç—å.&lt;/p&gt;
&lt;p&gt;–ù–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –∏ DLNA –∏ UPnP —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –≤ –ø–æ–¥–∞–≤–ª—è—é—â–µ–º –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å–ª—É—á–∞–µ–≤ –º–æ–≥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –≤–º–µ—Å—Ç–µ. –ü—Ä–∞–≤–¥–∞, –Ω–µ –Ω–∞ –ª—é–±–æ–º –∫–æ–Ω—Ç–µ–Ω—Ç–µ.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/08/12/umnyi-dom-avtomatizatsiia-ustroistv-s-podderzhkoi-upnpdlna/ui.gif" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–ù–∞—à–∞ —Ü–µ–ª—å - –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥–µ–π—Å—Ç–≤–∏—è –Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫–µ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π —Ç.–∫. –æ—á–µ–Ω—å —É–¥–æ–±–Ω–æ –≤–∫–ª—é—á–∞—Ç—å/–≤—ã–∫–ª—é—á–∞—Ç—å –º—É–∑—ã–∫—É –≤ –∫–æ–º–Ω–∞—Ç–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–µ–π –∫–ª–∞–≤–∏—à –Ω–∞ &lt;a href="http://proiot.ru/blog/posts/2016/03/03/kak-soorudit-udobnyi-perevod-teksta-vsego-za-paru-minut/"&gt;–Ω–æ—É—Ç–µ&lt;/a&gt;. &lt;/p&gt;
&lt;p&gt;–ù–∞—á–Ω—ë–º —Å &lt;a href="http://www.upnp-hacks.org/upnp.html" rel="nofollow"&gt;–æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è&lt;/a&gt; –¥–æ—Å—Ç—É–ø–Ω—ã—Ö UPnP —É—Å—Ç—Ä–æ–π—Å—Ç–≤. –î–ª—è —ç—Ç–æ–≥–æ –Ω—É–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å M-SEARCH –∑–∞–ø—Ä–æ—Å –Ω–∞ multicast-–∞–¥—Ä–µ—Å 239.255.255.250 –ø–æ—Ä—Ç 1900 –ø–æ UDP –ø—Ä–æ—Ç–æ–∫–æ–ª—É. –í—Å–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –∏ –ø—Ä–æ–≥—Ä–∞–º–º—ã, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏–µ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é UPnP –æ–±—è–∑–∞–Ω—ã –æ—Ç–≤–µ—Ç–∏—Ç—å –ø–æ UDP unicast:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ upnp-scan&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
  python3 -c &lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;
&lt;span class="s1"&gt;import socket, sys&lt;/span&gt;

&lt;span class="s1"&gt;SSDP_ADDR = &amp;quot;239.255.255.250&amp;quot;&lt;/span&gt;
&lt;span class="s1"&gt;SSDP_PORT = 1900&lt;/span&gt;
&lt;span class="s1"&gt;# seconds to delay response&lt;/span&gt;
&lt;span class="s1"&gt;SSDP_MX = 3&lt;/span&gt;
&lt;span class="s1"&gt;# search target&lt;/span&gt;
&lt;span class="s1"&gt;SSDP_ST = sys.argv[1] # upnp-scan &amp;quot;ssdp:all&amp;quot;&lt;/span&gt;

&lt;span class="s1"&gt;ssdpRequest = &amp;quot;M-SEARCH * HTTP/1.1\r\n&amp;quot; + \&lt;/span&gt;
&lt;span class="s1"&gt;              &amp;quot;HOST: %s:%d\r\n&amp;quot; % (SSDP_ADDR, SSDP_PORT) + \&lt;/span&gt;
&lt;span class="s1"&gt;              &amp;quot;MAN: \&amp;quot;ssdp:discover\&amp;quot;\r\n&amp;quot; + \&lt;/span&gt;
&lt;span class="s1"&gt;              &amp;quot;MX: %d\r\n&amp;quot; % (SSDP_MX, ) + \&lt;/span&gt;
&lt;span class="s1"&gt;              &amp;quot;ST: %s\r\n&amp;quot; % (SSDP_ST, ) + &amp;quot;\r\n&amp;quot;&lt;/span&gt;

&lt;span class="s1"&gt;with socket.socket(socket.AF_INET, socket.SOCK_DGRAM) as sock:&lt;/span&gt;
&lt;span class="s1"&gt;  sock.sendto(ssdpRequest.encode(), (SSDP_ADDR, SSDP_PORT))&lt;/span&gt;
&lt;span class="s1"&gt;  sock.settimeout(SSDP_MX + 1)&lt;/span&gt;
&lt;span class="s1"&gt;  while True:&lt;/span&gt;
&lt;span class="s1"&gt;    try:&lt;/span&gt;
&lt;span class="s1"&gt;      data = sock.recv(1024)&lt;/span&gt;
&lt;span class="s1"&gt;      print(data.decode()) &lt;/span&gt;
&lt;span class="s1"&gt;    except socket.timeout:&lt;/span&gt;
&lt;span class="s1"&gt;      break&lt;/span&gt;
&lt;span class="s1"&gt;  &amp;#39;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$1&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
  tr -d &lt;span class="s1"&gt;&amp;#39;\r&amp;#39;&lt;/span&gt; &lt;span class="c1"&gt;# normalize new lines \r\n =&amp;gt; \n&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;

~$ upnp-scan &lt;span class="s2"&gt;&amp;quot;ssdp:all&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
    tee upnp.scan.dump &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
    awk -v &lt;span class="nv"&gt;RS&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;\n\n\n&amp;#39;&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;/BubbleUPnP/ &amp;amp;&amp;amp; /[Ss][Tt]: uuid:/ {print $0 &amp;quot;\n&amp;quot;}&amp;#39;&lt;/span&gt;
&lt;span class="c1"&gt;# response&lt;/span&gt;
HTTP/1.1 &lt;span class="m"&gt;200&lt;/span&gt; OK
Cache-control: max-age&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;1800&lt;/span&gt;
Usn: uuid:3ef89534-fb8e-c38f-0000-00007940d6d3
Location: http://192.168.0.100:57916/dev/3ef89534-fb8e-c38f-0000-00007940d6d3/desc.xml
Server: Linux/2.6.29 UPnP/1.0 BubbleUPnP/1.6.11.1
Ext: 
St: uuid:3ef89534-fb8e-c38f-0000-00007940d6d3
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ú—ã –ø—Ä–æ—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–ª–∏ —Å–µ—Ç—å –∏ &lt;a href="http://awk.js.org/?gist=ebfc98b50d9b72b1f77df05a4db264a9"&gt;–æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–ª–∏&lt;/a&gt; —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ BubbleUPnP, –∫–æ—Ç–æ—Ä—ã–º–∏ —Ö–æ—Ç–∏–º —É–ø—Ä–∞–≤–ª—è—Ç—å. –¢–∞–∫–æ–≤—ã—Ö –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ, –ø–æ—ç—Ç–æ–º—É –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —É–¥–æ–±–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –¥–µ–≤–∞–π—Å–æ–º —á–µ—Ä–µ–∑ uuid: &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ upnp-scan &lt;span class="s1"&gt;&amp;#39;uuid:3ef89534-fb8e-c38f-0000-00007940d6d3&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; awk &lt;span class="s1"&gt;&amp;#39;/Location:/ {print $2}&amp;#39;&lt;/span&gt;
&lt;span class="c1"&gt;# response&lt;/span&gt;
http://192.168.0.100:57916/dev/3ef89534-fb8e-c38f-0000-00007940d6d3/desc.xml
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–í —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ &lt;a href="http://upnp.org/specs/arch/UPnP-arch-DeviceArchitecture-v1.1.pdf" rel="nofollow"&gt;UPnP&lt;/a&gt; –º–Ω–æ–≥–æ –±—É–∫–≤. –ú–æ–∂–Ω–æ —É–ø—Ä–æ—Å—Ç–∏—Ç—å —Å–µ–±–µ –∂–∏–∑–Ω—å –∏ –ø–µ—Ä–µ—Ö–≤–∞—Ç–∏—Ç—å SOAP –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ 192.168.0.100, –∫–æ—Ç–æ—Ä—ã–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–æ–≥—Ä–∞–º–º–∞ –Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫–µ &lt;code&gt;sudo tcpdump -A dst 192.168.0.100&lt;/code&gt; –∏ —Å–¥–µ–ª–∞—Ç—å —Ç–æ –∂–µ –ø–æ—Å—Ä–µ–¥—Å—Ç–≤–æ–º curl:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ &lt;span class="nv"&gt;BASE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;http://192.168.0.100:57916/ &lt;span class="se"&gt;\&lt;/span&gt;
   &lt;span class="nv"&gt;AV&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;dev/3ef89534-fb8e-c38f-0000-00007940d6d3/svc/upnp-org/AVTransport/action
~$ curl &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$BASE$AV&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
-XPOST &lt;span class="se"&gt;\&lt;/span&gt;
-H &lt;span class="s1"&gt;&amp;#39;SOAPAction: &amp;quot;urn:schemas-upnp-org:service:AVTransport:1#Stop&amp;quot;&amp;#39;&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
-H &lt;span class="s1"&gt;&amp;#39;Content-Type: text/xml; charset=&amp;quot;utf-8&amp;quot;&amp;#39;&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
-d &lt;span class="s1"&gt;&amp;#39;&amp;lt;?xml version=&amp;quot;1.0&amp;quot;?&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;&amp;lt;s:Envelope xmlns:s=&amp;quot;http://schemas.xmlsoap.org/soap/envelope/&amp;quot; &lt;/span&gt;
&lt;span class="s1"&gt;s:encodingStyle=&amp;quot;http://schemas.xmlsoap.org/soap/encoding/&amp;quot;&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;  &amp;lt;s:Body&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;lt;u:Stop xmlns:u=&amp;quot;urn:schemas-upnp-org:service:AVTransport:1&amp;quot;&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;      &amp;lt;InstanceID&amp;gt;0&amp;lt;/InstanceID&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;lt;/u:Stop&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;  &amp;lt;/s:Body&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;&amp;lt;/s:Envelope&amp;gt;&amp;#39;&lt;/span&gt;

~$ curl &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$BASE$AV&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
-XPOST &lt;span class="se"&gt;\&lt;/span&gt;
-H &lt;span class="s1"&gt;&amp;#39;SOAPAction: &amp;quot;urn:schemas-upnp-org:service:AVTransport:1#SetAVTransportURI&amp;quot;&amp;#39;&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
-H &lt;span class="s1"&gt;&amp;#39;Content-Type: text/xml; charset=&amp;quot;utf-8&amp;quot;&amp;#39;&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
-d &lt;span class="s1"&gt;&amp;#39;&amp;lt;?xml version=&amp;quot;1.0&amp;quot;?&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;&amp;lt;s:Envelope xmlns:s=&amp;quot;http://schemas.xmlsoap.org/soap/envelope/&amp;quot;&lt;/span&gt;
&lt;span class="s1"&gt;s:encodingStyle=&amp;quot;http://schemas.xmlsoap.org/soap/encoding/&amp;quot;&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;  &amp;lt;s:Body&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;lt;u:SetAVTransportURI xmlns:u=&amp;quot;urn:schemas-upnp-org:service:AVTransport:1&amp;quot;&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;      &amp;lt;CurrentURIMetaData&amp;gt;NOT_IMPLEMENTED&amp;lt;/CurrentURIMetaData&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;      &amp;lt;CurrentURI&amp;gt;http://online.radioroks.com.ua:8000/RadioROKS&amp;lt;/CurrentURI&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;      &amp;lt;InstanceID&amp;gt;0&amp;lt;/InstanceID&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;lt;/u:SetAVTransportURI&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;  &amp;lt;/s:Body&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;&amp;lt;/s:Envelope&amp;gt;&amp;#39;&lt;/span&gt;

~$ curl &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$BASE$AV&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
-XPOST &lt;span class="se"&gt;\&lt;/span&gt;
-H &lt;span class="s1"&gt;&amp;#39;SOAPAction: &amp;quot;urn:schemas-upnp-org:service:AVTransport:1#Play&amp;quot;&amp;#39;&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
-H &lt;span class="s1"&gt;&amp;#39;Content-Type: text/xml; charset=&amp;quot;utf-8&amp;quot;&amp;#39;&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
-d &lt;span class="s1"&gt;&amp;#39;&amp;lt;?xml version=&amp;quot;1.0&amp;quot;?&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;&amp;lt;s:Envelope xmlns:s=&amp;quot;http://schemas.xmlsoap.org/soap/envelope/&amp;quot;&lt;/span&gt;
&lt;span class="s1"&gt;s:encodingStyle=&amp;quot;http://schemas.xmlsoap.org/soap/encoding/&amp;quot;&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;  &amp;lt;s:Body&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;lt;u:Play xmlns:u=&amp;quot;urn:schemas-upnp-org:service:AVTransport:1&amp;quot;&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;      &amp;lt;Speed&amp;gt;1&amp;lt;/Speed&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;      &amp;lt;InstanceID&amp;gt;0&amp;lt;/InstanceID&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;lt;/u:Play&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;  &amp;lt;/s:Body&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;&amp;lt;/s:Envelope&amp;gt;&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ö–æ–Ω–µ—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:&lt;/p&gt;
&lt;p&gt;&lt;em&gt;upnp-cp.sh&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="ch"&gt;#!/bin/bash&lt;/span&gt;

&lt;span class="c1"&gt;# chmod +x upnp-cp.sh &amp;amp;&amp;amp; sudo ln -s &amp;quot;`pwd`/upnp-cp.sh&amp;quot; /usr/local/bin/play-to-upnp&lt;/span&gt;

&lt;span class="c1"&gt;# usage stop/play:&lt;/span&gt;
&lt;span class="c1"&gt;# play-to-upnp&lt;/span&gt;
&lt;span class="c1"&gt;# play-to-upnp http://online.radioroks.com.ua:8000/RadioROKS&lt;/span&gt;

&lt;span class="nb"&gt;set&lt;/span&gt; -e

upnp-scan&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
  python3 -c &lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;
&lt;span class="s1"&gt;import socket, sys&lt;/span&gt;

&lt;span class="s1"&gt;SSDP_ADDR = &amp;quot;239.255.255.250&amp;quot;&lt;/span&gt;
&lt;span class="s1"&gt;SSDP_PORT = 1900&lt;/span&gt;
&lt;span class="s1"&gt;# seconds to delay response&lt;/span&gt;
&lt;span class="s1"&gt;SSDP_MX = 3&lt;/span&gt;
&lt;span class="s1"&gt;# search target&lt;/span&gt;
&lt;span class="s1"&gt;SSDP_ST = sys.argv[1] # upnp-scan &amp;quot;ssdp:all&amp;quot;&lt;/span&gt;

&lt;span class="s1"&gt;ssdpRequest = &amp;quot;M-SEARCH * HTTP/1.1\r\n&amp;quot; + \&lt;/span&gt;
&lt;span class="s1"&gt;              &amp;quot;HOST: %s:%d\r\n&amp;quot; % (SSDP_ADDR, SSDP_PORT) + \&lt;/span&gt;
&lt;span class="s1"&gt;              &amp;quot;MAN: \&amp;quot;ssdp:discover\&amp;quot;\r\n&amp;quot; + \&lt;/span&gt;
&lt;span class="s1"&gt;              &amp;quot;MX: %d\r\n&amp;quot; % (SSDP_MX, ) + \&lt;/span&gt;
&lt;span class="s1"&gt;              &amp;quot;ST: %s\r\n&amp;quot; % (SSDP_ST, ) + &amp;quot;\r\n&amp;quot;&lt;/span&gt;

&lt;span class="s1"&gt;with socket.socket(socket.AF_INET, socket.SOCK_DGRAM) as sock:&lt;/span&gt;
&lt;span class="s1"&gt;  sock.sendto(ssdpRequest.encode(), (SSDP_ADDR, SSDP_PORT))&lt;/span&gt;
&lt;span class="s1"&gt;  sock.settimeout(SSDP_MX + 1)&lt;/span&gt;
&lt;span class="s1"&gt;  while True:&lt;/span&gt;
&lt;span class="s1"&gt;    try:&lt;/span&gt;
&lt;span class="s1"&gt;      data = sock.recv(1024)&lt;/span&gt;
&lt;span class="s1"&gt;      print(data.decode()) &lt;/span&gt;
&lt;span class="s1"&gt;    except socket.timeout:&lt;/span&gt;
&lt;span class="s1"&gt;      break&lt;/span&gt;
&lt;span class="s1"&gt;  &amp;#39;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$1&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
  tr -d &lt;span class="s1"&gt;&amp;#39;\r&amp;#39;&lt;/span&gt; &lt;span class="c1"&gt;# normalize new lines \r\n =&amp;gt; \n&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;

&lt;span class="nv"&gt;URL&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;upnp-scan &lt;span class="s2"&gt;&amp;quot;uuid:3ef89534-fb8e-c38f-0000-00007940d6d3&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
awk &lt;span class="s1"&gt;&amp;#39;/Location:/ {print $2}&amp;#39;&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;

&lt;span class="nb"&gt;echo&lt;/span&gt; Divice found: &lt;span class="nv"&gt;$URL&lt;/span&gt;

&lt;span class="nv"&gt;URL_AV&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;curl -s &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$URL&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
python3 -c &lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;
&lt;span class="s1"&gt;import sys, xml.dom.minidom&lt;/span&gt;
&lt;span class="s1"&gt;dom = xml.dom.minidom.parse(sys.stdin)&lt;/span&gt;
&lt;span class="s1"&gt;for srv in dom.getElementsByTagName(&amp;quot;service&amp;quot;):&lt;/span&gt;
&lt;span class="s1"&gt;  ids = [e.firstChild.nodeValue for e in srv.getElementsByTagName(&amp;quot;serviceId&amp;quot;)]&lt;/span&gt;
&lt;span class="s1"&gt;  if (&amp;quot;urn:upnp-org:serviceId:AVTransport&amp;quot; in ids):&lt;/span&gt;
&lt;span class="s1"&gt;    for url in srv.getElementsByTagName(&amp;quot;controlURL&amp;quot;):&lt;/span&gt;
&lt;span class="s1"&gt;      print(url.firstChild.nodeValue)&lt;/span&gt;
&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;

&lt;span class="nv"&gt;URL_AV&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;`echo &lt;/span&gt;&lt;span class="nv"&gt;$URL&lt;/span&gt;&lt;span class="s2"&gt; | cut -d &amp;#39;/&amp;#39; -f1`//`echo &lt;/span&gt;&lt;span class="nv"&gt;$URL&lt;/span&gt;&lt;span class="s2"&gt; | cut -d &amp;#39;/&amp;#39; -f3`&lt;/span&gt;&lt;span class="nv"&gt;$URL_AV&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;

&lt;span class="nb"&gt;echo&lt;/span&gt; AVTransport found: &lt;span class="nv"&gt;$URL_AV&lt;/span&gt;

curl -vsf &lt;span class="nv"&gt;$URL_AV&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
  -XPOST &lt;span class="se"&gt;\&lt;/span&gt;
  -H &lt;span class="s1"&gt;&amp;#39;SOAPAction: &amp;quot;urn:schemas-upnp-org:service:AVTransport:1#Stop&amp;quot;&amp;#39;&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
  -H &lt;span class="s1"&gt;&amp;#39;Content-Type: text/xml; charset=&amp;quot;utf-8&amp;quot;&amp;#39;&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
  -d &lt;span class="s1"&gt;&amp;#39;&amp;lt;?xml version=&amp;quot;1.0&amp;quot;?&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;  &amp;lt;s:Envelope xmlns:s=&amp;quot;http://schemas.xmlsoap.org/soap/envelope/&amp;quot; &lt;/span&gt;
&lt;span class="s1"&gt;  s:encodingStyle=&amp;quot;http://schemas.xmlsoap.org/soap/encoding/&amp;quot;&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;lt;s:Body&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;      &amp;lt;u:Stop xmlns:u=&amp;quot;urn:schemas-upnp-org:service:AVTransport:1&amp;quot;&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;        &amp;lt;InstanceID&amp;gt;0&amp;lt;/InstanceID&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;      &amp;lt;/u:Stop&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;lt;/s:Body&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;  &amp;lt;/s:Envelope&amp;gt;&amp;#39;&lt;/span&gt;

&lt;span class="c1"&gt;# $# variable will tell you the number of input arguments the script was passed&lt;/span&gt;
&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="nv"&gt;$#&lt;/span&gt; -ne &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
  &lt;span class="c1"&gt;# play url $@&lt;/span&gt;
  curl -vsf &lt;span class="nv"&gt;$URL_AV&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
    -XPOST &lt;span class="se"&gt;\&lt;/span&gt;
    -H &lt;span class="s1"&gt;&amp;#39;SOAPAction: &amp;quot;urn:schemas-upnp-org:service:AVTransport:1#SetAVTransportURI&amp;quot;&amp;#39;&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
    -H &lt;span class="s1"&gt;&amp;#39;Content-Type: text/xml; charset=&amp;quot;utf-8&amp;quot;&amp;#39;&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
    -d &lt;span class="s2"&gt;&amp;quot;&amp;lt;?xml version=&amp;#39;1.0&amp;#39;?&amp;gt;&lt;/span&gt;
&lt;span class="s2"&gt;    &amp;lt;s:Envelope xmlns:s=&amp;#39;http://schemas.xmlsoap.org/soap/envelope/&amp;#39;&lt;/span&gt;
&lt;span class="s2"&gt;    s:encodingStyle=&amp;#39;http://schemas.xmlsoap.org/soap/encoding/&amp;#39;&amp;gt;&lt;/span&gt;
&lt;span class="s2"&gt;      &amp;lt;s:Body&amp;gt;&lt;/span&gt;
&lt;span class="s2"&gt;        &amp;lt;u:SetAVTransportURI xmlns:u=&amp;#39;urn:schemas-upnp-org:service:AVTransport:1&amp;#39;&amp;gt;&lt;/span&gt;
&lt;span class="s2"&gt;          &amp;lt;CurrentURIMetaData&amp;gt;NOT_IMPLEMENTED&amp;lt;/CurrentURIMetaData&amp;gt;&lt;/span&gt;
&lt;span class="s2"&gt;          &amp;lt;CurrentURI&amp;gt;&lt;/span&gt;&lt;span class="nv"&gt;$@&lt;/span&gt;&lt;span class="s2"&gt;&amp;lt;/CurrentURI&amp;gt;&lt;/span&gt;
&lt;span class="s2"&gt;          &amp;lt;InstanceID&amp;gt;0&amp;lt;/InstanceID&amp;gt;&lt;/span&gt;
&lt;span class="s2"&gt;        &amp;lt;/u:SetAVTransportURI&amp;gt;&lt;/span&gt;
&lt;span class="s2"&gt;      &amp;lt;/s:Body&amp;gt;&lt;/span&gt;
&lt;span class="s2"&gt;    &amp;lt;/s:Envelope&amp;gt;&amp;quot;&lt;/span&gt;

  curl -vsf &lt;span class="nv"&gt;$URL_AV&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
    -XPOST &lt;span class="se"&gt;\&lt;/span&gt;
    -H &lt;span class="s1"&gt;&amp;#39;SOAPAction: &amp;quot;urn:schemas-upnp-org:service:AVTransport:1#Play&amp;quot;&amp;#39;&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
    -H &lt;span class="s1"&gt;&amp;#39;Content-Type: text/xml; charset=&amp;quot;utf-8&amp;quot;&amp;#39;&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
    -d &lt;span class="s1"&gt;&amp;#39;&amp;lt;?xml version=&amp;quot;1.0&amp;quot;?&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;lt;s:Envelope xmlns:s=&amp;quot;http://schemas.xmlsoap.org/soap/envelope/&amp;quot;&lt;/span&gt;
&lt;span class="s1"&gt;    s:encodingStyle=&amp;quot;http://schemas.xmlsoap.org/soap/encoding/&amp;quot;&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;      &amp;lt;s:Body&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;        &amp;lt;u:Play xmlns:u=&amp;quot;urn:schemas-upnp-org:service:AVTransport:1&amp;quot;&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;          &amp;lt;Speed&amp;gt;1&amp;lt;/Speed&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;          &amp;lt;InstanceID&amp;gt;0&amp;lt;/InstanceID&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;        &amp;lt;/u:Play&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;      &amp;lt;/s:Body&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;lt;/s:Envelope&amp;gt;&amp;#39;&lt;/span&gt;
&lt;span class="k"&gt;fi&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</content><category term="m2m"></category><category term="SOAP"></category></entry><entry><title>–ò—â–µ–º —Å–≤–æ–±–æ–¥–Ω—ã–µ Wi-Fi –∫–∞–Ω–∞–ª—ã —Å –ø–æ–º–æ—â—å—é GnuPlot</title><link href="http://proiot.ru/blog/posts/2016/07/17/ishchem-svobodnye-wi-fi-kanaly-s-pomoshchiu-gnuplot/" rel="alternate"></link><published>2016-07-17T00:00:00+03:00</published><updated>2016-07-17T00:00:00+03:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2016-07-17:/blog/posts/2016/07/17/ishchem-svobodnye-wi-fi-kanaly-s-pomoshchiu-gnuplot/</id><summary type="html">&lt;p&gt;–í —ç–ø–æ—Ö—É –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –±–µ—Å–ø—Ä–æ–≤–æ–¥–Ω—ã–µ Wi-Fi –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä—ã —É–∂–µ –¥–∞–≤–Ω–æ —Å—Ç–∞–ª–∏ –Ω–µ–∑–∞–º–µ–Ω–∏–º–æ–π —á–∞—Å—Ç—å—é –Ω–∞—à–µ–≥–æ –±—ã—Ç–∏—è. Wi-Fi —Å–µ—Ç–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ 2,4 GHz –ª–∏–±–æ 5 GHz –∏ –º–æ–≥—É—Ç –≤–∑–∞–∏–º–Ω–æ –º–µ—à–∞—Ç—å —Ä–∞–±–æ—Ç–µ –¥—Ä—É–≥ –¥—Ä—É–≥–∞ –Ω–∞–ø—Ä–∏–º–µ—Ä –≤ —Å–∏—Ç—É–∞—Ü–∏–∏, –∫–æ–≥–¥–∞ —É –≤–∞—à–µ–≥–æ —Å–æ—Å–µ–¥–∞ —Ç–æ–∂–µ —Å—Ç–æ–∏—Ç —Ä–æ—É—Ç–µ—Ä –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —Ç–∞–∫–æ–π –∂–µ —á–∞—Å—Ç–æ—Ç–µ —á—Ç–æ –∏ –≤–∞—à ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;p&gt;–í —ç–ø–æ—Ö—É –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –±–µ—Å–ø—Ä–æ–≤–æ–¥–Ω—ã–µ Wi-Fi –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä—ã —É–∂–µ –¥–∞–≤–Ω–æ —Å—Ç–∞–ª–∏ –Ω–µ–∑–∞–º–µ–Ω–∏–º–æ–π —á–∞—Å—Ç—å—é –Ω–∞—à–µ–≥–æ –±—ã—Ç–∏—è. Wi-Fi —Å–µ—Ç–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ 2,4 GHz –ª–∏–±–æ 5 GHz –∏ –º–æ–≥—É—Ç –≤–∑–∞–∏–º–Ω–æ –º–µ—à–∞—Ç—å —Ä–∞–±–æ—Ç–µ –¥—Ä—É–≥ –¥—Ä—É–≥–∞ –Ω–∞–ø—Ä–∏–º–µ—Ä –≤ —Å–∏—Ç—É–∞—Ü–∏–∏, –∫–æ–≥–¥–∞ —É –≤–∞—à–µ–≥–æ —Å–æ—Å–µ–¥–∞ —Ç–æ–∂–µ —Å—Ç–æ–∏—Ç —Ä–æ—É—Ç–µ—Ä –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —Ç–∞–∫–æ–π –∂–µ —á–∞—Å—Ç–æ—Ç–µ —á—Ç–æ –∏ –≤–∞—à. –î–ª—è —Ç–∞–∫–∏—Ö —Å–ª—É—á–∞–µ–≤ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö —Ä–æ—É—Ç–µ—Ä–∞ –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω–∞ —Å–µ—Ç–∫–∞ –∫–∞–Ω–∞–ª–æ–≤ 1-13 (2.412GHz-2.472GHz). –°–æ—Å–µ–¥–µ–π –º–Ω–æ–≥–æ, –≤—Å–µ–º –Ω—É–∂–µ–Ω —Ö–æ—Ä–æ—à–∏–π –∏–Ω—Ç–µ—Ä–Ω–µ—Ç. –í –¥–∞–Ω–Ω–æ–º –º–∞—Ç–µ—Ä–∏–∞–ª–µ –º—ã –Ω–∞—É—á–∏–º—Å—è —Ä–∏—Å–æ–≤–∞—Ç—å –≤–æ—Ç —Ç–∞–∫—É—é –∫—Ä–∞—Å–∏–≤—É—é –∫–∞—Ä—Ç–∏–Ω–∫—É –±–µ–∑ —Å—Ç–æ—Ä–æ–Ω–Ω–µ–≥–æ –ü–û, —Ç.–µ. –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤–∞–º–∏ Linux –∏ –ø—Ä–æ–≥—Ä–∞–º–º—ã –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –≥—Ä–∞—Ñ–∏–∫–æ–≤ &lt;a href="http://www.gnuplot.info/" rel="nofollow"&gt;gnuplot&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;TL;DR&lt;/h2&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/07/17/ishchem-svobodnye-wi-fi-kanaly-s-pomoshchiu-gnuplot/shot.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ sudo iwlist wlo1 scanning &lt;span class="p"&gt;|&lt;/span&gt; python3 -c &lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;

&lt;span class="s1"&gt;import re,sys&lt;/span&gt;

&lt;span class="s1"&gt;def tokenize(code):&lt;/span&gt;
&lt;span class="s1"&gt;    token_specification = [&lt;/span&gt;
&lt;span class="s1"&gt;        (&amp;quot;CELL&amp;quot;,  r&amp;quot;^\s+Cell \d+&amp;quot;),&lt;/span&gt;
&lt;span class="s1"&gt;        (&amp;quot;FREQ&amp;quot;,  r&amp;quot;^\s+Frequency:(\d+(\.\d*)?)&amp;quot;),&lt;/span&gt;
&lt;span class="s1"&gt;        (&amp;quot;CHNL&amp;quot;,  r&amp;quot;^\s+Channel:(\d+)&amp;quot;),&lt;/span&gt;
&lt;span class="s1"&gt;        (&amp;quot;ESSID&amp;quot;, r&amp;quot;^\s+ESSID:\&amp;quot;([- A-Za-z0-9$@^`,|%;.~()/\\{}:?[\]=+_#!]*)\&amp;quot;&amp;quot;),&lt;/span&gt;
&lt;span class="s1"&gt;        (&amp;quot;LEVEL&amp;quot;, r&amp;quot;\s+Signal level=(-\d+)&amp;quot;),&lt;/span&gt;
&lt;span class="s1"&gt;    ]&lt;/span&gt;
&lt;span class="s1"&gt;    tok_regex = &amp;quot;|&amp;quot;.join(&amp;quot;(?P&amp;lt;%s&amp;gt;%s)&amp;quot; % pair for pair in token_specification)&lt;/span&gt;

&lt;span class="s1"&gt;    for mo in re.finditer(tok_regex, code, re.M):&lt;/span&gt;
&lt;span class="s1"&gt;        typ = mo.lastgroup&lt;/span&gt;
&lt;span class="s1"&gt;        if typ == &amp;quot;CELL&amp;quot;:&lt;/span&gt;
&lt;span class="s1"&gt;            if &amp;quot;res&amp;quot; in vars() and res:&lt;/span&gt;
&lt;span class="s1"&gt;                yield res&lt;/span&gt;
&lt;span class="s1"&gt;            res = {}&lt;/span&gt;
&lt;span class="s1"&gt;        else:&lt;/span&gt;
&lt;span class="s1"&gt;            grs = [v for v in mo.groups() if v not in [mo.group(typ), None]]&lt;/span&gt;
&lt;span class="s1"&gt;            assert len(grs), &amp;quot;Forgot capture value for %s ?&amp;quot; % typ&lt;/span&gt;
&lt;span class="s1"&gt;            res[typ] = grs[0]&lt;/span&gt;
&lt;span class="s1"&gt;    if res:&lt;/span&gt;
&lt;span class="s1"&gt;        yield res&lt;/span&gt;

&lt;span class="s1"&gt;data = list(tokenize(sys.stdin.read()))&lt;/span&gt;

&lt;span class="s1"&gt;print(&lt;/span&gt;
&lt;span class="s1"&gt;&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
&lt;span class="s1"&gt;# legend&lt;/span&gt;
&lt;span class="s1"&gt;set key top left outside horizontal&lt;/span&gt;
&lt;span class="s1"&gt;set xlabel &amp;quot;Channel&amp;quot;&lt;/span&gt;
&lt;span class="s1"&gt;set ylabel &amp;quot;Strength (dbm)&amp;quot;&lt;/span&gt;
&lt;span class="s1"&gt;# x axis step&lt;/span&gt;
&lt;span class="s1"&gt;set xtics 1&lt;/span&gt;
&lt;span class="s1"&gt;# show horizontal grid lines &lt;/span&gt;
&lt;span class="s1"&gt;set grid ytics&lt;/span&gt;
&lt;span class="s1"&gt;set xrange [-2:16]&lt;/span&gt;
&lt;span class="s1"&gt;set yrange [%(bottom)d - 0.1:%(top)d]&lt;/span&gt;
&lt;span class="s1"&gt;set term png truecolor size 1280,720&lt;/span&gt;
&lt;span class="s1"&gt;plot for [IDX=0:%(total)d-1] &amp;quot;-&amp;quot; \&lt;/span&gt;
&lt;span class="s1"&gt;    using 2:(%(bottom)d):(4):(2*abs(%(bottom)d - $1)) \&lt;/span&gt;
&lt;span class="s1"&gt;    title columnheader(1) with ellipses \&lt;/span&gt;
&lt;span class="s1"&gt;    fill transparent solid 0.5 &lt;/span&gt;
&lt;span class="s1"&gt;&amp;quot;&amp;quot;&amp;quot; &lt;/span&gt;
&lt;span class="s1"&gt;% {&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;quot;total&amp;quot;: len(data), &lt;/span&gt;
&lt;span class="s1"&gt;    &amp;quot;top&amp;quot;: max([int(tok[&amp;quot;LEVEL&amp;quot;]) for tok in data]) + 1, &lt;/span&gt;
&lt;span class="s1"&gt;    &amp;quot;bottom&amp;quot;: min([int(tok[&amp;quot;LEVEL&amp;quot;]) for tok in data]) - 5, &lt;/span&gt;
&lt;span class="s1"&gt;})&lt;/span&gt;

&lt;span class="s1"&gt;for tok in data:&lt;/span&gt;
&lt;span class="s1"&gt;    print(&amp;quot;\&amp;quot;%s\&amp;quot;&amp;quot; % (tok[&amp;quot;ESSID&amp;quot;] or &amp;quot;&amp;lt;HIDDEN&amp;gt;&amp;quot;))&lt;/span&gt;
&lt;span class="s1"&gt;    print(tok[&amp;quot;LEVEL&amp;quot;], tok[&amp;quot;CHNL&amp;quot;])&lt;/span&gt;
&lt;span class="s1"&gt;    print(&amp;quot;e&amp;quot;)&lt;/span&gt;
&lt;span class="s1"&gt;    assert set((&amp;quot;FREQ&amp;quot;,&amp;quot;CHNL&amp;quot;,&amp;quot;ESSID&amp;quot;, &amp;quot;LEVEL&amp;quot;)) &amp;lt;= set(tok)&lt;/span&gt;
&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; gnuplot &amp;gt; out.png
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ß–∞—Å—Ç–æ –ø–æ–ª–µ–∑–Ω–æ –≤–∏–¥–µ—Ç—å –≥—Ä–∞—Ñ–∏–∫ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ &lt;code&gt;while sleep 10; do sudo iwlist wlo1 scanning | python3 wifi.plot.py | gnuplot &amp;gt; out.png; done&lt;/code&gt; –∏ –∫–∞–∫–æ–π –Ω–∏–±—É–¥—å –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–π –ø—Ä–æ—Å–º–æ—Ç—Ä—â–∏–∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Ç–∏–ø–∞ &lt;code&gt;feh  --reload 1 out.png&lt;/code&gt;&lt;/p&gt;
&lt;h2&gt;GNUPLOT&lt;/h2&gt;
&lt;p&gt;–í gnuplot –º–æ–∂–Ω–æ —Ä–∏—Å–æ–≤–∞—Ç—å –≥—Ä–∞—Ñ–∏–∫–∏ –∫–∞–∫ —Å –ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–π —Ç–∞–∫ –∏ –ø–æ –∑–∞–¥–∞–Ω–Ω—ã–º —Ç–æ—á–∫–∞–º. –ù–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–π –≤–∞—Ä–∏–∞–Ω—Ç:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ gnuplot --version
gnuplot &lt;span class="m"&gt;4&lt;/span&gt;.6 patchlevel &lt;span class="m"&gt;6&lt;/span&gt;
~$ &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;
&lt;span class="s1"&gt;plot for [IDX=0:1] &amp;quot;-&amp;quot; using 1:2 title columnheader(1) with lines&lt;/span&gt;
&lt;span class="s1"&gt;hello&lt;/span&gt;
&lt;span class="s1"&gt;1 1&lt;/span&gt;
&lt;span class="s1"&gt;3 3&lt;/span&gt;
&lt;span class="s1"&gt;e&lt;/span&gt;
&lt;span class="s1"&gt;world&lt;/span&gt;
&lt;span class="s1"&gt;1 3&lt;/span&gt;
&lt;span class="s1"&gt;3 1&lt;/span&gt;
&lt;span class="s1"&gt;e&lt;/span&gt;
&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; gnuplot -p
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/07/17/ishchem-svobodnye-wi-fi-kanaly-s-pomoshchiu-gnuplot/hello.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;
&lt;span class="s1"&gt;set term png truecolor size 1280,480&lt;/span&gt;
&lt;span class="s1"&gt;set xrange [0:6]&lt;/span&gt;
&lt;span class="s1"&gt;plot for [IDX=0:3] &amp;quot;-&amp;quot; using 2:1 title columnheader(1) with points pointsize 3&lt;/span&gt;
&lt;span class="s1"&gt;&amp;quot;Anna&amp;quot;&lt;/span&gt;
&lt;span class="s1"&gt;-93 1&lt;/span&gt;
&lt;span class="s1"&gt;e&lt;/span&gt;
&lt;span class="s1"&gt;&amp;quot;Erika&amp;quot;&lt;/span&gt;
&lt;span class="s1"&gt;-73 1&lt;/span&gt;
&lt;span class="s1"&gt;e&lt;/span&gt;
&lt;span class="s1"&gt;&amp;quot;Alina&amp;quot;&lt;/span&gt;
&lt;span class="s1"&gt;-84 1&lt;/span&gt;
&lt;span class="s1"&gt;e&lt;/span&gt;
&lt;span class="s1"&gt;&amp;quot;Nast&amp;quot;&lt;/span&gt;
&lt;span class="s1"&gt;-93 5&lt;/span&gt;
&lt;span class="s1"&gt;e&lt;/span&gt;
&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; gnuplot &amp;gt; wifi.points.png
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/07/17/ishchem-svobodnye-wi-fi-kanaly-s-pomoshchiu-gnuplot/wifi.points.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;
&lt;span class="s1"&gt;set term png truecolor size 1280,480&lt;/span&gt;
&lt;span class="s1"&gt;set xlabel &amp;quot;Channel&amp;quot;&lt;/span&gt;
&lt;span class="s1"&gt;set ylabel &amp;quot;Strength (dbm)&amp;quot;&lt;/span&gt;
&lt;span class="s1"&gt;set xrange [0:6]&lt;/span&gt;
&lt;span class="s1"&gt;set yrange [-110:-60]&lt;/span&gt;
&lt;span class="s1"&gt;set grid ytics&lt;/span&gt;
&lt;span class="s1"&gt;plot for [IDX=0:3] &amp;quot;-&amp;quot; using 2:1:(2):(abs($1/3)) title columnheader(1) with ellipses&lt;/span&gt;
&lt;span class="s1"&gt;&amp;quot;Anna&amp;quot;&lt;/span&gt;
&lt;span class="s1"&gt;-93 1&lt;/span&gt;
&lt;span class="s1"&gt;e&lt;/span&gt;
&lt;span class="s1"&gt;&amp;quot;Erika&amp;quot;&lt;/span&gt;
&lt;span class="s1"&gt;-73 1&lt;/span&gt;
&lt;span class="s1"&gt;e&lt;/span&gt;
&lt;span class="s1"&gt;&amp;quot;Alina&amp;quot;&lt;/span&gt;
&lt;span class="s1"&gt;-84 1&lt;/span&gt;
&lt;span class="s1"&gt;e&lt;/span&gt;
&lt;span class="s1"&gt;&amp;quot;Nast&amp;quot;&lt;/span&gt;
&lt;span class="s1"&gt;-93 5&lt;/span&gt;
&lt;span class="s1"&gt;e&lt;/span&gt;
&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; gnuplot &amp;gt; wifi.ellipses.png
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/07/17/ishchem-svobodnye-wi-fi-kanaly-s-pomoshchiu-gnuplot/wifi.ellipses.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–ú—ã –≤–≤–µ–ª–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –≤—ã—Å–æ—Ç—ã —ç–ª–ª–∏–ø—Å–∞ –æ—Ç —É—Ä–æ–≤–Ω—è —Å–∏–≥–Ω–∞–ª–∞. –û—Å—Ç–∞–ª–æ—Å—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ –µ—ë –ø–µ—Ä–µ—Å—á–∏—Ç–∞—Ç—å, –∑–∞–∫—Ä–∞—Å–∏—Ç—å –ø–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å—é –∏ –æ–ø—É—Å—Ç–∏—Ç—å –≤–Ω–∏–∑ –Ω–∞ –ø–æ–ª–æ–≤–∏–Ω—É. –¢–∞–∫–∂–µ gnuplot –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ç–æ—á–∫–∏, –Ω–∞—Ö–æ–¥—è—â–∏–µ—Å—è –∑–∞ –ø—Ä–µ–¥–∞–ª–∞–º–∏ xrange, yrange - –ø–æ—ç—Ç–æ–º—É –∫ yrange –¥–ª—è —Å—Ç—Ä–∞—Ö–æ–≤–∫–∏ –ø—Ä–∏–±–∞–≤–ª–µ–Ω–æ ~0.1&lt;/p&gt;</content><category term="GnuPlot"></category><category term="Wi-Fi"></category></entry><entry><title>ElasticSearch - –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –≤–≤–µ–¥–µ–Ω–∏–µ</title><link href="http://proiot.ru/blog/posts/2016/06/25/elasticsearch-prakticheskoe-vvedenie/" rel="alternate"></link><published>2016-06-25T00:00:00+03:00</published><updated>2016-06-25T00:00:00+03:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2016-06-25:/blog/posts/2016/06/25/elasticsearch-prakticheskoe-vvedenie/</id><summary type="html">&lt;p&gt;&lt;a href="https://www.elastic.co/products/elasticsearch" rel="nofollow"&gt;ElasticSearch&lt;/a&gt; - –ø–æ–∏—Å–∫–æ–≤—ã–π –¥–≤–∏–∂–æ–∫ —Å JSON REST API, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–π –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º &lt;a href="http://proiot.ru/blog/posts/2012/10/15/lucene-kurs-molodogo-boitsa/"&gt;Lucene&lt;/a&gt;. –ü—Ä–µ–¥–ª–∞–≥–∞—é —Å–º–∞—Å—Ç–µ—Ä–∏—Ç—å —Å –ø–æ–º–æ—â—å—é Elastic –ø–æ–∏—Å–∫ –¥–ª—è –ø–∞—Ä–æ—á–∫–∏ &lt;a href="http://proiot.ru/blog/posts/2016/05/15/lucene-fasetnyi-poisk/"&gt;—Ñ–∏–ª—å–º–æ–≤&lt;/a&gt;. –ù–∞ –ø–µ—Ä–≤–æ–º —ç—Ç–∞–ø–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º —É—Å—Ç–∞–Ω–æ–≤–∫—É –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Elastic –≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ, –≤–ø—Ä–æ—á–µ–º —ç—Ç–æ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ - –≤—ã –º–æ–∂–µ—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Elastic –ª—é–±—ã–º –¥—Ä—É–≥–∏–º &lt;a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/_installation.html" rel="nofollow"&gt;—Å–ø–æ—Å–æ–±–æ–º&lt;/a&gt;. –ó–∞—Ç–µ–º –∫–æ–ø–Ω—ë–º –ø–æ–≥–ª—É–±–∂–µ –≤ &lt;a href="http://proiot.ru/blog/posts/2012/10/17/lucene-protsess-indeksatsii/"&gt;–ø—Ä–æ—Ü–µ—Å—Å –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏&lt;/a&gt;, &lt;a href="http://proiot.ru/blog/posts/2012/10/29/lucene-sintaksis-zaprosov/"&gt;–ø–æ–∏—Å–∫–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã&lt;/a&gt;,
&lt;a href="http://proiot.ru/blog/posts/2012/10/28/lucene-podsvetka-vkhozhdenii-v-rezultatakh-vydachi/"&gt;–ø–æ–¥—Å–≤–µ—Ç–∫—É ‚Ä¶&lt;/a&gt;&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a href="https://www.elastic.co/products/elasticsearch" rel="nofollow"&gt;ElasticSearch&lt;/a&gt; - –ø–æ–∏—Å–∫–æ–≤—ã–π –¥–≤–∏–∂–æ–∫ —Å JSON REST API, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–π –ø–æ–¥ –∫–∞–ø–æ—Ç–æ–º &lt;a href="http://proiot.ru/blog/posts/2012/10/15/lucene-kurs-molodogo-boitsa/"&gt;Lucene&lt;/a&gt;. –ü—Ä–µ–¥–ª–∞–≥–∞—é —Å–º–∞—Å—Ç–µ—Ä–∏—Ç—å —Å –ø–æ–º–æ—â—å—é Elastic –ø–æ–∏—Å–∫ –¥–ª—è –ø–∞—Ä–æ—á–∫–∏ &lt;a href="http://proiot.ru/blog/posts/2016/05/15/lucene-fasetnyi-poisk/"&gt;—Ñ–∏–ª—å–º–æ–≤&lt;/a&gt;. –ù–∞ –ø–µ—Ä–≤–æ–º —ç—Ç–∞–ø–µ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º —É—Å—Ç–∞–Ω–æ–≤–∫—É –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Elastic –≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ, –≤–ø—Ä–æ—á–µ–º —ç—Ç–æ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ - –≤—ã –º–æ–∂–µ—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Elastic –ª—é–±—ã–º –¥—Ä—É–≥–∏–º &lt;a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/_installation.html" rel="nofollow"&gt;—Å–ø–æ—Å–æ–±–æ–º&lt;/a&gt;. –ó–∞—Ç–µ–º –∫–æ–ø–Ω—ë–º –ø–æ–≥–ª—É–±–∂–µ –≤ &lt;a href="http://proiot.ru/blog/posts/2012/10/17/lucene-protsess-indeksatsii/"&gt;–ø—Ä–æ—Ü–µ—Å—Å –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏&lt;/a&gt;, &lt;a href="http://proiot.ru/blog/posts/2012/10/29/lucene-sintaksis-zaprosov/"&gt;–ø–æ–∏—Å–∫–æ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã&lt;/a&gt;,
&lt;a href="http://proiot.ru/blog/posts/2012/10/28/lucene-podsvetka-vkhozhdenii-v-rezultatakh-vydachi/"&gt;–ø–æ–¥—Å–≤–µ—Ç–∫—É&lt;/a&gt; –≤—Ö–æ–∂–¥–µ–Ω–∏–π –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö –≤—ã–¥–∞—á–∏ –∏ &lt;a href="http://proiot.ru/blog/posts/2016/05/15/lucene-fasetnyi-poisk/"&gt;–∞–≥—Ä–µ–≥–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö&lt;/a&gt; –≤ Elastic –∏ –≤—Å—ë —ç—Ç–æ —Ç–æ–ª—å–∫–æ –ª–∏—à—å —Å –ø–æ–º–æ—â—å—é REST API –±–µ–∑ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –Ω–∞–ª–∏—á–∏—è –∫–∞–∫–∏—Ö-–ª–∏–±–æ –≥–ª—É–±–æ–∫–∏—Ö –ø–æ–∑–Ω–∞–Ω–∏–π –∫–∞–∫ –≤ —Å–∞–º–æ–º Lucene —Ç–∞–∫ –∏ –≤ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–∏ –≤ —Ü–µ–ª–æ–º !&lt;/p&gt;
&lt;!-- cd ./dist/ &amp;&amp; find . -type f | sort | xargs -I{} -n1 echo -e '&lt;a href="\x7Battach\x7Ddist/{}"&gt;&lt;/a&gt;' | xclip -selection clipboard &amp;&amp; cd - --&gt;

&lt;!-- 
&lt;a href="http://proiot.ru/blog/posts/2016/06/25/elasticsearch-prakticheskoe-vvedenie/dist/bundle.js"&gt;&lt;/a&gt;
&lt;a href="http://proiot.ru/blog/posts/2016/06/25/elasticsearch-prakticheskoe-vvedenie/dist/bundle.js.map"&gt;&lt;/a&gt;
&lt;a href="http://proiot.ru/blog/posts/2016/06/25/elasticsearch-prakticheskoe-vvedenie/dist/favicon.ico"&gt;&lt;/a&gt;
&lt;a href="http://proiot.ru/blog/posts/2016/06/25/elasticsearch-prakticheskoe-vvedenie/dist/index.html"&gt;&lt;/a&gt;
--&gt;

&lt;h2&gt;UI –î–ï–ú–û&lt;/h2&gt;
&lt;p&gt;–î–ª—è –ª—É—á—à–µ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è –∏–∑–ª–æ–∂–µ–Ω–Ω–æ–≥–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞ –Ω–∞–±—Ä–æ—Å–∞–ª –ø—Ä–æ—Å—Ç–µ–Ω—å–∫–∏–π UI (&lt;a href="http://proiot.ru/blog/posts/2016/06/25/elasticsearch-prakticheskoe-vvedenie/react-elastic-example.zip"&gt;–∏—Å—Ö–æ–¥–Ω–∏–∫–∏&lt;/a&gt;) –Ω–∞ &lt;a href="https://facebook.github.io/react/" rel="nofollow"&gt;ReactJS&lt;/a&gt;. –î–ª—è —Ä–∞–±–æ—Ç—ã &lt;a href="http://proiot.ru/blog/posts/2016/06/25/elasticsearch-prakticheskoe-vvedenie/dist/index.html"&gt;–¥–µ–º–æ&lt;/a&gt; –∏–∑ –±—Ä–∞—É–∑–µ—Ä–∞ –Ω—É–∂–Ω–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ ElasticSearch, –∫–æ—Ç–æ—Ä—ã–π –º—ã —Å–µ–π—á–∞—Å –Ω–∞—Å—Ç—Ä–æ–∏–º, —Ä–∞–∑—Ä–µ—à–∏—Ç—å &lt;code&gt;http.cors&lt;/code&gt; –Ω–∞–ø—Ä–∏–º–µ—Ä &lt;code&gt;allow-origin: /https?:\/\/proiot\.ru/&lt;/code&gt;, –ª–∏–±–æ –ø—Ä–æ—Å—Ç–æ –∑–≤—ë–∑–¥–æ—á–∫–∞  &lt;code&gt;*&lt;/code&gt; - —Ä–∞–∑—Ä–µ—à–∏—Ç—å –æ—Ç–æ–≤—Å—é–¥—É.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/06/25/elasticsearch-prakticheskoe-vvedenie/ui.gif" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;h2&gt;TL;DR&lt;/h2&gt;
&lt;p&gt;–ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è —á—Ç–æ ElasticSearch —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ curl -XGET localhost:9200
&lt;span class="c1"&gt;# response&lt;/span&gt;
&lt;span class="o"&gt;{&lt;/span&gt;
  &lt;span class="s2"&gt;&amp;quot;name&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;J2&amp;quot;&lt;/span&gt;,
  &lt;span class="s2"&gt;&amp;quot;cluster_name&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;docker-cluster&amp;quot;&lt;/span&gt;,
  &lt;span class="s2"&gt;&amp;quot;version&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;number&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;2.3.3&amp;quot;&lt;/span&gt;,
    &lt;span class="s2"&gt;&amp;quot;build_hash&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;218bdf10790eef486ff2c41a3df5cfa32dadcfde&amp;quot;&lt;/span&gt;,
    &lt;span class="s2"&gt;&amp;quot;build_timestamp&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;2016-05-17T15:40:04Z&amp;quot;&lt;/span&gt;,
    &lt;span class="s2"&gt;&amp;quot;build_snapshot&amp;quot;&lt;/span&gt; : false,
    &lt;span class="s2"&gt;&amp;quot;lucene_version&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;5.5.0&amp;quot;&lt;/span&gt;
  &lt;span class="o"&gt;}&lt;/span&gt;,
  &lt;span class="s2"&gt;&amp;quot;tagline&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;You Know, for Search&amp;quot;&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–î–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–æ—Å—Ç–æ –ø—Ä–æ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –¥–∞–º–ø–∞ &lt;a href="http://proiot.ru/blog/posts/2016/06/25/elasticsearch-prakticheskoe-vvedenie/Top.bulk.json.xz"&gt;Top.bulk.json.xz&lt;/a&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# field mapping for suggest, aggregation&lt;/span&gt;
&lt;span class="c1"&gt;# curl -XDELETE &amp;#39;localhost:9200/kinopoisk?pretty&amp;#39;&lt;/span&gt;
~$ curl -XPUT &lt;span class="s1"&gt;&amp;#39;localhost:9200/kinopoisk?pretty&amp;#39;&lt;/span&gt; -d &lt;span class="s1"&gt;&amp;#39;{&lt;/span&gt;
&lt;span class="s1"&gt;  &amp;quot;mappings&amp;quot;: {&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;quot;film&amp;quot; : {&lt;/span&gt;
&lt;span class="s1"&gt;      &amp;quot;properties&amp;quot; : {&lt;/span&gt;
&lt;span class="s1"&gt;        &amp;quot;suggest&amp;quot; : { &lt;/span&gt;
&lt;span class="s1"&gt;          &amp;quot;type&amp;quot; : &amp;quot;completion&amp;quot;,&lt;/span&gt;
&lt;span class="s1"&gt;          &amp;quot;analyzer&amp;quot;: &amp;quot;standard&amp;quot;&lt;/span&gt;
&lt;span class="s1"&gt;        },&lt;/span&gt;
&lt;span class="s1"&gt;        &amp;quot;category&amp;quot;: {&lt;/span&gt;
&lt;span class="s1"&gt;          &amp;quot;type&amp;quot;: &amp;quot;string&amp;quot;,&lt;/span&gt;
&lt;span class="s1"&gt;          &amp;quot;fields&amp;quot;: {&lt;/span&gt;
&lt;span class="s1"&gt;              &amp;quot;raw&amp;quot;: {&lt;/span&gt;
&lt;span class="s1"&gt;                  &amp;quot;type&amp;quot;: &amp;quot;string&amp;quot;,&lt;/span&gt;
&lt;span class="s1"&gt;                  &amp;quot;index&amp;quot;: &amp;quot;not_analyzed&amp;quot;&lt;/span&gt;
&lt;span class="s1"&gt;              }&lt;/span&gt;
&lt;span class="s1"&gt;          }&lt;/span&gt;
&lt;span class="s1"&gt;        },&lt;/span&gt;
&lt;span class="s1"&gt;        &amp;quot;directed&amp;quot;: {&lt;/span&gt;
&lt;span class="s1"&gt;          &amp;quot;type&amp;quot;: &amp;quot;string&amp;quot;,&lt;/span&gt;
&lt;span class="s1"&gt;          &amp;quot;fields&amp;quot;: {&lt;/span&gt;
&lt;span class="s1"&gt;              &amp;quot;raw&amp;quot;: {&lt;/span&gt;
&lt;span class="s1"&gt;                  &amp;quot;type&amp;quot;: &amp;quot;string&amp;quot;,&lt;/span&gt;
&lt;span class="s1"&gt;                  &amp;quot;index&amp;quot;: &amp;quot;not_analyzed&amp;quot;&lt;/span&gt;
&lt;span class="s1"&gt;              }&lt;/span&gt;
&lt;span class="s1"&gt;          }&lt;/span&gt;
&lt;span class="s1"&gt;        },&lt;/span&gt;
&lt;span class="s1"&gt;        &amp;quot;starring&amp;quot;: {&lt;/span&gt;
&lt;span class="s1"&gt;          &amp;quot;type&amp;quot;: &amp;quot;string&amp;quot;,&lt;/span&gt;
&lt;span class="s1"&gt;          &amp;quot;fields&amp;quot;: {&lt;/span&gt;
&lt;span class="s1"&gt;              &amp;quot;raw&amp;quot;: {&lt;/span&gt;
&lt;span class="s1"&gt;                  &amp;quot;type&amp;quot;: &amp;quot;string&amp;quot;,&lt;/span&gt;
&lt;span class="s1"&gt;                  &amp;quot;index&amp;quot;: &amp;quot;not_analyzed&amp;quot;&lt;/span&gt;
&lt;span class="s1"&gt;              }&lt;/span&gt;
&lt;span class="s1"&gt;          }&lt;/span&gt;
&lt;span class="s1"&gt;        }&lt;/span&gt;
&lt;span class="s1"&gt;      }&lt;/span&gt;
&lt;span class="s1"&gt;    }&lt;/span&gt;
&lt;span class="s1"&gt;  }&lt;/span&gt;
&lt;span class="s1"&gt;}&amp;#39;&lt;/span&gt;

&lt;span class="c1"&gt;# index 14992 docs(verify: echo `xzcat Top.bulk.json.xz | wc -l` / 2 | bc -l)&lt;/span&gt;
~$ xzcat Top.bulk.json.xz &lt;span class="p"&gt;|&lt;/span&gt; curl -XPOST localhost:9200/_bulk --data-binary @-
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ü–æ–ª—è &lt;em&gt;category&lt;/em&gt;, &lt;em&gt;directed&lt;/em&gt;, &lt;em&gt;starring&lt;/em&gt; –≤ —Ç–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏–∏ Elastic —è–≤–ª—è—é—Ç—Å—è &lt;a href="http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/_multi_fields.html" rel="nofollow"&gt;multi-field&lt;/a&gt;, –≤ –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ –æ–Ω–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ —Ö—Ä–∞–Ω—è—Ç –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è —á—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞—Ç—å –∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –≤—ã–¥–∞—á—É –ø–æ —Å—Ç—Ä–æ–≥–æ–º—É —Å–æ–≤–ø–∞–¥–µ–Ω–∏—é - –Ω–∞–ø—Ä–∏–º–µ—Ä —Ä–µ–∂–∏—Å—Å—ë—Ä "–ò–≥–æ—Ä—å –ú–∞—Å–ª–µ–Ω–Ω–∏–∫–æ–≤" –≤–º–µ—Å—Ç–æ "–ò–≥–æ—Ä—å" –∏ "–ú–∞—Å–ª–µ–Ω–Ω–∏–∫–æ–≤" –ø–æ –æ—Ç–¥–µ–ª—å–Ω–æ—Å—Ç–∏. –ü–æ—Å–ª–µ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ –º–æ–∂–Ω–æ –æ—Å—É—â–µ—Å—Ç–≤–ª—è—Ç—å –ø–æ–∏—Å–∫ —Å –ø–æ–¥—Å–≤–µ—Ç–∫–æ–π, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–æ–π, –∞–≥—Ä–µ–≥–∞—Ü–∏–µ–π –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π, –∫ –æ—Å–æ–∑–Ω–∞–Ω–∏—é –∫–æ—Ç–æ—Ä–æ–≥–æ –±—ã–ª–æ –±—ã –∑–¥–æ—Ä–æ–≤–æ –ø–æ–¥–æ–π—Ç–∏ –ø–æ –æ–∫–æ–Ω—á–∞–Ω–∏–∏ –¥–∞–Ω–Ω–æ–≥–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ curl -XGET &lt;span class="s1"&gt;&amp;#39;localhost:9200/kinopoisk/film/_search?pretty&amp;#39;&lt;/span&gt; -d &lt;span class="s1"&gt;&amp;#39; {&lt;/span&gt;
&lt;span class="s1"&gt;  &amp;quot;fields&amp;quot; : [&amp;quot;rate&amp;quot;],&lt;/span&gt;
&lt;span class="s1"&gt;  &amp;quot;query&amp;quot; : {&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;quot;bool&amp;quot;: {&lt;/span&gt;
&lt;span class="s1"&gt;      &amp;quot;must&amp;quot;: [&lt;/span&gt;
&lt;span class="s1"&gt;        {&lt;/span&gt;
&lt;span class="s1"&gt;          &amp;quot;query_string&amp;quot; : {&lt;/span&gt;
&lt;span class="s1"&gt;            &amp;quot;query&amp;quot;:    &amp;quot;—à–µ—Ä–ª–æ–∫&amp;quot;, &lt;/span&gt;
&lt;span class="s1"&gt;            &amp;quot;fields&amp;quot;: [ &amp;quot;name&amp;quot;, &amp;quot;description&amp;quot; ],&lt;/span&gt;
&lt;span class="s1"&gt;            &amp;quot;default_operator&amp;quot;: &amp;quot;and&amp;quot;&lt;/span&gt;
&lt;span class="s1"&gt;          }&lt;/span&gt;
&lt;span class="s1"&gt;        }&lt;/span&gt;
&lt;span class="s1"&gt;      ],&lt;/span&gt;
&lt;span class="s1"&gt;      &amp;quot;filter&amp;quot;: [&lt;/span&gt;
&lt;span class="s1"&gt;        {&lt;/span&gt;
&lt;span class="s1"&gt;          &amp;quot;match&amp;quot;: {&lt;/span&gt;
&lt;span class="s1"&gt;            &amp;quot;directed.raw&amp;quot;: &amp;quot;–ò–≥–æ—Ä—å –ú–∞—Å–ª–µ–Ω–Ω–∏–∫–æ–≤&amp;quot;&lt;/span&gt;
&lt;span class="s1"&gt;          }&lt;/span&gt;
&lt;span class="s1"&gt;        },&lt;/span&gt;
&lt;span class="s1"&gt;        {&lt;/span&gt;
&lt;span class="s1"&gt;          &amp;quot;bool&amp;quot;: {&lt;/span&gt;
&lt;span class="s1"&gt;            &amp;quot;must&amp;quot;: [&lt;/span&gt;
&lt;span class="s1"&gt;              {&lt;/span&gt;
&lt;span class="s1"&gt;                &amp;quot;match&amp;quot;: {&lt;/span&gt;
&lt;span class="s1"&gt;                  &amp;quot;category.raw&amp;quot;: &amp;quot;–¥–µ—Ç–µ–∫—Ç–∏–≤&amp;quot;&lt;/span&gt;
&lt;span class="s1"&gt;                }&lt;/span&gt;
&lt;span class="s1"&gt;              },&lt;/span&gt;
&lt;span class="s1"&gt;              {&lt;/span&gt;
&lt;span class="s1"&gt;                &amp;quot;match&amp;quot;: {&lt;/span&gt;
&lt;span class="s1"&gt;                  &amp;quot;category.raw&amp;quot;: &amp;quot;–∫—Ä–∏–º–∏–Ω–∞–ª&amp;quot;&lt;/span&gt;
&lt;span class="s1"&gt;                }&lt;/span&gt;
&lt;span class="s1"&gt;              }&lt;/span&gt;
&lt;span class="s1"&gt;            ]&lt;/span&gt;
&lt;span class="s1"&gt;          }&lt;/span&gt;
&lt;span class="s1"&gt;        },&lt;/span&gt;
&lt;span class="s1"&gt;        {&lt;/span&gt;
&lt;span class="s1"&gt;          &amp;quot;range&amp;quot; : {&lt;/span&gt;
&lt;span class="s1"&gt;            &amp;quot;date&amp;quot; : {&lt;/span&gt;
&lt;span class="s1"&gt;              &amp;quot;gte&amp;quot; : &amp;quot;1980&amp;quot;,&lt;/span&gt;
&lt;span class="s1"&gt;              &amp;quot;lt&amp;quot; : &amp;quot;1980||+1y&amp;quot;,&lt;/span&gt;
&lt;span class="s1"&gt;              &amp;quot;format&amp;quot;: &amp;quot;yyyy-MM||yyyy&amp;quot;&lt;/span&gt;
&lt;span class="s1"&gt;            }&lt;/span&gt;
&lt;span class="s1"&gt;          }&lt;/span&gt;
&lt;span class="s1"&gt;        }&lt;/span&gt;
&lt;span class="s1"&gt;      ]&lt;/span&gt;
&lt;span class="s1"&gt;    }&lt;/span&gt;
&lt;span class="s1"&gt;  },&lt;/span&gt;
&lt;span class="s1"&gt;  &amp;quot;highlight&amp;quot; : {&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;quot;pre_tags&amp;quot; : [&amp;quot;[mazko.github.io]&amp;quot;],&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;quot;post_tags&amp;quot; : [&amp;quot;[/mazko.github.io]&amp;quot;],&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;quot;fields&amp;quot; : {&lt;/span&gt;
&lt;span class="s1"&gt;      &amp;quot;name&amp;quot; : {&amp;quot;fragment_size&amp;quot; : 22, &amp;quot;number_of_fragments&amp;quot; : 1},&lt;/span&gt;
&lt;span class="s1"&gt;      &amp;quot;description&amp;quot; : {&amp;quot;fragment_size&amp;quot; : 22, &amp;quot;number_of_fragments&amp;quot; : 1}&lt;/span&gt;
&lt;span class="s1"&gt;    }&lt;/span&gt;
&lt;span class="s1"&gt;  },&lt;/span&gt;
&lt;span class="s1"&gt;  &amp;quot;sort&amp;quot; : [&lt;/span&gt;
&lt;span class="s1"&gt;      {&amp;quot;rate&amp;quot; : {&amp;quot;order&amp;quot; : &amp;quot;desc&amp;quot;} }&lt;/span&gt;
&lt;span class="s1"&gt;  ],&lt;/span&gt;
&lt;span class="s1"&gt;  &amp;quot;aggs&amp;quot;: {&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;quot;years&amp;quot;: {&lt;/span&gt;
&lt;span class="s1"&gt;      &amp;quot;date_histogram&amp;quot;: {&lt;/span&gt;
&lt;span class="s1"&gt;        &amp;quot;field&amp;quot;: &amp;quot;date&amp;quot;,&lt;/span&gt;
&lt;span class="s1"&gt;        &amp;quot;interval&amp;quot;: &amp;quot;year&amp;quot;,&lt;/span&gt;
&lt;span class="s1"&gt;        &amp;quot;min_doc_count&amp;quot;: 1,&lt;/span&gt;
&lt;span class="s1"&gt;        &amp;quot;order&amp;quot; : { &amp;quot;_count&amp;quot; : &amp;quot;desc&amp;quot; }&lt;/span&gt;
&lt;span class="s1"&gt;      },&lt;/span&gt;
&lt;span class="s1"&gt;      &amp;quot;aggs&amp;quot;: {&lt;/span&gt;
&lt;span class="s1"&gt;        &amp;quot;months&amp;quot;: {&lt;/span&gt;
&lt;span class="s1"&gt;          &amp;quot;date_histogram&amp;quot;: {&lt;/span&gt;
&lt;span class="s1"&gt;            &amp;quot;field&amp;quot;: &amp;quot;date&amp;quot;,&lt;/span&gt;
&lt;span class="s1"&gt;            &amp;quot;interval&amp;quot;: &amp;quot;month&amp;quot;,&lt;/span&gt;
&lt;span class="s1"&gt;            &amp;quot;min_doc_count&amp;quot;: 1,&lt;/span&gt;
&lt;span class="s1"&gt;            &amp;quot;order&amp;quot; : { &amp;quot;_count&amp;quot; : &amp;quot;desc&amp;quot; }&lt;/span&gt;
&lt;span class="s1"&gt;          }&lt;/span&gt;
&lt;span class="s1"&gt;        }&lt;/span&gt;
&lt;span class="s1"&gt;      }&lt;/span&gt;
&lt;span class="s1"&gt;    },&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;quot;categories&amp;quot; : {&lt;/span&gt;
&lt;span class="s1"&gt;      &amp;quot;terms&amp;quot; : { &amp;quot;field&amp;quot; : &amp;quot;category.raw&amp;quot;, &amp;quot;size&amp;quot;: 0 }&lt;/span&gt;
&lt;span class="s1"&gt;    },&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;quot;directors&amp;quot; : {&lt;/span&gt;
&lt;span class="s1"&gt;      &amp;quot;terms&amp;quot; : { &amp;quot;field&amp;quot; : &amp;quot;directed.raw&amp;quot;, &amp;quot;size&amp;quot;: 0 }&lt;/span&gt;
&lt;span class="s1"&gt;    },&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;quot;stars&amp;quot; : {&lt;/span&gt;
&lt;span class="s1"&gt;      &amp;quot;terms&amp;quot; : { &amp;quot;field&amp;quot; : &amp;quot;starring.raw&amp;quot;, &amp;quot;size&amp;quot;: 0 }&lt;/span&gt;
&lt;span class="s1"&gt;    }&lt;/span&gt;
&lt;span class="s1"&gt;  }&lt;/span&gt;
&lt;span class="s1"&gt;}&amp;#39;&lt;/span&gt;
&lt;span class="c1"&gt;# response&lt;/span&gt;
&lt;span class="o"&gt;{&lt;/span&gt;
  &lt;span class="s2"&gt;&amp;quot;took&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;3117&lt;/span&gt;,
  &lt;span class="s2"&gt;&amp;quot;timed_out&amp;quot;&lt;/span&gt; : false,
  &lt;span class="s2"&gt;&amp;quot;_shards&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;total&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;5&lt;/span&gt;,
    &lt;span class="s2"&gt;&amp;quot;successful&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;5&lt;/span&gt;,
    &lt;span class="s2"&gt;&amp;quot;failed&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;0&lt;/span&gt;
  &lt;span class="o"&gt;}&lt;/span&gt;,
  &lt;span class="s2"&gt;&amp;quot;hits&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;total&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;5&lt;/span&gt;,
    &lt;span class="s2"&gt;&amp;quot;max_score&amp;quot;&lt;/span&gt; : null,
    &lt;span class="s2"&gt;&amp;quot;hits&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
      &lt;span class="s2"&gt;&amp;quot;_index&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;kinopoisk&amp;quot;&lt;/span&gt;,
      &lt;span class="s2"&gt;&amp;quot;_type&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;film&amp;quot;&lt;/span&gt;,
      &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;77269&amp;quot;&lt;/span&gt;,
      &lt;span class="s2"&gt;&amp;quot;_score&amp;quot;&lt;/span&gt; : null,
      &lt;span class="s2"&gt;&amp;quot;fields&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="s2"&gt;&amp;quot;rate&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="m"&gt;8&lt;/span&gt;.415 &lt;span class="o"&gt;]&lt;/span&gt;
      &lt;span class="o"&gt;}&lt;/span&gt;,
      &lt;span class="s2"&gt;&amp;quot;highlight&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="s2"&gt;&amp;quot;name&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;[mazko.github.io]–®–µ—Ä–ª–æ–∫[/mazko.github.io] –•–æ–ª–º—Å –∏ –¥–æ–∫—Ç–æ—Ä&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt;,
        &lt;span class="s2"&gt;&amp;quot;description&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot; [mazko.github.io]–®–µ—Ä–ª–æ–∫[/mazko.github.io] –•–æ–ª–º—Å. –≠—Ç–æ&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt;
      &lt;span class="o"&gt;}&lt;/span&gt;,
      &lt;span class="s2"&gt;&amp;quot;sort&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="m"&gt;8&lt;/span&gt;.415 &lt;span class="o"&gt;]&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;, &lt;span class="o"&gt;{&lt;/span&gt;
      &lt;span class="s2"&gt;&amp;quot;_index&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;kinopoisk&amp;quot;&lt;/span&gt;,
      &lt;span class="s2"&gt;&amp;quot;_type&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;film&amp;quot;&lt;/span&gt;,
      &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;354799&amp;quot;&lt;/span&gt;,
      &lt;span class="s2"&gt;&amp;quot;_score&amp;quot;&lt;/span&gt; : null,
      &lt;span class="s2"&gt;&amp;quot;fields&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="s2"&gt;&amp;quot;rate&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="m"&gt;8&lt;/span&gt;.313 &lt;span class="o"&gt;]&lt;/span&gt;
      &lt;span class="o"&gt;}&lt;/span&gt;,
      &lt;span class="s2"&gt;&amp;quot;highlight&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="s2"&gt;&amp;quot;name&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;[mazko.github.io]–®–µ—Ä–ª–æ–∫[/mazko.github.io] –•–æ–ª–º—Å –∏ –¥–æ–∫—Ç–æ—Ä&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt;,
        &lt;span class="s2"&gt;&amp;quot;description&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;[mazko.github.io]–®–µ—Ä–ª–æ–∫[/mazko.github.io] –•–æ–ª–º—Å –≤—Å—Ç—É–ø–∏–ª&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt;
      &lt;span class="o"&gt;}&lt;/span&gt;,
      &lt;span class="s2"&gt;&amp;quot;sort&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="m"&gt;8&lt;/span&gt;.313 &lt;span class="o"&gt;]&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;, &lt;span class="o"&gt;{&lt;/span&gt;
      &lt;span class="s2"&gt;&amp;quot;_index&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;kinopoisk&amp;quot;&lt;/span&gt;,
      &lt;span class="s2"&gt;&amp;quot;_type&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;film&amp;quot;&lt;/span&gt;,
      &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;77265&amp;quot;&lt;/span&gt;,
      &lt;span class="s2"&gt;&amp;quot;_score&amp;quot;&lt;/span&gt; : null,
      &lt;span class="s2"&gt;&amp;quot;fields&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="s2"&gt;&amp;quot;rate&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="m"&gt;8&lt;/span&gt;.297 &lt;span class="o"&gt;]&lt;/span&gt;
      &lt;span class="o"&gt;}&lt;/span&gt;,
      &lt;span class="s2"&gt;&amp;quot;highlight&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="s2"&gt;&amp;quot;name&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;[mazko.github.io]–®–µ—Ä–ª–æ–∫[/mazko.github.io] –•–æ–ª–º—Å –∏ –¥–æ–∫—Ç–æ—Ä&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt;,
        &lt;span class="s2"&gt;&amp;quot;description&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;. –í–æ¬†–≤—Ç–æ—Ä–æ–π¬†‚Äî [mazko.github.io]–®–µ—Ä–ª–æ–∫[/mazko.github.io]&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt;
      &lt;span class="o"&gt;}&lt;/span&gt;,
      &lt;span class="s2"&gt;&amp;quot;sort&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="m"&gt;8&lt;/span&gt;.297 &lt;span class="o"&gt;]&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;, &lt;span class="o"&gt;{&lt;/span&gt;
      &lt;span class="s2"&gt;&amp;quot;_index&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;kinopoisk&amp;quot;&lt;/span&gt;,
      &lt;span class="s2"&gt;&amp;quot;_type&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;film&amp;quot;&lt;/span&gt;,
      &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;368937&amp;quot;&lt;/span&gt;,
      &lt;span class="s2"&gt;&amp;quot;_score&amp;quot;&lt;/span&gt; : null,
      &lt;span class="s2"&gt;&amp;quot;fields&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="s2"&gt;&amp;quot;rate&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="m"&gt;8&lt;/span&gt;.269 &lt;span class="o"&gt;]&lt;/span&gt;
      &lt;span class="o"&gt;}&lt;/span&gt;,
      &lt;span class="s2"&gt;&amp;quot;highlight&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="s2"&gt;&amp;quot;description&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot; –≤–æ–¥–æ–ø–∞–¥–∞. [mazko.github.io]–®–µ—Ä–ª–æ–∫[/mazko.github.io] –•–æ–ª–º—Å&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt;
      &lt;span class="o"&gt;}&lt;/span&gt;,
      &lt;span class="s2"&gt;&amp;quot;sort&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="m"&gt;8&lt;/span&gt;.269 &lt;span class="o"&gt;]&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;, &lt;span class="o"&gt;{&lt;/span&gt;
      &lt;span class="s2"&gt;&amp;quot;_index&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;kinopoisk&amp;quot;&lt;/span&gt;,
      &lt;span class="s2"&gt;&amp;quot;_type&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;film&amp;quot;&lt;/span&gt;,
      &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;368936&amp;quot;&lt;/span&gt;,
      &lt;span class="s2"&gt;&amp;quot;_score&amp;quot;&lt;/span&gt; : null,
      &lt;span class="s2"&gt;&amp;quot;fields&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="s2"&gt;&amp;quot;rate&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="m"&gt;8&lt;/span&gt;.248 &lt;span class="o"&gt;]&lt;/span&gt;
      &lt;span class="o"&gt;}&lt;/span&gt;,
      &lt;span class="s2"&gt;&amp;quot;highlight&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="s2"&gt;&amp;quot;name&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;[mazko.github.io]–®–µ—Ä–ª–æ–∫[/mazko.github.io] –•–æ–ª–º—Å –∏ –¥–æ–∫—Ç–æ—Ä&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt;,
        &lt;span class="s2"&gt;&amp;quot;description&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;¬†—É–≥—Ä–æ–∑–æ–π. [mazko.github.io]–®–µ—Ä–ª–æ–∫[/mazko.github.io] –•–æ–ª–º—Å&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt;
      &lt;span class="o"&gt;}&lt;/span&gt;,
      &lt;span class="s2"&gt;&amp;quot;sort&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="m"&gt;8&lt;/span&gt;.248 &lt;span class="o"&gt;]&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt;
  &lt;span class="o"&gt;}&lt;/span&gt;,
  &lt;span class="s2"&gt;&amp;quot;aggregations&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;directors&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;{&lt;/span&gt;
      &lt;span class="s2"&gt;&amp;quot;doc_count_error_upper_bound&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;0&lt;/span&gt;,
      &lt;span class="s2"&gt;&amp;quot;sum_other_doc_count&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;0&lt;/span&gt;,
      &lt;span class="s2"&gt;&amp;quot;buckets&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="s2"&gt;&amp;quot;key&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;–ò–≥–æ—Ä—å –ú–∞—Å–ª–µ–Ω–Ω–∏–∫–æ–≤&amp;quot;&lt;/span&gt;,
        &lt;span class="s2"&gt;&amp;quot;doc_count&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;5&lt;/span&gt;
      &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;,
    &lt;span class="s2"&gt;&amp;quot;categories&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;{&lt;/span&gt;
      &lt;span class="s2"&gt;&amp;quot;doc_count_error_upper_bound&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;0&lt;/span&gt;,
      &lt;span class="s2"&gt;&amp;quot;sum_other_doc_count&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;0&lt;/span&gt;,
      &lt;span class="s2"&gt;&amp;quot;buckets&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="s2"&gt;&amp;quot;key&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;–¥–µ—Ç–µ–∫—Ç–∏–≤&amp;quot;&lt;/span&gt;,
        &lt;span class="s2"&gt;&amp;quot;doc_count&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;5&lt;/span&gt;
      &lt;span class="o"&gt;}&lt;/span&gt;, &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="s2"&gt;&amp;quot;key&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;–∫—Ä–∏–º–∏–Ω–∞–ª&amp;quot;&lt;/span&gt;,
        &lt;span class="s2"&gt;&amp;quot;doc_count&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;5&lt;/span&gt;
      &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;,
    &lt;span class="s2"&gt;&amp;quot;stars&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;{&lt;/span&gt;
      &lt;span class="s2"&gt;&amp;quot;doc_count_error_upper_bound&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;0&lt;/span&gt;,
      &lt;span class="s2"&gt;&amp;quot;sum_other_doc_count&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;0&lt;/span&gt;,
      &lt;span class="s2"&gt;&amp;quot;buckets&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="s2"&gt;&amp;quot;key&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;–í–∞—Å–∏–ª–∏–π –õ–∏–≤–∞–Ω–æ–≤&amp;quot;&lt;/span&gt;,
        &lt;span class="s2"&gt;&amp;quot;doc_count&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;5&lt;/span&gt;
      &lt;span class="o"&gt;}&lt;/span&gt;, &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="s2"&gt;&amp;quot;key&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;–í–∏—Ç–∞–ª–∏–π –°–æ–ª–æ–º–∏–Ω&amp;quot;&lt;/span&gt;,
        &lt;span class="s2"&gt;&amp;quot;doc_count&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;5&lt;/span&gt;
      &lt;span class="o"&gt;}&lt;/span&gt;, &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="s2"&gt;&amp;quot;key&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;–†–∏–Ω–∞ –ó–µ–ª–µ–Ω–∞—è&amp;quot;&lt;/span&gt;,
        &lt;span class="s2"&gt;&amp;quot;doc_count&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;5&lt;/span&gt;
      &lt;span class="o"&gt;}&lt;/span&gt;, &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="s2"&gt;&amp;quot;key&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;–ë–æ—Ä–∏—Å–ª–∞–≤ –ë—Ä–æ–Ω–¥—É–∫–æ–≤&amp;quot;&lt;/span&gt;,
        &lt;span class="s2"&gt;&amp;quot;doc_count&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;4&lt;/span&gt;
      &lt;span class="o"&gt;}&lt;/span&gt;, &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="s2"&gt;&amp;quot;key&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;–ë–æ—Ä–∏—Å –ö–ª—é–µ–≤&amp;quot;&lt;/span&gt;,
        &lt;span class="s2"&gt;&amp;quot;doc_count&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;3&lt;/span&gt;
      &lt;span class="o"&gt;}&lt;/span&gt;, &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="s2"&gt;&amp;quot;key&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;–ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ó–∞—Ö–∞—Ä–æ–≤&amp;quot;&lt;/span&gt;,
        &lt;span class="s2"&gt;&amp;quot;doc_count&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;2&lt;/span&gt;
      &lt;span class="o"&gt;}&lt;/span&gt;, &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="s2"&gt;&amp;quot;key&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;–ê–ª–µ–∫—Å–µ–π –ö–æ–∂–µ–≤–Ω–∏–∫–æ–≤&amp;quot;&lt;/span&gt;,
        &lt;span class="s2"&gt;&amp;quot;doc_count&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;2&lt;/span&gt;
      &lt;span class="o"&gt;}&lt;/span&gt;, &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="s2"&gt;&amp;quot;key&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;–í–∞–ª–µ–Ω—Ç–∏–Ω–∞ –ü–∞–Ω–∏–Ω–∞&amp;quot;&lt;/span&gt;,
        &lt;span class="s2"&gt;&amp;quot;doc_count&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;2&lt;/span&gt;
      &lt;span class="o"&gt;}&lt;/span&gt;, &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="s2"&gt;&amp;quot;key&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;–í–∏–∫—Ç–æ—Ä –ï–≤–≥—Ä–∞—Ñ–æ–≤&amp;quot;&lt;/span&gt;,
        &lt;span class="s2"&gt;&amp;quot;doc_count&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;2&lt;/span&gt;
      &lt;span class="o"&gt;}&lt;/span&gt;, &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="s2"&gt;&amp;quot;key&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;–ò–≥–æ—Ä—å –î–º–∏—Ç—Ä–∏–µ–≤&amp;quot;&lt;/span&gt;,
        &lt;span class="s2"&gt;&amp;quot;doc_count&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;2&lt;/span&gt;
      &lt;span class="o"&gt;}&lt;/span&gt;, &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="s2"&gt;&amp;quot;key&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;–ò–≥–æ—Ä—å –ï—Ñ–∏–º–æ–≤&amp;quot;&lt;/span&gt;,
        &lt;span class="s2"&gt;&amp;quot;doc_count&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;2&lt;/span&gt;
      &lt;span class="o"&gt;}&lt;/span&gt;, &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="s2"&gt;&amp;quot;key&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;–ù–∏–∫–æ–ª–∞–π –ö—Ä—é–∫–æ–≤&amp;quot;&lt;/span&gt;,
        &lt;span class="s2"&gt;&amp;quot;doc_count&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;2&lt;/span&gt;
      &lt;span class="o"&gt;}&lt;/span&gt;, &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="s2"&gt;&amp;quot;key&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;–ê–¥–æ–ª—å—Ñ –ò–ª—å–∏–Ω&amp;quot;&lt;/span&gt;,
        &lt;span class="s2"&gt;&amp;quot;doc_count&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;1&lt;/span&gt;
      &lt;span class="o"&gt;}&lt;/span&gt;, &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="s2"&gt;&amp;quot;key&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;–ê–Ω–∞—Ç–æ–ª–∏–π –ü–æ–¥—à–∏–≤–∞–ª–æ–≤&amp;quot;&lt;/span&gt;,
        &lt;span class="s2"&gt;&amp;quot;doc_count&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;1&lt;/span&gt;
      &lt;span class="o"&gt;}&lt;/span&gt;, &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="s2"&gt;&amp;quot;key&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;–ë–æ—Ä–∏—Å –†—ã–∂—É—Ö–∏–Ω&amp;quot;&lt;/span&gt;,
        &lt;span class="s2"&gt;&amp;quot;doc_count&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;1&lt;/span&gt;
      &lt;span class="o"&gt;}&lt;/span&gt;, &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="s2"&gt;&amp;quot;key&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;–í–∏–∫—Ç–æ—Ä –ê—Ä–∏—Å—Ç–æ–≤&amp;quot;&lt;/span&gt;,
        &lt;span class="s2"&gt;&amp;quot;doc_count&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;1&lt;/span&gt;
      &lt;span class="o"&gt;}&lt;/span&gt;, &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="s2"&gt;&amp;quot;key&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;–í–∏—Ç–∞–ª–∏–π –ë–∞–≥–∞–Ω–æ–≤&amp;quot;&lt;/span&gt;,
        &lt;span class="s2"&gt;&amp;quot;doc_count&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;1&lt;/span&gt;
      &lt;span class="o"&gt;}&lt;/span&gt;, &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="s2"&gt;&amp;quot;key&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;–ì–µ–Ω–Ω–∞–¥–∏–π –ë–æ–≥–∞—á—ë–≤&amp;quot;&lt;/span&gt;,
        &lt;span class="s2"&gt;&amp;quot;doc_count&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;1&lt;/span&gt;
      &lt;span class="o"&gt;}&lt;/span&gt;, &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="s2"&gt;&amp;quot;key&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;–ò–≥–Ω–∞—Ç –õ–µ–π—Ä–µ—Ä&amp;quot;&lt;/span&gt;,
        &lt;span class="s2"&gt;&amp;quot;doc_count&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;1&lt;/span&gt;
      &lt;span class="o"&gt;}&lt;/span&gt;, &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="s2"&gt;&amp;quot;key&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;–ö–∞—Ç–µ—Ä–∏–Ω–∞ –®–µ–ª–ª&amp;quot;&lt;/span&gt;,
        &lt;span class="s2"&gt;&amp;quot;doc_count&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;1&lt;/span&gt;
      &lt;span class="o"&gt;}&lt;/span&gt;, &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="s2"&gt;&amp;quot;key&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;–ú–∞—Ä–∏—è –°–æ–ª–æ–º–∏–Ω–∞&amp;quot;&lt;/span&gt;,
        &lt;span class="s2"&gt;&amp;quot;doc_count&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;1&lt;/span&gt;
      &lt;span class="o"&gt;}&lt;/span&gt;, &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="s2"&gt;&amp;quot;key&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;–ù–∏–∫–æ–ª–∞–π –ö–∞—Ä–∞—á–µ–Ω—Ü–æ–≤&amp;quot;&lt;/span&gt;,
        &lt;span class="s2"&gt;&amp;quot;doc_count&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;1&lt;/span&gt;
      &lt;span class="o"&gt;}&lt;/span&gt;, &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="s2"&gt;&amp;quot;key&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;–°–≤–µ—Ç–ª–∞–Ω–∞ –ö—Ä—é—á–∫–æ–≤–∞&amp;quot;&lt;/span&gt;,
        &lt;span class="s2"&gt;&amp;quot;doc_count&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;1&lt;/span&gt;
      &lt;span class="o"&gt;}&lt;/span&gt;, &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="s2"&gt;&amp;quot;key&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;–§–µ–¥–æ—Ä –û–¥–∏–Ω–æ–∫–æ–≤&amp;quot;&lt;/span&gt;,
        &lt;span class="s2"&gt;&amp;quot;doc_count&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;1&lt;/span&gt;
      &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;,
    &lt;span class="s2"&gt;&amp;quot;years&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;{&lt;/span&gt;
      &lt;span class="s2"&gt;&amp;quot;buckets&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="s2"&gt;&amp;quot;key_as_string&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;1980-01-01T00:00:00.000Z&amp;quot;&lt;/span&gt;,
        &lt;span class="s2"&gt;&amp;quot;key&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;315532800000&lt;/span&gt;,
        &lt;span class="s2"&gt;&amp;quot;doc_count&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;5&lt;/span&gt;,
        &lt;span class="s2"&gt;&amp;quot;months&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;{&lt;/span&gt;
          &lt;span class="s2"&gt;&amp;quot;buckets&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="s2"&gt;&amp;quot;key_as_string&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;1980-01-01T00:00:00.000Z&amp;quot;&lt;/span&gt;,
            &lt;span class="s2"&gt;&amp;quot;key&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;315532800000&lt;/span&gt;,
            &lt;span class="s2"&gt;&amp;quot;doc_count&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;3&lt;/span&gt;
          &lt;span class="o"&gt;}&lt;/span&gt;, &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="s2"&gt;&amp;quot;key_as_string&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;1980-03-01T00:00:00.000Z&amp;quot;&lt;/span&gt;,
            &lt;span class="s2"&gt;&amp;quot;key&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;320716800000&lt;/span&gt;,
            &lt;span class="s2"&gt;&amp;quot;doc_count&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;2&lt;/span&gt;
          &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
      &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
  &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–í –∑–∞–ø—Ä–æ—Å–µ –º—ã –∏—Å–∫–∞–ª–∏ —Å—Ç—Ä–æ–∫—É &lt;em&gt;—à–µ—Ä–ª–æ–∫&lt;/em&gt; –ø–æ –ø–æ–ª—è–º &lt;em&gt;name&lt;/em&gt; –∏ &lt;em&gt;description&lt;/em&gt;, –∏—Å–∫–ª—é—á–∏–ª–∏ –≤—Å–µ —Ñ–∏–ª—å–º—ã –∫—Ä–æ–º–µ —Ä–µ–∂–∏—Å—Å—ë—Ä–∞ "–ò–≥–æ—Ä—å –ú–∞—Å–ª–µ–Ω–Ω–∏–∫–æ–≤", –∂–∞–Ω—Ä—ã –¥–æ–∂–Ω—ã –±—ã—Ç—å —Ç–æ–ª—å–∫–æ –∏ &lt;em&gt;–¥–µ—Ç–µ–∫—Ç–∏–≤&lt;/em&gt; –∏ &lt;em&gt;–∫—Ä–∏–º–∏–Ω–∞–ª&lt;/em&gt;, —Ç–æ–ª—å–∫–æ 1980 –≥–æ–¥. –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ –ø–æ–ª—é &lt;em&gt;rate&lt;/em&gt;. –ü—Ä–æ—Å—Ç–∞—è –∞–≥—Ä–µ–≥–∞—Ü–∏—è –ø–æ –ø–æ–ª—è–º &lt;em&gt;category&lt;/em&gt;, &lt;em&gt;directed&lt;/em&gt; –∏ &lt;em&gt;starring&lt;/em&gt;. –í–ª–æ–∂–µ–Ω–Ω–∞—è –∞–≥—Ä–µ–≥–∞—Ü–∏—è –ø–æ –¥–∞—Ç–µ - –≥–æ–¥—ã –∏ –≤ –Ω–∏—Ö –º–µ—Å—è—Ü—ã. –ù–æ –æ–±–æ –≤—Å—ë–º –ø–æ –ø–æ—Ä—è–¥–∫—É :)&lt;/p&gt;
&lt;h2&gt;–£–°–¢–ê–ù–û–í–ö–ê –ò –ù–ê–°–¢–†–û–ô–ö–ê ELASTICSEARCH&lt;/h2&gt;
&lt;p&gt;–ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è —á—Ç–æ –≤ —Å–∏—Å—Ç–µ–º–µ —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω &lt;a href="https://docs.docker.com/engine/installation/" rel="nofollow"&gt;Docker&lt;/a&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ docker -v
Docker version &lt;span class="m"&gt;1&lt;/span&gt;.11.2, build b9f10c9

~$ docker pull ubuntu &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; docker run -it ubuntu

root@d1b1c0c6bddc:/# cat /etc/lsb-release
&lt;span class="nv"&gt;DISTRIB_ID&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;Ubuntu
&lt;span class="nv"&gt;DISTRIB_RELEASE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;16&lt;/span&gt;.04
&lt;span class="nv"&gt;DISTRIB_CODENAME&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;xenial
&lt;span class="nv"&gt;DISTRIB_DESCRIPTION&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Ubuntu 16.04 LTS&amp;quot;&lt;/span&gt;

root@d1b1c0c6bddc:/# apt update &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; apt -y upgrade &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
  apt -y install software-properties-common command-not-found &lt;span class="se"&gt;\&lt;/span&gt;
  man-db openjdk-8-jdk wget curl net-tools

root@d1b1c0c6bddc:/# wget -qO - https://packages.elastic.co/GPG-KEY-elasticsearch &lt;span class="p"&gt;|&lt;/span&gt; apt-key add -

root@d1b1c0c6bddc:/# &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;deb https://packages.elastic.co/elasticsearch/2.x/debian stable main&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;&lt;span class="se"&gt;\&lt;/span&gt;
  tee -a /etc/apt/sources.list.d/elasticsearch-2.x.list

root@d1b1c0c6bddc:/# apt -y install apt-transport-https &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; apt update &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; apt install -y elasticsearch

root@d1b1c0c6bddc:/# &lt;span class="nb"&gt;cd&lt;/span&gt; /usr/share/elasticsearch/
root@d1b1c0c6bddc:/# mkdir config/ &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; chown elasticsearch:elasticsearch config/
root@d1b1c0c6bddc:/# mkdir logs/ &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; chown elasticsearch:elasticsearch logs/
root@d1b1c0c6bddc:/# mkdir data/ &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; chown elasticsearch:elasticsearch data/

root@d1b1c0c6bddc:/# cat &lt;span class="s"&gt;&amp;lt;&amp;lt;EOT &amp;gt; /usr/share/elasticsearch/config/logging.yml&lt;/span&gt;
&lt;span class="s"&gt;rootLogger: TRACE,console&lt;/span&gt;
&lt;span class="s"&gt;appender:&lt;/span&gt;
&lt;span class="s"&gt;  console:&lt;/span&gt;
&lt;span class="s"&gt;    type: console&lt;/span&gt;
&lt;span class="s"&gt;    layout:&lt;/span&gt;
&lt;span class="s"&gt;      type: consolePattern&lt;/span&gt;
&lt;span class="s"&gt;      conversionPattern: &amp;quot;[%d{ISO8601}][%-5p][%-25c] %m%n&amp;quot;&lt;/span&gt;
&lt;span class="s"&gt;EOT&lt;/span&gt;

root@d1b1c0c6bddc:/# cat &lt;span class="s"&gt;&amp;lt;&amp;lt;EOT &amp;gt; /usr/share/elasticsearch/config/elasticsearch.yml&lt;/span&gt;
&lt;span class="s"&gt;cluster.name: &amp;quot;docker-cluster&amp;quot;&lt;/span&gt;
&lt;span class="s"&gt;network.host: 0.0.0.0&lt;/span&gt;
&lt;span class="s"&gt;http.max_content_length: 333mb&lt;/span&gt;
&lt;span class="s"&gt;http.cors:&lt;/span&gt;
&lt;span class="s"&gt;  enabled: true &lt;/span&gt;
&lt;span class="s"&gt;  allow-origin: /https?:\/\/localhost(:[0-9]+)?/&lt;/span&gt;
&lt;span class="s"&gt;  allow-methods: OPTIONS, HEAD, GET, POST, PUT, DELETE&lt;/span&gt;
&lt;span class="s"&gt;  allow-headers: X-Requested-With,X-Auth-Token,Content-Type, Content-Length&lt;/span&gt;
&lt;span class="s"&gt;EOT&lt;/span&gt;

root@d1b1c0c6bddc:/# &lt;span class="nb"&gt;exit&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–í &lt;a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-http.html#_settings_2" rel="nofollow"&gt;–Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö&lt;/a&gt; –º—ã –¥–æ–±–∞–≤–∏–ª–∏ –ø–æ–¥–¥–µ—Ä–∂–∫—É &lt;code&gt;http.cors&lt;/code&gt; —á—Ç–æ–±—ã —Å elastic –º–æ–∂–Ω–æ –±—ã–ª–æ —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞–ø—Ä—è–º—É—é –∏–∑ –±—Ä–∞—É–∑–µ—Ä–∞. –ù–∞ —ç—Ç–æ–º —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ - –æ—Å—Ç–∞–ª–æ—Å—å –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –æ–±—Ä–∞–∑:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ docker commit d1b1c0c6bddc elastic
~$ docker rm d1b1c0c6bddc

~$ docker run --rm -it -u elasticsearch -p &lt;span class="m"&gt;9200&lt;/span&gt;:9200 elastic &lt;span class="se"&gt;\&lt;/span&gt;
  /usr/share/elasticsearch/bin/elasticsearch
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ü—Ä–æ–≤–µ—Ä–∫–∞ &lt;code&gt;http.cors&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ curl -I -H &lt;span class="s1"&gt;&amp;#39;Origin: http://localhost:8080&amp;#39;&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;http://localhost:9200/&amp;#39;&lt;/span&gt;
&lt;span class="c1"&gt;# response&lt;/span&gt;
HTTP/1.1 &lt;span class="m"&gt;200&lt;/span&gt; OK
Access-Control-Allow-Origin: http://localhost:8080
Content-Type: text/plain&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="nv"&gt;charset&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;UTF-8
Content-Length: &lt;span class="m"&gt;0&lt;/span&gt;

~$ curl -I -H &lt;span class="s1"&gt;&amp;#39;Origin: http://some.hacker.com&amp;#39;&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;http://localhost:9200/&amp;#39;&lt;/span&gt;
&lt;span class="c1"&gt;# response&lt;/span&gt;
HTTP/1.1 &lt;span class="m"&gt;403&lt;/span&gt; Forbidden
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–í –Ω–∞—Å—Ç–æ–π–∫–∞—Ö &lt;code&gt;http.cors&lt;/code&gt; –Ω–µ—Ç —É–ø–æ–º–∏–Ω–∞–Ω–∏–π –æ some.hacker.com –ø–æ—ç—Ç–æ–º—É —Å–ø—Ä–∞–≤–µ–¥–ª–∏–≤–æ 403. –ù–∞–∫–æ–Ω–µ—Ü –µ—Å–ª–∏ –º—ã —Ö–æ—Ç–∏–º —á—Ç–æ–±—ã –¥–∞–Ω–Ω—ã–µ —Ä–∞–±–æ—Ç—ã –æ–±—Ä–∞–∑–∞ elastic —Å–æ—Ö—Ä–∞–Ω—è–ª–∏—Å—å –ø–æ—Å–ª–µ –µ–≥–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ docker volume create --name elastic-data

&lt;span class="c1"&gt;# user: elasticsearch, port forward 9200, image: elastic, volume: elastic-data&lt;/span&gt;
~$ docker run --rm -it -u elasticsearch -p &lt;span class="m"&gt;9200&lt;/span&gt;:9200 &lt;span class="se"&gt;\&lt;/span&gt;
  -v elastic-data:/usr/share/elasticsearch/data elastic &lt;span class="se"&gt;\&lt;/span&gt;
  /usr/share/elasticsearch/bin/elasticsearch
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–° Docker –≤—Å—ë.&lt;/p&gt;
&lt;h2&gt;REST API&lt;/h2&gt;
&lt;p&gt;–ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ curl -XPOST &lt;span class="s1"&gt;&amp;#39;localhost:9200/kinopoisk/film?pretty&amp;#39;&lt;/span&gt; -d &lt;span class="o"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;
&lt;span class="s1"&gt;  &amp;quot;id&amp;quot;: 409640,&lt;/span&gt;
&lt;span class="s1"&gt;  &amp;quot;name&amp;quot;: &amp;quot;–ö–∞—Å–ª (—Å–µ—Ä–∏–∞–ª 2009 ‚Äì ...)&amp;quot;,&lt;/span&gt;
&lt;span class="s1"&gt;  &amp;quot;description&amp;quot;: &amp;quot;–ó–Ω–∞–∫–æ–º—å—Ç–µ—Å—å, –†–∏—á–∞—Ä–¥ –ö–∞—Å–ª¬†‚Äî¬†—É—Å–ø–µ—à–Ω—ã–π –ø–∏—Å–∞—Ç–µ–ª—å –¥–µ—Ç–µ–∫—Ç–∏–≤–Ω–æ–≥–æ –∂–∞–Ω—Ä–∞...&amp;quot;,&lt;/span&gt;
&lt;span class="s1"&gt;  &amp;quot;date&amp;quot;: &amp;quot;2009-03-08T22:00:00.000Z&amp;quot;,&lt;/span&gt;
&lt;span class="s1"&gt;  &amp;quot;rate&amp;quot;: 8.042,&lt;/span&gt;
&lt;span class="s1"&gt;  &amp;quot;starring&amp;quot;: [&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;quot;–ù—ç–π—Ç–∞–Ω –§–∏–ª–ª–∏–æ–Ω&amp;quot;,&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;quot;–°—Ç–∞–Ω–∞ –ö–∞—Ç–∏–∫&amp;quot;,&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;quot;–°—å—é–∑—ç–Ω –°–∞–ª–ª–∏–≤–∞–Ω&amp;quot;,&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;quot;–î–∂–æ–Ω –£—ç—Ä—Ç–∞—Å&amp;quot;,&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;quot;–®–µ–π–º—É—Å –î–µ–≤–µ—Ä&amp;quot;,&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;quot;–ú–æ–ª–ª–∏ –ö. –ö—É–∏–Ω–Ω&amp;quot;,&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;quot;–¢–∞–º–∞–ª–∞ –î–∂–æ–Ω—Å&amp;quot;,&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;quot;–ü–µ–Ω–Ω–∏ –î–∂–æ–Ω—Å–æ–Ω&amp;quot;,&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;quot;–†—É–±–µ–Ω –°–∞–Ω—Ç—å—è–≥–æ-–•–∞–¥—Å–æ–Ω&amp;quot;,&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;quot;–ú–∞–π—è –°—Ç–æ—è–Ω&amp;quot;&lt;/span&gt;
&lt;span class="s1"&gt;  ],&lt;/span&gt;
&lt;span class="s1"&gt;  &amp;quot;category&amp;quot;: [&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;quot;–¥—Ä–∞–º–∞&amp;quot;,&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;quot;–º–µ–ª–æ–¥—Ä–∞–º–∞&amp;quot;,&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;quot;–∫–æ–º–µ–¥–∏—è&amp;quot;,&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;quot;–∫—Ä–∏–º–∏–Ω–∞–ª&amp;quot;,&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;quot;–¥–µ—Ç–µ–∫—Ç–∏–≤&amp;quot;&lt;/span&gt;
&lt;span class="s1"&gt;  ],&lt;/span&gt;
&lt;span class="s1"&gt;  &amp;quot;directed&amp;quot;: [&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;quot;–†–æ–± –ë–æ—É–º–µ–Ω&amp;quot;,&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;quot;–î–∂–æ–Ω –¢–µ—Ä–ª–µ—Å–∫–∏&amp;quot;,&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;quot;–ë–∏–ª–ª –†–æ—É&amp;quot;&lt;/span&gt;
&lt;span class="s1"&gt;  ]&lt;/span&gt;
&lt;span class="s1"&gt;}&amp;#39;&lt;/span&gt;
&lt;span class="c1"&gt;# response&lt;/span&gt;
&lt;span class="o"&gt;{&lt;/span&gt;
  &lt;span class="s2"&gt;&amp;quot;_index&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;kinopoisk&amp;quot;&lt;/span&gt;,
  &lt;span class="s2"&gt;&amp;quot;_type&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;film&amp;quot;&lt;/span&gt;,
  &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;AVWHlznJTgOouHAvlXph&amp;quot;&lt;/span&gt;,
  &lt;span class="s2"&gt;&amp;quot;_version&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;1&lt;/span&gt;,
  &lt;span class="s2"&gt;&amp;quot;_shards&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;total&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;2&lt;/span&gt;,
    &lt;span class="s2"&gt;&amp;quot;successful&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;1&lt;/span&gt;,
    &lt;span class="s2"&gt;&amp;quot;failed&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;0&lt;/span&gt;
  &lt;span class="o"&gt;}&lt;/span&gt;,
  &lt;span class="s2"&gt;&amp;quot;created&amp;quot;&lt;/span&gt; : &lt;span class="nb"&gt;true&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;

~$ curl -XPOST &lt;span class="s1"&gt;&amp;#39;localhost:9200/kinopoisk/film?pretty&amp;#39;&lt;/span&gt; -d &lt;span class="o"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;
&lt;span class="s1"&gt;  &amp;quot;id&amp;quot;: 153013,&lt;/span&gt;
&lt;span class="s1"&gt;  &amp;quot;name&amp;quot;: &amp;quot;–ó–≤–µ–∑–¥–Ω—ã–π –∫—Ä–µ–π—Å–µ—Ä –ì–∞–ª–∞–∫—Ç–∏–∫–∞ (—Å–µ—Ä–∏–∞–ª 2004 ‚Äì 2009)&amp;quot;,&lt;/span&gt;
&lt;span class="s1"&gt;  &amp;quot;description&amp;quot;: &amp;quot;–ß—É–¥–æ–º —É—Ü–µ–ª–µ–≤ –ø–æ—Å–ª–µ –Ω–∞–ø–∞–¥–µ–Ω–∏—è –°–∞–π–ª–æ–Ω–æ–≤...&amp;quot;,&lt;/span&gt;
&lt;span class="s1"&gt;  &amp;quot;date&amp;quot;: &amp;quot;2004-10-17T21:00:00.000Z&amp;quot;,&lt;/span&gt;
&lt;span class="s1"&gt;  &amp;quot;rate&amp;quot;: 7.943,&lt;/span&gt;
&lt;span class="s1"&gt;  &amp;quot;starring&amp;quot;: [&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;quot;–≠–¥–≤–∞—Ä–¥ –î–∂–µ–π–º—Å –û–ª–º–æ—Å&amp;quot;,&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;quot;–ú—ç—Ä–∏ –ú–∞–∫–î–æ–Ω–Ω–µ–ª–ª&amp;quot;,&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;quot;–î–∂–µ–π–º–∏ –ë–∞–º–±–µ—Ä&amp;quot;,&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;quot;–î–∂–µ–π–º—Å –ö—ç–ª–ª–∏—Å&amp;quot;,&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;quot;–¢—Ä–∏—à–∞ –•–µ–ª—Ñ–µ—Ä&amp;quot;,&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;quot;–ì—Ä–µ–π—Å –ü–∞–∫&amp;quot;,&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;quot;–ö—ç—Ç–∏ –°–∞–∫—Ö–æ—Ñ—Ñ&amp;quot;,&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;quot;–ú–∞–π–∫–ª –•–æ–≥–∞–Ω&amp;quot;,&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;quot;–ê–∞—Ä–æ–Ω –î—É–≥–ª–∞—Å&amp;quot;,&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;quot;–¢–∞–º–æ –ü–µ–Ω–∏–∫–µ—Ç—Ç&amp;quot;&lt;/span&gt;
&lt;span class="s1"&gt;  ],&lt;/span&gt;
&lt;span class="s1"&gt;  &amp;quot;category&amp;quot;: [&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;quot;—Ñ–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞&amp;quot;,&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;quot;–±–æ–µ–≤–∏–∫&amp;quot;,&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;quot;–¥—Ä–∞–º–∞&amp;quot;,&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;quot;–ø—Ä–∏–∫–ª—é—á–µ–Ω–∏—è&amp;quot;&lt;/span&gt;
&lt;span class="s1"&gt;  ],&lt;/span&gt;
&lt;span class="s1"&gt;  &amp;quot;directed&amp;quot;: [&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;quot;–ú–∞–π–∫–ª –†–∞–π–º–µ—Ä&amp;quot;,&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;quot;–ú–∞–π–∫–ª –ù–∞–Ω–∫–∏–Ω&amp;quot;,&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;quot;–†–æ–¥ –•–∞—Ä–¥–∏&amp;quot;&lt;/span&gt;
&lt;span class="s1"&gt;  ]&lt;/span&gt;
&lt;span class="s1"&gt;}&amp;#39;&lt;/span&gt;
&lt;span class="c1"&gt;# response&lt;/span&gt;
&lt;span class="o"&gt;{&lt;/span&gt;
  &lt;span class="s2"&gt;&amp;quot;_index&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;kinopoisk&amp;quot;&lt;/span&gt;,
  &lt;span class="s2"&gt;&amp;quot;_type&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;film&amp;quot;&lt;/span&gt;,
  &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;AVWHnN7ATgOouHAvlXpl&amp;quot;&lt;/span&gt;,
  &lt;span class="s2"&gt;&amp;quot;_version&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;1&lt;/span&gt;,
  &lt;span class="s2"&gt;&amp;quot;_shards&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;total&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;2&lt;/span&gt;,
    &lt;span class="s2"&gt;&amp;quot;successful&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;1&lt;/span&gt;,
    &lt;span class="s2"&gt;&amp;quot;failed&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;0&lt;/span&gt;
  &lt;span class="o"&gt;}&lt;/span&gt;,
  &lt;span class="s2"&gt;&amp;quot;created&amp;quot;&lt;/span&gt; : &lt;span class="nb"&gt;true&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;

~$ curl -XGET &lt;span class="s1"&gt;&amp;#39;localhost:9200/kinopoisk/_mapping?pretty&amp;#39;&lt;/span&gt;
&lt;span class="c1"&gt;# response&lt;/span&gt;
&lt;span class="o"&gt;{&lt;/span&gt;
  &lt;span class="s2"&gt;&amp;quot;kinopoisk&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;mappings&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;{&lt;/span&gt;
      &lt;span class="s2"&gt;&amp;quot;film&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="s2"&gt;&amp;quot;properties&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;{&lt;/span&gt;
          &lt;span class="s2"&gt;&amp;quot;category&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="s2"&gt;&amp;quot;type&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;string&amp;quot;&lt;/span&gt;
          &lt;span class="o"&gt;}&lt;/span&gt;,
          &lt;span class="s2"&gt;&amp;quot;date&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="s2"&gt;&amp;quot;type&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;date&amp;quot;&lt;/span&gt;,
            &lt;span class="s2"&gt;&amp;quot;format&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;strict_date_optional_time||epoch_millis&amp;quot;&lt;/span&gt;
          &lt;span class="o"&gt;}&lt;/span&gt;,
          &lt;span class="s2"&gt;&amp;quot;description&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="s2"&gt;&amp;quot;type&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;string&amp;quot;&lt;/span&gt;
          &lt;span class="o"&gt;}&lt;/span&gt;,
          &lt;span class="s2"&gt;&amp;quot;directed&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="s2"&gt;&amp;quot;type&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;string&amp;quot;&lt;/span&gt;
          &lt;span class="o"&gt;}&lt;/span&gt;,
          &lt;span class="s2"&gt;&amp;quot;id&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="s2"&gt;&amp;quot;type&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;long&amp;quot;&lt;/span&gt;
          &lt;span class="o"&gt;}&lt;/span&gt;,
          &lt;span class="s2"&gt;&amp;quot;name&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="s2"&gt;&amp;quot;type&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;string&amp;quot;&lt;/span&gt;
          &lt;span class="o"&gt;}&lt;/span&gt;,
          &lt;span class="s2"&gt;&amp;quot;rate&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="s2"&gt;&amp;quot;type&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;double&amp;quot;&lt;/span&gt;
          &lt;span class="o"&gt;}&lt;/span&gt;,
          &lt;span class="s2"&gt;&amp;quot;starring&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="s2"&gt;&amp;quot;type&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;string&amp;quot;&lt;/span&gt;
          &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
      &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
  &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;ElasticSearch –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏ –¥–∞–∂–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–∞—Å–ø–æ–∑–Ω–∞–ª —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –≤—Å–µ—Ö –ø–æ–ª–µ–π –≤ –∏–Ω–¥–µ–∫—Å–µ ! –ü—Ä–æ—Å—Ç–æ–π &lt;a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/search-request-from-size.html" rel="nofollow"&gt;–ø–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω—ã–π&lt;/a&gt; –ø–æ–∏—Å–∫ –ø–æ –¥–≤—É–º –ø–æ–ª—è–º &lt;em&gt;name&lt;/em&gt; –∏ &lt;em&gt;description&lt;/em&gt;, –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö –ø–æ–∏—Å–∫–∞ –≤—ã–≤–æ–¥–∏—Ç—å —Ç–æ–ª—å–∫–æ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ–ª–µ–π &lt;em&gt;id&lt;/em&gt;, &lt;em&gt;rate&lt;/em&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ curl -XGET &lt;span class="s1"&gt;&amp;#39;localhost:9200/kinopoisk/film/_search?pretty&amp;#39;&lt;/span&gt; -d &lt;span class="o"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;quot;fields&amp;quot; : [&amp;quot;id&amp;quot;, &amp;quot;rate&amp;quot;],&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;quot;query&amp;quot; : {&lt;/span&gt;
&lt;span class="s1"&gt;      &amp;quot;query_string&amp;quot; : {&lt;/span&gt;
&lt;span class="s1"&gt;        &amp;quot;query&amp;quot;:    &amp;quot;–ö–∞—Å–ª&amp;quot;, &lt;/span&gt;
&lt;span class="s1"&gt;        &amp;quot;fields&amp;quot;: [ &amp;quot;name&amp;quot;, &amp;quot;description&amp;quot; ],&lt;/span&gt;
&lt;span class="s1"&gt;        &amp;quot;default_operator&amp;quot;: &amp;quot;and&amp;quot;&lt;/span&gt;
&lt;span class="s1"&gt;      }&lt;/span&gt;
&lt;span class="s1"&gt;    }&lt;/span&gt;
&lt;span class="s1"&gt;}&amp;#39;&lt;/span&gt;
&lt;span class="c1"&gt;# response&lt;/span&gt;
&lt;span class="o"&gt;{&lt;/span&gt;
  &lt;span class="s2"&gt;&amp;quot;took&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;8&lt;/span&gt;,
  &lt;span class="s2"&gt;&amp;quot;timed_out&amp;quot;&lt;/span&gt; : false,
  &lt;span class="s2"&gt;&amp;quot;_shards&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;total&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;5&lt;/span&gt;,
    &lt;span class="s2"&gt;&amp;quot;successful&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;5&lt;/span&gt;,
    &lt;span class="s2"&gt;&amp;quot;failed&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;0&lt;/span&gt;
  &lt;span class="o"&gt;}&lt;/span&gt;,
  &lt;span class="s2"&gt;&amp;quot;hits&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;total&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;1&lt;/span&gt;,
    &lt;span class="s2"&gt;&amp;quot;max_score&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;0&lt;/span&gt;.15342641,
    &lt;span class="s2"&gt;&amp;quot;hits&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
      &lt;span class="s2"&gt;&amp;quot;_index&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;kinopoisk&amp;quot;&lt;/span&gt;,
      &lt;span class="s2"&gt;&amp;quot;_type&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;film&amp;quot;&lt;/span&gt;,
      &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;AVWHmwbSTgOouHAvlXpi&amp;quot;&lt;/span&gt;,
      &lt;span class="s2"&gt;&amp;quot;_score&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;0&lt;/span&gt;.15342641,
      &lt;span class="s2"&gt;&amp;quot;fields&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="s2"&gt;&amp;quot;rate&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="m"&gt;8&lt;/span&gt;.042 &lt;span class="o"&gt;]&lt;/span&gt;,
        &lt;span class="s2"&gt;&amp;quot;id&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="m"&gt;409640&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt;
      &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt;
  &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ü–æ–∏—Å–∫ —Å –ø–æ–¥—Å–≤–µ—Ç–∫–æ–π:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ curl -XGET &lt;span class="s1"&gt;&amp;#39;localhost:9200/kinopoisk/film/_search?pretty&amp;#39;&lt;/span&gt; -d &lt;span class="o"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;quot;fields&amp;quot; : [&amp;quot;id&amp;quot;, &amp;quot;rate&amp;quot;],&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;quot;query&amp;quot; : {&lt;/span&gt;
&lt;span class="s1"&gt;      &amp;quot;query_string&amp;quot; : {&lt;/span&gt;
&lt;span class="s1"&gt;        &amp;quot;query&amp;quot;:    &amp;quot;—Å–∞–π–ª–æ–Ω*&amp;quot;, &lt;/span&gt;
&lt;span class="s1"&gt;        &amp;quot;fields&amp;quot;: [ &amp;quot;name&amp;quot;, &amp;quot;description&amp;quot; ],&lt;/span&gt;
&lt;span class="s1"&gt;        &amp;quot;default_operator&amp;quot;: &amp;quot;and&amp;quot;&lt;/span&gt;
&lt;span class="s1"&gt;      }&lt;/span&gt;
&lt;span class="s1"&gt;    },&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;quot;highlight&amp;quot; : {&lt;/span&gt;
&lt;span class="s1"&gt;      &amp;quot;pre_tags&amp;quot; : [&amp;quot;[mazko.github.io]&amp;quot;],&lt;/span&gt;
&lt;span class="s1"&gt;      &amp;quot;post_tags&amp;quot; : [&amp;quot;[/mazko.github.io]&amp;quot;],&lt;/span&gt;
&lt;span class="s1"&gt;      &amp;quot;fields&amp;quot; : {&lt;/span&gt;
&lt;span class="s1"&gt;        &amp;quot;name&amp;quot; : {&amp;quot;fragment_size&amp;quot; : 22, &amp;quot;number_of_fragments&amp;quot; : 1},&lt;/span&gt;
&lt;span class="s1"&gt;        &amp;quot;description&amp;quot; : {&amp;quot;fragment_size&amp;quot; : 22, &amp;quot;number_of_fragments&amp;quot; : 1}&lt;/span&gt;
&lt;span class="s1"&gt;      }&lt;/span&gt;
&lt;span class="s1"&gt;    }&lt;/span&gt;
&lt;span class="s1"&gt;}&amp;#39;&lt;/span&gt;
&lt;span class="c1"&gt;# response&lt;/span&gt;
&lt;span class="o"&gt;{&lt;/span&gt;
  &lt;span class="s2"&gt;&amp;quot;took&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;218&lt;/span&gt;,
  &lt;span class="s2"&gt;&amp;quot;timed_out&amp;quot;&lt;/span&gt; : false,
  &lt;span class="s2"&gt;&amp;quot;_shards&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;total&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;5&lt;/span&gt;,
    &lt;span class="s2"&gt;&amp;quot;successful&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;5&lt;/span&gt;,
    &lt;span class="s2"&gt;&amp;quot;failed&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;0&lt;/span&gt;
  &lt;span class="o"&gt;}&lt;/span&gt;,
  &lt;span class="s2"&gt;&amp;quot;hits&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;total&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;1&lt;/span&gt;,
    &lt;span class="s2"&gt;&amp;quot;max_score&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;1&lt;/span&gt;.0,
    &lt;span class="s2"&gt;&amp;quot;hits&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
      &lt;span class="s2"&gt;&amp;quot;_index&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;kinopoisk&amp;quot;&lt;/span&gt;,
      &lt;span class="s2"&gt;&amp;quot;_type&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;film&amp;quot;&lt;/span&gt;,
      &lt;span class="s2"&gt;&amp;quot;_id&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;AVWHnN7ATgOouHAvlXpl&amp;quot;&lt;/span&gt;,
      &lt;span class="s2"&gt;&amp;quot;_score&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;1&lt;/span&gt;.0,
      &lt;span class="s2"&gt;&amp;quot;fields&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="s2"&gt;&amp;quot;rate&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="m"&gt;7&lt;/span&gt;.943 &lt;span class="o"&gt;]&lt;/span&gt;,
        &lt;span class="s2"&gt;&amp;quot;id&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="m"&gt;153013&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt;
      &lt;span class="o"&gt;}&lt;/span&gt;,
      &lt;span class="s2"&gt;&amp;quot;highlight&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="s2"&gt;&amp;quot;description&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot; –Ω–∞–ø–∞–¥–µ–Ω–∏—è [mazko.github.io]–°–∞–π–ª–æ–Ω–æ–≤[/mazko.github.io]...&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt;
      &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt;
  &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–°–∞–º–æ–µ –≤—Ä–µ–º—è –¥–ª—è —Ä–µ–∞–ª—å–Ω—ã—Ö &lt;a href="http://proiot.ru/blog/posts/2016/05/20/lucene-avtozapolnenie-vvoda-polzovatelia/"&gt;–¥–∞–Ω–Ω—ã—Ö&lt;/a&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~: curl -XDELETE &lt;span class="s1"&gt;&amp;#39;localhost:9200/kinopoisk?pretty&amp;#39;&lt;/span&gt;

~: &lt;span class="nb"&gt;time&lt;/span&gt; python3 -c &lt;span class="se"&gt;\&lt;/span&gt;
  &lt;span class="s1"&gt;&amp;#39;import sys, json; [print(json.dumps(i, ensure_ascii=False)) for i in json.load(sys.stdin)]&amp;#39;&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
  &amp;lt; Top.json &lt;span class="p"&gt;|&lt;/span&gt; xargs -d &lt;span class="s1"&gt;&amp;#39;\n&amp;#39;&lt;/span&gt; -n1 curl -XPOST &lt;span class="s1"&gt;&amp;#39;localhost:9200/kinopoisk/film/&amp;#39;&lt;/span&gt; -d

&lt;span class="c1"&gt;# time&lt;/span&gt;
real  18m52.728s
user  1m36.896s
sys   0m36.216s
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ü—Ä–æ—Ü–µ—Å—Å –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ –º–æ–∂–Ω–æ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É—Å–∫–æ—Ä–∏—Ç—å –∏—Å–ø–æ–ª—å–∑—É—è &lt;a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/docs-bulk.html" rel="nofollow"&gt;Bulk API&lt;/a&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~: curl -XDELETE &lt;span class="s1"&gt;&amp;#39;localhost:9200/kinopoisk?pretty&amp;#39;&lt;/span&gt;

~: &lt;span class="nb"&gt;time&lt;/span&gt; python3 -c &lt;span class="se"&gt;\&lt;/span&gt;
  &lt;span class="s1"&gt;&amp;#39;import sys, json; [print(json.dumps({ &amp;quot;index&amp;quot; : { &amp;quot;_index&amp;quot; : &amp;quot;kinopoisk&amp;quot;, &amp;quot;_type&amp;quot; : &amp;quot;film&amp;quot; } }),&lt;/span&gt;
&lt;span class="s1"&gt;  &amp;quot;\n&amp;quot;, json.dumps(i, ensure_ascii=False)) for i in json.load(sys.stdin)]&amp;#39;&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
   &amp;lt; Top.json &lt;span class="p"&gt;|&lt;/span&gt; curl -XPOST localhost:9200/_bulk --data-binary @-

&lt;span class="c1"&gt;# time&lt;/span&gt;
real  0m14.450s
user  0m1.044s
sys   0m0.196s
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ù–µ–º–Ω–æ–≥–æ –ø–æ–ª–µ–∑–Ω–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –æ–± –∏–Ω–¥–µ–∫—Å–µ:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~: curl -XGET &lt;span class="s1"&gt;&amp;#39;localhost:9200/kinopoisk/_count?pretty&amp;#39;&lt;/span&gt;
&lt;span class="c1"&gt;# response&lt;/span&gt;
&lt;span class="o"&gt;{&lt;/span&gt;
  &lt;span class="s2"&gt;&amp;quot;count&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;14999&lt;/span&gt;,
  &lt;span class="s2"&gt;&amp;quot;_shards&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;total&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;5&lt;/span&gt;,
    &lt;span class="s2"&gt;&amp;quot;successful&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;5&lt;/span&gt;,
    &lt;span class="s2"&gt;&amp;quot;failed&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;0&lt;/span&gt;
  &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;

~: curl -XGET &lt;span class="s1"&gt;&amp;#39;localhost:9200/_cat/indices&amp;#39;&lt;/span&gt;
&lt;span class="c1"&gt;# response&lt;/span&gt;
yellow open kinopoisk &lt;span class="m"&gt;5&lt;/span&gt; &lt;span class="m"&gt;1&lt;/span&gt; &lt;span class="m"&gt;14999&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="m"&gt;39&lt;/span&gt;.1mb &lt;span class="m"&gt;39&lt;/span&gt;.1mb
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/search-suggesters-completion.html" rel="nofollow"&gt;Suggest&lt;/a&gt; –≤ ElasticSearch –¥–æ–≤–æ–ª—å–Ω–æ —Å—Ç—Ä–∞–Ω–Ω—ã–π –ª–∏–±–æ –ø–ª–æ—Ö–æ –æ–ø–∏—Å–∞–Ω–Ω—ã–π:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~: curl -XDELETE &lt;span class="s1"&gt;&amp;#39;localhost:9200/kinopoisk?pretty&amp;#39;&lt;/span&gt;

~: curl -XPUT &lt;span class="s1"&gt;&amp;#39;localhost:9200/kinopoisk?pretty&amp;#39;&lt;/span&gt; -d &lt;span class="s1"&gt;&amp;#39;{&lt;/span&gt;
&lt;span class="s1"&gt;  &amp;quot;settings&amp;quot;: {&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;quot;analysis&amp;quot;: {&lt;/span&gt;
&lt;span class="s1"&gt;      &amp;quot;filter&amp;quot;: {&lt;/span&gt;
&lt;span class="s1"&gt;        &amp;quot;shingle_filter&amp;quot;: {&lt;/span&gt;
&lt;span class="s1"&gt;          &amp;quot;type&amp;quot;: &amp;quot;shingle&amp;quot;,&lt;/span&gt;
&lt;span class="s1"&gt;          &amp;quot;max_shingle_size&amp;quot;: &amp;quot;5&amp;quot;,&lt;/span&gt;
&lt;span class="s1"&gt;          &amp;quot;min_shingle_size&amp;quot;: &amp;quot;2&amp;quot;,&lt;/span&gt;
&lt;span class="s1"&gt;          &amp;quot;output_unigrams&amp;quot;:&amp;quot;true&amp;quot;&lt;/span&gt;
&lt;span class="s1"&gt;        }&lt;/span&gt;
&lt;span class="s1"&gt;      },&lt;/span&gt;
&lt;span class="s1"&gt;      &amp;quot;analyzer&amp;quot;: {&lt;/span&gt;
&lt;span class="s1"&gt;        &amp;quot;pre_suggest_analyzer&amp;quot;: {&lt;/span&gt;
&lt;span class="s1"&gt;          &amp;quot;type&amp;quot;: &amp;quot;custom&amp;quot;,&lt;/span&gt;
&lt;span class="s1"&gt;          &amp;quot;tokenizer&amp;quot;: &amp;quot;standard&amp;quot;,&lt;/span&gt;
&lt;span class="s1"&gt;          &amp;quot;filter&amp;quot;: [&lt;/span&gt;
&lt;span class="s1"&gt;            &amp;quot;lowercase&amp;quot;,&lt;/span&gt;
&lt;span class="s1"&gt;            &amp;quot;shingle_filter&amp;quot;&lt;/span&gt;
&lt;span class="s1"&gt;          ]&lt;/span&gt;
&lt;span class="s1"&gt;        }&lt;/span&gt;
&lt;span class="s1"&gt;      }&lt;/span&gt;
&lt;span class="s1"&gt;    }&lt;/span&gt;
&lt;span class="s1"&gt;  }&lt;/span&gt;
&lt;span class="s1"&gt;}&amp;#39;&lt;/span&gt;

~: curl -XGET &lt;span class="s1"&gt;&amp;#39;localhost:9200/kinopoisk/_analyze?pretty&amp;#39;&lt;/span&gt; -d &lt;span class="s1"&gt;&amp;#39;{&lt;/span&gt;
&lt;span class="s1"&gt;  &amp;quot;analyzer&amp;quot;: &amp;quot;pre_suggest_analyzer&amp;quot;,&lt;/span&gt;
&lt;span class="s1"&gt;  &amp;quot;text&amp;quot;: [&amp;quot;—Ä–∞–∑ –¥–≤–∞&amp;quot;, &amp;quot;—Ä–∞–∑&amp;quot;]&lt;/span&gt;
&lt;span class="s1"&gt;}&amp;#39;&lt;/span&gt;
&lt;span class="c1"&gt;#response&lt;/span&gt;
&lt;span class="o"&gt;{&lt;/span&gt;
  &lt;span class="s2"&gt;&amp;quot;tokens&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;token&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;—Ä–∞–∑&amp;quot;&lt;/span&gt;,
    &lt;span class="s2"&gt;&amp;quot;start_offset&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;0&lt;/span&gt;,
    &lt;span class="s2"&gt;&amp;quot;end_offset&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;3&lt;/span&gt;,
    &lt;span class="s2"&gt;&amp;quot;type&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;&amp;lt;ALPHANUM&amp;gt;&amp;quot;&lt;/span&gt;,
    &lt;span class="s2"&gt;&amp;quot;position&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;0&lt;/span&gt;
  &lt;span class="o"&gt;}&lt;/span&gt;, &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;token&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;—Ä–∞–∑ –¥–≤–∞&amp;quot;&lt;/span&gt;,
    &lt;span class="s2"&gt;&amp;quot;start_offset&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;0&lt;/span&gt;,
    &lt;span class="s2"&gt;&amp;quot;end_offset&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;7&lt;/span&gt;,
    &lt;span class="s2"&gt;&amp;quot;type&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;shingle&amp;quot;&lt;/span&gt;,
    &lt;span class="s2"&gt;&amp;quot;position&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;0&lt;/span&gt;
  &lt;span class="o"&gt;}&lt;/span&gt;, &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;token&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;–¥–≤–∞&amp;quot;&lt;/span&gt;,
    &lt;span class="s2"&gt;&amp;quot;start_offset&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;4&lt;/span&gt;,
    &lt;span class="s2"&gt;&amp;quot;end_offset&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;7&lt;/span&gt;,
    &lt;span class="s2"&gt;&amp;quot;type&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;&amp;lt;ALPHANUM&amp;gt;&amp;quot;&lt;/span&gt;,
    &lt;span class="s2"&gt;&amp;quot;position&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;1&lt;/span&gt;
  &lt;span class="o"&gt;}&lt;/span&gt;, &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;token&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;—Ä–∞–∑&amp;quot;&lt;/span&gt;,
    &lt;span class="s2"&gt;&amp;quot;start_offset&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;8&lt;/span&gt;,
    &lt;span class="s2"&gt;&amp;quot;end_offset&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;11&lt;/span&gt;,
    &lt;span class="s2"&gt;&amp;quot;type&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;&amp;lt;ALPHANUM&amp;gt;&amp;quot;&lt;/span&gt;,
    &lt;span class="s2"&gt;&amp;quot;position&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;102&lt;/span&gt;
  &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ò—Å—Ö–æ–¥—è –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –Ω–µ—Å–æ–≤—Å–µ–º –ø–æ–Ω—è—Ç–Ω–æ –∫–∞–∫ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ —Å–¥–µ–ª–∞—Ç—å —Ç–∞–∫—É—é —à—Ç—É–∫—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –±–µ–∑ –∏–∑–±—ã—Ç–æ—á–Ω—ã—Ö HTTP –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ &lt;em&gt;localhost:9200/kinopoisk/_analyze&lt;/em&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~: python3 -c &lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;
&lt;span class="s1"&gt;import sys, json&lt;/span&gt;
&lt;span class="s1"&gt;from urllib.request import urlopen&lt;/span&gt;

&lt;span class="s1"&gt;def get_shingles(*args):&lt;/span&gt;
&lt;span class="s1"&gt;  data = { &amp;quot;analyzer&amp;quot;: &amp;quot;pre_suggest_analyzer&amp;quot;, &amp;quot;text&amp;quot;: args }&lt;/span&gt;
&lt;span class="s1"&gt;  data = json.dumps(data).encode(&amp;quot;utf8&amp;quot;)&lt;/span&gt;
&lt;span class="s1"&gt;  with urlopen(&amp;quot;http://localhost:9200/kinopoisk/_analyze&amp;quot;, data=data) as r:&lt;/span&gt;
&lt;span class="s1"&gt;    data = json.loads(r.read().decode(r.info().get_param(&amp;quot;charset&amp;quot;) or &amp;quot;utf-8&amp;quot;))&lt;/span&gt;
&lt;span class="s1"&gt;    tokens = map(lambda v: v[&amp;quot;token&amp;quot;], data[&amp;quot;tokens&amp;quot;])&lt;/span&gt;
&lt;span class="s1"&gt;    tokens = filter(lambda v: len(v) &amp;gt; 1, tokens)&lt;/span&gt;
&lt;span class="s1"&gt;    return list(set(tokens))&lt;/span&gt;

&lt;span class="s1"&gt;for film in { obj[&amp;quot;id&amp;quot;]: obj for obj in json.load(sys.stdin) }.values():&lt;/span&gt;
&lt;span class="s1"&gt;  film[&amp;quot;rate&amp;quot;] = float(film[&amp;quot;rate&amp;quot;])&lt;/span&gt;
&lt;span class="s1"&gt;  film[&amp;quot;suggest&amp;quot;] = { &amp;quot;input&amp;quot;: get_shingles(film[&amp;quot;name&amp;quot;], film[&amp;quot;description&amp;quot;]) }&lt;/span&gt;
&lt;span class="s1"&gt;  print(json.dumps({ &amp;quot;index&amp;quot; : { &amp;quot;_index&amp;quot; : &amp;quot;kinopoisk&amp;quot;, &amp;quot;_type&amp;quot; : &amp;quot;film&amp;quot;, &amp;quot;_id&amp;quot; : film[&amp;quot;id&amp;quot;]} })) &lt;/span&gt;
&lt;span class="s1"&gt;  print(json.dumps(film, ensure_ascii=False))&lt;/span&gt;
&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt; &amp;lt; Top.json &lt;span class="p"&gt;|&lt;/span&gt; xz --extreme -9 &amp;gt; Top.bulk.json.xz
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ò–Ω–¥–µ–∫—Å —É–∂–µ —Å Suggest:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~: curl -XDELETE &lt;span class="s1"&gt;&amp;#39;localhost:9200/kinopoisk?pretty&amp;#39;&lt;/span&gt;

~: curl -XPUT &lt;span class="s1"&gt;&amp;#39;localhost:9200/kinopoisk?pretty&amp;#39;&lt;/span&gt; -d &lt;span class="s1"&gt;&amp;#39;{&lt;/span&gt;
&lt;span class="s1"&gt;  &amp;quot;mappings&amp;quot;: {&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;quot;film&amp;quot; : {&lt;/span&gt;
&lt;span class="s1"&gt;      &amp;quot;properties&amp;quot; : {&lt;/span&gt;
&lt;span class="s1"&gt;        &amp;quot;suggest&amp;quot; : { &lt;/span&gt;
&lt;span class="s1"&gt;          &amp;quot;type&amp;quot; : &amp;quot;completion&amp;quot;,&lt;/span&gt;
&lt;span class="s1"&gt;          &amp;quot;analyzer&amp;quot;: &amp;quot;standard&amp;quot;&lt;/span&gt;
&lt;span class="s1"&gt;          }&lt;/span&gt;
&lt;span class="s1"&gt;        }&lt;/span&gt;
&lt;span class="s1"&gt;      }&lt;/span&gt;
&lt;span class="s1"&gt;    }&lt;/span&gt;
&lt;span class="s1"&gt;  }&lt;/span&gt;
&lt;span class="s1"&gt;}&amp;#39;&lt;/span&gt;

~: xzcat Top.bulk.json.xz &lt;span class="p"&gt;|&lt;/span&gt; curl -XPOST localhost:9200/_bulk --data-binary @-

~: curl -XGET &lt;span class="s1"&gt;&amp;#39;localhost:9200/kinopoisk/_suggest?pretty&amp;#39;&lt;/span&gt; -d &lt;span class="s1"&gt;&amp;#39;{&lt;/span&gt;
&lt;span class="s1"&gt;  &amp;quot;film-suggest&amp;quot; : {&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;quot;text&amp;quot; : &amp;quot;—à–µ—Ä–ª–æ–∫ &amp;quot;,&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;quot;completion&amp;quot; : {&lt;/span&gt;
&lt;span class="s1"&gt;        &amp;quot;field&amp;quot; : &amp;quot;suggest&amp;quot;,&lt;/span&gt;
&lt;span class="s1"&gt;        &amp;quot;size&amp;quot;: 5&lt;/span&gt;
&lt;span class="s1"&gt;    }&lt;/span&gt;
&lt;span class="s1"&gt;  }&lt;/span&gt;
&lt;span class="s1"&gt;}&amp;#39;&lt;/span&gt;
&lt;span class="c1"&gt;#response&lt;/span&gt;
&lt;span class="o"&gt;{&lt;/span&gt;
  &lt;span class="s2"&gt;&amp;quot;_shards&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;total&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;5&lt;/span&gt;,
    &lt;span class="s2"&gt;&amp;quot;successful&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;5&lt;/span&gt;,
    &lt;span class="s2"&gt;&amp;quot;failed&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;0&lt;/span&gt;
  &lt;span class="o"&gt;}&lt;/span&gt;,
  &lt;span class="s2"&gt;&amp;quot;film-suggest&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;text&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;—à–µ—Ä–ª–æ–∫ &amp;quot;&lt;/span&gt;,
    &lt;span class="s2"&gt;&amp;quot;offset&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;0&lt;/span&gt;,
    &lt;span class="s2"&gt;&amp;quot;length&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;7&lt;/span&gt;,
    &lt;span class="s2"&gt;&amp;quot;options&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
      &lt;span class="s2"&gt;&amp;quot;text&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;—à–µ—Ä–ª–æ–∫ —Ö–æ–ª–º—Å&amp;quot;&lt;/span&gt;,
      &lt;span class="s2"&gt;&amp;quot;score&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;3&lt;/span&gt;.0
    &lt;span class="o"&gt;}&lt;/span&gt;, &lt;span class="o"&gt;{&lt;/span&gt;
      &lt;span class="s2"&gt;&amp;quot;text&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;—à–µ—Ä–ª–æ–∫ —Ö–æ–ª–º—Å –∏&amp;quot;&lt;/span&gt;,
      &lt;span class="s2"&gt;&amp;quot;score&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;2&lt;/span&gt;.0
    &lt;span class="o"&gt;}&lt;/span&gt;, &lt;span class="o"&gt;{&lt;/span&gt;
      &lt;span class="s2"&gt;&amp;quot;text&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;—à–µ—Ä–ª–æ–∫ —Ö–æ–ª–º—Å –∏ –¥–æ–∫—Ç–æ—Ä&amp;quot;&lt;/span&gt;,
      &lt;span class="s2"&gt;&amp;quot;score&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;2&lt;/span&gt;.0
    &lt;span class="o"&gt;}&lt;/span&gt;, &lt;span class="o"&gt;{&lt;/span&gt;
      &lt;span class="s2"&gt;&amp;quot;text&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;—à–µ—Ä–ª–æ–∫ —Ö–æ–ª–º—Å –∏ –¥–æ–∫—Ç–æ—Ä –≤–∞—Ç—Å–æ–Ω&amp;quot;&lt;/span&gt;,
      &lt;span class="s2"&gt;&amp;quot;score&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;2&lt;/span&gt;.0
    &lt;span class="o"&gt;}&lt;/span&gt;, &lt;span class="o"&gt;{&lt;/span&gt;
      &lt;span class="s2"&gt;&amp;quot;text&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;—à–µ—Ä–ª–æ–∫ –º–ª–∞–¥—à–∏–π&amp;quot;&lt;/span&gt;,
      &lt;span class="s2"&gt;&amp;quot;score&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;1&lt;/span&gt;.0
    &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt;
  &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ü–æ–∏—Å–∫ —Å &lt;a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-bucket-terms-aggregation.html" rel="nofollow"&gt;–∞–≥—Ä–µ–≥–∞—Ü–∏–µ–π&lt;/a&gt; –ø–æ –ø–æ–ª—é &lt;em&gt;starring&lt;/em&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ curl -XDELETE &lt;span class="s1"&gt;&amp;#39;localhost:9200/kinopoisk?pretty&amp;#39;&lt;/span&gt;

~$ curl -XPUT &lt;span class="s1"&gt;&amp;#39;localhost:9200/kinopoisk?pretty&amp;#39;&lt;/span&gt; -d &lt;span class="s1"&gt;&amp;#39;{&lt;/span&gt;
&lt;span class="s1"&gt;  &amp;quot;mappings&amp;quot;: {&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;quot;film&amp;quot; : {&lt;/span&gt;
&lt;span class="s1"&gt;      &amp;quot;properties&amp;quot; : {&lt;/span&gt;
&lt;span class="s1"&gt;        &amp;quot;starring&amp;quot;: {&lt;/span&gt;
&lt;span class="s1"&gt;          &amp;quot;type&amp;quot;: &amp;quot;string&amp;quot;,&lt;/span&gt;
&lt;span class="s1"&gt;          &amp;quot;fields&amp;quot;: {&lt;/span&gt;
&lt;span class="s1"&gt;              &amp;quot;raw&amp;quot;: {&lt;/span&gt;
&lt;span class="s1"&gt;                  &amp;quot;type&amp;quot;: &amp;quot;string&amp;quot;,&lt;/span&gt;
&lt;span class="s1"&gt;                  &amp;quot;index&amp;quot;: &amp;quot;not_analyzed&amp;quot;&lt;/span&gt;
&lt;span class="s1"&gt;              }&lt;/span&gt;
&lt;span class="s1"&gt;          }&lt;/span&gt;
&lt;span class="s1"&gt;        }&lt;/span&gt;
&lt;span class="s1"&gt;      }&lt;/span&gt;
&lt;span class="s1"&gt;    }&lt;/span&gt;
&lt;span class="s1"&gt;  }&lt;/span&gt;
&lt;span class="s1"&gt;}&amp;#39;&lt;/span&gt;

~$ xzcat Top.bulk.json.xz &lt;span class="p"&gt;|&lt;/span&gt; curl -XPOST localhost:9200/_bulk --data-binary @-

~$ curl -XGET &lt;span class="s1"&gt;&amp;#39;localhost:9200/kinopoisk/film/_search?pretty&amp;#39;&lt;/span&gt; -d &lt;span class="o"&gt;{&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;
&lt;span class="s1"&gt;  &amp;quot;size&amp;quot;: 0,&lt;/span&gt;
&lt;span class="s1"&gt;  &amp;quot;query&amp;quot; : {&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;quot;query_string&amp;quot; : {&lt;/span&gt;
&lt;span class="s1"&gt;      &amp;quot;query&amp;quot;:    &amp;quot;—à–µ—Ä–ª–æ–∫&amp;quot;, &lt;/span&gt;
&lt;span class="s1"&gt;      &amp;quot;fields&amp;quot;: [ &amp;quot;name&amp;quot;, &amp;quot;description&amp;quot; ],&lt;/span&gt;
&lt;span class="s1"&gt;      &amp;quot;default_operator&amp;quot;: &amp;quot;and&amp;quot;&lt;/span&gt;
&lt;span class="s1"&gt;    }&lt;/span&gt;
&lt;span class="s1"&gt;  },&lt;/span&gt;
&lt;span class="s1"&gt;  &amp;quot;aggs&amp;quot;: {&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;quot;stars&amp;quot; : {&lt;/span&gt;
&lt;span class="s1"&gt;      &amp;quot;terms&amp;quot; : { &amp;quot;field&amp;quot; : &amp;quot;starring.raw&amp;quot;, &amp;quot;size&amp;quot;: 10 }&lt;/span&gt;
&lt;span class="s1"&gt;    }&lt;/span&gt;
&lt;span class="s1"&gt;  }&lt;/span&gt;
&lt;span class="s1"&gt;}&amp;#39;&lt;/span&gt;
&lt;span class="c1"&gt;# response&lt;/span&gt;
&lt;span class="o"&gt;{&lt;/span&gt;
  &lt;span class="s2"&gt;&amp;quot;took&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;1103&lt;/span&gt;,
  &lt;span class="s2"&gt;&amp;quot;timed_out&amp;quot;&lt;/span&gt; : false,
  &lt;span class="s2"&gt;&amp;quot;_shards&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;total&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;5&lt;/span&gt;,
    &lt;span class="s2"&gt;&amp;quot;successful&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;5&lt;/span&gt;,
    &lt;span class="s2"&gt;&amp;quot;failed&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;0&lt;/span&gt;
  &lt;span class="o"&gt;}&lt;/span&gt;,
  &lt;span class="s2"&gt;&amp;quot;hits&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;total&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;16&lt;/span&gt;,
    &lt;span class="s2"&gt;&amp;quot;max_score&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;0&lt;/span&gt;.0,
    &lt;span class="s2"&gt;&amp;quot;hits&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt;
  &lt;span class="o"&gt;}&lt;/span&gt;,
  &lt;span class="s2"&gt;&amp;quot;aggregations&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="s2"&gt;&amp;quot;stars&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;{&lt;/span&gt;
      &lt;span class="s2"&gt;&amp;quot;doc_count_error_upper_bound&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;1&lt;/span&gt;,
      &lt;span class="s2"&gt;&amp;quot;sum_other_doc_count&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;122&lt;/span&gt;,
      &lt;span class="s2"&gt;&amp;quot;buckets&amp;quot;&lt;/span&gt; : &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="s2"&gt;&amp;quot;key&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;–í–∞—Å–∏–ª–∏–π –õ–∏–≤–∞–Ω–æ–≤&amp;quot;&lt;/span&gt;,
        &lt;span class="s2"&gt;&amp;quot;doc_count&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;7&lt;/span&gt;
      &lt;span class="o"&gt;}&lt;/span&gt;, &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="s2"&gt;&amp;quot;key&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;–í–∏—Ç–∞–ª–∏–π –°–æ–ª–æ–º–∏–Ω&amp;quot;&lt;/span&gt;,
        &lt;span class="s2"&gt;&amp;quot;doc_count&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;7&lt;/span&gt;
      &lt;span class="o"&gt;}&lt;/span&gt;, &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="s2"&gt;&amp;quot;key&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;–†–∏–Ω–∞ –ó–µ–ª–µ–Ω–∞—è&amp;quot;&lt;/span&gt;,
        &lt;span class="s2"&gt;&amp;quot;doc_count&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;7&lt;/span&gt;
      &lt;span class="o"&gt;}&lt;/span&gt;, &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="s2"&gt;&amp;quot;key&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;–ë–æ—Ä–∏—Å–ª–∞–≤ –ë—Ä–æ–Ω–¥—É–∫–æ–≤&amp;quot;&lt;/span&gt;,
        &lt;span class="s2"&gt;&amp;quot;doc_count&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;6&lt;/span&gt;
      &lt;span class="o"&gt;}&lt;/span&gt;, &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="s2"&gt;&amp;quot;key&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;–ë–æ—Ä–∏—Å –ö–ª—é–µ–≤&amp;quot;&lt;/span&gt;,
        &lt;span class="s2"&gt;&amp;quot;doc_count&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;4&lt;/span&gt;
      &lt;span class="o"&gt;}&lt;/span&gt;, &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="s2"&gt;&amp;quot;key&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;–ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ó–∞—Ö–∞—Ä–æ–≤&amp;quot;&lt;/span&gt;,
        &lt;span class="s2"&gt;&amp;quot;doc_count&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;2&lt;/span&gt;
      &lt;span class="o"&gt;}&lt;/span&gt;, &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="s2"&gt;&amp;quot;key&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;–ê–ª–µ–∫—Å–µ–π –ö–æ–∂–µ–≤–Ω–∏–∫–æ–≤&amp;quot;&lt;/span&gt;,
        &lt;span class="s2"&gt;&amp;quot;doc_count&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;2&lt;/span&gt;
      &lt;span class="o"&gt;}&lt;/span&gt;, &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="s2"&gt;&amp;quot;key&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;–í–∞–ª–µ–Ω—Ç–∏–Ω–∞ –ü–∞–Ω–∏–Ω–∞&amp;quot;&lt;/span&gt;,
        &lt;span class="s2"&gt;&amp;quot;doc_count&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;2&lt;/span&gt;
      &lt;span class="o"&gt;}&lt;/span&gt;, &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="s2"&gt;&amp;quot;key&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;–í–∏–∫—Ç–æ—Ä –ï–≤–≥—Ä–∞—Ñ–æ–≤&amp;quot;&lt;/span&gt;,
        &lt;span class="s2"&gt;&amp;quot;doc_count&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;2&lt;/span&gt;
      &lt;span class="o"&gt;}&lt;/span&gt;, &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="s2"&gt;&amp;quot;key&amp;quot;&lt;/span&gt; : &lt;span class="s2"&gt;&amp;quot;–î–∂–µ—Ä–∞–ª—å–¥–∏–Ω –î–∂–µ–π–º—Å&amp;quot;&lt;/span&gt;,
        &lt;span class="s2"&gt;&amp;quot;doc_count&amp;quot;&lt;/span&gt; : &lt;span class="m"&gt;2&lt;/span&gt;
      &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
  &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</content><category term="Elastic"></category><category term="REST"></category><category term="Docker"></category></entry><entry><title>Lucene - –∞–≤—Ç–æ–∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –≤–≤–æ–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</title><link href="http://proiot.ru/blog/posts/2016/05/20/lucene-avtozapolnenie-vvoda-polzovatelia/" rel="alternate"></link><published>2016-05-20T00:00:00+03:00</published><updated>2016-05-20T00:00:00+03:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2016-05-20:/blog/posts/2016/05/20/lucene-avtozapolnenie-vvoda-polzovatelia/</id><summary type="html">&lt;p&gt;–ò—Å–ø–æ–ª—å–∑—É—è –ø–æ–¥—Å–∫–∞–∑–∫–∏ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –≤–≤–æ–¥–∞ &lt;a href="http://proiot.ru/blog/posts/2016/05/15/lucene-fasetnyi-poisk/"&gt;–ø–æ–∏—Å–∫–æ–≤–æ–≥–æ&lt;/a&gt; –∑–∞–ø—Ä–æ—Å–∞ –º–æ–∂–Ω–æ –±—ã—Å—Ç—Ä–µ–µ –∏—Å–∫–∞—Ç—å –Ω—É–∂–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é. –ü–æ–∏—Å–∫–æ–≤—ã–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏ - —ç—Ç–æ —Å—Ö–æ–∂–∏–µ —Å –≤–∞—à–∏–º –∑–∞–ø—Ä–æ—Å–æ–º —Ç–µ—Ä–º–∏–Ω—ã. –û–Ω–∏ –ø–æ—è–≤–ª—è—é—Ç—Å—è –Ω–∞ —ç–∫—Ä–∞–Ω–µ –ø–æ –º–µ—Ä–µ —Ç–æ–≥–æ, –∫–∞–∫ –≤—ã –≤–≤–æ–¥–∏—Ç–µ –≤ —Å—Ç—Ä–æ–∫—É –ø–æ–∏—Å–∫–∞ –∑–∞–ø—Ä–æ—Å. –î–ª—è –¥–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç—å —Ä–µ–∞–∫—Ü–∏–∏ –Ω–∞ –≤–≤–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –ø–æ—ç—Ç–æ–º—É –Ω–∞ —Å–µ—Ä–≤–µ—Ä–Ω–æ–π —á–∞—Å—Ç–∏ —É—Å–∫–æ—Ä–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;p&gt;–ò—Å–ø–æ–ª—å–∑—É—è –ø–æ–¥—Å–∫–∞–∑–∫–∏ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –≤–≤–æ–¥–∞ &lt;a href="http://proiot.ru/blog/posts/2016/05/15/lucene-fasetnyi-poisk/"&gt;–ø–æ–∏—Å–∫–æ–≤–æ–≥–æ&lt;/a&gt; –∑–∞–ø—Ä–æ—Å–∞ –º–æ–∂–Ω–æ –±—ã—Å—Ç—Ä–µ–µ –∏—Å–∫–∞—Ç—å –Ω—É–∂–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é. –ü–æ–∏—Å–∫–æ–≤—ã–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏ - —ç—Ç–æ —Å—Ö–æ–∂–∏–µ —Å –≤–∞—à–∏–º –∑–∞–ø—Ä–æ—Å–æ–º —Ç–µ—Ä–º–∏–Ω—ã. –û–Ω–∏ –ø–æ—è–≤–ª—è—é—Ç—Å—è –Ω–∞ —ç–∫—Ä–∞–Ω–µ –ø–æ –º–µ—Ä–µ —Ç–æ–≥–æ, –∫–∞–∫ –≤—ã –≤–≤–æ–¥–∏—Ç–µ –≤ —Å—Ç—Ä–æ–∫—É –ø–æ–∏—Å–∫–∞ –∑–∞–ø—Ä–æ—Å. –î–ª—è –¥–∞–Ω–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç—å —Ä–µ–∞–∫—Ü–∏–∏ –Ω–∞ –≤–≤–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –ø–æ—ç—Ç–æ–º—É –Ω–∞ —Å–µ—Ä–≤–µ—Ä–Ω–æ–π —á–∞—Å—Ç–∏ —É—Å–∫–æ—Ä–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å –ø–æ–º–æ–∂–µ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ –∑–∞—Ç–æ—á–µ–Ω–Ω—ã–π –∏–Ω–¥–µ–∫—Å / –º–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö, –∞ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∫–ª–∏–µ–Ω—Ç–∞ –Ω–µ–ø–ª–æ—Ö–æ –±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å &lt;a href="https://ru.wikipedia.org/wiki/AJAX" rel="nofollow"&gt;AJAX&lt;/a&gt; –¥–∞–±—ã –Ω–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞—Ç—å –∫–∞–∂–¥—ã–π —Ä–∞–∑ HTML-—Å—Ç—Ä–∞–Ω–∏—Ü—É —Ü–µ–ª–∏–∫–æ–º –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ø–æ–∏—Å–∫–æ–≤–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞. –ù–∞ –∫–∞—Ä—Ç–∏–Ω–∫–µ –ø–æ–∫–∞–∑–∞–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞–±–æ—Ç—ã –∞–ª–≥–æ—Ä–∏—Ç–º–∞ &lt;a href="https://lucene.apache.org/core/6_0_0/suggest/org/apache/lucene/search/suggest/analyzing/AnalyzingSuggester.html" rel="nofollow"&gt;AnalyzingSuggester&lt;/a&gt;, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–∫–∞—á–∞–≤ –∏—Å—Ö–æ–¥–Ω–∏–∫–∏ –≤ –∫–æ–Ω—Ü–µ —Ç–µ–∫—É—â–µ–≥–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/05/20/lucene-avtozapolnenie-vvoda-polzovatelia/suggest.gif" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–ü–µ—Ä–≤—ã–º –¥–µ–ª–æ–º –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –≤ –º—É–ª—å—Ç–∏-–º–æ–¥—É–ª—å–Ω—ã–π &lt;strong&gt;maven&lt;/strong&gt; –ø—Ä–æ–µ–∫—Ç –Ω–æ–≤—É—é –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å &lt;code&gt;lucene-suggest&lt;/code&gt;:&lt;/p&gt;
&lt;p&gt;&lt;em&gt;src/pom.xml&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;project&lt;/span&gt; &lt;span class="na"&gt;xmlns=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;http://maven.apache.org/POM/4.0.0&amp;quot;&lt;/span&gt; 
  &lt;span class="na"&gt;xmlns:xsi=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;http://www.w3.org/2001/XMLSchema-instance&amp;quot;&lt;/span&gt;
  &lt;span class="na"&gt;xsi:schemaLocation=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;modelVersion&amp;gt;&lt;/span&gt;4.0.0&lt;span class="nt"&gt;&amp;lt;/modelVersion&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;tutorial.lucene&lt;span class="nt"&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;parent&lt;span class="nt"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;packaging&amp;gt;&lt;/span&gt;pom&lt;span class="nt"&gt;&amp;lt;/packaging&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;version&amp;gt;&lt;/span&gt;1.0&lt;span class="nt"&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;properties&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;lucene.version&amp;gt;&lt;/span&gt;6.0.0&lt;span class="nt"&gt;&amp;lt;/lucene.version&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;/properties&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;dependencies&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.apache.lucene&lt;span class="nt"&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;lucene-core&lt;span class="nt"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;version&amp;gt;&lt;/span&gt;${lucene.version}&lt;span class="nt"&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.apache.lucene&lt;span class="nt"&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;lucene-analyzers-common&lt;span class="nt"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;version&amp;gt;&lt;/span&gt;${lucene.version}&lt;span class="nt"&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.apache.lucene&lt;span class="nt"&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;lucene-facet&lt;span class="nt"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;version&amp;gt;&lt;/span&gt;${lucene.version}&lt;span class="nt"&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.apache.lucene&lt;span class="nt"&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;lucene-suggest&lt;span class="nt"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;version&amp;gt;&lt;/span&gt;${lucene.version}&lt;span class="nt"&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;/dependencies&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;modules&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;module&amp;gt;&lt;/span&gt;server&lt;span class="nt"&gt;&amp;lt;/module&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;module&amp;gt;&lt;/span&gt;crawler&lt;span class="nt"&gt;&amp;lt;/module&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;module&amp;gt;&lt;/span&gt;common&lt;span class="nt"&gt;&amp;lt;/module&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;/modules&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;build&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;plugins&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;plugin&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.apache.maven.plugins&lt;span class="nt"&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;maven-compiler-plugin&lt;span class="nt"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;version&amp;gt;&lt;/span&gt;3.5.1&lt;span class="nt"&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;configuration&amp;gt;&lt;/span&gt;
          &lt;span class="nt"&gt;&amp;lt;source&amp;gt;&lt;/span&gt;1.8&lt;span class="nt"&gt;&amp;lt;/source&amp;gt;&lt;/span&gt;
          &lt;span class="nt"&gt;&amp;lt;target&amp;gt;&lt;/span&gt;1.8&lt;span class="nt"&gt;&amp;lt;/target&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;/configuration&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;/plugin&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;/plugins&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;/build&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/project&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–° –ø–æ–º–æ—â—å—é –º–µ—Ç–æ–¥–æ–≤ &lt;code&gt;store&lt;/code&gt; / &lt;code&gt;load&lt;/code&gt; –≤ –∫–ª–∞—Å—Å–µ &lt;a href="https://lucene.apache.org/core/6_0_0/suggest/org/apache/lucene/search/suggest/analyzing/AnalyzingSuggester.html" rel="nofollow"&gt;AnalyzingSuggester&lt;/a&gt; –º–æ–∂–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å / –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –º–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è –≤ —Ñ–∞–π–ª –¥–ª—è –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ –±—ã—Å—Ç—Ä–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞. –ü–æ—Å–∫–æ–ª—å–∫—É —ç—Ç–∞ –ª–æ–≥–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∫–∞–∫ –ø—Ä–∏ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ —Ç–∞–∫ –∏ –ø—Ä–∏ –ø–æ–∏—Å–∫–µ, –æ–Ω–∞ –≤—ã–Ω–µ—Å–µ–Ω–∞ –≤ –∏—Ö –æ–±—â–∏–π –º–æ–¥—É–ª—å &lt;code&gt;LuceneBinding&lt;/code&gt;. –° –ø–æ–º–æ—â—å—é –º–µ—Ç–æ–¥–∞ &lt;code&gt;weight()&lt;/code&gt; –∑–∞–¥–∞—ë—Ç—Å—è –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –¥–ª—è —Ñ—Ä–∞–∑ –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è - –≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –Ω–∞–∏–±–æ–ª–µ–µ –∫–æ—Ä–æ—Ç–∫–∏–µ —Ñ—Ä–∞–∑—ã –±—É–¥—É—Ç –ø–µ—Ä–≤—ã–º–∏ –≤ —Å–ø–∏—Å–∫–µ:&lt;/p&gt;
&lt;p&gt;&lt;em&gt;src/common/src/main/java/common/LuceneBinding.java&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;package&lt;/span&gt; &lt;span class="nn"&gt;common&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.io.IOException&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.io.InputStream&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.io.OutputStream&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.nio.file.Files&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.nio.file.Path&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.nio.file.Paths&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.Set&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.analysis.Analyzer&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.analysis.standard.StandardAnalyzer&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.facet.FacetsConfig&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.search.spell.Dictionary&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.search.suggest.InputIterator&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.search.suggest.analyzing.AnalyzingSuggester&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.store.FSDirectory&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.util.BytesRef&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="cm"&gt;/* This class is used both by Crawler and SearchServlet */&lt;/span&gt;

&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;LuceneBinding&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
  &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;Path&lt;/span&gt; &lt;span class="n"&gt;ROOT&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Paths&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;get&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getProperty&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;user.home&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;lucene-tutorial-index&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
  &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;Path&lt;/span&gt; &lt;span class="n"&gt;SEARCH_INDEX_PATH&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;ROOT&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;resolve&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;search&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
  &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;Path&lt;/span&gt; &lt;span class="n"&gt;TAXO_INDEX_PATH&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;ROOT&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;resolve&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;taxo&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
  &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;Path&lt;/span&gt; &lt;span class="n"&gt;SUGGEST_INDEX_PATH&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;ROOT&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;resolve&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;suggest&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

  &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;FIELD_ID&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;id&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
  &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;FIELD_TITLE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;title&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
  &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;FIELD_CONTENT&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;content&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
  &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;FIELD_CATEGORY&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;category&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
  &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;FIELD_DIRECTOR&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;director&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
  &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;FIELD_RATE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;rate&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

  &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;FACET_DIRECTOR&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Director&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
  &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;FACET_DATE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Release Date&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
  &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;FACET_CATEGORY&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Category&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

  &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;SUGGEST_MAX_SHINGLES&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

  &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="n"&gt;FacetsConfig&lt;/span&gt; &lt;span class="nf"&gt;getFacetsConfig&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;FacetsConfig&lt;/span&gt; &lt;span class="n"&gt;config&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;FacetsConfig&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
    &lt;span class="n"&gt;config&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setHierarchical&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;FACET_DATE&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;config&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setMultiValued&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;FACET_CATEGORY&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;config&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
  &lt;span class="o"&gt;}&lt;/span&gt;

  &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="n"&gt;Analyzer&lt;/span&gt; &lt;span class="nf"&gt;getAnalyzer&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;StandardAnalyzer&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
  &lt;span class="o"&gt;}&lt;/span&gt;

  &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Suggester&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;AnalyzingSuggester&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;Path&lt;/span&gt; &lt;span class="n"&gt;ser&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;SUGGEST_INDEX_PATH&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;resolve&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;serialized&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="nf"&gt;Suggester&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;IOException&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
      &lt;span class="kd"&gt;super&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;FSDirectory&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;open&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;SUGGEST_INDEX_PATH&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;resolve&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;tmp&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;)),&lt;/span&gt; 
        &lt;span class="s"&gt;&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getAnalyzer&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;store&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;Dictionary&lt;/span&gt; &lt;span class="n"&gt;input&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;IOException&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
      &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;Suggester&lt;/span&gt; &lt;span class="n"&gt;suggester&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Suggester&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
      &lt;span class="n"&gt;suggester&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;build&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;InputIterator&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;InputIterator&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;input&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getEntryIterator&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;BytesRef&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;MAX_TOKEN_LENGTH&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;SUGGEST_MAX_SHINGLES&lt;/span&gt;
            &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;StandardAnalyzer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;DEFAULT_MAX_TOKEN_LENGTH&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

        &lt;span class="nd"&gt;@Override&lt;/span&gt;
        &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;BytesRef&lt;/span&gt; &lt;span class="nf"&gt;next&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;IOException&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
          &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;c&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;i&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;next&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
          &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;c&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;

        &lt;span class="nd"&gt;@Override&lt;/span&gt;
        &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;long&lt;/span&gt; &lt;span class="nf"&gt;weight&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
          &lt;span class="c1"&gt;// short phrases more important&lt;/span&gt;
          &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;MAX_TOKEN_LENGTH&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;c&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;

        &lt;span class="nd"&gt;@Override&lt;/span&gt;
        &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;BytesRef&lt;/span&gt; &lt;span class="nf"&gt;payload&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
          &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;i&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;payload&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;

        &lt;span class="nd"&gt;@Override&lt;/span&gt;
        &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="nf"&gt;hasPayloads&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
          &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;i&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;hasPayloads&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;

        &lt;span class="nd"&gt;@Override&lt;/span&gt;
        &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;Set&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;BytesRef&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nf"&gt;contexts&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
          &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;i&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;contexts&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;

        &lt;span class="nd"&gt;@Override&lt;/span&gt;
        &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="nf"&gt;hasContexts&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
          &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;i&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;hasContexts&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
      &lt;span class="o"&gt;});&lt;/span&gt;

      &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;OutputStream&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Files&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;newOutputStream&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Suggester&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;ser&lt;/span&gt;&lt;span class="o"&gt;))&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;suggester&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;store&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
      &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="n"&gt;Suggester&lt;/span&gt; &lt;span class="nf"&gt;load&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;IOException&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
      &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;Suggester&lt;/span&gt; &lt;span class="n"&gt;suggester&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Suggester&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
      &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;InputStream&lt;/span&gt; &lt;span class="n"&gt;is&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Files&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;newInputStream&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Suggester&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;ser&lt;/span&gt;&lt;span class="o"&gt;))&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;suggester&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;load&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;is&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
      &lt;span class="o"&gt;}&lt;/span&gt;
      &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;suggester&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
  &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ò–Ω–¥–µ–∫—Å –¥–ª—è –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è –±—É–¥–µ—Ç —Å—Ç—Ä–æ–∏—Ç—Å—è –ø–æ –¥–≤—É–º –ø–æ–ª—è–º &lt;code&gt;suggestIndexer.add(title, description)&lt;/code&gt;. –ö–æ–º–±–∏–Ω–∞—Ü–∏–∏ —Å–ª–æ–≤ –¥–æ—Å—Ç–∏–≥–∞—é—Ç—Å—è —Å –ø–æ–º–æ—â—å—é &lt;a href="https://lucene.apache.org/core/6_0_0/analyzers-common/org/apache/lucene/analysis/shingle/ShingleAnalyzerWrapper.html" rel="nofollow"&gt;ShingleAnalyzerWrapper&lt;/a&gt;:  &lt;/p&gt;
&lt;p&gt;&lt;em&gt;src/crawler/src/main/java/crawler/SugestIndexer.java&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;package&lt;/span&gt; &lt;span class="nn"&gt;crawler&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.io.Closeable&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.io.IOException&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.nio.file.Path&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.analysis.shingle.ShingleAnalyzerWrapper&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.document.Document&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.document.Field.Store&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.document.TextField&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.index.DirectoryReader&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.index.IndexReader&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.index.IndexWriter&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.index.IndexWriterConfig&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.index.IndexWriterConfig.OpenMode&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.search.spell.LuceneDictionary&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.store.FSDirectory&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;common.LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;common.LuceneBinding.Suggester&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;SugestIndexer&lt;/span&gt; &lt;span class="kd"&gt;implements&lt;/span&gt; &lt;span class="n"&gt;Closeable&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;

  &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;IndexWriter&lt;/span&gt; &lt;span class="n"&gt;writer&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
  &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;FIELD_SUGGEST&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;SUGGEST&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
  &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;Path&lt;/span&gt; &lt;span class="n"&gt;SHINGLES_INDEX_PATH&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;SUGGEST_INDEX_PATH&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;resolve&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;shingles&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

  &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;SugestIndexer&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;IOException&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;IndexWriterConfig&lt;/span&gt; &lt;span class="n"&gt;iwConfig&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;IndexWriterConfig&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;
        &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;ShingleAnalyzerWrapper&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getAnalyzer&lt;/span&gt;&lt;span class="o"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;SUGGEST_MAX_SHINGLES&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
    &lt;span class="n"&gt;iwConfig&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setOpenMode&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;OpenMode&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;CREATE&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;writer&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;IndexWriter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;FSDirectory&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;open&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;SugestIndexer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;SHINGLES_INDEX_PATH&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt; &lt;span class="n"&gt;iwConfig&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
  &lt;span class="o"&gt;}&lt;/span&gt;

  &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt; &lt;span class="n"&gt;items&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;IOException&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;Document&lt;/span&gt; &lt;span class="n"&gt;doc&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Document&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;item&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;items&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
      &lt;span class="n"&gt;doc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;TextField&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;SugestIndexer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;FIELD_SUGGEST&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;item&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Store&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;NO&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;writer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;addDocument&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;doc&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
  &lt;span class="o"&gt;}&lt;/span&gt;

  &lt;span class="nd"&gt;@Override&lt;/span&gt;
  &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;close&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;IOException&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;writer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;close&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
    &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;IndexReader&lt;/span&gt; &lt;span class="n"&gt;reader&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;DirectoryReader&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;open&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;writer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getDirectory&lt;/span&gt;&lt;span class="o"&gt;()))&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
      &lt;span class="n"&gt;Suggester&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;store&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;LuceneDictionary&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;reader&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;SugestIndexer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;FIELD_SUGGEST&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="c1"&gt;// TODO: we can remove SHINGLES_INDEX_PATH directory now&lt;/span&gt;
  &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–°–µ—Ä–≤–ª–µ—Ç –æ—Ç–¥–∞—ë—Ç –≤—Å–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–π –≤ JSON-—Ñ–æ—Ä–º–∞—Ç–µ &lt;code&gt;http://localhost:8080/api/suggest?q=–∫–æ—Å–º–æ—Å&lt;/code&gt;:&lt;/p&gt;
&lt;p&gt;&lt;em&gt;src/server/src/main/java/server/SuggestServlet.java&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;package&lt;/span&gt; &lt;span class="nn"&gt;server&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.io.IOException&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.AbstractMap.SimpleEntry&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.ArrayList&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.Collection&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.HashMap&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.Map&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.stream.Collectors&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.stream.Stream&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;javax.servlet.ServletException&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;javax.servlet.http.HttpServlet&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;javax.servlet.http.HttpServletRequest&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;javax.servlet.http.HttpServletResponse&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.json.JSONArray&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;common.LuceneBinding.Suggester&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;SuggestServlet&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;HttpServlet&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;

  &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kd"&gt;volatile&lt;/span&gt; &lt;span class="n"&gt;Suggester&lt;/span&gt; &lt;span class="n"&gt;suggester&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
  &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;MAX_SUGGESTS&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;22&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

  &lt;span class="nd"&gt;@Override&lt;/span&gt;
  &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;doGet&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;HttpServletRequest&lt;/span&gt; &lt;span class="n"&gt;req&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;HttpServletResponse&lt;/span&gt; &lt;span class="n"&gt;res&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
      &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;ServletException&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;IOException&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;

    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;SuggestServlet&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;suggester&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
      &lt;span class="kd"&gt;synchronized&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;SuggestServlet&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;SuggestServlet&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;suggester&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
          &lt;span class="n"&gt;SuggestServlet&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;suggester&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Suggester&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;load&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
      &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;query&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;req&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getParameter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;q&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;Collection&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;?&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;lookupResultList&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;SuggestServlet&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;suggester&lt;/span&gt;
        &lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;lookup&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;query&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;SuggestServlet&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;MAX_SUGGESTS&lt;/span&gt;&lt;span class="o"&gt;).&lt;/span&gt;&lt;span class="na"&gt;stream&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt;
        &lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;sorted&lt;/span&gt;&lt;span class="o"&gt;((&lt;/span&gt;&lt;span class="n"&gt;e1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;e2&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;Long&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;compare&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;e2&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;value&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;e1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;value&lt;/span&gt;&lt;span class="o"&gt;))&lt;/span&gt;
        &lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;map&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;Stream&lt;/span&gt;
            &lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;of&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;SimpleEntry&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;key&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;key&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;SimpleEntry&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;hi&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;highlightKey&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt;
                &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;SimpleEntry&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;val&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;value&lt;/span&gt;&lt;span class="o"&gt;))&lt;/span&gt;
            &lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;collect&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;HashMap&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;put&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getKey&lt;/span&gt;&lt;span class="o"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getValue&lt;/span&gt;&lt;span class="o"&gt;()),&lt;/span&gt; &lt;span class="n"&gt;Map&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;putAll&lt;/span&gt;&lt;span class="o"&gt;))&lt;/span&gt;
        &lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;collect&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Collectors&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;toCollection&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ArrayList&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;

    &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;JSONArray&lt;/span&gt; &lt;span class="n"&gt;json&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;JSONArray&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lookupResultList&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;res&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setContentType&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;application/json&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;res&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setCharacterEncoding&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;UTF-8&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;res&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getWriter&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;write&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;json&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
  &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ &lt;span class="nb"&gt;cd&lt;/span&gt; src
~$ mvn clean install
~$ mvn -pl crawler/ exec:java -Dexec.mainClass&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;crawler.App&amp;quot;&lt;/span&gt;
~$ mvn -pl server/ jetty:run
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/05/20/lucene-avtozapolnenie-vvoda-polzovatelia/lucene-tutorial.zip"&gt;–ò—Å—Ö–æ–¥–Ω–∏–∫–∏&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/06/25/elasticsearch-prakticheskoe-vvedenie/"&gt;ElasticSearch&lt;/a&gt;&lt;/p&gt;</content><category term="Lucene"></category><category term="maven"></category><category term="AJAX"></category></entry><entry><title>Lucene - —Ñ–∞—Å–µ—Ç–Ω—ã–π –ø–æ–∏—Å–∫</title><link href="http://proiot.ru/blog/posts/2016/05/15/lucene-fasetnyi-poisk/" rel="alternate"></link><published>2016-05-15T00:00:00+03:00</published><updated>2016-05-15T00:00:00+03:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2016-05-15:/blog/posts/2016/05/15/lucene-fasetnyi-poisk/</id><summary type="html">&lt;p&gt;–ü–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç –ø–µ—Ä–≤—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã &lt;a href="http://proiot.ru/blog/posts/2012/10/29/lucene-sintaksis-zaprosov/"&gt;–ø–æ–∏—Å–∫–∞&lt;/a&gt; –æ–Ω –Ω–∞–≤–µ—Ä–Ω—è–∫–∞ –∑–∞—Ö–æ—á–µ—Ç –µ—â—ë –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤—ã–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤—ã–¥–∞—á–∏. –§–∞—Å–µ—Ç–Ω—ã–π –ø–æ–∏—Å–∫ –Ω–∞ —ç—Ç–∞–ø–µ &lt;a href="http://proiot.ru/blog/posts/2012/10/17/lucene-protsess-indeksatsii/"&gt;–∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏&lt;/a&gt; —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω—ã–π —É—Ç–æ—á–Ω—è—é—â–∏—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –ø–æ—Å–ª–µ–¥—É—é—â–µ–π —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–∏—Å–∫–æ–≤–æ–π –≤—ã–¥–∞—á–∏, –∫–æ—Ç–æ—Ä—ã–µ –∫–∞–∫ –±—ã &lt;em&gt;–ø–æ–¥—Å–∫–∞–∑—ã–≤–∞—é—Ç&lt;/em&gt; –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —á—Ç–æ –º–æ–∂–Ω–æ –µ—â—ë —É—Ç–æ—á–Ω–∏—Ç—å. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º —Å –ø–æ–º–æ—â—å—é —Ñ–∞—Å–µ—Ç–Ω–æ–π —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –∫–∞–∂–¥—ã–π ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;p&gt;–ü–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç –ø–µ—Ä–≤—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã &lt;a href="http://proiot.ru/blog/posts/2012/10/29/lucene-sintaksis-zaprosov/"&gt;–ø–æ–∏—Å–∫–∞&lt;/a&gt; –æ–Ω –Ω–∞–≤–µ—Ä–Ω—è–∫–∞ –∑–∞—Ö–æ—á–µ—Ç –µ—â—ë –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤—ã–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤—ã–¥–∞—á–∏. –§–∞—Å–µ—Ç–Ω—ã–π –ø–æ–∏—Å–∫ –Ω–∞ —ç—Ç–∞–ø–µ &lt;a href="http://proiot.ru/blog/posts/2012/10/17/lucene-protsess-indeksatsii/"&gt;–∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏&lt;/a&gt; —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –¥–ª—è –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω—ã–π —É—Ç–æ—á–Ω—è—é—â–∏—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –ø–æ—Å–ª–µ–¥—É—é—â–µ–π —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ–∏—Å–∫–æ–≤–æ–π –≤—ã–¥–∞—á–∏, –∫–æ—Ç–æ—Ä—ã–µ –∫–∞–∫ –±—ã &lt;em&gt;–ø–æ–¥—Å–∫–∞–∑—ã–≤–∞—é—Ç&lt;/em&gt; –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —á—Ç–æ –º–æ–∂–Ω–æ –µ—â—ë —É—Ç–æ—á–Ω–∏—Ç—å. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º —Å –ø–æ–º–æ—â—å—é —Ñ–∞—Å–µ—Ç–Ω–æ–π —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –∫–∞–∂–¥—ã–π –ø–æ—Å–ª–µ–¥—É—é—â–∏–π –∑–∞–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å—É–∂–∞–µ—Ç –≤—ã–±–æ—Ä–∫—É –¥–æ —Ç–µ—Ö –ø–æ—Ä –ø–æ–∫–∞ —Ü–µ–ª—å –ø–æ–∏—Å–∫–∞ –Ω–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç–∏–≥–Ω—É—Ç–∞.&lt;/p&gt;
&lt;p&gt;–í —Ñ–∞–π–ª–µ &lt;code&gt;Top.json&lt;/code&gt; —Ö—Ä–∞–Ω–∏—Ç—Å—è ~15k –¥–∞–º–ø —Ñ–∏–ª—å–º–æ–≤ —Å –∫–∏–Ω–æ–ø–æ–∏—Å–∫–∞ –Ω–∞ –º–∞–π 2016, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –±—É–¥–µ–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–∞—á–µ—Å—Ç–≤–æ —Ñ–∞—Å–µ—Ç–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞. –í –¥–∞–º–ø–µ —Ö—Ä–∞–Ω–∏—Ç—Å—è –æ—Ü–µ–Ω–∫–∞, –Ω–∞–∑–≤–∞–Ω–∏–µ, id, –∞–∫—Ç—ë—Ä—ã, —Ä–µ–∂–∏—Å—Å—ë—Ä—ã, –∫–æ–º–ø–æ–∑–∏—Ç–æ—Ä—ã, –∂–∞–Ω—Ä, –¥–∞—Ç–∞ –≤—ã—Ö–æ–¥–∞, —Å—Ç—Ä–∞–Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å, —Å–ª–æ–≥–∞–Ω –∏ –∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ñ–∏–ª—å–º–∞.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/05/15/lucene-fasetnyi-poisk/facet.gif" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º—É–ª—å—Ç–∏-–º–æ–¥—É–ª—å–Ω–æ–≥–æ &lt;strong&gt;maven&lt;/strong&gt; –ø—Ä–æ–µ–∫—Ç–∞, –≥–¥–µ –≤ –∫–æ—Ä–Ω–µ–≤–æ–º &lt;code&gt;pom.xml&lt;/code&gt; –æ–±–æ–∑–Ω–∞—á–µ–Ω–∞ –æ–±—â–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç Lucene, –∞ —Ç–∞–∫–∂–µ —É–∫–∞–∑–∞–Ω–∞ –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è Java 1.8 –∏ –≤—ã—à–µ:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ tree
.
‚îú‚îÄ‚îÄ src
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ common
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ pom.xml
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ src
‚îÇ¬†¬† ‚îÇ¬†¬†     ‚îî‚îÄ‚îÄ main
‚îÇ¬†¬† ‚îÇ¬†¬†         ‚îî‚îÄ‚îÄ java
‚îÇ¬†¬† ‚îÇ¬†¬†             ‚îî‚îÄ‚îÄ common
‚îÇ¬†¬† ‚îÇ¬†¬†                 ‚îî‚îÄ‚îÄ LuceneBinding.java
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ crawler
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ pom.xml
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ src
‚îÇ¬†¬† ‚îÇ¬†¬†     ‚îî‚îÄ‚îÄ main
‚îÇ¬†¬† ‚îÇ¬†¬†         ‚îú‚îÄ‚îÄ java
‚îÇ¬†¬† ‚îÇ¬†¬†         ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ crawler
‚îÇ¬†¬† ‚îÇ¬†¬†         ‚îÇ¬†¬†     ‚îú‚îÄ‚îÄ App.java
‚îÇ¬†¬† ‚îÇ¬†¬†         ‚îÇ¬†¬†     ‚îî‚îÄ‚îÄ LuceneIndexer.java
‚îÇ¬†¬† ‚îÇ¬†¬†         ‚îî‚îÄ‚îÄ resources
‚îÇ¬†¬† ‚îÇ¬†¬†             ‚îî‚îÄ‚îÄ log4j.properties
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ pom.xml
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ server
‚îÇ¬†¬†     ‚îú‚îÄ‚îÄ pom.xml
‚îÇ¬†¬†     ‚îî‚îÄ‚îÄ src
‚îÇ¬†¬†         ‚îî‚îÄ‚îÄ main
‚îÇ¬†¬†             ‚îú‚îÄ‚îÄ java
‚îÇ¬†¬†             ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ server
‚îÇ¬†¬†             ‚îÇ¬†¬†     ‚îú‚îÄ‚îÄ DefaultSearchItem.java
‚îÇ¬†¬†             ‚îÇ¬†¬†     ‚îú‚îÄ‚îÄ FacetTakeResult.java
‚îÇ¬†¬†             ‚îÇ¬†¬†     ‚îú‚îÄ‚îÄ HighlightedSearchItem.java
‚îÇ¬†¬†             ‚îÇ¬†¬†     ‚îú‚îÄ‚îÄ LuceneSearcher.java
‚îÇ¬†¬†             ‚îÇ¬†¬†     ‚îú‚îÄ‚îÄ QueryHelper.java
‚îÇ¬†¬†             ‚îÇ¬†¬†     ‚îú‚îÄ‚îÄ SearchServlet.java
‚îÇ¬†¬†             ‚îÇ¬†¬†     ‚îî‚îÄ‚îÄ takeble
‚îÇ¬†¬†             ‚îÇ¬†¬†         ‚îú‚îÄ‚îÄ ITakeble.java
‚îÇ¬†¬†             ‚îÇ¬†¬†         ‚îî‚îÄ‚îÄ TakeResult.java
‚îÇ¬†¬†             ‚îî‚îÄ‚îÄ webapp
‚îÇ¬†¬†                 ‚îú‚îÄ‚îÄ index.jsp
‚îÇ¬†¬†                 ‚îî‚îÄ‚îÄ WEB-INF
‚îÇ¬†¬†                     ‚îú‚îÄ‚îÄ tags
‚îÇ¬†¬†                     ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ hi.tag
‚îÇ¬†¬†                     ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ nav.tag
‚îÇ¬†¬†                     ‚îî‚îÄ‚îÄ web.xml
‚îî‚îÄ‚îÄ Top.json

&lt;span class="m"&gt;21&lt;/span&gt; directories, &lt;span class="m"&gt;21&lt;/span&gt; files
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;em&gt;src/pom.xml&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;project&lt;/span&gt; &lt;span class="na"&gt;xmlns=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;http://maven.apache.org/POM/4.0.0&amp;quot;&lt;/span&gt; 
  &lt;span class="na"&gt;xmlns:xsi=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;http://www.w3.org/2001/XMLSchema-instance&amp;quot;&lt;/span&gt;
  &lt;span class="na"&gt;xsi:schemaLocation=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;modelVersion&amp;gt;&lt;/span&gt;4.0.0&lt;span class="nt"&gt;&amp;lt;/modelVersion&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;tutorial.lucene&lt;span class="nt"&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;parent&lt;span class="nt"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;packaging&amp;gt;&lt;/span&gt;pom&lt;span class="nt"&gt;&amp;lt;/packaging&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;version&amp;gt;&lt;/span&gt;1.0&lt;span class="nt"&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;dependencies&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.apache.lucene&lt;span class="nt"&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;lucene-core&lt;span class="nt"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;version&amp;gt;&lt;/span&gt;6.0.0&lt;span class="nt"&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.apache.lucene&lt;span class="nt"&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;lucene-analyzers-common&lt;span class="nt"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;version&amp;gt;&lt;/span&gt;6.0.0&lt;span class="nt"&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.apache.lucene&lt;span class="nt"&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;lucene-queryparser&lt;span class="nt"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;version&amp;gt;&lt;/span&gt;6.0.0&lt;span class="nt"&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.apache.lucene&lt;span class="nt"&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;lucene-highlighter&lt;span class="nt"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;version&amp;gt;&lt;/span&gt;6.0.0&lt;span class="nt"&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.apache.lucene&lt;span class="nt"&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;lucene-facet&lt;span class="nt"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;version&amp;gt;&lt;/span&gt;6.0.0&lt;span class="nt"&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;/dependencies&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;modules&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;module&amp;gt;&lt;/span&gt;server&lt;span class="nt"&gt;&amp;lt;/module&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;module&amp;gt;&lt;/span&gt;crawler&lt;span class="nt"&gt;&amp;lt;/module&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;module&amp;gt;&lt;/span&gt;common&lt;span class="nt"&gt;&amp;lt;/module&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;/modules&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;build&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;plugins&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;plugin&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.apache.maven.plugins&lt;span class="nt"&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;maven-compiler-plugin&lt;span class="nt"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;version&amp;gt;&lt;/span&gt;3.5.1&lt;span class="nt"&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;configuration&amp;gt;&lt;/span&gt;
          &lt;span class="nt"&gt;&amp;lt;source&amp;gt;&lt;/span&gt;1.8&lt;span class="nt"&gt;&amp;lt;/source&amp;gt;&lt;/span&gt;
          &lt;span class="nt"&gt;&amp;lt;target&amp;gt;&lt;/span&gt;1.8&lt;span class="nt"&gt;&amp;lt;/target&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;/configuration&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;/plugin&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;/plugins&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;/build&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/project&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–í –ø–æ–¥–ø—Ä–æ–µ–∫—Ç–µ common –æ–±—ä—è–≤–ª–µ–Ω—ã –æ–±—â–∏–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø—Ä–∏ –ø–æ–∏—Å–∫–µ –∏ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏. –§–∞—Å–µ—Ç–Ω—ã–π –∏–Ω–¥–µ–∫—Å —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —Ç—Ä—ë—Ö –ø–æ–ª–µ–π &lt;code&gt;FACET_DIRECTOR&lt;/code&gt;, &lt;code&gt;FACET_DATE&lt;/code&gt; –∏ &lt;code&gt;FACET_CATEGORY&lt;/code&gt;. –ù–∞–∏–±–æ–ª–µ–µ –ø—Ä–æ—Å—Ç–æ–π —Å–ª—É—á–∞–π - —Ä–µ–∂–∏—Å—Å—ë—Ä (director), –ø–æ—Å–∫–æ–ª—å–∫—É –¥–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è —á—Ç–æ —É –æ–¥–Ω–æ–≥–æ —Ñ–∏–ª—å–º–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –æ–Ω —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω. –í–º–µ—Å—Ç–µ —Å —Ç–µ–º —É –æ–¥–Ω–æ–≥–æ —Ñ–∏–ª—å–º–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å —É–∂–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∂–∞–Ω—Ä–æ–≤, –≤ —ç—Ç–æ–º —Å–ª—É—á–∞–µ &lt;code&gt;setMultiValued&lt;/code&gt;. –ù—É –∏ —Å–∞–º—ã–π –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–π —Å–ª—É—á–∞–π - –¥—Ä–µ–≤–æ–≤–∏–¥–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –¥–∞—Ç–µ - &lt;code&gt;setHierarchical&lt;/code&gt;:&lt;/p&gt;
&lt;p&gt;&lt;em&gt;src/common/src/main/java/common/LuceneBinding.java&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;package&lt;/span&gt; &lt;span class="nn"&gt;common&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.nio.file.Path&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.nio.file.Paths&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.analysis.Analyzer&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.analysis.standard.StandardAnalyzer&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.facet.FacetsConfig&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="cm"&gt;/* This class is used both by Crawler and SearchServlet */&lt;/span&gt;

&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;LuceneBinding&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;Path&lt;/span&gt; &lt;span class="n"&gt;SEARCH_INDEX_PATH&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Paths&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;get&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getProperty&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;user.home&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;lucene-tutorial-index&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;search&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;Path&lt;/span&gt; &lt;span class="n"&gt;TAXO_INDEX_PATH&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Paths&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;get&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getProperty&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;user.home&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;lucene-tutorial-index&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;taxo&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;FIELD_ID&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;id&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;FIELD_TITLE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;title&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;FIELD_CONTENT&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;content&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;FIELD_CATEGORY&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;category&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;FIELD_DIRECTOR&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;director&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;FIELD_RATE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;rate&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;FACET_DIRECTOR&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Director&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;FACET_DATE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Release Date&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;FACET_CATEGORY&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Category&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="n"&gt;FacetsConfig&lt;/span&gt; &lt;span class="nf"&gt;getFacetsConfig&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;FacetsConfig&lt;/span&gt; &lt;span class="n"&gt;config&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;FacetsConfig&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="n"&gt;config&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setHierarchical&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;FACET_DATE&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;config&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setMultiValued&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;FACET_CATEGORY&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;config&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="n"&gt;Analyzer&lt;/span&gt; &lt;span class="nf"&gt;getAnalyzer&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;StandardAnalyzer&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ü—Ä–∏ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ –¥–ª—è —Ñ–∞—Å–µ—Ç–æ–≤ —Å–æ–∑–¥–∞—ë—Ç—Å—è –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–π –∏–Ω–¥–µ–∫—Å &lt;code&gt;DirectoryTaxonomyWriter&lt;/code&gt;. –ï—â—ë –≤ –ø–æ–ª–µ —Ä–µ–π—Ç–∏–Ω–≥–∞ —Ñ–∏–ª—å–º–∞ &lt;code&gt;FIELD_RATE&lt;/code&gt; –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞:&lt;/p&gt;
&lt;p&gt;&lt;em&gt;src/crawler/src/main/java/crawler/LuceneIndexer.java&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;package&lt;/span&gt; &lt;span class="nn"&gt;crawler&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.io.Closeable&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.io.IOException&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.text.SimpleDateFormat&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.Date&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.log4j.Logger&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.document.Document&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.document.Field.Store&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.document.FloatDocValuesField&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.document.StringField&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.document.TextField&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.facet.FacetField&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.facet.taxonomy.directory.DirectoryTaxonomyWriter&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.index.IndexWriter&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.index.IndexWriterConfig&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.index.IndexWriterConfig.OpenMode&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.store.Directory&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.store.FSDirectory&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;common.LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;LuceneIndexer&lt;/span&gt; &lt;span class="kd"&gt;implements&lt;/span&gt; &lt;span class="n"&gt;Closeable&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;Logger&lt;/span&gt; &lt;span class="n"&gt;logger&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Logger&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getLogger&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LuceneIndexer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getName&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;

    &lt;span class="cm"&gt;/* IndexWriter is completely thread safe */&lt;/span&gt;

    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;IndexWriter&lt;/span&gt; &lt;span class="n"&gt;indexWriter&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;DirectoryTaxonomyWriter&lt;/span&gt; &lt;span class="n"&gt;taxoWriter&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

    &lt;span class="nd"&gt;@Override&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;close&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;IOException&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;LuceneIndexer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;logger&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;info&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;
                &lt;span class="s"&gt;&amp;quot;Closing Index &amp;lt; &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;SEARCH_INDEX_PATH&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; &amp;gt; NumDocs: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; 
                &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;indexWriter&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;numDocs&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;indexWriter&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;close&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;taxoWriter&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;close&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="n"&gt;LuceneIndexer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;logger&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;info&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Index closed OK!&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;new_index&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;IOException&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;Directory&lt;/span&gt; &lt;span class="n"&gt;directory&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;FSDirectory&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;open&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;SEARCH_INDEX_PATH&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;IndexWriterConfig&lt;/span&gt; &lt;span class="n"&gt;iwConfig&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;IndexWriterConfig&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getAnalyzer&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
        &lt;span class="n"&gt;iwConfig&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setOpenMode&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;OpenMode&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;CREATE&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;indexWriter&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;IndexWriter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;directory&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;iwConfig&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;taxoWriter&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;DirectoryTaxonomyWriter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;
            &lt;span class="n"&gt;FSDirectory&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;open&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;TAXO_INDEX_PATH&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;title&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;content&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; 
            &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;director&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;cats&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
            &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;Date&lt;/span&gt; &lt;span class="n"&gt;date&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="kt"&gt;float&lt;/span&gt; &lt;span class="n"&gt;rate&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;IOException&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;

        &lt;span class="n"&gt;LuceneIndexer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;logger&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;info&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;***** &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;title&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; *****&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;LuceneIndexer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;logger&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;info&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;content&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;Document&lt;/span&gt; &lt;span class="n"&gt;doc&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Document&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;

        &lt;span class="c1"&gt;// A field that is indexed but not tokenized: the entire String value is&lt;/span&gt;
        &lt;span class="c1"&gt;// indexed as a single token&lt;/span&gt;
        &lt;span class="n"&gt;doc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;StringField&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;FIELD_ID&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="o"&gt;).&lt;/span&gt;&lt;span class="na"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;Store&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;YES&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;

        &lt;span class="c1"&gt;// A field that is indexed and tokenized, without term vectors.&lt;/span&gt;
        &lt;span class="n"&gt;doc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;TextField&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;FIELD_TITLE&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;title&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Store&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;YES&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="n"&gt;doc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;TextField&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;FIELD_CONTENT&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;content&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Store&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;YES&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;

        &lt;span class="c1"&gt;// A field that is indexed but not tokenized&lt;/span&gt;
        &lt;span class="n"&gt;doc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;StringField&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;FIELD_DIRECTOR&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;director&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Store&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;YES&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;

        &lt;span class="c1"&gt;// Field that stores a per-document long value for scoring, sorting or&lt;/span&gt;
        &lt;span class="c1"&gt;// value retrieval&lt;/span&gt;
        &lt;span class="n"&gt;doc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;FloatDocValuesField&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;FIELD_RATE&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;rate&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="n"&gt;doc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;StringField&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;FIELD_RATE&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Float&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rate&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt; &lt;span class="n"&gt;Store&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;YES&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;

        &lt;span class="c1"&gt;// Facet&lt;/span&gt;
        &lt;span class="n"&gt;doc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;FacetField&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;FACET_DIRECTOR&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;director&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;cat&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;cats&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;doc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;FacetField&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;FACET_CATEGORY&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;cat&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
            &lt;span class="n"&gt;doc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;StringField&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;FIELD_CATEGORY&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;cat&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Store&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;YES&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="n"&gt;doc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;FacetField&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;FACET_DATE&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;SimpleDateFormat&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;yyyy&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;).&lt;/span&gt;&lt;span class="na"&gt;format&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;date&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt;
                &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;SimpleDateFormat&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;MM&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;).&lt;/span&gt;&lt;span class="na"&gt;format&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;date&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;SimpleDateFormat&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;dd&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;).&lt;/span&gt;&lt;span class="na"&gt;format&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;date&lt;/span&gt;&lt;span class="o"&gt;)));&lt;/span&gt;

        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;indexWriter&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;addDocument&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getFacetsConfig&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;build&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;taxoWriter&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;doc&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ü—Ä–∏ –ø–æ–∏—Å–∫–µ –æ–±—ã—á–Ω—ã–π &lt;code&gt;Query&lt;/code&gt; –∑–∞–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è –≤ —Ñ–∞—Å–µ—Ç–Ω—ã–π &lt;code&gt;DrillDownQuery&lt;/code&gt; –∞ –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –ø–æ–∏—Å–∫ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ &lt;code&gt;DrillSideways&lt;/code&gt;. –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ —Ä–µ–π—Ç–∏–Ω–≥—É —Ñ–∏–ª—å–º–∞:&lt;/p&gt;
&lt;p&gt;&lt;em&gt;src/server/src/main/java/server/LuceneSearcher.java&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;package&lt;/span&gt; &lt;span class="nn"&gt;server&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.io.IOException&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.AbstractMap.SimpleEntry&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.ArrayList&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.List&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.facet.DrillDownQuery&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.facet.DrillSideways&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.facet.DrillSideways.DrillSidewaysResult&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.facet.taxonomy.TaxonomyReader&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.facet.taxonomy.directory.DirectoryTaxonomyReader&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.index.CorruptIndexException&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.index.DirectoryReader&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.index.IndexReader&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.queryparser.classic.ParseException&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.search.IndexSearcher&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.search.Query&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.search.ScoreDoc&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.search.Sort&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.search.SortField&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.search.TopDocs&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.search.TopFieldCollector&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.search.highlight.InvalidTokenOffsetsException&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.store.Directory&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.store.FSDirectory&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;common.LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;server.takeble.ITakeble&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kd"&gt;abstract&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;SearchAggregator&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;T&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;protected&lt;/span&gt; &lt;span class="n"&gt;Query&lt;/span&gt; &lt;span class="n"&gt;query&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;protected&lt;/span&gt; &lt;span class="n"&gt;IndexSearcher&lt;/span&gt; &lt;span class="n"&gt;indexSearcher&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

    &lt;span class="kd"&gt;abstract&lt;/span&gt; &lt;span class="n"&gt;T&lt;/span&gt; &lt;span class="nf"&gt;aggregate&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ScoreDoc&lt;/span&gt; &lt;span class="n"&gt;sd&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;IOException&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; 
        &lt;span class="n"&gt;CorruptIndexException&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;InvalidTokenOffsetsException&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;

&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;LuceneSearcher&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;T&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;SearchAggregator&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;T&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="kd"&gt;implements&lt;/span&gt; &lt;span class="n"&gt;ITakeble&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;T&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;

    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;story&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;List&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;SimpleEntry&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;facets&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;Class&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;classA&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

    &lt;span class="cm"&gt;/* IndexReader is thread safe - one instance for all requests */&lt;/span&gt;

    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kd"&gt;volatile&lt;/span&gt; &lt;span class="n"&gt;IndexReader&lt;/span&gt; &lt;span class="n"&gt;indexReader&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kd"&gt;volatile&lt;/span&gt; &lt;span class="n"&gt;TaxonomyReader&lt;/span&gt; &lt;span class="n"&gt;taxoReader&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

    &lt;span class="n"&gt;LuceneSearcher&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;Class&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;classA&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;story&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; 
        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;List&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;SimpleEntry&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;facets&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
            &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;IOException&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;

        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;story&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;story&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;facets&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;facets&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;classA&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;classA&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LuceneSearcher&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;indexReader&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="kd"&gt;synchronized&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LuceneSearcher&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LuceneSearcher&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;indexReader&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                    &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;Directory&lt;/span&gt; &lt;span class="n"&gt;dir&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;FSDirectory&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;open&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;SEARCH_INDEX_PATH&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
                    &lt;span class="n"&gt;LuceneSearcher&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;indexReader&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;DirectoryReader&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;open&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;dir&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
                &lt;span class="o"&gt;}&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;

        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LuceneSearcher&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;taxoReader&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="kd"&gt;synchronized&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LuceneSearcher&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LuceneSearcher&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;taxoReader&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                    &lt;span class="n"&gt;LuceneSearcher&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;taxoReader&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;DirectoryTaxonomyReader&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;
                            &lt;span class="n"&gt;FSDirectory&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;open&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;TAXO_INDEX_PATH&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
                &lt;span class="o"&gt;}&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="nd"&gt;@Override&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;FacetTakeResult&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;T&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nf"&gt;Take&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;count&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;start&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; 
            &lt;span class="n"&gt;ParseException&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;IOException&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;InstantiationException&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; 
            &lt;span class="n"&gt;IllegalAccessException&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;InvalidTokenOffsetsException&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;

        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;nDocs&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;start&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;count&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;DrillDownQuery&lt;/span&gt; &lt;span class="n"&gt;query&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;DrillDownQuery&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getFacetsConfig&lt;/span&gt;&lt;span class="o"&gt;(),&lt;/span&gt;
                &lt;span class="n"&gt;QueryHelper&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;generate&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;story&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;

        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;facets&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;forEach&lt;/span&gt;&lt;span class="o"&gt;((&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;query&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getKey&lt;/span&gt;&lt;span class="o"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getValue&lt;/span&gt;&lt;span class="o"&gt;()));&lt;/span&gt;

        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;IndexSearcher&lt;/span&gt; &lt;span class="n"&gt;indexSearcher&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;IndexSearcher&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LuceneSearcher&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;indexReader&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;SortField&lt;/span&gt; &lt;span class="n"&gt;sortField&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;SortField&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;
            &lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;FIELD_RATE&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;SortField&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;Type&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;FLOAT&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;TopFieldCollector&lt;/span&gt; &lt;span class="n"&gt;topCollector&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;TopFieldCollector&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;create&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;
            &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Sort&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sortField&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt; &lt;span class="n"&gt;Math&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;max&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;nDocs&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt; &lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;DrillSideways&lt;/span&gt; &lt;span class="n"&gt;facetDrill&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;DrillSideways&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;indexSearcher&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; 
                &lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getFacetsConfig&lt;/span&gt;&lt;span class="o"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;LuceneSearcher&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;taxoReader&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;DrillSidewaysResult&lt;/span&gt; &lt;span class="n"&gt;drillResult&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;facetDrill&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;search&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;query&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;topCollector&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;TopDocs&lt;/span&gt; &lt;span class="n"&gt;topDocs&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;topCollector&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;topDocs&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;

        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;nDocs&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;FacetTakeResult&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;T&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;(&lt;/span&gt;&lt;span class="n"&gt;topDocs&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;totalHits&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;drillResult&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;

        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;ScoreDoc&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;scoreDocs&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;topDocs&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;scoreDocs&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;length&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;scoreDocs&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;start&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;length&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;FacetTakeResult&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;T&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;(&lt;/span&gt;&lt;span class="n"&gt;topDocs&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;totalHits&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;drillResult&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;

        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;List&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;T&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;items&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;ArrayList&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;T&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;(&lt;/span&gt;&lt;span class="n"&gt;length&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="n"&gt;aggregator&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;classA&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;newInstance&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="n"&gt;aggregator&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;query&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;query&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;aggregator&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;indexSearcher&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;indexSearcher&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;start&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;scoreDocs&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;items&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;start&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;aggregator&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;aggregate&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;scoreDocs&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;]));&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;

        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;FacetTakeResult&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;T&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;(&lt;/span&gt;&lt;span class="n"&gt;topDocs&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;totalHits&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;items&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;drillResult&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;em&gt;src/server/src/main/java/server/FacetTakeResult.java&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;package&lt;/span&gt; &lt;span class="nn"&gt;server&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.io.IOException&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.AbstractMap.SimpleEntry&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.Arrays&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.Collection&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.Collections&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.LinkedHashMap&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.Map&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.facet.DrillSideways.DrillSidewaysResult&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.facet.FacetResult&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.facet.Facets&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;common.LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;server.takeble.TakeResult&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;FacetTakeResult&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;T&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;TakeResult&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;T&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;

    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;TOP&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;333&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;Map&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Number&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;directors&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;Map&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Number&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;categories&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;Map&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;SimpleEntry&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Number&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Map&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Number&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;dates&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;Map&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Number&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nf"&gt;getDirectors&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;directors&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;Map&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Number&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nf"&gt;getCategories&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;categories&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;Map&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;SimpleEntry&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;Number&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Map&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Number&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="nf"&gt;getDates&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;dates&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="n"&gt;FacetResult&lt;/span&gt; &lt;span class="nf"&gt;bugHelper&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;Facets&lt;/span&gt; &lt;span class="n"&gt;facets&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;...&lt;/span&gt; &lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;facets&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getTopChildren&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;FacetTakeResult&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;TOP&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;FACET_DATE&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;catch&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;IOException&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;throw&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;RuntimeException&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;FacetTakeResult&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;totalHits&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;Collection&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;T&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;items&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; 
        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;DrillSidewaysResult&lt;/span&gt; &lt;span class="n"&gt;facetDrill&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;IOException&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;

        &lt;span class="kd"&gt;super&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;totalHits&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;items&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;totalHits&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;

            &lt;span class="c1"&gt;// Facets extraction: categories + date&lt;/span&gt;

            &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;Facets&lt;/span&gt; &lt;span class="n"&gt;facets&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;facetDrill&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;facets&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

            &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;directors&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Collections&lt;/span&gt;
                    &lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;unmodifiableMap&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Arrays&lt;/span&gt;
                            &lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;stream&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;facets&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getTopChildren&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;FacetTakeResult&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;TOP&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                                    &lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;FACET_DIRECTOR&lt;/span&gt;&lt;span class="o"&gt;).&lt;/span&gt;&lt;span class="na"&gt;labelValues&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
                            &lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;sorted&lt;/span&gt;&lt;span class="o"&gt;((&lt;/span&gt;&lt;span class="n"&gt;e1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;e2&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; 
                                &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;compare&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;e2&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;value&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;intValue&lt;/span&gt;&lt;span class="o"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;e1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;value&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;intValue&lt;/span&gt;&lt;span class="o"&gt;()))&lt;/span&gt;
                            &lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;collect&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LinkedHashMap&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; 
                                &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;put&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;label&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;value&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt; 
                                &lt;span class="n"&gt;Map&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;putAll&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;

            &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;categories&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Collections&lt;/span&gt;
                    &lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;unmodifiableMap&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Arrays&lt;/span&gt;
                            &lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;stream&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;facets&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getTopChildren&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;FacetTakeResult&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;TOP&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                                    &lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;FACET_CATEGORY&lt;/span&gt;&lt;span class="o"&gt;).&lt;/span&gt;&lt;span class="na"&gt;labelValues&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
                            &lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;sorted&lt;/span&gt;&lt;span class="o"&gt;((&lt;/span&gt;&lt;span class="n"&gt;e1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;e2&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; 
                                &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;compare&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;e2&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;value&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;intValue&lt;/span&gt;&lt;span class="o"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;e1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;value&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;intValue&lt;/span&gt;&lt;span class="o"&gt;()))&lt;/span&gt;
                            &lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;collect&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LinkedHashMap&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; 
                                &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;put&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;label&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;value&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt; 
                                &lt;span class="n"&gt;Map&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;putAll&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;

            &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;dates&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Collections&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;unmodifiableMap&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;
                &lt;span class="n"&gt;Arrays&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;stream&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;FacetTakeResult&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;bugHelper&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;facets&lt;/span&gt;&lt;span class="o"&gt;).&lt;/span&gt;&lt;span class="na"&gt;labelValues&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
                    &lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;sorted&lt;/span&gt;&lt;span class="o"&gt;((&lt;/span&gt;&lt;span class="n"&gt;y1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;y2&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;compare&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;y2&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;value&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;intValue&lt;/span&gt;&lt;span class="o"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;y1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;value&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;intValue&lt;/span&gt;&lt;span class="o"&gt;()))&lt;/span&gt;
                    &lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;collect&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LinkedHashMap&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ymap&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;ymap&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;put&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;label&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; 
                        &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;SimpleEntry&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&amp;gt;(&lt;/span&gt;&lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;value&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Collections&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;unmodifiableMap&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Arrays&lt;/span&gt;
                            &lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;stream&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;FacetTakeResult&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;bugHelper&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;facets&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;label&lt;/span&gt;&lt;span class="o"&gt;).&lt;/span&gt;&lt;span class="na"&gt;labelValues&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
                            &lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;sorted&lt;/span&gt;&lt;span class="o"&gt;((&lt;/span&gt;&lt;span class="n"&gt;m1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;m2&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; 
                                &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;compare&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;m2&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;value&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;intValue&lt;/span&gt;&lt;span class="o"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;m1&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;value&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;intValue&lt;/span&gt;&lt;span class="o"&gt;()))&lt;/span&gt;
                            &lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;collect&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LinkedHashMap&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mmap&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;-&amp;gt;&lt;/span&gt; 
                                &lt;span class="n"&gt;mmap&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;put&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;label&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;m&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;value&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt; &lt;span class="n"&gt;Map&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;putAll&lt;/span&gt;&lt;span class="o"&gt;)))),&lt;/span&gt;
                        &lt;span class="n"&gt;Map&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;putAll&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;dates&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
            &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;directors&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;categories&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;FacetTakeResult&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;totalHits&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; 
        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;DrillSidewaysResult&lt;/span&gt; &lt;span class="n"&gt;facetDrill&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;IOException&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;totalHits&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Collection&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;T&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;)&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;facetDrill&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;em&gt;src/server/src/main/webapp/index.jsp&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&amp;lt;%@ page language=&amp;quot;java&amp;quot; contentType=&amp;quot;text/html; charset=UTF-8&amp;quot;
    pageEncoding=&amp;quot;UTF-8&amp;quot;%&amp;gt;

&amp;lt;%@ page import=&amp;quot;server.SearchServlet&amp;quot;%&amp;gt;

&amp;lt;%@ taglib tagdir=&amp;quot;/WEB-INF/tags&amp;quot; prefix=&amp;quot;tag&amp;quot;%&amp;gt;
&amp;lt;%@ taglib uri=&amp;quot;http://java.sun.com/jsp/jstl/core&amp;quot; prefix=&amp;quot;c&amp;quot;%&amp;gt;
&amp;lt;%@ taglib uri=&amp;quot;http://java.sun.com/jsp/jstl/functions&amp;quot; prefix=&amp;quot;fn&amp;quot;%&amp;gt;

&amp;lt;c:set var=&amp;quot;queryStr&amp;quot;
    value=&amp;quot;${searchcontext[SearchServlet.QUERY_INPUT]}&amp;quot; /&amp;gt;
&amp;lt;c:set var=&amp;quot;currentPageInt&amp;quot;
    value=&amp;quot;${searchcontext[SearchServlet.CURRENT_PAGE]}&amp;quot; /&amp;gt;
&amp;lt;c:set var=&amp;quot;perPageInt&amp;quot;
    value=&amp;quot;${searchcontext[SearchServlet.RESULTS_PER_PAGE]}&amp;quot; /&amp;gt;
&amp;lt;c:set var=&amp;quot;directedStr&amp;quot;
    value=&amp;quot;${searchcontext[SearchServlet.DIRECTED]}&amp;quot; /&amp;gt;
&amp;lt;c:set var=&amp;quot;categoryArr&amp;quot;
    value=&amp;quot;${searchcontext[SearchServlet.CATEGORY]}&amp;quot; /&amp;gt;
&amp;lt;c:set var=&amp;quot;dateStr&amp;quot; value=&amp;quot;${searchcontext[SearchServlet.DATE]}&amp;quot; /&amp;gt;

&amp;lt;html&amp;gt;
&amp;lt;head&amp;gt;
&amp;lt;title&amp;gt;Lucene Facet Example&amp;lt;/title&amp;gt;
&amp;lt;meta http-equiv=&amp;quot;Content-Type&amp;quot; content=&amp;quot;text/html; charset=UTF-8&amp;quot;&amp;gt;
&amp;lt;/head&amp;gt;
&amp;lt;body&amp;gt;
    &amp;lt;form name=&amp;quot;search&amp;quot; action=&amp;quot;/&amp;quot; accept-charset=&amp;quot;UTF-8&amp;quot;&amp;gt;
        &amp;lt;p align=&amp;quot;center&amp;quot;&amp;gt;
            &amp;lt;input name=&amp;quot;${SearchServlet.QUERY_INPUT}&amp;quot;
                value=&amp;quot;&amp;lt;c:out value=&amp;quot;${queryStr}&amp;quot;/&amp;gt;&amp;quot;
                style=&amp;quot;text-align: center; width: 100%; font-size: 1.5em&amp;quot; /&amp;gt;
        &amp;lt;/p&amp;gt;
        &amp;lt;p style=&amp;quot;display: flex; justify-content: center&amp;quot;&amp;gt;
            &amp;lt;select title=&amp;quot;–î–µ—Ä–µ–≤–æ: –ì–æ–¥ -&amp;gt; –ú–µ—Å—è—Ü&amp;quot; name=&amp;quot;${SearchServlet.DATE}&amp;quot;&amp;gt;
                &amp;lt;option value=&amp;quot;&amp;quot;&amp;gt;-&amp;lt;/option&amp;gt;
                &amp;lt;c:forEach items=&amp;quot;${searchmodel.dates}&amp;quot; var=&amp;quot;y&amp;quot;&amp;gt;
                    &amp;lt;option value=&amp;quot;&amp;lt;c:out value=&amp;quot;${y.key}&amp;quot;/&amp;gt;&amp;quot;
                        ${y.key == dateStr ? &amp;#39;selected&amp;#39; : null}&amp;gt;
                        &amp;lt;c:out value=&amp;quot;${y.key} | ${y.value.key}&amp;quot; /&amp;gt;
                    &amp;lt;/option&amp;gt;
                    &amp;lt;c:forEach items=&amp;quot;${y.value.value}&amp;quot; var=&amp;quot;m&amp;quot;&amp;gt;
                        &amp;lt;c:set var=&amp;quot;yyyymm&amp;quot;&amp;gt;&amp;lt;c:out value=&amp;quot;${y.key}-${m.key}&amp;quot; /&amp;gt;&amp;lt;/c:set&amp;gt;
                        &amp;lt;option value=&amp;quot;&amp;lt;c:out value=&amp;quot;${yyyymm}&amp;quot;/&amp;gt;&amp;quot;
                            ${yyyymm == dateStr ? &amp;#39;selected&amp;#39; : null}&amp;gt;
                            &amp;lt;c:out value=&amp;quot;-&amp;gt; ${m.key} | ${m.value}&amp;quot; /&amp;gt;
                        &amp;lt;/option&amp;gt;
                    &amp;lt;/c:forEach&amp;gt;
                &amp;lt;/c:forEach&amp;gt;
            &amp;lt;/select&amp;gt; &amp;amp;nbsp; &amp;lt;select title=&amp;quot;–†–µ–∂–∏—Å—Å—ë—Ä&amp;quot; name=&amp;quot;${SearchServlet.DIRECTED}&amp;quot;&amp;gt;
                &amp;lt;option value=&amp;quot;&amp;quot;&amp;gt;-&amp;lt;/option&amp;gt;
                &amp;lt;c:forEach items=&amp;quot;${searchmodel.directors}&amp;quot; var=&amp;quot;entry&amp;quot;&amp;gt;
                    &amp;lt;option value=&amp;quot;&amp;lt;c:out value=&amp;quot;${entry.key}&amp;quot;/&amp;gt;&amp;quot;
                        ${entry.key == directedStr ? &amp;#39;selected&amp;#39; : null}&amp;gt;
                        &amp;lt;c:out value=&amp;quot;${entry.value} | ${entry.key}&amp;quot; /&amp;gt;
                    &amp;lt;/option&amp;gt;
                &amp;lt;/c:forEach&amp;gt;
            &amp;lt;/select&amp;gt; &amp;amp;nbsp; 
            &amp;lt;select title=&amp;quot;–ú—É–ª—å—Ç–∏: –ñ–∞–Ω—Ä&amp;quot; multiple size=&amp;quot;1&amp;quot;
                name=&amp;quot;${SearchServlet.CATEGORY}&amp;quot;&amp;gt;
                &amp;lt;option value=&amp;quot;&amp;quot;&amp;gt;-&amp;lt;/option&amp;gt;
                &amp;lt;c:forEach items=&amp;quot;${searchmodel.categories}&amp;quot; var=&amp;quot;entry&amp;quot;&amp;gt;
                    &amp;lt;c:set var=&amp;quot;isSelected&amp;quot; value=&amp;quot;false&amp;quot; /&amp;gt;
                    &amp;lt;c:forEach var=&amp;quot;cat&amp;quot; items=&amp;quot;${categoryArr}&amp;quot;&amp;gt;
                        &amp;lt;c:if test=&amp;quot;${cat == entry.key}&amp;quot;&amp;gt;
                            &amp;lt;c:set var=&amp;quot;isSelected&amp;quot; value=&amp;quot;true&amp;quot; /&amp;gt;
                        &amp;lt;/c:if&amp;gt;
                    &amp;lt;/c:forEach&amp;gt;
                    &amp;lt;option value=&amp;quot;&amp;lt;c:out value=&amp;quot;${entry.key}&amp;quot;/&amp;gt;&amp;quot;
                        ${isSelected ? &amp;#39;selected&amp;#39; : null}&amp;gt;
                        &amp;lt;c:out value=&amp;quot;${entry.value} | ${entry.key}&amp;quot; /&amp;gt;
                    &amp;lt;/option&amp;gt;
                &amp;lt;/c:forEach&amp;gt;
            &amp;lt;/select&amp;gt; &amp;amp;nbsp; &amp;lt;select title=&amp;quot;–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å&amp;quot;
                name=&amp;quot;${SearchServlet.RESULTS_PER_PAGE}&amp;quot;&amp;gt;
                &amp;lt;c:forTokens items=&amp;quot;3,5,10,20,50&amp;quot; delims=&amp;quot;,&amp;quot; var=&amp;quot;per&amp;quot;&amp;gt;
                    &amp;lt;option ${per == perPageInt ? &amp;#39;selected&amp;#39; : null}&amp;gt;
                        &amp;lt;c:out value=&amp;quot;${per}&amp;quot; /&amp;gt;
                    &amp;lt;/option&amp;gt;
                &amp;lt;/c:forTokens&amp;gt;
            &amp;lt;/select&amp;gt; &amp;amp;nbsp; &amp;lt;input type=&amp;quot;submit&amp;quot; value=&amp;quot;–ü–æ–∏—Å–∫!&amp;quot; /&amp;gt;
        &amp;lt;/p&amp;gt;
    &amp;lt;/form&amp;gt;

    &amp;lt;c:if test=&amp;quot;${searchmodel != null}&amp;quot;&amp;gt;
        &amp;lt;c:choose&amp;gt;
            &amp;lt;c:when test=&amp;quot;${searchmodel.items != null}&amp;quot;&amp;gt;
                &amp;lt;div style=&amp;quot;float: right;&amp;quot;&amp;gt;
                    Page &amp;lt;b&amp;gt; ${currentPageInt} &amp;lt;/b&amp;gt; from 
                    &amp;lt;b&amp;gt;${Math.ceil((1.0 * searchmodel.totalHits) / perPageInt).intValue()}&amp;lt;/b&amp;gt;
                &amp;lt;/div&amp;gt;
                &amp;lt;c:if test=&amp;quot;${currentPageInt &amp;gt; 1}&amp;quot;&amp;gt;
                    &amp;lt;tag:nav current=&amp;quot;${currentPageInt - 1}&amp;quot; value=&amp;quot;&amp;lt;&amp;quot; style=&amp;quot; float:left;&amp;quot; /&amp;gt;
                &amp;lt;/c:if&amp;gt;
                &amp;lt;c:if test=&amp;quot;${searchmodel.totalHits &amp;gt; currentPageInt * perPageInt}&amp;quot;&amp;gt;
                    &amp;lt;tag:nav current=&amp;quot;${currentPageInt + 1}&amp;quot; value=&amp;quot;&amp;gt;&amp;quot; /&amp;gt;
                &amp;lt;/c:if&amp;gt;
                &amp;lt;div style=&amp;quot;clear: both;&amp;quot;&amp;gt;
                    &amp;lt;c:forEach items=&amp;quot;${searchmodel.items}&amp;quot; var=&amp;quot;item&amp;quot;&amp;gt;
                        &amp;lt;hr /&amp;gt;
                        &amp;lt;p&amp;gt;
                            &amp;lt;b&amp;gt;–°–æ–≤–ø–∞–¥–µ–Ω–∏–µ: &amp;lt;/b&amp;gt;${item.score} &amp;lt;b&amp;gt;–ö–∏–Ω–æ–ø–æ–∏—Å–∫: &amp;lt;/b&amp;gt; &amp;lt;a
                                href=&amp;quot;http://www.kinopoisk.ru/film/${item.id}/&amp;quot;&amp;gt;${item.rate}&amp;lt;/a&amp;gt; 
                            &amp;lt;b&amp;gt;–†–µ–∂–∏—Å—Å—ë—Ä: &amp;lt;/b&amp;gt;
                            &amp;lt;c:out value=&amp;quot;${item.director}&amp;quot; /&amp;gt;
                        &amp;lt;/p&amp;gt;
                        &amp;lt;p&amp;gt;
                            &amp;lt;b&amp;gt;–ñ–∞–Ω—Ä: &amp;lt;/b&amp;gt;
                            &amp;lt;c:out value=&amp;quot;${fn:join(item.categories, &amp;#39;, &amp;#39;)}&amp;quot; /&amp;gt;
                        &amp;lt;/p&amp;gt;
                        &amp;lt;p&amp;gt;
                            &amp;lt;b&amp;gt;–ù–∞–∑–≤–∞–Ω–∏–µ: &amp;lt;/b&amp;gt;
                            &amp;lt;tag:hi value=&amp;quot;${item.highlightedTitle}&amp;quot; /&amp;gt;
                        &amp;lt;/p&amp;gt;
                        &amp;lt;p&amp;gt;
                            &amp;lt;b&amp;gt;–û–ø–∏—Å–∞–Ω–∏–µ: &amp;lt;/b&amp;gt;
                            &amp;lt;tag:hi value=&amp;quot;${item.highlightedContent}&amp;quot; /&amp;gt;
                        &amp;lt;/p&amp;gt;
                    &amp;lt;/c:forEach&amp;gt;
                &amp;lt;/div&amp;gt;
            &amp;lt;/c:when&amp;gt;
            &amp;lt;c:otherwise&amp;gt;
                &amp;lt;p align=&amp;quot;center&amp;quot;&amp;gt;–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ :(&amp;lt;/p&amp;gt;
            &amp;lt;/c:otherwise&amp;gt;
        &amp;lt;/c:choose&amp;gt;
    &amp;lt;/c:if&amp;gt;
    &amp;lt;p align=&amp;quot;center&amp;quot;&amp;gt;
        &amp;lt;a href=&amp;quot;http://mazko.github.io/&amp;quot;&amp;gt;http://mazko.github.io/&amp;lt;/a&amp;gt;
    &amp;lt;/p&amp;gt;
&amp;lt;/body&amp;gt;
&amp;lt;/html&amp;gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;em&gt;src/server/src/main/webapp/WEB-INF/tags/hi.tag&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&amp;lt;%@ taglib uri=&amp;quot;http://java.sun.com/jsp/jstl/core&amp;quot; prefix=&amp;quot;c&amp;quot; %&amp;gt;
&amp;lt;%@ taglib uri=&amp;quot;http://java.sun.com/jsp/jstl/functions&amp;quot; prefix=&amp;quot;fn&amp;quot; %&amp;gt;

&amp;lt;%@ attribute name=&amp;quot;value&amp;quot; required=&amp;quot;true&amp;quot; %&amp;gt;

&amp;lt;c:set var=&amp;quot;esc&amp;quot;&amp;gt;&amp;lt;c:out value=&amp;quot;${value}&amp;quot; /&amp;gt;&amp;lt;/c:set&amp;gt;

&amp;lt;c:if test=&amp;quot;${value != null}&amp;quot;&amp;gt;
    ${esc.replaceAll(
          &amp;quot;\\[mazko\\.github\\.io\\](.*?)\\[/mazko\\.github\\.io\\]&amp;quot;, 
          &amp;quot;&amp;lt;b style=\&amp;quot;color:red;\&amp;quot;&amp;gt;$1&amp;lt;/b&amp;gt;&amp;quot;)}
&amp;lt;/c:if&amp;gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;em&gt;src/server/src/main/webapp/WEB-INF/tags/nav.tag&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&amp;lt;%@ taglib uri=&amp;quot;http://java.sun.com/jsp/jstl/core&amp;quot; prefix=&amp;quot;c&amp;quot;%&amp;gt;

&amp;lt;%@ attribute name=&amp;quot;value&amp;quot; required=&amp;quot;true&amp;quot;%&amp;gt;
&amp;lt;%@ attribute name=&amp;quot;style&amp;quot; required=&amp;quot;false&amp;quot;%&amp;gt;
&amp;lt;%@ attribute name=&amp;quot;current&amp;quot; required=&amp;quot;true&amp;quot;%&amp;gt;

&amp;lt;%@ tag import=&amp;quot;server.SearchServlet&amp;quot;%&amp;gt;

&amp;lt;form name=&amp;quot;search&amp;quot; action=&amp;quot;/&amp;quot; accept-charset=&amp;quot;UTF-8&amp;quot; style=&amp;quot;${style}&amp;quot;&amp;gt;
    &amp;lt;c:forEach items=&amp;quot;${searchcontext}&amp;quot; var=&amp;quot;entry&amp;quot;&amp;gt;
        &amp;lt;c:if
            test=&amp;quot;${entry.key != SearchServlet.CURRENT_PAGE &amp;amp;&amp;amp; entry.key != SearchServlet.CATEGORY}&amp;quot;&amp;gt;
            &amp;lt;input type=&amp;quot;hidden&amp;quot; name=&amp;quot;${entry.key}&amp;quot;
                value=&amp;quot;&amp;lt;c:out value=&amp;quot;${entry.value}&amp;quot;/&amp;gt;&amp;quot; /&amp;gt;
        &amp;lt;/c:if&amp;gt;
    &amp;lt;/c:forEach&amp;gt;

    &amp;lt;c:forEach items=&amp;quot;${searchcontext[SearchServlet.CATEGORY]}&amp;quot; var=&amp;quot;item&amp;quot;&amp;gt;
        &amp;lt;input type=&amp;quot;hidden&amp;quot; name=&amp;quot;${SearchServlet.CATEGORY}&amp;quot;
            value=&amp;quot;&amp;lt;c:out value=&amp;quot;${item}&amp;quot;/&amp;gt;&amp;quot; /&amp;gt;
    &amp;lt;/c:forEach&amp;gt;

    &amp;lt;input type=&amp;quot;hidden&amp;quot; name=&amp;quot;${SearchServlet.CURRENT_PAGE}&amp;quot;
        value=&amp;quot;&amp;lt;c:out value=&amp;quot;${current}&amp;quot;/&amp;gt;&amp;quot; /&amp;gt; 
    &amp;lt;input type=&amp;quot;submit&amp;quot;
        value=&amp;quot;&amp;lt;c:out value=&amp;quot;${value}&amp;quot;/&amp;gt;&amp;quot; /&amp;gt;
&amp;lt;/form&amp;gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ &lt;span class="nb"&gt;cd&lt;/span&gt; src
~$ mvn clean install
~$ mvn -pl crawler/ exec:java -Dexec.mainClass&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;crawler.App&amp;quot;&lt;/span&gt;
~$ mvn -pl server/ jetty:run
&lt;/pre&gt;&lt;/div&gt;


&lt;!-- &lt;a href="http://proiot.ru/blog/posts/2016/05/15/lucene-fasetnyi-poisk/download-kinopoisk.es6"&gt;&lt;/a&gt; --&gt;

&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/05/20/lucene-avtozapolnenie-vvoda-polzovatelia/"&gt;–î–∞–ª–µ–µ&lt;/a&gt; –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –≤–≤–æ–¥–∞.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/05/15/lucene-fasetnyi-poisk/lucene-tutorial.zip"&gt;–ò—Å—Ö–æ–¥–Ω–∏–∫–∏&lt;/a&gt;&lt;/p&gt;</content><category term="Lucene"></category><category term="maven"></category><category term="JSTL"></category></entry><entry><title>–ö–∞–∫ —Å–æ–æ—Ä—É–¥–∏—Ç—å —É–¥–æ–±–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥ —Ç–µ–∫—Å—Ç–∞ –≤—Å–µ–≥–æ –∑–∞ –ø–∞—Ä—É –º–∏–Ω—É—Ç</title><link href="http://proiot.ru/blog/posts/2016/03/03/kak-soorudit-udobnyi-perevod-teksta-vsego-za-paru-minut/" rel="alternate"></link><published>2016-03-03T00:00:00+02:00</published><updated>2016-03-03T00:00:00+02:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2016-03-03:/blog/posts/2016/03/03/kak-soorudit-udobnyi-perevod-teksta-vsego-za-paru-minut/</id><summary type="html">&lt;p&gt;–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Å–∏—Ç—É–∞—Ü–∏—è: —á–∏—Ç–∞–µ–º –∫–∞–∫—É—é-–Ω–∏–±—É–¥—å &lt;em&gt;e-book&lt;/em&gt; –Ω–∞ –Ω–µ–Ω–∞—à–µ–º —è–∑—ã–∫–µ –∏ –≤–∏–¥–∏–º –Ω–µ–∑–Ω–∞–∫–æ–º–æ–µ —Å–ª–æ–≤–æ. –í–æ–ª—à–µ–±–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –≤ –ø–æ–º–æ—â—å:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;–°—á–∏—Ç—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â–∏–π –≤—ã–¥–µ–ª–µ–Ω–Ω—ã–π –≤ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç —Ç–µ–∫—Å—Ç–∞&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;–°–∫–∞—Ä–º–ª–∏–≤–∞–µ—Ç —ç—Ç–æ—Ç —Ç–µ–∫—Å—Ç –≤–µ–±-—Å–µ—Ä–≤–∏—Å—É —Å–∏–Ω—Ç–µ–∑–∞—Ç–æ—Ä—É —Ä–µ—á–∏, –≤ –æ—Ç–≤–µ—Ç –ø–æ–ª—É—á–∞–µ—Ç –∞—É–¥–∏–æ —Ñ–∞–π–ª –∏ –ø—Ä–æ–∏–≥—Ä—ã–≤–∞–µ—Ç. –ù–∞ —Å–ª—É—Ö –∫–∞–∫-—Ç–æ –æ–Ω–æ –ª—É—á—à–µ –∑–∞–ø–æ–º–∏–Ω–∞–µ—Ç—Å—è :)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å–∫–∞—Ä–º–ª–∏–≤–∞–µ—Ç —Ç–µ–∫—Å—Ç –≤–µ–±-—Å–µ—Ä–≤–∏—Å—É –ø–µ—Ä–µ–≤–æ–¥—á–∏–∫—É, —Ü–µ–ª–µ–≤–æ–π —è–∑—ã–∫ ‚Ä¶&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;</summary><content type="html">&lt;p&gt;–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Å–∏—Ç—É–∞—Ü–∏—è: —á–∏—Ç–∞–µ–º –∫–∞–∫—É—é-–Ω–∏–±—É–¥—å &lt;em&gt;e-book&lt;/em&gt; –Ω–∞ –Ω–µ–Ω–∞—à–µ–º —è–∑—ã–∫–µ –∏ –≤–∏–¥–∏–º –Ω–µ–∑–Ω–∞–∫–æ–º–æ–µ —Å–ª–æ–≤–æ. –í–æ–ª—à–µ–±–Ω—ã–π —Å–∫—Ä–∏–ø—Ç –≤ –ø–æ–º–æ—â—å:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;–°—á–∏—Ç—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â–∏–π –≤—ã–¥–µ–ª–µ–Ω–Ω—ã–π –≤ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–µ —Ñ—Ä–∞–≥–º–µ–Ω—Ç —Ç–µ–∫—Å—Ç–∞&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;–°–∫–∞—Ä–º–ª–∏–≤–∞–µ—Ç —ç—Ç–æ—Ç —Ç–µ–∫—Å—Ç –≤–µ–±-—Å–µ—Ä–≤–∏—Å—É —Å–∏–Ω—Ç–µ–∑–∞—Ç–æ—Ä—É —Ä–µ—á–∏, –≤ –æ—Ç–≤–µ—Ç –ø–æ–ª—É—á–∞–µ—Ç –∞—É–¥–∏–æ —Ñ–∞–π–ª –∏ –ø—Ä–æ–∏–≥—Ä—ã–≤–∞–µ—Ç. –ù–∞ —Å–ª—É—Ö –∫–∞–∫-—Ç–æ –æ–Ω–æ –ª—É—á—à–µ –∑–∞–ø–æ–º–∏–Ω–∞–µ—Ç—Å—è :)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;–ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å–∫–∞—Ä–º–ª–∏–≤–∞–µ—Ç —Ç–µ–∫—Å—Ç –≤–µ–±-—Å–µ—Ä–≤–∏—Å—É –ø–µ—Ä–µ–≤–æ–¥—á–∏–∫—É, —Ü–µ–ª–µ–≤–æ–π —è–∑—ã–∫ –∫–∞–∫ –≤ —Å–∏—Å—Ç–µ–º–µ, –ø–∞—Ä—Å–∏—Ç –æ—Ç–≤–µ—Ç –∏ –≤—ã—Ç–∞—Å–∫–∏–≤–∞–µ—Ç –æ—Ç—Ç—É–¥–∞ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ —Å–∞–º –ø–µ—Ä–µ–≤–æ–¥&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;–í—ã–≤–æ–¥–∏—Ç –ø—Ä–∏—è—Ç–Ω–æ–µ –≤—Å–ø–ª—ã–≤–∞—é—â–µ–µ –æ–∫–æ—à–∫–æ —Å –ø–µ—Ä–µ–≤–µ–¥—ë–Ω–Ω—ã–º —Å–æ–¥–µ—Ä–∂–∏–º—ã–º, –¥–∞–∂–µ –∫–∞—Ä—Ç–∏–Ω–∫–∞ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –ø–æ–¥ –∫–∞—Ç–æ–º&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;–ü—Ä–∏–≤–æ–∂—É –¥–≤–µ –≤–µ—Ä—Å–∏–∏ —Å–∫—Ä–∏–ø—Ç–∞ &lt;em&gt;xsel-tr-notify.sh&lt;/em&gt;, –ø–µ—Ä–≤–∞—è –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞ —Ç–µ–∫—Å—Ç–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∏–∑ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ –≥–æ—Ç–æ–≤–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ &lt;em&gt;translate-shell&lt;/em&gt;, —Ç–æ–≥–¥–∞ –∫–∞–∫ –≤—Ç–æ—Ä–∞—è —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞–ø—Ä—è–º—É—é c REST API.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/03/03/kak-soorudit-udobnyi-perevod-teksta-vsego-za-paru-minut/translate-ubuntu.gif" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;xsel-tr-notify.sh&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="ch"&gt;#!/usr/bin/env bash&lt;/span&gt;

&lt;span class="c1"&gt;# chmod +x xsel-tr-notify.sh &amp;amp;&amp;amp; sudo ln -s `pwd`/$_ /usr/local/bin/xsel-translate-notify&lt;/span&gt;
&lt;span class="c1"&gt;# apt-get install libnotify-bin xsel&lt;/span&gt;
&lt;span class="c1"&gt;# git clone https://github.com/soimort/translate-shell &amp;amp;&amp;amp; cd translate-shell/ &amp;amp;&amp;amp; make&lt;/span&gt;

&lt;span class="c1"&gt;# Exit immediately if a command exits with a non-zero status.&lt;/span&gt;
&lt;span class="nb"&gt;set&lt;/span&gt; -e

&lt;span class="c1"&gt;# capture current OS selection into variable&lt;/span&gt;
&lt;span class="nv"&gt;text&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;xsel -o&lt;span class="sb"&gt;`&lt;/span&gt;

&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;[[&lt;/span&gt; ! -z &lt;span class="nv"&gt;$text&lt;/span&gt; &lt;span class="o"&gt;]]&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
  &lt;span class="c1"&gt;# Absolute path to this script, e.g. /home/user/bin/foo.sh&lt;/span&gt;
  &lt;span class="nv"&gt;SCRIPT&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;readlink -f &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$0&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;

  &lt;span class="c1"&gt;# Absolute path this script is in, thus /home/user/bin&lt;/span&gt;
  &lt;span class="nv"&gt;SCRIPTPATH&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;dirname &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$SCRIPT&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;

  &lt;span class="nv"&gt;translate&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;&lt;span class="nv"&gt;$SCRIPTPATH&lt;/span&gt;/translate-shell/build/trans -sp -brief :&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;LANGUAGE&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="nv"&gt;0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="nv"&gt;2&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$text&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;

  &lt;span class="c1"&gt;# UI notify&lt;/span&gt;
  notify-send -u critical &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$text&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$translate&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
&lt;span class="k"&gt;fi&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç ? –í –∫–∞—á–µ—Å—Ç–≤–µ –ø—Ä–∏–º–µ—Ä–∞ –Ω–∏–∂–Ω–µ –ø–æ–∫–∞–∑–∞–Ω —Å–∫—Ä–∏–ø—Ç, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑—É—é—Ç REST API –Ø–Ω–¥–µ–∫—Å–∞. –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ–µ API –µ—Å—Ç—å –∏ —É –¥—Ä—É–≥–∏—Ö –ø–æ–∏—Å–∫–æ–≤–∏–∫–æ–≤ ‚Äî Google, Bing –∏ —Ç.–¥ –∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ &lt;em&gt;translate-shell&lt;/em&gt; —Ç–æ–∂–µ –µ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–∞ —Ç–µ–∫—Å—Ç–∞.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;xsel-tr-notify.sh&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="ch"&gt;#!/usr/bin/env bash&lt;/span&gt;

&lt;span class="c1"&gt;# chmod +x xsel-tr-notify.sh &amp;amp;&amp;amp; sudo ln -s `pwd`/$_ /usr/local/bin/xsel-translate-notify&lt;/span&gt;
&lt;span class="c1"&gt;# apt-get install mpg123 libnotify-bin xsel curl&lt;/span&gt;

&lt;span class="c1"&gt;# Exit immediately if a command exits with a non-zero status.&lt;/span&gt;
&lt;span class="nb"&gt;set&lt;/span&gt; -e

&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Powered by Yandex api&amp;quot;&lt;/span&gt;

&lt;span class="c1"&gt;# https://tech.yandex.ru/translate/&lt;/span&gt;
&lt;span class="nv"&gt;YA_TRNSL_KEY&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;your_trnsl_key_here
&lt;span class="c1"&gt;# https://tech.yandex.ru/speechkit/cloud/doc/dg/concepts/speechkit-dg-tts-docpage/&lt;/span&gt;
&lt;span class="nv"&gt;YA_TTS_KEY&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;your_tts_key_here

&lt;span class="c1"&gt;# capture current OS selection into variable&lt;/span&gt;
&lt;span class="nv"&gt;text&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;xsel -o&lt;span class="sb"&gt;`&lt;/span&gt;

&lt;span class="c1"&gt;# text to speech in background, non-blocking&lt;/span&gt;
curl -sf &lt;span class="s1"&gt;&amp;#39;https://tts.voicetech.yandex.net/generate&amp;#39;&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
  -d &lt;span class="s2"&gt;&amp;quot;text=&lt;/span&gt;&lt;span class="nv"&gt;$text&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;       &lt;span class="se"&gt;\&lt;/span&gt;
  -d &lt;span class="s1"&gt;&amp;#39;format=mp3&amp;#39;&lt;/span&gt;       &lt;span class="se"&gt;\&lt;/span&gt;
  -d &lt;span class="s1"&gt;&amp;#39;lang=en-EN&amp;#39;&lt;/span&gt;       &lt;span class="se"&gt;\&lt;/span&gt;
  -d &lt;span class="s1"&gt;&amp;#39;speaker=zahar&amp;#39;&lt;/span&gt;    &lt;span class="se"&gt;\&lt;/span&gt;
  -d &lt;span class="s1"&gt;&amp;#39;emotion=good&amp;#39;&lt;/span&gt;     &lt;span class="se"&gt;\&lt;/span&gt;
  -d &lt;span class="s2"&gt;&amp;quot;key=&lt;/span&gt;&lt;span class="nv"&gt;$YA_TTS_KEY&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;  &lt;span class="se"&gt;\&lt;/span&gt;
  &lt;span class="p"&gt;|&lt;/span&gt; mpg123 --stereo - &lt;span class="p"&gt;&amp;amp;&lt;/span&gt;

&lt;span class="c1"&gt;# translate text &amp;amp; parse json response&lt;/span&gt;
&lt;span class="nv"&gt;translate&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;curl -sf &lt;span class="s1"&gt;&amp;#39;https://translate.yandex.net/api/v1.5/tr.json/translate&amp;#39;&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
  -d &lt;span class="s2"&gt;&amp;quot;key=&lt;/span&gt;&lt;span class="nv"&gt;$YA_TRNSL_KEY&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;    &lt;span class="se"&gt;\&lt;/span&gt;
  -d &lt;span class="s2"&gt;&amp;quot;text=&lt;/span&gt;&lt;span class="nv"&gt;$text&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;           &lt;span class="se"&gt;\&lt;/span&gt;
  -d &lt;span class="s2"&gt;&amp;quot;lang=&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;LANGUAGE&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="nv"&gt;0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="nv"&gt;2&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
  &lt;span class="p"&gt;|&lt;/span&gt; sed &lt;span class="s1"&gt;&amp;#39;s/.*\[\&amp;quot;\(.*\)\&amp;quot;\].*/\1/&amp;#39;&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;

&lt;span class="c1"&gt;# UI notify&lt;/span&gt;
notify-send -u critical &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$text&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$translate&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ö–ª—é—á–∏ &lt;strong&gt;–Ø–Ω–¥–µ–∫—Å&lt;/strong&gt; –¥–∞—ë—Ç –±–µ—Å–ø–ª–∞—Ç–Ω–æ –¥–ª—è –Ω–µ–∫–æ–º–º–µ—Ä—á–µ—Å–∫–∏—Ö —Ü–µ–ª–µ–π. –í –ø—Ä–æ—Å—Ç–µ–π—à–µ–º —Å–ª—É—á–∞–µ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–∫—Ä–∏–ø—Ç–∞ —Å—Ç–æ–∏—Ç –ø—Ä–æ—Å—Ç–æ –≤—ã–¥–µ–ª–∏—Ç—å —Ç–µ–∫—Å—Ç –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç—å &lt;code&gt;xsel-translate-notify&lt;/code&gt;, –Ω–æ –∫—É–¥–∞ —É–¥–æ–±–Ω–µ–π –≤—ã–ø–æ–ª–Ω—è—Ç—å —ç—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–µ–π –∫–ª–∞–≤–∏—à.&lt;/p&gt;</content><category term="REST"></category><category term="NLP"></category></entry><entry><title>–ö–∞–∫ –ø–µ—Ä–µ—Å—Ç–∞—Ç—å –±–µ—Å–ø–æ–∫–æ–∏—Ç—å—Å—è –∏ –Ω–∞—á–∞—Ç—å –ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å</title><link href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/" rel="alternate"></link><published>2015-10-21T00:00:00+03:00</published><updated>2015-10-21T00:00:00+03:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2015-10-21:/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/</id><summary type="html">&lt;p&gt;–ü—Ä–∏–º–µ—Ä –ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∏—è &lt;strong&gt;Java&lt;/strong&gt; =&amp;gt; &lt;strong&gt;JavaScript&lt;/strong&gt; –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ —Ç–æ–∫–µ–Ω–∏–∑–∞—Ç–æ—Ä–æ–≤ –∏–∑ &lt;a href="http://proiot.ru/blog/posts/2012/10/15/lucene-kurs-molodogo-boitsa/"&gt;Lucene&lt;/a&gt;. &lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/out/lucene-tokenizers.es6"&gt;lucene-tokenizers.es6&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/out/lucene-tokenizers.babel.js"&gt;lucene-tokenizers.babel.js&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/out/tests/Coverage.html"&gt;–¢–µ—Å—Ç—ã&lt;/a&gt; | &lt;a href="https://github.com/mazko/mazko.github.io/tree/src/content/posts/admin/2015-10-21-lucene-tokenizers-es6/src"&gt;–ò—Å—Ö–æ–¥–Ω–∏–∫–∏&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;TL;DR&lt;/h2&gt;
&lt;p&gt;–ü—Ä–æ—Ü–µ—Å—Å –º–æ–∂–Ω–æ —É—Å–ª–æ–≤–Ω–æ —Ä–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ —ç—Ç–∞–ø–æ–≤:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫ –¥–æ–∂–Ω—ã –±—ã—Ç—å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã –≤ –≤–∏–¥–µ –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤, –∞ –Ω–µ–∑–∞–¥–µ–π—Å—Ç–≤–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥ –ø–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —É–¥–∞–ª—ë–Ω —Ç.–∫. —Ä–∞–∑–º–µ—Ä —Ç–∞–∫–∏ –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –∏ —á–µ–º –º–µ–Ω—å—à–µ ‚Ä¶&lt;/p&gt;&lt;/li&gt;&lt;/ul&gt;</summary><content type="html">&lt;p&gt;–ü—Ä–∏–º–µ—Ä –ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∏—è &lt;strong&gt;Java&lt;/strong&gt; =&amp;gt; &lt;strong&gt;JavaScript&lt;/strong&gt; –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ —Ç–æ–∫–µ–Ω–∏–∑–∞—Ç–æ—Ä–æ–≤ –∏–∑ &lt;a href="http://proiot.ru/blog/posts/2012/10/15/lucene-kurs-molodogo-boitsa/"&gt;Lucene&lt;/a&gt;. &lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/out/lucene-tokenizers.es6"&gt;lucene-tokenizers.es6&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/out/lucene-tokenizers.babel.js"&gt;lucene-tokenizers.babel.js&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/out/tests/Coverage.html"&gt;–¢–µ—Å—Ç—ã&lt;/a&gt; | &lt;a href="https://github.com/mazko/mazko.github.io/tree/src/content/posts/admin/2015-10-21-lucene-tokenizers-es6/src"&gt;–ò—Å—Ö–æ–¥–Ω–∏–∫–∏&lt;/a&gt;&lt;/p&gt;
&lt;h2&gt;TL;DR&lt;/h2&gt;
&lt;p&gt;–ü—Ä–æ—Ü–µ—Å—Å –º–æ–∂–Ω–æ —É—Å–ª–æ–≤–Ω–æ —Ä–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞ –Ω–µ—Å–∫–æ–ª—å–∫–æ —ç—Ç–∞–ø–æ–≤:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö –±–∏–±–ª–∏–æ—Ç–µ–∫ –¥–æ–∂–Ω—ã –±—ã—Ç—å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã –≤ –≤–∏–¥–µ –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤, –∞ –Ω–µ–∑–∞–¥–µ–π—Å—Ç–≤–æ–≤–∞–Ω–Ω—ã–π –∫–æ–¥ –ø–æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —É–¥–∞–ª—ë–Ω —Ç.–∫. —Ä–∞–∑–º–µ—Ä —Ç–∞–∫–∏ –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ –∏ —á–µ–º –º–µ–Ω—å—à–µ –≤–µ—Å–∏—Ç –ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–∫—Ä–∏–ø—Ç —Ç–µ–º –æ–Ω –±—ã—Å—Ç—Ä–µ–µ –æ—Ç—Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –±—Ä–∞—É–∑–µ—Ä–µ&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;–¢–æ—á–Ω–æ —Ç–∞–∫ –∂–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –∫–ª–∞—Å—Å—ã —Å—Ä–µ–¥—ã –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è &lt;em&gt;Java&lt;/em&gt;, –Ω–∞–ø—Ä–∏–º–µ—Ä &lt;em&gt;Character.java&lt;/em&gt;, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Å–∫–æ–ø–∏—Ä–æ–≤–∞–≤ –≤ –ø—Ä–æ–µ–∫—Ç &lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;–ù–∞ —ç—Ç–æ–º —ç—Ç–∞–ø–µ –ª–æ–≥–∏–∫–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—á–µ–π, –µ—Å–ª–∏ —É –ø–æ—Ä—Ç–∏—Ä—É–µ–º–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ –∏–º–µ—é—Ç—Å—è —é–Ω–∏—Ç-—Ç–µ—Å—Ç—ã - –ø—Ä–æ–≥–Ω–∞—Ç—å –∏—Ö. –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–µ–π—á–∞—Å, –≤—Ä—è–¥-–ª–∏ –∑–∞—Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ—Å–ª–µ —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏–∏ :)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;–°–æ–±—Å—Ç–≤–µ–Ω–Ω–æ —Å–∞–º–∞ &lt;a href="http://mazko.github.io/ESJava/"&gt;—Ç—Ä–∞–Ω—Å–ª—è—Ü–∏—è&lt;/a&gt; –¥–æ–±—ã—Ç—ã—Ö &lt;em&gt;Java&lt;/em&gt; –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤ –≤ &lt;a href="https://babeljs.io/docs/learn-es2015/" rel="nofollow"&gt;ES6&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;–¢–æ—á–µ—á–Ω–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è - –Ω–∞–ø—Ä–∏–º–µ—Ä —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É –º–µ—Ç–æ–¥–∞ &lt;em&gt;System.arraycopy&lt;/em&gt;, –∫–æ—Ç–æ—Ä—ã–π –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–∏–ª–∏ —Ä–∞–Ω–µ–µ, –Ω–æ —É–∂–µ –¥–ª—è &lt;em&gt;JavaScript&lt;/em&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;noscript&gt;&lt;span style="color:red;"&gt;–í–∫–ª—é—á–∏—Ç–µ JavaScript ! &lt;/span&gt;&lt;/noscript&gt;

&lt;script type="text/javascript" src="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/out/lucene-tokenizers.babel.js"&gt;&lt;/script&gt;

&lt;script type="text/javascript"&gt;
(function() {
  var parseId;

  function id(i) {
      return document.getElementById(i);
  }
  function parse(delay) {
      if (parseId) {
          window.clearTimeout(parseId);
      }

      parseId = window.setTimeout(function () {
        var ts = new luceneTokenizers[id("tokenizer-class").value];
        ts.setReader(
          new luceneTokenizers.StringReader(
            id("text-to-tokenize").value)
        );
        var res = [];
        for (var token, i=0; (token = ts.incrementToken()) !== null; i++) {
          var pretty_token = {};
          for (var prop in token) {
            if(token.hasOwnProperty(prop)) {
              pretty_token[prop.substring('_$esjava$'.length)] = token[prop];
            } 
          }
          res.push(pretty_token);
        }

        id("tokenize-result").value = JSON.stringify(res, null, 2);
      }, delay || 555);
  }
  window.onload = function () {
      var update = function() { parse(); };
      id("text-to-tokenize").onkeyup = update;
      id("tokenizer-class").onchange = update;
      parse();
  };
})();
&lt;/script&gt;

&lt;p&gt;&lt;select id="tokenizer-class"&gt;
    &lt;option value="StandardTokenizer"&gt;Standard&lt;/option&gt;
    &lt;option value="UAX29URLEmailTokenizer"&gt;UAX29URLEmail&lt;/option&gt;
&lt;/select&gt;&lt;/p&gt;
&lt;div&gt;
&lt;!-- http://www.freeformatter.com/html-escape.html --&gt;
&lt;div style="width:49%; border:1px solid #ddd; float:left;"&gt;
  &lt;textarea rows="10" id="text-to-tokenize" autocomplete="off"
    style="width:97%; margin:auto; color: #AAFF00; background-color: #111111; border: none; overflow:auto; padding: 5px; display: block;"&gt;The quick brown fox &amp;lt;fox@mail.ru&amp;gt; jumps over the 42 lazy dogs &amp;lt; mailto:dog@gmail.com &amp;gt; !? More at -&gt; http://www.google.com/ &amp;#9749;
  &lt;/textarea&gt;
&lt;/div&gt;
&lt;div style="width:49%; border:1px solid #ddd; float:right;"&gt;
  &lt;textarea rows="10" id="tokenize-result" autocomplete="off"
    style="width:97%; margin:auto; color: #EE00AA; background-color: #111111; border: none; overflow:auto; padding: 5px; display: block;" readonly&gt;&lt;/textarea&gt;
&lt;/div&gt;
&lt;div style="clear:both;"&gt;&lt;/div&gt;
&lt;/div&gt;

&lt;p&gt;–ö–∞–∫ –≤–∏–¥–Ω–æ –Ω–∞ –¥–µ–º–∫–µ –∏ –Ω–µ—Å–ª–æ–∂–Ω–æ –¥–æ–≥–∞–¥–∞—Ç—å—Å—è –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é —Ç–æ–∫–µ–Ω–∞–π–∑–µ—Ä &lt;a href="https://lucene.apache.org/core/5_3_1/analyzers-common/org/apache/lucene/analysis/standard/UAX29URLEmailTokenizer.html" rel="nofollow"&gt;UAX29URLEmailTokenizer&lt;/a&gt; —á—É—Ç—å –±–æ–ª–µ–µ –ø—Ä–∞–≤–æ—Å–ª–∞–≤–Ω—ã–π –ø–æ –≤–µ–±—É. –û–±–∞ &lt;em&gt;StandardTokenizer&lt;/em&gt; –∏ &lt;em&gt;UAX29URLEmailTokenizer&lt;/em&gt; –≤–ø–æ–ª–Ω–µ —Å–µ–±–µ –¥—Ä—É–∂–∞—Ç —Å —é–Ω–∏–∫–æ–¥–æ–º.&lt;/p&gt;
&lt;p&gt;–¢–µ–ø–µ—Ä—å —á—É—Ç—å –ø–æ–¥—Ä–æ–±–Ω–µ–π –æ –ø—Ä–æ—Ü–µ—Å—Å–µ –ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.&lt;/p&gt;
&lt;h2&gt;ESJava&lt;/h2&gt;
&lt;p&gt;–ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫ Java –ø—Ä–æ–µ–∫—Ç–∞ (Eclipse):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ tree
.
‚îú‚îÄ‚îÄ src
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ org
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ apache
‚îÇ¬†¬† ‚îÇ¬†¬†     ‚îî‚îÄ‚îÄ lucene
‚îÇ¬†¬† ‚îÇ¬†¬†         ‚îî‚îÄ‚îÄ analysis
‚îÇ¬†¬† ‚îÇ¬†¬†             ‚îú‚îÄ‚îÄ standard
‚îÇ¬†¬† ‚îÇ¬†¬†             ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ Character.java
‚îÇ¬†¬† ‚îÇ¬†¬†             ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ Exception.java
‚îÇ¬†¬† ‚îÇ¬†¬†             ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ IndexOutOfBoundsException.java
‚îÇ¬†¬† ‚îÇ¬†¬†             ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ IOException.java
‚îÇ¬†¬† ‚îÇ¬†¬†             ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ Reader.java
‚îÇ¬†¬† ‚îÇ¬†¬†             ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ StandardAnalyzer.java
‚îÇ¬†¬† ‚îÇ¬†¬†             ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ StandardTokenizerImpl.java
‚îÇ¬†¬† ‚îÇ¬†¬†             ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ StandardTokenizer.java
‚îÇ¬†¬† ‚îÇ¬†¬†             ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ StringReader.java
‚îÇ¬†¬† ‚îÇ¬†¬†             ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ System.java
‚îÇ¬†¬† ‚îÇ¬†¬†             ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ Tokenizer.java
‚îÇ¬†¬† ‚îÇ¬†¬†             ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ TokenModel.java
‚îÇ¬†¬† ‚îÇ¬†¬†             ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ UAX29URLEmailTokenizerImpl.java
‚îÇ¬†¬† ‚îÇ¬†¬†             ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ UAX29URLEmailTokenizer.java
‚îÇ¬†¬† ‚îÇ¬†¬†             ‚îî‚îÄ‚îÄ tokenattributes
‚îÇ¬†¬† ‚îÇ¬†¬†                 ‚îî‚îÄ‚îÄ CharTermAttribute.java
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ Test.java
‚îî‚îÄ‚îÄ tests
    ‚îî‚îÄ‚îÄ org
        ‚îî‚îÄ‚îÄ apache
            ‚îî‚îÄ‚îÄ lucene
                ‚îî‚îÄ‚îÄ analysis
                    ‚îî‚îÄ‚îÄ standard
                        ‚îú‚îÄ‚îÄ BaseTokenStreamTestCase.java
                        ‚îú‚îÄ‚îÄ Slow.java
                        ‚îú‚îÄ‚îÄ TestStandardAnalyzer.java
                        ‚îú‚îÄ‚îÄ TestUAX29URLEmailTokenizer.java
                        ‚îú‚îÄ‚îÄ TestUtil.java
                        ‚îî‚îÄ‚îÄ WordBreakTestUnicode_6_3_0.java

&lt;span class="m"&gt;13&lt;/span&gt; directories, &lt;span class="m"&gt;22&lt;/span&gt; files
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–î–ª—è —É–¥–æ–±—Å—Ç–≤–∞ —Ä–∞–±–æ—Ç—ã —Å –∏—Å—Ö–æ–¥–Ω–∏–∫–∞–º–∏ —Å—Ä–µ–¥—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è Java:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ apt-get install openjdk-7-source
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ò —Ç–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç –æ–¥–∏–Ω –∏–∑ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö –≤ –ø—Ä–æ–µ–∫—Ç–µ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤:&lt;/p&gt;
&lt;p&gt;&lt;em&gt;src/org/apache/lucene/analysis/standardSystem.java&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;System&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
  &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;arraycopy&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Object&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;sp&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Object&lt;/span&gt; &lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;dp&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;l&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="c1"&gt;// :es6:&lt;/span&gt;
    &lt;span class="c1"&gt;// int[] elements_to_add = s.slice(sp, sp + l);&lt;/span&gt;
    &lt;span class="c1"&gt;// Array.prototype.splice.apply(d, new int[] {dp,&lt;/span&gt;
    &lt;span class="c1"&gt;// elements_to_add.length}.concat(elements_to_add));&lt;/span&gt;
    &lt;span class="n"&gt;java&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;lang&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;arraycopy&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;sp&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;dp&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;l&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="c1"&gt;// :end:&lt;/span&gt;
  &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–í &lt;em&gt;ES6&lt;/em&gt; –µ—Å—Ç—å —Ö–æ—Ä–æ—à–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è &lt;code&gt;import&lt;/code&gt;, –Ω–æ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –Ω–µ–º–Ω–æ–≥–æ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ–π –≤ Java - —Ñ–∞–π–ª—ã –∏–∑ –æ–¥–Ω–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ —Ç–æ–∂–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —è–≤–Ω–æ. –ù–æ –ª–µ–Ω—å. –ü—Ä–æ—â–µ –∑–∞–∫–∏–Ω—É—Ç—å –≤—Å–µ –∫–ª–∞—Å—Å—ã –≤ –æ–¥–∏–Ω —Ñ–∞–π–ª:&lt;/p&gt;
&lt;p&gt;&lt;em&gt;merge.sh&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# find -name &amp;#39;*.java&amp;#39; | grep &amp;#39;./src/org/apache/lucene/analysis/&amp;#39;&lt;/span&gt;
cat &lt;span class="se"&gt;\&lt;/span&gt;
./src/org/apache/lucene/analysis/standard/Exception.java &lt;span class="se"&gt;\&lt;/span&gt;
./src/org/apache/lucene/analysis/standard/IOException.java &lt;span class="se"&gt;\&lt;/span&gt;
./src/org/apache/lucene/analysis/standard/IndexOutOfBoundsException.java &lt;span class="se"&gt;\&lt;/span&gt;
./src/org/apache/lucene/analysis/standard/Reader.java &lt;span class="se"&gt;\&lt;/span&gt;
./src/org/apache/lucene/analysis/standard/StringReader.java &lt;span class="se"&gt;\&lt;/span&gt;
./src/org/apache/lucene/analysis/standard/Character.java &lt;span class="se"&gt;\&lt;/span&gt;
./src/org/apache/lucene/analysis/tokenattributes/CharTermAttribute.java &lt;span class="se"&gt;\&lt;/span&gt;
./src/org/apache/lucene/analysis/standard/TokenModel.java &lt;span class="se"&gt;\&lt;/span&gt;
./src/org/apache/lucene/analysis/standard/Tokenizer.java &lt;span class="se"&gt;\&lt;/span&gt;
./src/org/apache/lucene/analysis/standard/System.java &lt;span class="se"&gt;\&lt;/span&gt;
./src/org/apache/lucene/analysis/standard/StandardAnalyzer.java &lt;span class="se"&gt;\&lt;/span&gt;
./src/org/apache/lucene/analysis/standard/StandardTokenizerImpl.java &lt;span class="se"&gt;\&lt;/span&gt;
./src/org/apache/lucene/analysis/standard/StandardTokenizer.java &lt;span class="se"&gt;\&lt;/span&gt;
./src/org/apache/lucene/analysis/standard/UAX29URLEmailTokenizerImpl.java &lt;span class="se"&gt;\&lt;/span&gt;
./src/org/apache/lucene/analysis/standard/UAX29URLEmailTokenizer.java &lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="p"&gt;|&lt;/span&gt; sed &lt;span class="s1"&gt;&amp;#39;/^package\s/d&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; sed &lt;span class="s1"&gt;&amp;#39;/^import\s/d&amp;#39;&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
&amp;gt; lucene-tokenizers.java
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ò –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–ø–∏—Å–æ–∫ —Ç–æ—á–µ—á–Ω—ã—Ö –∞–¥–∞–ø—Ç–∞—Ü–∏–π –¥–ª—è JavaScript:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ awk &lt;span class="s1"&gt;&amp;#39;/\:es6\:/,/\:end\:/&amp;#39;&lt;/span&gt; lucene-tokenizers.java
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–¢—Ä–∞–Ω—Å–ª—è—Ü–∏—è:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ npm install -g esjava
~$ &lt;span class="nb"&gt;alias&lt;/span&gt; &lt;span class="nv"&gt;esjava10000&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;node --stack-size=10000 `which esjava`&amp;quot;&lt;/span&gt;
~$ esjava10000 lucene-tokenizers.java &amp;gt; out/lucene-tokenizers.es6
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–û—Å—Ç–∞–ª–æ—Å—å —É–∫–∞–∑–∞—Ç—å –Ω–∞ &lt;em&gt;export&lt;/em&gt; –∫–ª–∞—Å—Å—ã &lt;em&gt;StringReader&lt;/em&gt;, &lt;em&gt;StandardTokenizer&lt;/em&gt;, &lt;em&gt;UAX29URLEmailTokenizer&lt;/em&gt; –∏ –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É —Å—Ç–∞—Ä—ã—Ö JavaScript –¥–≤–∏–∂–∫–æ–≤:&lt;/p&gt;
&lt;p&gt;&lt;em&gt;out/js.sh&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nv"&gt;ES6FILE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;lucene-tokenizers.es6&amp;#39;&lt;/span&gt;

&lt;span class="k"&gt;for&lt;/span&gt; cls in &lt;span class="s1"&gt;&amp;#39;StringReader&amp;#39;&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;StandardTokenizer&amp;#39;&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;UAX29URLEmailTokenizer&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;do&lt;/span&gt;
  sed -i &lt;span class="s2"&gt;&amp;quot;s/^class\s\+&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;cls&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;\s\+/export class &lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;cls&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt; /&amp;quot;&lt;/span&gt; &lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;ES6FILE&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;
&lt;span class="k"&gt;done&lt;/span&gt;

sed &lt;span class="s1"&gt;&amp;#39;s/\\u/\\\\u/g&amp;#39;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$ES6FILE&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt;                     &lt;span class="se"&gt;\&lt;/span&gt;
node --stack-size&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;10000&lt;/span&gt;                              &lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="s2"&gt;&amp;quot;`which babel`&amp;quot;&lt;/span&gt;                                      &lt;span class="se"&gt;\&lt;/span&gt;
--compact&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;false&lt;/span&gt;                                      &lt;span class="se"&gt;\&lt;/span&gt;
--presets es2015                                     &lt;span class="se"&gt;\&lt;/span&gt;
--plugins transform-es2015-modules-umd               &lt;span class="se"&gt;\&lt;/span&gt;
--module-id luceneTokenizers &lt;span class="p"&gt;|&lt;/span&gt;                       &lt;span class="se"&gt;\&lt;/span&gt;
sed &lt;span class="s1"&gt;&amp;#39;s/\\\\u/\\u/g&amp;#39;&lt;/span&gt; &amp;gt; lucene-tokenizers.babel.js
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–°–∫—Ä–∏–ø—Ç –Ω–∞ –≤—ã—Ö–æ–¥–µ &lt;em&gt;lucene-tokenizers.babel.js&lt;/em&gt; –∫—Ä—É—Ç–∏—Ç—Å—è –≤ –¥–µ–º–∫–µ.&lt;/p&gt;
&lt;!-- Pelican Attach hack --&gt;

&lt;!-- cd ./src/ &amp;&amp; find . -type f | sort | xargs -I{} -n1 echo -e '&lt;a href="\x7Battach\x7Dsrc/{}"&gt;&lt;/a&gt;' | xclip -selection clipboard &amp;&amp; cd - --&gt;

&lt;!-- 
&lt;a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/lucene-tokenizers.java"&gt;&lt;/a&gt;
&lt;a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/merge.sh"&gt;&lt;/a&gt;
&lt;a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/out/js.sh"&gt;&lt;/a&gt;
&lt;a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/out/lucene-tokenizers.babel.js"&gt;&lt;/a&gt;
&lt;a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/out/lucene-tokenizers.es6"&gt;&lt;/a&gt;
&lt;a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/out/tests/BaseTokenStreamTestCase.js"&gt;&lt;/a&gt;
&lt;a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/out/tests/Coverage.html"&gt;&lt;/a&gt;
&lt;a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/out/tests/qunit/blanket.js"&gt;&lt;/a&gt;
&lt;a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/out/tests/qunit/lcov_reporter.js"&gt;&lt;/a&gt;
&lt;a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/out/tests/qunit/qunit-1.19.0.css"&gt;&lt;/a&gt;
&lt;a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/out/tests/qunit/qunit-1.19.0.js"&gt;&lt;/a&gt;
&lt;a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/out/tests/stdTests.js"&gt;&lt;/a&gt;
&lt;a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/out/tests/uaxTests.js"&gt;&lt;/a&gt;
&lt;a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/out/tests/WordBreakTestUnicode_6_3_0.js"&gt;&lt;/a&gt;
&lt;a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/src/org/apache/lucene/analysis/standard/Character.java"&gt;&lt;/a&gt;
&lt;a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/src/org/apache/lucene/analysis/standard/Exception.java"&gt;&lt;/a&gt;
&lt;a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/src/org/apache/lucene/analysis/standard/IndexOutOfBoundsException.java"&gt;&lt;/a&gt;
&lt;a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/src/org/apache/lucene/analysis/standard/IOException.java"&gt;&lt;/a&gt;
&lt;a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/src/org/apache/lucene/analysis/standard/Reader.java"&gt;&lt;/a&gt;
&lt;a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/src/org/apache/lucene/analysis/standard/StandardAnalyzer.java"&gt;&lt;/a&gt;
&lt;a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/src/org/apache/lucene/analysis/standard/StandardTokenizerImpl.java"&gt;&lt;/a&gt;
&lt;a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/src/org/apache/lucene/analysis/standard/StandardTokenizer.java"&gt;&lt;/a&gt;
&lt;a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/src/org/apache/lucene/analysis/standard/StringReader.java"&gt;&lt;/a&gt;
&lt;a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/src/org/apache/lucene/analysis/standard/System.java"&gt;&lt;/a&gt;
&lt;a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/src/org/apache/lucene/analysis/standard/Tokenizer.java"&gt;&lt;/a&gt;
&lt;a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/src/org/apache/lucene/analysis/standard/TokenModel.java"&gt;&lt;/a&gt;
&lt;a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/src/org/apache/lucene/analysis/standard/UAX29URLEmailTokenizerImpl.java"&gt;&lt;/a&gt;
&lt;a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/src/org/apache/lucene/analysis/standard/UAX29URLEmailTokenizer.java"&gt;&lt;/a&gt;
&lt;a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/src/org/apache/lucene/analysis/tokenattributes/CharTermAttribute.java"&gt;&lt;/a&gt;
&lt;a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/src/Test.java"&gt;&lt;/a&gt;
&lt;a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/tests/org/apache/lucene/analysis/standard/BaseTokenStreamTestCase.java"&gt;&lt;/a&gt;
&lt;a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/tests/org/apache/lucene/analysis/standard/Slow.java"&gt;&lt;/a&gt;
&lt;a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/tests/org/apache/lucene/analysis/standard/TestStandardAnalyzer.java"&gt;&lt;/a&gt;
&lt;a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/tests/org/apache/lucene/analysis/standard/TestUAX29URLEmailTokenizer.java"&gt;&lt;/a&gt;
&lt;a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/tests/org/apache/lucene/analysis/standard/TestUtil.java"&gt;&lt;/a&gt;
&lt;a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/src/tests/org/apache/lucene/analysis/standard/WordBreakTestUnicode_6_3_0.java"&gt;&lt;/a&gt;
 --&gt;

&lt;!-- cd ./npm/ &amp;&amp; find . -type f | sort | xargs -I{} -n1 echo -e '&lt;a href="\x7Battach\x7Dnpm/{}"&gt;&lt;/a&gt;' | xclip -selection clipboard &amp;&amp; cd - --&gt;

&lt;!--
&lt;a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/npm/.gitignore"&gt;&lt;/a&gt;
&lt;a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/npm/package.json"&gt;&lt;/a&gt;
&lt;a href="http://proiot.ru/blog/posts/2015/10/21/kak-perestat-bespokoitsia-i-nachat-portirovat/npm/readme"&gt;&lt;/a&gt;
 --&gt;</content><category term="NLP"></category><category term="Lucene"></category><category term="ES6"></category></entry><entry><title>TDD –Ω–∞ —É—Ä–æ–≤–Ω–µ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤ - —Å–≤–µ–∂–∏–π –≤–∑–≥–ª—è–¥</title><link href="http://proiot.ru/blog/posts/2014/03/29/tdd-na-urovne-mikrokontrollerov-svezhii-vzgliad/" rel="alternate"></link><published>2014-03-29T00:00:00+02:00</published><updated>2014-03-29T00:00:00+02:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2014-03-29:/blog/posts/2014/03/29/tdd-na-urovne-mikrokontrollerov-svezhii-vzgliad/</id><summary type="html">&lt;p&gt;–¢–µ–º–∞ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –ü–û –¥–ª—è –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –º–µ—Ç–æ–¥–∏–∫ —É–∂–µ &lt;a href="http://proiot.ru/blog/posts/2012/10/07/manchesterskii-kod-dlia-chainikov/"&gt;–ø–æ–¥–Ω–∏–º–∞–ª–∞—Å—å&lt;/a&gt;. –°–æ–±—Å—Ç–≤–µ–Ω–Ω–æ –µ—Å–ª–∏ –≤–∫—Ä–∞—Ç—Ü–µ, —Ç–æ –±—ã–ª–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —Ä–∞–∑–¥–µ–ª—è—Ç—å –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏—Ö –ª–æ–≥–∏–∫—É –Ω–∞ –ü–ö –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –∂–µ–ª–µ–∑–∞. –¢–∞–∫–æ–π &lt;em&gt;–Ω–∞–∏–≤–Ω—ã–π&lt;/em&gt; –ø–æ–¥—Ö–æ–¥ —Å–ø–æ—Å–æ–±–µ–Ω –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ø—Ä–æ—Å—Ç–∏—Ç—å –∂–∏–∑–Ω—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É, –Ω–æ –≤ —Ç–æ –∂–µ –≤—Ä–µ–º—è –∏–º–µ–µ—Ç —Å–µ—Ä—å—ë–∑–Ω—ã–µ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∏ ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;p&gt;–¢–µ–º–∞ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –ü–û –¥–ª—è –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –º–µ—Ç–æ–¥–∏–∫ —É–∂–µ &lt;a href="http://proiot.ru/blog/posts/2012/10/07/manchesterskii-kod-dlia-chainikov/"&gt;–ø–æ–¥–Ω–∏–º–∞–ª–∞—Å—å&lt;/a&gt;. –°–æ–±—Å—Ç–≤–µ–Ω–Ω–æ –µ—Å–ª–∏ –≤–∫—Ä–∞—Ç—Ü–µ, —Ç–æ –±—ã–ª–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–æ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —Ä–∞–∑–¥–µ–ª—è—Ç—å –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –Ω–∞ –æ—Ç–¥–µ–ª—å–Ω—ã–µ –º–æ–¥—É–ª–∏ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏—Ö –ª–æ–≥–∏–∫—É –Ω–∞ –ü–ö –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –∂–µ–ª–µ–∑–∞. –¢–∞–∫–æ–π &lt;em&gt;–Ω–∞–∏–≤–Ω—ã–π&lt;/em&gt; –ø–æ–¥—Ö–æ–¥ —Å–ø–æ—Å–æ–±–µ–Ω –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ø—Ä–æ—Å—Ç–∏—Ç—å –∂–∏–∑–Ω—å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É, –Ω–æ –≤ —Ç–æ –∂–µ –≤—Ä–µ–º—è –∏–º–µ–µ—Ç —Å–µ—Ä—å—ë–∑–Ω—ã–µ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∏ –æ—Å–æ–±–µ–Ω–Ω–æ –Ω–∞ —Å—Ç—ã–∫–µ —Å–æ—Ñ—Ç–∞ –ø–µ—Ä–µ—Ñ–∏—Ä–∏–∏:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;—É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –æ–±—ä—ë–º –∫–æ–¥–∞ –∑–∞ —Å—á—ë—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –∏–ª–∏ &lt;code&gt;#ifdef&lt;/code&gt; –Ω–∞ —Å—Ç—ã–∫–µ —Å –ø–µ—Ä–∏—Ñ–µ—Ä–∏–µ–π (–≤—Å—è–∫–∏–µ &lt;em&gt;UART&lt;/em&gt;, &lt;em&gt;I2C&lt;/em&gt;, –ø–æ—Ä—Ç—ã –≤–≤–æ–¥–∞-–≤—ã–≤–æ–¥–∞ –∏ —Ç.–¥.). –ù–∞–ø—Ä–∏–º–µ—Ä –ª–æ–≥–∏–∫—É –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –±–∏—Ç–æ–≤ –ø–æ—Ä—Ç–æ–≤ –º–æ–∂–Ω–æ –∑–∞–≤–µ—Ä–Ω—É—Ç—å –≤ —Ñ—É–Ω–∫—Ü–∏—é &lt;code&gt;set_flag()&lt;/code&gt; –∏ –ø—Ä–∏ –Ω–∞–ø–∏—Å–∞–Ω–∏–∏ —Ç–µ—Å—Ç–æ–≤ –∑–∞–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å–æ–æ—Ç–≤. –µ–π &lt;em&gt;mock&lt;/em&gt; - –æ–¥–Ω–∞–∫–æ —ç—Ç–æ —É–≤–µ–ª–∏—á–∏—Ç –æ–±—â–∏–π –æ–±—ä—ë–º –∫–æ–¥–∞&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;–Ω–∞ —É—Ä–æ–≤–Ω–µ –ø–µ—Ä–∏—Ñ–µ—Ä–∏–∏ –∫–æ–¥ —á–∞—Å—Ç–æ —Ç–∞–∫ –∏ –æ—Å—Ç–∞—ë—Ç—Å—è –Ω–µ–¥–æ–ø–æ–∫—Ä—ã—Ç—ã–º —Ç–µ—Å—Ç–∞–º–∏. –ö –ø—Ä–∏–º–µ—Ä—É –ø–µ—Ä–∏—Ñ–µ—Ä–∏–π–Ω—ã–µ –º–æ–¥—É–ª–∏ –∏–º–µ—é—Ç —Å–≤–æ–π—Å—Ç–≤–æ –ø–æ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–Ω—ã–º —Å–æ–±—ã—Ç–∏—è–º –≤—ã–±—Ä–∞—Å—ã–≤–∞—Ç—å —Ñ–ª–∞–≥–∏, –Ω–∞–ø–æ–ª–Ω—è—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä—ã –¥–∞–Ω–Ω—ã–º–∏ - –∏–∑–æ–±—Ä–µ—Ç–∞—Ç—å –≤–µ–ª–æ—Å–∏–ø–µ–¥—ã –∏ –ø—Ä–∏–¥—É–º—ã–≤–∞—Ç—å —Ñ–µ–π–∫–æ–≤—ã–µ –ø–µ—Ä–∏—Ñ–µ—Ä–∏–π–Ω—ã–µ –º–æ–¥—É–ª–∏ ? –ö–∞–∫ –º–∏–Ω–∏–º—É–º –Ω—É–∂–Ω–æ –ø—Ä–µ–∫—Ä–∞—Å–Ω–æ –ø–æ–Ω–∏–º–∞—Ç—å –∫–∞–∫ —ç—Ç–∞ –ø–µ—Ä–∏—Ñ–µ—Ä–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç, –ø–ª—é—Å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—å&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;–Ω—É –∞ –æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ñ–∏—á —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã—Ö –¥–ª—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ —Ç–∏–ø–∞ &lt;a href="http://www.microchip.com/stellent/groups/SiteComm_sg/documents/DeviceDoc/en557154.pdf" rel="nofollow"&gt;MIPS16&lt;/a&gt; –≤–æ–æ–±—â–µ –∏ –≥–æ–≤–æ—Ä–∏—Ç—å –Ω–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;–ò—Ç–∞–∫ –¥–∞–ª–µ–µ –±—É–¥–µ—Ç —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω –ø—Ä–∏–º–µ—Ä —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤ &lt;em&gt;Microchip&lt;/em&gt;, &lt;strong&gt;—ç–º—É–ª—è—Ç–æ—Ä–∞&lt;/strong&gt; –∏ TDD —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞ &lt;a href="http://throwtheswitch.org/" rel="nofollow"&gt;Ceedling&lt;/a&gt;. –≠–º—É–ª—è—Ç–æ—Ä –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –Ω–∞ –ü–ö –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –µ–≥–æ –≤—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã, –∞ &lt;em&gt;Ceedling&lt;/em&gt; —ç—Ç–æ –Ω–µ –±–æ–ª–µ–µ —á–µ–º —Å—Ä–µ–¥—Å—Ç–≤–æ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏, –Ω–∞–ø–∏—Å–∞–Ω–æ –Ω–∞ &lt;em&gt;Ruby&lt;/em&gt; –ø–ª—é—Å –≤—Å—ë —á—Ç–æ –º–æ–∂–µ—Ç –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –¥–ª—è –ø–æ–∫—Ä—ã—Ç–∏—è —Ç–µ—Å—Ç–∞–º–∏ –∫–æ–¥–∞ –Ω–∞ &lt;em&gt;C&lt;/em&gt; (&lt;em&gt;Unity&lt;/em&gt;, &lt;em&gt;CMock&lt;/em&gt; –∏ –¥–∞–∂–µ &lt;em&gt;CException&lt;/em&gt;).&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;#apt-get install ruby&lt;/span&gt;
~$ gem install ceedling
~$ ceedling new PIC_Demo
~$ &lt;span class="nb"&gt;cd&lt;/span&gt; PIC_Demo/
~$ ls
build  project.yml  rakefile.rb  src  &lt;span class="nb"&gt;test&lt;/span&gt;  vendor
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ï—â—ë –Ω–∞–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è &lt;em&gt;C&lt;/em&gt; –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –¥–ª—è –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤ &lt;em&gt;PIC&lt;/em&gt; –∏ —Å—Ä–µ–¥–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ &lt;em&gt;MPLAB&lt;/em&gt;. –í—Å—ë —ç—Ç–æ –º–æ–∂–Ω–æ –±–µ—Å–ø–ª–∞—Ç–Ω–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Å–∞–π—Ç–∞ &lt;em&gt;Microchip&lt;/em&gt; –∏ –ø–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —ç—Ç–æ–≥–æ –¥–æ–±—Ä–∞ –¥–æ–ª–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å—Å—è –ø—Ä–∏–º–µ—Ä–Ω–æ —Å–ª–µ–¥—É—é—â–µ–µ:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ which xc16-gcc
/opt/microchip/xc16/v1.21/bin/xc16-gcc
~$ which mplab_ide 
/usr/bin/mplab_ide
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ù–∏–∫–∞–∫ –Ω–µ –æ–±–æ–π—Ç–∏—Å—å –Ω–∞–º –±–µ–∑ &lt;em&gt;Hello World&lt;/em&gt;:&lt;/p&gt;
&lt;p&gt;&lt;em&gt;src/hello.c&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;stdio.h&amp;gt; /* Required for printf */&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;printf&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Hello, world!&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ö–æ–º–ø–∏–ª—è—Ü–∏—è + –ª–∏–Ω–∫–æ–≤–∫–∞:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ xc16-gcc -omf&lt;span class="o"&gt;=&lt;/span&gt;elf -mcpu&lt;span class="o"&gt;=&lt;/span&gt;24EP64MC206 src/hello.c &lt;span class="se"&gt;\&lt;/span&gt;
-o build/hello.elf -Wl,-Tp24EP64MC206.gld
~$ file build/hello.elf
build/hello.elf: ELF &lt;span class="m"&gt;32&lt;/span&gt;-bit LSB executable, &lt;span class="se"&gt;\&lt;/span&gt;
version &lt;span class="m"&gt;1&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;SYSV&lt;span class="o"&gt;)&lt;/span&gt;, statically linked, not stripped
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–≠–º—É–ª—è—Ü–∏—è. –°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ª—É—á–∞–π - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å &lt;em&gt;sim30&lt;/em&gt;, –∫–æ—Ç–æ—Ä—ã–π –ø–æ—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –≤–º–µ—Å—Ç–µ —Å &lt;em&gt;–°&lt;/em&gt; –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–æ–º &lt;em&gt;xc16-gcc&lt;/em&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;
&lt;span class="s2"&gt;LD pic24epsuper&lt;/span&gt;
&lt;span class="s2"&gt;LC build/hello.elf&lt;/span&gt;
&lt;span class="s2"&gt;IO NULL /tmp/&lt;/span&gt;&lt;span class="nv"&gt;$$&lt;/span&gt;&lt;span class="s2"&gt;.txt&lt;/span&gt;
&lt;span class="s2"&gt;RP&lt;/span&gt;
&lt;span class="s2"&gt;E&lt;/span&gt;
&lt;span class="s2"&gt;Q&lt;/span&gt;
&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; sim30
~$ cat /tmp/&lt;span class="nv"&gt;$$&lt;/span&gt;.txt
Hello, world!
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ü—Ä–µ–ª–µ—Å—Ç–Ω–æ ! –í–∞–∂–Ω–æ –æ—Ç–º–µ—Ç–∏—Ç—å —á—Ç–æ –ø—Ä–∏ —ç–º—É–ª—è—Ü–∏–∏ –≤ &lt;em&gt;sim30&lt;/em&gt; –µ—Å—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –∏ –º–æ–∂–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ &lt;em&gt;—Å–µ–º–µ–π—Å—Ç–≤–∞&lt;/em&gt; —á–∏–ø–æ–≤, –∞ –Ω–µ –∫–∞–∫–æ–π-–ª–∏–±–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ –ø–æ –æ—Ç–¥–µ–ª—å–Ω–æ—Å—Ç–∏:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ &lt;span class="nb"&gt;echo&lt;/span&gt; DH &lt;span class="p"&gt;|&lt;/span&gt; sim30 &lt;span class="p"&gt;|&lt;/span&gt; grep LD 
LD &amp;lt;devicename&amp;gt; -Load Device: &lt;span class="se"&gt;\&lt;/span&gt;
dspic30super dspic33epsuper pic24epsuper pic24fpsuper pic24super
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ö–∞–∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —ç–º—É–ª—è—Ü–∏–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –Ω–µ –≤—Å—è –∏–º–µ—é—â–∞—è—Å—è –Ω–∞ –±–æ—Ä—Ç—É –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ –ø–µ—Ä–∏—Ñ–µ—Ä–∏—è –∏ –æ–± —ç—Ç–æ–º –º—ã –µ—â—ë –ø–æ–≥–æ–≤–æ—Ä–∏–º —á—É—Ç—å –ø–æ–∑–∂–µ, –Ω—É –∞ —Å–µ–π—á–∞—Å —Å–∞–º–æ–µ –≤—Ä–µ–º—è –Ω–∞—á–∞—Ç—å –ø–æ–ª—É—á–∞—Ç—å —É–¥–æ–≤–æ–ª—å—Å—Ç–≤–∏–µ –æ—Ç —é–Ω–∏—Ç —Ç–µ—Å—Ç–æ–≤ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º &lt;a href="http://throwtheswitch.org/" rel="nofollow"&gt;Ceedling&lt;/a&gt;. –í &lt;em&gt;Hello World&lt;/em&gt; –≤—Å–µ–≥–æ –æ–¥–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è main. –ù–µ —Å–µ–∫—Ä–µ—Ç, —á—Ç–æ –≤ &lt;em&gt;C&lt;/em&gt; –ø—Ä–æ–≥—Ä–∞–º–º–µ —Ñ—É–Ω–∫—Ü–∏—è —Å —Ç–∞–∫–∏–º –∏–º–µ–Ω–µ–º –º–æ–∂–µ—Ç –±—ã—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–Ω–∞, –∞ –ø–æ—Å–∫–æ–ª—å–∫—É –≤ &lt;em&gt;Ceedling&lt;/em&gt; –æ–Ω–∞ —É–∂–µ —è–≤–Ω–æ –∏–º–µ–µ—Ç—Å—è, –¥–ª—è —Ç–µ—Å—Ç–æ–≤ &lt;em&gt;hello.c&lt;/em&gt; —Ç—É—Ç –Ω—É–∂–Ω—ã &lt;code&gt;#ifdef&lt;/code&gt; - –Ω–æ —ç—Ç–æ —á–∞—Å—Ç–Ω—ã–π —Å–ª—É—á–∞–π, –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –∏–∑ –ø—Ä–∞–≤–∏–ª —Ç–∞–∫ —Å–∫–∞–∑–∞—Ç—å –∏ –ø—É–≥–∞—Ç—å—Å—è –Ω–µ —Å—Ç–æ–∏—Ç:&lt;/p&gt;
&lt;p&gt;&lt;em&gt;src/hello.h&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#ifndef hello_H&lt;/span&gt;
&lt;span class="cp"&gt;#define hello_H&lt;/span&gt;

&lt;span class="cp"&gt;#ifdef TEST&lt;/span&gt;
&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;test_main&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="cp"&gt;#endif&lt;/span&gt;

&lt;span class="cp"&gt;#endif &lt;/span&gt;&lt;span class="c1"&gt;// hello_H&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;em&gt;src/hello.c&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;stdio.h&amp;gt; /* Required for printf */&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;hello.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#ifdef TEST&lt;/span&gt;
&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;test_main&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="cp"&gt;#else&lt;/span&gt;
&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;main&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="cp"&gt;#endif&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;printf&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Hello, world!&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;em&gt;test/test_main.c&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;unity.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;hello.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;setUp&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="p"&gt;){&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;tearDown&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="p"&gt;){&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;test_main_function_should_always_return_0&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="p"&gt;){&lt;/span&gt;
    &lt;span class="n"&gt;TEST_ASSERT_EQUAL&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;test_main&lt;/span&gt;&lt;span class="p"&gt;());&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é &lt;em&gt;Ceedling&lt;/em&gt; –∑–∞—Ç–æ—á–µ–Ω –ø–æ–¥ &lt;em&gt;gcc&lt;/em&gt;, –ø–æ—ç—Ç–æ–º—É –Ω—É–∂–Ω–æ –¥–æ–ø–∏–ª–∏—Ç—å &lt;em&gt;project.yml&lt;/em&gt;, —É–∫–∞–∑–∞–≤ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä, –ª–∏–Ω–∫–æ–≤—â–∏–∫ –≤ —Å–µ–∫—Ü–∏–∏ &lt;code&gt;:tools:&lt;/code&gt;:&lt;/p&gt;
&lt;p&gt;&lt;em&gt;project.yml&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;:tools:
  :test_compiler:
    :executable: xc16-gcc
    :arguments:
      - -mcpu=24EP64MC206
      - -x c
      - -c
      - &amp;quot;${1}&amp;quot;
      - -o &amp;quot;${2}&amp;quot;
      - -D$: COLLECTION_DEFINES_TEST_AND_VENDOR
      - -I&amp;quot;$&amp;quot;: COLLECTION_PATHS_TEST_SUPPORT_SOURCE_INCLUDE_VENDOR
      - -Wall
      - -Wextra
      - -mlarge-code
      - -mlarge-arrays
      - -mlarge-data
  :test_linker:
    :executable: xc16-gcc
    :arguments:
      - -mcpu=24EP64MC206
      - -omf=elf
      - ${1}
      - -o &amp;quot;./build/TestBuild.out&amp;quot;
      - -Wl,-Tp24EP64MC206.gld
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤ –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π Ceedling&lt;/span&gt;
&lt;span class="c1"&gt;# rake -T&lt;/span&gt;
~$ rake test:all
&lt;span class="c1"&gt;# build/test/out/cmock.o: Link Error: \&lt;/span&gt;
&lt;span class="c1"&gt;# Could not allocate section .bss, size = 32774 bytes, attributes = bss &lt;/span&gt;
&lt;span class="c1"&gt;# Link Error: Could not allocate data memory&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–õ–∏–Ω–∫–æ–≤—â–∏–∫ —Ä—É–≥–∞–µ—Ç—Å—è - –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—É –Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç –ø–∞–º—è—Ç–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å &lt;em&gt;cmock&lt;/em&gt;, –ø–æ—ç—Ç–æ–º—É —É–º–µ–Ω—å—à–∏–º –∞–ø–ø–µ—Ç–∏—Ç—ã —ç—Ç–æ–≥–æ –∑–∞–º–µ—á–∞—Ç–µ–ª—å–Ω–æ–≥–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ –≤ —Å–µ–∫—Ü–∏–∏ &lt;code&gt;:defines:&lt;/code&gt;:&lt;/p&gt;
&lt;p&gt;&lt;em&gt;project.yml&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;:commmon: &amp;amp;common_defines
  - UNITY_INT_WIDTH=16
  - CMOCK_MEM_INDEX_TYPE=uint16_t
  - CMOCK_MEM_PTR_AS_INT=uint16_t
  - CMOCK_MEM_ALIGN=1
  - CMOCK_MEM_SIZE=4096
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ü—Ä–æ–±—É–µ–º:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ rake test:all
&lt;span class="c1"&gt;# ERROR: Test executable &amp;quot;test_main.out&amp;quot; failed.&lt;/span&gt;
&lt;span class="c1"&gt;# &amp;gt; Produced no final test result counts in $stdout:&lt;/span&gt;
&lt;span class="c1"&gt;# sh: 1: build/test/out/test_main.out: not found&lt;/span&gt;
&lt;span class="c1"&gt;# &amp;gt; And exited with status: [127] (count of failed tests).&lt;/span&gt;
&lt;span class="c1"&gt;# &amp;gt; This is often a symptom of a bad memory access in source or test code.&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–¢—É—Ç &lt;em&gt;Ceedling&lt;/em&gt; –Ω–∞–∏–≤–Ω–æ –ø—ã—Ç–∞–µ—Ç—Å—è –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Å–æ–±—Ä–∞–Ω–Ω—É—é –ø—Ä–æ–≥—Ä–∞–º–º—É &lt;em&gt;test_main.out&lt;/em&gt;, –Ω–æ –Ω–µ –∑–Ω–∞–µ—Ç –∫–∞–∫, –∑–∞—Ç–æ –º—ã –∑–Ω–∞–µ–º —á—Ç–æ —ç—Ç–æ –¥–µ–ª–∞–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é &lt;em&gt;sim30&lt;/em&gt;:&lt;/p&gt;
&lt;p&gt;&lt;em&gt;test/simulation/sim30_instruction.txt&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;LD pic24epsuper
LC ./build/TestBuild.out
IO NULL ./test/simulation/out.txt
RP
E
quit
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;em&gt;test/simulation/sim_test_fixture.rb&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="no"&gt;OUT_FILE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;test/simulation/out.txt&amp;quot;&lt;/span&gt;
&lt;span class="no"&gt;File&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;delete&lt;/span&gt; &lt;span class="no"&gt;OUT_FILE&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="no"&gt;File&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;exists?&lt;/span&gt; &lt;span class="no"&gt;OUT_FILE&lt;/span&gt;
&lt;span class="n"&gt;pipe&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="no"&gt;IO&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;popen&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;sim30 ./test/simulation/sim30_instruction.txt&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="nb"&gt;trap&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;INT&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="no"&gt;Process&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;kill&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;KILL&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;pipe&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pid&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt; &lt;span class="nb"&gt;exit&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="no"&gt;Process&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;wait&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;pipe&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pid&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="no"&gt;File&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;exists?&lt;/span&gt; &lt;span class="no"&gt;OUT_FILE&lt;/span&gt;
    &lt;span class="n"&gt;file_contents&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="no"&gt;File&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;read&lt;/span&gt; &lt;span class="no"&gt;OUT_FILE&lt;/span&gt;
    &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="n"&gt;file_contents&lt;/span&gt;
&lt;span class="k"&gt;else&lt;/span&gt;
    &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;\&lt;/span&gt;
          &lt;span class="s2"&gt;&amp;quot;! Program was not simulated ? !&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;\&lt;/span&gt;
          &lt;span class="s2"&gt;&amp;quot;!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!&amp;quot;&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–†–∞—Å—Å–∫–∞–∑–∞—Ç—å &lt;em&gt;Ceedling&lt;/em&gt; –≤ —Å–µ–∫—Ü–∏–∏ &lt;code&gt;:tools:&lt;/code&gt; –∫–∞–∫ –≤—Å–µ–º —ç—Ç–∏–º —É–ø—Ä–∞–≤–ª—è—Ç—å:&lt;/p&gt;
&lt;p&gt;&lt;em&gt;project.yml&lt;/em&gt; &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;:test_fixture:
  :executable: ruby
  :name: &amp;quot;Microchip simulator test fixture&amp;quot;
  :stderr_redirect: :win
  :arguments:
    - test/simulation/sim_test_fixture.rb
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ó–∞–ø—É—Å–∫... –í—É–∞–ª—è !&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ rake test:all
&lt;span class="c1"&gt;# ----------------------&lt;/span&gt;
&lt;span class="c1"&gt;# UNIT TEST OTHER OUTPUT&lt;/span&gt;
&lt;span class="c1"&gt;# ----------------------&lt;/span&gt;
&lt;span class="c1"&gt;# [test_main.c]&lt;/span&gt;
&lt;span class="c1"&gt;#   - &amp;quot;Hello, world!&amp;quot;&lt;/span&gt;
&lt;span class="c1"&gt;# -------------------------&lt;/span&gt;
&lt;span class="c1"&gt;# OVERALL UNIT TEST SUMMARY&lt;/span&gt;
&lt;span class="c1"&gt;# -------------------------&lt;/span&gt;
&lt;span class="c1"&gt;# TESTED:  1&lt;/span&gt;
&lt;span class="c1"&gt;# PASSED:  1&lt;/span&gt;
&lt;span class="c1"&gt;# FAILED:  0&lt;/span&gt;
&lt;span class="c1"&gt;# IGNORED: 0&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–í–æ—Ç ! –¢–µ–ø–µ—Ä—å –ø—Ä–æ–µ–∫—Ç –±—É–¥–µ—Ç –∂–∏—Ç—å –∏ —Ä–∞–∑–≤–∏–≤–∞—Ç—å—Å—è –≤–º–µ—Å—Ç–µ —Å —Ç–µ—Å—Ç–∞–º–∏. –ü—Ä–µ–¥–ª–∞–≥–∞—é –ø–æ–º–∏–≥–∞—Ç—å —Å–≤–µ—Ç–æ–¥–∏–æ–¥–æ–º –∏ mock–Ω—É—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å–µ–≥–æ –¥–µ–π—Å—Ç–≤–∞:&lt;/p&gt;
&lt;p&gt;&lt;em&gt;src/gpio_led.h&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#ifndef gpio_led_H&lt;/span&gt;
&lt;span class="cp"&gt;#define gpio_led_H&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;gpio_led_init&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;gpio_led_set&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;brightness&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;gpio_led_clear&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;

&lt;span class="cp"&gt;#endif &lt;/span&gt;&lt;span class="c1"&gt;// gpio_H&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;em&gt;src/system.h&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#ifndef system_H&lt;/span&gt;
&lt;span class="cp"&gt;#define system_H&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;stdbool.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="kt"&gt;bool&lt;/span&gt; &lt;span class="nf"&gt;system_should_abort_app&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;

&lt;span class="cp"&gt;#endif &lt;/span&gt;&lt;span class="c1"&gt;// system_H&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;em&gt;src/hello.c&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;hello.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;system.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;gpio_led.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#ifdef TEST&lt;/span&gt;
&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;test_main&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="cp"&gt;#else&lt;/span&gt;
&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;main&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="cp"&gt;#endif&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;gpio_led_init&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
    &lt;span class="k"&gt;while&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="n"&gt;system_should_abort_app&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;gpio_led_set&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;11&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;gpio_led_clear&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;em&gt;test/test_main.c&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;unity.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;hello.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;mock_system.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;mock_gpio_led.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;setUp&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="p"&gt;){&lt;/span&gt;
    &lt;span class="n"&gt;gpio_led_init_Expect&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;tearDown&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="p"&gt;){&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;test_main_function_without_loop&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="p"&gt;){&lt;/span&gt;
    &lt;span class="n"&gt;system_should_abort_app_ExpectAndReturn&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;true&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;TEST_ASSERT_EQUAL&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;test_main&lt;/span&gt;&lt;span class="p"&gt;());&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;test_main_function_loop_one_iteration&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="p"&gt;){&lt;/span&gt;
    &lt;span class="n"&gt;system_should_abort_app_ExpectAndReturn&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;false&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;gpio_led_set_Expect&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;11&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;gpio_led_clear_Expect&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
    &lt;span class="n"&gt;system_should_abort_app_ExpectAndReturn&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;true&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;TEST_ASSERT_EQUAL&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;test_main&lt;/span&gt;&lt;span class="p"&gt;());&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ü—Ä–æ–±—É–µ–º:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ rake test:all
&lt;span class="c1"&gt;# -------------------------&lt;/span&gt;
&lt;span class="c1"&gt;# OVERALL UNIT TEST SUMMARY&lt;/span&gt;
&lt;span class="c1"&gt;# -------------------------&lt;/span&gt;
&lt;span class="c1"&gt;# TESTED:  2&lt;/span&gt;
&lt;span class="c1"&gt;# PASSED:  2&lt;/span&gt;
&lt;span class="c1"&gt;# FAILED:  0&lt;/span&gt;
&lt;span class="c1"&gt;# IGNORED: 0&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ö–∞–∫ –Ω–µ—Å–ª–æ–∂–Ω–æ –¥–æ–≥–∞–¥–∞—Ç—å—Å—è –∏–∑ &lt;em&gt;test/test_main.c&lt;/em&gt; –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –æ–¥–Ω–æ–≥–æ —é–Ω–∏—Ç —Ç–µ—Å—Ç–∞ &lt;em&gt;Ceedling&lt;/em&gt; –ª–∏–Ω–∫—É–µ—Ç –≤—Å–µ —Ñ–∞–π–ª—ã, —É–∫–∞–∑–∞–Ω–Ω—ã–µ –≤ –µ–≥–æ &lt;code&gt;#include&lt;/code&gt;, –ø—Ä–∏—á—ë–º –µ—Å–ª–∏ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç –ø—Ä–µ—Ñ–∏–∫—Å &lt;code&gt;mock&lt;/code&gt;, –≤–º–µ—Å—Ç–æ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–π &lt;em&gt;*.c&lt;/em&gt; –∏–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü–∏–∏ &lt;em&gt;Ceedling&lt;/em&gt; –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç &lt;em&gt;mock&lt;/em&gt; —Å–æ–≥–ª–∞—Å–Ω–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É, –ø—Ä–æ–ø–∏—Å–∞–Ω–Ω–æ–º—É –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–º &lt;em&gt;*.h&lt;/em&gt;. &lt;/p&gt;
&lt;p&gt;–ß—É—Ç—å –±–ª–∏–∂–µ –∫ –∂–µ–ª–µ–∑—É –Ω–∞ —É—Ä–æ–≤–µ–Ω—å –ø–æ—Ä—Ç–æ–≤ –≤–≤–æ–¥–∞-–≤—ã–≤–æ–¥–∞:&lt;/p&gt;
&lt;p&gt;&lt;em&gt;src/gpio_led.c&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;gpio_led.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;xc.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;gpio_led_init&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;TRISAbits&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;TRISA0&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;gpio_led_set&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;brightness&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="cm"&gt;/* TODO: brightness :) */&lt;/span&gt;
    &lt;span class="n"&gt;LATAbits&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;LATA0&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;gpio_led_clear&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;LATAbits&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;LATA0&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;em&gt;test/test_gpio_led.c&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;unity.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;gpio_led.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;xc.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;string.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;setUp&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="p"&gt;){&lt;/span&gt;
    &lt;span class="n"&gt;gpio_led_init&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
    &lt;span class="n"&gt;LATABITS&lt;/span&gt; &lt;span class="n"&gt;clean&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;};&lt;/span&gt;
    &lt;span class="n"&gt;memcpy&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;LATAbits&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;clean&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt; &lt;span class="n"&gt;clean&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;tearDown&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="p"&gt;){&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;test_gpio_led_set&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="p"&gt;){&lt;/span&gt;
    &lt;span class="n"&gt;TEST_ASSERT_EQUAL&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;LATAbits&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;LATA0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;gpio_led_set&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;11&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;TEST_ASSERT_EQUAL&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;LATAbits&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;LATA0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;test_gpio_led_clear&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="p"&gt;){&lt;/span&gt;
    &lt;span class="n"&gt;test_gpio_led_set&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
    &lt;span class="n"&gt;gpio_led_clear&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
    &lt;span class="n"&gt;TEST_ASSERT_EQUAL&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;LATAbits&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;LATA0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ü—Ä–æ–±—É–µ–º:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ rake test:all
&lt;span class="c1"&gt;# -------------------------&lt;/span&gt;
&lt;span class="c1"&gt;# OVERALL UNIT TEST SUMMARY&lt;/span&gt;
&lt;span class="c1"&gt;# -------------------------&lt;/span&gt;
&lt;span class="c1"&gt;# TESTED:  4&lt;/span&gt;
&lt;span class="c1"&gt;# PASSED:  4&lt;/span&gt;
&lt;span class="c1"&gt;# FAILED:  0&lt;/span&gt;
&lt;span class="c1"&gt;# IGNORED: 0&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–û—á–µ–≤–∏–¥–Ω–æ, —á—Ç–æ —Ç–∞–∫–æ–π &lt;em&gt;TDD&lt;/em&gt; –ø–æ–¥—Ö–æ–¥ –Ω–∞ –ø–æ—Ä—è–¥–æ–∫ —É–¥–æ–±–Ω–µ–µ &lt;a href="http://proiot.ru/blog/posts/2012/10/07/manchesterskii-kod-dlia-chainikov/"&gt;–ø—Ä–µ–¥—ã–¥—É—â–∏—Ö&lt;/a&gt;. –¢—É—Ç –æ—á–µ–Ω—å –º–Ω–æ–≥–æ–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π —ç–º—É–ª—è—Ç–æ—Ä–∞ –∏ –∏–Ω–æ–≥–¥–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞ &lt;em&gt;sim30&lt;/em&gt; –±—ã–≤–∞–µ—Ç –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ. –¢–∏–ø–∏—á–Ω—ã–π –ø—Ä–∏–º–µ—Ä - –ª–æ–≥–∏–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π:&lt;/p&gt;
&lt;p&gt;&lt;em&gt;src/gpio_button.h&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#ifndef gpio_button_H&lt;/span&gt;
&lt;span class="cp"&gt;#define gpio_button_H&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;gpio_button_init&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="cp"&gt;#endif &lt;/span&gt;&lt;span class="c1"&gt;// gpio_H&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;em&gt;src/gpio_button.c&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;gpio_button.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;gpio_led.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;xc.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;gpio_button_init&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;TRISFbits&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;TRISF0&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;CNENFbits&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;CNIEF0&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;IFS1bits&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;CNIF&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;IEC1bits&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;CNIE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;__attribute__&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="n"&gt;interrupt&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;auto_psv&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="n"&gt;_CNInterrupt&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;IFS1bits&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;CNIF&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;gpio_led_set&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;42&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;em&gt;test/test_gpio_button.c&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;unity.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;gpio_button.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;mock_gpio_led.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;xc.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;setUp&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="p"&gt;){&lt;/span&gt;
    &lt;span class="n"&gt;gpio_button_init&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;tearDown&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="p"&gt;){&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;test_gpio_button_interrupt&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="p"&gt;){&lt;/span&gt;
    &lt;span class="n"&gt;gpio_led_set_Expect&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;42&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;IFS1bits&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;CNIF&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;asm&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;NOP&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–£–ø—Å:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ rake test:all
&lt;span class="c1"&gt;# ------------------------&lt;/span&gt;
&lt;span class="c1"&gt;# FAILED UNIT TEST SUMMARY&lt;/span&gt;
&lt;span class="c1"&gt;# ------------------------&lt;/span&gt;
&lt;span class="c1"&gt;# [test_gpio_button.c]&lt;/span&gt;
&lt;span class="c1"&gt;# Test: test_gpio_button_interrupt&lt;/span&gt;
&lt;span class="c1"&gt;# At line (13): &amp;quot;Function &amp;#39;gpio_led_set&amp;#39; called less times than expected&amp;quot;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ü–æ—Ö–æ–∂–µ —ç–º—É–ª—è—Ç–æ—Ä &lt;em&gt;sim30&lt;/em&gt; –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è. –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç–º—É–ª—è—Ç–æ—Ä &lt;em&gt;mdb&lt;/em&gt; –∏–∑ —Å—Ä–µ–¥—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ &lt;em&gt;MPLAB&lt;/em&gt;. –¢–µ–∫—É—â–∏–π &lt;em&gt;MPLAB X IDE v2.05&lt;/em&gt; –Ω–∞–ø–∏—Å–∞–Ω –Ω–∞ &lt;em&gt;Java&lt;/em&gt; –∏ –ø–æ—ç—Ç–æ–º—É —ç–º—É–ª—è—Ç–æ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—á–µ–Ω—å –Ω–µ–±—ã—Å—Ç—Ä–æ, –Ω—É –º–∞–µ–º–æ —Ç–µ —à–æ –º–∞–µ–º–æ:&lt;/p&gt;
&lt;p&gt;&lt;em&gt;test/simulation/mplab_sim_instructions.txt&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Device PIC24EP64MC206
Hwtool SIM -p
Program ./build/TestBuild.out
Run
Quit
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;em&gt;test/simulation/sim_test_fixture.rb&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="no"&gt;OUT_FILE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;test/simulation/out.txt&amp;quot;&lt;/span&gt;
&lt;span class="no"&gt;File&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;delete&lt;/span&gt; &lt;span class="no"&gt;OUT_FILE&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="no"&gt;File&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;exists?&lt;/span&gt; &lt;span class="no"&gt;OUT_FILE&lt;/span&gt;

&lt;span class="n"&gt;pipe&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="no"&gt;IO&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;popen&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;/opt/microchip/mplabx/mplab_ide/bin/mdb.sh &amp;quot;&lt;/span&gt;   &lt;span class="p"&gt;\&lt;/span&gt;
                &lt;span class="s2"&gt;&amp;quot;./test/simulation/mplab_sim_instructions.txt &amp;quot;&lt;/span&gt; &lt;span class="p"&gt;\&lt;/span&gt;
                &lt;span class="s2"&gt;&amp;quot;&amp;gt; &lt;/span&gt;&lt;span class="si"&gt;#{&lt;/span&gt;&lt;span class="no"&gt;OUT_FILE&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="nb"&gt;trap&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;INT&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="no"&gt;Process&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;kill&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;KILL&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;pipe&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pid&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt; &lt;span class="nb"&gt;exit&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="no"&gt;Process&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;wait&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;pipe&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pid&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="no"&gt;File&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;exists?&lt;/span&gt; &lt;span class="no"&gt;OUT_FILE&lt;/span&gt;
    &lt;span class="n"&gt;file_contents&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="no"&gt;File&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;read&lt;/span&gt; &lt;span class="no"&gt;OUT_FILE&lt;/span&gt;
    &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="n"&gt;file_contents&lt;/span&gt;
&lt;span class="k"&gt;else&lt;/span&gt;
    &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;\&lt;/span&gt;
          &lt;span class="s2"&gt;&amp;quot;! Program was not simulated ? !&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;\&lt;/span&gt;
          &lt;span class="s2"&gt;&amp;quot;!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!&amp;quot;&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–§–∏–Ω–∞–ª—å–Ω—ã–π –∞–∫–∫–æ—Ä–¥:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ rake test:all
&lt;span class="c1"&gt;# -------------------------&lt;/span&gt;
&lt;span class="c1"&gt;# OVERALL UNIT TEST SUMMARY&lt;/span&gt;
&lt;span class="c1"&gt;# -------------------------&lt;/span&gt;
&lt;span class="c1"&gt;# TESTED:  5&lt;/span&gt;
&lt;span class="c1"&gt;# PASSED:  5&lt;/span&gt;
&lt;span class="c1"&gt;# FAILED:  0&lt;/span&gt;
&lt;span class="c1"&gt;# IGNORED: 0&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ò—Å—Ö–æ–¥–Ω–∏–∫–∏ &lt;a href="http://proiot.ru/blog/posts/2014/03/29/tdd-na-urovne-mikrokontrollerov-svezhii-vzgliad/PIC_Demo.zip"&gt;—Ç—É—Ç&lt;/a&gt;.&lt;/p&gt;</content><category term="TDD"></category><category term="CMock"></category><category term="Unity"></category></entry><entry><title>–ë–µ—Å–ø–ª–∞—Ç–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –ø–æ GSM —Å–æ—Ç–∞–º</title><link href="http://proiot.ru/blog/posts/2013/07/31/besplatnoe-opredelenie-koordinat-po-gsm-sotam/" rel="alternate"></link><published>2013-07-31T00:00:00+03:00</published><updated>2013-07-31T00:00:00+03:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2013-07-31:/blog/posts/2013/07/31/besplatnoe-opredelenie-koordinat-po-gsm-sotam/</id><summary type="html">&lt;p&gt;–°–∫–æ–ª—å–∫–æ —Ä–∞–∑ –¥–æ–≤–æ–¥–∏–ª–æ—Å—å —Å–ª—ã—à–∞—Ç—å, —á—Ç–æ –∫—Ä–∏–º–∏–Ω–∞–ª—å–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –∏–ª–∏ –ø—Ä–∞–≤–æ–æ—Ö—Ä–∞–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ—Ä–≥–∞–Ω—ã –º–æ–≥—É—Ç –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –ø–æ –µ–≥–æ –Ω–æ–º–µ—Ä—É. –≠—Ç–æ –ø—Ä–∞–≤–¥–∞ :) –ò–∑–Ω–∞—á–∞–ª—å–Ω–æ GSM —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã –Ω–µ —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞–ª–∏—Å—å –¥–ª—è —ç—Ç–∏—Ö —Ü–µ–ª–µ–π, –ø–æ—ç—Ç–æ–º—É, –±–µ–∑—É—Å–ª–æ–≤–Ω–æ, &lt;em&gt;—Ç–æ—á–Ω–æ—Å—Ç—å&lt;/em&gt; –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –∫–æ–Ω–µ—á–Ω–æ –∂–µ —É—Å—Ç—É–ø–∞–µ—Ç –≤—Å–µ–º –∏–∑–≤–µ—Å—Ç–Ω—ã–º GPS / –ì–õ–û–ù–ê–°–°. –í –≥—É—Å—Ç–æ–Ω–∞—Å–µ–ª–µ–Ω–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö, –≥–¥–µ –ø–ª–æ—Ç–Ω–æ—Å—Ç—å –±–∞–∑–æ–≤—ã—Ö —Å—Ç–∞–Ω—Ü–∏–π (—Ç–∞–∫–∏–µ –∑–∞–∫—Ä—ã—Ç—ã–µ –±—É–¥–∫–∏ —Å ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;p&gt;–°–∫–æ–ª—å–∫–æ —Ä–∞–∑ –¥–æ–≤–æ–¥–∏–ª–æ—Å—å —Å–ª—ã—à–∞—Ç—å, —á—Ç–æ –∫—Ä–∏–º–∏–Ω–∞–ª—å–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –∏–ª–∏ –ø—Ä–∞–≤–æ–æ—Ö—Ä–∞–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ—Ä–≥–∞–Ω—ã –º–æ–≥—É—Ç –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –ø–æ –µ–≥–æ –Ω–æ–º–µ—Ä—É. –≠—Ç–æ –ø—Ä–∞–≤–¥–∞ :) –ò–∑–Ω–∞—á–∞–ª—å–Ω–æ GSM —Å—Ç–∞–Ω–¥–∞—Ä—Ç—ã –Ω–µ —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞–ª–∏—Å—å –¥–ª—è —ç—Ç–∏—Ö —Ü–µ–ª–µ–π, –ø–æ—ç—Ç–æ–º—É, –±–µ–∑—É—Å–ª–æ–≤–Ω–æ, &lt;em&gt;—Ç–æ—á–Ω–æ—Å—Ç—å&lt;/em&gt; –ø–æ–ª—É—á–µ–Ω–Ω—ã—Ö –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –∫–æ–Ω–µ—á–Ω–æ –∂–µ —É—Å—Ç—É–ø–∞–µ—Ç –≤—Å–µ–º –∏–∑–≤–µ—Å—Ç–Ω—ã–º GPS / –ì–õ–û–ù–ê–°–°. –í –≥—É—Å—Ç–æ–Ω–∞—Å–µ–ª–µ–Ω–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö, –≥–¥–µ –ø–ª–æ—Ç–Ω–æ—Å—Ç—å –±–∞–∑–æ–≤—ã—Ö —Å—Ç–∞–Ω—Ü–∏–π (—Ç–∞–∫–∏–µ –∑–∞–∫—Ä—ã—Ç—ã–µ –±—É–¥–∫–∏ —Å –∞–Ω—Ç–µ–Ω–Ω–∞–º–∏) –±–æ–ª—å—à–∞—è —Ç–æ—á–Ω–æ—Å—Ç—å –ø–æ–≤—ã—à–∞–µ—Ç—Å—è, –∞ –≤ —Å–µ–ª—å—Å–∫–æ–π –º–µ—Å—Ç–Ω–æ—Å—Ç–∏, –Ω–∞ —Ç—Ä–∞—Å—Å–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è. –ù–µ –æ—Å–æ–±–æ —É–≥–ª—É–±–ª—è—è—Å—å –≤ —Ç–µ–æ—Ä–∏—é –ø—Ä–µ–¥–ª–∞–≥–∞—é –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∫–∞–∫ –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è –º–æ–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ —Ä—É—á–∫–∞–º–∏ —Å –ø–æ–º–æ—â—å—é –æ–±—ã—á–Ω—ã—Ö AT-–∫–æ–º–∞–Ω–¥.&lt;/p&gt;
&lt;p&gt;–ò—Ç–∞–∫, —É –∫–∞–∂–¥–æ–≥–æ GSM –º–æ–¥—É–ª—è, –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –≤ —Å–µ—Ç–∏ –º–æ–±–∏–ª—å–Ω–æ–≥–æ –æ–ø–µ—Ä–∞—Ç–æ—Ä–∞, –≤—Å–µ–≥–¥–∞ –º–æ–∂–Ω–æ –≤–ø–æ–ª–Ω–µ –ª–µ–≥–∞–ª—å–Ω–æ –∑–∞–ø—Ä–æ—Å–∏—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã: &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://ru.wikipedia.org/wiki/Mobile_Country_Code" rel="nofollow"&gt;MCC - Mobile Country Code&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://ru.wikipedia.org/wiki/Mobile_Network_Code" rel="nofollow"&gt;MNC - Mobile Network Code&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://ru.wikipedia.org/wiki/Cell_Global_Identity" rel="nofollow"&gt;LAC - Location Area Code&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://ru.wikipedia.org/wiki/Cell_Global_Identity" rel="nofollow"&gt;CID - Cell ID&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;–î–ª—è —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤ –º–æ–∂–Ω–æ –∑–∞–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å –ª—é–±–æ–π –º–æ–±–∏–ª—å–Ω—ã–π —Ç–µ–ª–µ—Ñ–æ–Ω (–ª–∏–±–æ GSM –º–æ–¥—É–ª—å —Ç–∏–ø–∞ sim900, –µ—Å–ª–∏ –í—ã –¥—Ä—É–∂–∏—Ç–µ —Å –ø–∞—è–ª—å–Ω–∏–∫–æ–º), –∫–æ—Ç–æ—Ä—ã–π –∏–º–µ–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ –ü–ö. –ü–æ—Å–∫–æ–ª—å–∫—É –æ—Å–æ–±–æ–≥–æ –∂–µ–ª–∞–Ω–∏—è –≤–æ–∑–∏—Ç—å—Å—è —Å –ø—Ä–æ–≤–æ–¥–∞–º–∏ –Ω–µ—Ç—É, —Å–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± —Å–æ–µ–¥–∏–Ω–∏—Ç—å —Ç–µ–ª–µ—Ñ–æ–Ω –∏ –∫–æ–º–ø—å—é—Ç–µ—Ä - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Bluetooth. –ü–æ—Å–º–æ—Ç—Ä–∏–º –∫–∞–∫–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –¥–æ—Å—Ç—É–ø–Ω—ã –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ hcitool scan
Scanning ...
    &lt;span class="m"&gt;00&lt;/span&gt;:11:22:33:44:55   Nokia &lt;span class="m"&gt;6300&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ò–º–µ—è MAC –∞–¥—Ä–µ—Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞, –º–æ–∂–µ–º –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–ø–∏—Å–æ–∫ —Å–µ—Ä–≤–∏—Å–æ–≤ (–≤—ã–≤–æ–¥ –∫–æ–º–∞–Ω–¥—ã –ø–æ–∫–∞–∑–∞–Ω –Ω–µ –≤–µ—Å—å):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ sdptool browse &lt;span class="m"&gt;00&lt;/span&gt;:11:22:33:44:55
Browsing &lt;span class="m"&gt;00&lt;/span&gt;:11:22:33:44:55 ...
......
Service Name: COM &lt;span class="m"&gt;1&lt;/span&gt;
Service RecHandle: 0x10002
Service Class ID List:
  &lt;span class="s2"&gt;&amp;quot;Serial Port&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;0x1101&lt;span class="o"&gt;)&lt;/span&gt;
Protocol Descriptor List:
  &lt;span class="s2"&gt;&amp;quot;L2CAP&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;0x0100&lt;span class="o"&gt;)&lt;/span&gt;
  &lt;span class="s2"&gt;&amp;quot;RFCOMM&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;0x0003&lt;span class="o"&gt;)&lt;/span&gt;
    Channel: &lt;span class="m"&gt;3&lt;/span&gt;
Language Base Attr List:
  code_ISO639: 0x656e
  encoding:    0x6a
  base_offset: 0x100
......
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–¶–µ–ø–ª—è–µ–º—Å—è –∫ &lt;code&gt;Channel: 3&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ rfcomm connect &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="m"&gt;00&lt;/span&gt;:11:22:33:44:55 &lt;span class="m"&gt;3&lt;/span&gt;
Connected /dev/rfcomm0 to &lt;span class="m"&gt;00&lt;/span&gt;:11:22:33:44:55 on channel &lt;span class="m"&gt;3&lt;/span&gt;
Press CTRL-C &lt;span class="k"&gt;for&lt;/span&gt; hangup
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–¢–µ–ø–µ—Ä—å –º—ã –º–æ–∂–µ–º –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ–º—É –ø–æ—Ä—Ç—É &lt;code&gt;/dev/rfcomm0&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# cu -l /dev/rfcomm0&lt;/span&gt;
&lt;span class="c1"&gt;# screen /dev/rfcomm0&lt;/span&gt;
&lt;span class="c1"&gt;# minicom&lt;/span&gt;
~$ putty -serial /dev/rfcomm0
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ &lt;code&gt;Putty&lt;/code&gt; –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –æ–∫–æ—à–∫–æ, –≤ –∫–æ—Ç–æ—Ä–æ–º –º–æ–∂–Ω–æ –ø–∏—Å–∞—Ç—å AT-–∫–æ–º–∞–Ω–¥—ã:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;# ATE1&lt;/span&gt;
AT
OK
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–û—Ç–ª–∏—á–Ω–æ. –ù–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É—é—Ç –¥–≤–µ AT-–∫–æ–º–∞–Ω–¥—ã: &lt;code&gt;AT+COPS&lt;/code&gt; –∏ &lt;code&gt;AT+CREG&lt;/code&gt;, –∫–æ—Ç–æ—Ä—ã–µ –∏–º–µ—é—Ç –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π —Ñ–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–∞ - –∑–∞–¥–∞—ë–º —Ç–æ—Ç, –∫–æ—Ç–æ—Ä—ã–π —É—Å—Ç—Ä–æ–∏—Ç:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;AT+COPS&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;,2
OK
AT+CREG&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;2&lt;/span&gt;
OK
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–í—Å—ë –≥–æ—Ç–æ–≤–æ - –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º MCC, MNC, LAC, CID:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;AT+COPS?
+COPS: &lt;span class="m"&gt;0&lt;/span&gt;,2,&lt;span class="s2"&gt;&amp;quot;25501&amp;quot;&lt;/span&gt;,0

OK
AT+CREG?
+CREG: &lt;span class="m"&gt;2&lt;/span&gt;,1,&lt;span class="s2"&gt;&amp;quot;8174&amp;quot;&lt;/span&gt;,&lt;span class="s2"&gt;&amp;quot;EA45&amp;quot;&lt;/span&gt;

OK
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–í —Å–µ—Ç–∏ &lt;a href="http://lbs.ultrastar.ru/" rel="nofollow"&gt;–ø–æ–ª–Ω–æ&lt;/a&gt; –æ–Ω–ª–∞–π–Ω —Å–µ—Ä–≤–∏—Å–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–∑–≤–æ–ª—è—é—Ç –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å MCC=255, MNC=01, LAC=8174, CID=EA45 –≤ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã Latitude, Longitude, –Ω–æ, –∫–∞–∫ –≤—Å–µ–≥–¥–∞, –ì—É–≥–æ–ª—å –∑–Ω–∞–µ—Ç –≤—Å—ë:&lt;/p&gt;
&lt;p&gt;&lt;em&gt;pygsm.py&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="ch"&gt;#!/usr/bin/python&lt;/span&gt;

&lt;span class="n"&gt;MMAP_URL&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;http://www.google.com/glm/mmap&amp;#39;&lt;/span&gt;
&lt;span class="n"&gt;GOOGLE_MAPS_URL&lt;/span&gt;  &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;http://maps.google.com&amp;#39;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;shlex&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;csv&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;urllib2&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;serial&lt;/span&gt; &lt;span class="c1"&gt;# pip install pyserial&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;time&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;fetch_cell_from_serial&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;comm&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;/dev/rfcomm0&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;

    &lt;span class="c1"&gt;# open serial and setup GSM module&lt;/span&gt;

    &lt;span class="n"&gt;ser&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;serial&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Serial&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;comm&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;ser&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;write&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;AT+COPS=0,2&lt;/span&gt;&lt;span class="se"&gt;\r&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;ser&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;write&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;AT+CREG=2&lt;/span&gt;&lt;span class="se"&gt;\r&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="c1"&gt;# Get MCC and MNC&lt;/span&gt;

    &lt;span class="n"&gt;ser&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;write&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;AT+COPS?&lt;/span&gt;&lt;span class="se"&gt;\r&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sleep&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;out&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;ser&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;read&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ser&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;inWaiting&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;
    &lt;span class="c1"&gt;# out &amp;gt;&amp;gt;&amp;gt; &amp;#39;AT+COPS?\r\r\n+COPS: 0,2,&amp;quot;25501&amp;quot;,0\r\n\r\nOK\r\n&amp;#39;&lt;/span&gt;

    &lt;span class="n"&gt;tmp&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;shlex&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;split&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;out&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; 
    &lt;span class="c1"&gt;# tmp &amp;gt;&amp;gt;&amp;gt; [&amp;#39;AT+COPS?&amp;#39;, &amp;#39;+COPS:&amp;#39;, &amp;#39;0,2,25501,0&amp;#39;, &amp;#39;OK&amp;#39;]&lt;/span&gt;
    &lt;span class="n"&gt;tmp&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;tmp&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;tmp&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;index&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;+COPS:&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="c1"&gt;# &amp;#39;0,2,25501,0&amp;#39;&lt;/span&gt;
    &lt;span class="n"&gt;tmp&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;csv&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;reader&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="n"&gt;tmp&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
    &lt;span class="n"&gt;tmp&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;row&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;row&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;tmp&lt;/span&gt;&lt;span class="p"&gt;][&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="c1"&gt;# [&amp;#39;0&amp;#39;, &amp;#39;2&amp;#39;, &amp;#39;25501&amp;#39;, &amp;#39;0&amp;#39;]&lt;/span&gt;
    &lt;span class="n"&gt;mcc_mnc_dec&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tmp&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="mi"&gt;16&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="c1"&gt;# 152833&lt;/span&gt;

    &lt;span class="c1"&gt;# Get LAC and CID&lt;/span&gt;

    &lt;span class="n"&gt;ser&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;write&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;AT+CREG?&lt;/span&gt;&lt;span class="se"&gt;\r&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sleep&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;out&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;ser&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;read&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ser&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;inWaiting&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;
    &lt;span class="c1"&gt;# out &amp;gt;&amp;gt;&amp;gt; &amp;#39;AT+CREG?\r\r\n+CREG: 2,1,&amp;quot;8174&amp;quot;,&amp;quot;EA45&amp;quot;\r\n\r\nOK\r\n&amp;#39;&lt;/span&gt;

    &lt;span class="n"&gt;tmp&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;shlex&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;split&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;out&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="c1"&gt;# tmp &amp;gt;&amp;gt;&amp;gt; [&amp;#39;AT+CREG?&amp;#39;, &amp;#39;+CREG:&amp;#39;, &amp;#39;2,1,8174,EA45&amp;#39;, &amp;#39;OK&amp;#39;]&lt;/span&gt;
    &lt;span class="n"&gt;tmp&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;tmp&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;tmp&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;index&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;+CREG:&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="c1"&gt;# &amp;#39;2,1,8174,E76A&amp;#39;&lt;/span&gt;
    &lt;span class="n"&gt;tmp&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;csv&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;reader&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="n"&gt;tmp&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
    &lt;span class="n"&gt;tmp&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;row&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;row&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;tmp&lt;/span&gt;&lt;span class="p"&gt;][&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="c1"&gt;# [&amp;#39;2&amp;#39;, &amp;#39;1&amp;#39;, &amp;#39;8174&amp;#39;, &amp;#39;E76A&amp;#39;]&lt;/span&gt;

    &lt;span class="n"&gt;lac_dec&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tmp&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="mi"&gt;16&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="c1"&gt;# 33140&lt;/span&gt;
    &lt;span class="n"&gt;cid_dec&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tmp&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="mi"&gt;16&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="c1"&gt;# 59242&lt;/span&gt;

    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;cid_dec&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;lac_dec&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;mcc_mnc_dec&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;get_location_by_cell&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cid_dec&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;lac_dec&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;mcc_mnc_dec&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;

    &lt;span class="c1"&gt;# Use Google to get coordinates&lt;/span&gt;

    &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;000E00000000000000000000000000001B0000000000000000000000030000&amp;#39;&lt;/span&gt;
    &lt;span class="n"&gt;h1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;h2&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;divmod&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;mcc_mnc_dec&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;100&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="c1"&gt;# 152833 &amp;gt;&amp;gt;&amp;gt; (1528, 33)&lt;/span&gt;
    &lt;span class="n"&gt;b&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;hex&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cid_dec&lt;/span&gt;&lt;span class="p"&gt;)[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;:]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;zfill&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="nb"&gt;hex&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lac_dec&lt;/span&gt;&lt;span class="p"&gt;)[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;:]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;zfill&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="c1"&gt;# b &amp;gt;&amp;gt;&amp;gt; &amp;#39;0000e76a00008174&amp;#39;&lt;/span&gt;
    &lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;hex&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;h1&lt;/span&gt;&lt;span class="p"&gt;)[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;:]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;zfill&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="nb"&gt;hex&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;h2&lt;/span&gt;&lt;span class="p"&gt;)[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;:]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;zfill&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="c1"&gt;# c &amp;gt;&amp;gt;&amp;gt; &amp;#39;000005f800000021&amp;#39;&lt;/span&gt;

    &lt;span class="n"&gt;data&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;FFFFFFFF00000000&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;decode&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;hex&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;response&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;urllib2&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;urlopen&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;MMAP_URL&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;res_hex&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;response&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;read&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;encode&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;hex&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="c1"&gt;# res_hex &amp;gt;&amp;gt;&amp;gt; &amp;#39;000e1b0000000002e5bfbd020f49a50000097b0000004b0000&amp;#39;&lt;/span&gt;

    &lt;span class="n"&gt;latitude&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;float&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;res_hex&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;14&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;22&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="mi"&gt;16&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="mi"&gt;1000000&lt;/span&gt; &lt;span class="c1"&gt;# 48.611261&lt;/span&gt;
    &lt;span class="n"&gt;longitude&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;float&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;res_hex&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;22&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;30&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="mi"&gt;16&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="mi"&gt;1000000&lt;/span&gt; &lt;span class="c1"&gt;# 34.556325&lt;/span&gt;

    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;latitude&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;longitude&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;format_googlemaps_link&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;latitude&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;longitude&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s1"&gt;?q=&lt;/span&gt;&lt;span class="si"&gt;%f&lt;/span&gt;&lt;span class="s1"&gt;,&lt;/span&gt;&lt;span class="si"&gt;%f&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;GOOGLE_MAPS_URL&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;latitude&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;longitude&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;


&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="vm"&gt;__name__&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;__main__&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;cid_dec&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;lac_dec&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;mcc_mnc_dec&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;fetch_cell_from_serial&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="n"&gt;lat&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;lon&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;get_location_by_cell&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cid_dec&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;lac_dec&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;mcc_mnc_dec&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;print&lt;/span&gt; &lt;span class="n"&gt;format_googlemaps_link&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;lat&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;lon&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–°–∫—Ä–∏–ø—Ç –Ω–∞–ø–∏—Å–∞–Ω –Ω–∞ –ø–∏—Ç–æ–Ω–µ –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç &lt;code&gt;pyserial&lt;/code&gt; –¥–ª—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ —Å –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–º –ø–æ—Ä—Ç–æ–º.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ python pygsm.py 
http://maps.google.com?q&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;48&lt;/span&gt;.611261,34.556325
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;–ü–û–õ–ï–ó–ù–´–ï –¢–†–Æ–ö–ò&lt;/h3&gt;
&lt;p&gt;–î–∞–Ω–Ω—ã–µ –æ–±–º–µ–Ω–∞ –º–æ–∂–Ω–æ —Å–Ω–∏—Ñ–∏—Ç—å:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="c1"&gt;#apt-get install socat&lt;/span&gt;
~$ socat -d -v -x &lt;span class="se"&gt;\&lt;/span&gt;
PTY,link&lt;span class="o"&gt;=&lt;/span&gt;/dev/ttyNONGREEDY,raw,perm&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;777&lt;/span&gt;,echo&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
/dev/rfcomm0,raw
&lt;span class="c1"&gt;#echo -e &amp;#39;AT\r&amp;#39; &amp;gt; /dev/ttyNONGREEDY&lt;/span&gt;
&amp;gt; &lt;span class="m"&gt;2014&lt;/span&gt;/01/11 &lt;span class="m"&gt;11&lt;/span&gt;:34:08.565031  &lt;span class="nv"&gt;length&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;4&lt;/span&gt; &lt;span class="nv"&gt;from&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="nv"&gt;to&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;3&lt;/span&gt;
 &lt;span class="m"&gt;41&lt;/span&gt; &lt;span class="m"&gt;54&lt;/span&gt; 0d 0a                                      AT..
--
&amp;lt; &lt;span class="m"&gt;2014&lt;/span&gt;/01/11 &lt;span class="m"&gt;11&lt;/span&gt;:34:08.743405  &lt;span class="nv"&gt;length&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;6&lt;/span&gt; &lt;span class="nv"&gt;from&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="nv"&gt;to&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;5&lt;/span&gt;
 0d 0a                                            ..
 4f 4b 0d 0a                                      OK..
--
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ü–æ—Ä–æ–π –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–¥–∞—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫—É —Å–∫–æ—Ä–æ—Å—Ç—å:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ socat -d -v -x &lt;span class="se"&gt;\&lt;/span&gt;
PTY,link&lt;span class="o"&gt;=&lt;/span&gt;/dev/ttyNONGREEDY,raw,perm&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;777&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
/dev/ttyUSB0,raw,b115200
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –ø—Ä–æ–±—Ä–∞—Å–∏—Ç—å –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π –ø–æ—Ä—Ç –ø–æ —Å–µ—Ç–∏ –æ—Ç –æ–¥–Ω–æ–≥–æ –∫–æ–º–ø–∞ –∫ –¥—Ä—É–≥–æ–º—É:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ wget -O tcp_serial_redirect.py &lt;span class="se"&gt;\&lt;/span&gt;
http://sourceforge.net/p/pyserial/code/HEAD/tree/trunk/&lt;span class="se"&gt;\&lt;/span&gt;
pyserial/examples/tcp_serial_redirect.py?format&lt;span class="o"&gt;=&lt;/span&gt;raw
~$ python tcp_serial_redirect.py -b &lt;span class="m"&gt;115200&lt;/span&gt; -p /dev/rfcomm0 --spy
&lt;span class="c1"&gt;#ifconfig | grep -o &amp;#39;inet addr:[^ ]*&amp;#39;&lt;/span&gt;
&lt;span class="c1"&gt;#inet addr:192.168.1.246&lt;/span&gt;

&lt;span class="c1"&gt;# –Ω–∞ –¥—Ä—É–≥–æ–º –∫–æ–º–ø–µ&lt;/span&gt;
~$ socat PTY,link&lt;span class="o"&gt;=&lt;/span&gt;/dev/rfcomm0,perm&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;777&lt;/span&gt; TCP:192.168.1.246:7777
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–≠–º—É–ª–∏—Ä–æ–≤–∞—Ç—å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –º–æ–∂–Ω–æ —Ç–∞–∫:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ socat -d -v -x &lt;span class="se"&gt;\&lt;/span&gt;
PTY,link&lt;span class="o"&gt;=&lt;/span&gt;/dev/rfcomm0,raw,perm&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;777&lt;/span&gt;,echo&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
PTY,link&lt;span class="o"&gt;=&lt;/span&gt;/dev/ttyNONGREEDY,raw,perm&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;777&lt;/span&gt;,echo&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;
&lt;span class="c1"&gt;# echo -e &amp;#39;AT\r&amp;#39; &amp;gt; /dev/rfcomm0&lt;/span&gt;
&amp;gt; &lt;span class="m"&gt;2014&lt;/span&gt;/01/11 &lt;span class="m"&gt;12&lt;/span&gt;:31:37.585420  &lt;span class="nv"&gt;length&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;4&lt;/span&gt; &lt;span class="nv"&gt;from&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="nv"&gt;to&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;3&lt;/span&gt;
 &lt;span class="m"&gt;41&lt;/span&gt; &lt;span class="m"&gt;54&lt;/span&gt; 0d 0a                                      AT..
--
&amp;lt; &lt;span class="m"&gt;2014&lt;/span&gt;/01/11 &lt;span class="m"&gt;12&lt;/span&gt;:31:37.586518  &lt;span class="nv"&gt;length&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;7&lt;/span&gt; &lt;span class="nv"&gt;from&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="nv"&gt;to&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;6&lt;/span&gt;
 &lt;span class="m"&gt;41&lt;/span&gt; &lt;span class="m"&gt;54&lt;/span&gt; 0d 0a                                      AT..
 4f 4b 0a                                         OK.
--

~$ cat /dev/ttyNONGREEDY &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="nb"&gt;read&lt;/span&gt; val&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="k"&gt;do&lt;/span&gt; &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="nv"&gt;$val&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="nv"&gt;$val&lt;/span&gt; &amp;gt; /dev/ttyNONGREEDY &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;OK&amp;#39;&lt;/span&gt; &amp;gt; /dev/ttyNONGREEDY&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="k"&gt;done&lt;/span&gt;
AT
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;P.S. –°–æ–≤—Å–µ–º –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –∏–º–µ—Ç—å –ü–ö —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å MCC, MNC, LAC, CID —Å —Ç–µ–ª–µ—Ñ–æ–Ω–∞ - –ø—Ä–æ—Å—Ç–æ —Ç–∞–∫ —É–¥–æ–±–Ω–µ–µ –¥–ª—è —Ç–µ–∫—É—â–µ–π –∑–∞–¥–∞—á–∏. –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–µ–π –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç API –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –ø–æ–¥–æ–±–Ω–æ–≥–æ —Ä–æ–¥–∞ –¥–∞–Ω–Ω—ã–º –∏–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π, –∑–∞–ø—É—Å–∫–∞–µ–º—ã—Ö –≤ –∏—Ö —Ç–µ–ª–µ—Ñ–æ–Ω–∞—Ö. –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ –º–æ–∂–Ω–æ (–∏ –¥–∞–∂–µ –Ω—É–∂–Ω–æ) –æ–±–æ–π—Ç–∏—Å—å –±–µ–∑ AT –∫–æ–º–∞–Ω–¥. –í–æ—Ç –Ω–∞–ø—Ä–∏–º–µ—Ä API –¥–ª—è –º–∏–¥–ª–µ—Ç–æ–≤ &lt;a href="http://developer.nokia.com/Community/Wiki/CS000947_-_Getting_Cell_ID_in_Java_ME" rel="nofollow"&gt;Nokia&lt;/a&gt; –∏ —Ç.–¥.&lt;/p&gt;</content><category term="GSM"></category><category term="Google Maps"></category><category term="Bluetooth"></category><category term="socat"></category></entry><entry><title>–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –æ–ø—Ä–µ–¥–µ–ª—å —è–∑—ã–∫–∞ –≤ Apache Tika</title><link href="http://proiot.ru/blog/posts/2013/01/21/avtomaticheskii-opredel-iazyka-v-apache-tika/" rel="alternate"></link><published>2013-01-21T00:00:00+02:00</published><updated>2013-01-21T00:00:00+02:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2013-01-21:/blog/posts/2013/01/21/avtomaticheskii-opredel-iazyka-v-apache-tika/</id><summary type="html">&lt;p&gt;&lt;a href="http://tika.apache.org/" rel="nofollow"&gt;Apache Tika&lt;/a&gt; - —ç—Ç–æ –∫—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω—ã–π –Ω–∞–±–æ—Ä –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤, –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–π –Ω–∞ &lt;code&gt;Java&lt;/code&gt; –¥–ª—è –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏ –∞–Ω–∞–ª–∏–∑–∞ —Ç–µ–∫—Å—Ç–æ–≤–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ - –≤—ã–¥–µ–ª–µ–Ω–∏—è –º–µ—Ç–∞-–¥–∞–Ω–Ω—ã—Ö, –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ –∏–∑ —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ —Ñ–∞–π–ª–æ–≤, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —è–∑—ã–∫–∞ —Ç–µ–∫—Å—Ç–∞ –∏ —Ç.–¥. –£–º–µ–µ—Ç —ç—Ç–∞ —à—Ç—É–∫–∞ –¥–µ–ª–∞—Ç—å –º–Ω–æ–≥–æ –≤—Å–µ–≥–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–≥–æ, –Ω–æ –º—ã —Å–∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∏—Ä—É–µ–º—Å—è –Ω–∞ –ø—Ä–æ—Ü–µ—Å—Å–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ &lt;a href="http://en.wikipedia.org/wiki/N-gram" rel="nofollow"&gt;N-gram&lt;/a&gt;-—Ñ–∞–π–ª–æ–≤ –¥–ª—è –∏–Ω—Ç–µ—Ä–µ—Å—É—é—â–∏—Ö —è–∑—ã–∫–æ–≤, –Ω–µ ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a href="http://tika.apache.org/" rel="nofollow"&gt;Apache Tika&lt;/a&gt; - —ç—Ç–æ –∫—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω—ã–π –Ω–∞–±–æ—Ä –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤, –Ω–∞–ø–∏—Å–∞–Ω–Ω—ã–π –Ω–∞ &lt;code&gt;Java&lt;/code&gt; –¥–ª—è –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏ –∞–Ω–∞–ª–∏–∑–∞ —Ç–µ–∫—Å—Ç–æ–≤–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ - –≤—ã–¥–µ–ª–µ–Ω–∏—è –º–µ—Ç–∞-–¥–∞–Ω–Ω—ã—Ö, –∏–∑–≤–ª–µ—á–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ –∏–∑ —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ —Ñ–∞–π–ª–æ–≤, –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —è–∑—ã–∫–∞ —Ç–µ–∫—Å—Ç–∞ –∏ —Ç.–¥. –£–º–µ–µ—Ç —ç—Ç–∞ —à—Ç—É–∫–∞ –¥–µ–ª–∞—Ç—å –º–Ω–æ–≥–æ –≤—Å–µ–≥–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ–≥–æ, –Ω–æ –º—ã —Å–∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∏—Ä—É–µ–º—Å—è –Ω–∞ –ø—Ä–æ—Ü–µ—Å—Å–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ &lt;a href="http://en.wikipedia.org/wiki/N-gram" rel="nofollow"&gt;N-gram&lt;/a&gt;-—Ñ–∞–π–ª–æ–≤ –¥–ª—è –∏–Ω—Ç–µ—Ä–µ—Å—É—é—â–∏—Ö —è–∑—ã–∫–æ–≤, –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö Tika –∏–∑ –∫–æ—Ä–æ–±–∫–∏, —á—Ç–æ–±—ã —Å –∏—Ö –ø–æ–º–æ—â—å—é –º–æ–∂–Ω–æ –±—ã–ª–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å —è–∑—ã–∫–∏ –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤.
–î–ª—è –Ω–∞—á–∞–ª–∞ –±—ã–ª–æ –±—ã –Ω–µ–ø–ª–æ—Ö–æ —Å–∫–∞—á–∞—Ç—å –∏ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–∞–º–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ &lt;a href="http://www.apache.org/dyn/closer.cgi/tika/tika-app-1.2.jar" rel="nofollow"&gt;tika-app-1.2.jar&lt;/a&gt; ~ 27 –ú–ë. –ö–∞–∫ –∏ –ª—é–±–æ–µ –¥—Ä—É–≥–æ–µ &lt;code&gt;Java&lt;/code&gt; –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ &lt;a href="http://tika.apache.org/" rel="nofollow"&gt;Tika&lt;/a&gt; –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–º —Å–ø–æ—Å–æ–±–æ–º &lt;code&gt;java -jar tika-app-1.2.jar --help&lt;/code&gt;, —Ö–æ—Ç—è –≤ &lt;em&gt;Linux&lt;/em&gt; –º–æ–∂–Ω–æ –µ—â—ë –ø—Ä–æ—â–µ:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ java -version
~$ chmod +x tika-app-1.2.jar
~$ ./tika-app-1.2.jar --help
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ï—Å–ª–∏ –Ω–∞ –º–∞—à–∏–Ω–µ —Å—Ç–æ–∏—Ç &lt;code&gt;Java&lt;/code&gt;, –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å–ª–µ–¥—É–µ—Ç –æ–∂–∏–¥–∞—Ç—å –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö –∫–æ–º–∞–Ω–¥. –ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º –º—ã —Ö–æ—Ç–∏–º –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–ø–∏—Å–æ–∫ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö —Ñ–æ—Ä–º–∞—Ç–æ–≤ –≤—Ö–æ–¥–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ ./tika-app-1.2.jar --list-supported-types
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –±—É–¥–µ—Ç –≤—ã–≤–µ–¥–µ–Ω —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫, –≤ –∫–æ—Ç–æ—Ä–æ–º –≤—ã–≤–æ–¥–∏—Ç—Å—è –ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω–æ —Ç–∞–∫–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ, —Ç–æ–ª—å–∫–æ –Ω–∞–º–Ω–æ–≥–æ –±–æ–ª—å—à–µ:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;application/pdf
  alias:     application/x-pdf
  supertype: application/octet-stream
  parser:    org.apache.tika.parser.DefaultParser
application/msword
  alias:     application/vnd.ms-word
  supertype: application/x-tika-msoffice
  parser:    org.apache.tika.parser.DefaultParser
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–î–∞–≤–∞–π—Ç–µ —É–±–µ—Ä—ë–º –≤—Å–µ —Å—Ç—Ä–æ—á–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è —Å –ø—Ä–æ–±–µ–ª–∞, –∞ –∑–∞—Ç–µ–º –ø–æ—Å—á–∏—Ç–∞–µ–º —Å–∫–æ–ª—å–∫–æ –∏—Ö –æ—Å—Ç–∞–ª–æ—Å—å:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ ./tika-app-1.2.jar --list-supported-types &lt;span class="p"&gt;|&lt;/span&gt; sed &lt;span class="s1"&gt;&amp;#39;/^ /d&amp;#39;&lt;/span&gt;
~$ ./tika-app-1.2.jar --list-supported-types &lt;span class="p"&gt;|&lt;/span&gt; sed &lt;span class="s1"&gt;&amp;#39;/^ /d&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; wc -l
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º &lt;a href="http://tika.apache.org/" rel="nofollow"&gt;Tika&lt;/a&gt; –≤–µ—Ä—Å–∏—è 1.2 –∏–∑ –∫–æ—Ä–æ–±–∫–∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç 1372 —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–∞. &lt;/p&gt;
&lt;p&gt;–í —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏ &lt;a href="http://tika.apache.org/" rel="nofollow"&gt;Tika&lt;/a&gt; –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è ~27 —è–∑—ã–∫–æ–≤ —Å—Ä–µ–¥–∏ –∫–æ—Ç–æ—Ä—ã—Ö –Ω–∞–ø—Ä–∏–º–µ—Ä —Ç–æ—á–Ω–æ –Ω–µ—Ç —Ç—É—Ä–µ—Ü–∫–æ–≥–æ - –ø–æ—Å—Ç–∞–≤–∏–º —Å–µ–±–µ –∑–∞–¥–∞—á—É —ç—Ç–æ –ø–æ–ø—Ä–∞–≤–∏—Ç—å. –î–ª—è –≤—ã–¥–µ–ª–µ–Ω–∏—è &lt;a href="http://en.wikipedia.org/wiki/N-gram" rel="nofollow"&gt;N-gram&lt;/a&gt; –Ω–∞–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è —Å–≤—è–∑–Ω—ã–π —Ç–µ–∫—Å—Ç - —á–µ–º –±–æ–ª—å—à–µ —Ç–µ–º –ª—É—á—à–µ, –∏ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –≤ —Ç–æ–º —á—Ç–æ –º—ã –∑–∞—Ä–∞–Ω–µ–µ –∑–Ω–∞–µ–º —è–∑—ã–∫ —ç—Ç–æ–≥–æ —Ç–µ–∫—Å—Ç–∞. –î–ª—è —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤ –≤–æ—Ç –Ω–∞—à–µ–ª—Å—è –≤ –ì—É–≥–ª–µ –¥–æ–≤–æ–ª—å–Ω–æ –±–æ–ª—å—à–æ–π &lt;a href="http://www.ittihad.com.tr/ipa.pdf" rel="nofollow"&gt;ipa.pdf&lt;/a&gt; —Ñ–∞–π–ª –Ω–∞ —Ç—É—Ä–µ—Ü–∫–æ–º —è–∑—ã–∫–µ. –ü—Ä–µ–¥–ª–∞–≥–∞—é –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å –ø–æ–º–æ—â—å—é &lt;a href="http://tika.apache.org/" rel="nofollow"&gt;Tika&lt;/a&gt; –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –ª–∏ —Ñ–æ—Ä–º–∞—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —É–∫–∞–∑–∞–Ω–Ω–æ–º—É —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—é:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ ./tika-app-1.2.jar -d ipa.pdf
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–í—ã–≤–æ–¥: &lt;code&gt;application/pdf&lt;/code&gt;. –†–∞–¥–∏ –∏–Ω—Ç–µ—Ä–µ—Å–∞ –ø–æ–ø—Ä–æ—Å–∏–º –≤—ã–≤–µ—Å—Ç–∏ –±–æ–ª–µ–µ –ø–æ–¥—Ä–æ–±–Ω–æ –º–µ—Ç–∞–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏–∑ —Ñ–∞–π–ª–∞:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ ./tika-app-1.2.jar -m ipa.pdf 
ERROR - Error: Could not parse predefined CMAP file &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;Adobe-Ide-UCS2&amp;#39;&lt;/span&gt;
Content-Length: &lt;span class="m"&gt;9055059&lt;/span&gt;
Content-Type: application/pdf
Creation-Date: &lt;span class="m"&gt;2008&lt;/span&gt;-01-26T23:40:04Z
created: Sun Jan &lt;span class="m"&gt;27&lt;/span&gt; &lt;span class="m"&gt;01&lt;/span&gt;:40:04 EET &lt;span class="m"&gt;2008&lt;/span&gt;
date: &lt;span class="m"&gt;2008&lt;/span&gt;-01-26T23:40:04Z
dcterms:created: &lt;span class="m"&gt;2008&lt;/span&gt;-01-26T23:40:04Z
meta:creation-date: &lt;span class="m"&gt;2008&lt;/span&gt;-01-26T23:40:04Z
producer: PDF Creator Plus &lt;span class="m"&gt;4&lt;/span&gt;.0 - http://www.peernet.com
resourceName: ipa.pdf
xmp:CreatorTool: PDF Creator Plus &lt;span class="m"&gt;4&lt;/span&gt;.0 - http://www.peernet.com
xmpTPg:NPages: &lt;span class="m"&gt;2351&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–û—à–∏–±–∫–∞ &lt;code&gt;Adobe-Ide-UCS2&lt;/code&gt; —Å–≤—è–∑–∞–Ω–∞ —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ –Ω–µ —Å &lt;a href="http://tika.apache.org/" rel="nofollow"&gt;Tika&lt;/a&gt;, –∞ —Å &lt;a href="http://pdfbox.apache.org/" rel="nofollow"&gt;pdfbox&lt;/a&gt; - –Ω–æ –≤ –ª—é–±–æ–º —Å–ª—É—á–∞–µ –º—ã —É–≤–∏–¥–µ–ª–∏ —á—Ç–æ —Ö–æ—Ç–µ–ª–∏, –ø–æ—ç—Ç–æ–º—É –¥–∞–ª–µ–µ –ø—Ä–µ–¥–ª–∞–≥–∞—é —ç—Ç—É –æ—à–∏–±–∫—É –ø—Ä–æ—Å—Ç–æ –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å. –¢–µ–ø–µ—Ä—å –∏–∑–≤–ª–µ—á–µ–º –∏–∑ –Ω–∞—à–µ–≥–æ &lt;em&gt;pdf&lt;/em&gt; –ø–æ–ª–µ–∑–Ω—ã–π —Ç–µ–∫—Å—Ç:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ ./tika-app-1.2.jar -t ipa.pdf &amp;gt; trout
~$ ./tika-app-1.2.jar -T ipa.pdf &amp;gt; trout
~$ file -bi trout
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–í—ã–≤–æ–¥ –ø–æ—Å–ª–µ–¥–Ω–µ–π –∫–æ–º–∞–Ω–¥—ã: &lt;code&gt;text/plain; charset=utf-8&lt;/code&gt;. –í —Å–ª—É—á–∞–µ &lt;code&gt;-T&lt;/code&gt; —Ç–µ–∫—Å—Ç –±—É–¥–µ—Ç –Ω–µ–º–Ω–æ–≥–æ &lt;em&gt;–ø–ª–æ—Ç–Ω–µ–µ&lt;/em&gt; –∑–∞ —Å—á—ë—Ç —É–¥–∞–ª–µ–Ω–∏—è –ª–∏—à–Ω–∏—Ö –ø—Ä–æ–±–µ–ª–æ–≤, –æ—Ç—Å—Ç—É–ø–æ–≤ –∏ —Ç.–¥. –í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ —Å –ø–æ–ª–µ–∑–Ω—ã–º —Ç–µ–∫—Å—Ç–æ–º ~5,6 –ú–ë –≤ —Å—Ä–∞–≤–Ω–µ–Ω–∏–∏ —Å 9 –ú–ë –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–≥–æ &lt;em&gt;pdf&lt;/em&gt;. –ù—É –∏ –Ω–∞–∫–æ–Ω–µ—Ü –ø–æ–ø—Ä–æ–±—É–µ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —è–∑—ã–∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ ./tika-app-1.2.jar -l ipa.pdf
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–í—ã–≤–æ–¥: &lt;code&gt;et&lt;/code&gt;. –¢—É—Ç —É–¥–∏–≤–ª—è—Ç—å—Å—è –Ω–µ—á–µ–º—É - –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç—É—Ä–µ—Ü–∫–æ–≥–æ —è–∑—ã–∫–∞ –≤ &lt;a href="http://tika.apache.org/" rel="nofollow"&gt;Tika&lt;/a&gt; –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å–ø–∏—Å–æ–∫ &lt;a href="http://en.wikipedia.org/wiki/N-gram" rel="nofollow"&gt;N-gram&lt;/a&gt;, —Ö–∞—Ä–∞–∫—Ç–µ—Ä–Ω—ã–π –¥–ª—è —ç—Ç–æ–≥–æ —è–∑—ã–∫–∞. –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–µ–±—Ö–æ–¥–∏–º—ã–π —Ñ–∞–π–ª –º–æ–∂–Ω–æ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏–º–µ—é—â–µ–≥–æ—Å—è —Ç–µ–∫—Å—Ç–∞, –≥–¥–µ –≤ —Å–ª–µ–¥—É—é—â–µ–π –∫–æ–º–∞–Ω–¥–µ &lt;em&gt;tr&lt;/em&gt; - —ç—Ç–æ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ç—É—Ä–µ—Ü–∫–æ–≥–æ —è–∑—ã–∫–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ &lt;a href="http://www.loc.gov/standards/iso639-2/php/code_list.php" rel="nofollow"&gt;ISO 639-2&lt;/a&gt;.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ ./tika-app-1.2.jar --create-profile&lt;span class="o"&gt;=&lt;/span&gt;tr -eUTF-8 trout
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –ø–æ—è–≤–∏—Ç—Å—è —Ñ–∞–π–ª &lt;em&gt;tr.ngp&lt;/em&gt;. &lt;a href="http://tika.apache.org/" rel="nofollow"&gt;Tika&lt;/a&gt; —Å—á–∏—Ç—ã–≤–∞–µ—Ç —Å–ø–∏—Å–æ–∫ &lt;em&gt;.ngp&lt;/em&gt; –ø—Ä–æ—Ñ–∞–π–ª–æ–≤ –∏–∑ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ &lt;code&gt;tika.language.properties&lt;/code&gt;. –≠—Ç–æ—Ç —Ñ–∞–π–ª —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è –≤ –Ω–µ–¥—Ä–∞—Ö &lt;a href="http://www.apache.org/dyn/closer.cgi/tika/tika-app-1.2.jar" rel="nofollow"&gt;tika-app-1.2.jar&lt;/a&gt;, –Ω–æ –µ–≥–æ –º–æ–∂–Ω–æ –ø–æ–¥–º–µ–Ω–∏—Ç—å - —Å–æ–∑–¥–∞—Ç—å –∫–æ–ø–∏—é &lt;code&gt;tika.language.override.properties&lt;/code&gt; –∏ —Å–æ–æ–±—â–∏—Ç—å –æ–± —ç—Ç–æ–º —á–µ—Ä–µ–∑ &lt;code&gt;java classpath&lt;/code&gt;. –ü–æ—Å–ª–µ —á–µ–≥–æ –≤ &lt;code&gt;tika.language.override.properties&lt;/code&gt; –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Ä–∞—Å—à–∏—Ä–∏—Ç—å –∫–ª—é—á &lt;code&gt;languages&lt;/code&gt; —Ç—É—Ä–µ—Ü–∫–∏–º —è–∑—ã–∫–æ–º (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é) –∏ –¥–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π –∫–ª—é—á &lt;code&gt;name.tr&lt;/code&gt; —Å–æ –∑–Ω–∞—á–µ–Ω–∏–µ–º &lt;em&gt;Turkish&lt;/em&gt;. –ü—Ä–æ–±—É–µ–º:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ mkdir -p org/apache/tika/language
~$ cp tr.ngp org/apache/tika/language
&lt;span class="c1"&gt;#cp tika.language.override.properties org/apache/tika/language&lt;/span&gt;
&lt;span class="c1"&gt;#tika.language.override.properties languages &amp;lt;&amp;lt; tr&lt;/span&gt;
&lt;span class="c1"&gt;#tika.language.override.properties name.tr=Turkish&lt;/span&gt;
~$ java -cp .:tika-app-1.2.jar org.apache.tika.cli.TikaCLI -l &lt;span class="se"&gt;\&lt;/span&gt;
http://tr.wikipedia.org/wiki/Linus_Benedict_Torvalds
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–í—ã–≤–æ–¥: &lt;code&gt;tr&lt;/code&gt;. –£—Ä–∞ ! –ú—ã —Å –í–∞–º–∏ —Ç–æ–ª—å–∫–æ —á—Ç–æ –æ–±—É—á–∏–ª–∏ &lt;a href="http://tika.apache.org/" rel="nofollow"&gt;Tika&lt;/a&gt; –Ω–æ–≤–æ–º—É —è–∑—ã–∫—É ! –¢–µ–ø–µ—Ä—å –µ—â—ë –æ–¥–Ω–∞ –¥–∞—á–∞ - –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å &lt;em&gt;tr.ngp&lt;/em&gt; –≤ &lt;a href="http://mazko.github.io/jsli/" rel="nofollow"&gt;javascript&lt;/a&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nv"&gt;LNG&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;basename &lt;span class="nv"&gt;$1&lt;/span&gt; .ngp&lt;span class="sb"&gt;`&lt;/span&gt;
&lt;span class="nv"&gt;SUM&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;
&lt;span class="k"&gt;for&lt;/span&gt; COUNT in &lt;span class="k"&gt;$(&lt;/span&gt;sed &lt;span class="s1"&gt;&amp;#39;/^#/d;s/^\S\+\s\+\([0-9]\+\)$/\1/&amp;#39;&lt;/span&gt; &lt;span class="nv"&gt;$LNG&lt;/span&gt;.ngp&lt;span class="k"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;do&lt;/span&gt;
&lt;span class="nv"&gt;SUM&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;expr &lt;span class="nv"&gt;$SUM&lt;/span&gt; + &lt;span class="nv"&gt;$COUNT&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;done&lt;/span&gt;

&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;(function() {&amp;quot;&lt;/span&gt; &amp;gt; &lt;span class="nv"&gt;$LNG&lt;/span&gt;.js
&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;var ngrams = {&amp;quot;&lt;/span&gt; &amp;gt;&amp;gt; &lt;span class="nv"&gt;$LNG&lt;/span&gt;.js
perl -CSD -p -e &lt;span class="s1"&gt;&amp;#39;s{([^\t\n\x20-\x7E])}{sprintf &amp;quot;\\u%04x&amp;quot;, ord $1}eg&amp;#39;&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
-f &lt;span class="nv"&gt;$LNG&lt;/span&gt;.ngp &lt;span class="p"&gt;|&lt;/span&gt; sed &lt;span class="s1"&gt;&amp;#39;/^#/d;s/^\(\S\+\)\s\+\([0-9]\+\)$/&amp;quot;\1&amp;quot;:\2,/&amp;#39;&lt;/span&gt; &amp;gt;&amp;gt; &lt;span class="nv"&gt;$LNG&lt;/span&gt;.js
sed -i &lt;span class="s1"&gt;&amp;#39;$s/,$//&amp;#39;&lt;/span&gt; &lt;span class="nv"&gt;$LNG&lt;/span&gt;.js
&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;};&amp;quot;&lt;/span&gt; &amp;gt;&amp;gt; &lt;span class="nv"&gt;$LNG&lt;/span&gt;.js
&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;LanguageIdentifier.addProfile(&amp;#39;&lt;/span&gt;&lt;span class="nv"&gt;$LNG&lt;/span&gt;&lt;span class="s2"&gt;&amp;#39;, ngrams, &lt;/span&gt;&lt;span class="nv"&gt;$SUM&lt;/span&gt;&lt;span class="s2"&gt;);&amp;quot;&lt;/span&gt; &amp;gt;&amp;gt; &lt;span class="nv"&gt;$LNG&lt;/span&gt;.js
&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;}());&amp;quot;&lt;/span&gt; &amp;gt;&amp;gt; &lt;span class="nv"&gt;$LNG&lt;/span&gt;.js
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–°–æ—Ö—Ä–∞–Ω–∏–º –∫–∞–∫ &lt;code&gt;ngp2js&lt;/code&gt;, –∑–∞—Ç–µ–º &lt;code&gt;chmod +x ngp2js&lt;/code&gt; –∏ –∑–∞–ø—É—Å–∫–∞–µ–º: &lt;code&gt;./ngp2js tr.ngp&lt;/code&gt;. –í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –±—É–¥–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω &lt;code&gt;tr.js&lt;/code&gt; —Ä–∞–∑–º–µ—Ä–æ–º ~13 –ö–ë.
–ï—Å–ª–∏ –æ—á–µ–Ω—å –∫–æ—Ä–æ—Ç–∫–æ —Ä–µ–∑—é–º–∏—Ä–æ–≤–∞—Ç—å - –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö &lt;a href="http://en.wikipedia.org/wiki/N-gram" rel="nofollow"&gt;N-gram&lt;/a&gt; —Ñ–∞–π–ª–æ–≤ –Ω—É–∂–Ω–æ –º–Ω–æ–≥–æ —Ö–æ—Ä–æ—à–µ–≥–æ —Å–≤—è–∑–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ –∑–∞—Ä–∞–Ω–µ–µ –∏–∑–≤–µ—Å—Ç–Ω–æ–≥–æ —è–∑—ã–∫–∞. –°–∞–º –ø—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è &lt;em&gt;.ngp&lt;/em&gt; –ø—Ä–æ—Ñ–∞–π–ª–æ–≤ –æ—á–µ–Ω—å –ø—Ä–æ—Å—Ç –∏ —Ç—Ä–µ–±—É–µ—Ç –º–∏–Ω–∏–º—É–º —É—Å–∏–ª–∏–π.&lt;/p&gt;</content><category term="NLP"></category><category term="Tika"></category></entry><entry><title>Lucene - —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –∑–∞–ø—Ä–æ—Å–æ–≤</title><link href="http://proiot.ru/blog/posts/2012/10/29/lucene-sintaksis-zaprosov/" rel="alternate"></link><published>2012-10-29T00:00:00+02:00</published><updated>2012-10-29T00:00:00+02:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2012-10-29:/blog/posts/2012/10/29/lucene-sintaksis-zaprosov/</id><summary type="html">&lt;p&gt;–ö–∞–∫ —É–∂–µ —É–ø–æ–º–∏–Ω–∞–ª–æ—Å—å &lt;a href="http://proiot.ru/blog/posts/2012/10/21/lucene-postranichnyi-poisk/"&gt;—Ä–∞–Ω–µ–µ&lt;/a&gt;, –º–µ–∂–¥—É —Å—Ç—Ä–æ–∫–æ–π –∑–∞–ø—Ä–æ—Å–∞, –∫–æ—Ç–æ—Ä—É—é –≤–≤–æ–¥–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–ª—è –æ—Å—É—â–µ—Å—Ç–≤–ª–µ–Ω–∏—è –ø–æ–∏—Å–∫–∞ –∏  –º–µ—Ç–æ–¥–æ–º, —Ä–µ–∞–ª–∏–∑—É—é—â–∏–º –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ —Å–∞–º –ø–æ–∏—Å–∫ –≤ &lt;em&gt;Lucene&lt;/em&gt;, –∏–º–µ–µ—Ç—Å—è –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π –∫–ª–∞—Å—Å - &lt;code&gt;Query&lt;/code&gt;. –≠—Ç–æ—Ç –∫–ª–∞—Å—Å –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ - –ø—Ä–∏—á—ë–º –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –¥–∞–∂–µ –æ—á–µ–Ω—å —Å–ª–æ–∂–Ω—ã–π  &lt;code&gt;Query&lt;/code&gt;, –∏—Å–ø–æ–ª—å–∑—É—è –∫–æ–º–±–∏–Ω–∞—Ü–∏—é –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∏–∑ –Ω–∏—Ö, —Ç–µ–º —Å–∞–º—ã–º –¥–æ—Å—Ç–∏–≥–∞—è –Ω–∞–∏–ª—É—á—à–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞. –û–¥–Ω–∞–∫–æ ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;p&gt;–ö–∞–∫ —É–∂–µ —É–ø–æ–º–∏–Ω–∞–ª–æ—Å—å &lt;a href="http://proiot.ru/blog/posts/2012/10/21/lucene-postranichnyi-poisk/"&gt;—Ä–∞–Ω–µ–µ&lt;/a&gt;, –º–µ–∂–¥—É —Å—Ç—Ä–æ–∫–æ–π –∑–∞–ø—Ä–æ—Å–∞, –∫–æ—Ç–æ—Ä—É—é –≤–≤–æ–¥–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–ª—è –æ—Å—É—â–µ—Å—Ç–≤–ª–µ–Ω–∏—è –ø–æ–∏—Å–∫–∞ –∏  –º–µ—Ç–æ–¥–æ–º, —Ä–µ–∞–ª–∏–∑—É—é—â–∏–º –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ —Å–∞–º –ø–æ–∏—Å–∫ –≤ &lt;em&gt;Lucene&lt;/em&gt;, –∏–º–µ–µ—Ç—Å—è –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–π –∫–ª–∞—Å—Å - &lt;code&gt;Query&lt;/code&gt;. –≠—Ç–æ—Ç –∫–ª–∞—Å—Å –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ - –ø—Ä–∏—á—ë–º –º–æ–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å –¥–∞–∂–µ –æ—á–µ–Ω—å —Å–ª–æ–∂–Ω—ã–π  &lt;code&gt;Query&lt;/code&gt;, –∏—Å–ø–æ–ª—å–∑—É—è –∫–æ–º–±–∏–Ω–∞—Ü–∏—é –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∏–∑ –Ω–∏—Ö, —Ç–µ–º —Å–∞–º—ã–º –¥–æ—Å—Ç–∏–≥–∞—è –Ω–∞–∏–ª—É—á—à–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –ø–æ–∏—Å–∫–∞. –û–¥–Ω–∞–∫–æ –ø–æ—Å–ª–µ–¥–Ω–µ–µ –Ω–µ –≤—Å–µ–≥–¥–∞ —Ü–µ–ª–µ—Å–æ–æ–±—Ä–∞–∑–Ω–æ –¥–µ–ª–∞—Ç—å –≤—Ä—É—á–Ω—É—é - –≤ &lt;em&gt;Lucene&lt;/em&gt; —É–∂–µ –∏–º–µ–µ—Ç—Å—è –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –∑–∞–ø—Ä–æ—Å–æ–≤, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å –≤–≤–æ–¥–∏–º—É—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º —Å—Ç—Ä–æ–∫—É –∏ —Ç–µ–º —Å–∞–º—ã–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞—Ç—å —Å–ª–æ–∂–Ω—ã–π &lt;code&gt;Query&lt;/code&gt;. –î–æ —ç—Ç–æ–≥–æ –º–æ–º–µ–Ω—Ç–∞ –º—ã –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ –¥–∞–Ω–Ω—ã–π –º–µ—Ö–∞–Ω–∏–∑–º, –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —ç–∫—Ä–∞–Ω–∏—Ä—É—è –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã –º–µ—Ç–æ–¥–æ–º &lt;code&gt;QueryParser.escape&lt;/code&gt;:&lt;/p&gt;
&lt;p&gt;&lt;em&gt;server/src/main/java/server/QueryHelper.java&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;package&lt;/span&gt; &lt;span class="nn"&gt;server&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.queryparser.classic.MultiFieldQueryParser&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.queryparser.classic.ParseException&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.queryparser.classic.QueryParser&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.search.Query&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;common.LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;QueryHelper&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="n"&gt;Query&lt;/span&gt; &lt;span class="nf"&gt;generate&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;story&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;ParseException&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;QueryParser&lt;/span&gt; &lt;span class="n"&gt;parser&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;MultiFieldQueryParser&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;
                &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; 
                        &lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;TITLE_FIELD&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; 
                        &lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;CONTENT_FIELD&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                        &lt;span class="cm"&gt;/* Russian */&lt;/span&gt;
                        &lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;RUS_TITLE_FIELD&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; 
                        &lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;RUS_CONTENT_FIELD&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                        &lt;span class="cm"&gt;/* English */&lt;/span&gt;
                        &lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;ENG_TITLE_FIELD&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; 
                        &lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;ENG_CONTENT_FIELD&lt;/span&gt; &lt;span class="o"&gt;},&lt;/span&gt;
                &lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getAnalyzer&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;

        &lt;span class="cm"&gt;/* Operator OR is used by default */&lt;/span&gt;

        &lt;span class="n"&gt;parser&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setDefaultOperator&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;QueryParser&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;Operator&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;AND&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

        &lt;span class="cm"&gt;/* Here are some changes for SYNTAX DEMO */&lt;/span&gt;

        &lt;span class="n"&gt;parser&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setAllowLeadingWildcard&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;parser&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;parse&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;story&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –æ—Ç–∫–∏–Ω—É—Ç—å—Å—è –Ω–∞ —Å–ø–∏–Ω–∫—É –∫—Ä–µ—Å–ª–∞ –∏ –Ω–∞—Å–ª–∞–¥–∏—Ç—å—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏: &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ mvn clean install -pl server/ jetty:run
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ü—Ä–∞–≤–¥–∞ –≤ –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ –∏—Ç–æ–≥–æ–≤—É—é –∫–∞—Ä—Ç–∏–Ω—É —Å–∏–ª—å–Ω–æ —Å–º–∞–∑—ã–≤–∞—é—Ç —è–∑—ã–∫–æ–≤—ã–µ –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä—ã - &lt;code&gt;RussianAnalyzer&lt;/code&gt; –∏ &lt;code&gt;EnglishAnalyzer&lt;/code&gt;, –ø–æ—ç—Ç–æ–º—É –ø—Ä–µ–¥–ª–∞–≥–∞—é –Ω–µ –ø–æ–ª–µ–Ω–∏—Ç—å—Å—è –∏ –≤–µ—Ä–Ω—É—Ç—å—Å—è –Ω–∞ –≤—Ä–µ–º—è –æ—Å–≤–æ–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–≥–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –ø–æ–∏—Å–∫–∞ —Ç–æ–ª—å–∫–æ –æ–¥–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–∞ - &lt;code&gt;StandardAnalyzer&lt;/code&gt;. –¢–∞–∫ –±—É–¥–µ—Ç –ª—É—á—à–µ –≤–∏–¥–Ω–æ, –≤ —á–µ–º –∏–º–µ–Ω–Ω–æ —Å–æ–ª—å —Ç–æ–≥–æ –∏–ª–∏ –∏–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞:&lt;/p&gt;
&lt;p&gt;&lt;em&gt;server/src/main/java/server/QueryHelper.java&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;package&lt;/span&gt; &lt;span class="nn"&gt;server&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.queryparser.classic.MultiFieldQueryParser&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.queryparser.classic.ParseException&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.queryparser.classic.QueryParser&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.search.Query&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;common.LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;QueryHelper&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="n"&gt;Query&lt;/span&gt; &lt;span class="nf"&gt;generate&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;story&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;ParseException&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;QueryParser&lt;/span&gt; &lt;span class="n"&gt;parser&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;MultiFieldQueryParser&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;
                &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;TITLE_FIELD&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;CONTENT_FIELD&lt;/span&gt; &lt;span class="o"&gt;},&lt;/span&gt; 
                &lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getAnalyzer&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;

        &lt;span class="cm"&gt;/* Operator OR is used by default */&lt;/span&gt;

        &lt;span class="n"&gt;parser&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setDefaultOperator&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;QueryParser&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;Operator&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;AND&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

        &lt;span class="cm"&gt;/* Here are some changes for SYNTAX DEMO */&lt;/span&gt;

        &lt;span class="n"&gt;parser&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setAllowLeadingWildcard&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;parser&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;parse&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;story&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;em&gt;server/src/main/java/server/HighlightedSearchItem.java&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;package&lt;/span&gt; &lt;span class="nn"&gt;server&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.io.IOException&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.document.Document&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.index.CorruptIndexException&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.search.ScoreDoc&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.search.highlight.Highlighter&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.search.highlight.InvalidTokenOffsetsException&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.search.highlight.QueryScorer&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.search.highlight.SimpleHTMLFormatter&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.search.highlight.SimpleSpanFragmenter&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;common.LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;HighlightedSearchItem&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;DefaultSearchItem&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;highlightedTitle&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;highlightedContent&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

    &lt;span class="n"&gt;HighlightedSearchItem&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;title&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;content&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;uri&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; 
        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="kt"&gt;float&lt;/span&gt; &lt;span class="n"&gt;score&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;highlightedTitle&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;highlightedContent&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="kd"&gt;super&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;title&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;content&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;uri&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;score&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;highlightedContent&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;highlightedContent&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;highlightedTitle&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;highlightedTitle&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;

&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;HighlightedAgregator&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;Aggregator&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;HighlightedSearchItem&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;

    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;Highlighter&lt;/span&gt; &lt;span class="n"&gt;highlighter&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;tryHighlight&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;text&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;fields&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
            &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;IOException&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;InvalidTokenOffsetsException&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;

        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;text&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;

        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;highlighter&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;QueryScorer&lt;/span&gt; &lt;span class="n"&gt;scorer&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;QueryScorer&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;query&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;highlighter&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Highlighter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;
                &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;SimpleHTMLFormatter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;[mazko.github.io]&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;[/mazko.github.io]&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt;
                &lt;span class="n"&gt;scorer&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;highlighter&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setTextFragmenter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;SimpleSpanFragmenter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;scorer&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;330&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;

        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;field&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;fields&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;highlighted&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;highlighter&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getBestFragment&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;
                &lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getAnalyzer&lt;/span&gt;&lt;span class="o"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;field&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;text&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;highlighted&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;highlighted&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;

        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;text&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="nd"&gt;@Override&lt;/span&gt;
    &lt;span class="n"&gt;HighlightedSearchItem&lt;/span&gt; &lt;span class="nf"&gt;aggregate&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;ScoreDoc&lt;/span&gt; &lt;span class="n"&gt;sd&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
            &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;IOException&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;CorruptIndexException&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;InvalidTokenOffsetsException&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;

        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;Document&lt;/span&gt; &lt;span class="n"&gt;doc&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;indexSearcher&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;doc&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sd&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;doc&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;title&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;doc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;get&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;TITLE_FIELD&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;content&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;doc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;get&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;CONTENT_FIELD&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;highlightedTitle&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;tryHighlight&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;
            &lt;span class="n"&gt;title&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;TITLE_FIELD&lt;/span&gt; &lt;span class="o"&gt;});&lt;/span&gt;
        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;highlightedContent&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;tryHighlight&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;
            &lt;span class="n"&gt;content&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;CONTENT_FIELD&lt;/span&gt; &lt;span class="o"&gt;});&lt;/span&gt;

        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;HighlightedSearchItem&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;title&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;content&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; 
            &lt;span class="n"&gt;doc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;get&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;URI_FIELD&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt; 
            &lt;span class="n"&gt;sd&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;score&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;highlightedTitle&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;highlightedContent&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;–°–∏–Ω—Ç–∞–∫—Å–∏—Å&lt;/h3&gt;
&lt;p&gt;–°–µ–º–µ–π—Å—Ç–≤–æ &lt;em&gt;WildcardQuery&lt;/em&gt;: &lt;strong&gt;–±–æ?&lt;/strong&gt; - –≤–º–µ—Å—Ç–æ '?' –º–æ–∂–µ—Ç –±—ã—Ç—å –û–î–ò–ù –ª—é–±–æ–π —Å–∏–º–≤–æ–ª; &lt;strong&gt;–±–æ*&lt;/strong&gt; –ª—é–±–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ &lt;strong&gt;0..n&lt;/strong&gt; –ª—é–±—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤ –ø–æ—Å–ª–µ '–±–æ'&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2012/10/29/lucene-sintaksis-zaprosov/prefix1.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2012/10/29/lucene-sintaksis-zaprosov/prefix2.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2012/10/29/lucene-sintaksis-zaprosov/prefix3.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;FuzzyQuery&lt;/em&gt; - –∏—â—É—Ç—Å—è –ø–æ—Ö–æ–∂–∏–µ —Å–ª–æ–≤–∞:&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2012/10/29/lucene-sintaksis-zaprosov/fuzzy.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–ü–æ–∏—Å–∫ –ø–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –ø–æ–ª—è–º –≤ –∏–Ω–¥–µ–∫—Å–µ:&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2012/10/29/lucene-sintaksis-zaprosov/field.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–ë—É–ª–µ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã:&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2012/10/29/lucene-sintaksis-zaprosov/content_boolean.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2012/10/29/lucene-sintaksis-zaprosov/field_boolean_not.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;PhraseQuery&lt;/em&gt; - –ø–æ–∏—Å–∫ —Ñ—Ä–∞–∑—ã. –° –ø–æ–º–æ—â—å—é '~' –º–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É —Å–ª–æ–≤–∞–º–∏ —Ñ—Ä–∞–∑—ã.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2012/10/29/lucene-sintaksis-zaprosov/phrase.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2012/10/29/lucene-sintaksis-zaprosov/phrase_fuzzy.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2016/05/15/lucene-fasetnyi-poisk/"&gt;–î–∞–ª–µ–µ&lt;/a&gt; —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º —Ñ–∞—Å–µ—Ç–Ω—ã–π –ø–æ–∏—Å–∫.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2012/10/29/lucene-sintaksis-zaprosov/lucene-tutorial.zip"&gt;–ò—Å—Ö–æ–¥–Ω–∏–∫–∏&lt;/a&gt;&lt;/p&gt;</content><category term="Lucene"></category></entry><entry><title>Lucene - –ø–æ–¥—Å–≤–µ—Ç–∫–∞ –≤—Ö–æ–∂–¥–µ–Ω–∏–π –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö –≤—ã–¥–∞—á–∏</title><link href="http://proiot.ru/blog/posts/2012/10/28/lucene-podsvetka-vkhozhdenii-v-rezultatakh-vydachi/" rel="alternate"></link><published>2012-10-28T00:00:00+03:00</published><updated>2012-10-28T00:00:00+03:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2012-10-28:/blog/posts/2012/10/28/lucene-podsvetka-vkhozhdenii-v-rezultatakh-vydachi/</id><summary type="html">&lt;p&gt;–ù–∞—à &lt;a href="http://proiot.ru/blog/posts/2012/10/27/lucene-iazykovye-analizatory/"&gt;–ø–æ–∏—Å–∫&lt;/a&gt; —Ä–∞–±–æ—Ç–∞–µ—Ç –≤—Ä–æ–¥–µ –±—ã –Ω–µ–ø–ª–æ—Ö–æ, –Ω–æ –≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫-—Ç–æ –Ω–µ –æ—á–µ–Ω—å –∞–ø–ø–µ—Ç–∏—Ç–Ω–æ. –î–ª—è —É–ª—É—á—à–µ–Ω–∏—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –≤–æ—Å–ø—Ä–∏—è—Ç–∏—è —Å–ª–æ–≤–æ –∏–ª–∏ —Ñ—Ä–∞–∑—É, –ø–æ –∫–æ—Ç–æ—Ä–æ–π –¥–æ–∫—É–º–µ–Ω—Ç –±—ã–ª –Ω–∞–π–¥–µ–Ω, –∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ –≤—ã–¥–µ–ª–∏—Ç—å - –Ω–∞–ø—Ä–∏–º–µ—Ä –ø–æ–∫—Ä–∞—Å–∏—Ç—å –≤ –¥—Ä—É–≥–æ–π —Ü–≤–µ—Ç. –ö—Ä–æ–º–µ —Ç–æ–≥–æ, —Ç–µ–∫—É—â–∏–π —Å–ø–æ—Å–æ–± –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –æ—á–µ–Ω—å –ø—Ä–∏–º–∏—Ç–∏–≤–µ–Ω - –Ω–µ —Ñ–∞–∫—Ç, —á—Ç–æ –≤ –Ω–∞—á–∞–ª–µ —Ç–µ–∫—Å—Ç–∞ –≤–æ–æ–±—â–µ –≤—Å—Ç—Ä–µ—á–∞–µ—Ç—Å—è –∏—Å–∫–æ–º–∞—è —Ñ—Ä–∞–∑–∞ - –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;p&gt;–ù–∞—à &lt;a href="http://proiot.ru/blog/posts/2012/10/27/lucene-iazykovye-analizatory/"&gt;–ø–æ–∏—Å–∫&lt;/a&gt; —Ä–∞–±–æ—Ç–∞–µ—Ç –≤—Ä–æ–¥–µ –±—ã –Ω–µ–ø–ª–æ—Ö–æ, –Ω–æ –≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫-—Ç–æ –Ω–µ –æ—á–µ–Ω—å –∞–ø–ø–µ—Ç–∏—Ç–Ω–æ. –î–ª—è —É–ª—É—á—à–µ–Ω–∏—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –≤–æ—Å–ø—Ä–∏—è—Ç–∏—è —Å–ª–æ–≤–æ –∏–ª–∏ —Ñ—Ä–∞–∑—É, –ø–æ –∫–æ—Ç–æ—Ä–æ–π –¥–æ–∫—É–º–µ–Ω—Ç –±—ã–ª –Ω–∞–π–¥–µ–Ω, –∂–µ–ª–∞—Ç–µ–ª—å–Ω–æ –≤—ã–¥–µ–ª–∏—Ç—å - –Ω–∞–ø—Ä–∏–º–µ—Ä –ø–æ–∫—Ä–∞—Å–∏—Ç—å –≤ –¥—Ä—É–≥–æ–π —Ü–≤–µ—Ç. –ö—Ä–æ–º–µ —Ç–æ–≥–æ, —Ç–µ–∫—É—â–∏–π —Å–ø–æ—Å–æ–± –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –æ—á–µ–Ω—å –ø—Ä–∏–º–∏—Ç–∏–≤–µ–Ω - –Ω–µ —Ñ–∞–∫—Ç, —á—Ç–æ –≤ –Ω–∞—á–∞–ª–µ —Ç–µ–∫—Å—Ç–∞ –≤–æ–æ–±—â–µ –≤—Å—Ç—Ä–µ—á–∞–µ—Ç—Å—è –∏—Å–∫–æ–º–∞—è —Ñ—Ä–∞–∑–∞ - –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ–∫–∞–∑–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –∏–º–µ–Ω–Ω–æ —Ç–æ—Ç —Ñ—Ä–∞–≥–º–µ–Ω—Ç —Ç–µ–∫—Å—Ç–∞, –≤ –∫–æ—Ç–æ—Ä–æ–º &lt;em&gt;Lucene&lt;/em&gt; –µ—ë –Ω–∞—à—ë–ª, —Ç–æ–≥–¥–∞ —Ç–æ—á–Ω–æ –±—É–¥–µ—Ç —á—Ç–æ –ø–æ–¥—Å–≤–µ—á–∏–≤–∞—Ç—å. –ü–æ–¥–æ–±–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –≤ &lt;em&gt;Lucene&lt;/em&gt; —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤ –≤–∏–¥–µ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –º–æ–¥—É–ª—è &lt;code&gt;Highlighter&lt;/code&gt;, –ø—Ä–∏—á—ë–º —Å–∫–æ—Ä–æ—Å—Ç—å –µ–≥–æ —Ä–∞–±–æ—Ç—ã –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –Ω–∞–ª–∏—á–∏—è –≤ –∏–Ω–¥–µ–∫—Å–µ Term Vectors (–∑–∞–¥–∞—ë—Ç—Å—è –Ω–∞ —ç—Ç–∞–ø–µ —Å–æ–∑–¥–∞–Ω–∏—è –∏–Ω–¥–µ–∫—Å–∞):&lt;/p&gt;
&lt;p&gt;&lt;em&gt;pom.xml&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;project&lt;/span&gt; &lt;span class="na"&gt;xmlns=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;http://maven.apache.org/POM/4.0.0&amp;quot;&lt;/span&gt; 
  &lt;span class="na"&gt;xmlns:xsi=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;http://www.w3.org/2001/XMLSchema-instance&amp;quot;&lt;/span&gt;
  &lt;span class="na"&gt;xsi:schemaLocation=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;modelVersion&amp;gt;&lt;/span&gt;4.0.0&lt;span class="nt"&gt;&amp;lt;/modelVersion&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;tutorial.lucene&lt;span class="nt"&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;parent&lt;span class="nt"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;packaging&amp;gt;&lt;/span&gt;pom&lt;span class="nt"&gt;&amp;lt;/packaging&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;version&amp;gt;&lt;/span&gt;1.0&lt;span class="nt"&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;dependencies&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.apache.lucene&lt;span class="nt"&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;lucene-core&lt;span class="nt"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;version&amp;gt;&lt;/span&gt;6.0.0&lt;span class="nt"&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.apache.lucene&lt;span class="nt"&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;lucene-analyzers-common&lt;span class="nt"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;version&amp;gt;&lt;/span&gt;6.0.0&lt;span class="nt"&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.apache.lucene&lt;span class="nt"&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;lucene-queryparser&lt;span class="nt"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;version&amp;gt;&lt;/span&gt;6.0.0&lt;span class="nt"&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.apache.lucene&lt;span class="nt"&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;lucene-highlighter&lt;span class="nt"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;version&amp;gt;&lt;/span&gt;6.0.0&lt;span class="nt"&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;/dependencies&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;modules&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;module&amp;gt;&lt;/span&gt;server&lt;span class="nt"&gt;&amp;lt;/module&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;module&amp;gt;&lt;/span&gt;crawler&lt;span class="nt"&gt;&amp;lt;/module&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;module&amp;gt;&lt;/span&gt;common&lt;span class="nt"&gt;&amp;lt;/module&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;/modules&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;build&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;plugins&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;plugin&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.apache.maven.plugins&lt;span class="nt"&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;maven-compiler-plugin&lt;span class="nt"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;version&amp;gt;&lt;/span&gt;3.5.1&lt;span class="nt"&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;configuration&amp;gt;&lt;/span&gt;
          &lt;span class="nt"&gt;&amp;lt;source&amp;gt;&lt;/span&gt;1.8&lt;span class="nt"&gt;&amp;lt;/source&amp;gt;&lt;/span&gt;
          &lt;span class="nt"&gt;&amp;lt;target&amp;gt;&lt;/span&gt;1.8&lt;span class="nt"&gt;&amp;lt;/target&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;/configuration&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;/plugin&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;/plugins&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;/build&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/project&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;em&gt;server/src/main/java/server/HighlightedSearchItem.java&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;package&lt;/span&gt; &lt;span class="nn"&gt;server&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.io.IOException&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.document.Document&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.index.CorruptIndexException&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.search.ScoreDoc&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.search.highlight.Highlighter&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.search.highlight.InvalidTokenOffsetsException&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.search.highlight.QueryScorer&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.search.highlight.SimpleHTMLFormatter&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.search.highlight.SimpleSpanFragmenter&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;common.LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;HighlightedSearchItem&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;DefaultSearchItem&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;highlightedTitle&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;highlightedContent&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

    &lt;span class="n"&gt;HighlightedSearchItem&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;title&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;content&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;uri&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; 
        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="kt"&gt;float&lt;/span&gt; &lt;span class="n"&gt;score&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;highlightedTitle&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;highlightedContent&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="kd"&gt;super&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;title&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;content&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;uri&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;score&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;highlightedContent&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;highlightedContent&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;highlightedTitle&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;highlightedTitle&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;

&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;HighlightedAgregator&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;Aggregator&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;HighlightedSearchItem&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;

    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;Highlighter&lt;/span&gt; &lt;span class="n"&gt;highlighter&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;tryHighlight&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;text&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;fields&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
            &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;IOException&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;InvalidTokenOffsetsException&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;

        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;text&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;

        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;highlighter&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;QueryScorer&lt;/span&gt; &lt;span class="n"&gt;scorer&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;QueryScorer&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;query&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;highlighter&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Highlighter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;
                &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;SimpleHTMLFormatter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;[mazko.github.io]&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;[/mazko.github.io]&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt;
                &lt;span class="n"&gt;scorer&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;highlighter&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setTextFragmenter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;SimpleSpanFragmenter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;scorer&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;330&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;

        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;field&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;fields&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;highlighted&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;highlighter&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getBestFragment&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;
                &lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getAnalyzer&lt;/span&gt;&lt;span class="o"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;field&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;text&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;highlighted&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;highlighted&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;

        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;text&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="nd"&gt;@Override&lt;/span&gt;
    &lt;span class="n"&gt;HighlightedSearchItem&lt;/span&gt; &lt;span class="nf"&gt;aggregate&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;ScoreDoc&lt;/span&gt; &lt;span class="n"&gt;sd&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
            &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;IOException&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;CorruptIndexException&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;InvalidTokenOffsetsException&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;

        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;Document&lt;/span&gt; &lt;span class="n"&gt;doc&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;indexSearcher&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;doc&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sd&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;doc&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;title&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;doc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;get&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;TITLE_FIELD&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;content&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;doc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;get&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;CONTENT_FIELD&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;highlightedTitle&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;tryHighlight&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;title&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; 
            &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; 
                &lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;RUS_TITLE_FIELD&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                &lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;ENG_TITLE_FIELD&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; 
                &lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;TITLE_FIELD&lt;/span&gt; &lt;span class="o"&gt;});&lt;/span&gt;
        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;highlightedContent&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;tryHighlight&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;content&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; 
            &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; 
                &lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;RUS_CONTENT_FIELD&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                &lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;ENG_CONTENT_FIELD&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; 
                &lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;CONTENT_FIELD&lt;/span&gt; &lt;span class="o"&gt;});&lt;/span&gt;

        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;HighlightedSearchItem&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;title&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;content&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; 
            &lt;span class="n"&gt;doc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;get&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;URI_FIELD&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt; &lt;span class="n"&gt;sd&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;score&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;highlightedTitle&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;highlightedContent&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–π —Ä–∞–Ω–µ–µ –∫–ª–∞—Å—Å &lt;code&gt;DefaultSearchItem&lt;/code&gt; —Ä–∞—Å—à–∏—Ä–µ–Ω –ø–æ–ª—è–º–∏, –≤ –∫–∞–∂–¥–æ–º –∏–∑ –∫–æ—Ç–æ—Ä—ã—Ö –±—É–¥–µ—Ç —Ö—Ä–∞–Ω–∏—Ç—å—Å—è —Ñ—Ä–∞–≥–º–µ–Ω—Ç —Ç–µ–∫—Å—Ç–∞, –∞ –ø–æ–¥—Å–≤–µ—á–∏–≤–∞–µ–º–∞—è —Ñ—Ä–∞–∑–∞ –æ–±–µ—Ä–Ω—É—Ç–∞ –≤ –Ω–∞–±–æ—Ä—ã —Å–∏–º–≤–æ–ª–æ–≤ &lt;em&gt;[mazko.github.io]&lt;/em&gt; –∏ &lt;em&gt;[/mazko.github.io]&lt;/em&gt; - –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∏—Ö –º–æ–∂–Ω–æ –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è –∑–∞–º–µ–Ω–∏—Ç—å, –Ω–∞–ø—Ä–∏–º–µ—Ä, —Å –ø–æ–º–æ—â—å—é &lt;em&gt;–Ω–µ–∂–∞–¥–Ω—ã—Ö&lt;/em&gt; (non-greedy) —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –≤—ã—Ä–∞–∂–µ–Ω–∏–π. –¢–µ–ø–µ—Ä—å –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–æ–±—â–∏—Ç—å –æ–± –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö –∫–ª–∞—Å—Å—É &lt;code&gt;LuceneSearcher&lt;/code&gt;. –ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö, –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º–∞—è &lt;em&gt;jsp&lt;/em&gt;-–ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—é, —Ç–∞–∫–∂–µ –ø—Ä–µ—Ç–µ—Ä–ø–∏—Ç –Ω–µ–±–æ–ª—å—à–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π: &lt;code&gt;TakeResult&amp;lt;DefaultSearchItem&amp;gt;&lt;/code&gt; =&amp;gt; &lt;code&gt;TakeResult&amp;lt;HighlightedSearchItem&amp;gt;&lt;/code&gt;:&lt;/p&gt;
&lt;p&gt;&lt;em&gt;server/src/main/java/server/SearchServlet.java&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;package&lt;/span&gt; &lt;span class="nn"&gt;server&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.io.IOException&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;javax.servlet.ServletException&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;javax.servlet.http.HttpServlet&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;javax.servlet.http.HttpServletRequest&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;javax.servlet.http.HttpServletResponse&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;common.LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;SearchServlet&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;HttpServlet&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;QUERY_INPUT&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;query&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;RESULTS_PER_PAGE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;resperpage&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;CURRENT_PAGE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;currentpage&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

    &lt;span class="nd"&gt;@Override&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;doGet&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;HttpServletRequest&lt;/span&gt; &lt;span class="n"&gt;req&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;HttpServletResponse&lt;/span&gt; &lt;span class="n"&gt;res&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
            &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;ServletException&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;IOException&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;

        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;query&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;req&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getParameter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;SearchServlet&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;QUERY_INPUT&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;itemsPerPage&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;req&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getParameter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;SearchServlet&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;RESULTS_PER_PAGE&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;currentPage&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;req&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getParameter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;SearchServlet&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;CURRENT_PAGE&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;query&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="n"&gt;query&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;isEmpty&lt;/span&gt;&lt;span class="o"&gt;())&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;currentPageInt&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;itemsPerPageInt&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

            &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;currentPageInt&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;parseInt&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;currentPage&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;catch&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;NumberFormatException&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt;
            &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;itemsPerPageInt&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;parseInt&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;itemsPerPage&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;catch&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;NumberFormatException&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt;

            &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;req&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setAttribute&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;searchmodel&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                        &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;LuceneSearcher&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;HighlightedSearchItem&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;HighlightedAgregator&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;(&lt;/span&gt;
                            &lt;span class="n"&gt;HighlightedAgregator&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                            &lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;INDEX_PATH&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;query&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;trim&lt;/span&gt;&lt;span class="o"&gt;())&lt;/span&gt;
                                &lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;Take&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;itemsPerPageInt&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;currentPageInt&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;itemsPerPageInt&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;catch&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;Exception&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                &lt;span class="k"&gt;throw&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;ServletException&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;

        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getServletContext&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;getRequestDispatcher&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;/index.jsp&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;).&lt;/span&gt;&lt;span class="na"&gt;forward&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;req&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;res&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;em&gt;server/src/main/webapp/index.jsp&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;jsp:directive.page&lt;/span&gt; &lt;span class="na"&gt;language=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;java&amp;quot;&lt;/span&gt;
    &lt;span class="na"&gt;contentType=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;text/html; charset=UTF-8&amp;quot;&lt;/span&gt;
    &lt;span class="na"&gt;pageEncoding=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;UTF-8&amp;quot;&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;

&lt;span class="nt"&gt;&amp;lt;jsp:directive.page&lt;/span&gt; &lt;span class="na"&gt;import=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;server.TakeResult&amp;quot;&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;jsp:directive.page&lt;/span&gt; &lt;span class="na"&gt;import=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;server.SearchServlet&amp;quot;&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;jsp:directive.page&lt;/span&gt; &lt;span class="na"&gt;import=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;server.HighlightedSearchItem&amp;quot;&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;

&lt;span class="k"&gt;&amp;lt;%!&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;escapeHTML&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
      &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
      &lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;replaceAll&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&amp;amp;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;&amp;amp;amp;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
      &lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;replaceAll&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&amp;lt;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;&amp;amp;lt;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
      &lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;replaceAll&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&amp;gt;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;&amp;amp;gt;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
      &lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;replaceAll&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;\&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;&amp;amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
      &lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;replaceAll&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&amp;#39;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;&amp;amp;apos;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
      &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;highlight&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
      &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
      &lt;span class="k"&gt;return&lt;/span&gt;  &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;replaceAll&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;
          &lt;span class="s"&gt;&amp;quot;\\[mazko\\.github\\.io\\](.*?)\\[/mazko\\.github\\.io\\]&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; 
          &lt;span class="s"&gt;&amp;quot;&amp;lt;b style=\&amp;quot;color:red;\&amp;quot;&amp;gt;$1&amp;lt;/b&amp;gt;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;

&lt;span class="k"&gt;&amp;lt;%&lt;/span&gt; 
    &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;TakeResult&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;HighlightedSearchItem&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;model&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; 
        &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;TakeResult&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;HighlightedSearchItem&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;)&lt;/span&gt;&lt;span class="n"&gt;request&lt;/span&gt;
            &lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getAttribute&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;searchmodel&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

    &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;qDefValue&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;escapeHTML&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;request&lt;/span&gt;
        &lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getParameter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;SearchServlet&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;QUERY_INPUT&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
    &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;rPerPage&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getParameter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;
        &lt;span class="n"&gt;SearchServlet&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;RESULTS_PER_PAGE&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt; &lt;span class="o"&gt;?&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; 
            &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;parseInt&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;request&lt;/span&gt;
                &lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getParameter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;SearchServlet&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;RESULTS_PER_PAGE&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
    &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;cPage&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getParameter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;
        &lt;span class="n"&gt;SearchServlet&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;CURRENT_PAGE&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt; &lt;span class="o"&gt;?&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; 
            &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;parseInt&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;request&lt;/span&gt;
                &lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getParameter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;SearchServlet&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;CURRENT_PAGE&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
&lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;

&lt;span class="nt"&gt;&amp;lt;html&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;head&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;title&amp;gt;&lt;/span&gt;Lucene Highlighter Example&lt;span class="nt"&gt;&amp;lt;/title&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;meta&lt;/span&gt; &lt;span class="na"&gt;http-equiv=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Content-Type&amp;quot;&lt;/span&gt; 
              &lt;span class="na"&gt;content=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;text/html; charset=UTF-8&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;/head&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;body&amp;gt;&lt;/span&gt;

        &lt;span class="nt"&gt;&amp;lt;form&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;search&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;action=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;/search&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;accept-charset=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;UTF-8&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
            &lt;span class="nt"&gt;&amp;lt;p&lt;/span&gt; &lt;span class="na"&gt;align=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;center&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
                &lt;span class="nt"&gt;&amp;lt;input&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="k"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="n"&gt;SearchServlet&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;QUERY_INPUT&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;
                    &lt;span class="k"&gt;&amp;lt;%&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;qDefValue&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;
                        &lt;span class="na"&gt;value=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="k"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="n"&gt;qDefValue&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;
                    &lt;span class="k"&gt;&amp;lt;%&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;
                    &lt;span class="na"&gt;size=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;55&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;text-align:center;&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
            &lt;span class="nt"&gt;&amp;lt;/p&amp;gt;&lt;/span&gt;
            &lt;span class="nt"&gt;&amp;lt;p&lt;/span&gt; &lt;span class="na"&gt;align=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;center&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
                &lt;span class="nt"&gt;&amp;lt;input&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="k"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="n"&gt;SearchServlet&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;RESULTS_PER_PAGE&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt; 
                    &lt;span class="na"&gt;size=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;5&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;value=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="k"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="n"&gt;rPerPage&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;
                    &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;text-align:center;&amp;quot;&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
                &lt;span class="ni"&gt;&amp;amp;nbsp;&lt;/span&gt;Results Per Page&lt;span class="ni"&gt;&amp;amp;nbsp;&lt;/span&gt;
                &lt;span class="nt"&gt;&amp;lt;input&lt;/span&gt; &lt;span class="na"&gt;type=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;submit&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;value=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Search!&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
            &lt;span class="nt"&gt;&amp;lt;/p&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;/form&amp;gt;&lt;/span&gt;

        &lt;span class="k"&gt;&amp;lt;%&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;model&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;model&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getItems&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;
            &lt;span class="nt"&gt;&amp;lt;p&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;float:right;&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
                 Page &lt;span class="nt"&gt;&amp;lt;b&amp;gt;&lt;/span&gt;&lt;span class="k"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="n"&gt;cPage&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;/b&amp;gt;&lt;/span&gt; from &lt;span class="nt"&gt;&amp;lt;b&amp;gt;&lt;/span&gt;
                    &lt;span class="k"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="n"&gt;Math&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;ceil&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;
                            &lt;span class="o"&gt;((&lt;/span&gt;&lt;span class="kt"&gt;float&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="n"&gt;model&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;totalHits&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="n"&gt;rPerPage&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; 
                    &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;/b&amp;gt;&lt;/span&gt;
            &lt;span class="nt"&gt;&amp;lt;/p&amp;gt;&lt;/span&gt;
        &lt;span class="k"&gt;&amp;lt;%&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;

        &lt;span class="k"&gt;&amp;lt;%&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;model&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;model&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getItems&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;
            &lt;span class="k"&gt;&amp;lt;%&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cPage&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;
                &lt;span class="nt"&gt;&amp;lt;form&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;search&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;action=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;/search&amp;quot;&lt;/span&gt; 
                        &lt;span class="na"&gt;accept-charset=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;UTF-8&amp;quot;&lt;/span&gt;
                        &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;float:left;&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
                    &lt;span class="k"&gt;&amp;lt;%&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;qDefValue&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;
                        &lt;span class="nt"&gt;&amp;lt;input&lt;/span&gt; &lt;span class="na"&gt;type=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;hidden&amp;quot;&lt;/span&gt; 
                               &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="k"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="n"&gt;SearchServlet&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;QUERY_INPUT&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;
                               &lt;span class="na"&gt;value=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="k"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="n"&gt;qDefValue&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
                    &lt;span class="k"&gt;&amp;lt;%&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;
                    &lt;span class="nt"&gt;&amp;lt;input&lt;/span&gt; &lt;span class="na"&gt;type=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;hidden&amp;quot;&lt;/span&gt; 
                           &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="k"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="n"&gt;SearchServlet&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;RESULTS_PER_PAGE&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt; 
                           &lt;span class="na"&gt;value=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="k"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="n"&gt;rPerPage&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
                    &lt;span class="nt"&gt;&amp;lt;input&lt;/span&gt; &lt;span class="na"&gt;type=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;hidden&amp;quot;&lt;/span&gt; 
                           &lt;span class="na"&gt;name=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="k"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="n"&gt;SearchServlet&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;CURRENT_PAGE&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt; 
                           &lt;span class="na"&gt;value=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="k"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="n"&gt;cPage&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
                    &lt;span class="nt"&gt;&amp;lt;input&lt;/span&gt; &lt;span class="na"&gt;type=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;submit&amp;quot;&lt;/span&gt; 
                           &lt;span class="na"&gt;value=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="k"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="n"&gt;escapeHTML&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&amp;lt;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
                &lt;span class="nt"&gt;&amp;lt;/form&amp;gt;&lt;/span&gt;
            &lt;span class="k"&gt;&amp;lt;%&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;

            &lt;span class="k"&gt;&amp;lt;%&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;model&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;totalHits&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;cPage&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;rPerPage&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;
                &lt;span class="nt"&gt;&amp;lt;form&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;search&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;action=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;/search&amp;quot;&lt;/span&gt; 
                      &lt;span class="na"&gt;accept-charset=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;UTF-8&amp;quot;&lt;/span&gt; &lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
                    &lt;span class="k"&gt;&amp;lt;%&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;qDefValue&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;
                        &lt;span class="nt"&gt;&amp;lt;input&lt;/span&gt; &lt;span class="na"&gt;type=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;hidden&amp;quot;&lt;/span&gt; 
                               &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="k"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="n"&gt;SearchServlet&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;QUERY_INPUT&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;
                               &lt;span class="na"&gt;value=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="k"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="n"&gt;qDefValue&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
                    &lt;span class="k"&gt;&amp;lt;%&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;
                    &lt;span class="nt"&gt;&amp;lt;input&lt;/span&gt; &lt;span class="na"&gt;type=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;hidden&amp;quot;&lt;/span&gt; 
                           &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="k"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="n"&gt;SearchServlet&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;RESULTS_PER_PAGE&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt; 
                           &lt;span class="na"&gt;value=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="k"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="n"&gt;rPerPage&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
                    &lt;span class="nt"&gt;&amp;lt;input&lt;/span&gt; &lt;span class="na"&gt;type=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;hidden&amp;quot;&lt;/span&gt; 
                           &lt;span class="na"&gt;name=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="k"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="n"&gt;SearchServlet&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;CURRENT_PAGE&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt; 
                           &lt;span class="na"&gt;value=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="k"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="n"&gt;cPage&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
                    &lt;span class="nt"&gt;&amp;lt;input&lt;/span&gt; &lt;span class="na"&gt;type=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;submit&amp;quot;&lt;/span&gt; 
                           &lt;span class="na"&gt;value=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="k"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="n"&gt;escapeHTML&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&amp;gt;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
                &lt;span class="nt"&gt;&amp;lt;/form&amp;gt;&lt;/span&gt;
            &lt;span class="k"&gt;&amp;lt;%&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;
        &lt;span class="k"&gt;&amp;lt;%&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;

        &lt;span class="nt"&gt;&amp;lt;p&lt;/span&gt; &lt;span class="na"&gt;align=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;center&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;clear:both;&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
            &lt;span class="k"&gt;&amp;lt;%&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;model&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;
                &lt;span class="k"&gt;&amp;lt;%&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;model&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getItems&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;
                    &lt;span class="nt"&gt;&amp;lt;p&amp;gt;&lt;/span&gt;
                        &lt;span class="k"&gt;&amp;lt;%&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;HighlightedSearchItem&lt;/span&gt; &lt;span class="n"&gt;item&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; 
                               &lt;span class="n"&gt;model&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getItems&lt;/span&gt;&lt;span class="o"&gt;())&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;
                            &lt;span class="nt"&gt;&amp;lt;hr/&amp;gt;&lt;/span&gt;
                            &lt;span class="nt"&gt;&amp;lt;p&amp;gt;&amp;lt;b&amp;gt;&lt;/span&gt;Score: &lt;span class="nt"&gt;&amp;lt;/b&amp;gt;&lt;/span&gt;&lt;span class="k"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="n"&gt;item&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;score&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;/p&amp;gt;&lt;/span&gt;
                            &lt;span class="nt"&gt;&amp;lt;p&amp;gt;&amp;lt;b&amp;gt;&lt;/span&gt;Url: &lt;span class="nt"&gt;&amp;lt;/b&amp;gt;&amp;lt;a&lt;/span&gt; &lt;span class="na"&gt;href=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="k"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="n"&gt;item&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;uri&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
                                &lt;span class="k"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="n"&gt;item&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;uri&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;/a&amp;gt;&lt;/span&gt;
                            &lt;span class="nt"&gt;&amp;lt;/p&amp;gt;&lt;/span&gt;
                            &lt;span class="nt"&gt;&amp;lt;p&amp;gt;&amp;lt;b&amp;gt;&lt;/span&gt;Title: &lt;span class="nt"&gt;&amp;lt;/b&amp;gt;&lt;/span&gt;
                                &lt;span class="k"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="n"&gt;highlight&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;
                                        &lt;span class="n"&gt;escapeHTML&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;
                                            &lt;span class="n"&gt;item&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;highlightedTitle&lt;/span&gt;&lt;span class="o"&gt;))&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;
                            &lt;span class="nt"&gt;&amp;lt;/p&amp;gt;&lt;/span&gt;
                            &lt;span class="nt"&gt;&amp;lt;p&amp;gt;&amp;lt;b&amp;gt;&lt;/span&gt;Content: &lt;span class="nt"&gt;&amp;lt;/b&amp;gt;&lt;/span&gt;
                                &lt;span class="k"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="n"&gt;highlight&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;
                                        &lt;span class="n"&gt;escapeHTML&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;
                                            &lt;span class="n"&gt;item&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;highlightedContent&lt;/span&gt;&lt;span class="o"&gt;))&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;
                            &lt;span class="nt"&gt;&amp;lt;/p&amp;gt;&lt;/span&gt;
                        &lt;span class="k"&gt;&amp;lt;%&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;
                    &lt;span class="nt"&gt;&amp;lt;/p&amp;gt;&lt;/span&gt;
                &lt;span class="k"&gt;&amp;lt;%&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;
                    I&amp;#39;m sorry I couldn&amp;#39;t find what you were looking for.
                &lt;span class="k"&gt;&amp;lt;%&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;
            &lt;span class="k"&gt;&amp;lt;%&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;/p&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;p&lt;/span&gt; &lt;span class="na"&gt;align=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;center&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
            &lt;span class="nt"&gt;&amp;lt;a&lt;/span&gt; &lt;span class="na"&gt;href=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;http://mazko.github.io/&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;http://mazko.github.io/&lt;span class="nt"&gt;&amp;lt;/a&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;/p&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;/body&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/html&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–¢–µ–ø–µ—Ä—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ –≤—ã–≥–ª—è–¥—è—Ç –ø–æ–≤–µ—Å–µ–ª–µ–π:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ mvn clean install -pl server/ jetty:run
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="Screenshot" src="http://proiot.ru/blog/posts/2012/10/28/lucene-podsvetka-vkhozhdenii-v-rezultatakh-vydachi/linux_search_stem_hltr_sadov.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="Screenshot" src="http://proiot.ru/blog/posts/2012/10/28/lucene-podsvetka-vkhozhdenii-v-rezultatakh-vydachi/linux_search_stem_hltr_sadov1.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="Screenshot" src="http://proiot.ru/blog/posts/2012/10/28/lucene-podsvetka-vkhozhdenii-v-rezultatakh-vydachi/linux_search_stem_hltr_tested.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2012/10/29/lucene-sintaksis-zaprosov/"&gt;–î–∞–ª–µ–µ&lt;/a&gt; —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –ø–æ–∏—Å–∫–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ &lt;em&gt;Lucene&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2012/10/28/lucene-podsvetka-vkhozhdenii-v-rezultatakh-vydachi/lucene-tutorial.zip"&gt;–ò—Å—Ö–æ–¥–Ω–∏–∫–∏&lt;/a&gt;&lt;/p&gt;</content><category term="Lucene"></category><category term="JSP"></category><category term="Maven"></category><category term="regex"></category></entry><entry><title>Lucene - —è–∑—ã–∫–æ–≤—ã–µ –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä—ã</title><link href="http://proiot.ru/blog/posts/2012/10/27/lucene-iazykovye-analizatory/" rel="alternate"></link><published>2012-10-27T00:00:00+03:00</published><updated>2012-10-27T00:00:00+03:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2012-10-27:/blog/posts/2012/10/27/lucene-iazykovye-analizatory/</id><summary type="html">&lt;p&gt;–ö–∞–∫ –í–∞–º &lt;a href="http://proiot.ru/blog/posts/2012/10/21/lucene-postranichnyi-poisk/"&gt;–ø–æ–∏—Å–∫&lt;/a&gt; ? –ú—ã –≤–≤–æ–¥–∏–º –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∑–∞–ø—Ä–æ—Å–∞ —Å–ª–æ–≤–æ &lt;strong&gt;—Å–∞–¥&lt;/strong&gt; –∏ –ø–æ–ª—É—á–∞–µ–º &lt;strong&gt;0&lt;/strong&gt; (–ù–û–õ–¨) —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤, –≤ —Ç–æ –≤—Ä–µ–º—è –∫–∞–∫ —ç—Ç–æ –∂–µ —Å–ª–æ–≤–æ –≤ –¥—Ä—É–≥–æ–º –ø–∞–¥–µ–∂–µ - &lt;strong&gt;—Å–∞–¥—ã&lt;/strong&gt; - –¥–∞—ë—Ç —Ü–µ–ª—ã—Ö &lt;strong&gt;6&lt;/strong&gt; (–®–ï–°–¢–¨) ! –í—Å—ë –¥–µ–ª–æ –≤ —Ç–æ–º, —á—Ç–æ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ / –ø–æ–∏—Å–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä —Ç–µ–∫—Å—Ç–∞ - &lt;code&gt;StandardAnalyzer&lt;/code&gt;, –∫–æ—Ç–æ—Ä—ã–π –Ω–∏—á–µ–≥–æ –Ω–µ –∑–Ω–∞–µ—Ç –æ–± –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—è—Ö ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;p&gt;–ö–∞–∫ –í–∞–º &lt;a href="http://proiot.ru/blog/posts/2012/10/21/lucene-postranichnyi-poisk/"&gt;–ø–æ–∏—Å–∫&lt;/a&gt; ? –ú—ã –≤–≤–æ–¥–∏–º –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∑–∞–ø—Ä–æ—Å–∞ —Å–ª–æ–≤–æ &lt;strong&gt;—Å–∞–¥&lt;/strong&gt; –∏ –ø–æ–ª—É—á–∞–µ–º &lt;strong&gt;0&lt;/strong&gt; (–ù–û–õ–¨) —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤, –≤ —Ç–æ –≤—Ä–µ–º—è –∫–∞–∫ —ç—Ç–æ –∂–µ —Å–ª–æ–≤–æ –≤ –¥—Ä—É–≥–æ–º –ø–∞–¥–µ–∂–µ - &lt;strong&gt;—Å–∞–¥—ã&lt;/strong&gt; - –¥–∞—ë—Ç —Ü–µ–ª—ã—Ö &lt;strong&gt;6&lt;/strong&gt; (–®–ï–°–¢–¨) ! –í—Å—ë –¥–µ–ª–æ –≤ —Ç–æ–º, —á—Ç–æ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ / –ø–æ–∏—Å–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä —Ç–µ–∫—Å—Ç–∞ - &lt;code&gt;StandardAnalyzer&lt;/code&gt;, –∫–æ—Ç–æ—Ä—ã–π –Ω–∏—á–µ–≥–æ –Ω–µ –∑–Ω–∞–µ—Ç –æ–± –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç—è—Ö —Ç–æ–≥–æ –∏–ª–∏ –∏–Ω–æ–≥–æ —è–∑—ã–∫–∞. –ö–∞–∫–∏–µ –≤–æ–æ–±—â–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç –∞–ª–≥–æ—Ä–∏—Ç–º—ã –¥–ª—è &lt;em&gt;–ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ&lt;/em&gt; –≤—ã–¥–µ–ª–µ–Ω–∏—è –æ—Å–Ω–æ–≤—ã —Å–ª–æ–≤–∞ ? –û—á–µ–Ω—å —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω—ã–º–∏, –∏, —á—Ç–æ –Ω–µ–º–∞–ª–æ–≤–∞–∂–Ω–æ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å–∞ –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ - –±—ã—Å—Ç—Ä—ã–º–∏, —è–≤–ª—è—é—Ç—Å—è –∞–ª–≥–æ—Ä–∏—Ç–º—ã &lt;a href="http://ru.wikipedia.org/wiki/%D0%A1%D1%82%D0%B5%D0%BC%D0%BC%D0%B8%D0%BD%D0%B3" rel="nofollow"&gt;—Å—Ç–µ–º–º–∏–Ω–≥–∞&lt;/a&gt;, —Å—Ä–µ–¥–∏ –∫–æ—Ç–æ—Ä—ã—Ö, –Ω–∞–∏–±–æ–ª–µ–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã–º–∏ –∏ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–º–∏ —è–≤–ª—è—é—Ç—Å—è &lt;a href="http://ru.wikipedia.org/wiki/%D0%A1%D1%82%D0%B5%D0%BC%D0%BC%D0%B5%D1%80_%D0%9F%D0%BE%D1%80%D1%82%D0%B5%D1%80%D0%B0" rel="nofollow"&gt;–°—Ç–µ–º–º–µ—Ä—ã –ü–æ—Ä—Ç–µ—Ä–∞&lt;/a&gt; - –≤–ø–µ—Ä–≤—ã–µ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã–µ –µ—â—ë –≤ –¥–∞–ª—ë–∫–æ–º 1980 –≥–æ–¥—É. –í–≤–µ–¥–∏—Ç–µ –û–î–ù–û —Å–ª–æ–≤–æ, –≤—ã–±–µ—Ä–∏—Ç–µ —è–∑—ã–∫ –∏ –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "&lt;strong&gt;–°—Ç–µ–º–º–µ—Ä!&lt;/strong&gt;":&lt;/p&gt;
&lt;script type="text/javascript" src="http://proiot.ru/blog/posts/2012/10/27/lucene-iazykovye-analizatory/stem.js"&gt; &lt;/script&gt;

&lt;script type="text/javascript" src="http://proiot.ru/blog/posts/2012/10/27/lucene-iazykovye-analizatory/Snowball.min.js"&gt; &lt;/script&gt;

&lt;p&gt;
&lt;input maxlength="33" size="33" id="jssnowball_input" value="—Å–∞–¥—ã" style="text-align: left; padding:.3em;" type="text"/&gt;
&lt;select id="jssnowball_language" style="padding:.2em;"&gt;&lt;option value="russian"&gt;–†—É—Å—Å–∫–∏–π&lt;/option&gt;&lt;option value="danish"&gt;danish&lt;/option&gt;&lt;option value="dutch"&gt;dutch&lt;/option&gt;&lt;option value="finnish"&gt;finnish&lt;/option&gt;&lt;option value="french"&gt;french&lt;/option&gt;&lt;option value="german"&gt;german&lt;/option&gt;&lt;option value="hungarian"&gt;hungarian&lt;/option&gt;&lt;option value="italian"&gt;italian&lt;/option&gt;&lt;option value="norwegian"&gt;norwegian&lt;/option&gt;&lt;option value="portuguese"&gt;portuguese&lt;/option&gt;&lt;option value="english"&gt;english&lt;/option&gt;&lt;option value="spanish"&gt;spanish&lt;/option&gt;&lt;option value="swedish"&gt;swedish&lt;/option&gt;&lt;option value="romanian"&gt;romanian&lt;/option&gt;&lt;option value="turkish"&gt;turkish&lt;/option&gt;&lt;/select&gt;
&lt;button style="padding:.2em;" type="button" onclick="jssnowball_print();"&gt;&lt;noscript&gt;&lt;span style="color:red;"&gt;–í–∫–ª—é—á–∏—Ç–µ JavaScript ! &lt;/span&gt;&lt;/noscript&gt;–°—Ç–µ–º–º–µ—Ä!&lt;/button&gt;
&lt;/p&gt;

&lt;p id="jssnowball_result"&gt;
&lt;/p&gt;

&lt;p&gt;–•–æ—Ä–æ—à–∞—è –Ω–æ–≤–æ—Å—Ç—å - –≤ &lt;em&gt;Lucene&lt;/em&gt; —É–∂–µ –µ—Å—Ç—å –≥–æ—Ç–æ–≤—ã–µ –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä—ã –¥–ª—è –º–Ω–æ–≥–∏—Ö —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω—ã—Ö —è–∑—ã–∫–æ–≤, –≤ —Ç–æ–º —á–∏—Å–ª–µ –∏ –¥–ª—è —Ä—É—Å—Å–∫–æ–≥–æ, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –≤–∑—è—Ç—å –∏–∑ –∫–æ—Ä–æ–±–∫–∏. –í–æ–ø—Ä–æ—Å —Ç—É—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤ –∏–Ω–æ–π –ø–ª–æ—Å–∫–æ—Å—Ç–∏ - –∫–∞–∫ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å –ø–æ–∏—Å–∫, –∑–∞–¥–µ–π—Å—Ç–≤–æ–≤–∞–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∏–∑ –Ω–∏—Ö - –¥–ª—è —Ä—É—Å—Å–∫–æ—è–∑—ã—á–Ω—ã—Ö —Å–∞–π—Ç–æ–≤ –±—ã–ª–æ –±—ã –Ω–µ–ø–ª–æ—Ö–æ –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ—Ç—å –∏ –ê–Ω–≥–ª–∏–π—Å–∫–∏–π (&lt;code&gt;EnglishAnalyzer&lt;/code&gt;) –∏ –†—É—Å—Å–∫–∏–π (&lt;code&gt;RussianAnalyzer&lt;/code&gt;). –ú–æ–∂–Ω–æ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è—Ç—å —è–∑—ã–∫ —Ç–µ–∫—Å—Ç–∞ –∏ –∑–∞–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä, –æ–¥–Ω–∞–∫–æ —É —Ç–∞–∫–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è –µ—Å—Ç—å –ø–æ–¥–≤–æ–¥–Ω—ã–π –∫–∞–º–µ–Ω—å. –í—Å—ë –¥–µ–ª–æ –≤ —Ç–æ–º, —á—Ç–æ —Ç–æ—á–Ω–æ—Å—Ç—å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —è–∑—ã–∫–∞ –æ—á–µ–Ω—å —Å–∏–ª—å–Ω–æ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –æ–±—ä—ë–º–∞ —Ç–µ–∫—Å—Ç–∞ - —á–µ–º –æ–Ω –º–µ–Ω—å—à–µ, —Ç–µ–º –±–æ–ª—å—à–µ –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –æ—à–∏–±–∫–∏ –∏ —ç—Ç–æ –æ—Å–æ–±–µ–Ω–Ω–æ –∞–∫—Ç—É–∞–ª—å–Ω–æ –¥–ª—è –ø—Ä–æ—Ü–µ—Å—Å–∞ –ø–æ–∏—Å–∫–∞, –∫–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –≤—Å–µ–≥–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–ª–æ–≤ –≤ —Å—Ç—Ä–æ–∫—É –∑–∞–ø—Ä–æ—Å–∞. –û—á–µ–≤–∏–¥–Ω–æ, —á—Ç–æ –∞–ª–≥–æ—Ä–∏—Ç–º —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —è–∑—ã–∫–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–æ—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å.&lt;/p&gt;
&lt;p&gt;–í –¥–∞–Ω–Ω–æ–º –ø—Ä–∏–º–µ—Ä–µ –±—É–¥–µ—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–æ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ, —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤–∞–º–∏ &lt;em&gt;Lucene&lt;/em&gt;. –í —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –∏–Ω–¥–µ–∫—Å–∞ –¥–æ–±–∞–≤—è—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É —è–∑—ã–∫—É –ø–æ–ª—è. –î–ª—è –∫–∞–∂–¥–æ–≥–æ –ø–æ–ª—è –≤ &lt;em&gt;Lucene&lt;/em&gt; –º–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å —Å–≤–æ–π –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä, –∏—Å–ø–æ–ª—å–∑—É—è –∫–ª–∞—Å—Å &lt;code&gt;PerFieldAnalyzerWrapper&lt;/code&gt;:&lt;/p&gt;
&lt;p&gt;&lt;em&gt;common/src/main/java/common/LuceneBinding.java&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;package&lt;/span&gt; &lt;span class="nn"&gt;common&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.nio.file.Path&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.nio.file.Paths&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.HashMap&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.Map&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.analysis.Analyzer&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.analysis.en.EnglishAnalyzer&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.analysis.miscellaneous.PerFieldAnalyzerWrapper&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.analysis.ru.RussianAnalyzer&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.analysis.standard.StandardAnalyzer&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="cm"&gt;/* This class is used both by Crawler and SearchServlet */&lt;/span&gt;

&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;LuceneBinding&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;Path&lt;/span&gt; &lt;span class="n"&gt;INDEX_PATH&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Paths&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;get&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getProperty&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;user.home&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;lucene-tutorial-index&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;URI_FIELD&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;uri&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;TITLE_FIELD&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;title&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;CONTENT_FIELD&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;content&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

    &lt;span class="cm"&gt;/* Russian */&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;RUS_TITLE_FIELD&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;rustitle&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;RUS_CONTENT_FIELD&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;ruscontent&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

    &lt;span class="cm"&gt;/* English */&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;ENG_TITLE_FIELD&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;engtitle&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;ENG_CONTENT_FIELD&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;engcontent&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="n"&gt;Analyzer&lt;/span&gt; &lt;span class="nf"&gt;getAnalyzer&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;Map&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Analyzer&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;analyzers&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;HashMap&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Analyzer&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;();&lt;/span&gt;
        &lt;span class="n"&gt;analyzers&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;put&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;RUS_TITLE_FIELD&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;RussianAnalyzer&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
        &lt;span class="n"&gt;analyzers&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;put&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;RUS_CONTENT_FIELD&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;RussianAnalyzer&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
        &lt;span class="n"&gt;analyzers&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;put&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;ENG_TITLE_FIELD&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;EnglishAnalyzer&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
        &lt;span class="n"&gt;analyzers&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;put&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;ENG_CONTENT_FIELD&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;EnglishAnalyzer&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;

        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;PerFieldAnalyzerWrapper&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;StandardAnalyzer&lt;/span&gt;&lt;span class="o"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;analyzers&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–î–∞–Ω–Ω—ã–µ –ø–æ–ª—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–æ–±–∞–≤–∏—Ç—å –≤ –∏–Ω–¥–µ–∫—Å - –º–æ–∂–Ω–æ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º &lt;code&gt;setStored(false)&lt;/code&gt;, –ø–æ—Å–∫–æ–ª—å–∫—É –≤ –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ —É –¥–æ–∫—É–º–µ–Ω—Ç–∞ &lt;code&gt;Document&lt;/code&gt; —É–∂–µ –∏–º–µ—é—Ç—Å—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—è, —Ö—Ä–∞–Ω—è—â–∏–µ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è (—Å–æ–∑–¥–∞–Ω–Ω—ã–µ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º &lt;code&gt;setStored(true)&lt;/code&gt;) - –∑–∞—á–µ–º –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏ —Ç–µ–º —Å–∞–º—ã–º —Ä–∞–∑–¥—É–≤–∞—Ç—å —Ä–∞–∑–º–µ—Ä—ã –∏–Ω–¥–µ–∫—Å–∞.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;crawler/src/main/java/crawler/LuceneIndexer.java&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;package&lt;/span&gt; &lt;span class="nn"&gt;crawler&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.io.Closeable&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.io.IOException&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.log4j.Logger&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.document.Document&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.document.Field&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.document.FieldType&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.index.IndexOptions&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.index.IndexWriter&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.index.IndexWriterConfig&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.index.IndexWriterConfig.OpenMode&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.store.Directory&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.store.FSDirectory&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;common.LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;LuceneIndexer&lt;/span&gt; &lt;span class="kd"&gt;implements&lt;/span&gt; &lt;span class="n"&gt;Closeable&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;Logger&lt;/span&gt; &lt;span class="n"&gt;logger&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Logger&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getLogger&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LuceneIndexer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getName&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;

    &lt;span class="cm"&gt;/* IndexWriter is completely thread safe */&lt;/span&gt;

    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;IndexWriter&lt;/span&gt; &lt;span class="n"&gt;indexWriter&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

    &lt;span class="nd"&gt;@Override&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;close&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;IOException&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;indexWriter&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;LuceneIndexer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;logger&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;info&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Closing Index &amp;lt; &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; 
                    &lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;INDEX_PATH&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; &amp;gt; NumDocs: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;indexWriter&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;numDocs&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
            &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;indexWriter&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;close&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
            &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;indexWriter&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
            &lt;span class="n"&gt;LuceneIndexer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;logger&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;info&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Index Closed OK!&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;throw&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;IOException&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Index already closed&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;new_index&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;IOException&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;Directory&lt;/span&gt; &lt;span class="n"&gt;directory&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;FSDirectory&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;open&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;INDEX_PATH&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;IndexWriterConfig&lt;/span&gt; &lt;span class="n"&gt;iwConfig&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;IndexWriterConfig&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getAnalyzer&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
        &lt;span class="n"&gt;iwConfig&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setOpenMode&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;OpenMode&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;CREATE&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;indexWriter&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;IndexWriter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;directory&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;iwConfig&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;html&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;

        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;title&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;HtmlHelper&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;extractTitle&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;html&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;content&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;HtmlHelper&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;extractContent&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;html&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

        &lt;span class="n"&gt;LuceneIndexer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;logger&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;info&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;***** &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;url&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; *****&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;title&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;LuceneIndexer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;logger&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;info&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;title&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="n"&gt;LuceneIndexer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;logger&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;info&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;content&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;Document&lt;/span&gt; &lt;span class="n"&gt;doc&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Document&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;

        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;FieldType&lt;/span&gt; &lt;span class="n"&gt;urlType&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;FieldType&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="n"&gt;urlType&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setIndexOptions&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;IndexOptions&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;DOCS&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;urlType&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setStored&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;urlType&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setTokenized&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;urlType&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setStoreTermVectorOffsets&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;urlType&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setStoreTermVectorPayloads&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;urlType&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setStoreTermVectorPositions&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;urlType&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setStoreTermVectors&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;doc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Field&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;URI_FIELD&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;urlType&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;

        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;FieldType&lt;/span&gt; &lt;span class="n"&gt;tokType&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;FieldType&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="n"&gt;tokType&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setIndexOptions&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;IndexOptions&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;DOCS_AND_FREQS_AND_POSITIONS_AND_OFFSETS&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;tokType&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setStored&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;tokType&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setTokenized&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;tokType&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setStoreTermVectorOffsets&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;tokType&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setStoreTermVectorPayloads&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;tokType&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setStoreTermVectorPositions&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;tokType&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setStoreTermVectors&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;title&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;doc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Field&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;TITLE_FIELD&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;title&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;tokType&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="n"&gt;doc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Field&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;CONTENT_FIELD&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;content&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;tokType&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;

        &lt;span class="c1"&gt;// Language setStored(false) - we already have original value&lt;/span&gt;

        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;FieldType&lt;/span&gt; &lt;span class="n"&gt;lngType&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;FieldType&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="n"&gt;lngType&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setIndexOptions&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;IndexOptions&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;DOCS_AND_FREQS_AND_POSITIONS_AND_OFFSETS&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;lngType&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setStored&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;lngType&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setTokenized&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;lngType&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setStoreTermVectorOffsets&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;lngType&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setStoreTermVectorPayloads&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;lngType&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setStoreTermVectorPositions&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;lngType&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setStoreTermVectors&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

        &lt;span class="cm"&gt;/* Russian */&lt;/span&gt;

        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;title&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;doc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Field&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;RUS_TITLE_FIELD&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;title&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;lngType&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="n"&gt;doc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Field&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;RUS_CONTENT_FIELD&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;content&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;lngType&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;

        &lt;span class="cm"&gt;/* English */&lt;/span&gt;

        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;title&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;doc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Field&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;ENG_TITLE_FIELD&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;title&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;lngType&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="n"&gt;doc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Field&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;ENG_CONTENT_FIELD&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;content&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;lngType&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;

        &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;indexWriter&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;indexWriter&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;addDocument&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;doc&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;catch&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;IOException&lt;/span&gt; &lt;span class="n"&gt;ex&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;LuceneIndexer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;logger&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;error&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ex&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–î–ª—è –ø–æ–∏—Å–∫–∞ –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –ø–æ–ª—è–º –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º —É–∂–µ –∏–∑–≤–µ—Å—Ç–Ω—ã–π &lt;code&gt;MultiFieldQueryParser&lt;/code&gt;, –ø—Ä–æ—Å—Ç–æ —Ä–∞—Å—à–∏—Ä–∏–≤ –ø–µ—Ä–µ—á–µ–Ω—å –∏–Ω—Ç–µ—Ä–µ—Å—É—é—â–∏—Ö –Ω–∞—Å –ø–æ–ª–µ–π:&lt;/p&gt;
&lt;p&gt;&lt;em&gt;server/src/main/java/server/QueryHelper.java&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;package&lt;/span&gt; &lt;span class="nn"&gt;server&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.queryparser.classic.MultiFieldQueryParser&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.queryparser.classic.ParseException&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.queryparser.classic.QueryParser&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.queryparser.classic.QueryParserBase&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.search.Query&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;common.LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;QueryHelper&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="n"&gt;Query&lt;/span&gt; &lt;span class="nf"&gt;generate&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;story&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;ParseException&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;QueryParser&lt;/span&gt; &lt;span class="n"&gt;parser&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;MultiFieldQueryParser&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;
                &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; 
                        &lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;TITLE_FIELD&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; 
                        &lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;CONTENT_FIELD&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                        &lt;span class="cm"&gt;/* Russian */&lt;/span&gt;
                        &lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;RUS_TITLE_FIELD&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; 
                        &lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;RUS_CONTENT_FIELD&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                        &lt;span class="cm"&gt;/* English */&lt;/span&gt;
                        &lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;ENG_TITLE_FIELD&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; 
                        &lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;ENG_CONTENT_FIELD&lt;/span&gt; &lt;span class="o"&gt;},&lt;/span&gt;
                &lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getAnalyzer&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;

        &lt;span class="cm"&gt;/* Operator OR is used by default */&lt;/span&gt;

        &lt;span class="n"&gt;parser&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setDefaultOperator&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;QueryParser&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;Operator&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;AND&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;parser&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;parse&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;QueryParserBase&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;escape&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;story&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ü–æ—Å–ª–µ –ø–µ—Ä–µ–∏–¥–µ–∫—Å–∞—Ü–∏–∏ —Å–∞–π—Ç–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–æ–≤–æ–π –≤—ã–¥–∞—á–∏ –≤—ã–≥–ª—è–¥—è—Ç —É–∂–µ –Ω–∞–º–Ω–æ–≥–æ –ª—É—á—à–µ:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ mvn clean install &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; bash -c &lt;span class="s1"&gt;&amp;#39;mvn -pl server/ jetty:run &amp;amp; sleep 10 &amp;amp;&amp;amp; \&lt;/span&gt;
&lt;span class="s1"&gt;    mvn -pl crawler/ exec:java -Dexec.mainClass=&amp;quot;crawler.App&amp;quot; &amp;amp; \&lt;/span&gt;
&lt;span class="s1"&gt;    trap &amp;quot;kill -TERM -$$&amp;quot; SIGINT ; wait&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2012/10/27/lucene-iazykovye-analizatory/linux_search_stem_sad.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2012/10/27/lucene-iazykovye-analizatory/linux_search_stem_sad1.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2012/10/27/lucene-iazykovye-analizatory/linux_search_stem_test.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2012/10/27/lucene-iazykovye-analizatory/linux_search_stem_tests.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2012/10/28/lucene-podsvetka-vkhozhdenii-v-rezultatakh-vydachi/"&gt;–î–∞–ª–µ–µ&lt;/a&gt; —Ä–µ–∞–ª–∏–∑—É–µ–º –ø–æ–¥—Å–≤–µ—Ç–∫—É –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –≤—Ö–æ–∂–¥–µ–Ω–∏–π.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2012/10/27/lucene-iazykovye-analizatory/lucene-tutorial.zip"&gt;–ò—Å—Ö–æ–¥–Ω–∏–∫–∏&lt;/a&gt;&lt;/p&gt;</content><category term="Lucene"></category><category term="Stemming"></category></entry><entry><title>Lucene - –ø–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω—ã–π –ø–æ–∏—Å–∫</title><link href="http://proiot.ru/blog/posts/2012/10/21/lucene-postranichnyi-poisk/" rel="alternate"></link><published>2012-10-21T00:00:00+03:00</published><updated>2012-10-21T00:00:00+03:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2012-10-21:/blog/posts/2012/10/21/lucene-postranichnyi-poisk/</id><summary type="html">&lt;p&gt;–° &lt;a href="http://proiot.ru/blog/posts/2012/10/21/lucene-proverka-indeksa/"&gt;–∏–Ω–¥–µ–∫—Å–æ–º&lt;/a&gt; –≤ &lt;strong&gt;Lucene&lt;/strong&gt;, –∫–∞–∂–µ—Ç—Å—è, —Ä–∞–∑–æ–±—Ä–∞–ª–∏—Å—å - –Ω–∞ –æ—á–µ—Ä–µ–¥–∏ –ø–æ–∏—Å–∫. –î–∞–≤–∞–π—Ç–µ –Ω–µ–º–Ω–æ–∂–∫–æ –ø–æ–¥—É–º–∞–µ–º. –ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, –ø–æ–∏—Å–∫–æ–º –±—É–¥–µ—Ç –∑–∞–Ω–∏–º–∞—Ç—å—Å—è –∫–ª–∞—Å—Å &lt;code&gt;LuceneSearcher&lt;/code&gt;, –∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º –ø–æ–∏—Å–∫–∞ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∫–ª–∞—Å—Å &lt;code&gt;TakeResult&lt;/code&gt;, –≤ –∫–æ—Ç–æ—Ä–æ–º –±—É–¥–µ—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω–æ–π –≤—ã–¥–∞—á–∏. –ß—Ç–æ –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å—Å—è –≤ –±—É–¥—É—â–µ–º ? –ù–∞ –¥–∞–Ω–Ω–æ–º —ç—Ç–∞–ø–µ –º—ã –º–æ–∂–µ–º –ø—Ä–µ–¥–ø–æ–ª–æ–∂–∏—Ç—å, —á—Ç–æ –µ–¥–∏–Ω–∏—Ü–µ–π –ø–æ–∏—Å–∫–∞ –±—É–¥–µ—Ç –∫–ª–∞—Å—Å ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;p&gt;–° &lt;a href="http://proiot.ru/blog/posts/2012/10/21/lucene-proverka-indeksa/"&gt;–∏–Ω–¥–µ–∫—Å–æ–º&lt;/a&gt; –≤ &lt;strong&gt;Lucene&lt;/strong&gt;, –∫–∞–∂–µ—Ç—Å—è, —Ä–∞–∑–æ–±—Ä–∞–ª–∏—Å—å - –Ω–∞ –æ—á–µ—Ä–µ–¥–∏ –ø–æ–∏—Å–∫. –î–∞–≤–∞–π—Ç–µ –Ω–µ–º–Ω–æ–∂–∫–æ –ø–æ–¥—É–º–∞–µ–º. –ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, –ø–æ–∏—Å–∫–æ–º –±—É–¥–µ—Ç –∑–∞–Ω–∏–º–∞—Ç—å—Å—è –∫–ª–∞—Å—Å &lt;code&gt;LuceneSearcher&lt;/code&gt;, –∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º –ø–æ–∏—Å–∫–∞ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∫–ª–∞—Å—Å &lt;code&gt;TakeResult&lt;/code&gt;, –≤ –∫–æ—Ç–æ—Ä–æ–º –±—É–¥–µ—Ç –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω–æ–π –≤—ã–¥–∞—á–∏. –ß—Ç–æ –º–æ–∂–µ—Ç –∏–∑–º–µ–Ω–∏—Ç—å—Å—è –≤ –±—É–¥—É—â–µ–º ? –ù–∞ –¥–∞–Ω–Ω–æ–º —ç—Ç–∞–ø–µ –º—ã –º–æ–∂–µ–º –ø—Ä–µ–¥–ø–æ–ª–æ–∂–∏—Ç—å, —á—Ç–æ –µ–¥–∏–Ω–∏—Ü–µ–π –ø–æ–∏—Å–∫–∞ –±—É–¥–µ—Ç –∫–ª–∞—Å—Å –≤ –∫–æ—Ç–æ—Ä–æ–º –±—É–¥—É—Ç –¥–≤–∞ –ø–æ–ª—è - &lt;em&gt;content&lt;/em&gt; –∏ &lt;em&gt;title&lt;/em&gt;. –ê –µ—Å–ª–∏ –∏–∑–º–µ–Ω–∏—Ç—Å—è —Å–∞–π—Ç –∏–ª–∏ –Ω–∞–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—å—Å—è –∫–∞–∫–∞—è-—Ç–æ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö –≤—ã–¥–∞—á–∏ ? –ü—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è –∏ –Ω–∞–ø–æ–ª–Ω–µ–Ω–∏—è –∫–ª–∞—Å—Å–∞ - –µ–¥–∏–Ω–∏—Ü—ã –ø–æ–∏—Å–∫–∞ –ª—É—á—à–µ –≤—ã–Ω–µ—Å—Ç–∏ –∑–∞ –ø—Ä–µ–¥–µ–ª—ã &lt;code&gt;LuceneSearcher&lt;/code&gt;, –¥–ª—è —ç—Ç–æ–π —Ü–µ–ª–∏ –º–æ–∂–Ω–æ –∑–∞–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å –º–µ—Ö–∞–Ω–∏–∑–º &lt;em&gt;—à–∞–±–ª–æ–Ω–æ–≤&lt;/em&gt; (&lt;em&gt;generic&lt;/em&gt;):&lt;/p&gt;
&lt;p&gt;&lt;em&gt;pom.xml&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;project&lt;/span&gt; &lt;span class="na"&gt;xmlns=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;http://maven.apache.org/POM/4.0.0&amp;quot;&lt;/span&gt; 
  &lt;span class="na"&gt;xmlns:xsi=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;http://www.w3.org/2001/XMLSchema-instance&amp;quot;&lt;/span&gt;
  &lt;span class="na"&gt;xsi:schemaLocation=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;modelVersion&amp;gt;&lt;/span&gt;4.0.0&lt;span class="nt"&gt;&amp;lt;/modelVersion&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;tutorial.lucene&lt;span class="nt"&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;parent&lt;span class="nt"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;packaging&amp;gt;&lt;/span&gt;pom&lt;span class="nt"&gt;&amp;lt;/packaging&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;version&amp;gt;&lt;/span&gt;1.0&lt;span class="nt"&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;dependencies&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.apache.lucene&lt;span class="nt"&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;lucene-core&lt;span class="nt"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;version&amp;gt;&lt;/span&gt;6.0.0&lt;span class="nt"&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.apache.lucene&lt;span class="nt"&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;lucene-analyzers-common&lt;span class="nt"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;version&amp;gt;&lt;/span&gt;6.0.0&lt;span class="nt"&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.apache.lucene&lt;span class="nt"&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;lucene-queryparser&lt;span class="nt"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;version&amp;gt;&lt;/span&gt;6.0.0&lt;span class="nt"&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;/dependencies&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;modules&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;module&amp;gt;&lt;/span&gt;server&lt;span class="nt"&gt;&amp;lt;/module&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;module&amp;gt;&lt;/span&gt;crawler&lt;span class="nt"&gt;&amp;lt;/module&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;module&amp;gt;&lt;/span&gt;common&lt;span class="nt"&gt;&amp;lt;/module&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;/modules&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;build&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;plugins&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;plugin&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.apache.maven.plugins&lt;span class="nt"&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;maven-compiler-plugin&lt;span class="nt"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;version&amp;gt;&lt;/span&gt;3.5.1&lt;span class="nt"&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;configuration&amp;gt;&lt;/span&gt;
          &lt;span class="nt"&gt;&amp;lt;source&amp;gt;&lt;/span&gt;1.8&lt;span class="nt"&gt;&amp;lt;/source&amp;gt;&lt;/span&gt;
          &lt;span class="nt"&gt;&amp;lt;target&amp;gt;&lt;/span&gt;1.8&lt;span class="nt"&gt;&amp;lt;/target&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;/configuration&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;/plugin&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;/plugins&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;/build&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/project&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;em&gt;server/src/main/java/server/TakeResult.java&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;package&lt;/span&gt; &lt;span class="nn"&gt;server&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.io.IOException&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.Collection&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.Collections&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.queryparser.classic.ParseException&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;TakeResult&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;T&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;totalHits&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;Collection&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;T&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;items&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

    &lt;span class="kd"&gt;protected&lt;/span&gt; &lt;span class="nf"&gt;TakeResult&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;totalHits&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;Collection&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;T&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;items&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;totalHits&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;totalHits&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;items&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;items&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;Collection&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;T&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nf"&gt;getItems&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;items&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;Collections&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;unmodifiableCollection&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;items&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="kd"&gt;interface&lt;/span&gt; &lt;span class="nc"&gt;ITakeble&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;T&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;TakeResult&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;T&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nf"&gt;Take&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;count&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;start&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
                &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;ParseException&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;IOException&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;InstantiationException&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;IllegalAccessException&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;em&gt;server/src/main/java/server/LuceneSearcher.java&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;package&lt;/span&gt; &lt;span class="nn"&gt;server&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.io.IOException&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.nio.file.Path&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.ArrayList&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.List&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.index.CorruptIndexException&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.index.DirectoryReader&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.index.IndexReader&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.queryparser.classic.ParseException&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.search.IndexSearcher&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.search.Query&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.search.ScoreDoc&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.search.TopDocs&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.search.TopScoreDocCollector&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.store.Directory&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.store.FSDirectory&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kd"&gt;abstract&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Aggregator&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;T&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;protected&lt;/span&gt; &lt;span class="n"&gt;Query&lt;/span&gt; &lt;span class="n"&gt;query&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;protected&lt;/span&gt; &lt;span class="n"&gt;IndexSearcher&lt;/span&gt; &lt;span class="n"&gt;indexSearcher&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

    &lt;span class="kd"&gt;abstract&lt;/span&gt; &lt;span class="n"&gt;T&lt;/span&gt; &lt;span class="nf"&gt;aggregate&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ScoreDoc&lt;/span&gt; &lt;span class="n"&gt;sd&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;IOException&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;CorruptIndexException&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;

&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;LuceneSearcher&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;T&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;Aggregator&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;T&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&lt;/span&gt; &lt;span class="kd"&gt;implements&lt;/span&gt; &lt;span class="n"&gt;TakeResult&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;ITakeble&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;T&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;

    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;story&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;Class&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;classA&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

    &lt;span class="cm"&gt;/* IndexReader is thread safe - one instance for all requests */&lt;/span&gt;

    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kd"&gt;volatile&lt;/span&gt; &lt;span class="n"&gt;IndexReader&lt;/span&gt; &lt;span class="n"&gt;indexReader&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

    &lt;span class="n"&gt;LuceneSearcher&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;Class&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;A&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;classA&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; 
        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;Path&lt;/span&gt; &lt;span class="n"&gt;indexPath&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;story&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;IOException&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;

        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;story&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;story&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;classA&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;classA&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LuceneSearcher&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;indexReader&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="kd"&gt;synchronized&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LuceneSearcher&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LuceneSearcher&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;indexReader&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                    &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;Directory&lt;/span&gt; &lt;span class="n"&gt;dir&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;FSDirectory&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;open&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;indexPath&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
                    &lt;span class="n"&gt;LuceneSearcher&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;indexReader&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;DirectoryReader&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;open&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;dir&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
                &lt;span class="o"&gt;}&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="nd"&gt;@Override&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;TakeResult&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;T&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nf"&gt;Take&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;count&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;start&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
            &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;ParseException&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;IOException&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;InstantiationException&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;IllegalAccessException&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;

        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;nDocs&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;start&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;count&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;Query&lt;/span&gt; &lt;span class="n"&gt;query&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;QueryHelper&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;generate&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;story&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;IndexSearcher&lt;/span&gt; &lt;span class="n"&gt;indexSearcher&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;IndexSearcher&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LuceneSearcher&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;indexReader&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;TopScoreDocCollector&lt;/span&gt; &lt;span class="n"&gt;collector&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;TopScoreDocCollector&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;create&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Math&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;max&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;nDocs&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="n"&gt;indexSearcher&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;search&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;query&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;collector&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;TopDocs&lt;/span&gt; &lt;span class="n"&gt;topDocs&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;collector&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;topDocs&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;

        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;nDocs&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;TakeResult&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;T&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;(&lt;/span&gt;&lt;span class="n"&gt;topDocs&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;totalHits&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;

        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;ScoreDoc&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;scoreDocs&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;topDocs&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;scoreDocs&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;length&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;scoreDocs&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;start&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;length&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;TakeResult&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;T&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;(&lt;/span&gt;&lt;span class="n"&gt;topDocs&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;totalHits&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;

        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;List&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;T&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;items&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;ArrayList&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;T&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;(&lt;/span&gt;&lt;span class="n"&gt;length&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;A&lt;/span&gt; &lt;span class="n"&gt;aggregator&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;classA&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;newInstance&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="n"&gt;aggregator&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;query&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;query&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;aggregator&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;indexSearcher&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;indexSearcher&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;start&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;scoreDocs&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;items&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;start&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;aggregator&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;aggregate&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;scoreDocs&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;]));&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;

        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;TakeResult&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;T&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;(&lt;/span&gt;&lt;span class="n"&gt;topDocs&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;totalHits&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;items&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ü—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–≥–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –∫–ª–∞—Å—Å–∞ &lt;code&gt;IndexReader&lt;/code&gt;, –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ä–∞–∑–º–µ—Ä–∞ —Ç–µ–∫—É—â–µ–≥–æ –∏–Ω–¥–µ–∫—Å–∞, –º–æ–∂–µ—Ç –±—ã—Ç—å –æ—á–µ–Ω—å –∑–∞—Ç—Ä–∞—Ç–Ω—ã–º —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤ —Å–∏—Å—Ç–µ–º—ã - CPU –∏ –û–ó–£. –ü–æ—ç—Ç–æ–º—É –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –Ω–∞—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è —Å–æ–∑–¥–∞—Ç—å –≤ –ø—Ä–æ–≥—Ä–∞–º–º–µ –û–î–ò–ù —ç–∫–∑–µ–º–ø–ª—è—Ä –¥–∞–Ω–Ω–æ–≥–æ –∫–ª–∞—Å—Å–∞ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–≥–æ —Å–æ–≤–º–µ—Å—Ç–Ω–æ –º–µ–∂–¥—É –≤—Å–µ–º–∏ –ø–æ—Ç–æ–∫–∞–º–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø–æ –º–µ—Ä–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ - &lt;code&gt;IndexReader&lt;/code&gt; –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–ª—Å—è –∫–∞–∫ &lt;a href="https://lucene.apache.org/core/6_0_0/core/org/apache/lucene/index/IndexReader.html" rel="nofollow"&gt;–ø–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–π&lt;/a&gt; (thread safe). –° —É—á—ë—Ç–æ–º –≤—ã—à–µ—Å–∫–∞–∑–∞–Ω–Ω–æ–≥–æ –≤ –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ (—Å–º. &lt;em&gt;LuceneSearcher.java&lt;/em&gt;) &lt;code&gt;IndexReader&lt;/code&gt; –º–æ–∂–µ—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –≤ –æ–¥–Ω–æ–º —ç–∫–∑–µ–º–ø–ª—è—Ä–µ, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è &lt;em&gt;–ª–µ–Ω–∏–≤–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è&lt;/em&gt; –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø—É double checked locking (&lt;a href="http://ru.wikipedia.org/wiki/Double_checked_locking" rel="nofollow"&gt;–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ —Å –¥–≤–æ–π–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–æ–π&lt;/a&gt;), –≤ —Å–≤—è–∑–∏ —Å —á–µ–º –ø–æ–ª–µ &lt;code&gt;indexReader&lt;/code&gt; –æ–±—ä—è–≤–ª–µ–Ω–æ –∫–∞–∫ &lt;code&gt;volatile&lt;/code&gt;. –ï—Å–ª–∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∏–Ω–¥–µ–∫—Å–∞ –∏–∑–º–µ–Ω–∏—Ç—å—Å—è –∏–∑–≤–Ω–µ (—á—Ç–æ –≤–ø–æ–ª–Ω–µ –≤–æ–∑–º–æ–∂–Ω–æ –≤ —Ä–µ–∞–ª—å–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö), &lt;code&gt;IndexReader&lt;/code&gt; –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ–±–Ω–æ–≤–∏—Ç—å - –¥–ª—è —ç—Ç–æ–π —Ü–µ–ª–∏ —Ü–µ–ª–µ—Å–æ–æ–±—Ä–∞–∑–Ω–µ–π –Ω–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä, –∞ –ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –º–µ—Ç–æ–¥ &lt;code&gt;IndexReader.reopen()&lt;/code&gt;. –í –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ, –µ—Å–ª–∏ –Ω–µ –æ–±–Ω–æ–≤–∏—Ç—å —ç–∫–∑–µ–º–ø–ª—è—Ä &lt;code&gt;IndexReader&lt;/code&gt;, –Ω–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ, –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã–µ –≤ –∏–Ω–¥–µ–∫—Å, –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–æ–≤–æ–π –≤—ã–¥–∞—á–∏ –Ω–µ –ø–æ–ø–∞–¥—É—Ç.&lt;/p&gt;
&lt;p&gt;–ö–æ–≥–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –∫–∞–∫–æ–µ-–ª–∏–±–æ —Å–ª–æ–≤–æ / —Ñ—Ä–∞–∑—É –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø–æ–∏—Å–∫–æ–≤–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞, —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ —Å—Ç—Ä–æ–∫–∞, —á—Ç–æ–±—ã —Å –Ω–µ–π –º–æ–≥ —Ä–∞–±–æ—Ç–∞—Ç—å &lt;em&gt;Lucene&lt;/em&gt; –µ—ë –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å / —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å –≤ —ç–∫–∑–µ–º–ø–ª—è—Ä –∫–ª–∞—Å—Å–∞ &lt;code&gt;Query&lt;/code&gt; . –ü–æ—á–µ–º—É –∏–º–µ–Ω–Ω–æ —Ç–∞–∫ –±—É–¥–µ—Ç –ø–æ–Ω—è—Ç–Ω–æ, –∫–æ–≥–¥–∞ –±—É–¥–µ—Ç –æ–ø–∏—Å–∞–Ω —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è &lt;em&gt;Lucene&lt;/em&gt;. –í –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è &lt;code&gt;MultiFieldQueryParser&lt;/code&gt;, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Å—É—â–µ—Å—Ç–≤–ª—è—Ç—å –ø–æ–∏—Å–∫ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ(–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ) –ø–æ –Ω–µ—Å–∫–æ–ª—å–∫–∏–º –∑–∞–¥–∞–Ω–Ω—ã–º –ø–æ–ª—è–º –≤ –∏–Ω–¥–µ–∫—Å–µ:&lt;/p&gt;
&lt;p&gt;&lt;em&gt;server/src/main/java/server/QueryHelper.java&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;package&lt;/span&gt; &lt;span class="nn"&gt;server&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.queryparser.classic.MultiFieldQueryParser&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.queryparser.classic.ParseException&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.queryparser.classic.QueryParser&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.queryparser.classic.QueryParserBase&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.search.Query&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;common.LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;QueryHelper&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="n"&gt;Query&lt;/span&gt; &lt;span class="nf"&gt;generate&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;story&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;ParseException&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;QueryParser&lt;/span&gt; &lt;span class="n"&gt;parser&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;MultiFieldQueryParser&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;
                &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; 
                    &lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;TITLE_FIELD&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; 
                    &lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;CONTENT_FIELD&lt;/span&gt; &lt;span class="o"&gt;},&lt;/span&gt; 
                &lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getAnalyzer&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;

        &lt;span class="cm"&gt;/* Operator OR is used by default */&lt;/span&gt;

        &lt;span class="n"&gt;parser&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setDefaultOperator&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;QueryParser&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;Operator&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;AND&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;parser&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;parse&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;QueryParserBase&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;escape&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;story&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø—Ä–æ—Å—Ç–æ–π –∫–ª–∞—Å—Å, –∫–æ—Ç–æ—Ä—ã–π —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –Ω–∞–π–¥–µ–Ω–Ω–æ–º –¥–æ–∫—É–º–µ–Ω—Ç–µ. –ü–æ–º–∏–º–æ –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –Ω–∞–º &lt;em&gt;title&lt;/em&gt;, &lt;em&gt;content&lt;/em&gt; –∏ &lt;em&gt;uri&lt;/em&gt; –ø–æ—è–≤–ª—è–µ—Ç—Å—è –Ω–æ–≤–∞—è —Å—É—â–Ω–æ—Å—Ç—å - &lt;em&gt;score&lt;/em&gt;. –≠—Ç–æ —á–∏—Å–ª–æ–≤–æ–π –ø–æ–∫–∞–∑–∞—Ç–µ–ª—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –Ω–∞–π–¥–µ–Ω–Ω–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞ —Ç–æ–º—É –∑–∞–ø—Ä–æ—Å—É, –∫–æ—Ç–æ—Ä—ã–π –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è &lt;em&gt;Lucene&lt;/em&gt; –¥–ª—è –µ–≥–æ –ø–æ–∏—Å–∫–∞ - &lt;strong&gt;—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;server/src/main/java/server/DefaultSearchItem.java&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;package&lt;/span&gt; &lt;span class="nn"&gt;server&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.io.IOException&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.document.Document&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.index.CorruptIndexException&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.search.ScoreDoc&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;common.LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;DefaultSearchItem&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;title&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;content&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;uri&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="kt"&gt;float&lt;/span&gt; &lt;span class="n"&gt;score&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

    &lt;span class="n"&gt;DefaultSearchItem&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;title&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; 
        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;content&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;uri&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="kt"&gt;float&lt;/span&gt; &lt;span class="n"&gt;score&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;

        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;uri&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;uri&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;title&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;title&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;content&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;content&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;score&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;score&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;

&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;DefaultAgregator&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;Aggregator&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;DefaultSearchItem&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;

    &lt;span class="nd"&gt;@Override&lt;/span&gt;
    &lt;span class="n"&gt;DefaultSearchItem&lt;/span&gt; &lt;span class="nf"&gt;aggregate&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;ScoreDoc&lt;/span&gt; &lt;span class="n"&gt;sd&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;IOException&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;CorruptIndexException&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;Document&lt;/span&gt; &lt;span class="n"&gt;doc&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;indexSearcher&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;doc&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sd&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;doc&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;DefaultSearchItem&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;
            &lt;span class="n"&gt;doc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;get&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;TITLE_FIELD&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt; 
            &lt;span class="n"&gt;doc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;get&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;CONTENT_FIELD&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt;
            &lt;span class="n"&gt;doc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;get&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;URI_FIELD&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt; 
            &lt;span class="n"&gt;sd&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;score&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ù–∞ –¥–∞–Ω–Ω–æ–º —ç—Ç–∞–ø–µ —É–∂–µ –∏–º–µ—é—Ç—Å—è –≤—Å–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –º–µ—Ö–∞–Ω–∏–∑–º—ã –¥–ª—è —Ä–µ–∞–ª–∏–∑–∏–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞ –ø–æ–∏—Å–∫–∞ —Å –ø–æ—Å—Ç—Ä–∞–Ω–∏—á–Ω–æ–π –≤—ã–¥–∞—á–µ–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤. –í –∫–∞—á–µ—Å—Ç–≤–µ –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º–æ–π &lt;em&gt;jsp&lt;/em&gt;-–ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—é &lt;em&gt;–º–æ–¥–µ–ª–∏&lt;/em&gt; –¥–∞–Ω–Ω—ã—Ö –±—É–¥–µ—Ç –≤—ã—Å—Ç—É–ø–∞—Ç—å —ç–∫–∑–µ–º–ø–ª—è—Ä –∫–ª–∞—Å—Å–∞ &lt;code&gt;TakeResult&amp;lt;DefaultSearchItem&amp;gt;&lt;/code&gt;:&lt;/p&gt;
&lt;p&gt;&lt;em&gt;server/src/main/java/server/SearchServlet.java&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;package&lt;/span&gt; &lt;span class="nn"&gt;server&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.io.IOException&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;javax.servlet.ServletException&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;javax.servlet.http.HttpServlet&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;javax.servlet.http.HttpServletRequest&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;javax.servlet.http.HttpServletResponse&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;common.LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;SearchServlet&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;HttpServlet&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;QUERY_INPUT&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;query&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;RESULTS_PER_PAGE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;resperpage&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;CURRENT_PAGE&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;currentpage&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

    &lt;span class="nd"&gt;@Override&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;doGet&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;HttpServletRequest&lt;/span&gt; &lt;span class="n"&gt;req&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;HttpServletResponse&lt;/span&gt; &lt;span class="n"&gt;res&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
            &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;ServletException&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;IOException&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;

        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;query&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;req&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getParameter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;SearchServlet&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;QUERY_INPUT&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;itemsPerPage&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;req&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getParameter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;SearchServlet&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;RESULTS_PER_PAGE&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;currentPage&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;req&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getParameter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;SearchServlet&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;CURRENT_PAGE&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;query&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="n"&gt;query&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;isEmpty&lt;/span&gt;&lt;span class="o"&gt;())&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;currentPageInt&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;itemsPerPageInt&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

            &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;currentPageInt&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;parseInt&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;currentPage&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;catch&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;NumberFormatException&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt;
            &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;itemsPerPageInt&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;parseInt&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;itemsPerPage&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;catch&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;NumberFormatException&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt;

            &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;req&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setAttribute&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;searchmodel&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                        &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;LuceneSearcher&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;DefaultSearchItem&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;DefaultAgregator&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;(&lt;/span&gt;
                                &lt;span class="n"&gt;DefaultAgregator&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                                &lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;INDEX_PATH&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;query&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;trim&lt;/span&gt;&lt;span class="o"&gt;())&lt;/span&gt;
                                &lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;Take&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;
                                    &lt;span class="n"&gt;itemsPerPageInt&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt;
                                    &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;currentPageInt&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;itemsPerPageInt&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;catch&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;Exception&lt;/span&gt; &lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                &lt;span class="k"&gt;throw&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;ServletException&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;e&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;

        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getServletContext&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;getRequestDispatcher&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;/index.jsp&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;).&lt;/span&gt;&lt;span class="na"&gt;forward&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;req&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;res&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;em&gt;server/src/main/webapp/index.jsp&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;jsp:directive.page&lt;/span&gt; &lt;span class="na"&gt;language=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;java&amp;quot;&lt;/span&gt;
    &lt;span class="na"&gt;contentType=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;text/html; charset=UTF-8&amp;quot;&lt;/span&gt;
    &lt;span class="na"&gt;pageEncoding=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;UTF-8&amp;quot;&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;

&lt;span class="nt"&gt;&amp;lt;jsp:directive.page&lt;/span&gt; &lt;span class="na"&gt;import=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;server.TakeResult&amp;quot;&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;jsp:directive.page&lt;/span&gt; &lt;span class="na"&gt;import=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;server.SearchServlet&amp;quot;&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;jsp:directive.page&lt;/span&gt; &lt;span class="na"&gt;import=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;server.DefaultSearchItem&amp;quot;&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;

&lt;span class="k"&gt;&amp;lt;%!&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;escapeHTML&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
          &lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;replaceAll&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&amp;amp;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;&amp;amp;amp;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
          &lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;replaceAll&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&amp;lt;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;&amp;amp;lt;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
          &lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;replaceAll&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&amp;gt;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;&amp;amp;gt;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
          &lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;replaceAll&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;\&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;&amp;amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
          &lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;replaceAll&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&amp;#39;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;&amp;amp;apos;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
          &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;ellipsize&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;max&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
          &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;max&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
              &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;end&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; ...&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
              &lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;substring&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;max&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;end&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;length&lt;/span&gt;&lt;span class="o"&gt;()).&lt;/span&gt;&lt;span class="na"&gt;trim&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;end&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
          &lt;span class="o"&gt;}&lt;/span&gt;
          &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;

&lt;span class="k"&gt;&amp;lt;%&lt;/span&gt; 
    &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;TakeResult&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;DefaultSearchItem&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;model&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; 
        &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;TakeResult&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;DefaultSearchItem&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;)&lt;/span&gt;&lt;span class="n"&gt;request&lt;/span&gt;
            &lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getAttribute&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;searchmodel&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

    &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;qDefValue&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;escapeHTML&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;request&lt;/span&gt;
        &lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getParameter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;SearchServlet&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;QUERY_INPUT&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
    &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;rPerPage&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getParameter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;
        &lt;span class="n"&gt;SearchServlet&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;RESULTS_PER_PAGE&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt; &lt;span class="o"&gt;?&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; 
            &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;parseInt&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;request&lt;/span&gt;
                &lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getParameter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;SearchServlet&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;RESULTS_PER_PAGE&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
    &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;cPage&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getParameter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;
        &lt;span class="n"&gt;SearchServlet&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;CURRENT_PAGE&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt; &lt;span class="o"&gt;?&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; 
            &lt;span class="n"&gt;Integer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;parseInt&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;request&lt;/span&gt;
                &lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getParameter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;SearchServlet&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;CURRENT_PAGE&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
&lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;

&lt;span class="nt"&gt;&amp;lt;html&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;head&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;title&amp;gt;&lt;/span&gt;Lucene Search Example&lt;span class="nt"&gt;&amp;lt;/title&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;meta&lt;/span&gt; &lt;span class="na"&gt;http-equiv=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Content-Type&amp;quot;&lt;/span&gt; 
            &lt;span class="na"&gt;content=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;text/html; charset=UTF-8&amp;quot;&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;/head&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;body&amp;gt;&lt;/span&gt;

        &lt;span class="nt"&gt;&amp;lt;form&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;search&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;action=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;/search&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;accept-charset=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;UTF-8&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
            &lt;span class="nt"&gt;&amp;lt;p&lt;/span&gt; &lt;span class="na"&gt;align=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;center&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
                &lt;span class="nt"&gt;&amp;lt;input&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="k"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="n"&gt;SearchServlet&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;QUERY_INPUT&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;
                    &lt;span class="k"&gt;&amp;lt;%&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;qDefValue&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;
                        &lt;span class="na"&gt;value=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="k"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="n"&gt;qDefValue&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;
                    &lt;span class="k"&gt;&amp;lt;%&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;
                    &lt;span class="na"&gt;size=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;55&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;text-align:center;&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
            &lt;span class="nt"&gt;&amp;lt;/p&amp;gt;&lt;/span&gt;
            &lt;span class="nt"&gt;&amp;lt;p&lt;/span&gt; &lt;span class="na"&gt;align=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;center&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
                &lt;span class="nt"&gt;&amp;lt;input&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="k"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="n"&gt;SearchServlet&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;RESULTS_PER_PAGE&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt; 
                    &lt;span class="na"&gt;size=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;5&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;value=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="k"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="n"&gt;rPerPage&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;
                    &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;text-align:center;&amp;quot;&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
                &lt;span class="ni"&gt;&amp;amp;nbsp;&lt;/span&gt;Results Per Page&lt;span class="ni"&gt;&amp;amp;nbsp;&lt;/span&gt;
                &lt;span class="nt"&gt;&amp;lt;input&lt;/span&gt; &lt;span class="na"&gt;type=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;submit&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;value=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Search!&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
            &lt;span class="nt"&gt;&amp;lt;/p&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;/form&amp;gt;&lt;/span&gt;

        &lt;span class="k"&gt;&amp;lt;%&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;model&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;model&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getItems&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;
            &lt;span class="nt"&gt;&amp;lt;p&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;float:right;&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
                Page &lt;span class="nt"&gt;&amp;lt;b&amp;gt;&lt;/span&gt;&lt;span class="k"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="n"&gt;cPage&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;/b&amp;gt;&lt;/span&gt; from &lt;span class="nt"&gt;&amp;lt;b&amp;gt;&lt;/span&gt;
                    &lt;span class="k"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="n"&gt;Math&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;ceil&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;
                            &lt;span class="o"&gt;((&lt;/span&gt;&lt;span class="kt"&gt;float&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="n"&gt;model&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;totalHits&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="n"&gt;rPerPage&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; 
                    &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;/b&amp;gt;&lt;/span&gt;
            &lt;span class="nt"&gt;&amp;lt;/p&amp;gt;&lt;/span&gt;
        &lt;span class="k"&gt;&amp;lt;%&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;

        &lt;span class="k"&gt;&amp;lt;%&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;model&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;model&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getItems&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;
            &lt;span class="k"&gt;&amp;lt;%&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;cPage&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;
                &lt;span class="nt"&gt;&amp;lt;form&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;search&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;action=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;/search&amp;quot;&lt;/span&gt; 
                        &lt;span class="na"&gt;accept-charset=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;UTF-8&amp;quot;&lt;/span&gt; 
                        &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;float:left;&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
                    &lt;span class="k"&gt;&amp;lt;%&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;qDefValue&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;
                        &lt;span class="nt"&gt;&amp;lt;input&lt;/span&gt; &lt;span class="na"&gt;type=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;hidden&amp;quot;&lt;/span&gt; 
                            &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="k"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="n"&gt;SearchServlet&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;QUERY_INPUT&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;
                            &lt;span class="na"&gt;value=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="k"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="n"&gt;qDefValue&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
                    &lt;span class="k"&gt;&amp;lt;%&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;
                    &lt;span class="nt"&gt;&amp;lt;input&lt;/span&gt; &lt;span class="na"&gt;type=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;hidden&amp;quot;&lt;/span&gt; 
                        &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="k"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="n"&gt;SearchServlet&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;RESULTS_PER_PAGE&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt; 
                        &lt;span class="na"&gt;value=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="k"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="n"&gt;rPerPage&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
                    &lt;span class="nt"&gt;&amp;lt;input&lt;/span&gt; &lt;span class="na"&gt;type=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;hidden&amp;quot;&lt;/span&gt; 
                        &lt;span class="na"&gt;name=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="k"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="n"&gt;SearchServlet&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;CURRENT_PAGE&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt; 
                        &lt;span class="na"&gt;value=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="k"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="n"&gt;cPage&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
                    &lt;span class="nt"&gt;&amp;lt;input&lt;/span&gt; &lt;span class="na"&gt;type=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;submit&amp;quot;&lt;/span&gt; 
                        &lt;span class="na"&gt;value=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="k"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="n"&gt;escapeHTML&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&amp;lt;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
                &lt;span class="nt"&gt;&amp;lt;/form&amp;gt;&lt;/span&gt;
            &lt;span class="k"&gt;&amp;lt;%&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;

            &lt;span class="k"&gt;&amp;lt;%&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;model&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;totalHits&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;cPage&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;rPerPage&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;
                &lt;span class="nt"&gt;&amp;lt;form&lt;/span&gt; &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;search&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;action=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;/search&amp;quot;&lt;/span&gt; 
                        &lt;span class="na"&gt;accept-charset=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;UTF-8&amp;quot;&lt;/span&gt; &lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
                    &lt;span class="k"&gt;&amp;lt;%&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;qDefValue&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;
                        &lt;span class="nt"&gt;&amp;lt;input&lt;/span&gt; &lt;span class="na"&gt;type=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;hidden&amp;quot;&lt;/span&gt; 
                            &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="k"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="n"&gt;SearchServlet&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;QUERY_INPUT&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;
                            &lt;span class="na"&gt;value=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="k"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="n"&gt;qDefValue&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
                    &lt;span class="k"&gt;&amp;lt;%&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;
                    &lt;span class="nt"&gt;&amp;lt;input&lt;/span&gt; &lt;span class="na"&gt;type=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;hidden&amp;quot;&lt;/span&gt; 
                        &lt;span class="na"&gt;name=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="k"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="n"&gt;SearchServlet&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;RESULTS_PER_PAGE&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt; 
                        &lt;span class="na"&gt;value=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="k"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="n"&gt;rPerPage&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt; &lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
                    &lt;span class="nt"&gt;&amp;lt;input&lt;/span&gt; &lt;span class="na"&gt;type=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;hidden&amp;quot;&lt;/span&gt; 
                        &lt;span class="na"&gt;name=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="k"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="n"&gt;SearchServlet&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;CURRENT_PAGE&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt; 
                        &lt;span class="na"&gt;value=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="k"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="n"&gt;cPage&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
                    &lt;span class="nt"&gt;&amp;lt;input&lt;/span&gt; &lt;span class="na"&gt;type=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;submit&amp;quot;&lt;/span&gt; 
                        &lt;span class="na"&gt;value=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="k"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="n"&gt;escapeHTML&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&amp;gt;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;/&amp;gt;&lt;/span&gt;
                &lt;span class="nt"&gt;&amp;lt;/form&amp;gt;&lt;/span&gt;
            &lt;span class="k"&gt;&amp;lt;%&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;
        &lt;span class="k"&gt;&amp;lt;%&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;

        &lt;span class="nt"&gt;&amp;lt;p&lt;/span&gt; &lt;span class="na"&gt;align=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;center&amp;quot;&lt;/span&gt; &lt;span class="na"&gt;style=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;clear:both;&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
            &lt;span class="k"&gt;&amp;lt;%&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;model&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;
                &lt;span class="k"&gt;&amp;lt;%&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;model&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getItems&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;
                    &lt;span class="nt"&gt;&amp;lt;p&amp;gt;&lt;/span&gt;
                        &lt;span class="k"&gt;&amp;lt;%&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;DefaultSearchItem&lt;/span&gt; &lt;span class="n"&gt;item&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; 
                                &lt;span class="n"&gt;model&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getItems&lt;/span&gt;&lt;span class="o"&gt;())&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;
                            &lt;span class="nt"&gt;&amp;lt;hr/&amp;gt;&lt;/span&gt;
                            &lt;span class="nt"&gt;&amp;lt;p&amp;gt;&amp;lt;b&amp;gt;&lt;/span&gt;Score: &lt;span class="nt"&gt;&amp;lt;/b&amp;gt;&lt;/span&gt;&lt;span class="k"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="n"&gt;item&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;score&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;/p&amp;gt;&lt;/span&gt;
                            &lt;span class="nt"&gt;&amp;lt;p&amp;gt;&amp;lt;b&amp;gt;&lt;/span&gt;Url: &lt;span class="nt"&gt;&amp;lt;/b&amp;gt;&lt;/span&gt;
                                &lt;span class="nt"&gt;&amp;lt;a&lt;/span&gt; &lt;span class="na"&gt;href=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="k"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="n"&gt;item&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;uri&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
                                    &lt;span class="k"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="n"&gt;item&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;uri&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;
                                &lt;span class="nt"&gt;&amp;lt;/a&amp;gt;&lt;/span&gt;
                            &lt;span class="nt"&gt;&amp;lt;/p&amp;gt;&lt;/span&gt;
                            &lt;span class="nt"&gt;&amp;lt;p&amp;gt;&amp;lt;b&amp;gt;&lt;/span&gt;Title: &lt;span class="nt"&gt;&amp;lt;/b&amp;gt;&lt;/span&gt;
                                &lt;span class="k"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="n"&gt;escapeHTML&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;item&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;title&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;
                            &lt;span class="nt"&gt;&amp;lt;/p&amp;gt;&lt;/span&gt;
                            &lt;span class="nt"&gt;&amp;lt;p&amp;gt;&amp;lt;b&amp;gt;&lt;/span&gt;Content: &lt;span class="nt"&gt;&amp;lt;/b&amp;gt;&lt;/span&gt;
                                &lt;span class="k"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="n"&gt;escapeHTML&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;
                                        &lt;span class="n"&gt;ellipsize&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;item&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;content&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;330&lt;/span&gt;&lt;span class="o"&gt;))&lt;/span&gt; 
                                &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;
                            &lt;span class="nt"&gt;&amp;lt;/p&amp;gt;&lt;/span&gt;
                        &lt;span class="k"&gt;&amp;lt;%&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;
                    &lt;span class="nt"&gt;&amp;lt;/p&amp;gt;&lt;/span&gt;
                &lt;span class="k"&gt;&amp;lt;%&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;
                    I&amp;#39;m sorry I couldn&amp;#39;t find what you were looking for.
                &lt;span class="k"&gt;&amp;lt;%&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;
            &lt;span class="k"&gt;&amp;lt;%&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;/p&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;p&lt;/span&gt; &lt;span class="na"&gt;align=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;center&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
            &lt;span class="nt"&gt;&amp;lt;a&lt;/span&gt; &lt;span class="na"&gt;href=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;http://mazko.github.io/&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;http://mazko.github.io/&lt;span class="nt"&gt;&amp;lt;/a&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;/p&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;/body&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/html&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–†–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ç–∞–∫–∏–º:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ mvn clean install -pl server/ jetty:run
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="Screen1" src="http://proiot.ru/blog/posts/2012/10/21/lucene-postranichnyi-poisk/linux_search_veka.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="Screen2" src="http://proiot.ru/blog/posts/2012/10/21/lucene-postranichnyi-poisk/linux_search_7_chudes.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2012/10/27/lucene-iazykovye-analizatory/"&gt;–î–∞–ª–µ–µ&lt;/a&gt; —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º —è–∑—ã–∫–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ &lt;em&gt;Lucene&lt;/em&gt;, –æ—Å–æ–±–µ–Ω–Ω–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –Ω–∞ —Ä—É—Å—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä - &lt;code&gt;RussianAnalyzer&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2012/10/21/lucene-postranichnyi-poisk/lucene-tutorial.zip"&gt;–ò—Å—Ö–æ–¥–Ω–∏–∫–∏&lt;/a&gt;&lt;/p&gt;</content><category term="Lucene"></category><category term="JSP"></category><category term="Maven"></category></entry><entry><title>Lucene - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω–¥–µ–∫—Å–∞</title><link href="http://proiot.ru/blog/posts/2012/10/21/lucene-proverka-indeksa/" rel="alternate"></link><published>2012-10-21T00:00:00+03:00</published><updated>2012-10-21T00:00:00+03:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2012-10-21:/blog/posts/2012/10/21/lucene-proverka-indeksa/</id><summary type="html">&lt;p&gt;–î–∞–Ω–Ω—ã–π –ø–æ—Å—Ç –±—É–¥–µ—Ç –æ—á–µ–Ω—å –∫–æ—Ä–æ—Ç–∫–∏–π - –Ω–∞ –¥–∞–Ω–Ω–æ–º —ç—Ç–∞–ø–µ –∏–º–µ–µ—Ç—Å—è &lt;strong&gt;Lucene&lt;/strong&gt; - &lt;a href="http://proiot.ru/blog/posts/2012/10/17/lucene-protsess-indeksatsii/"&gt;–∏–Ω–¥–µ–∫—Å&lt;/a&gt;, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å &lt;code&gt;SearchServlet&lt;/code&gt; —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —á—Ç–æ–±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ –ø–æ–ª—É—á–∏—Ç—å –∏ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –∫—Ä–∞—Ç–∫—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –∏–Ω–¥–µ–∫—Å–µ. –î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏–Ω–¥–µ–∫—Å–∞ –≤ &lt;strong&gt;Lucene&lt;/strong&gt; —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —É–∂–µ –≥–æ—Ç–æ–≤—ã–π –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –∫–ª–∞—Å—Å - &lt;code&gt;CheckIndex&lt;/code&gt;, –∫–æ—Ç–æ—Ä—ã–π –º—ã –∏ –∑–∞–¥–µ–π—Å—Ç–≤—É–µ–º. –ß—Ç–æ–±—ã —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ —Å–µ—Ä–≤–ª–µ—Ç–∞ &lt;code&gt;SearchServlet ‚Ä¶&lt;/code&gt;&lt;/p&gt;</summary><content type="html">&lt;p&gt;–î–∞–Ω–Ω—ã–π –ø–æ—Å—Ç –±—É–¥–µ—Ç –æ—á–µ–Ω—å –∫–æ—Ä–æ—Ç–∫–∏–π - –Ω–∞ –¥–∞–Ω–Ω–æ–º —ç—Ç–∞–ø–µ –∏–º–µ–µ—Ç—Å—è &lt;strong&gt;Lucene&lt;/strong&gt; - &lt;a href="http://proiot.ru/blog/posts/2012/10/17/lucene-protsess-indeksatsii/"&gt;–∏–Ω–¥–µ–∫—Å&lt;/a&gt;, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å &lt;code&gt;SearchServlet&lt;/code&gt; —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —á—Ç–æ–±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ –ø–æ–ª—É—á–∏—Ç—å –∏ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –∫—Ä–∞—Ç–∫—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –∏–Ω–¥–µ–∫—Å–µ. –î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏–Ω–¥–µ–∫—Å–∞ –≤ &lt;strong&gt;Lucene&lt;/strong&gt; —Å—É—â–µ—Å—Ç–≤—É–µ—Ç —É–∂–µ –≥–æ—Ç–æ–≤—ã–π –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –∫–ª–∞—Å—Å - &lt;code&gt;CheckIndex&lt;/code&gt;, –∫–æ—Ç–æ—Ä—ã–π –º—ã –∏ –∑–∞–¥–µ–π—Å—Ç–≤—É–µ–º. –ß—Ç–æ–±—ã —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ —Å–µ—Ä–≤–ª–µ—Ç–∞ &lt;code&gt;SearchServlet&lt;/code&gt; –Ω–µ –ø—Ä–µ–≤—Ä–∞—Ç–∏–ª—Å—è –≤ &lt;em&gt;–º–∞–∫–∞—Ä–æ–Ω—ã&lt;/em&gt; –ø–æ-—Ñ–ª–æ—Ç—Å–∫–∏, –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø—Ä–∏–±–ª–∏–∑–∏–º—Å—è –∫ –ø–∞—Ç—Ç–µ—Ä–Ω—É &lt;em&gt;–º–æ–¥–µ–ª—å-–ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ-–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä&lt;/em&gt; (&lt;strong&gt;MVC&lt;/strong&gt;), –≥–¥–µ —Å–µ—Ä–≤–ª–µ—Ç –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å —Ñ—É–Ω–∫—Ü–∏—é &lt;em&gt;–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞&lt;/em&gt;, &lt;em&gt;–º–æ–¥–µ–ª—å&lt;/em&gt; –±—É–¥–µ—Ç –∏–º–µ—Ç—å —Ñ–æ—Ä–º–∞—Ç –ø—Ä–æ—Å—Ç–æ–π —Å—Ç—Ä–æ–∫–∏, –∞ &lt;em&gt;–ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ&lt;/em&gt; –±—É–¥–µ—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ –≤–∏–¥–µ &lt;strong&gt;jsp&lt;/strong&gt;-—Å—Ç—Ä–∞–Ω–∏—Ü—ã.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;server/pom.xml&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;project&lt;/span&gt; &lt;span class="na"&gt;xmlns=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;http://maven.apache.org/POM/4.0.0&amp;quot;&lt;/span&gt; 
  &lt;span class="na"&gt;xmlns:xsi=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;http://www.w3.org/2001/XMLSchema-instance&amp;quot;&lt;/span&gt;
  &lt;span class="na"&gt;xsi:schemaLocation=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;modelVersion&amp;gt;&lt;/span&gt;4.0.0&lt;span class="nt"&gt;&amp;lt;/modelVersion&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;parent&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;tutorial.lucene&lt;span class="nt"&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;parent&lt;span class="nt"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;version&amp;gt;&lt;/span&gt;1.0&lt;span class="nt"&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;/parent&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;server&lt;span class="nt"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;packaging&amp;gt;&lt;/span&gt;war&lt;span class="nt"&gt;&amp;lt;/packaging&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;name&amp;gt;&lt;/span&gt;Lucene Tutorial Server&lt;span class="nt"&gt;&amp;lt;/name&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;dependencies&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;javax.servlet&lt;span class="nt"&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;servlet-api&lt;span class="nt"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;version&amp;gt;&lt;/span&gt;2.4&lt;span class="nt"&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;scope&amp;gt;&lt;/span&gt;provided&lt;span class="nt"&gt;&amp;lt;/scope&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;tutorial.lucene&lt;span class="nt"&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;common&lt;span class="nt"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;version&amp;gt;&lt;/span&gt;1.0&lt;span class="nt"&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;/dependencies&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;build&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;plugins&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;plugin&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.eclipse.jetty&lt;span class="nt"&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;jetty-maven-plugin&lt;span class="nt"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;version&amp;gt;&lt;/span&gt;9.3.8.v20160314&lt;span class="nt"&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;configuration&amp;gt;&lt;/span&gt;
          &lt;span class="nt"&gt;&amp;lt;webApp&amp;gt;&lt;/span&gt;
            &lt;span class="nt"&gt;&amp;lt;contextPath&amp;gt;&lt;/span&gt;/search&lt;span class="nt"&gt;&amp;lt;/contextPath&amp;gt;&lt;/span&gt;
          &lt;span class="nt"&gt;&amp;lt;/webApp&amp;gt;&lt;/span&gt;
          &lt;span class="nt"&gt;&amp;lt;contextHandlers&amp;gt;&lt;/span&gt;
            &lt;span class="nt"&gt;&amp;lt;contextHandler&lt;/span&gt; &lt;span class="na"&gt;implementation=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;org.eclipse.jetty.maven.plugin.JettyWebAppContext&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
              &lt;span class="nt"&gt;&amp;lt;war&amp;gt;&lt;/span&gt;${project.basedir}/static.war&lt;span class="nt"&gt;&amp;lt;/war&amp;gt;&lt;/span&gt; --&amp;gt;
              &lt;span class="nt"&gt;&amp;lt;contextPath&amp;gt;&lt;/span&gt;/&lt;span class="nt"&gt;&amp;lt;/contextPath&amp;gt;&lt;/span&gt;
            &lt;span class="nt"&gt;&amp;lt;/contextHandler&amp;gt;&lt;/span&gt;
          &lt;span class="nt"&gt;&amp;lt;/contextHandlers&amp;gt;&lt;/span&gt; 
        &lt;span class="nt"&gt;&amp;lt;/configuration&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;/plugin&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;/plugins&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;/build&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/project&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;em&gt;server/src/main/java/server/SearchServlet.java&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;package&lt;/span&gt; &lt;span class="nn"&gt;server&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.io.ByteArrayOutputStream&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.io.IOException&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.io.OutputStream&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.io.PrintStream&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;javax.servlet.ServletException&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;javax.servlet.http.HttpServlet&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;javax.servlet.http.HttpServletRequest&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;javax.servlet.http.HttpServletResponse&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.index.CheckIndex&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.store.Directory&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.store.FSDirectory&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;SearchServlet&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;HttpServlet&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;

    &lt;span class="nd"&gt;@Override&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;doGet&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;HttpServletRequest&lt;/span&gt; &lt;span class="n"&gt;req&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;HttpServletResponse&lt;/span&gt; &lt;span class="n"&gt;res&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
            &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;ServletException&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;IOException&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;OutputStream&lt;/span&gt; &lt;span class="n"&gt;byteArrayOutputStream&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;ByteArrayOutputStream&lt;/span&gt;&lt;span class="o"&gt;())&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;Directory&lt;/span&gt; &lt;span class="n"&gt;dir&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;FSDirectory&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;open&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;common&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;INDEX_PATH&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;CheckIndex&lt;/span&gt; &lt;span class="n"&gt;checkIndex&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;CheckIndex&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;dir&lt;/span&gt;&lt;span class="o"&gt;))&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;checkIndex&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setInfoStream&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;PrintStream&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;byteArrayOutputStream&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
                &lt;span class="n"&gt;checkIndex&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;checkIndex&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
                &lt;span class="n"&gt;byteArrayOutputStream&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;flush&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
                &lt;span class="n"&gt;req&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setAttribute&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;checkindexmodel&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;byteArrayOutputStream&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;

        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getServletContext&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;getRequestDispatcher&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;/index.jsp&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;).&lt;/span&gt;&lt;span class="na"&gt;forward&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;req&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;res&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;em&gt;server/src/main/webapp/index.jsp&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;&amp;lt;%&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;model&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;request&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getAttribute&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;checkindexmodel&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;).&lt;/span&gt;&lt;span class="na"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt; &lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;

&lt;span class="k"&gt;&amp;lt;%!&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;escapeHTML&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
          &lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;replaceAll&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&amp;amp;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;&amp;amp;amp;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
          &lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;replaceAll&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&amp;lt;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;&amp;amp;lt;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
          &lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;replaceAll&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&amp;gt;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;&amp;amp;gt;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
          &lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;replaceAll&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;\&amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;&amp;amp;quot;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
          &lt;span class="n"&gt;s&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;replaceAll&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&amp;#39;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;&amp;amp;apos;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
          &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;

&lt;span class="nt"&gt;&amp;lt;html&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;head&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;title&amp;gt;&lt;/span&gt;Lucene CheckIndex Example&lt;span class="nt"&gt;&amp;lt;/title&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;/head&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;body&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;p&amp;gt;&lt;/span&gt;
            &lt;span class="k"&gt;&amp;lt;%=&lt;/span&gt; &lt;span class="n"&gt;escapeHTML&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;model&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;trim&lt;/span&gt;&lt;span class="o"&gt;()).&lt;/span&gt;&lt;span class="na"&gt;replace&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;\n&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;&amp;lt;br /&amp;gt;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;&lt;span class="k"&gt;%&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;/p&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;p&lt;/span&gt; &lt;span class="na"&gt;align=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;center&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
            &lt;span class="nt"&gt;&amp;lt;a&lt;/span&gt; &lt;span class="na"&gt;href=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;http://mazko.github.io/&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;http://mazko.github.io/&lt;span class="nt"&gt;&amp;lt;/a&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;/p&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;/body&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/html&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–†–µ–∑—É–ª—å—Ç–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ç–∞–∫–∏–º:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ mvn clean install -pl server/ jetty:run
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="Linux" src="http://proiot.ru/blog/posts/2012/10/21/lucene-proverka-indeksa/linux_checkindex.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2012/10/21/lucene-postranichnyi-poisk/"&gt;–î–∞–ª–µ–µ&lt;/a&gt; —Ä–µ–∞–ª–∏–∑—É–µ–º –ø—Ä–æ—Å—Ç–æ–π –ø–æ–∏—Å–∫.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2012/10/21/lucene-proverka-indeksa/lucene-tutorial.zip"&gt;–ò—Å—Ö–æ–¥–Ω–∏–∫–∏&lt;/a&gt;&lt;/p&gt;</content><category term="Lucene"></category><category term="jsp"></category><category term="Maven"></category></entry><entry><title>Lucene - –ø—Ä–æ—Ü–µ—Å—Å –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏</title><link href="http://proiot.ru/blog/posts/2012/10/17/lucene-protsess-indeksatsii/" rel="alternate"></link><published>2012-10-17T00:00:00+03:00</published><updated>2012-10-17T00:00:00+03:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2012-10-17:/blog/posts/2012/10/17/lucene-protsess-indeksatsii/</id><summary type="html">&lt;p&gt;–°—Ä–µ–¥–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏ —Ä–∞–∑–º–µ—Ä –∫–æ—Ç–æ—Ä—ã—Ö –º–æ–≥—É—Ç –±—ã—Ç—å –æ—á–µ–Ω—å –±–æ–ª—å—à–∏–º–∏,  –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ—Ç–æ–±—Ä–∞—Ç—å —Ç–æ–ª—å–∫–æ —Ç–µ –∏–∑ –Ω–∏—Ö, –∫–æ—Ç–æ—Ä—ã–µ –æ—Ç–≤–µ—á–∞—é—Ç –∫–∞–∫–æ–º—É-–ª–∏–±–æ —É—Å–ª–æ–≤–∏—é - –Ω–∞–ø—Ä–∏–º–µ—Ä —Å–æ–¥–µ—Ä–∂–∞—Ç —Ç—É –∏–ª–∏ –∏–Ω—É—é —Ñ—Ä–∞–∑—É. –ö–∞–∫ —Ä–µ—à–∞—Ç—å –ø–æ–¥–æ–±–Ω—É—é –∑–∞–¥–∞—á—É ? –ú–æ–∂–Ω–æ –æ–±–æ–π—Ç–∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –≤—Å–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ –∏—Å–∫–æ–º–æ–π —Ñ—Ä–∞–∑—ã –≤ –∫–∞–∂–¥–æ–º –∏–∑ –Ω–∏—Ö. –ù–æ —Å–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ –∏ —Ä–µ—Å—É—Ä—Å–æ–≤ ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;p&gt;–°—Ä–µ–¥–∏ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏ —Ä–∞–∑–º–µ—Ä –∫–æ—Ç–æ—Ä—ã—Ö –º–æ–≥—É—Ç –±—ã—Ç—å –æ—á–µ–Ω—å –±–æ–ª—å—à–∏–º–∏,  –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –æ—Ç–æ–±—Ä–∞—Ç—å —Ç–æ–ª—å–∫–æ —Ç–µ –∏–∑ –Ω–∏—Ö, –∫–æ—Ç–æ—Ä—ã–µ –æ—Ç–≤–µ—á–∞—é—Ç –∫–∞–∫–æ–º—É-–ª–∏–±–æ —É—Å–ª–æ–≤–∏—é - –Ω–∞–ø—Ä–∏–º–µ—Ä —Å–æ–¥–µ—Ä–∂–∞—Ç —Ç—É –∏–ª–∏ –∏–Ω—É—é —Ñ—Ä–∞–∑—É. –ö–∞–∫ —Ä–µ—à–∞—Ç—å –ø–æ–¥–æ–±–Ω—É—é –∑–∞–¥–∞—á—É ? –ú–æ–∂–Ω–æ –æ–±–æ–π—Ç–∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –≤—Å–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ –∏—Å–∫–æ–º–æ–π —Ñ—Ä–∞–∑—ã –≤ –∫–∞–∂–¥–æ–º –∏–∑ –Ω–∏—Ö. –ù–æ —Å–∫–æ–ª—å–∫–æ –≤—Ä–µ–º–µ–Ω–∏ –∏ —Ä–µ—Å—É—Ä—Å–æ–≤ –º–æ–∂–µ—Ç —É–π—Ç–∏ –Ω–∞ –ø–æ–∏—Å–∫ —Ñ—Ä–∞–∑—ã –≤ –¥–æ–∫—É–º–µ–Ω—Ç–µ —Ä–∞–∑–º–µ—Ä–æ–º —Å–∫–∞–∂–µ–º 1000000 —Å–ª–æ–≤ –∏ –±–æ–ª–µ–µ ? –£–º–Ω–æ–∂–∞–µ–º —ç—Ç–æ —á–∏—Å–ª–æ –Ω–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤... –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ —Å–ª–∏—à–∫–æ–º –ø—Ä—è–º–æ–ª–∏–Ω–µ–π–Ω–æ - –ø–æ–∫–∞ –º—ã –±—É–¥–µ–º —á—Ç–æ-—Ç–æ –∏—Å–∫–∞—Ç—å, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —É–∂–µ –ø–æ–¥–∑–∞–±—ã—Ç—å —á—Ç–æ –∂–µ –∏–º–µ–Ω–Ω–æ –æ–Ω —Ö–æ—Ç–µ–ª –∏ –∑–∞—á–µ–º —ç—Ç–æ –±—ã–ª–æ –Ω–∞–¥–æ.&lt;/p&gt;
&lt;p&gt;–ß—Ç–æ–±—ã –∏–º–µ—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Å—É—â–µ—Å—Ç–≤–ª—è—Ç—å –ø–æ–∏—Å–∫ —Ç–µ–∫—Å—Ç–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –±—ã—Å—Ç—Ä–æ, –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –µ–≥–æ –ø—Ä–æ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞—Ç—å - –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å –≤ –∫–∞–∫–æ–π-—Ç–æ –¥—Ä—É–≥–æ–π &lt;a href="https://en.wikipedia.org/wiki/Inverted_index" rel="nofollow"&gt;—Ñ–æ—Ä–º–∞—Ç&lt;/a&gt;, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª–∏—Ç –∏–∑–±–µ–∂–∞—Ç—å –≤—ã—à–µ—É–ø–æ–º—è–Ω—É—Ç—ã—Ö –ø—Ä–æ–±–ª–µ–º. –í –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ —è–≤–ª—è–µ—Ç—Å—è &lt;a href="http://proiot.ru/blog/posts/2012/10/15/lucene-kurs-molodogo-boitsa/"&gt;—Å–∞–π—Ç&lt;/a&gt;, –∞ –¥–æ–∫—É–º–µ–Ω—Ç—ã —ç—Ç–æ –Ω–µ —á—Ç–æ –∏–Ω–æ–µ –∫–∞–∫ —Ç–µ–∫—Å—Ç–æ–≤–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –µ–≥–æ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö HTML-—Å—Ç—Ä–∞–Ω–∏—Ü. –î–ª—è –æ–±—Ö–æ–¥–∞ –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω–∏—Ü —Å–∞–π—Ç–∞ –Ω–∞–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è &lt;em&gt;crawler&lt;/em&gt;. –≠—Ç–æ –±—É–¥–µ—Ç –µ—â—ë –æ–¥–∏–Ω –ø–æ–¥–ø—Ä–æ–µ–∫—Ç –≤ –º—É–ª—å—Ç–∏–º–æ–¥—É–ª—å–Ω–æ–º Maven –ø—Ä–æ–µ–∫—Ç–µ –Ω–∞—Ä—è–¥—É —Å Server. –ï—â—ë —É –Ω–∏—Ö –±—É–¥–µ—Ç –æ–±—â–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å Common –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –∫–æ–Ω—Å—Ç–∞–Ω—Ç:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ &lt;span class="nb"&gt;cd&lt;/span&gt; lucene-tutorial/
~$ tree
.
‚îú‚îÄ‚îÄ common
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ pom.xml
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ src
‚îÇ¬†¬†     ‚îî‚îÄ‚îÄ main
‚îÇ¬†¬†         ‚îî‚îÄ‚îÄ java
‚îÇ¬†¬†             ‚îî‚îÄ‚îÄ common
‚îÇ¬†¬†                 ‚îî‚îÄ‚îÄ LuceneBinding.java
‚îú‚îÄ‚îÄ crawler
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ pom.xml
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ src
‚îÇ¬†¬†     ‚îî‚îÄ‚îÄ main
‚îÇ¬†¬†         ‚îú‚îÄ‚îÄ java
‚îÇ¬†¬†         ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ crawler
‚îÇ¬†¬†         ‚îÇ¬†¬†     ‚îú‚îÄ‚îÄ App.java
‚îÇ¬†¬†         ‚îÇ¬†¬†     ‚îú‚îÄ‚îÄ HtmlHelper.java
‚îÇ¬†¬†         ‚îÇ¬†¬†     ‚îú‚îÄ‚îÄ LuceneIndexer.java
‚îÇ¬†¬†         ‚îÇ¬†¬†     ‚îî‚îÄ‚îÄ SimpleCrawler.java
‚îÇ¬†¬†         ‚îî‚îÄ‚îÄ resources
‚îÇ¬†¬†             ‚îî‚îÄ‚îÄ log4j.properties
‚îú‚îÄ‚îÄ pom.xml
‚îî‚îÄ‚îÄ server
    ‚îú‚îÄ‚îÄ pom.xml
    ‚îú‚îÄ‚îÄ src
    ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ main
    ‚îÇ¬†¬†     ‚îú‚îÄ‚îÄ java
    ‚îÇ¬†¬†     ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ server
    ‚îÇ¬†¬†     ‚îÇ¬†¬†     ‚îî‚îÄ‚îÄ SearchServlet.java
    ‚îÇ¬†¬†     ‚îî‚îÄ‚îÄ webapp
    ‚îÇ¬†¬†         ‚îî‚îÄ‚îÄ WEB-INF
    ‚îÇ¬†¬†             ‚îî‚îÄ‚îÄ web.xml
    ‚îî‚îÄ‚îÄ static.war

&lt;span class="m"&gt;18&lt;/span&gt; directories, &lt;span class="m"&gt;13&lt;/span&gt; files
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;em&gt;pom.xml&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;project&lt;/span&gt; &lt;span class="na"&gt;xmlns=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;http://maven.apache.org/POM/4.0.0&amp;quot;&lt;/span&gt; 
  &lt;span class="na"&gt;xmlns:xsi=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;http://www.w3.org/2001/XMLSchema-instance&amp;quot;&lt;/span&gt;
  &lt;span class="na"&gt;xsi:schemaLocation=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;modelVersion&amp;gt;&lt;/span&gt;4.0.0&lt;span class="nt"&gt;&amp;lt;/modelVersion&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;tutorial.lucene&lt;span class="nt"&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;parent&lt;span class="nt"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;packaging&amp;gt;&lt;/span&gt;pom&lt;span class="nt"&gt;&amp;lt;/packaging&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;version&amp;gt;&lt;/span&gt;1.0&lt;span class="nt"&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;dependencies&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.apache.lucene&lt;span class="nt"&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;lucene-core&lt;span class="nt"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;version&amp;gt;&lt;/span&gt;6.0.0&lt;span class="nt"&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.apache.lucene&lt;span class="nt"&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;lucene-analyzers-common&lt;span class="nt"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;version&amp;gt;&lt;/span&gt;6.0.0&lt;span class="nt"&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;/dependencies&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;modules&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;module&amp;gt;&lt;/span&gt;server&lt;span class="nt"&gt;&amp;lt;/module&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;module&amp;gt;&lt;/span&gt;crawler&lt;span class="nt"&gt;&amp;lt;/module&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;module&amp;gt;&lt;/span&gt;common&lt;span class="nt"&gt;&amp;lt;/module&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;/modules&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;build&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;plugins&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;plugin&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.apache.maven.plugins&lt;span class="nt"&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;maven-compiler-plugin&lt;span class="nt"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;version&amp;gt;&lt;/span&gt;3.5.1&lt;span class="nt"&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;configuration&amp;gt;&lt;/span&gt;
          &lt;span class="nt"&gt;&amp;lt;source&amp;gt;&lt;/span&gt;1.8&lt;span class="nt"&gt;&amp;lt;/source&amp;gt;&lt;/span&gt;
          &lt;span class="nt"&gt;&amp;lt;target&amp;gt;&lt;/span&gt;1.8&lt;span class="nt"&gt;&amp;lt;/target&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;/configuration&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;/plugin&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;/plugins&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;/build&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/project&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;em&gt;crawler/pom.xml&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;project&lt;/span&gt; &lt;span class="na"&gt;xmlns=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;http://maven.apache.org/POM/4.0.0&amp;quot;&lt;/span&gt; 
         &lt;span class="na"&gt;xmlns:xsi=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;http://www.w3.org/2001/XMLSchema-instance&amp;quot;&lt;/span&gt;
         &lt;span class="na"&gt;xsi:schemaLocation=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;http://maven.apache.org/POM/4.0.0 &lt;/span&gt;
&lt;span class="s"&gt;                             http://maven.apache.org/maven-v4_0_0.xsd&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;modelVersion&amp;gt;&lt;/span&gt;4.0.0&lt;span class="nt"&gt;&amp;lt;/modelVersion&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;parent&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;tutorial.lucene&lt;span class="nt"&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;parent&lt;span class="nt"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;version&amp;gt;&lt;/span&gt;1.0&lt;span class="nt"&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;/parent&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;crawler&lt;span class="nt"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;packaging&amp;gt;&lt;/span&gt;jar&lt;span class="nt"&gt;&amp;lt;/packaging&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;name&amp;gt;&lt;/span&gt;Lucene Tutorial Crawler&lt;span class="nt"&gt;&amp;lt;/name&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;dependencies&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;log4j&lt;span class="nt"&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;log4j&lt;span class="nt"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;version&amp;gt;&lt;/span&gt;1.2.17&lt;span class="nt"&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.jsoup&lt;span class="nt"&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;jsoup&lt;span class="nt"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;version&amp;gt;&lt;/span&gt;1.9.1&lt;span class="nt"&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;tutorial.lucene&lt;span class="nt"&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;common&lt;span class="nt"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;version&amp;gt;&lt;/span&gt;1.0&lt;span class="nt"&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;/dependencies&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/project&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;em&gt;common/pom.xml&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;project&lt;/span&gt; &lt;span class="na"&gt;xmlns=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;http://maven.apache.org/POM/4.0.0&amp;quot;&lt;/span&gt; 
         &lt;span class="na"&gt;xmlns:xsi=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;http://www.w3.org/2001/XMLSchema-instance&amp;quot;&lt;/span&gt;
         &lt;span class="na"&gt;xsi:schemaLocation=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;http://maven.apache.org/POM/4.0.0 &lt;/span&gt;
&lt;span class="s"&gt;                             http://maven.apache.org/maven-v4_0_0.xsd&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;modelVersion&amp;gt;&lt;/span&gt;4.0.0&lt;span class="nt"&gt;&amp;lt;/modelVersion&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;parent&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;tutorial.lucene&lt;span class="nt"&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;parent&lt;span class="nt"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;version&amp;gt;&lt;/span&gt;1.0&lt;span class="nt"&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;/parent&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;common&lt;span class="nt"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;packaging&amp;gt;&lt;/span&gt;jar&lt;span class="nt"&gt;&amp;lt;/packaging&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;name&amp;gt;&lt;/span&gt;Crawler and Server Shared Constants&lt;span class="nt"&gt;&amp;lt;/name&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/project&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;em&gt;crawler/src/main/java/crawler/SimpleCrawler.java&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;package&lt;/span&gt; &lt;span class="nn"&gt;crawler&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.HashSet&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.NavigableSet&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.Set&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.TreeSet&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.log4j.Logger&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;SimpleCrawler&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;interface&lt;/span&gt; &lt;span class="nc"&gt;ICrawlEvents&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;onVisit&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;html&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;seed&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="nf"&gt;shouldVisit&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;seed&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;Logger&lt;/span&gt; &lt;span class="n"&gt;logger&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Logger&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getLogger&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;SimpleCrawler&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getName&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;

    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;ICrawlEvents&lt;/span&gt; &lt;span class="n"&gt;events&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;NavigableSet&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;linksToCrawl&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;Set&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;linksCrawled&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;seed&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="nf"&gt;SimpleCrawler&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;seed&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;ICrawlEvents&lt;/span&gt; &lt;span class="n"&gt;events&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;events&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;events&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;seed&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;seed&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;};&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="nf"&gt;hasLinksToCrawl&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;linksToCrawl&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;isEmpty&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;run&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;

        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;linksCrawled&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;HashSet&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;();&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;linksToCrawl&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;TreeSet&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;();&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;linksToCrawl&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;seed&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

        &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;hasLinksToCrawl&lt;/span&gt;&lt;span class="o"&gt;())&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;

            &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;strURL&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;linksToCrawl&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;pollFirst&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
            &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;linksCrawled&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;strURL&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

            &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;html&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;HtmlHelper&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;download&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;strURL&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

                &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;linksAdded&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
                &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;l&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;HtmlHelper&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;extractLinks&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;html&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;seed&lt;/span&gt;&lt;span class="o"&gt;))&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;events&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;shouldVisit&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;l&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;seed&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;linksCrawled&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;contains&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;l&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
                            &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;linksToCrawl&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;contains&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;l&lt;/span&gt;&lt;span class="o"&gt;))&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;linksToCrawl&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;l&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
                        &lt;span class="n"&gt;linksAdded&lt;/span&gt;&lt;span class="o"&gt;++;&lt;/span&gt;
                    &lt;span class="o"&gt;}&lt;/span&gt;
                &lt;span class="o"&gt;}&lt;/span&gt;

                &lt;span class="n"&gt;SimpleCrawler&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;logger&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;info&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;
                    &lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;format&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Fetched: [%s] %d new links&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;strURL&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;linksAdded&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
                &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;events&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;onVisit&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;strURL&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;html&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;seed&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;catch&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;Exception&lt;/span&gt; &lt;span class="n"&gt;ex&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;SimpleCrawler&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;logger&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;error&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;format&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Fetch error: [%s].&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;strURL&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt; &lt;span class="n"&gt;ex&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–í—Å–µ —Å—Å—ã–ª–∫–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏ - –¥–ª—è –º–∞–ª–µ–Ω—å–∫–∏—Ö –∏ —Å—Ä–µ–¥–Ω–∏—Ö –ø–æ –≤–µ–ª–∏—á–∏–Ω–µ —Å–∞–π—Ç–æ–≤ —Ç–∞–∫–æ–µ —Ä–µ—à–µ–Ω–∏–µ –≤–ø–æ–ª–Ω–µ –ø—Ä–∏–µ–º–ª–µ–º–æ. –° –≤–Ω–µ—à–Ω–∏–º –º–∏—Ä–æ–º &lt;em&gt;crawler&lt;/em&gt; –æ–±—â–∞–µ—Ç—Å—è –ø–æ—Å—Ä–µ–¥—Å—Ç–≤–æ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ &lt;code&gt;ICrawlEvents&lt;/code&gt;, –∞ —Å HTML —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∫–ª–∞—Å—Å &lt;code&gt;HtmlHelper&lt;/code&gt;. –ü–æ—Å–ª–µ–¥–Ω–∏–π –∞–∫—Ç–∏–≤–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–µ–∫—Ä–∞—Å–Ω—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å &lt;em&gt;Html&lt;/em&gt; –≤ &lt;em&gt;Java&lt;/em&gt; - &lt;a href="http://jsoup.org/" rel="nofollow"&gt;JSoup&lt;/a&gt;, –∫–æ—Ç–æ—Ä–∞—è —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Å—Ç–∏–ª–µ JQuery –ø–æ—Å—Ä–µ–¥—Å—Ç–≤–æ–º &lt;em&gt;css-—Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤&lt;/em&gt;. –¢–∞–∫–∂–µ —Å—Ç–æ–∏—Ç –æ–±—Ä–∞—Ç–∏—Ç—å –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ &lt;strong&gt;–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ&lt;/strong&gt; –Ω–∞–ª–∏—á–∏–µ –≤—Ä–µ–º–µ–Ω–Ω–æ–π –∑–∞–¥–µ—Ä–∂–∫–∏ (&lt;em&gt;politeness&lt;/em&gt;) –º–µ–∂–¥—É Http-–∑–∞–ø—Ä–æ—Å–∞–º–∏ –∫ —Å–∞–π—Ç—É - –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —Ö–æ—Å—Ç–µ—Ä–æ–≤ —Å–ª–µ–¥—è—Ç –∑–∞ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –∑–∞–ø—Ä–æ—Å–æ–≤ —Å –æ–¥–Ω–æ–≥–æ IP, –ø–æ—ç—Ç–æ–º—É –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å —Ä–µ–∞–ª—å–Ω—ã–º –≤–µ–±-—Å–∞–π—Ç–æ–º –∑–∞ –ø—Ä–µ–¥–µ–ª–∞–º–∏ localhost –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–±–ª—é–¥–∞—Ç—å —Ç–æ–ª–µ—Ä–∞–Ω—Ç–Ω–æ—Å—Ç—å, –µ—Å–ª–∏ –Ω–µ —Ö–æ—Ç–∏—Ç–µ –ø–æ–ª—É—á–∏—Ç—å –±–∞–Ω –∫–æ–Ω–µ—á–Ω–æ.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;crawler/src/main/java/crawler/HtmlHelper.java&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;package&lt;/span&gt; &lt;span class="nn"&gt;crawler&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.io.IOException&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.Collection&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.Collections&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.HashSet&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.Set&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.jsoup.Jsoup&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.jsoup.nodes.Document&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.jsoup.nodes.Element&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.jsoup.select.Elements&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;HtmlHelper&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="n"&gt;Collection&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nf"&gt;extractLinks&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;html&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;seed&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;

        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;Document&lt;/span&gt; &lt;span class="n"&gt;document&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Jsoup&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;parse&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;html&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;seed&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;Set&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;linksSet&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;HashSet&lt;/span&gt;&lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;();&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;Element&lt;/span&gt; &lt;span class="n"&gt;link&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;document&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;select&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;a[href]&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;))&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;strLink&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;link&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;attr&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;abs:href&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;).&lt;/span&gt;&lt;span class="na"&gt;trim&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;toLowerCase&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(!&lt;/span&gt;&lt;span class="n"&gt;strLink&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;isEmpty&lt;/span&gt;&lt;span class="o"&gt;())&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;linksSet&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;strLink&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;

        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;Collections&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;unmodifiableCollection&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;linksSet&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;download&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;link&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;IOException&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;InterruptedException&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;

        &lt;span class="n"&gt;IOException&lt;/span&gt; &lt;span class="n"&gt;ioe&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
        &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;retry&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;5&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

        &lt;span class="k"&gt;do&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;

                &lt;span class="cm"&gt;/* Crawling a real web site politeness &amp;gt; 5s */&lt;/span&gt;

                &lt;span class="n"&gt;Thread&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;sleep&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
                &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;Document&lt;/span&gt; &lt;span class="n"&gt;bDoc&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Jsoup&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;connect&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;link&lt;/span&gt;&lt;span class="o"&gt;).&lt;/span&gt;&lt;span class="na"&gt;userAgent&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Mozilla&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;).&lt;/span&gt;&lt;span class="na"&gt;timeout&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;30000&lt;/span&gt;&lt;span class="o"&gt;).&lt;/span&gt;&lt;span class="na"&gt;get&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
                &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;bDoc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;html&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;catch&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;IOException&lt;/span&gt; &lt;span class="n"&gt;ex&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;ioe&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;ex&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="o"&gt;(--&lt;/span&gt;&lt;span class="n"&gt;retry&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

        &lt;span class="k"&gt;throw&lt;/span&gt; &lt;span class="n"&gt;ioe&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;extractTitle&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;html&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;Document&lt;/span&gt; &lt;span class="n"&gt;doc&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Jsoup&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;parse&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;html&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;Elements&lt;/span&gt; &lt;span class="n"&gt;elements&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;doc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;select&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;table table div table font&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;elements&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="n"&gt;elements&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;isEmpty&lt;/span&gt;&lt;span class="o"&gt;())&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;elements&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;first&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;text&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="nf"&gt;extractContent&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;html&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;Document&lt;/span&gt; &lt;span class="n"&gt;doc&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Jsoup&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;parse&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;html&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;Elements&lt;/span&gt; &lt;span class="n"&gt;elements&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;doc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;select&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;table table div table div&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;elements&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="n"&gt;elements&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;isEmpty&lt;/span&gt;&lt;span class="o"&gt;())&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;elements&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;first&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;text&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;doc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;select&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;table table div table&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;).&lt;/span&gt;&lt;span class="na"&gt;first&lt;/span&gt;&lt;span class="o"&gt;().&lt;/span&gt;&lt;span class="na"&gt;text&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–¢–µ–ø–µ—Ä—å —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞, –∫–æ—Ç–æ—Ä–∞—è –±—É–¥–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å &lt;em&gt;crawler&lt;/em&gt; –∏ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–º—É –∫–ª–∞—Å—Å—É &lt;code&gt;LuceneIndexer&lt;/code&gt; –¥–ª—è –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏:&lt;/p&gt;
&lt;p&gt;&lt;em&gt;crawler/src/main/java/crawler/App.java&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;package&lt;/span&gt; &lt;span class="nn"&gt;crawler&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.log4j.Logger&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;App&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;

    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;Logger&lt;/span&gt; &lt;span class="n"&gt;logger&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Logger&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getLogger&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;App&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getName&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;

    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;crawlSeed&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;http://localhost:8080&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt;&lt;span class="o"&gt;[]&lt;/span&gt; &lt;span class="n"&gt;args&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;LuceneIndexer&lt;/span&gt; &lt;span class="n"&gt;luceneIndexer&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;LuceneIndexer&lt;/span&gt;&lt;span class="o"&gt;())&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;

            &lt;span class="n"&gt;luceneIndexer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;new_index&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;

            &lt;span class="cm"&gt;/* Start crawler and perform indexing */&lt;/span&gt;

            &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;SimpleCrawler&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;App&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;crawlSeed&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;SimpleCrawler&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;ICrawlEvents&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;

                &lt;span class="cm"&gt;/* Proceed page - add to Lucene index */&lt;/span&gt;

                &lt;span class="nd"&gt;@Override&lt;/span&gt;
                &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;onVisit&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;html&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;seed&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                    &lt;span class="n"&gt;luceneIndexer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;html&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
                &lt;span class="o"&gt;}&lt;/span&gt;

                &lt;span class="cm"&gt;/* Skip any external links */&lt;/span&gt;

                &lt;span class="nd"&gt;@Override&lt;/span&gt;
                &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;boolean&lt;/span&gt; &lt;span class="nf"&gt;shouldVisit&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;seed&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;startsWith&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;seed&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
                &lt;span class="o"&gt;}&lt;/span&gt;

            &lt;span class="o"&gt;}).&lt;/span&gt;&lt;span class="na"&gt;run&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;

        &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;catch&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;Exception&lt;/span&gt; &lt;span class="n"&gt;ex&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;App&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;logger&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;error&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Unable to start !&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;ex&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –º—ã –ø–æ–¥–æ—à–ª–∏, –ø–æ–∂–∞–ª—É–π, –∫ –∫–ª—é—á–µ–≤–æ–º—É –º–æ–º–µ–Ω—Ç—É –¥–∞–Ω–Ω–æ–π —Å—Ç–∞—Ç—å–∏ - –ø—Ä–æ—Ü–µ—Å—Å—É —Å–æ–∑–¥–∞–Ω–∏—è –∏–Ω–¥–µ–∫—Å–∞ –≤ &lt;em&gt;Lucene&lt;/em&gt;. –ì–ª–∞–≤–Ω—ã–º –∫–ª–∞—Å—Å–æ–º —Ç—É—Ç —è–≤–ª—è–µ—Ç—Å—è &lt;code&gt;IndexWriter&lt;/code&gt; - –∫–æ—Ç–æ—Ä–æ–º—É –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–Ω–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é, –≥–¥–µ –±—É–¥—É—Ç —Ö—Ä–∞–Ω–∏—Ç—å—Å—è —Ñ–∞–π–ª—ã –∏–Ω–¥–µ–∫—Å–∞. –û–ø—Ü–∏—è &lt;code&gt;OpenMode.CREATE&lt;/code&gt; —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å —É–¥–∞–ª—è—Ç—å —Å—Ç–∞—Ä—ã–π –∏–Ω–¥–µ–∫—Å, –µ—Å–ª–∏ —Ç–æ—Ç –Ω–∞ –º–æ–º–µ–Ω—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç. –°–æ–≥–ª–∞—Å–Ω–æ &lt;a href="https://lucene.apache.org/core/6_0_0/core/org/apache/lucene/index/IndexWriter.html" rel="nofollow"&gt;–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏&lt;/a&gt;, &lt;code&gt;IndexWriter&lt;/code&gt; –ø–æ—Ç–æ–∫–æ–±–µ–∑–æ–ø–∞—Å–Ω—ã–π:&lt;/p&gt;
&lt;p&gt;&lt;em&gt;crawler/src/main/java/crawler/LuceneIndexer.java&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;package&lt;/span&gt; &lt;span class="nn"&gt;crawler&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.io.Closeable&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.io.IOException&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.log4j.Logger&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.document.Document&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.document.Field&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.document.FieldType&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.index.IndexOptions&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.index.IndexWriter&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.index.IndexWriterConfig&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.index.IndexWriterConfig.OpenMode&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.store.Directory&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.store.FSDirectory&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;common.LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;LuceneIndexer&lt;/span&gt; &lt;span class="kd"&gt;implements&lt;/span&gt; &lt;span class="n"&gt;Closeable&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;Logger&lt;/span&gt; &lt;span class="n"&gt;logger&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Logger&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getLogger&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LuceneIndexer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getName&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;

    &lt;span class="cm"&gt;/* IndexWriter is completely thread safe */&lt;/span&gt;

    &lt;span class="kd"&gt;private&lt;/span&gt; &lt;span class="n"&gt;IndexWriter&lt;/span&gt; &lt;span class="n"&gt;indexWriter&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

    &lt;span class="nd"&gt;@Override&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;close&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;IOException&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;indexWriter&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;LuceneIndexer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;logger&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;info&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Closing Index &amp;lt; &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; 
                    &lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;INDEX_PATH&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; &amp;gt; NumDocs: &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;indexWriter&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;numDocs&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
            &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;indexWriter&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;close&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
            &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;indexWriter&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
            &lt;span class="n"&gt;LuceneIndexer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;logger&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;info&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Index Closed OK!&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;throw&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;IOException&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Index already closed&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;new_index&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;IOException&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;Directory&lt;/span&gt; &lt;span class="n"&gt;directory&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;FSDirectory&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;open&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;INDEX_PATH&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;IndexWriterConfig&lt;/span&gt; &lt;span class="n"&gt;iwConfig&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;IndexWriterConfig&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getAnalyzer&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;
        &lt;span class="n"&gt;iwConfig&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setOpenMode&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;OpenMode&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;CREATE&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;indexWriter&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;IndexWriter&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;directory&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;iwConfig&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;html&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;

        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;title&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;HtmlHelper&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;extractTitle&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;html&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;content&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;HtmlHelper&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;extractContent&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;html&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

        &lt;span class="n"&gt;LuceneIndexer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;logger&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;info&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;***** &amp;quot;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;url&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; *****&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;title&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;LuceneIndexer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;logger&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;info&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;title&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="n"&gt;LuceneIndexer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;logger&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;info&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;content&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;Document&lt;/span&gt; &lt;span class="n"&gt;doc&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Document&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;

        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;FieldType&lt;/span&gt; &lt;span class="n"&gt;urlType&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;FieldType&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="n"&gt;urlType&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setIndexOptions&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;IndexOptions&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;DOCS&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;urlType&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setStored&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;urlType&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setTokenized&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;urlType&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setStoreTermVectorOffsets&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;urlType&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setStoreTermVectorPayloads&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;urlType&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setStoreTermVectorPositions&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;urlType&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setStoreTermVectors&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;false&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;doc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Field&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;URI_FIELD&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;url&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;urlType&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;

        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;FieldType&lt;/span&gt; &lt;span class="n"&gt;tokType&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;FieldType&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="n"&gt;tokType&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setIndexOptions&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;IndexOptions&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;DOCS_AND_FREQS_AND_POSITIONS_AND_OFFSETS&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;tokType&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setStored&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;tokType&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setTokenized&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;tokType&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setStoreTermVectorOffsets&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;tokType&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setStoreTermVectorPayloads&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;tokType&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setStoreTermVectorPositions&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;tokType&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;setStoreTermVectors&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kc"&gt;true&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;title&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;doc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Field&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;TITLE_FIELD&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;title&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;tokType&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="n"&gt;doc&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;add&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;Field&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;LuceneBinding&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;CONTENT_FIELD&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;content&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;tokType&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;

        &lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;indexWriter&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="kc"&gt;null&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
                &lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;indexWriter&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;addDocument&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;doc&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
            &lt;span class="o"&gt;}&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="k"&gt;catch&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;IOException&lt;/span&gt; &lt;span class="n"&gt;ex&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;LuceneIndexer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;logger&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;error&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ex&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="o"&gt;}&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ï—Å–ª–∏ –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –Ω–∞ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –∫–∞–∂–¥–æ–π html-—Å—Ç—Ä–∞–Ω–∏—á–∫–∏ –Ω–∞—à–µ–≥–æ —Å–∞–π—Ç–∞, —Ç–æ –ø–æ–º–∏–º–æ &lt;span style="text-decoration: line-through;"&gt;–Ω–µ&lt;/span&gt;–Ω–∞–≤—è–∑—á–∏–≤–æ–π —Ä–µ–∫–ª–∞–º—ã –∏ –ø—Ä–æ—á–µ–≥–æ –º—É—Å–æ—Ä–∞ –º–æ–∂–Ω–æ –≤—ã–¥–µ–ª–∏—Ç—å –¥–≤–µ –µ–¥–∏–Ω–∏—Ü—ã –±–æ–ª–µ–µ - –º–µ–Ω–µ–µ –ø–æ–ª–µ–∑–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏: &lt;em&gt;–Ω–∞–∑–≤–∞–Ω–∏–µ&lt;/em&gt; (title) –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ –∏ –µ—ë &lt;em&gt;—Å–æ–¥–µ—Ä–∂–∏–º–æ–µ&lt;/em&gt; (content). –ò–∑–≤–ª–µ—á—å –¥–∞–Ω–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏–∑ html –Ω–∞–º –ø–æ–º–æ–∂–µ—Ç —É–∂–µ —É–ø–æ–º—è–Ω—É—Ç–∞—è –≤—ã—à–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ &lt;em&gt;JSoup&lt;/em&gt;, –ø–æ—Å–ª–µ —á–µ–≥–æ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å &lt;code&gt;Document&lt;/code&gt; —Å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º–∏ –ø–æ–ª—è–º–∏ –≤ –∏–Ω–¥–µ–∫—Å &lt;em&gt;Lucene&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Lucene&lt;/em&gt; –º–æ–∂–µ—Ç —Å–æ—Ö—Ä–∞–Ω—è—Ç—å / –∏–∑–≤–ª–µ–∫–∞—Ç—å &lt;a href="https://lucene.apache.org/core/6_0_0/core/org/apache/lucene/document/Field.html" rel="nofollow"&gt;—Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö&lt;/a&gt;. –í –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ –≤—Å–µ –¥–∞–Ω–Ω—ã–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ, –ø–µ—Ä–≤–æ–µ –ø–æ–ª–µ - url, –ø–∞—Ä–∞–º–µ—Ç—Ä &lt;code&gt;setStored(true)&lt;/code&gt; —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç—å —Ö—Ä–∞–Ω–∏—Ç—å –≤ –∏–Ω–¥–µ–∫—Å–µ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–µ (–Ω–µ–∏–∑–º–µ–Ω–Ω–æ–µ) –∑–Ω–∞—á–µ–Ω–∏–µ, –∞ –æ—Å—Ç–∞–ª—å–Ω—ã–µ &lt;code&gt;false&lt;/code&gt; –Ω–∞ —Ç–æ, —á—Ç–æ –ø–æ–∏—Å–∫ –ø–æ —ç—Ç–æ–º—É –ø–æ–ª—é –æ—Å—É—â–µ—Å—Ç–≤–ª—è—Ç—å—Å—è –Ω–µ –±—É–¥–µ—Ç, —Ç.–µ. —ç—Ç–æ –ø–æ–ª–µ –Ω–µ—Å–µ—Ç –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –Ω–∞–π–¥–µ–Ω–Ω–æ–º –¥–æ–∫—É–º–µ–Ω—Ç–µ, –∫–æ—Ç–æ—Ä—É—é –º—ã –ø–ª–∞–Ω–∏—Ä—É–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –±—É–¥—É—â–µ–º. –ü–æ–ª—è &lt;em&gt;title&lt;/em&gt; –∏ &lt;em&gt;content&lt;/em&gt; –∏–Ω–¥–µ–∫—Å–∏—Ä—É—é—Ç—Å—è –æ–¥–∏–Ω–∞–∫–æ–≤–æ - &lt;code&gt;setTokenized(true)&lt;/code&gt; —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ —Ç–æ, —á—Ç–æ –ø–æ –¥–∞–Ω–Ω–æ–º—É –ø–æ–ª—é –±—É–¥–µ—Ç –æ—Å—É—â–µ—Å—Ç–≤–ª—è—Ç—å—Å—è –ø–æ–∏—Å–∫ –∞ —Ç–∞–∫–∂–µ –ø—Ä–æ—Å–∏—Ç &lt;em&gt;Lucene&lt;/em&gt; –∑–∞–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å –º–µ—Ö–∞–Ω–∏–∑–º—ã –∞–Ω–∞–ª–∏–∑–∞ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ –¥–∞–Ω–Ω–æ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –Ω–∞ —ç—Ç–∞–ø–µ —Å–æ–∑–¥–∞–Ω–∏—è –∏–Ω–¥–µ–∫—Å–∞ (—Å–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π –ø—Ä–∏–º–µ—Ä –∞–Ω–∞–ª–∏–∑–∞ - –≤—ã–¥–µ–ª–µ–Ω–∏–µ —Å–ª–æ–≤ –∏–∑ –Ω–∞–±–æ—Ä–∞ –±—É–∫–≤ –∏ –ø—Ä–æ–±–µ–ª–æ–≤ –º–µ–∂–¥—É –Ω–∏–º–∏), –ø–∞—Ä–∞–º–µ—Ç—Ä &lt;code&gt;setStoreTermVector(true)&lt;/code&gt; –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–∑–∏—Ü–∏—è—Ö —Ç–µ—Ö –∏–ª–∏ –∏–Ω—ã—Ö —Å–ª–æ–≤ –≤ —Ç–µ–ª–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞ - —Ç–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É—Å–∫–æ—Ä—è–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å –ø–æ–¥—Å–≤–µ—Ç–∫–∏ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –≤—Ö–æ–∂–¥–µ–Ω–∏–π.&lt;/p&gt;
&lt;p&gt;–ö–ª–∞—Å—Å &lt;code&gt;LuceneBinding&lt;/code&gt; - —ç—Ç–æ —Å–≤–æ–µ–æ–±—Ä–∞–∑–Ω—ã–π –º–æ—Å—Ç –º–µ–∂–¥—É –∏–Ω–¥–µ–∫—Å–∞—Ç–æ—Ä–æ–º (&lt;em&gt;crawler&lt;/em&gt;) –∏ –ø–æ–∏—Å–∫–æ–º (&lt;code&gt;SearchServlet&lt;/code&gt;), –æ–Ω —Å–æ–¥–µ—Ä–∂–∏—Ç –æ–±—â—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–æ–≤–º–µ—Å—Ç–Ω–æ –æ–±–æ–∏–º–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º–∏:&lt;/p&gt;
&lt;p&gt;&lt;em&gt;common/src/main/java/common/LuceneBinding.java&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;package&lt;/span&gt; &lt;span class="nn"&gt;common&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.nio.file.Path&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.nio.file.Paths&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.analysis.Analyzer&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.analysis.standard.StandardAnalyzer&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="cm"&gt;/* This class is used both by Crawler and SearchServlet */&lt;/span&gt;

&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;LuceneBinding&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;Path&lt;/span&gt; &lt;span class="n"&gt;INDEX_PATH&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Paths&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;get&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;
        &lt;span class="n"&gt;System&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getProperty&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;user.home&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;),&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;lucene-tutorial-index&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;URI_FIELD&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;uri&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;TITLE_FIELD&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;title&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;CONTENT_FIELD&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;content&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;static&lt;/span&gt; &lt;span class="n"&gt;Analyzer&lt;/span&gt; &lt;span class="nf"&gt;getAnalyzer&lt;/span&gt;&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="k"&gt;new&lt;/span&gt; &lt;span class="n"&gt;StandardAnalyzer&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;–°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫&lt;/h3&gt;
&lt;p&gt;–ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–∞–º crawler –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–ø—É—â–µ–Ω &lt;em&gt;Jetty&lt;/em&gt; —Å–µ—Ä–≤–µ—Ä —Å —Å–∞–π—Ç–æ–º, –∫–æ—Ç–æ—Ä—ã–π –º—ã —Ö–æ—Ç–∏–º –ø—Ä–æ–∏–Ω–¥–µ–∫—Å–∏—Ä–æ–≤–∞—Ç—å. –ß—Ç–æ–±—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–æ–±—Ä–∞–∂–∞–ª–∏—Å—å —Ä—É—Å—Å–∫–∏–µ –±—É–∫–≤—ã –≤ –∫–æ–Ω—Å–æ–ª–∏ &lt;em&gt;Windows&lt;/em&gt; –º–æ–∂–µ—Ç –ø–æ–Ω–∞–¥–æ–±–∏—Ç—å—Å—è –æ–±–æ–∑–Ω–∞—á–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –∫–æ–¥–∏—Ä–æ–≤–∫—É &lt;em&gt;Cp866&lt;/em&gt; –≤ —Ñ–∞–π–ª–µ &lt;em&gt;crawler/src/main/resources/log4j.properties&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ mvn clean install &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; bash -c &lt;span class="s1"&gt;&amp;#39;mvn -pl server/ jetty:run &amp;amp; sleep 10 &amp;amp;&amp;amp; \&lt;/span&gt;
&lt;span class="s1"&gt;    mvn -pl crawler/ exec:java -Dexec.mainClass=&amp;quot;crawler.App&amp;quot; &amp;amp; \&lt;/span&gt;
&lt;span class="s1"&gt;    trap &amp;quot;kill -TERM -$$&amp;quot; SIGINT ; wait&amp;#39;&lt;/span&gt;
...
INFO &lt;span class="o"&gt;[&lt;/span&gt;crawler.App.main&lt;span class="o"&gt;()]&lt;/span&gt; Closing Index &amp;lt; /home/oleg/lucene-tutorial-index &amp;gt; NumDocs: &lt;span class="m"&gt;53&lt;/span&gt;
INFO &lt;span class="o"&gt;[&lt;/span&gt;crawler.App.main&lt;span class="o"&gt;()]&lt;/span&gt; Index Closed OK!
Ctrl+C
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2012/10/21/lucene-proverka-indeksa/"&gt;–î–∞–ª–µ–µ&lt;/a&gt; –º—ã –±–µ–≥–ª–æ –∑–∞–≥–ª—è–Ω–µ–º –≤ –∏–Ω–¥–µ–∫—Å, –ø–æ—Å–ª–µ —á–µ–≥–æ —Ä–µ–∞–ª–∏–∑—É–µ–º –ø—Ä–æ—Å—Ç–æ–π –ø–æ–∏—Å–∫.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2012/10/17/lucene-protsess-indeksatsii/lucene-tutorial.zip"&gt;–ò—Å—Ö–æ–¥–Ω–∏–∫–∏&lt;/a&gt;&lt;/p&gt;</content><category term="Lucene"></category><category term="JSoup"></category><category term="Maven"></category></entry><entry><title>Lucene - –∫—É—Ä—Å –º–æ–ª–æ–¥–æ–≥–æ –±–æ–π—Ü–∞</title><link href="http://proiot.ru/blog/posts/2012/10/15/lucene-kurs-molodogo-boitsa/" rel="alternate"></link><published>2012-10-15T00:00:00+03:00</published><updated>2012-10-15T00:00:00+03:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2012-10-15:/blog/posts/2012/10/15/lucene-kurs-molodogo-boitsa/</id><summary type="html">&lt;p&gt;&lt;a href="http://lucene.apache.org/" rel="nofollow"&gt;Lucene&lt;/a&gt; - —ç—Ç–æ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –≤—ã—Å–æ–∫–æ—Å–∫–æ—Ä–æ—Å—Ç–Ω–æ–≥–æ –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –ø–æ–∏—Å–∫–∞ —Å –æ—Ç–∫—Ä—ã—Ç—ã–º –∏—Å—Ö–æ–¥–Ω—ã–º –∫–æ–¥–æ–º, –Ω–∞–ø–∏—Å–∞–Ω–Ω–∞—è –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞ &lt;strong&gt;Java&lt;/strong&gt;. –í–æ–ø—Ä–µ–∫–∏ –Ω–µ–∫–æ—Ç–æ—Ä—ã–º –æ–∂–∏–¥–∞–Ω–∏—è–º –∏ –∑–∞–±–ª—É–∂–¥–µ–Ω–∏—è–º &lt;em&gt;Lucene&lt;/em&gt; –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –∑–∞–∫–æ–Ω—á–µ–Ω–Ω—ã–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º - —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞, –∫–æ—Ç–æ—Ä—É—é –º–æ–∂–Ω–æ (–Ω—É–∂–Ω–æ) –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–æ–∏—Å–∫–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö, –∞ –∫–∞–∫–∏—Ö –∏–º–µ–Ω–Ω–æ -  &lt;em&gt;web&lt;/em&gt;, &lt;em&gt;desktop&lt;/em&gt; –∏ —Ç.–¥. –Ω–µ –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è. –ü—Ä–æ–µ–∫—Ç ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a href="http://lucene.apache.org/" rel="nofollow"&gt;Lucene&lt;/a&gt; - —ç—Ç–æ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –≤—ã—Å–æ–∫–æ—Å–∫–æ—Ä–æ—Å—Ç–Ω–æ–≥–æ –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –ø–æ–∏—Å–∫–∞ —Å –æ—Ç–∫—Ä—ã—Ç—ã–º –∏—Å—Ö–æ–¥–Ω—ã–º –∫–æ–¥–æ–º, –Ω–∞–ø–∏—Å–∞–Ω–Ω–∞—è –ø–æ–ª–Ω–æ—Å—Ç—å—é –Ω–∞ &lt;strong&gt;Java&lt;/strong&gt;. –í–æ–ø—Ä–µ–∫–∏ –Ω–µ–∫–æ—Ç–æ—Ä—ã–º –æ–∂–∏–¥–∞–Ω–∏—è–º –∏ –∑–∞–±–ª—É–∂–¥–µ–Ω–∏—è–º &lt;em&gt;Lucene&lt;/em&gt; –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –∑–∞–∫–æ–Ω—á–µ–Ω–Ω—ã–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º - —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ –±–∏–±–ª–∏–æ—Ç–µ–∫–∞, –∫–æ—Ç–æ—Ä—É—é –º–æ–∂–Ω–æ (–Ω—É–∂–Ω–æ) –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –ø–æ–∏—Å–∫–∞ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö, –∞ –∫–∞–∫–∏—Ö –∏–º–µ–Ω–Ω–æ -  &lt;em&gt;web&lt;/em&gt;, &lt;em&gt;desktop&lt;/em&gt; –∏ —Ç.–¥. –Ω–µ –∏–º–µ–µ—Ç –∑–Ω–∞—á–µ–Ω–∏—è. –ü—Ä–æ–µ–∫—Ç –∞–∫—Ç–∏–≤–Ω–æ —Ä–∞–∑–≤–∏–≤–∞–µ—Ç—Å—è –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è, –∫—Ä–æ–º–µ —Ç–æ–≥–æ, –µ—Å—Ç—å —Ö–æ—Ä–æ—à–∏–µ –ø–æ—Ä—Ç—ã –Ω–∞ –¥—Ä—É–≥–∏–µ —è–∑—ã–∫–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è - –∞ —ç—Ç–æ —É–∂–µ –æ –º–Ω–æ–≥–æ–º –≥–æ–≤–æ—Ä–∏—Ç –≤ –ø–æ–ª—å–∑—É –ø—Ä–æ–µ–∫—Ç–∞ –≤—Ü–µ–ª–æ–º.&lt;/p&gt;
&lt;p&gt;–í —ç—Ç–æ–º —Ü–∏–∫–ª–µ —Å—Ç–∞—Ç–µ–π –º—ã –ø–æ—ç—Ç–∞–ø–Ω–æ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –æ—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ &lt;em&gt;Lucene&lt;/em&gt; –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∑–∞–∫–æ–Ω—á–µ–Ω–Ω–æ–≥–æ &lt;strong&gt;web-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è&lt;/strong&gt; - —Å–∏—Å—Ç–µ–º—ã –ø–æ–∏—Å–∫–∞ –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –∏ —É–∂–µ –¥–∞–≤–Ω–æ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —Å–∞–π—Ç–∞. –ü–æ—Å–∫–æ–ª—å–∫—É, –∫–∞–∫ —É–∂–µ –±—ã–ª–æ —É–ø–æ–º—è–Ω—É—Ç–æ —Ä–∞–Ω–µ–µ, &lt;em&gt;Lucene&lt;/em&gt; –Ω–∞–ø–∏—Å–∞–Ω–∞ –Ω–∞ &lt;em&gt;Java&lt;/em&gt;, —Ç–æ –Ω–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç —Ç–æ–∂–µ –Ω–∞–ø–∏—Å–∞–Ω–æ –Ω–∞ &lt;em&gt;Java&lt;/em&gt; –∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ –≤ –≤–∏–¥–µ &lt;strong&gt;Servlet&lt;/strong&gt;, —Ö–æ—Å—Ç–∏—Ç—Å—è –≤—Å—ë —ç—Ç–æ –¥–æ–±—Ä–æ –±—É–¥–µ—Ç –Ω–∞ &lt;a href="https://ru.wikipedia.org/wiki/Jetty" rel="nofollow"&gt;Jetty&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;–í –ø—Ä–æ–µ–∫—Ç–µ –±—É–¥–µ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø–æ–¥–ø—Ä–æ–µ–∫—Ç–æ–≤, –ø–æ—ç—Ç–æ–º—É –ø—Ä–µ–¥–ª–∞–≥–∞—é —Å—Ä–∞–∑—É –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –º—É–ª—å—Ç–∏-–º–æ–¥—É–ª—å–Ω–æ—Å—Ç—å—é &lt;a href="https://books.sonatype.com/mvnex-book/reference/multimodule.html" rel="nofollow"&gt;Maven&lt;/a&gt;, –≥–¥–µ –≤ –∫–æ—Ä–Ω–µ –Ω–∞–º–µ—á–∞–µ—Ç—Å—è –æ–±—â–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç Lucene. –ù–∞—á–Ω—ë–º —Å —Å–µ—Ä–≤–µ—Ä–∞:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ &lt;span class="nb"&gt;cd&lt;/span&gt; lucene-tutorial/
~$ tree
.
‚îú‚îÄ‚îÄ pom.xml
‚îî‚îÄ‚îÄ server
    ‚îú‚îÄ‚îÄ pom.xml
    ‚îú‚îÄ‚îÄ src
    ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ main
    ‚îÇ¬†¬†     ‚îú‚îÄ‚îÄ java
    ‚îÇ¬†¬†     ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ server
    ‚îÇ¬†¬†     ‚îÇ¬†¬†     ‚îî‚îÄ‚îÄ SearchServlet.java
    ‚îÇ¬†¬†     ‚îî‚îÄ‚îÄ webapp
    ‚îÇ¬†¬†         ‚îî‚îÄ‚îÄ WEB-INF
    ‚îÇ¬†¬†             ‚îî‚îÄ‚îÄ web.xml
    ‚îî‚îÄ‚îÄ static.war

&lt;span class="m"&gt;7&lt;/span&gt; directories, &lt;span class="m"&gt;5&lt;/span&gt; files
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;em&gt;pom.xml&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;project&lt;/span&gt; &lt;span class="na"&gt;xmlns=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;http://maven.apache.org/POM/4.0.0&amp;quot;&lt;/span&gt; 
  &lt;span class="na"&gt;xmlns:xsi=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;http://www.w3.org/2001/XMLSchema-instance&amp;quot;&lt;/span&gt;
  &lt;span class="na"&gt;xsi:schemaLocation=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;modelVersion&amp;gt;&lt;/span&gt;4.0.0&lt;span class="nt"&gt;&amp;lt;/modelVersion&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;tutorial.lucene&lt;span class="nt"&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;parent&lt;span class="nt"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;packaging&amp;gt;&lt;/span&gt;pom&lt;span class="nt"&gt;&amp;lt;/packaging&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;version&amp;gt;&lt;/span&gt;1.0&lt;span class="nt"&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;dependencies&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.apache.lucene&lt;span class="nt"&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;lucene-core&lt;span class="nt"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;version&amp;gt;&lt;/span&gt;6.0.0&lt;span class="nt"&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;/dependencies&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;modules&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;module&amp;gt;&lt;/span&gt;server&lt;span class="nt"&gt;&amp;lt;/module&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;/modules&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/project&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;em&gt;server/pom.xml&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nt"&gt;&amp;lt;project&lt;/span&gt; &lt;span class="na"&gt;xmlns=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;http://maven.apache.org/POM/4.0.0&amp;quot;&lt;/span&gt; 
  &lt;span class="na"&gt;xmlns:xsi=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;http://www.w3.org/2001/XMLSchema-instance&amp;quot;&lt;/span&gt;
  &lt;span class="na"&gt;xsi:schemaLocation=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;modelVersion&amp;gt;&lt;/span&gt;4.0.0&lt;span class="nt"&gt;&amp;lt;/modelVersion&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;parent&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;tutorial.lucene&lt;span class="nt"&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;parent&lt;span class="nt"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;version&amp;gt;&lt;/span&gt;1.0&lt;span class="nt"&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;/parent&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;server&lt;span class="nt"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;packaging&amp;gt;&lt;/span&gt;war&lt;span class="nt"&gt;&amp;lt;/packaging&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;name&amp;gt;&lt;/span&gt;Lucene Tutorial Server&lt;span class="nt"&gt;&amp;lt;/name&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;dependencies&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;javax.servlet&lt;span class="nt"&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;servlet-api&lt;span class="nt"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;version&amp;gt;&lt;/span&gt;2.4&lt;span class="nt"&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;scope&amp;gt;&lt;/span&gt;provided&lt;span class="nt"&gt;&amp;lt;/scope&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;/dependencies&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;build&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;plugins&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;plugin&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.eclipse.jetty&lt;span class="nt"&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;jetty-maven-plugin&lt;span class="nt"&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;version&amp;gt;&lt;/span&gt;9.3.8.v20160314&lt;span class="nt"&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
        &lt;span class="nt"&gt;&amp;lt;configuration&amp;gt;&lt;/span&gt;
          &lt;span class="nt"&gt;&amp;lt;webApp&amp;gt;&lt;/span&gt;
            &lt;span class="nt"&gt;&amp;lt;contextPath&amp;gt;&lt;/span&gt;/search&lt;span class="nt"&gt;&amp;lt;/contextPath&amp;gt;&lt;/span&gt;
          &lt;span class="nt"&gt;&amp;lt;/webApp&amp;gt;&lt;/span&gt;
          &lt;span class="nt"&gt;&amp;lt;contextHandlers&amp;gt;&lt;/span&gt;
            &lt;span class="nt"&gt;&amp;lt;contextHandler&lt;/span&gt; &lt;span class="na"&gt;implementation=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;org.eclipse.jetty.maven.plugin.JettyWebAppContext&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
              &lt;span class="nt"&gt;&amp;lt;war&amp;gt;&lt;/span&gt;${project.basedir}/static.war&lt;span class="nt"&gt;&amp;lt;/war&amp;gt;&lt;/span&gt; --&amp;gt;
              &lt;span class="nt"&gt;&amp;lt;contextPath&amp;gt;&lt;/span&gt;/&lt;span class="nt"&gt;&amp;lt;/contextPath&amp;gt;&lt;/span&gt;
            &lt;span class="nt"&gt;&amp;lt;/contextHandler&amp;gt;&lt;/span&gt;
          &lt;span class="nt"&gt;&amp;lt;/contextHandlers&amp;gt;&lt;/span&gt; 
        &lt;span class="nt"&gt;&amp;lt;/configuration&amp;gt;&lt;/span&gt;
      &lt;span class="nt"&gt;&amp;lt;/plugin&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;/plugins&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;/build&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/project&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ò–º–µ–µ—Ç—Å—è –≥–æ—Ç–æ–≤—ã–π —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π &lt;a href="http://www.turismy.com/" rel="nofollow"&gt;—Å–∞–π—Ç&lt;/a&gt;, –¥–ª—è –∫–æ—Ç–æ—Ä–æ–≥–æ –º—ã –±—É–¥–µ–º —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –ø–æ–∏—Å–∫ –≤ –≤–∏–¥–µ –∞—Ä—Ö–∏–≤–∞ static.war. –ú—ã –≤–æ–∑—å–º—ë–º –Ω–µ–∫–æ–≥–¥–∞ —Ç–æ–ø–æ–≤—ã–π –≤ –≥—É–≥–ª–µ —Å–∞–π—Ç –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º &lt;em&gt;–°–µ–º—å –ß—É–¥–µ—Å –°–≤–µ—Ç–∞&lt;/em&gt;. –ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç —Å–∞–π—Ç–∞ –º–æ–∂–Ω–æ —Å –ø–æ–º–æ—â—å—é &lt;em&gt;Linux&lt;/em&gt;'–æ–≤–æ–π —É—Ç–∏—Ç–∏—Ç—ã &lt;em&gt;wget&lt;/em&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;wget -r http://www.turismy.com/
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç –±—É–¥–µ—Ç –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è —Å–µ—Ä–≤–ª–µ—Ç–æ–º, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–∏—Å–∫–∞ –ø–æ —Å–∞–π—Ç—É, —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å—Å—è –æ–Ω –±—É–¥–µ—Ç –ø–æ—ç—Ç–∞–ø–Ω–æ. –î–ª—è &lt;strong&gt;Servlet&lt;/strong&gt; —è–≤–Ω–æ —É–∫–∞–∑–∞–Ω –º–∞—Ä—à—Ä—É—Ç - &lt;em&gt;/search&lt;/em&gt; –≤ —Ç–æ –≤—Ä–µ–º—è –∫–∞–∫ —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç –≤ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –∫–æ—Ä–Ω–µ —Å–∞–π—Ç–∞. –î–ª—è –Ω–∞—á–∞–ª–∞ —Ä–µ–∞–ª–∏–∑—É–µ–º –æ—á–µ–Ω—å –ø—Ä–æ—Å—Ç–æ–π —Å–µ—Ä–≤–ª–µ—Ç, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–¥–∞—Å—Ç –∫–∞–∫—É—é-—Ç–æ —ç–ª–µ–º–µ–Ω—Ç–∞—Ä–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏–∑ &lt;em&gt;Lucene&lt;/em&gt;:&lt;/p&gt;
&lt;p&gt;&lt;em&gt;server/src/main/webapp/WEB-INF/web.xml&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;&amp;lt;?xml version=&amp;quot;1.0&amp;quot; encoding=&amp;quot;UTF-8&amp;quot;?&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;web-app&lt;/span&gt; &lt;span class="na"&gt;xmlns:xsi=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;http://www.w3.org/2001/XMLSchema-instance&amp;quot;&lt;/span&gt; 
    &lt;span class="na"&gt;xmlns=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;http://java.sun.com/xml/ns/j2ee&amp;quot;&lt;/span&gt; 
    &lt;span class="na"&gt;xmlns:web=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;http://xmlns.jcp.org/xml/ns/javaee&amp;quot;&lt;/span&gt; 
    &lt;span class="na"&gt;xsi:schemaLocation=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;http://xmlns.jcp.org/xml/ns/javaee &lt;/span&gt;
&lt;span class="s"&gt;        http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd&amp;quot;&lt;/span&gt; 
    &lt;span class="na"&gt;version=&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;2.4&amp;quot;&lt;/span&gt;&lt;span class="nt"&gt;&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;servlet&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;servlet-name&amp;gt;&lt;/span&gt;search&lt;span class="nt"&gt;&amp;lt;/servlet-name&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;servlet-class&amp;gt;&lt;/span&gt;server.SearchServlet&lt;span class="nt"&gt;&amp;lt;/servlet-class&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;/servlet&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;servlet-mapping&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;servlet-name&amp;gt;&lt;/span&gt;search&lt;span class="nt"&gt;&amp;lt;/servlet-name&amp;gt;&lt;/span&gt;
    &lt;span class="nt"&gt;&amp;lt;url-pattern&amp;gt;&lt;/span&gt;/&lt;span class="nt"&gt;&amp;lt;/url-pattern&amp;gt;&lt;/span&gt;
  &lt;span class="nt"&gt;&amp;lt;/servlet-mapping&amp;gt;&lt;/span&gt;
&lt;span class="nt"&gt;&amp;lt;/web-app&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;em&gt;server/src/main/java/server/SearchServlet.java&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kn"&gt;package&lt;/span&gt; &lt;span class="nn"&gt;server&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.io.IOException&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.io.PrintWriter&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;java.util.Arrays&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;javax.servlet.ServletException&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;javax.servlet.http.HttpServlet&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;javax.servlet.http.HttpServletRequest&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;javax.servlet.http.HttpServletResponse&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;org.apache.lucene.util.Version&lt;/span&gt;&lt;span class="o"&gt;;&lt;/span&gt;

&lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kd"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;SearchServlet&lt;/span&gt; &lt;span class="kd"&gt;extends&lt;/span&gt; &lt;span class="n"&gt;HttpServlet&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;

    &lt;span class="nd"&gt;@Override&lt;/span&gt;
    &lt;span class="kd"&gt;public&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;doGet&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;HttpServletRequest&lt;/span&gt; &lt;span class="n"&gt;req&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;HttpServletResponse&lt;/span&gt; &lt;span class="n"&gt;res&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
            &lt;span class="kd"&gt;throws&lt;/span&gt; &lt;span class="n"&gt;ServletException&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="n"&gt;IOException&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;PrintWriter&lt;/span&gt; &lt;span class="n"&gt;out&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;res&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getWriter&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
        &lt;span class="kd"&gt;final&lt;/span&gt; &lt;span class="n"&gt;String&lt;/span&gt; &lt;span class="n"&gt;luceneVersions&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Arrays&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;toString&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Version&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;class&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;getFields&lt;/span&gt;&lt;span class="o"&gt;());&lt;/span&gt;

        &lt;span class="n"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&amp;lt;HTML&amp;gt;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&amp;lt;BODY&amp;gt;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="n"&gt;luceneVersions&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;replace&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;,&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;&amp;lt;br /&amp;gt;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;));&lt;/span&gt;
        &lt;span class="n"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&amp;lt;/BODY&amp;gt;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;println&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&amp;lt;/HTML&amp;gt;&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;);&lt;/span&gt;

        &lt;span class="n"&gt;out&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;close&lt;/span&gt;&lt;span class="o"&gt;();&lt;/span&gt;
    &lt;span class="o"&gt;}&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;–°–±–æ—Ä–∫–∞ –∏ –ø–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫&lt;/h3&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ apt install maven default-jdk
~$ mvn -v
Apache Maven &lt;span class="m"&gt;3&lt;/span&gt;.3.9
Java version: &lt;span class="m"&gt;1&lt;/span&gt;.8.0_03-Ubuntu, vendor: Oracle Corporation
~$ sudo netstat -tulpn &lt;span class="p"&gt;|&lt;/span&gt; grep -q &lt;span class="m"&gt;8080&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;port 8080 is busy !&amp;#39;&lt;/span&gt;
~$ mvn clean -pl server/ jetty:run
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="Linux Site" src="http://proiot.ru/blog/posts/2012/10/15/lucene-kurs-molodogo-boitsa/Linux_ff_site.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="Linux Site Search" src="http://proiot.ru/blog/posts/2012/10/15/lucene-kurs-molodogo-boitsa/Linux_ff_site_slash_search.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–¢–µ–ø–µ—Ä—å —É –Ω–∞—Å –≤ —Å–∏—Å—Ç–µ–º–µ –µ—Å—Ç—å –ø–æ–¥–æ–ø—ã—Ç–Ω—ã–π —Å–∞–π—Ç &lt;strong&gt;http://localhost:8080/&lt;/strong&gt; —Å –∫–æ—Ç–æ—Ä—ã–º –º—ã –∏ –±—É–¥–µ–º —Ä–∞–±–æ—Ç–∞—Ç—å &lt;a href="http://proiot.ru/blog/posts/2012/10/17/lucene-protsess-indeksatsii/"&gt;–¥–∞–ª–µ–µ&lt;/a&gt;, –≥–¥–µ –ø–µ—Ä–≤—ã–º –¥–µ–ª–æ–º –ø—Ä–æ–∏–Ω–¥–µ–∫—Å–∏—Ä—É–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –Ω–∞—à–µ–≥–æ —Å–∞–π—Ç–∞.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2012/10/15/lucene-kurs-molodogo-boitsa/lucene-tutorial.zip"&gt;–ò—Å—Ö–æ–¥–Ω–∏–∫–∏&lt;/a&gt;&lt;/p&gt;</content><category term="Jetty"></category><category term="Lucene"></category><category term="Maven"></category></entry><entry><title>–ê–≤—Ç–æ–º–∞—Ç —Å –∫–æ–Ω–µ—á–Ω—ã–º —á–∏—Å–ª–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–π</title><link href="http://proiot.ru/blog/posts/2012/10/09/avtomat-s-konechnym-chislom-sostoianii/" rel="alternate"></link><published>2012-10-09T00:00:00+03:00</published><updated>2012-10-09T00:00:00+03:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2012-10-09:/blog/posts/2012/10/09/avtomat-s-konechnym-chislom-sostoianii/</id><summary type="html">&lt;p&gt;–ü—Ä–æ—Å—Ç—ã–º –ø—Ä–∏–º–µ—Ä–æ–º –º–∞—à–∏–Ω—ã —Å –∫–æ–Ω–µ—á–Ω—ã–º —á–∏—Å–ª–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–π (&lt;strong&gt;FSM&lt;/strong&gt; - &lt;em&gt;Finite State Machine&lt;/em&gt;) –º–æ–∂–µ—Ç –±—ã—Ç—å –ö–∏—Ç–∞–π—Å–∫–∞—è –≥–∏—Ä–ª—è–Ω–¥–∞. –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–∏–≤–Ω–æ –æ–Ω–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –∏–∑ —Å–µ–±—è —á–µ—Ä–Ω—É—é –∫–æ—Ä–æ–±–æ—á–∫—É —Å –∫–Ω–æ–ø–æ—á–∫–æ–π, –¥–≤–∞ –ø—Ä–æ–≤–æ–¥–∞ –¥–ª—è –ø–∏—Ç–∞–Ω–∏—è (220 –í), –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø—Ä–æ–≤–æ–¥–∞ –¥–ª—è —Ä–∞–∑–Ω–æ—Ü–≤–µ—Ç–Ω—ã—Ö –ª–∞–º–ø–æ—á–µ–∫, –∫–æ—Ç–æ—Ä—ã–º–∏ —É–ø—Ä–∞–≤–ª—è–µ—Ç –≥–æ—Ç–æ–≤–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞. –í–Ω—É—Ç—Ä–∏ –∫–æ—Ä–æ–±–æ—á–∫–∏ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è &lt;em&gt;–º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä&lt;/em&gt; –∏ —Å–æ–ø—É—Ç—Å—Ç–≤—É—é—â–∞—è –æ–±–≤—è–∑–∫–∞. –ú—ã –Ω–µ –±—É–¥–µ–º —É–≥–ª—É–±–ª—è—Ç—å—Å—è ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;p&gt;–ü—Ä–æ—Å—Ç—ã–º –ø—Ä–∏–º–µ—Ä–æ–º –º–∞—à–∏–Ω—ã —Å –∫–æ–Ω–µ—á–Ω—ã–º —á–∏—Å–ª–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–π (&lt;strong&gt;FSM&lt;/strong&gt; - &lt;em&gt;Finite State Machine&lt;/em&gt;) –º–æ–∂–µ—Ç –±—ã—Ç—å –ö–∏—Ç–∞–π—Å–∫–∞—è –≥–∏—Ä–ª—è–Ω–¥–∞. –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–∏–≤–Ω–æ –æ–Ω–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –∏–∑ —Å–µ–±—è —á–µ—Ä–Ω—É—é –∫–æ—Ä–æ–±–æ—á–∫—É —Å –∫–Ω–æ–ø–æ—á–∫–æ–π, –¥–≤–∞ –ø—Ä–æ–≤–æ–¥–∞ –¥–ª—è –ø–∏—Ç–∞–Ω–∏—è (220 –í), –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø—Ä–æ–≤–æ–¥–∞ –¥–ª—è —Ä–∞–∑–Ω–æ—Ü–≤–µ—Ç–Ω—ã—Ö –ª–∞–º–ø–æ—á–µ–∫, –∫–æ—Ç–æ—Ä—ã–º–∏ —É–ø—Ä–∞–≤–ª—è–µ—Ç –≥–æ—Ç–æ–≤–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞. –í–Ω—É—Ç—Ä–∏ –∫–æ—Ä–æ–±–æ—á–∫–∏ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è &lt;em&gt;–º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä&lt;/em&gt; –∏ —Å–æ–ø—É—Ç—Å—Ç–≤—É—é—â–∞—è –æ–±–≤—è–∑–∫–∞. –ú—ã –Ω–µ –±—É–¥–µ–º —É–≥–ª—É–±–ª—è—Ç—å—Å—è –≤ –¥–µ—Ç–∞–ª–∏ —Å—Ö–µ–º–æ—Ç–µ—Ö–Ω–∏–∫–∏ –∞ —Å–∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∏—Ä—É–µ–º—Å—è –Ω–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –º–µ—Ç–æ–¥–∏–∫–∞—Ö —Ä–µ—à–µ–Ω–∏—è –ø–æ–¥–æ–±–Ω—ã—Ö –∑–∞–¥–∞—á –∏ –∏—Ö –∞–Ω–∞–ª–∏–∑–µ —Ç.–µ. –Ω–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —á–∏—Å—Ç–æ–≥–æ &lt;em&gt;ANSI C&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;–î–ª—è —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤ –Ω–∞–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—å—Å—è –∫–∞–∫–æ–π-—Ç–æ —Ç–µ—Å—Ç–æ–≤—ã–π –º–∞–∫–µ—Ç, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å / —ç–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –≤ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π —Å—Ä–µ–¥–µ (–≤—ã–±–æ—Ä –ø–∞–ª –Ω–∞ &lt;em&gt;Proteus VSM&lt;/em&gt;). –ï—Å—Ç—å –ø—Ä–æ—Å—Ç–µ–Ω—å–∫–∏–π –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä (PIC16F1823), –∫–æ—Ç–æ—Ä—ã–π —É–ø—Ä–∞–≤–ª—è–µ—Ç –ª–∞–º–ø–æ—á–∫–∞–º–∏ (–≥–∏—Ä–ª—è–Ω–¥–æ–π) –∏ –º–æ–∂–µ—Ç –º–µ–Ω—è—Ç—å –∏—Ö —è—Ä–∫–æ—Å—Ç—å —Å –ø–æ–º–æ—â—å—é –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ —Ü–∏—Ñ—Ä–æ-–∞–Ω–∞–ª–æ–≥–æ–≤–æ–≥–æ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—è –¶–ê–ü (–≤ —Ä–µ–∞–ª—å–Ω–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ –¥–ª—è —ç—Ç–æ–≥–æ –ª—É—á—à–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –®–ò–ú, –¶–ê–ü –ª—É—á—à–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —ç–º—É–ª—è—Ü–∏–∏ –≤ &lt;em&gt;Proteus VSM&lt;/em&gt;). –ë—ã—Å—Ç—Ä–æ –≤–Ω–∏–∫–Ω—É—Ç—å –≤ —Å—É—Ç—å –¥–µ–ª–∞ –º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ–≤ —Å–ª–µ–¥—É—é—â–µ–µ –≤–∏–¥–µ–æ:&lt;/p&gt;
&lt;video width="100%" controls&gt;
  &lt;source src="http://proiot.ru/blog/posts/2012/10/09/avtomat-s-konechnym-chislom-sostoianii/video.mp4" type="video/mp4"&gt;
Your browser does not support the video tag.
&lt;/video&gt;

&lt;p&gt;–ù–∞—á–Ω—ë–º —Å –ø—Ä–æ—Å—Ç–æ–≥–æ - –Ω–∞–ø–∏—à–µ–º –ø—Ä–æ–≥—Ä–∞–º–º—É –¥–ª—è –≥–∏—Ä–ª—è–Ω–¥—ã —Å &lt;em&gt;–¥–≤—É–º—è&lt;/em&gt; —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏ - –≤ –ø–µ—Ä–≤–æ–º —Å–≤–µ—Ç–æ–¥–∏–æ–¥—ã –ø–æ–æ—á–µ—Ä—ë–¥–Ω–æ –≤—Å–ø—ã—Ö–∏–≤–∞—é—Ç —Å–ª–µ–≤–∞ –Ω–∞–ø—Ä–∞–≤–æ, –≤–æ –≤—Ç–æ—Ä–æ–º —Å–ø—Ä–∞–≤–∞ –Ω–∞–ª–µ–≤–æ. –í —Å–∏—Å—Ç–µ–º–µ –¥–≤–∞ —Å–æ–±—ã—Ç–∏—è - –Ω–∞–∂–∞–ª–∏ –∫–Ω–æ–ø–æ—á–∫—É (NEXT) –∏ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–µ (–Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –≥–∏—Ä–ª—è–Ω–¥—ã) —Å–æ–±—ã—Ç–∏–µ –æ—Ç —Ç–∞–π–º–µ—Ä–∞ (TICK). –°–æ–±—ã—Ç–∏–µ NEXT –∏–∑–º–µ–Ω—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ:&lt;/p&gt;
&lt;p&gt;&lt;img alt="–î–∏–∞–≥—Ä–∞–º–º–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π –°–∫—Ä–∏–Ω—à–æ—Ç" src="http://proiot.ru/blog/posts/2012/10/09/avtomat-s-konechnym-chislom-sostoianii/State_Diagram.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;h3&gt;–û–ø–µ—Ä–∞—Ç–æ—Ä—ã switch/case&lt;/h3&gt;
&lt;p&gt;–ü—Ä–∏–±–µ–≥–Ω—É–≤ –∫ –ø–æ–º–æ—â–∏ —É—Å–ª–æ–≤–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤ &lt;code&gt;if&lt;/code&gt; / &lt;code&gt;else&lt;/code&gt; –∏–ª–∏ &lt;code&gt;switch&lt;/code&gt; / &lt;code&gt;case&lt;/code&gt; –ø–æ-—Å—Ç–∞—Ä–∏–Ω–∫–µ –∑–∞–¥–∞—á—É —Ä–µ—à–∏–ª–∏ —Ç–∞–∫:&lt;/p&gt;
&lt;p&gt;&lt;em&gt;FSM/Child/src/main.c&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;main.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="k"&gt;typedef&lt;/span&gt; &lt;span class="k"&gt;enum&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;LEFT_TO_RIGHT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;RIGHT_TO_LEFT&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="n"&gt;State&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="cm"&gt;/* Global variable to hold current state */&lt;/span&gt;

&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="n"&gt;State&lt;/span&gt; &lt;span class="n"&gt;currentState&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;RIGHT_TO_LEFT&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="cm"&gt;/* Event handlers implementations */&lt;/span&gt;

&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;onLeftToRightTickImpl&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;nextLeftLed&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt; &lt;span class="c1"&gt;// in main.h&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;onLeftToRightNextImpl&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;resetLeds&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt; &lt;span class="c1"&gt;// in main.h&lt;/span&gt;
    &lt;span class="n"&gt;currentState&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;RIGHT_TO_LEFT&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;onRightToLeftTickImpl&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;nextRightLed&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt; &lt;span class="c1"&gt;// in main.h&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;onRightToLeftNextImpl&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;resetLeds&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt; &lt;span class="c1"&gt;// in main.h&lt;/span&gt;
    &lt;span class="n"&gt;currentState&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;LEFT_TO_RIGHT&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

    &lt;span class="n"&gt;initHardware&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt; &lt;span class="c1"&gt;// in main.h&lt;/span&gt;

    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(;;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

        &lt;span class="k"&gt;typedef&lt;/span&gt; &lt;span class="k"&gt;enum&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;NEXT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="n"&gt;TICK&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="n"&gt;Event&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

        &lt;span class="cm"&gt;/* –°–æ–±—ã—Ç–∏–µ –ø–æ-—É–º–æ–ª—á–∞–Ω–∏—é */&lt;/span&gt;

        &lt;span class="n"&gt;Event&lt;/span&gt; &lt;span class="n"&gt;eventToFire&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;TICK&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

        &lt;span class="cm"&gt;/* –ï—Å–ª–∏ –Ω–∞–∂–∞–ª–∏ –∫–Ω–æ–ø–∫—É, —Å–æ–±—ã—Ç–∏–µ NEXT */&lt;/span&gt;

        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;unsigned&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;5000&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;isNextButtonPressed&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;eventToFire&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;NEXT&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
                &lt;span class="k"&gt;break&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="c1"&gt;// Fire NEXT event&lt;/span&gt;
            &lt;span class="p"&gt;}&lt;/span&gt; 
        &lt;span class="p"&gt;}&lt;/span&gt;

        &lt;span class="k"&gt;switch&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;currentState&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="nl"&gt;LEFT_TO_RIGHT&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; 
                &lt;span class="k"&gt;switch&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;eventToFire&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
                    &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="nl"&gt;TICK&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                        &lt;span class="n"&gt;onLeftToRightTickImpl&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
                        &lt;span class="k"&gt;break&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="c1"&gt;// TICK&lt;/span&gt;
                    &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="nl"&gt;NEXT&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                        &lt;span class="n"&gt;onLeftToRightNextImpl&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
                        &lt;span class="k"&gt;break&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="c1"&gt;// NEXT&lt;/span&gt;

                &lt;span class="p"&gt;}&lt;/span&gt;
                &lt;span class="k"&gt;break&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="c1"&gt;// LEFT_TO_RIGHT&lt;/span&gt;
            &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="nl"&gt;RIGHT_TO_LEFT&lt;/span&gt; &lt;span class="p"&gt;:&lt;/span&gt; 
                &lt;span class="k"&gt;switch&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;eventToFire&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
                    &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="nl"&gt;TICK&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                        &lt;span class="n"&gt;onRightToLeftTickImpl&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
                        &lt;span class="k"&gt;break&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="c1"&gt;// TICK&lt;/span&gt;
                    &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="nl"&gt;NEXT&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                        &lt;span class="n"&gt;onRightToLeftNextImpl&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
                        &lt;span class="k"&gt;break&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="c1"&gt;// NEXT&lt;/span&gt;

                &lt;span class="p"&gt;}&lt;/span&gt;
                &lt;span class="k"&gt;break&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="c1"&gt;// RIGHT_TO_LEFT&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ù–µ–∫–æ—Ç–æ—Ä—ã–µ –¥–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –≤—ã–Ω–µ—Å–µ–Ω—ã –≤ –∑–∞–≥–æ–ª–æ–≤–æ—á–Ω—ã–π —Ñ–∞–π–ª &lt;strong&gt;main.h&lt;/strong&gt;, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏–ª–∞–≥–∞–µ—Ç—Å—è –∫ –∏—Å—Ö–æ–¥–Ω–∏–∫–∞–º. –î–ª—è —Å–±–æ—Ä–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä HI-TECH PICC:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;/usr/hitech/picc/9.83/bin/PICC --opt&lt;span class="o"&gt;=&lt;/span&gt;all --chip&lt;span class="o"&gt;=&lt;/span&gt;16F1823 --ASMLIST main.c
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ß—Ç–æ –º—ã –º–æ–∂–µ–º —Å–∫–∞–∑–∞—Ç—å –æ–± —ç—Ç–æ–º —Ä–µ—à–µ–Ω–∏–∏, –∫—Ä–æ–º–µ —Ç–æ–≥–æ, —á—Ç–æ —Ç–∞–º –º–Ω–æ–≥–æ –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö —Å–ª–æ–≤ &lt;code&gt;switch&lt;/code&gt; –∏ &lt;code&gt;case&lt;/code&gt; ?&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ —Å–µ–±–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å—Ç—Ä–∞–Ω–∏—Ü –∫–æ–¥–∞ —Å –º–æ–Ω–æ–ª–∏—Ç–Ω—ã–º –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–º &lt;code&gt;switch&lt;/code&gt; / &lt;code&gt;case&lt;/code&gt;. –¢–∞–∫–æ–π –∫–æ–¥ —Å–ª–æ–∂–Ω–æ —á–∏—Ç–∞—Ç—å –∏ —Å–æ–ø—Ä–æ–≤–æ–∂–¥–∞—Ç—å. –í —Å–∞–º–∏—Ö &lt;code&gt;switch&lt;/code&gt; / &lt;code&gt;case&lt;/code&gt; –∏–ª–∏ &lt;code&gt;if&lt;/code&gt; / &lt;code&gt;else&lt;/code&gt; –Ω–µ—Ç –Ω–∏—á–µ–≥–æ –ø–ª–æ—Ö–æ–≥–æ - –≤ –∫–æ–Ω—Ü–µ-–∫–æ–Ω—Ü–æ–≤ —ç—Ç–æ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ &lt;strong&gt;–°&lt;/strong&gt;. –ù–æ –∫–æ–≥–¥–∞ –∏—Ö –æ—á–µ–Ω—å –º–Ω–æ–≥–æ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ, —Å —ç—Ç–∏–º –Ω—É–∂–Ω–æ –±–æ—Ä–æ—Ç—å—Å—è.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;H–µ—Ç —É–¥–∞—á–Ω–æ–≥–æ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è –º–µ–∂–¥—É –ª–æ–≥–∏–∫–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏–π –º–∞—à–∏–Ω–æ–π —Å –∫–æ–Ω–µ—á–Ω—ã–º —á–∏—Å–ª–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–π –∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–µ–π —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π. –í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Ç—Ä–µ–±—É–µ—Ç –±–æ–ª—å—à–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ —Ä–∞–∑–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;–¢–∞–±–ª–∏—á–Ω–∞—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞&lt;/h3&gt;
&lt;p&gt;–í—Ç–æ—Ä–æ–π —Å–ø–æ—Å–æ–± —Ä–µ—à–µ–Ω–∏—è –∑–∞–¥–∞—á–∏ —Å–æ—Å—Ç–æ–∏—Ç –≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —Ç–∞–±–ª–∏—Ü—ã –ø–µ—Ä–µ—Ö–æ–¥–æ–≤:&lt;/p&gt;
&lt;p&gt;&lt;em&gt;FSM/Table/Simple/src/main.c&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;main.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="k"&gt;typedef&lt;/span&gt; &lt;span class="k"&gt;enum&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;LEFT_TO_RIGHT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;RIGHT_TO_LEFT&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="n"&gt;State&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="cm"&gt;/* Global variable to hold current state */&lt;/span&gt;

&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="n"&gt;State&lt;/span&gt; &lt;span class="n"&gt;currentState&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;RIGHT_TO_LEFT&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="cm"&gt;/* Event handlers implementations */&lt;/span&gt;

&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;onLeftToRightTickImpl&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;nextLeftLed&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt; &lt;span class="c1"&gt;// in main.h&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;onLeftToRightNextImpl&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;resetLeds&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt; &lt;span class="c1"&gt;// in main.h&lt;/span&gt;
    &lt;span class="n"&gt;currentState&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;RIGHT_TO_LEFT&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;onRightToLeftTickImpl&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;nextRightLed&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt; &lt;span class="c1"&gt;// in main.h&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;onRightToLeftNextImpl&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;resetLeds&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt; &lt;span class="c1"&gt;// in main.h&lt;/span&gt;
    &lt;span class="n"&gt;currentState&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;LEFT_TO_RIGHT&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

    &lt;span class="n"&gt;initHardware&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt; &lt;span class="c1"&gt;// in main.h&lt;/span&gt;

    &lt;span class="k"&gt;typedef&lt;/span&gt; &lt;span class="k"&gt;enum&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;NEXT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="n"&gt;TICK&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="n"&gt;Event&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="k"&gt;typedef&lt;/span&gt; &lt;span class="k"&gt;struct&lt;/span&gt; &lt;span class="n"&gt;_Transition&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;State&lt;/span&gt; &lt;span class="n"&gt;state&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;Event&lt;/span&gt; &lt;span class="n"&gt;event&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;EventFunc&lt;/span&gt;&lt;span class="p"&gt;)();&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="n"&gt;Transition&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="n"&gt;Transition&lt;/span&gt; &lt;span class="n"&gt;transitionTable&lt;/span&gt;&lt;span class="p"&gt;[]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="n"&gt;LEFT_TO_RIGHT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;TICK&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;onLeftToRightTickImpl&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt;
        &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="n"&gt;LEFT_TO_RIGHT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;NEXT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;onLeftToRightNextImpl&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt;
        &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="n"&gt;RIGHT_TO_LEFT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;TICK&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;onRightToLeftTickImpl&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt;
        &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="n"&gt;RIGHT_TO_LEFT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;NEXT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;onRightToLeftNextImpl&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;};&lt;/span&gt;

    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(;;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

        &lt;span class="cm"&gt;/* –°–æ–±—ã—Ç–∏–µ –ø–æ-—É–º–æ–ª—á–∞–Ω–∏—é */&lt;/span&gt;

        &lt;span class="n"&gt;Event&lt;/span&gt; &lt;span class="n"&gt;eventToFire&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;TICK&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

        &lt;span class="cm"&gt;/* –ï—Å–ª–∏ –Ω–∞–∂–∞–ª–∏ –∫–Ω–æ–ø–∫—É, —Å–æ–±—ã—Ç–∏–µ NEXT */&lt;/span&gt;

        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;unsigned&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;5000&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;isNextButtonPressed&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;eventToFire&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;NEXT&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
                &lt;span class="k"&gt;break&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="c1"&gt;// Fire NEXT event&lt;/span&gt;
            &lt;span class="p"&gt;}&lt;/span&gt; 
        &lt;span class="p"&gt;}&lt;/span&gt;

        &lt;span class="cm"&gt;/* –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏—è */&lt;/span&gt;

        &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;elementsCount&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; 
            &lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;transitionTable&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;transitionTable&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]);&lt;/span&gt;
        &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;elementsCount&lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;Transition&lt;/span&gt; &lt;span class="n"&gt;transition&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;transitionTable&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;elementsCount&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;transition&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;state&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;currentState&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; 
                &lt;span class="n"&gt;transition&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;event&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;eventToFire&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;transition&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;EventFunc&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
                &lt;span class="k"&gt;break&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="c1"&gt;// –§—É–Ω–∫—Ü–∏—è EventFunc –Ω–∞–π–¥–µ–Ω–∞ –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞!&lt;/span&gt;
            &lt;span class="p"&gt;}&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–î–∞–≤–∞–π—Ç–µ —Å—Ä–∞–≤–Ω–∏–º –¥–∞–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ —Å –ø—Ä–µ–¥—ã–¥—É—â–∏–º:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;–¢–∞–±–ª–∏—á–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –Ω–µ—Å–∫–æ–ª—å–∫–æ –º–µ–¥–ª–µ–Ω–Ω–µ–µ - –∫–∞–∫ –º–∏–Ω–∏–º—É–º –¥–æ–±–∞–≤–∏–ª—Å—è —Ü–∏–∫–ª &lt;code&gt;while&lt;/code&gt;. –î–ª—è –æ–±—Ö–æ–¥–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —Ç–∞–±–ª–∏—Ü—ã –∑–∞–¥–µ–π—Å—Ç–≤–æ–≤–∞–Ω–∞ –∏–¥–∏–æ–º–∞ –ö–û–õ–ò–ß–ï–°–¢–í–û –≠–õ–ï–ú–ï–ù–¢–û–í –ú–ê–°–°–ò–í–ê –ö–ê–ö –†–ï–ó–£–õ–¨–¢–ê–¢ –î–ï–õ–ï–ù–ò–Ø, –∫–æ—Ç–æ—Ä–∞—è —É–∂–µ –ø–æ–¥—Ä–æ–±–Ω–æ –æ–ø–∏—Å—ã–≤–∞–ª–∞—Å—å &lt;a href="http://proiot.ru/blog/posts/2012/10/08/idiomy-v-ansi-c/"&gt;—Ä–∞–Ω–µ–µ&lt;/a&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;B—Å—è –ª–æ–≥–∏–∫–∞ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ —Å–∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∞ –≤ –æ–¥–Ω–æ–π —Ç–∞–±–ª–∏—Ü–µ. –í—Å—ë –≤–∏–¥–Ω–æ, –∫–∞–∫ –Ω–∞ –ª–∞–¥–æ–Ω–∏. –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –±—ã—Å—Ç—Ä–µ–µ —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è / –≤—Å–ø–æ–º–Ω–∏—Ç—å, –∫–∞–∫ –≤—Å—ë —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –ª–æ–≥–∏–∫–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏–π –º–∞—à–∏–Ω–æ–π —Å –∫–æ–Ω–µ—á–Ω—ã–º —á–∏—Å–ª–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–π.  –î–∞–≤–∞–π—Ç–µ –¥–æ–±–∞–≤–∏–º –µ—â—ë –æ–¥–Ω–æ —Å–æ—Å—Ç–æ—è–Ω–∏–µ - –ª–∞–º–ø–æ—á–∫–∏ &lt;strong&gt;–ø–ª–∞–≤–Ω–æ&lt;/strong&gt; –º–µ–Ω—è—é—Ç —è—Ä–∫–æ—Å—Ç—å:&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;em&gt;FSM/Table/Scale/src/main.c&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;main.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="k"&gt;typedef&lt;/span&gt; &lt;span class="k"&gt;enum&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;LEFT_TO_RIGHT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="n"&gt;RIGHT_TO_LEFT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;

    &lt;span class="cm"&gt;/* Add brightness algoritms States */&lt;/span&gt;

    &lt;span class="n"&gt;RIGHT_LEFT_TO_BRIGHT&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="n"&gt;State&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="cm"&gt;/* Global variable to hold current state */&lt;/span&gt;

&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="n"&gt;State&lt;/span&gt; &lt;span class="n"&gt;currentState&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;RIGHT_TO_LEFT&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="cm"&gt;/* Event handlers implementations */&lt;/span&gt;

&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;onLeftToRightTickImpl&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;nextLeftLed&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt; &lt;span class="c1"&gt;// in main.h&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;onLeftToRightNextImpl&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;resetLeds&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt; &lt;span class="c1"&gt;// in main.h&lt;/span&gt;
    &lt;span class="n"&gt;currentState&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;RIGHT_TO_LEFT&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;onRightToLeftTickImpl&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;nextRightLed&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt; &lt;span class="c1"&gt;// in main.h&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="cm"&gt;/* LEFT_TO_RIGHT ==&amp;gt; RIGHT_LEFT_TO_BRIGHT */&lt;/span&gt;

&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;onRightToLeftNextImpl&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;resetLeds&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt; &lt;span class="c1"&gt;// in main.h&lt;/span&gt;
    &lt;span class="n"&gt;currentState&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;RIGHT_LEFT_TO_BRIGHT&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="cm"&gt;/* Add brightness handlers */&lt;/span&gt;

&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;onRightToLeftBrigtTickImpl&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;nextRightBrightLed&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt; &lt;span class="c1"&gt;// in main.h&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;onRightToLeftBrigtNextImpl&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;resetLeds&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt; &lt;span class="c1"&gt;// in main.h&lt;/span&gt;
    &lt;span class="n"&gt;currentState&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;LEFT_TO_RIGHT&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

    &lt;span class="n"&gt;initHardware&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt; &lt;span class="c1"&gt;// in main.h&lt;/span&gt;

    &lt;span class="k"&gt;typedef&lt;/span&gt; &lt;span class="k"&gt;enum&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;NEXT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="n"&gt;TICK&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="n"&gt;Event&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="k"&gt;typedef&lt;/span&gt; &lt;span class="k"&gt;struct&lt;/span&gt; &lt;span class="n"&gt;_Transition&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;State&lt;/span&gt; &lt;span class="n"&gt;state&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="n"&gt;Event&lt;/span&gt; &lt;span class="n"&gt;event&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;EventFunc&lt;/span&gt;&lt;span class="p"&gt;)();&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="n"&gt;Transition&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="n"&gt;Transition&lt;/span&gt; &lt;span class="n"&gt;transitionTable&lt;/span&gt;&lt;span class="p"&gt;[]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="n"&gt;LEFT_TO_RIGHT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;TICK&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;onLeftToRightTickImpl&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt;
        &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="n"&gt;LEFT_TO_RIGHT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;NEXT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;onLeftToRightNextImpl&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt;
        &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="n"&gt;RIGHT_TO_LEFT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;TICK&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;onRightToLeftTickImpl&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt;
        &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="n"&gt;RIGHT_TO_LEFT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;NEXT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;onRightToLeftNextImpl&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt;

        &lt;span class="cm"&gt;/* Add brightness algoritms transitions */&lt;/span&gt;

        &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="n"&gt;RIGHT_LEFT_TO_BRIGHT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;TICK&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;onRightToLeftBrigtTickImpl&lt;/span&gt;&lt;span class="p"&gt;},&lt;/span&gt;
        &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="n"&gt;RIGHT_LEFT_TO_BRIGHT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;NEXT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;onRightToLeftBrigtNextImpl&lt;/span&gt;&lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;};&lt;/span&gt;

    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(;;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

        &lt;span class="cm"&gt;/* –°–æ–±—ã—Ç–∏–µ –ø–æ-—É–º–æ–ª—á–∞–Ω–∏—é */&lt;/span&gt;

        &lt;span class="n"&gt;Event&lt;/span&gt; &lt;span class="n"&gt;eventToFire&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;TICK&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

        &lt;span class="cm"&gt;/* –ï—Å–ª–∏ –Ω–∞–∂–∞–ª–∏ –∫–Ω–æ–ø–∫—É, —Å–æ–±—ã—Ç–∏–µ NEXT */&lt;/span&gt;

        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;unsigned&lt;/span&gt; &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;5000&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;isNextButtonPressed&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;eventToFire&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;NEXT&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
                &lt;span class="k"&gt;break&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="c1"&gt;// Fire NEXT event&lt;/span&gt;
            &lt;span class="p"&gt;}&lt;/span&gt; 
        &lt;span class="p"&gt;}&lt;/span&gt;

        &lt;span class="cm"&gt;/* –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏—è */&lt;/span&gt;

        &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;elementsCount&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; 
            &lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;transitionTable&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;transitionTable&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]);&lt;/span&gt;
        &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;elementsCount&lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;Transition&lt;/span&gt; &lt;span class="n"&gt;transition&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;transitionTable&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;elementsCount&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;transition&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;state&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;currentState&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; 
                &lt;span class="n"&gt;transition&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;event&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;eventToFire&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;transition&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;EventFunc&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
                &lt;span class="k"&gt;break&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="c1"&gt;// –§—É–Ω–∫—Ü–∏—è EventFunc –Ω–∞–π–¥–µ–Ω–∞ –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞!&lt;/span&gt;
            &lt;span class="p"&gt;}&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ù–µ—Å–ª–æ–∂–Ω–æ –∑–∞–º–µ—Ç–∏—Ç—å, —á—Ç–æ –∫–æ–¥ –≤ —Å—É–ø–µ—Ä—Ü–∏–∫–ª–µ &lt;code&gt;for(;;)&lt;/code&gt; –æ—Å—Ç–∞–ª—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π, —Ç.–µ. —Ä–µ—à–µ–Ω–∏–µ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ç–∞–±–ª–∏—Ü —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏–∑—É–µ—Ç—Å—è –ª—É—á—à–µ–π &lt;em&gt;—Ä–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å—é&lt;/em&gt; –∫–æ–¥–∞.&lt;/p&gt;
&lt;p&gt;–î–∞–ª–µ–µ –∏–ª–∏ &lt;a href="http://proiot.ru/blog/posts/2017/02/05/picsimjs-soprogrammy-i-prosteishaia-mnogozadachnost/"&gt;—Å–æ–ø—Ä–æ–≥—Ä–∞–º–º—ã&lt;/a&gt; –∏–ª–∏ &lt;a href="http://proiot.ru/blog/posts/2017/05/25/zhizn-posle-rtos-model-aktorov-qpc-uml/"&gt;Quantum Leaps QP –∏ UML statecharts&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;–ò—Å—Ö–æ–¥–Ω–∏–∫–∏ &lt;a href="http://proiot.ru/blog/posts/2012/10/09/avtomat-s-konechnym-chislom-sostoianii/FSM.zip"&gt;—Ç—É—Ç&lt;/a&gt;.&lt;/p&gt;</content><category term="FSM"></category></entry><entry><title>–ò–¥–∏–æ–º—ã –≤ ANSI C</title><link href="http://proiot.ru/blog/posts/2012/10/08/idiomy-v-ansi-c/" rel="alternate"></link><published>2012-10-08T00:00:00+03:00</published><updated>2012-10-08T00:00:00+03:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2012-10-08:/blog/posts/2012/10/08/idiomy-v-ansi-c/</id><summary type="html">&lt;p&gt;&lt;em&gt;–®–∞–±–ª–æ–Ω—ã –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è&lt;/em&gt;, –æ–Ω–∏ –∂–µ –ø—Ä–æ—Å—Ç–æ &lt;a href="http://ru.wikipedia.org/wiki/%D0%A8%D0%B0%D0%B1%D0%BB%D0%BE%D0%BD_%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F" rel="nofollow"&gt;–ø–∞—Ç—Ç–µ—Ä–Ω—ã&lt;/a&gt;, –º–æ–∂–Ω–æ –≤—Å—Ç—Ä–µ—Ç–∏—Ç—å –Ω–∞ –≤—Å–µ—Ö —É—Ä–æ–≤–Ω—è—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è. ¬´–ù–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ¬ª —à–∞–±–ª–æ–Ω—ã –Ω–∞–∑—ã–≤–∞—é—Ç—Å—è &lt;strong&gt;–∏–¥–∏–æ–º–∞–º–∏&lt;/strong&gt;, –ø–æ—Å–∫–æ–ª—å–∫—É –æ–Ω–∏ –∑–∞–≤–∏—Å—è—Ç –æ—Ç –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–µ–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —è–∑—ã–∫–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è. –í –¥–∞–Ω–Ω–æ–π —Å—Ç–∞—Ç—å–µ –æ–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –ø–æ–¥–±–æ—Ä–∫–∞ —Ç–∞–∫–∏—Ö –≤–æ—Ç &lt;strong&gt;–∏–¥–∏–æ–º&lt;/strong&gt; –≤ —á–∏—Å—Ç–æ–º &lt;strong&gt;–°&lt;/strong&gt; (&lt;em&gt;ANSI C&lt;/em&gt;), –ø–æ –±–æ–ª—å—à–µ–π —á–∞—Å—Ç–∏ —ç—Ç–æ –≤–æ–ª—å–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥ &lt;a href="http://www.adampetersen.se/Idiomatic_expressions_in_C.pdf" rel="nofollow"&gt;Idiomatic Expressions in C&lt;/a&gt; –æ—Ç ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;em&gt;–®–∞–±–ª–æ–Ω—ã –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è&lt;/em&gt;, –æ–Ω–∏ –∂–µ –ø—Ä–æ—Å—Ç–æ &lt;a href="http://ru.wikipedia.org/wiki/%D0%A8%D0%B0%D0%B1%D0%BB%D0%BE%D0%BD_%D0%BF%D1%80%D0%BE%D0%B5%D0%BA%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D1%8F" rel="nofollow"&gt;–ø–∞—Ç—Ç–µ—Ä–Ω—ã&lt;/a&gt;, –º–æ–∂–Ω–æ –≤—Å—Ç—Ä–µ—Ç–∏—Ç—å –Ω–∞ –≤—Å–µ—Ö —É—Ä–æ–≤–Ω—è—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è. ¬´–ù–∏–∑–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ¬ª —à–∞–±–ª–æ–Ω—ã –Ω–∞–∑—ã–≤–∞—é—Ç—Å—è &lt;strong&gt;–∏–¥–∏–æ–º–∞–º–∏&lt;/strong&gt;, –ø–æ—Å–∫–æ–ª—å–∫—É –æ–Ω–∏ –∑–∞–≤–∏—Å—è—Ç –æ—Ç –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–µ–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —è–∑—ã–∫–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è. –í –¥–∞–Ω–Ω–æ–π —Å—Ç–∞—Ç—å–µ –æ–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –ø–æ–¥–±–æ—Ä–∫–∞ —Ç–∞–∫–∏—Ö –≤–æ—Ç &lt;strong&gt;–∏–¥–∏–æ–º&lt;/strong&gt; –≤ —á–∏—Å—Ç–æ–º &lt;strong&gt;–°&lt;/strong&gt; (&lt;em&gt;ANSI C&lt;/em&gt;), –ø–æ –±–æ–ª—å—à–µ–π —á–∞—Å—Ç–∏ —ç—Ç–æ –≤–æ–ª—å–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥ &lt;a href="http://www.adampetersen.se/Idiomatic_expressions_in_C.pdf" rel="nofollow"&gt;Idiomatic Expressions in C&lt;/a&gt; –æ—Ç &lt;a href="http://www.adampetersen.se/articles.htm" rel="nofollow"&gt;Adam Petersen&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é –∏–¥–∏–æ–º—ã –æ—á–µ–Ω—å —Ä–µ–¥–∫–æ –∏, –∫–∞–∫ –ø—Ä–∞–≤–∏–ª–æ, –≤—ã–±–æ—Ä–æ—á–Ω–æ –æ–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –≤ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–µ –ø–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—é - –¥–∞–Ω–Ω—ã–π –º–∞—Ç–µ—Ä–∏–∞–ª –º–æ–∂–µ—Ç –ø–æ–∫–∞–∑–∞—Ç—å—Å—è –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å–ª–æ–∂–Ω—ã–º –¥–ª—è –Ω–æ–≤–∏—á–∫–æ–≤, –≤ —Ç–æ –∂–µ –≤—Ä–µ–º—è –ø—Ä–∏ –∏–∑–ª–æ–∂–µ–Ω–∏–∏ –±–æ–ª–µ–µ —Å–µ—Ä—å—ë–∑–Ω–æ–≥–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞ –∞–≤—Ç–æ—Ä—ã –ø–æ–¥—Ä–∞–∑—É–º–µ–≤–∞—é—Ç, —á—Ç–æ —á–∏—Ç–∞—Ç–µ–ª—å —Å–æ –≤—Å–µ–º —ç—Ç–∏–º —É–∂–µ –∑–Ω–∞–∫–æ–º. –ö–∞–∫ –±—ã —Ç–∞–º –Ω–∏ –±—ã–ª–æ, —è—Å–Ω–æ –æ–¥–Ω–æ - –¥–∞–∂–µ –µ—Å–ª–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –∏–¥–∏–æ–º—ã –≤ —Å–≤–æ–∏—Ö —Ä–∞–±–æ—Ç–∞—Ö, —ç—Ç–æ –µ—â—ë –Ω–µ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –æ–Ω –Ω–µ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å –Ω–∏–º–∏ –∑–Ω–∞–∫–æ–º —Ö–æ—Ç—è –±—ã –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –±–æ–ª–µ–µ —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –∏ –±—ã—Å—Ç—Ä–æ —Ä–∞–∑–±–∏—Ä–∞—Ç—å—Å—è –≤ —á—É–∂–æ–º –∫–æ–¥–µ.&lt;/p&gt;
&lt;p&gt;–û–ø–∏—Å—ã–≤–∞–µ–º—ã–µ –≤ –¥–∞–Ω–Ω–æ–º –º–∞—Ç–µ—Ä–∏–∞–ª–µ –∏–¥–∏–æ–º—ã –º–æ–∂–Ω–æ —É—Å–ª–æ–≤–Ω–æ —Ä–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞ –¥–≤–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;–ò–¥–∏–æ–º—ã –¥–ª—è –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏&lt;/strong&gt;: –ø–æ–º–æ–≥–∞—é—Ç –∏–∑–±–µ–∂–∞—Ç—å —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã—Ö –æ—à–∏–±–æ–∫ –≤ &lt;strong&gt;–°&lt;/strong&gt;. –ù–∞–ø—Ä–∏–º–µ—Ä, –∏–¥–∏–æ–º–∞ –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –°–û–°–¢–ê–í–ù–´–• –¢–ò–ü–û–í –° –ü–û–ú–û–©–¨–Æ {0} –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –Ω–∞–¥—ë–∂–Ω—ã–π –∏ –ø–µ—Ä–µ–Ω–æ—Å–∏–º—ã–π —Å–ø–æ—Å–æ–± –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä –∏ –º–∞—Å—Å–∏–≤–æ–≤.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;–ò–¥–∏–æ–º—ã –¥–ª—è –≤—ã—Ä–∞–∑–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏&lt;/strong&gt;: –¥–µ–ª–∞—é—Ç –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –±–æ–ª–µ–µ —á–∏—Ç–∞–±–µ–ª—å–Ω—ã–º –∏ –ø–æ–Ω—è—Ç–Ω—ã–º, –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –±–æ–ª–µ–µ –ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–º, –∞ –ø—Ä–æ—Ü–µ—Å—Å –æ—Ç–ª–∞–¥–∫–∏ –ø—Ä–æ—â–µ –∏ –ø—Ä–æ–∑—Ä–∞—á–Ω–µ–π. –ù–∞–ø—Ä–∏–º–µ—Ä, –∏–¥–∏–æ–º–∞ –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê –° –û–ü–ò–°–ê–ù–ò–ï–ú –ø–æ–∑–≤–æ–ª—è–µ—Ç –¥–æ–±–∞–≤–∏—Ç—å –∫ –º–µ—Ö–∞–Ω–∏–∑–º—É –ø—Ä–æ–≤–µ—Ä–æ–∫ (–º–∞–∫—Ä–æ—Å &lt;code&gt;assert&lt;/code&gt;) —Å–ª–æ–≤–µ—Å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –≤–æ–∑–Ω–∏–∫—à–µ–π –ø—Ä–æ–±–ª–µ–º—ã.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;SIZEOF –î–õ–Ø –ü–ï–†–ï–ú–ï–ù–ù–´–•&lt;/h3&gt;
&lt;p&gt;–§—É–Ω–∫—Ü–∏–∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –≤ &lt;strong&gt;–°&lt;/strong&gt; –æ—á–µ–Ω—å —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ç–∏–ø &lt;code&gt;void*&lt;/code&gt; - —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ –æ–±—ä–µ–∫—Ç –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–≥–æ —Ç–∏–ø–∞, —ç—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–¥–µ–ª–∞—Ç—å –∏—Ö (—Ñ—É–Ω–∫—Ü–∏–∏) –±–æ–ª–µ–µ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–º–∏ –∏ –∞–±—Å—Ç—Ä–∞–≥–∏—Ä–æ–≤–∞—Ç—å—Å—è –æ—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–∏–ø–∞ –¥–∞–Ω–Ω—ã—Ö. –ù–∞–ø—Ä–∏–º–µ—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º –≤—ã–∑–æ–≤–∞ —Ñ—É–Ω–∫—Ü–∏–π –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ –≤—ã–¥–µ–ª–µ–Ω–∏—è –ø–∞–º—è—Ç–∏ (&lt;code&gt;malloc&lt;/code&gt;, &lt;code&gt;calloc&lt;/code&gt; –∏ &lt;code&gt;realloc&lt;/code&gt;) —è–≤–ª—è–µ—Ç—Å—è —É–∫–∞–∑–∞—Ç–µ–ª—å &lt;code&gt;void*&lt;/code&gt;, –ø—Ä–∏ —ç—Ç–æ–º —Å–∞–º–∏–º —Ñ—É–Ω–∫—Ü–∏—è–º –Ω–∞ —ç—Ç–∞–ø–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –∏–∑–≤–µ—Å—Ç–Ω–æ –æ —Ç–∏–ø–µ –¥–∞–Ω–Ω—ã—Ö, –¥–ª—è –∫–æ—Ç–æ—Ä—ã—Ö –≤—ã–¥–µ–ª—è–µ—Ç—Å—è –ø–∞–º—è—Ç—å. –í—Å—è –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –ª–æ–∂–∏—Ç—Å—è –Ω–∞ –∫–æ–¥ –∫–ª–∏–µ–Ω—Ç–∞, –≤—ã–∑—ã–≤–∞—é—â–µ–≥–æ —Ñ—É–Ω–∫—Ü–∏—é - –∏–º–µ–Ω–Ω–æ –æ–Ω –¥–æ–ª–∂–µ–Ω —É–∫–∞–∑–∞—Ç—å –æ–±—ä—ë–º –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–π –ø–∞–º—è—Ç–∏:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;HelloTelegram&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;telegram&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;HelloTelegram&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="n"&gt;malloc&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;HelloTelegram&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–î–∞–Ω–Ω—ã–π –∫–æ–¥ –ª–µ–≥–∫–æ —á–∏—Ç–∞–µ—Ç—Å—è –∏ –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ &lt;code&gt;telegram&lt;/code&gt; –æ—Å—Ç–∞—ë—Ç—Å—è &lt;code&gt;HelloTelegram&lt;/code&gt; –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ –Ω–∞–¥–æ. –û–¥–Ω–∞–∫–æ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Å–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏—è / –∏–∑–º–µ–Ω–µ–Ω–∏–π –æ—á–µ–Ω—å –ª–µ–≥–∫–æ –∑–∞–ø—É—Ç–∞—Ç—å—Å—è –∏ –¥–æ–ø—É—Å—Ç–∏—Ç—å –æ—à–∏–±–∫—É:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;ByeTelegram&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;telegram&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ByeTelegram&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="n"&gt;malloc&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;HelloTelegram&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ü–æ—Å–∫–æ–ª—å–∫—É –Ω–µ—Ç –Ω–∏–∫–∞–∫–æ–π –≥–∞—Ä–∞–Ω—Ç–∏–∏, —á—Ç–æ —Ä–∞–∑–º–µ—Ä—ã &lt;code&gt;HelloTelegram&lt;/code&gt; –∏ &lt;code&gt;ByeTelegram&lt;/code&gt; —Ä–∞–≤–Ω—ã (—Ç–æ—á–Ω–µ–µ —ç—Ç–æ –±—ã–ª–æ –±—ã —Å—á–∞—Å—Ç–ª–∏–≤—ã–º —Å—Ç–µ—á–µ–Ω–∏–µ–º –æ–±—Å—Ç–æ—è—Ç–µ–ª—å—Å—Ç–≤), –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ç–æ—Ç –∫–æ–¥ –ø—Ä–∏–≤–µ–¥—ë—Ç –∫ –ø–µ—á–∞–ª—å–Ω—ã–º –ø–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è–º. –ü—Ä–æ–±–ª–µ–º–∞  –≤ —Ç–æ–º, —á—Ç–æ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å —Ñ—É–Ω–∫—Ü–∏–µ–π &lt;code&gt;malloc&lt;/code&gt; –∏ –µ–π –ø–æ–¥–æ–±–Ω—ã–º–∏ –Ω–∞ —ç—Ç–∞–ø–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ —Ç–µ—Ä—è–µ—Ç—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ä–µ–∞–ª—å–Ω–æ–º —Ç–∏–ø–µ –¥–∞–Ω–Ω—ã—Ö –∏ –ø–æ—ç—Ç–æ–º—É –¥–∞–ª–µ–∫–æ –Ω–µ —Ñ–∞–∫—Ç, —á—Ç–æ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –ø–æ–¥–æ–±–Ω—É—é –æ—à–∏–±–∫—É —Å–º–æ–∂–µ—Ç –æ–±–Ω–∞—Ä—É–∂–∏—Ç—å - –æ–Ω –Ω–µ –æ–±—è–∑–∞–Ω —ç—Ç–∏–º –∑–∞–Ω–∏–º–∞—Ç—å—Å—è.&lt;/p&gt;
&lt;p&gt;–ò—Å–ø–æ–ª—å–∑—É—è –∏–¥–∏–æ–º—É SIZEOF –î–õ–Ø –ü–ï–†–ï–ú–ï–ù–ù–´–• –ø–æ–¥–æ–±–Ω—ã–µ –æ—à–∏–±–∫–∏ –º–æ–∂–Ω–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;HelloTelegram&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;telegram&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;HelloTelegram&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="n"&gt;malloc&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;sizeof&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;telegram&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ù–æ –º–∏–Ω—É—Ç–æ—á–∫—É ! –ù–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ª–∏ —Ç—É—Ç —Ä–∞–∑—ã–º–µ–Ω–æ–≤–∞–Ω–∏–µ —É–∫–∞–∑–∞—Ç–µ–ª—è, –∫–æ—Ç–æ—Ä—ã–π, –∫–æ –≤—Å–µ–º—É –ø—Ä–æ—á–µ–º—É, –∫ —ç—Ç–æ–º—É –º–æ–º–µ–Ω—Ç—É –µ—â—ë –∏ –Ω–µ –±—ã–ª –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω ? –ù–µ—Ç, –∏ –ø—Ä–∏—á–∏–Ω–∞, –ø–æ –∫–æ—Ç–æ—Ä–æ–π —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Ç–æ–º, —á—Ç–æ &lt;code&gt;sizeof&lt;/code&gt; —ç—Ç–æ –æ–ø–µ—Ä–∞—Ç–æ—Ä –∞ –Ω–µ —Ñ—É–Ω–∫—Ü–∏—è. –û–ø–µ—Ä–∞—Ç–æ—Ä &lt;code&gt;sizeof&lt;/code&gt; –Ω–µ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫–æ–¥, –∞ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ &lt;code&gt;sizeof *telegram&lt;/code&gt; —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –Ω–∞ —ç—Ç–∞–ø–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏. –¢–µ–ø–µ—Ä—å, –µ—Å–ª–∏ —Ç–∏–ø &lt;code&gt;telegram&lt;/code&gt; –∏–∑–º–µ–Ω–∏—Ç—Å—è –Ω—É —Å–∫–∞–∂–µ–º –Ω–∞ &lt;code&gt;ByeTelegram&lt;/code&gt;, –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Å—á–∏—Ç–∞–µ—Ç –∞—Ä–≥—É–º–µ–Ω—Ç, –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã–π —Ñ—É–Ω–∫—Ü–∏–∏ &lt;code&gt;malloc&lt;/code&gt;. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –∑–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ä–∞–∑–º–µ—Ä –≤—ã–¥–µ–ª—è–µ–º–æ–π –ø–∞–º—è—Ç–∏ –ø–æ–¥ –∑–∞–¥–∞–Ω–Ω—ã–π —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–∫–ª–∞–¥—ã–≤–∞–µ—Ç—Å—è —Å –ø–ª–µ—á –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–∞ –Ω–∞ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä. –ü–æ—Å–∫–æ–ª—å–∫—É –≤ –Ω–∞—à–µ–º –ø—Ä–∏–º–µ—Ä–µ &lt;code&gt;telegram&lt;/code&gt; —ç—Ç–æ —É–∫–∞–∑–∞—Ç–µ–ª—å, —Ç–æ —É–Ω–∞—Ä–Ω—ã–π –æ–ø–µ—Ä–∞—Ç–æ—Ä &lt;code&gt;*&lt;/code&gt; –≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º.&lt;/p&gt;
&lt;p&gt;–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∏–¥–∏–æ–º—ã SIZEOF –î–õ–Ø –ü–ï–†–ï–ú–ï–ù–ù–´–• –æ—Ç–Ω—é–¥—å –Ω–µ –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ—Ç—Å—è —É–∫–∞–∑–∞—Ç–µ–ª—è–º–∏. –í–æ—Ç –ø—Ä–∏–º–µ—Ä –∏–¥–∏–æ–º—ã –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å —Ñ—É–Ω–∫—Ü–∏–µ–π &lt;code&gt;memcpy&lt;/code&gt;, –∫–æ—Ç–æ—Ä–∞—è —Ç–∞–∫–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç &lt;code&gt;void*&lt;/code&gt;, –æ–¥–Ω–∞–∫–æ —É–∂–µ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –æ–¥–Ω–æ–≥–æ –∏–∑ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kt"&gt;uint32_t&lt;/span&gt; &lt;span class="n"&gt;telegramSize&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="n"&gt;memcpy&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;telegramSize&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;binaryDatastream&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt; &lt;span class="n"&gt;telegramSize&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–¢–µ–ø–µ—Ä—å, –µ—Å–ª–∏ –∏–∑–º–µ–Ω–∏—Ç—Å—è —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö —Å &lt;code&gt;uint32_t telegramSize = 0&lt;/code&gt;; –Ω–∞ &lt;code&gt;uintXX_t telegramSize = 0&lt;/code&gt;; –∫–æ–¥ —Å &lt;code&gt;memcpy&lt;/code&gt; –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π –∏ –±—É–¥–µ—Ç (–¥–æ–ª–∂–µ–Ω) —Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.&lt;/p&gt;
&lt;h3&gt;–ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –°–û–°–¢–ê–í–ù–´–• –¢–ò–ü–û–í –° –ü–û–ú–û–©–¨–Æ {0}&lt;/h3&gt;
&lt;p&gt;–ù–µ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ - —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –æ—à–∏–±–æ–∫ –≤ –ª—é–±—ã—Ö –ø—Ä–æ–≥—Ä–∞–º–º–∞—Ö. –í &lt;strong&gt;–°&lt;/strong&gt; –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è &lt;a href="http://ru.wikipedia.org/wiki/%D0%9F%D1%80%D0%B8%D0%BC%D0%B8%D1%82%D0%B8%D0%B2%D0%BD%D1%8B%D0%B9_%D1%82%D0%B8%D0%BF" rel="nofollow"&gt;–ø—Ä–∏–º–∏—Ç–∏–≤–Ω—ã—Ö —Ç–∏–ø–æ–≤&lt;/a&gt; –¥–∞–Ω–Ω—ã—Ö, —Ç–∞–∫–∏—Ö –∫–∞–∫ &lt;code&gt;int&lt;/code&gt;, &lt;code&gt;char&lt;/code&gt; –∏ —Ç.–¥. –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –æ—á–µ–Ω—å –ø—Ä–æ—Å—Ç–æ, –Ω–æ –∫–∞–∫ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–æ—Å—Ç–∞–≤–Ω—ã–µ —Ç–∏–ø—ã, —Ç–∞–∫–∏–µ –∫–∞–∫ &lt;strong&gt;–º–∞—Å—Å–∏–≤—ã&lt;/strong&gt; –∏–ª–∏ &lt;strong&gt;—Å—Ç—Ä—É–∫—Ç—É—Ä—ã&lt;/strong&gt; ? –û–ø–∞—Å–Ω–æ–π, –Ω–æ —É–≤—ã, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω–æ–π –ø—Ä–∞–∫—Ç–∏–∫–æ–π —è–≤–ª—è–µ—Ç—Å—è –≤–æ—Ç —Ç–∞–∫–æ–π —Å–ø–æ—Å–æ–±:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;struct&lt;/span&gt; &lt;span class="n"&gt;TemperatureNode&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;todaysAverage&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;struct&lt;/span&gt; &lt;span class="n"&gt;TemperatureNode&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;nextTemperature&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;};&lt;/span&gt;

&lt;span class="k"&gt;struct&lt;/span&gt; &lt;span class="n"&gt;TemperatureNode&lt;/span&gt; &lt;span class="n"&gt;node&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="n"&gt;memset&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;node&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt; &lt;span class="n"&gt;node&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ü—Ä–æ–±–ª–µ–º–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º &lt;code&gt;memset&lt;/code&gt; –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ç–æ–º, —á—Ç–æ –¥–∞–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –ø—Ä–æ—Å—Ç–æ –æ–±–Ω—É–ª—è–µ—Ç –±–∏—Ç—ã, –Ω–µ –∑–∞–±–æ—Ç—è—Å—å –æ –¥–µ—Ç–∞–ª—è—Ö –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –¥–∞–Ω–Ω—ã—Ö, —Å –∫–æ—Ç–æ—Ä—ã–º –µ–π –ø—Ä–∏—Ö–æ–¥–∏—Ç—Å—è —Ä–∞–±–æ—Ç–∞—Ç—å. –í &lt;strong&gt;–°&lt;/strong&gt; –º–æ–∂–Ω–æ –≤—Å—Ç—Ä–µ—Ç–∏—Ç—å —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö, –Ω–∞–ø—Ä–∏–º–µ—Ä &lt;code&gt;NULL&lt;/code&gt; - —É–∫–∞–∑–∞—Ç–µ–ª—å –∏–ª–∏ —á–∏—Å–ª–∞ —Å &lt;em&gt;–ø–ª–∞–≤–∞—é—â–µ–π –∑–∞–ø—è—Ç–æ–π&lt;/em&gt;, —É –∫–æ—Ç–æ—Ä—ã—Ö –≤—Å–µ –±–∏—Ç—ã –≤ –Ω–æ–ª—å –µ—â—ë –Ω–µ –æ–∑–Ω–∞—á–∞—é—Ç, —á—Ç–æ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ —Ç–æ–∂–µ –±—É–¥–µ—Ç –Ω–æ–ª—å. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É, –ø–æ–≤–µ–¥–µ–Ω–∏–µ –∫–æ—Ç–æ—Ä–æ–π –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç –æ–∂–∏–¥–∞–µ–º–æ–≥–æ.&lt;/p&gt;
&lt;p&gt;–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–± –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—É—Ç—ë–º —è–≤–Ω–æ–π –ø–æ—à–∞–≥–æ–≤–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –µ—ë –ø–æ–ª–µ–π –≤—ã–≥–ª—è–¥–∏—Ç –≥—Ä–æ–º–æ–∑–¥–∫–æ –∏ –µ–≥–æ —Ç—Ä—É–¥–Ω–æ —Å–æ–ø—Ä–æ–≤–æ–∂–¥–∞—Ç—å. –î–∞–∂–µ –µ—Å–ª–∏ –∏–∑–±–µ–∂–∞—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è), –∫–∞–∂–¥—ã–π —Ä–∞–∑ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ / —É–¥–∞–ª–µ–Ω–∏–∏ —É —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø–æ–ª–µ–π –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤–Ω–æ—Å–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏ –≤ –∫–æ–¥, –∑–∞–Ω–∏–º–∞—é—â–∏–π—Å—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π.&lt;/p&gt;
&lt;p&gt;–ö —Å—á–∞—Å—Ç—å—é, —Ç—É—Ç –º–æ–∂–Ω–æ –∑–∞–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å –∏–¥–∏–æ–º—É –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø –°–û–°–¢–ê–í–ù–´–• –¢–ò–ü–û–í –° –ü–û–ú–û–©–¨–Æ {0}. –î–∞–Ω–Ω—ã–π –ø—Ä–∏—ë–º &lt;strong&gt;–≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç&lt;/strong&gt; –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é –≤—Å–µ—Ö –ø–æ–ª–µ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã (–≤–∫–ª—é—á–∞—è —á–∏—Å–ª–∞ —Å –ø–ª–∞–≤–∞—é—â–µ–π –∑–∞–ø—è—Ç–æ–π –∏ —Ç.–¥.)  –Ω—É–ª–µ–≤—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏. –ü–µ—Ä–µ–Ω–æ—Å–∏–º–æ—Å—Ç—å –¥–∞–Ω–Ω–æ–≥–æ –∫–æ–¥–∞ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Ü–µ–ª–µ–≤–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç—Å—è –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–æ–º:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;struct&lt;/span&gt; &lt;span class="n"&gt;TemperatureNode&lt;/span&gt; &lt;span class="n"&gt;node&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;};&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–¢–∞–∫–∂–µ –¥–∞–Ω–Ω–∞—è –∏–¥–∏–æ–º–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ–ª–µ–∑–Ω–∞ –ø—Ä–∏ –æ–±–Ω—É–ª–µ–Ω–∏–∏ —É–∂–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –º–∞—Å—Å–∏–≤–æ–≤ –∏–ª–∏ –ø–æ–ª–µ–π —Å—Ç—Ä—É–∫—Ç—É—Ä –≤ –ª—é–±–æ–º –º–µ—Å—Ç–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã, –¥–ª—è —ç—Ç–æ–π —Ü–µ–ª–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–∑–¥–∞—Ç—å —ç—Ç–∞–ª–æ–Ω (–ª—É—á—à–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—É &lt;code&gt;const&lt;/code&gt;), –∞ –µ–≥–æ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ –º–µ—Ä–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cm"&gt;/* –≠—Ç–∞–ª–æ–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å –Ω—É–ª–µ–≤—ã–º–∏ –ø–æ–ª—è–º–∏ */&lt;/span&gt;

&lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="k"&gt;struct&lt;/span&gt; &lt;span class="n"&gt;TemperatureNode&lt;/span&gt; &lt;span class="n"&gt;zeroNode&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;};&lt;/span&gt;
&lt;span class="k"&gt;struct&lt;/span&gt; &lt;span class="n"&gt;TemperatureNode&lt;/span&gt; &lt;span class="n"&gt;node&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;};&lt;/span&gt;

&lt;span class="cm"&gt;/* –ß—Ç–æ-—Ç–æ –¥–µ–ª–∞–µ—Ç—Å—è —Å —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π node. */&lt;/span&gt;
&lt;span class="p"&gt;...&lt;/span&gt;
&lt;span class="cm"&gt;/* –ù–µ–æ–±—Ö–æ–¥–∏–º–æ –æ–±–Ω—É–ª–∏—Ç—å –≤—Å–µ –ø–æ–ª—è node */&lt;/span&gt;

&lt;span class="n"&gt;node&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;zeroNode&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ü—Ä–∏ –æ–±–Ω—É–ª–µ–Ω–∏–∏ –º–∞—Å—Å–∏–≤–æ–≤ –æ–ø–µ—Ä–∞—Ü–∏—è –ø—Ä–æ—Å—Ç–æ–≥–æ –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏—è –Ω–µ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç - –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–µ—Ä–µ–±–∏—Ä–∞—Ç—å –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã –≤ —Ü–∏–∫–ª–µ. –ö–∞–∫ –≤–∞—Ä–∏–∞–Ω—Ç, –º–æ–∂–Ω–æ –∑–∞–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å &lt;code&gt;memcpy&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;zeroArray&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;NO_OF_TEMPERATURES&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;};&lt;/span&gt;
&lt;span class="kt"&gt;double&lt;/span&gt; &lt;span class="n"&gt;temperatures&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;NO_OF_TEMPERATURES&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;};&lt;/span&gt;

&lt;span class="cm"&gt;/* –ß—Ç–æ-—Ç–æ –¥–µ–ª–∞–µ—Ç—Å—è —Å –º–∞—Å—Å–∏–≤–æ–º temperatures. */&lt;/span&gt;
&lt;span class="p"&gt;...&lt;/span&gt;
&lt;span class="cm"&gt;/* –û–±–Ω—É–ª–∏—Ç—å –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã –º–∞—Å—Å–∏–≤–∞ temperatures. */&lt;/span&gt;

&lt;span class="n"&gt;memcpy&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;temperatures&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;zeroArray&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt; &lt;span class="n"&gt;temperatures&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–î–ª—è –º–Ω–æ–≥–æ–º–µ—Ä–Ω—ã—Ö –º–∞—Å—Å–∏–≤–æ–≤ –∏ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä –º–æ–≥—É—Ç –ø–æ–Ω–∞–¥–æ–±–∏—Ç—å—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Ñ–∏–≥—É—Ä–Ω—ã–µ —Å–∫–æ–±–∫–∏ –Ω–∞–ø—Ä–∏–º–µ—Ä &lt;code&gt;{{0}}&lt;/code&gt;.&lt;/p&gt;
&lt;h3&gt;–ö–û–õ–ò–ß–ï–°–¢–í–û –≠–õ–ï–ú–ï–ù–¢–û–í –ú–ê–°–°–ò–í–ê –ö–ê–ö –†–ï–ó–£–õ–¨–¢–ê–¢ –î–ï–õ–ï–ù–ò–Ø&lt;/h3&gt;
&lt;p&gt;–ö–∞–∫ –∏–∑–≤–µ—Å—Ç–Ω–æ, &lt;strong&gt;–°&lt;/strong&gt; –Ω–µ –∏–∑–æ–±–∏–ª—É–µ—Ç —É–¥–æ–±—Å—Ç–≤–∞–º–∏ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –º–∞—Å—Å–∏–≤–∞–º–∏. –ü—Ä–∏ –ø–µ—Ä–µ–¥–∞—á–µ –º–∞—Å—Å–∏–≤–∞ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ —Ñ—É–Ω–∫—Ü–∏–∏, –ø–æ–ø—Ä–æ—Å—Ç—É –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è —É–∫–∞–∑–∞—Ç–µ–ª—å –Ω–∞ –µ–≥–æ –ø–µ—Ä–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç. –ë–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Å–æ–≥–ª–∞—à–µ–Ω–∏–π (–ø—Ä–∏–º–µ—Ä —Ç–∞–∫–æ–≥–æ —Å–æ–≥–ª–∞—à–µ–Ω–∏—è - —Å—Ç—Ä–æ–∫–∞, —Ç–æ—Ç –∂–µ –º–∞—Å—Å–∏–≤, –Ω–æ –æ–Ω –≤—Å–µ–≥–¥–∞ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è –Ω—É–ª–µ–≤—ã–º —Å–∏–º–≤–æ–ª–æ–º), —ç—Ç–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ, —á—Ç–æ–±—ã –≤ —Ç–µ–ª–µ —Ñ—É–Ω–∫—Ü–∏–∏ —É–∑–Ω–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –º–∞—Å—Å–∏–≤–∞. –í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ API –≤–µ—à–∞—é—Ç –≤—Å—é —á—ë—Ä–Ω—É—é –±—É—Ö–≥–∞–ª—Ç–µ—Ä–∏—é –ø–æ –≤—ã—á–∏—Å–ª–µ–Ω–∏—é –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –º–∞—Å—Å–∏–≤–∞ –Ω–∞ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–∞. –û–¥–Ω–∏–º –∏–∑ –ø—Ä–∏–º–µ—Ä–æ–≤ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ñ—É–Ω–∫—Ü–∏—è &lt;code&gt;poll()&lt;/code&gt; –≤ POSIX API. –í –∫–∞—á–µ—Å—Ç–≤–µ –ø–µ—Ä–≤–æ–≥–æ –∞—Ä–≥—É–º–µ–Ω—Ç–∞ –µ–π –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –º–∞—Å—Å–∏–≤ —Å—Ç—Ä—É–∫—Ç—É—Ä &lt;code&gt;pollfd&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;struct&lt;/span&gt; &lt;span class="n"&gt;pollfd&lt;/span&gt; &lt;span class="n"&gt;handles&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;NO_OF_HANDLES&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;};&lt;/span&gt;

&lt;span class="cm"&gt;/* –ó–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –º–∞—Å—Å–∏–≤ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ */&lt;/span&gt;

&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;result&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;poll&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;handles&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;NO_OF_HANDLES&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;TIMEOUT&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ü—Ä–æ–±–ª–µ–º–∞ –¥–∞–Ω–Ω–æ–≥–æ –∫–æ–¥–∞ –≤ —Ç–æ–º, —á—Ç–æ –∑–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º –∫—Ä–∞—Å–∏–≤–æ–≥–æ –∏–º–µ–Ω–∏ –Ω–∏—á–µ–≥–æ –Ω–µ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ —Ç–æ, —á—Ç–æ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∞ NO_OF_HANDLES —ç—Ç–æ —Ä–µ–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ –º–∞—Å—Å–∏–≤–µ. –•–æ—Ä–æ—à–∏–µ –∏–º–µ–Ω–∞ –∏–º–µ—é—Ç –±–æ–ª—å—à–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –Ω–æ —Ç–æ–ª—å–∫–æ –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–∞. –ö–æ–º–ø–∏–ª—è—Ç–æ—Ä—É –æ–Ω–∏ –Ω–∏ –æ —á–µ–º –Ω–µ –≥–æ–≤–æ—Ä—è—Ç, –æ–Ω –Ω–µ –±—É–¥–µ—Ç —Ä—É–≥–∞—Ç—å—Å—è –Ω–∞ —Ç–∞–∫–æ–π, —è–≤–Ω–æ –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω—ã–π –∫–æ–¥ —Å "–¥—É—à–∫–æ–º":&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#define NO_OF_HANDLES x&lt;/span&gt;
&lt;span class="k"&gt;struct&lt;/span&gt; &lt;span class="n"&gt;pollfd&lt;/span&gt; &lt;span class="n"&gt;handles&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;NO_OF_HANDLES&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;};&lt;/span&gt;

&lt;span class="cm"&gt;/* –ó–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –º–∞—Å—Å–∏–≤ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ */&lt;/span&gt;

&lt;span class="cp"&gt;#undef NO_OF_HANDLES&lt;/span&gt;
&lt;span class="cp"&gt;#define NO_OF_HANDLES y&lt;/span&gt;
&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;result&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;poll&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;handles&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;NO_OF_HANDLES&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;TIMEOUT&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –∏–¥–∏–æ–º—ã –ö–û–õ–ò–ß–ï–°–¢–í–û –≠–õ–ï–ú–ï–ù–¢–û–í –ú–ê–°–°–ò–í–ê –ö–ê–ö –†–ï–ó–£–õ–¨–¢–ê–¢ –î–ï–õ–ï–ù–ò–Ø, –º—ã –º–æ–∂–µ–º –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å, —á—Ç–æ –≤—ã—á–∏—Å–ª—è–µ–º–æ–µ –Ω–∞ —ç—Ç–∞–ø–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –º–∞—Å—Å–∏–≤–∞ –≤—Å–µ–≥–¥–∞ –±—É–¥–µ—Ç —Ä–∞–≤–Ω—ã–º —Ä–µ–∞–ª—å–Ω–æ–º—É –∫–æ–ª–∏—á–µ—Å—Ç–≤—É —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –≤ –º–∞—Å—Å–∏–≤–µ:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;struct&lt;/span&gt; &lt;span class="n"&gt;pollfd&lt;/span&gt; &lt;span class="n"&gt;handles&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;NO_OF_HANDLES&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;};&lt;/span&gt;

&lt;span class="cm"&gt;/* –ó–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –º–∞—Å—Å–∏–≤ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ */&lt;/span&gt;

&lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="kt"&gt;size_t&lt;/span&gt; &lt;span class="n"&gt;noOfHandles&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt; &lt;span class="n"&gt;handles&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt; &lt;span class="n"&gt;handles&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;result&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;poll&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;handles&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;noOfHandles&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;TIMEOUT&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–í –æ—Å–Ω–æ–≤–µ –∏–¥–∏–æ–º—ã –ª–µ–∂–∏—Ç —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ, —á—Ç–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º –¥–µ–ª–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞ –≤—Å–µ–≥–æ –º–∞—Å—Å–∏–≤–∞ –Ω–∞ —Ä–∞–∑–º–µ—Ä –æ–¥–Ω–æ–≥–æ –∏–∑ –µ–≥–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ —è–≤–ª—è–µ—Ç—Å—è –æ–±—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —ç–ª–µ–º–µ–Ω—Ç–æ–≤.&lt;/p&gt;
&lt;h3&gt;ENUM –î–õ–Ø –¶–ï–õ–û–ß–ò–°–õ–ï–ù–ù–´–• –ö–û–ù–°–¢–ê–ù–¢&lt;/h3&gt;
&lt;p&gt;–í –ø—Ä–µ–¥—ã–¥—É—â–µ–º –ø—Ä–∏–º–µ—Ä–µ —Ä–∞–∑–º–µ—Ä–Ω–æ—Å—Ç—å –º–∞—Å—Å–∏–≤–∞ –∑–∞–¥–∞—ë—Ç—Å—è –º–∞–∫—Ä–æ—Å–æ–º &lt;code&gt;#define NO_OF_HANDLES&lt;/code&gt;, –Ω–æ —ç—Ç–æ –∂–µ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –∏ –±–æ–ª–µ–µ —Å—Ç—Ä–æ–≥–∏–º —Å–ø–æ—Å–æ–±–æ–º —á–µ—Ä–µ–∑ –ø–µ—Ä–µ—á–∏—Å–ª–µ–Ω–∏–µ enum:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;enum&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="n"&gt;NO_OF_HANDLES&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;42&lt;/span&gt;&lt;span class="p"&gt;};&lt;/span&gt;
&lt;span class="k"&gt;struct&lt;/span&gt; &lt;span class="n"&gt;pollfd&lt;/span&gt; &lt;span class="n"&gt;handles&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;NO_OF_HANDLES&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;};&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–¢–∞–∫–æ–µ —Ä–µ—à–µ–Ω–∏–µ –±–æ–ª–µ–µ –Ω–∞–¥—ë–∂–Ω–æ —Ç.–∫. –¥–ª—è enum –Ω–µ–ª—å–∑—è —Å–¥–µ–ª–∞—Ç—å –∫–∞–∫—É—é-–Ω–∏–±—É–¥—å –ø–∞–∫–æ—Å—Ç—å —Ç–∏–ø–∞ &lt;code&gt;#undef&lt;/code&gt;. –ï—â—ë –º–æ–∂–Ω–æ –±—ã–ª–æ –±—ã –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –∑–∞–¥–∞—Ç—å —Ä–∞–∑–º–µ—Ä–Ω–æ—Å—Ç—å –∏ —Å –ø–æ–º–æ—â—å—é &lt;code&gt;const int NO_OF_HANDLES=42;&lt;/code&gt;, –ø—Ä–∞–≤–¥–∞ —Ç–∞–∫–æ–π —Å–ø–æ—Å–æ–± –≤–æ–∑–º–æ–∂–µ–Ω —Ç–æ–ª—å–∫–æ –≤–Ω—É—Ç—Ä–∏ —Ñ—É–Ω–∫—Ü–∏–π –∏ –ø–æ—ç—Ç–æ–º—É –Ω–µ –æ—Å–æ–±–æ –ø—Ä–∞–∫—Ç–∏—á–µ–Ω –≤ –æ—Ç–ª–∏—á–∏–µ –æ—Ç enum.&lt;/p&gt;
&lt;h3&gt;–ú–ê–ì–ò–ß–ï–°–ö–ò–ï –ß–ò–°–õ–ê –ö–ê–ö –ü–ï–†–ï–ú–ï–ù–ù–´–ï&lt;/h3&gt;
&lt;p&gt;–ß—Ç–æ –∑–∞ 42 !? –û–ø—ã—Ç–Ω—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç—ã –∏–∑–±–µ–≥–∞—é—Ç &lt;a href="http://ru.wikipedia.org/wiki/%D0%9C%D0%B0%D0%B3%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5_%D1%87%D0%B8%D1%81%D0%BB%D0%BE_%28%D0%BF%D1%80%D0%BE%D0%B3%D1%80%D0%B0%D0%BC%D0%BC%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5%29" rel="nofollow"&gt;–º–∞–≥–∏—á–µ—Å–∫–∏—Ö —á–∏—Å–µ–ª&lt;/a&gt;, –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω–∏ –¥–µ–ª–∞—é—Ç –∫–æ–¥ —Ç—Ä—É–¥–Ω—ã–º –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è –∏ –º–æ–≥—É—Ç –∑–∞–ø—É—Ç–∞—Ç—å –ª—é–±–æ–≥–æ, –∫—Ç–æ –±—É–¥–µ—Ç –µ–≥–æ —á–∏—Ç–∞—Ç—å / —Å–æ–ø—Ä–æ–≤–æ–∂–¥–∞—Ç—å. –ü—Ä–∞–≤–¥–∞ –µ—Å—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ —á–∏—Å–ª–∞ - 0, 1, 3.14 –∏ 42, –∫–æ—Ç–æ—Ä—ã–µ –ø—Ä–∏–Ω—è—Ç–æ —Å—á–∏—Ç–∞—Ç—å –º–µ–Ω–µ–µ –º–∞–≥–∏—á–µ—Å–∫–∏–º–∏, —á–µ–º –æ—Å—Ç–∞–ª—å–Ω—ã–µ. –ö–æ–≥–¥–∞ –º—ã –≤–∏–¥–∏–º –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º—É—é –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 0, –º–æ–∂–Ω–æ –ø—Ä–µ–¥–ø–æ–ª–æ–∂–∏—Ç—å, —á—Ç–æ –æ–Ω–∞ –±—É–¥–µ—Ç –∏–∑–º–µ–Ω—è—Ç—å—Å—è –≥–¥–µ-—Ç–æ –¥–∞–ª—å—à–µ –≤ –∫–æ–¥–µ. –ß–∏—Å–ª–æ 1 –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—Ä–æ—Å—Ç–æ –∞–Ω–∞–ª–æ–≥–æ–º &lt;code&gt;true&lt;/code&gt;. –ß–∏—Å–ª–æ &lt;a href="http://ru.wikipedia.org/wiki/%D0%9E%D1%82%D0%B2%D0%B5%D1%82_%D0%BD%D0%B0_%D0%B3%D0%BB%D0%B0%D0%B2%D0%BD%D1%8B%D0%B9_%D0%B2%D0%BE%D0%BF%D1%80%D0%BE%D1%81_%D0%B6%D0%B8%D0%B7%D0%BD%D0%B8,_%D0%B2%D1%81%D0%B5%D0%BB%D0%B5%D0%BD%D0%BD%D0%BE%D0%B9_%D0%B8_%D0%B2%D1%81%D0%B5%D0%B3%D0%BE_%D1%82%D0%B0%D0%BA%D0%BE%D0%B3%D0%BE" rel="nofollow"&gt;42&lt;/a&gt; —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ –ø–æ —Å–≤–æ–µ–π –ø—Ä–∏—Ä–æ–¥–µ, –æ–Ω–æ –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –≥–ª–∞–≤–Ω—ã–π –≤–æ–ø—Ä–æ—Å –∂–∏–∑–Ω–∏, –≤—Å–µ–ª–µ–Ω–Ω–æ–π –∏ –≤—Å–µ–≥–æ —Ç–∞–∫–æ–≥–æ.&lt;/p&gt;
&lt;p&gt;–ö–∞–∫ –Ω–∏ —Å—Ç—Ä–∞–Ω–Ω–æ, —Å &lt;em&gt;–Ω–µ –æ—á–µ–Ω—å&lt;/em&gt; –º–∞–≥–∏—á–µ—Å–∫–∏–º–∏ —á–∏—Å–ª–∞–º–∏ —Ç–æ–∂–µ –º–æ–≥—É—Ç –±—ã—Ç—å –ø—Ä–æ–±–ª–µ–º—ã. –ù–∞–ø—Ä–∏–º–µ—Ä —É —Å—Ç—Ä—É–∫—Ç—É—Ä—ã &lt;code&gt;struct tm&lt;/code&gt;, –∫–æ—Ç–æ—Ä–∞—è c–æ–¥–µ—Ä–∂–∏—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –∫–∞–ª–µ–Ω–¥–∞—Ä–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ –≤ &lt;strong&gt;–°&lt;/strong&gt;, –ø–æ–ª–µ &lt;code&gt;int tm_year;&lt;/code&gt; —Ö—Ä–∞–Ω–∏—Ç –≥–æ–¥—ã —Å 1900 (–≤ Windows) –∏–ª–∏ —Å 1970 (–≤ Unix). –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º &lt;em&gt;–Ω—É–ª–µ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ&lt;/em&gt; —ç—Ç–æ–≥–æ –ø–æ–ª—è –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –µ—â—ë –Ω–µ –æ–∑–Ω–∞—á–∞–µ—Ç &lt;em&gt;–Ω—É–ª–µ–≤–æ–π –≥–æ–¥&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;–ù—É –∞ —Å –Ω–∞—Å—Ç–æ—è—â–∏–º–∏ –º–∞–≥–∏—á–µ—Å–∫–∏–º–∏ —á–∏—Å–ª–∞–º–∏ –≤—Å—ë –µ—â—ë –ø–µ—á–∞–ª—å–Ω–µ–π:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;startTimer&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ —Ö–æ—Ä–æ—à–µ–µ –∏–º—è —Ñ—É–Ω–∫—Ü–∏–∏, —Å–ª–æ–∂–Ω–æ –æ–¥–Ω–æ–∑–Ω–∞—á–Ω–æ —Å–∫–∞–∑–∞—Ç—å, —á—Ç–æ —Ç—É—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç. –ï—Å–ª–∏ –ø—Ä–µ–¥–ø–æ–ª–æ–∂–∏—Ç—å, —á—Ç–æ 10 - —ç—Ç–æ –≤—Ä–µ–º–µ–Ω–Ω–æ–π –∏–Ω—Ç–µ—Ä–≤–∞–ª, —Ç–æ –≤ —á—ë–º –æ–Ω –∏–∑–º–µ—Ä—è–µ—Ç—Å—è ? –°–µ–∫—É–Ω–¥—ã, –º–∏–ª–ª–∏—Å–µ–∫—É–Ω–¥—ã –∏–ª–∏ —ë–∂–∏–∫–∏ ? –ê –º–æ–∂–µ—Ç —ç—Ç–æ –≤–æ–æ–±—â–µ –∫–∞–∫–æ–π-—Ç–æ –ø–æ—Ä—è–¥–∫–æ–≤—ã–π –Ω–æ–º–µ—Ä ? –°–æ –≤—Ç–æ—Ä—ã–º –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º —Ç–∞–∫–∞—è –∂–µ –∏—Å—Ç–æ—Ä–∏—è.&lt;/p&gt;
&lt;p&gt;–®–∞–≥–æ–º –Ω–∞–≤—Å—Ç—Ä–µ—á—É –∫ —Å–∞–º–æ–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É—é—â–µ–º—É—Å—è –∫–æ–¥—É –±—É–¥–µ—Ç –∏–¥–∏–æ–º–∞ –ú–ê–ì–ò–ß–ï–°–ö–ò–ï –ß–ò–°–õ–ê –ö–ê–ö –ü–ï–†–ï–ú–ï–ù–ù–´–ï. –°–æ–≥–ª–∞—Å–∏—Ç–µ—Å—å, –¥–∞–Ω–Ω—ã–π –∫–æ–¥ –≤—ã–∑—ã–≤–∞–µ—Ç –Ω–∞–º–Ω–æ–≥–æ –º–µ–Ω—å—à–µ –≤–æ–ø—Ä–æ—Å–æ–≤:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="kt"&gt;size_t&lt;/span&gt; &lt;span class="n"&gt;timeoutInSeconds&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="kt"&gt;size_t&lt;/span&gt; &lt;span class="n"&gt;doNotRescheduleTimer&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="n"&gt;startTimer&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;timeoutInSeconds&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;doNotRescheduleTimer&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–°–ª–µ–¥—É—è —Ç–∞–∫–æ–º—É –ø—Ä–∏–Ω—Ü–∏–ø—É –≥–¥–µ-—Ç–æ –¥–∞–ª—å—à–µ –≤ –∫–æ–¥–µ –º–æ–∂–Ω–æ –ø–æ –∞–Ω–∞–ª–æ–≥–∏–∏ –Ω–∞–ø–∏—Å–∞—Ç—å:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;startTimer&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tenSecondsTimeout&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;doNotRescheduleTimer&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ö–æ–¥ —Å—Ç–∞–ª –µ—â—ë –±–æ–ª–µ–µ –ø–æ–Ω—è—Ç–Ω—ã–º, –Ω–µ —Ç–∞–∫ –ª–∏ ? –ò–ª–∏ –Ω–µ —Å–æ–≤—Å–µ–º ? –ü–æ–¥–≤–æ—Ö —Ç—É—Ç –≤ —Ç–æ–º, —á—Ç–æ –¥–ª—è –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞ &lt;code&gt;tenSecondsTimeout&lt;/code&gt; —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ –∏–º—è. –ù–∏—á—Ç–æ –Ω–µ –º–µ—à–∞–µ—Ç –∫–∞–∫–æ–º—É-—Ç–æ —Å–ª–∏—à–∫–æ–º —É–º–Ω–æ–º—É –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç—É –ø—Ä–∏—Å–≤–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π &lt;code&gt;tenSecondsTimeout&lt;/code&gt; –Ω–µ —Å–æ–≤—Å–µ–º —Ç–æ —á–∏—Å–ª–æ, –∫–æ—Ç–æ—Ä–æ–µ –≤—ã—Ç–µ–∫–∞–µ—Ç –∏–∑ –µ—ë –∏–º–µ–Ω–∏:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="kt"&gt;size_t&lt;/span&gt; &lt;span class="n"&gt;tenSecondsTimeout&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;42&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="cm"&gt;/* Original value was 10 */&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–¢–∞–∫–æ–µ –∏–Ω–æ–≥–¥–∞ —Å–ª—É—á–∞–µ—Ç—Å—è, –∏ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –æ—Ç–ª–∞–¥–∫–∏ –º–æ–∂–Ω–æ –¥–æ–ª–≥–æ –¥—É–º–∞—Ç—å, —Å–∫–æ–ª—å–∫–æ –∂–µ –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –¥–ª—è—Ç—Å—è 10 —Å–µ–∫—É–Ω–¥...&lt;/p&gt;
&lt;p&gt;–ò–¥–µ–∞–ª—å–Ω–æ–≥–æ —Ä–µ—à–µ–Ω–∏—è —Ç—É—Ç –Ω–µ—Ç. –ü–æ–∂–∞–ª—É–π, –Ω–µ —Å—Ç–æ–∏—Ç –ø—Ä–∏–º–µ–Ω—è—Ç—å —ç—Ç—É –∏–¥–∏–æ–º—É —Å–ª–µ–ø–æ –∏ –≥–¥–µ –ø–æ–ø–∞–ª–æ - –ª—É—á—à–µ, —á—Ç–æ–±—ã –≤ –∏–º–µ–Ω–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –Ω–µ –±—ã–ª–æ —É–ø–æ–º–∏–Ω–∞–Ω–∏–π –æ &lt;strong&gt;—á–∏—Å–ª–∞—Ö&lt;/strong&gt; –∏–ª–∏ &lt;strong&gt;—Ç–∏–ø–∞—Ö –¥–∞–Ω–Ω—ã—Ö&lt;/strong&gt;, –ø–æ—Å–∫–æ–ª—å–∫—É –æ–Ω–∏ –æ—á–µ–Ω—å —á–∞—Å—Ç–æ –º–µ–Ω—è—é—Ç—Å—è.&lt;/p&gt;
&lt;h3&gt;–ò–ú–ï–ù–û–í–ê–ù–ù–´–ï –ê–†–ì–£–ú–ï–ù–¢–´&lt;/h3&gt;
&lt;p&gt;–ö–∞–∫ –º—ã —É–∂–µ –∑–Ω–∞–µ–º, —Å–ª–µ–¥—É—è –ø—Ä–∏–Ω—Ü–∏–ø—É –ú–ê–ì–ò–ß–ï–°–ö–ò–ï –ß–ò–°–õ–ê –ö–ê–ö –ü–ï–†–ï–ú–ï–ù–ù–´–ï –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –∫–æ–¥ –±–æ–ª–µ–µ —á–∏—Ç–∞–±–µ–ª—å–Ω—ã–º, –Ω–æ, –∫–∞–∫ –≤–∏–¥–Ω–æ –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ –ø—Ä–∏–º–µ—Ä–∞, –±—ã–≤–∞—é—Ç —Å–ª—É—á–∞–∏, –∫–æ–≥–¥–∞ –ø–æ–¥–æ–±—Ä–∞—Ç—å —Ö–æ—Ä–æ—à–µ–µ –∏–º—è –¥–ª—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –ø—Ä–æ–±–ª–µ–º–∞—Ç–∏—á–Ω–æ. –ü–æ—ç—Ç–æ–º—É –¥–∞–≤–∞–π—Ç–µ –Ω–µ–º–Ω–æ–≥–æ –ø–µ—Ä–µ–¥–µ–ª–∞–µ–º –ø—Ä–µ–¥—ã–¥—É—â–∏–π –ø—Ä–∏–º–µ—Ä. –î–æ–ø—É—Å—Ç–∏–º, –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π, –∫–æ—Ç–æ—Ä–∞—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –ø–µ—Ä–≤–æ–≥–æ —Ç–∞–π–º–µ—Ä–∞, –º–æ–∂–Ω–æ –¥–∞—Ç—å –∏–º—è &lt;code&gt;timeoutInSeconds&lt;/code&gt;, –Ω–æ –∫–∞–∫–æ–µ –∏–º—è —Ç–æ–≥–¥–∞ —Å—Ç–æ–∏—Ç –¥–∞–≤–∞—Ç—å –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –¥–ª—è –≤—Ç–æ—Ä–æ–≥–æ —Ç–∞–π–º–µ—Ä–∞ ? –ö–∞–∫ –≤–∞—Ä–∏–∞–Ω—Ç, –º–æ–∂–Ω–æ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å &lt;code&gt;timeoutInSeconds&lt;/code&gt;, –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ —É–±—Ä–∞–≤ –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ &lt;code&gt;const&lt;/code&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kt"&gt;size_t&lt;/span&gt; &lt;span class="n"&gt;timeoutInSeconds&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="kt"&gt;size_t&lt;/span&gt; &lt;span class="n"&gt;doNotRescheduleTimer&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="n"&gt;notifyClosingDoor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;startTimer&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;timeoutInSeconds&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;doNotRescheduleTimer&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="n"&gt;timeoutInSeconds&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="n"&gt;closeDoor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;startTimer&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;timeoutInSeconds&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;doNotRescheduleTimer&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–¢—Ä—É–¥–Ω–æ –Ω–∞–∑–≤–∞—Ç—å —Ç–∞–∫–æ–π –∫–æ–¥ —á–∏—Ç–∞–±–µ–ª—å–Ω—ã–º –∏ –Ω–∞–¥—ë–∂–Ω—ã–º. –ö–æ–Ω—Ü–µ–ø—Ü–∏—è –ò–ú–ï–ù–û–í–ê–ù–ù–´–• –ê–†–ì–£–ú–ï–ù–¢–û–í –º–æ–≥–ª–∞ –±—ã —Ä–µ—à–∏—Ç—å –¥–∞–Ω–Ω—É—é –ø—Ä–æ–±–ª–µ–º—É, –ø–æ–∑–≤–æ–ª—è—è —è–≤–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å –∏–º—è –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º–æ–≥–æ –≤ –º–µ—Ç–æ–¥ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞, –≤–º–µ—Å—Ç–æ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –µ–≥–æ –ø–æ –ø–æ–ª–æ–∂–µ–Ω–∏—é. &lt;strong&gt;–°&lt;/strong&gt; –Ω–∞–ø—Ä—è–º—É—é –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ç–∞–∫—É—é –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å, –æ–¥–Ω–∞–∫–æ –≤—Å—ë –∂–µ –∏–º–µ–µ—Ç—Å—è –æ–¥–∏–Ω —Å–ø–æ—Å–æ–± —ç–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Ö–æ–∂–µ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kt"&gt;size_t&lt;/span&gt; &lt;span class="n"&gt;timeoutInSeconds&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="kt"&gt;size_t&lt;/span&gt; &lt;span class="n"&gt;doNotRescheduleTimer&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="n"&gt;notifyClosingDoor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;startTimer&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;timeoutInSeconds&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;doNotRescheduleTimer&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="n"&gt;closeDoor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;startTimer&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;timeoutInSeconds&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;doNotRescheduleTimer&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π &lt;code&gt;timeoutInSeconds&lt;/code&gt; –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É –ø—Ä–∏—Å–≤–∞–∏–≤–∞–µ—Ç—Å—è –∑–∞–¥–∞–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ, –ø–æ—Å–ª–µ —á–µ–≥–æ –æ–Ω–∞ –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –∫–∞–∫ –∞—Ä–≥—É–º–µ–Ω—Ç —Ñ—É–Ω–∫—Ü–∏–∏ &lt;code&gt;startTimer&lt;/code&gt;. –¢–µ–ø–µ—Ä—å –∫–æ–¥ –Ω–µ–ø–ª–æ—Ö–æ –≤—ã–≥–ª—è–¥–∏—Ç, –æ–¥–Ω–∞–∫–æ –ø—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –≤—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π, –∫–æ–≥–¥–∞ –∫–∞–∂–¥—ã–π –±–∞–π—Ç –ø–∞–º—è—Ç–∏ –Ω–∞ —Å—á–µ—Ç—É, —Ç–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ –º–æ–∂–µ—Ç –æ–∫–∞–∑–∞—Ç—å—Å—è —Å–ª–∏—à–∫–æ–º —Ä–∞—Å—Ç–æ—á–∏—Ç–µ–ª—å–Ω—ã–º. –í –ø–æ–¥–æ–±–Ω—ã—Ö —Å–ª—É—á–∞—è—Ö –Ω–∏—á—Ç–æ –Ω–µ –º–µ—à–∞–µ—Ç –≤–º–µ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è &lt;code&gt;timeoutInSeconds&lt;/code&gt; –ø—Ä–æ—Å—Ç–æ –∑–∞–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;closeDoor&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;startTimer&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="cm"&gt;/*Timeout in seconds*/&lt;/span&gt;&lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="cm"&gt;/*Don&amp;#39;t reschedule*/&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ß–µ–º –±–æ–ª—å—à–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –≤ –∫–æ–¥–µ —Ç–µ–º –≤–µ—Å–µ–ª–µ–π –µ–≥–æ —á–∏—Ç–∞—Ç—å.&lt;/p&gt;
&lt;h3&gt;–î–ò–ê–ì–ù–û–°–¢–ò–ö–ê –° –û–ü–ò–°–ê–ù–ò–ï–ú&lt;/h3&gt;
&lt;p&gt;–í —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–π –±–∏–±–ª–∏–æ—Ç–µ–∫–µ &lt;strong&gt;C&lt;/strong&gt; –∏–º–µ–µ—Ç—Å—è –º–µ—Ö–∞–Ω–∏–∑–º –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ –ø—Ä–æ–≥—Ä–∞–º–º—ã –Ω–∞ —ç—Ç–∞–ø–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è - –º–∞–∫—Ä–æ—Å &lt;code&gt;assert&lt;/code&gt;, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã, –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞—è –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –æ—à–∏–±–∫–∏. –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–º –∞—Ä–≥—É–º–µ–Ω—Ç–æ–º –¥–ª—è &lt;code&gt;assert&lt;/code&gt; —è–≤–ª—è–µ—Ç—Å—è –≤—ã—Ä–∞–∂–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –≤ –Ω–æ—Ä–º–∞–ª—å–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –∏—Å—Ç–∏–Ω–Ω–æ. –í —ç—Ç–æ–º —Å–ª—É—á–∞–µ –Ω–∏—á–µ–≥–æ –Ω–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∏ –ø—Ä–æ–≥—Ä–∞–º–º–∞ –∏–¥—ë—Ç –¥–∞–ª—å—à–µ. –í –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ &lt;code&gt;assert&lt;/code&gt; –ø–µ—á–∞—Ç–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ &lt;a href="http://ru.wikipedia.org/wiki/%D0%A1%D1%82%D0%B0%D0%BD%D0%B4%D0%B0%D1%80%D1%82%D0%BD%D1%8B%D0%B5_%D0%BF%D0%BE%D1%82%D0%BE%D0%BA%D0%B8" rel="nofollow"&gt;—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–æ—Ç–æ–∫&lt;/a&gt; &lt;code&gt;stderr&lt;/code&gt; –∏ –≤—ã–∑—ã–≤–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é &lt;code&gt;abort()&lt;/code&gt; –¥–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–∞–º–º—ã.&lt;/p&gt;
&lt;p&gt;–ù–∏–∫–æ–º—É –Ω–µ —Ö–æ—á–µ—Ç—Å—è —Ä–∞–∑–±–∏—Ä–∞—Ç—å—Å—è –≤ –¥–ª–∏–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏—è—Ö, –≤ —ç—Ç–æ–º —Å–ª—É—á–∞–µ –º—ã —Å—Ç–∞—Ä–∞–µ–º—Å—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ —É–ø—Ä–æ—Å—Ç–∏—Ç—å –∫–æ–¥, –ø—Ä–µ–æ–±—Ä–∞–∑—É—è –µ–≥–æ —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ, –±–æ–ª–µ–µ –º–∞–ª–µ–Ω—å–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∏ –ø–µ—Ä–µ–¥–∞–≤–∞—è –∏–º –∫–∞–∫–∏–µ-—Ç–æ –¥–∞–Ω–Ω—ã–µ. –ò—Å–ø–æ–ª—å–∑—É—è –º–∞–∫—Ä–æ—Å &lt;code&gt;assert&lt;/code&gt;, —Ñ—É–Ω–∫—Ü–∏—è –º–æ–∂–µ—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–µ –µ–π –∞—Ä–≥—É–º–µ–Ω—Ç—ã –ø–µ—Ä–µ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º —Å–≤–æ–µ–π –æ—Å–Ω–æ–≤–Ω–æ–π –ª–æ–≥–∏–∫–∏ –∏ —Ç–µ–º —Å–∞–º—ã–º –≤—ã—è–≤–∏—Ç—å –ø—Ä–æ–±–ª–µ–º—É –Ω–∞ —Å–∞–º–æ–º —Ä–∞–Ω–Ω–µ–º —ç—Ç–∞–ø–µ:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;sayHelloTo&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="n"&gt;Address&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;aGoodFriend&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;aGoodFriend&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;Telegram&lt;/span&gt; &lt;span class="n"&gt;friendlyGreetings&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;};&lt;/span&gt;

        &lt;span class="cm"&gt;/* –ó–∞–ø–æ–ª–Ω—è–µ–º —Ç–µ–ª–µ–≥—Ä–∞–º–º—É telegram... */&lt;/span&gt;

        &lt;span class="n"&gt;sendTelegram&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;friendlyGreetings&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;aGoodFriend&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;error&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Empty address not allowed&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;sendTelegram&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="n"&gt;Telegram&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;telegram&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; 
    &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="n"&gt;Address&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;receiver&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

    &lt;span class="cm"&gt;/* –ü—Ä–æ–≤–µ—Ä–∫–∞. –¢–µ–ª–µ–≥—Ä–∞–º–º–∞ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç ? */&lt;/span&gt;
    &lt;span class="n"&gt;assert&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;telegram&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="cm"&gt;/* –ü—Ä–æ–≤–µ—Ä–∫–∞. –ü–æ–ª—É—á–∞—Ç–µ–ª—å —Å—É—â–µ—Å—Ç–≤—É–µ—Ç ? */&lt;/span&gt;
    &lt;span class="n"&gt;assert&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;receiver&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="cm"&gt;/* –û—Ç—Å—ã–ª–∞–µ–º —Ç–µ–ª–µ–≥—Ä–∞–º–º—É... */&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–§–æ—Ä–º–∞—Ç –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –º–æ–∂–µ—Ç –Ω–µ–º–Ω–æ–≥–æ –æ—Ç–ª–∏—á–∞—Ç—å—Å—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞, –Ω–æ –ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω–æ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —á—Ç–æ-—Ç–æ —Ç–∞–∫–æ–µ:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;Assertion failed: expression, file filename, line line number
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–°—É—Ç—å –∏–¥–∏–æ–º—ã –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê –° –û–ü–ò–°–ê–ù–ò–ï–ú –≤ —Ç–æ–º, —á—Ç–æ –≤ &lt;em&gt;–≤—ã—Ä–∞–∂–µ–Ω–∏–µ&lt;/em&gt; (expression) –º–æ–∂–Ω–æ –ø–æ–¥–º–µ—à–∞—Ç—å —Å—Ç—Ä–æ–∫—É - –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π. –≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç –Ω–µ —Ç–æ–ª—å–∫–æ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –º–µ—Å—Ç–æ, –≤ –∫–æ—Ç–æ—Ä–æ–º –≤–æ–∑–Ω–∏–∫–ª–∞ –ø—Ä–æ–±–ª–µ–º–∞, –Ω–æ –∏ –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ –ø–æ–Ω—è—Ç–Ω–æ –æ–ø–∏—Å–∞—Ç—å –µ—ë:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;assert&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;receiver&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;Is validated by the caller&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ì–ª–∞–≤–Ω—ã–º –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–æ–º —Ç–∞–∫–æ–≥–æ –ø–æ–¥—Ö–æ–¥–∞ —è–≤–ª—è–µ—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –æ–±—ä—ë–º –ø–∞–º—è—Ç–∏, –≤ –∫–æ—Ç–æ—Ä–æ–º –±—É–¥—É—Ç —Ö—Ä–∞–Ω–∏—Ç—å—Å—è —Å—Ç—Ä–æ–∫–∏ —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏. –î–ª—è –≤—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π —ç—Ç–æ –æ—Å–æ–±–µ–Ω–Ω–æ –∞–∫—Ç—É–∞–ª—å–Ω–æ. –û–¥–Ω–∞–∫–æ –Ω–µ —Å—Ç–æ–∏—Ç –∑–∞–±—ã–≤–∞—Ç—å, —á—Ç–æ –º–∞–∫—Ä–æ—Å &lt;code&gt;assert&lt;/code&gt; - —ç—Ç–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞—Ä–∏–π –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏, –µ–≥–æ –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è –º–æ–∂–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å (&lt;code&gt;NDEBUG&lt;/code&gt;).&lt;/p&gt;
&lt;h3&gt;–°–¢–ê–¢–ò–ß–ï–°–ö–ê–Ø –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê&lt;/h3&gt;
&lt;p&gt;–î–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫–∏ –≤ –ø—Ä–æ–≥—Ä–∞–º–º–µ –Ω–∞ —ç—Ç–∞–ø–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏ –æ–±—ã—á–Ω–æ –≤—ã—Ö–æ–¥–∏—Ç –¥–µ—à–µ–≤–ª–µ —á–µ–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–¥—É–∫—Ç –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö. –ù–∞–ø—Ä–∏–º–µ—Ä –ø–∞—Ä–æ—á–∫–∞ –º–∞–∫—Ä–æ—Å–æ–≤ –¥–ª—è –±–∏—Ç–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#define BIT_SET(a,b) ((a) |= (1&amp;lt;&amp;lt;(b)))&lt;/span&gt;
&lt;span class="cp"&gt;#define BIT_CLEAR(a,b) ((a) &amp;amp;= ~(1&amp;lt;&amp;lt;(b)))&lt;/span&gt;
&lt;span class="cp"&gt;#define BIT_FLIP(a,b) ((a) ^= (1&amp;lt;&amp;lt;(b)))&lt;/span&gt;
&lt;span class="cp"&gt;#define BIT_CHECK(a,b) ((a) &amp;amp; (1&amp;lt;&amp;lt;(b)))&lt;/span&gt;

&lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="c1"&gt;// OK&lt;/span&gt;
&lt;span class="n"&gt;BIT_SET&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="c1"&gt;// BAD: 10 &amp;gt; 8 * sizeof(a)&lt;/span&gt;
&lt;span class="n"&gt;BIT_SET&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–û—á–µ–≤–∏–¥–Ω–æ –æ–ø–µ—Ä–∞—Ü–∏—è &lt;code&gt;BIT_SET(a, 10);&lt;/code&gt; –Ω–µ –∏–º–µ–µ—Ç —Å–º—ã—Å–ª–∞ –¥–ª—è –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π 8 –±–∏—Ç –∏ —Ç–∞–∫–æ–π –∫–ª–∞—Å—Å –æ—à–∏–±–æ–∫ –º–æ–∂–Ω–æ –∏ –Ω—É–∂–Ω–æ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞—Ç—å –µ—â—ë –Ω–∞ —ç—Ç–∞–ø–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏. –°—É—â–µ—Å—Ç–≤—É—é—Ç –º–Ω–æ–≥–æ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö &lt;a href="http://www.pixelbeat.org/programming/gcc/static_assert.html" rel="nofollow"&gt;—Å–ø–æ—Å–æ–±–æ–≤&lt;/a&gt; —ç—Ç–æ —Å–¥–µ–ª–∞—Ç—å.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#define STATIC_ASSERT(cond) typedef int foo[(cond) ? 1 : -1]&lt;/span&gt;

&lt;span class="cp"&gt;#define BIT_SET(a,b) STATIC_ASSERT(8*sizeof(a)&amp;gt;b); ((a) |= (1&amp;lt;&amp;lt;(b)))&lt;/span&gt;

&lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="c1"&gt;// OK&lt;/span&gt;
&lt;span class="n"&gt;BIT_SET&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="c1"&gt;// compile error&lt;/span&gt;
&lt;span class="n"&gt;BIT_SET&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–¢–µ–ø–µ—Ä—å –ª–æ–≥–∏—á–µ—Å–∫–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∫–æ–¥ &lt;code&gt;BIT_SET(a, 10);&lt;/code&gt; –ø–æ–ø—Ä–æ—Å—Ç—É –Ω–µ —Å–æ–±–µ—Ä—ë—Ç—Å—è —á—Ç–æ –∏ —Ç—Ä–µ–±–æ–≤–∞–ª–æ—Å—å –≤ –ø–æ—Å—Ç–∞–Ω–æ–≤–∫–µ –∑–∞–¥–∞—á–∏.&lt;/p&gt;
&lt;h3&gt;–ö–û–ù–°–¢–ê–ù–¢–´ –°–õ–ï–í–ê&lt;/h3&gt;
&lt;p&gt;–í —Å—Ç–∞–Ω–¥–∞—Ä—Ç &lt;strong&gt;–°&lt;/strong&gt; –≤–æ—à–ª–∞ –æ–¥–Ω–∞ –∑–∞–≥–∞–¥–æ—á–Ω–∞—è –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è, –≤ –∫–æ—Ç–æ—Ä–æ–π –ª–µ–≥–∫–æ –∑–∞–ø—É—Ç–∞—Ç—å—Å—è / –æ—á–µ–ø—è—Ç–∞—Ç—å—Å—è (–º—ã —Å –Ω–µ–π –æ—Ç—á–∞—Å—Ç–∏ —É–∂–µ –ø–µ—Ä–µ—Å–µ–∫–∞–ª–∏—Å—å –ø—Ä–∏ –æ–ø–∏—Å–∞–Ω–∏–∏ –∏–¥–∏–æ–º—ã –ò–ú–ï–ù–û–í–ê–ù–ù–´–ï –ê–†–ì–£–ú–ï–ù–¢–´):&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="cm"&gt;/* –°—é–¥–∞ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –ø–æ–ø–∞–¥—ë–º (–ò–Ω–¥—É—Å—Å–∫–∏–π –∫–æ–¥) ! */&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="cm"&gt;/* –ê –≤–æ—Ç —Å—é–¥–∞ –ø–æ–ø–∞–¥—ë–º... */&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ò–Ω–æ–≥–¥–∞ –ø–æ–¥–æ–±–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è –≤—Å—ë –∂–µ –∏–º–µ—é—Ç —Å–∫—Ä—ã—Ç—ã–π —Å–º—ã—Å–ª:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;Friend&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;aGoodFriend&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;NULL&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;...&lt;/span&gt;
&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;aGoodFriend&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;findFriendLivingAt&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;address&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;sayHelloTo&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;aGoodFriend&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;I am not your friend&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–° –ø–æ–º–æ—â—å—é –∏–¥–∏–æ–º—ã –ö–û–ù–°–¢–ê–ù–¢–´ –°–õ–ï–í–ê –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç –º–æ–∂–µ—Ç –±–æ–ª–µ–µ —Ç–æ—á–Ω–æ —É–∫–∞–∑–∞—Ç—å –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä—É, —á—Ç–æ –æ–Ω –∏–º–µ–ª –≤–≤–∏–¥—É –æ–ø–µ—Ä–∞—Ü–∏—é &lt;em&gt;—Å—Ä–∞–≤–Ω–µ–Ω–∏—è&lt;/em&gt;, –∞ –Ω–µ &lt;em&gt;–ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏—è&lt;/em&gt;. –°–ª–µ–¥—É—é—â–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è –ø—Ä–∏—Å–≤–∞–∏–≤–∞–Ω–∏—è –Ω–µ –∏–º–µ–µ—Ç —Å–º—ã—Å–ª–∞ –∏ –ø–æ—ç—Ç–æ–º—É –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –¥–æ–ª–∂–µ–Ω —Ä—É–≥–∞—Ç—å—Å—è:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ê –≤–æ—Ç –ø–æ–¥–æ–±–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –Ω–µ –ø—Ä–æ—Ç–∏–≤–æ—Ä–µ—á–∏—Ç –∑–¥—Ä–∞–≤–æ–º—É —Å–º—ã—Å–ª—É:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="cm"&gt;/* –ï—Å–ª–∏ —Ö —Ä–∞–≤–µ–Ω –Ω—É–ª—é, –Ω–∞–º —Å—é–¥–∞ */&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ù–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –æ—á–µ–≤–∏–¥–Ω—É—é –ø–æ–ª—å–∑—É —ç—Ç–æ–π –∏–¥–∏–æ–º—ã, –æ–ø—ã—Ç–Ω—ã–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç—ã —Å—á–∏—Ç–∞—é—Ç, —á—Ç–æ –æ–Ω–∞ –¥–µ–ª–∞–µ—Ç –∫–æ–¥ —Ç—Ä—É–¥–Ω—ã–º –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è, –∏, —á—Ç–æ –µ—â—ë —Ö—É–∂–µ, –Ω–µ—Ç –ø–æ–ª–Ω–æ–π –≥–∞—Ä–∞–Ω—Ç–∏–∏ —Ç–æ–≥–æ, —á—Ç–æ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä —Å–æ–æ–±—â–∏—Ç –æ–± –æ—à–∏–±–∫–µ. –ß—Ç–æ –∂, –∫ –º–Ω–µ–Ω–∏—é –æ–ø—ã—Ç–Ω—ã—Ö –ø—Ä–æ–≥—Ä–∞–º–º–∏—Å—Ç–æ–≤ —Å—Ç–æ–∏—Ç –ø—Ä–∏—Å–ª—É—à–∏–≤–∞—Ç—å—Å—è.&lt;/p&gt;
&lt;h3&gt;–ò–ù–ö–ê–ü–°–£–õ–Ø–¶–ò–Ø –î–ê–ù–ù–´–•&lt;/h3&gt;
&lt;p&gt;–í–∑–≥–ª—è–Ω–µ–º –Ω–∞ —Å—É–ø–µ—Ä —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—é &lt;a href="http://proiot.ru/blog/posts/2012/10/07/ispolzovanie-manchesterskogo-koda-na-primere/"&gt;–∫–æ–ª—å—Ü–µ–≤–æ–≥–æ –±—É—Ñ–µ—Ä–∞&lt;/a&gt;:&lt;/p&gt;
&lt;p&gt;&lt;em&gt;circular_buffer.h&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;shift_circular&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;circular_add_1&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;circular_add_0&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;circular_print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;em&gt;circular_buffer.c&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;circular_buffer.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;stdio.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;unsigned&lt;/span&gt; &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="n"&gt;rxbuf&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;long&lt;/span&gt;&lt;span class="p"&gt;))];&lt;/span&gt;

&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;shift_circular&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt; &lt;span class="kt"&gt;unsigned&lt;/span&gt; &lt;span class="kt"&gt;long&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;rxbuf&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&amp;lt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; 
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rxbuf&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;11&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="mh"&gt;0x80&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;rxbuf&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;|=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; 
    &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt; &lt;span class="kt"&gt;unsigned&lt;/span&gt; &lt;span class="kt"&gt;long&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;rxbuf&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&amp;lt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; 
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rxbuf&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="mh"&gt;0x80&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;rxbuf&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;|=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; 
    &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt; &lt;span class="kt"&gt;unsigned&lt;/span&gt; &lt;span class="kt"&gt;long&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;rxbuf&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&amp;lt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; 
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rxbuf&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="mh"&gt;0x80&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;rxbuf&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;|=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; 
    &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt; &lt;span class="kt"&gt;unsigned&lt;/span&gt; &lt;span class="kt"&gt;long&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;rxbuf&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&amp;lt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; 
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;circular_add_0&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;shift_circular&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt; 
    &lt;span class="n"&gt;rxbuf&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;=&lt;/span&gt; &lt;span class="mh"&gt;0xFE&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;circular_add_1&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;shift_circular&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt; 
    &lt;span class="n"&gt;rxbuf&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;|=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;circular_print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rxbuf&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt; 
    &lt;span class="k"&gt;while&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; 
        &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;%.2x&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;rxbuf&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;]);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;em&gt;usage.c&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;circular_add_1&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="n"&gt;circular_add_0&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="n"&gt;circular_print&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ß—Ç–æ –±—É–¥–µ—Ç, –∫–æ–≥–¥–∞ –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö –æ–¥–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã –Ω—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–æ–ª–µ–µ –æ–¥–Ω–æ–≥–æ –∫–æ–ª—å—Ü–µ–≤–æ–≥–æ –±—É—Ñ–µ—Ä–∞ ? –ü–æ—Å–∫–æ–ª—å–∫—É —Å–æ–±–∞–∫–æ–≤–æ–¥—ã &lt;em&gt;ANCI C&lt;/em&gt; –Ω–µ &lt;a href="http://stackoverflow.com/questions/4523497/typedef-fixed-length-array#answer-4523537" rel="nofollow"&gt;—Ä–µ–∫–æ–º–µ–Ω–¥—É—é—Ç&lt;/a&gt; –∑–∞–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã–π —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö –∫–∞–∫ –º–∞—Å—Å–∏–≤ —Å –∑–∞–¥–∞–Ω–Ω–æ–π –≤–µ–ª–∏—á–∏–Ω–æ–π, –¥–∞–Ω–Ω—ã–µ –±—É—Ñ–µ—Ä–∞ –æ–±—ë—Ä–Ω—É—Ç—ã –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä—É &lt;code&gt;CircularBuffer&lt;/code&gt;:&lt;/p&gt;
&lt;p&gt;&lt;em&gt;circular_buffer.h&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;typedef&lt;/span&gt; &lt;span class="k"&gt;struct&lt;/span&gt; &lt;span class="n"&gt;CircularBuffer&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;unsigned&lt;/span&gt; &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="n"&gt;bytes&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;long&lt;/span&gt;&lt;span class="p"&gt;))];&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="n"&gt;CircularBuffer&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;shift_circular&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;char&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;circular_add_1&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;CircularBuffer&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;circular_add_0&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;CircularBuffer&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;circular_print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;CircularBuffer&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;em&gt;circular_buffer.c&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;circular_buffer.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;stdio.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;shift_circular&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;char&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;rxbuf&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt; &lt;span class="kt"&gt;unsigned&lt;/span&gt; &lt;span class="kt"&gt;long&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;rxbuf&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&amp;lt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; 
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rxbuf&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;11&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="mh"&gt;0x80&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;rxbuf&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;|=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; 
    &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt; &lt;span class="kt"&gt;unsigned&lt;/span&gt; &lt;span class="kt"&gt;long&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;rxbuf&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&amp;lt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; 
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rxbuf&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="mh"&gt;0x80&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;rxbuf&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;|=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; 
    &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt; &lt;span class="kt"&gt;unsigned&lt;/span&gt; &lt;span class="kt"&gt;long&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;rxbuf&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&amp;lt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; 
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rxbuf&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="mh"&gt;0x80&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;rxbuf&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;|=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; 
    &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt; &lt;span class="kt"&gt;unsigned&lt;/span&gt; &lt;span class="kt"&gt;long&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;rxbuf&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&amp;lt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; 
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;circular_add_0&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;CircularBuffer&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;circular_buffer&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;shift_circular&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;circular_buffer&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;bytes&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt; 
    &lt;span class="n"&gt;circular_buffer&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;bytes&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;=&lt;/span&gt; &lt;span class="mh"&gt;0xFE&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;circular_add_1&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;CircularBuffer&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;circular_buffer&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;shift_circular&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;circular_buffer&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;bytes&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt; 
    &lt;span class="n"&gt;circular_buffer&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;bytes&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;|=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;circular_print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;CircularBuffer&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;circular_buffer&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;circular_buffer&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt; 
    &lt;span class="k"&gt;while&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; 
        &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;%.2x&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;circular_buffer&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;bytes&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;]);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;em&gt;usage.c&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="n"&gt;CircularBuffer&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="cm"&gt;/* a.bytes[0] = 42; –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –ø—Ä–æ–≥–ª–æ—Ç–∏—Ç, –Ω–µ –ø–æ —Ñ–µ–Ω—à—É—é :( */&lt;/span&gt;
&lt;span class="n"&gt;circular_add_1&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="n"&gt;circular_add_0&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="n"&gt;circular_print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ &lt;code&gt;circular_buffer&lt;/code&gt; –æ–ø–∏—Å–∞–Ω–∞ –≤ &lt;em&gt;circular_buffer.h&lt;/em&gt;, –∞ –∑–Ω–∞—á–∏—Ç –≤–∏–¥–Ω–∞ –≤–µ–∑–¥–µ –≥–¥–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è —ç—Ç–æ—Ç –∑–∞–≥–æ–ª–æ–≤–æ—á–Ω—ã–π —Ñ–∞–π–ª. –ü–æ–±–æ—Ä–æ—Ç—å —ç—Ç–æ –º–æ–∂–Ω–æ —Å –ø–æ–º–æ—â—å—é —Ç.–Ω. &lt;strong&gt;–Ω–µ–∑–∞–≤–µ—Ä—à—ë–Ω–Ω–æ–≥–æ —Ç–∏–ø–∞ –¥–∞–Ω–Ω—ã—Ö&lt;/strong&gt; –∏ —Ñ–∞–±—Ä–∏–∫–∏:&lt;/p&gt;
&lt;p&gt;&lt;em&gt;circular_buffer.h&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;typedef&lt;/span&gt; &lt;span class="k"&gt;struct&lt;/span&gt; &lt;span class="n"&gt;CircularBuffer&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;CircularBufferPtr&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;shift_circular&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;char&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="n"&gt;CircularBufferPtr&lt;/span&gt; &lt;span class="nf"&gt;circular_create&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;circular_add_1&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;CircularBufferPtr&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;circular_add_0&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;CircularBufferPtr&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;circular_print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;CircularBufferPtr&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;em&gt;circular_buffer.c&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;circular_buffer.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;stdio.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;stdlib.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="k"&gt;struct&lt;/span&gt; &lt;span class="n"&gt;CircularBuffer&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;unsigned&lt;/span&gt; &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="n"&gt;bytes&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;long&lt;/span&gt;&lt;span class="p"&gt;))];&lt;/span&gt;
&lt;span class="p"&gt;};&lt;/span&gt;

&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;shift_circular&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;char&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;rxbuf&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt; &lt;span class="kt"&gt;unsigned&lt;/span&gt; &lt;span class="kt"&gt;long&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;rxbuf&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&amp;lt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; 
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rxbuf&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;11&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="mh"&gt;0x80&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;rxbuf&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;|=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; 
    &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt; &lt;span class="kt"&gt;unsigned&lt;/span&gt; &lt;span class="kt"&gt;long&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;rxbuf&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&amp;lt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; 
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rxbuf&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="mh"&gt;0x80&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;rxbuf&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;|=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; 
    &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt; &lt;span class="kt"&gt;unsigned&lt;/span&gt; &lt;span class="kt"&gt;long&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;rxbuf&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&amp;lt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; 
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rxbuf&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="mh"&gt;0x80&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;rxbuf&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;|=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; 
    &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt; &lt;span class="kt"&gt;unsigned&lt;/span&gt; &lt;span class="kt"&gt;long&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;rxbuf&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&amp;lt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; 
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="n"&gt;CircularBufferPtr&lt;/span&gt; &lt;span class="nf"&gt;circular_create&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;CircularBufferPtr&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;malloc&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;sizeof&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;circular_add_0&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;CircularBufferPtr&lt;/span&gt; &lt;span class="n"&gt;circular_buffer&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;shift_circular&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;circular_buffer&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;bytes&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;circular_buffer&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;bytes&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;=&lt;/span&gt; &lt;span class="mh"&gt;0xFE&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;circular_add_1&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;CircularBufferPtr&lt;/span&gt; &lt;span class="n"&gt;circular_buffer&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;shift_circular&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;circular_buffer&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;bytes&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;circular_buffer&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;bytes&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;|=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;circular_print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;CircularBufferPtr&lt;/span&gt; &lt;span class="n"&gt;circular_buffer&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;circular_buffer&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt; 
    &lt;span class="k"&gt;while&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; 
        &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;%.2x&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;circular_buffer&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;bytes&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;]);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;em&gt;usage.c&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="n"&gt;CircularBufferPtr&lt;/span&gt; &lt;span class="n"&gt;a&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;circular_create&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;circular_create&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="cm"&gt;/* a-&amp;gt;bytes[0] = 42; –æ—à–∏–±–∫–∞: –¥–æ—Å—Ç—É–ø –ø–æ —É–∫–∞–∑–∞—Ç–µ–ª—é –Ω–∞ –Ω–µ–ø–æ–ª–Ω—ã–π —Ç–∏–ø */&lt;/span&gt;
&lt;span class="n"&gt;circular_add_1&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="n"&gt;circular_print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="n"&gt;free&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;a&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="n"&gt;free&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ù–µ–∑–∞–≤–µ—Ä—à—ë–Ω–Ω—ã–π —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö –∏–Ω–æ–≥–¥–∞ –Ω–∞–∑—ã–≤–∞—é—Ç &lt;em&gt;–Ω–µ–ø–æ–ª–Ω—ã–º&lt;/em&gt;, –∞ –≤ –æ—Ä–∏–≥–∏–Ω–∞–ª–µ –Ω–∞ –∞–Ω–≥–ª. &lt;em&gt;incomplete type&lt;/em&gt;.&lt;/p&gt;</content><category term="–ü–∞—Ç—Ç–µ—Ä–Ω"></category><category term="–ò–¥–∏–æ–º–∞"></category></entry><entry><title>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–∞–Ω—á–µ—Å—Ç–µ—Ä—Å–∫–æ–≥–æ –∫–æ–¥–∞ –Ω–∞ –ø—Ä–∏–º–µ—Ä–µ</title><link href="http://proiot.ru/blog/posts/2012/10/07/ispolzovanie-manchesterskogo-koda-na-primere/" rel="alternate"></link><published>2012-10-07T00:00:00+03:00</published><updated>2012-10-07T00:00:00+03:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2012-10-07:/blog/posts/2012/10/07/ispolzovanie-manchesterskogo-koda-na-primere/</id><summary type="html">&lt;p&gt;–í &lt;a href="http://proiot.ru/blog/posts/2012/10/07/manchesterskii-kod-dlia-chainikov/"&gt;–ø—Ä–µ–¥—ã–¥—É—â–µ–º&lt;/a&gt; –ø–æ—Å—Ç–µ –±—ã–ª–∞ –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–∞ –ø–æ—á–≤–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å &lt;em&gt;–ú–∞–Ω—á–µ—Å—Ç–µ—Ä—Å–∫–∏–º –∫–æ–¥–æ–º&lt;/em&gt;. –¢–µ–ø–µ—Ä—å —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º —Ä–µ–∞–ª—å–Ω—ã–π –ø—Ä–∏–º–µ—Ä —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤ &lt;strong&gt;Microchip&lt;/strong&gt; - –æ–¥–∏–Ω –±—É–¥–µ—Ç –∫–æ–¥–∏—Ä–æ–≤–∞—Ç—å –∏ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ, –¥—Ä—É–≥–æ–π –ø—Ä–∏–Ω–∏–º–∞—Ç—å, –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞—Ç—å –∏ –≤—ã–≤–æ–¥–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ &lt;strong&gt;UART&lt;/strong&gt; - —Ç–µ—Ä–º–∏–Ω–∞–ª. –ü–æ—Å–∫–æ–ª—å–∫—É —ç—Ç–æ —Ç–µ—Å—Ç–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä, —Ç–æ —Å –≤—ã–±–æ—Ä–æ–º &lt;strong&gt;C&lt;/strong&gt; - –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞ –Ω–∏—á–µ–≥–æ –≤—ã–¥—É–º—ã–≤–∞—Ç—å –Ω–µ –±—É–¥–µ–º –∏ –≤–æ–∑—å–º—ë–º —Ç–æ ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;p&gt;–í &lt;a href="http://proiot.ru/blog/posts/2012/10/07/manchesterskii-kod-dlia-chainikov/"&gt;–ø—Ä–µ–¥—ã–¥—É—â–µ–º&lt;/a&gt; –ø–æ—Å—Ç–µ –±—ã–ª–∞ –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–∞ –ø–æ—á–≤–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å &lt;em&gt;–ú–∞–Ω—á–µ—Å—Ç–µ—Ä—Å–∫–∏–º –∫–æ–¥–æ–º&lt;/em&gt;. –¢–µ–ø–µ—Ä—å —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º —Ä–µ–∞–ª—å–Ω—ã–π –ø—Ä–∏–º–µ—Ä —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤ &lt;strong&gt;Microchip&lt;/strong&gt; - –æ–¥–∏–Ω –±—É–¥–µ—Ç –∫–æ–¥–∏—Ä–æ–≤–∞—Ç—å –∏ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ, –¥—Ä—É–≥–æ–π –ø—Ä–∏–Ω–∏–º–∞—Ç—å, –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞—Ç—å –∏ –≤—ã–≤–æ–¥–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤ &lt;strong&gt;UART&lt;/strong&gt; - —Ç–µ—Ä–º–∏–Ω–∞–ª. –ü–æ—Å–∫–æ–ª—å–∫—É —ç—Ç–æ —Ç–µ—Å—Ç–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä, —Ç–æ —Å –≤—ã–±–æ—Ä–æ–º &lt;strong&gt;C&lt;/strong&gt; - –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞ –Ω–∏—á–µ–≥–æ –≤—ã–¥—É–º—ã–≤–∞—Ç—å –Ω–µ –±—É–¥–µ–º –∏ –≤–æ–∑—å–º—ë–º —Ç–æ, —á—Ç–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–∞—ë—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å - –ø—Ä–æ–±–Ω—É—é –≤–µ—Ä—Å–∏—é &lt;strong&gt;mplabc18&lt;/strong&gt; (&lt;em&gt;mplabc18_v3.40_windows_eval.exe&lt;/em&gt;) –Ω–∞ 60 –¥–Ω–µ–π, —Å–∫–∞—á–∞—Ç—å –º–æ–∂–Ω–æ —Å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Å–∞–π—Ç–∞ —Å —Ä–æ–¥–Ω–æ–π —Å—Ä–µ–¥–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ &lt;strong&gt;MPLAB_IDE&lt;/strong&gt; (&lt;em&gt;v8_70&lt;/em&gt;).&lt;/p&gt;
&lt;p&gt;–ö–∞–∫ –∏ –≤ –ø—Ä–æ—à–ª—ã–π —Ä–∞–∑ –Ω–∞—á–Ω—ë–º —Å –ø—Ä–æ—Å—Ç–æ–≥–æ - —Ä–µ–∞–ª–∏–∑—É–µ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ, –∫–æ—Ç–æ—Ä–æ–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤—ã–≤–∞–µ—Ç –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –≤ &lt;em&gt;–ú–∞–Ω—á–µ—Å—Ç–µ—Ä—Å–∫–∏–π –ö–æ–¥&lt;/em&gt; –∏ –ø–µ—Ä–µ–¥–∞—ë—Ç –∏—Ö. –ü—Ä–µ–∂–¥–µ –≤—Å–µ–≥–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –ø—Ä–æ–µ–∫—Ç –≤ &lt;strong&gt;MPLAB&lt;/strong&gt;, –º–∞—Å—Ç–µ—Ä –ø–æ–ø—Ä–æ—Å–∏—Ç —É–∫–∞–∑–∞—Ç—å –º–æ–¥–µ–ª—å –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ - —Ç—É—Ç –∫–∞–∫–∏—Ö-–ª–∏–±–æ –æ—Å–æ–±—ã—Ö —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –Ω–µ—Ç, –ø–æ—ç—Ç–æ–º—É –º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å —Å–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π, –Ω–∞–ø—Ä–∏–º–µ—Ä &lt;strong&gt;PIC18F1230&lt;/strong&gt;. –í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –¥–æ–ª–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å—Å—è —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ —ç—Ç–æ–≥–æ:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;p18cxxx.h&amp;gt; &lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;timers.h&amp;gt; &lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;../../../../src/tx/Man_Encode.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;(){&lt;/span&gt; 
    &lt;span class="kt"&gt;unsigned&lt;/span&gt; &lt;span class="kt"&gt;short&lt;/span&gt; &lt;span class="kt"&gt;long&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="n"&gt;PORTBbits&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;RB0&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; 
    &lt;span class="n"&gt;TRISB&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; 
    &lt;span class="n"&gt;OpenTimer0&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;TIMER_INT_ON&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;T0_8BIT&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;T0_SOURCE_INT&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;T0_PS_1_8&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="p"&gt;(;;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

        &lt;span class="cm"&gt;/* &amp;#39;n&amp;#39; =&amp;gt; 01101110b, MSB = 0 see tests =&amp;gt; Man_Decode.cpp */&lt;/span&gt;

        &lt;span class="n"&gt;On_Man_Encode_One&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;  &lt;span class="c1"&gt;// Clay balance (1 - 1 = 0) &lt;/span&gt;
        &lt;span class="n"&gt;On_Man_Encode_Zero&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt; &lt;span class="c1"&gt;// Sync balance (2 - 2 = 0) &lt;/span&gt;
        &lt;span class="n"&gt;On_Man_Encode_Zero&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;  
        &lt;span class="n"&gt;On_Man_Encode_One&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;  &lt;span class="c1"&gt;// Sync &lt;/span&gt;
        &lt;span class="n"&gt;On_Man_Encode_One&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt; 
        &lt;span class="n"&gt;On_Man_Encode_Zero&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt; &lt;span class="c1"&gt;// Clay&lt;/span&gt;

        &lt;span class="n"&gt;Man_Encode&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;n&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt; 
        &lt;span class="n"&gt;Man_Encode&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;o&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt; 
        &lt;span class="n"&gt;Man_Encode&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;n&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt; 
        &lt;span class="n"&gt;Man_Encode&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;g&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt; 
        &lt;span class="n"&gt;Man_Encode&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;r&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt; 
        &lt;span class="n"&gt;Man_Encode&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;e&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt; 
        &lt;span class="n"&gt;Man_Encode&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;e&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt; 
        &lt;span class="n"&gt;Man_Encode&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;d&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt; 
        &lt;span class="n"&gt;Man_Encode&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;y&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt; 
        &lt;span class="n"&gt;Man_Encode&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;.&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt; 
        &lt;span class="n"&gt;Man_Encode&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;r&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt; 
        &lt;span class="n"&gt;Man_Encode&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;u&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt; 
        &lt;span class="n"&gt;Man_Encode&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;\r&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt; 
        &lt;span class="n"&gt;Man_Encode&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sc"&gt;&amp;#39;\n&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

        &lt;span class="n"&gt;On_Man_Encode_Zero&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt; &lt;span class="cm"&gt;/* Tx off */&lt;/span&gt;

        &lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;150000&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt; 
    &lt;span class="p"&gt;}&lt;/span&gt; 
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;On_Man_Encode_One&lt;/span&gt;&lt;span class="p"&gt;(){&lt;/span&gt; 
    &lt;span class="k"&gt;while&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="n"&gt;INTCONbits&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;TMR0IF&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt; 
    &lt;span class="n"&gt;TMR0L&lt;/span&gt; &lt;span class="o"&gt;-=&lt;/span&gt; &lt;span class="mi"&gt;104&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="c1"&gt;// 4Mhz/4/8/1200bp/s = 104 &lt;/span&gt;
    &lt;span class="n"&gt;INTCONbits&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;TMR0IF&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; 
    &lt;span class="n"&gt;PORTBbits&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;RB0&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; 
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;On_Man_Encode_Zero&lt;/span&gt;&lt;span class="p"&gt;(){&lt;/span&gt; 
    &lt;span class="k"&gt;while&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="n"&gt;INTCONbits&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;TMR0IF&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt; 
    &lt;span class="n"&gt;TMR0L&lt;/span&gt; &lt;span class="o"&gt;-=&lt;/span&gt; &lt;span class="mi"&gt;104&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="c1"&gt;// 4Mhz/4/8/1200bp/s = 104 &lt;/span&gt;
    &lt;span class="n"&gt;INTCONbits&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;TMR0IF&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; 
    &lt;span class="n"&gt;PORTBbits&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;RB0&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; 
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="MPLab –°–∫—Ä–∏–Ω—à–æ—Ç" src="http://proiot.ru/blog/posts/2012/10/07/ispolzovanie-manchesterskogo-koda-na-primere/mplab_man_tx.png" style="width:100%; border:1px solid grey;"&gt;&lt;/p&gt;
&lt;p&gt;–†–µ–∑—É–ª—å—Ç–∞—Ç–æ–º —Å–±–æ—Ä–∫–∏ —è–≤–ª—è–µ—Ç—Å—è —Ñ–∞–π–ª —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ–º &lt;strong&gt;.hex&lt;/strong&gt;, –≤ –Ω–∞—Ä–æ–¥–µ –ø—Ä–æ—Å—Ç–æ &lt;em&gt;—Ö–µ–∫—Å&lt;/em&gt; - –ø—Ä–æ—à–∏–≤–∫–∞, –∫–æ—Ç–æ—Ä—É—é –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–ø–∏—Å–∞—Ç—å –≤ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä —Å –ø–æ–º–æ—â—å—é —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–≥–æ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è (–ø—Ä–æ–≥—Ä–∞–º–º–∞—Ç–æ—Ä–∞). –ü–æ—Å–∫–æ–ª—å–∫—É –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ, –Ω–∞–≤–µ—Ä–Ω–æ, —É –í–∞—Å –Ω–µ—Ç, –º–æ–∂–Ω–æ –∑–∞–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω—É—é —Å—Ä–µ–¥—É, –∫–æ—Ç–æ—Ä–∞—è —É–º–µ–µ—Ç —ç–º—É–ª–∏—Ä–æ–≤–∞—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏–µ —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã—Ö —Å—Ö–µ–º - &lt;strong&gt;Proteus VSM&lt;/strong&gt; (v 7.9sp1). –ö–∞–∫ –≤–∏–¥–Ω–æ –∏–∑ —Ä–∏—Å—É–Ω–∫–∞ –Ω–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–º –æ—Å—Ü–∏–ª–ª–æ–≥—Ä–∞—Ñ–µ –≤—Ä–µ–º—è –ª–æ–≥–∏—á–µ—Å–∫–æ–π 1 —á—É—Ç—å –±–æ–ª—å—à–µ 4 –¥–µ–ª–µ–Ω–∏–π –ø—Ä–∏ —à–∞–≥–µ 0.2 –º—Å. –ü—Ä–∏ —Å–∫–æ—Ä–æ—Å—Ç–∏ 1200 –±–∏—Ç/—Å 1000 –º—Å / 1200 = 0,83 –º—Å —ç—Ç–æ –ø–æ—Ö–æ–∂–µ –Ω–∞ –ø—Ä–∞–≤–¥—É.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Proteus Sim –°–∫—Ä–∏–Ω—à–æ—Ç" src="http://proiot.ru/blog/posts/2012/10/07/ispolzovanie-manchesterskogo-koda-na-primere/proteus_tx_simulation.png" style="width:100%; border:1px solid grey;"&gt;&lt;/p&gt;
&lt;p&gt;–¢–µ–ø–µ—Ä—å —Ä–µ–∞–ª–∏–∑—É–µ–º –ø—Ä–∏—ë–º–Ω–∏–∫, –∫–æ—Ç–æ—Ä—ã–π –±—É–¥–µ—Ç –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –Ω–∞ –≤—Ö–æ–¥–µ (–≤—ã–≤–æ–¥ &lt;strong&gt;RB0&lt;/strong&gt;), –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞—Ç—å —Å–∏–≥–Ω–∞–ª –∏–∑ &lt;em&gt;–ú–∞–Ω—á–µ—Å—Ç–µ—Ä—Å–∫–æ–≥–æ –ö–æ–¥–∞&lt;/em&gt; –≤ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –∏ –ø—Ä–∏–Ω–∏–º–∞—Ç—å —Ä–µ—à–µ–Ω–∏–µ –æ —Ç–æ–º, —á—Ç–æ –ø–µ—Ä–µ–¥–∞—á–∞ –ø–æ–ª–µ–∑–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∑–∞–≤–µ—Ä—à–µ–Ω–∞. –°–∞–º—ã–π –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ –≤ &lt;strong&gt;Proteus VSM&lt;/strong&gt; - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–π &lt;strong&gt;UART&lt;/strong&gt; - —Ç–µ—Ä–º–∏–Ω–∞–ª.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;p18cxxx.h&amp;gt; &lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;timers.h&amp;gt; &lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;usart.h&amp;gt; &lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;stdio.h&amp;gt;  &lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;../../../../src/rx/Man_Decode.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="n"&gt;rxbuf&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;long&lt;/span&gt;&lt;span class="p"&gt;))];&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;printrxbuf&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; 
    &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rxbuf&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt; 
    &lt;span class="k"&gt;while&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; 
        &lt;span class="n"&gt;_usart_putc&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rxbuf&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;]);&lt;/span&gt; 
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="nf"&gt;calcperiods&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; 
    &lt;span class="kt"&gt;unsigned&lt;/span&gt; &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="n"&gt;time&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;TMR0L&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; 
    &lt;span class="n"&gt;TMR0L&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="cm"&gt;/* 8Mhz/4/32/1200(bp/s) = 52 */&lt;/span&gt;

    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;time&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;52&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; 
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;time&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;52&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; 
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;(){&lt;/span&gt; 
    &lt;span class="n"&gt;OpenTimer0&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;TIMER_INT_OFF&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;T0_8BIT&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;T0_SOURCE_INT&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;T0_PS_1_32&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt; 
    &lt;span class="n"&gt;OpenUSART&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;USART_TX_INT_OFF&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;USART_RX_INT_OFF&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; 
        &lt;span class="n"&gt;USART_ASYNCH_MODE&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;USART_EIGHT_BIT&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; 
        &lt;span class="n"&gt;USART_CONT_RX&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;USART_BRGH_HIGH&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;12&lt;/span&gt;  &lt;span class="p"&gt;);&lt;/span&gt; &lt;span class="c1"&gt;// 38400 b/s&lt;/span&gt;

    &lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="p"&gt;(;;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; 
        &lt;span class="n"&gt;memset&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rxbuf&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rxbuf&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt; 
        &lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="p"&gt;(;;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; 
            &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="n"&gt;ds_B&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rxbuf&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="sc"&gt;&amp;#39;\r&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;rxbuf&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="sc"&gt;&amp;#39;\n&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; 
                &lt;span class="n"&gt;printrxbuf&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt; 
                &lt;span class="k"&gt;break&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; 
            &lt;span class="p"&gt;}&lt;/span&gt;

            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;PORTBbits&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;RB0&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; 
                &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;ds_B&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;continue&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; 
                &lt;span class="n"&gt;ds_B&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; 
                &lt;span class="n"&gt;Man_Decode_Stable_Zero&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;calcperiods&lt;/span&gt;&lt;span class="p"&gt;());&lt;/span&gt; 
            &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; 
                &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="n"&gt;ds_B&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;continue&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; 
                &lt;span class="n"&gt;ds_B&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; 
                &lt;span class="n"&gt;Man_Decode_Stable_One&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;calcperiods&lt;/span&gt;&lt;span class="p"&gt;());&lt;/span&gt; 
            &lt;span class="p"&gt;}&lt;/span&gt; 
        &lt;span class="p"&gt;}&lt;/span&gt; 
    &lt;span class="p"&gt;}&lt;/span&gt; 
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;shiftrxbuf&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; 
    &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt; &lt;span class="kt"&gt;unsigned&lt;/span&gt; &lt;span class="kt"&gt;long&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;rxbuf&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&amp;lt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; 
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rxbuf&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;11&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="mh"&gt;0x80&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;rxbuf&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;12&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;|=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; 
    &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt; &lt;span class="kt"&gt;unsigned&lt;/span&gt; &lt;span class="kt"&gt;long&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;rxbuf&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&amp;lt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; 
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rxbuf&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;7&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="mh"&gt;0x80&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;rxbuf&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;|=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; 
    &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt; &lt;span class="kt"&gt;unsigned&lt;/span&gt; &lt;span class="kt"&gt;long&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;rxbuf&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&amp;lt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; 
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;rxbuf&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="mh"&gt;0x80&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="n"&gt;rxbuf&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;|=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; 
    &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt; &lt;span class="kt"&gt;unsigned&lt;/span&gt; &lt;span class="kt"&gt;long&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;rxbuf&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&amp;lt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; 
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;On_Man_Decode_Add_0&lt;/span&gt;&lt;span class="p"&gt;(){&lt;/span&gt; 
    &lt;span class="n"&gt;shiftrxbuf&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt; 
    &lt;span class="n"&gt;rxbuf&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;=&lt;/span&gt; &lt;span class="mh"&gt;0xFE&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; 
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;On_Man_Decode_Add_1&lt;/span&gt;&lt;span class="p"&gt;(){&lt;/span&gt; 
    &lt;span class="n"&gt;shiftrxbuf&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt; 
    &lt;span class="n"&gt;rxbuf&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;|=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; 
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="MPLab –°–∫—Ä–∏–Ω—à–æ—Ç" src="http://proiot.ru/blog/posts/2012/10/07/ispolzovanie-manchesterskogo-koda-na-primere/mplab_man_rx.png" style="width:100%; border:1px solid grey;"&gt;&lt;/p&gt;
&lt;p&gt;–ö–∞–∫ –≤–∏–¥–Ω–æ –∏–∑ –∫–æ–¥–∞, –ø—Ä–∏–∑–Ω–∞–∫–æ–º –æ–∫–æ–Ω—á–∞–Ω–∏—è –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö –≤ –¥–∞–Ω–Ω–æ–º –ø—Ä–∏–º–µ—Ä–µ —è–≤–ª—è–µ—Ç—Å—è –∫–æ–º–±–∏–Ω–∞—Ü–∏—è —Å–∏–º–≤–æ–ª–æ–≤ &lt;code&gt;'\r'&lt;/code&gt; –∏ &lt;code&gt;'\n'&lt;/code&gt;. –≠—Ç–æ –æ—á–µ–Ω—å –ø—Ä–æ—Å—Ç–æ–µ —Ä–µ—à–µ–Ω–∏–µ, –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –≤ —Ä–µ–∞–ª—å–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö —ç—Ç–æ—Ç –º–µ—Ö–∞–Ω–∏–∑–º –Ω—É–∂–Ω–æ –¥–æ—Ä–∞–±–æ—Ç–∞—Ç—å - –∏–Ω–∞—á–µ –∏–Ω–æ–≥–¥–∞ –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∞—Ç—å –ª–æ–∂–Ω—ã–π —Å–∏–≥–Ω–∞–ª –æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö. –¢–∞–∫–∂–µ —Å—Ç–æ–∏—Ç –æ–±—Ä–∞—Ç–∏—Ç—å –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –±—É—Ñ–µ—Ä &lt;code&gt;rxbuf&lt;/code&gt;, –≤ –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–æ–≥—Ä–∞–º–º–∞ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Å –ø–æ–º–æ—â—å—é –º–µ—Ç–æ–¥–∞ &lt;code&gt;shiftrxbuf()&lt;/code&gt;. –ï—Ç–æ—Ç –º–µ—Ç–æ–¥ –¥–µ–ª–∞–µ—Ç –æ–ø–µ—Ä–∞—Ü–∏—é –ø–æ–±–∏—Ç–æ–≤–æ–≥–æ —Å–¥–≤–∏–≥–∞ –¥–ª—è –≤—Å–µ–≥–æ –±—É—Ñ–µ—Ä–∞, –∫–∞–∫ –µ—Å–ª–∏ –±—ã —ç—Ç–æ –±—ã–ª –ø—Ä–æ—Å—Ç–æ–π (–ø—Ä–∏–º–∏—Ç–∏–≤–Ω—ã–π) —Ç–∏–ø –¥–∞–Ω–Ω—ã—Ö —Ç–∏–ø–∞ &lt;code&gt;char&lt;/code&gt;, &lt;code&gt;long&lt;/code&gt; –∏ —Ç.–¥.  –ï—Å–ª–∏ –≤—Å—ë —ç—Ç–æ —Ç–µ–ø–µ—Ä—å –∑–∞–ø—É—Å—Ç–∏—Ç—å –≤ &lt;strong&gt;Proteus VSM&lt;/strong&gt;, —Ç–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –±—É–¥–µ—Ç –ø—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫–∏–º:&lt;/p&gt;
&lt;p&gt;&lt;img alt="Proteus Sim –°–∫—Ä–∏–Ω—à–æ—Ç" src="http://proiot.ru/blog/posts/2012/10/07/ispolzovanie-manchesterskogo-koda-na-primere/proteus_rx_simulation.png" style="width:100%; border:1px solid grey;"&gt;&lt;/p&gt;
&lt;p&gt;–í—Ä–æ–¥–µ –≤—Å—ë, –∏—Å—Ö–æ–¥–Ω–∏–∫–∏ –Ω–∞ &lt;a href="https://github.com/mazko/Manchester-Code" rel="nofollow"&gt;GitHub&lt;/a&gt;.&lt;/p&gt;</content><category term="–ú–∞–Ω—á–µ—Å—Ç–µ—Ä—Å–∫–∏–π –∫–æ–¥"></category><category term="UART"></category></entry><entry><title>–ú–∞–Ω—á–µ—Å—Ç–µ—Ä—Å–∫–∏–π –∫–æ–¥ –¥–ª—è —á–∞–π–Ω–∏–∫–æ–≤</title><link href="http://proiot.ru/blog/posts/2012/10/07/manchesterskii-kod-dlia-chainikov/" rel="alternate"></link><published>2012-10-07T00:00:00+03:00</published><updated>2012-10-07T00:00:00+03:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2012-10-07:/blog/posts/2012/10/07/manchesterskii-kod-dlia-chainikov/</id><summary type="html">&lt;p&gt;&lt;em&gt;–ú–∞–Ω—á–µ—Å—Ç–µ—Ä—Å–∫–∏–π –ö–æ–¥&lt;/em&gt; - —ç—Ç–æ —Å–∞–º–æ—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—â–∏–π—Å—è –¥–≤–æ–∏—á–Ω—ã–π –∫–æ–¥ –±–µ–∑ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–π —Å–æ—Å—Ç–∞–≤–ª—è—é—â–µ–π, –≤ –∫–æ—Ç–æ—Ä–æ–º –∑–Ω–∞—á–µ–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º–æ–≥–æ –±–∏—Ç–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º —Å–º–µ–Ω—ã –ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ —É—Ä–æ–≤–Ω—è –≤ —Å–µ—Ä–µ–¥–∏–Ω–µ –æ–±—É—Å–ª–æ–≤–ª–µ–Ω–Ω–æ–≥–æ –∑–∞—Ä–∞–Ω–µ–µ –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞. –ü–æ—Å–∫–æ–ª—å–∫—É –ª–æ–≥–∏—á–µ—Å–∫–∏—Ö —É—Ä–æ–≤–Ω–µ–π —É —Å–∞–º–æ–π –º–∞–ª–µ–Ω—å–∫–æ–π –µ–¥–∏–Ω–∏—Ü—ã –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ (–±–∏—Ç) –Ω–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –∏–∑–≤–µ—Å—Ç–Ω–æ –≤—Å–µ–≥–æ –¥–≤–∞ (1 –∏ 0),  –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ —Ç—É—Ç –Ω–µ–º–Ω–æ–≥–æ: –ª–∏–±–æ —Å–º–µ–Ω–∞ 1 ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;em&gt;–ú–∞–Ω—á–µ—Å—Ç–µ—Ä—Å–∫–∏–π –ö–æ–¥&lt;/em&gt; - —ç—Ç–æ —Å–∞–º–æ—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É—é—â–∏–π—Å—è –¥–≤–æ–∏—á–Ω—ã–π –∫–æ–¥ –±–µ–∑ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–π —Å–æ—Å—Ç–∞–≤–ª—è—é—â–µ–π, –≤ –∫–æ—Ç–æ—Ä–æ–º –∑–Ω–∞—á–µ–Ω–∏–µ –∫–∞–∂–¥–æ–≥–æ –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º–æ–≥–æ –±–∏—Ç–∞ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º —Å–º–µ–Ω—ã –ª–æ–≥–∏—á–µ—Å–∫–æ–≥–æ —É—Ä–æ–≤–Ω—è –≤ —Å–µ—Ä–µ–¥–∏–Ω–µ –æ–±—É—Å–ª–æ–≤–ª–µ–Ω–Ω–æ–≥–æ –∑–∞—Ä–∞–Ω–µ–µ –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞. –ü–æ—Å–∫–æ–ª—å–∫—É –ª–æ–≥–∏—á–µ—Å–∫–∏—Ö —É—Ä–æ–≤–Ω–µ–π —É —Å–∞–º–æ–π –º–∞–ª–µ–Ω—å–∫–æ–π –µ–¥–∏–Ω–∏—Ü—ã –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ (–±–∏—Ç) –Ω–∞ –¥–∞–Ω–Ω—ã–π –º–æ–º–µ–Ω—Ç –∏–∑–≤–µ—Å—Ç–Ω–æ –≤—Å–µ–≥–æ –¥–≤–∞ (1 –∏ 0),  –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ —Ç—É—Ç –Ω–µ–º–Ω–æ–≥–æ: –ª–∏–±–æ —Å–º–µ–Ω–∞ 1 =&amp;gt; 0 –ª–∏–±–æ 0 =&amp;gt; 1. –°–æ–≥–ª–∞—Å–Ω–æ –æ–±—â–µ–ø—Ä–∏–Ω—è—Ç—ã–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º –¥–ª—è &lt;em&gt;–ú–∞–Ω—á–µ—Å—Ç–µ—Ä—Å–∫–æ–≥–æ –∫–æ–¥–∞&lt;/em&gt; –ø–µ—Ä–µ—Ö–æ–¥ –æ—Ç –Ω—É–ª—è –∫ –µ–¥–∏–Ω–∏—Ü–µ —Å—á–∏—Ç–∞–µ—Ç—Å—è 1, –∞ –µ—Å–ª–∏ –Ω–∞–æ–±–æ—Ä–æ—Ç, —Ç–æ 0. –ù–∞ —Å–∞–º–æ–º –¥–µ–ª–µ –ø–æ—Å–ª–µ–¥–Ω–µ–µ —É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ - —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ —Ñ–æ—Ä–º–∞–ª—å–Ω–æ—Å—Ç—å - –≤–æ–ø—Ä–æ—Å –≤ —Ç–æ–º, —Å –∫–∞–∫–æ–π —Å—Ç–æ—Ä–æ–Ω—ã –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å ;-) –ì–ª–∞–≤–Ω–æ–µ, —á—Ç–æ–±—ã –∏ –ø—Ä–∏—ë–º–Ω–∏–∫ –∏ –ø–µ—Ä–µ–¥–∞—Ç—á–∏–∫ —Å–º–æ—Ç—Ä–µ–ª–∏ –Ω–∞ –∂–∏–∑–Ω—å –æ–¥–∏–Ω–∞–∫–æ–≤–æ.&lt;/p&gt;
&lt;p&gt;&lt;img alt="–ö–æ–¥ –ú–∞–Ω—á–µ—Å—Ç–µ—Ä" src="http://proiot.ru/blog/posts/2012/10/07/manchesterskii-kod-dlia-chainikov/man_diagram.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–í–≤–µ–¥–∏—Ç–µ —á–∏—Å–ª–æ –∏ –Ω–∞–∂–º–∏—Ç–µ "&lt;strong&gt;Encode Manchester!&lt;/strong&gt;":&lt;/p&gt;
&lt;script type="text/javascript" src="http://proiot.ru/blog/posts/2012/10/07/manchesterskii-kod-dlia-chainikov/manchester.js"&gt; &lt;/script&gt;

&lt;p&gt;
&lt;input maxlength="25" size="10" id="manchester_query" value="0x623" style="text-align: right; padding:.3em;" type="text"/&gt;
&lt;button type="button" style="padding:.2em;" onclick="manchester_encode_and_print();"&gt;&lt;noscript&gt;&lt;span style="color:red;"&gt;–í–∫–ª—é—á–∏—Ç–µ JavaScript ! &lt;/span&gt;&lt;/noscript&gt;Encode Manchester!&lt;/button&gt;
&lt;/p&gt;

&lt;p id="manchester_result"&gt;
&lt;/p&gt;

&lt;p&gt;–¢–µ–ø–µ—Ä—å –¥–∞–≤–∞–π—Ç–µ –≤–Ω–∏–º–∞—Ç–µ–ª—å–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–∏–º –Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫—É –∏ –ø–æ–ø—Ä–æ–±—É–µ–º –ø—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏ –ø–µ—Ä–µ—á–∏—Å–ª–∏—Ç—å –æ—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –≤ &lt;em&gt;–ú–∞–Ω—á–µ—Å—Ç–µ—Ä—Å–∫–∏–π –ö–æ–¥&lt;/em&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;P–∞–∑–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç—Å—è –≤–¥–≤–æ–µ - —ç—Ç–æ –Ω–µ–≥–∞—Ç–∏–≤–Ω–æ —Å–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç–∏ –ø–µ—Ä–µ–¥–∞—á–∏&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;K–æ–ª–∏—á–µ—Å—Ç–≤–æ –ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –Ω—É–ª–µ–π –≤—Å–µ–≥–¥–∞ —Ä–∞–≤–Ω–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –µ–¥–∏–Ω–∏—Ü, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ —É —Ç–∞–∫–æ–≥–æ —Å–∏–≥–Ω–∞–ª–∞ –Ω–µ –±—É–¥–µ—Ç –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–π —Å–æ—Å—Ç–∞–≤–ª—è—é—â–µ–π - —ç—Ç–æ –∫—Ä–∞–π–Ω–µ –≤–∞–∂–Ω–æ –¥–ª—è —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∏—Ö —Ü–µ–ø–µ–π –∏ —Ä–∞–¥–∏–æ–≤–æ–ª–Ω&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;–ö–æ–º–±–∏–Ω–∞—Ü–∏—è –ª–æ–≥–∏—á–µ—Å–∫–∏—Ö —É—Ä–æ–≤–Ω–µ–π 11 –æ–¥–Ω–æ–∑–Ω–∞—á–Ω–æ –≥–æ–≤–æ—Ä–∏—Ç –æ –ø–æ—Å–ª–µ–¥–Ω–µ–º –ø—Ä–∏–Ω—è—Ç–æ–º 0, –∞ –∫–æ–º–±–∏–Ω–∞—Ü–∏—è 00, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ, –≥–æ–≤–æ—Ä–∏—Ç –æ 1. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –ø–æ—Å–ª–µ –æ–¥–Ω–æ–π –∏–∑ –Ω–∏—Ö –ø—Ä–∏—ë–º–Ω–∏–∫ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;–ù–µ –º–æ–∂–µ—Ç –∏–¥—Ç–∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –±–æ–ª–µ–µ –¥–≤—É—Ö –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö –ª–æ–≥–∏—á–µ—Å–∫–∏—Ö —É—Ä–æ–≤–Ω–µ–π, —Ç.–µ. –∫–æ–º–±–∏–Ω–∞—Ü–∏—è —Ç–∏–ø–∞ 111 –∏–ª–∏ 000 –Ω–µ–≤–æ–∑–º–æ–∂–Ω–∞&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;–í –Ω–∞—á–∞–ª–µ –¥–∞–Ω–Ω—ã—Ö –∏ –≤ –∫–æ–Ω—Ü–µ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –¥–≤—É—Ö –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö –ª–æ–≥–∏—á–µ—Å–∫–∏—Ö —É—Ä–æ–≤–Ω–µ–π - —Ç–æ–ª—å–∫–æ 10 –∏–ª–∏ 01&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;–°–Ω–∞—á–∞–ª–∞ –ø–∏—à–µ–º —Ç–µ—Å—Ç&lt;/h3&gt;
&lt;p&gt;–û –ø–æ–ª—å–∑–µ —Ç–µ—Å—Ç–æ–≤ –º–æ–∂–Ω–æ –ø–æ—á–∏—Ç–∞—Ç—å &lt;a href="https://ru.wikipedia.org/wiki/%D0%9C%D0%BE%D0%B4%D1%83%D0%BB%D1%8C%D0%BD%D0%BE%D0%B5_%D1%82%D0%B5%D1%81%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5" rel="nofollow"&gt;—Ç—É—Ç&lt;/a&gt;. –í –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ —Ä–µ—à–µ–Ω–∏—è —Ç–µ–∫—É—â–µ–π –∑–∞–¥–∞—á–∏ –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è —Ç–µ—Ö–Ω–∏–∫–∞ &lt;strong&gt;Mock&lt;/strong&gt;-–æ–±—ä–µ–∫—Ç–æ–≤, –ø–æ—ç—Ç–æ–º—É –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–≤—è–∑–∫–∞ &lt;strong&gt;gtest&lt;/strong&gt; (&lt;a href="http://code.google.com/p/googletest-translations/w/list" rel="nofollow"&gt;Google Test&lt;/a&gt;) + &lt;strong&gt;gmock&lt;/strong&gt; (&lt;a href="http://code.google.com/p/googletest-translations/w/list" rel="nofollow"&gt;Google Mocking Framework&lt;/a&gt;). –í—Å—ë —ç—Ç–æ –¥–æ–±—Ä–æ –ø–æ—Å—Ç–∞–≤–ª—è—é—Ç—Å—è –≤ –∏—Å—Ö–æ–¥–Ω–∏–∫–∞—Ö, –ø–æ—ç—Ç–æ–º—É –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ –∫ —Å–∏—Å—Ç–µ–º–µ - —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π &lt;strong&gt;C&lt;/strong&gt; / &lt;strong&gt;C++&lt;/strong&gt; –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä, –Ω–∞–ø—Ä–∏–º–µ—Ä &lt;strong&gt;gcc g++&lt;/strong&gt; –¥–ª—è &lt;strong&gt;Linux&lt;/strong&gt; –∏–ª–∏ &lt;strong&gt;Visual Studio C++&lt;/strong&gt; –¥–ª—è &lt;strong&gt;Windows&lt;/strong&gt;. –¢–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç –ø—Ä–æ—Å—Ç–æ–µ –∫–æ–Ω—Å–æ–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –±—É–¥–µ—Ç —Å–æ–±–∏—Ä–∞—Ç—å—Å—è –≤–º–µ—Å—Ç–µ —Å —Ç–µ—Å—Ç–∞–º–∏ –∏ –∑–∞–ø—É—Å–∫–∞—Ç—å –∏—Ö:&lt;/p&gt;
&lt;p&gt;&lt;em&gt;/manchester/tests/gtest/main.cpp&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;gtest/gtest.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;argc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;char&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;argv&lt;/span&gt;&lt;span class="p"&gt;[])&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;testing&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;InitGoogleTest&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;argc&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;argv&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;RUN_ALL_TESTS&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–¢–µ–ø–µ—Ä—å —Å–∞–º–∏ —Ç–µ—Å—Ç—ã. –ë–æ–ª–µ–µ –ø—Ä–æ—Å—Ç–æ–π –∑–∞–¥–∞—á–µ–π —è–≤–ª—è–µ—Ç—Å—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ &lt;em&gt;–ú–∞–Ω—á–µ—Å—Ç–µ—Ä—Å–∫–∏–π –ö–æ–¥&lt;/em&gt; (&lt;strong&gt;encode&lt;/strong&gt;), –ø–æ—ç—Ç–æ–º—É —Å –Ω–µ—ë, –ø–æ–∂–∞–ª—É–π, –∏ –Ω–∞—á–Ω—ë–º:&lt;/p&gt;
&lt;p&gt;&lt;em&gt;/manchester/tests/gtest/src/manchester/Man_Encode.cpp&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;gtest/gtest.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;gmock/gmock.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="k"&gt;extern&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;C&amp;quot;&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;../../../../manchester/src/tx/Man_Encode.c&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;IManEncode&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;public&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;virtual&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="n"&gt;Man_Encode_One&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;virtual&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;Man_Encode_Zero&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;};&lt;/span&gt;

&lt;span class="cm"&gt;/* Mock implementation */&lt;/span&gt;

&lt;span class="n"&gt;ACTION_P2&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Act_Inc_1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;T&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;V&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;ON_CALL&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;T&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Man_Encode_One&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;
        &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;WillByDefault&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Act_Inc_1&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;T&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;testing&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;ByRef&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="n"&gt;V&lt;/span&gt;&lt;span class="p"&gt;)));&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="n"&gt;ACTION_P2&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Act_Inc_0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;T&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;V&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;ON_CALL&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;T&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Man_Encode_Zero&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;
        &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;WillByDefault&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Act_Inc_0&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;T&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;testing&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;ByRef&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="n"&gt;V&lt;/span&gt;&lt;span class="p"&gt;)));&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;ManEncodeMock&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;public&lt;/span&gt; &lt;span class="n"&gt;IManEncode&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;public&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;MOCK_METHOD0&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Man_Encode_One&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="p"&gt;());&lt;/span&gt;
        &lt;span class="n"&gt;MOCK_METHOD0&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Man_Encode_Zero&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="p"&gt;());&lt;/span&gt;

        &lt;span class="n"&gt;ManEncodeMock&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;_total_1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;_total_0&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
            &lt;span class="n"&gt;ON_CALL&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Man_Encode_One&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;
                &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;WillByDefault&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Act_Inc_1&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;testing&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;ByRef&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;_total_1&lt;/span&gt;&lt;span class="p"&gt;)));&lt;/span&gt;
            &lt;span class="n"&gt;ON_CALL&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Man_Encode_Zero&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;
                &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;WillByDefault&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Act_Inc_0&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;testing&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;ByRef&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;_total_0&lt;/span&gt;&lt;span class="p"&gt;)));&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;

        &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="n"&gt;Expect_Total_1_And_0_Eq&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;total&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;EXPECT_EQ&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;_total_1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;total&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
            &lt;span class="n"&gt;EXPECT_EQ&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;_total_0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;total&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="k"&gt;private&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
        &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;_total_1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;_total_0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;};&lt;/span&gt;

&lt;span class="cm"&gt;/* Fixture class for each test */&lt;/span&gt;

&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;ManEncodeTest_F&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;public&lt;/span&gt; &lt;span class="n"&gt;testing&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;Test&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;public&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="n"&gt;ManEncodeMock&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;getMock&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;_ManEncodePtr&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="k"&gt;protected&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;virtual&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="n"&gt;SetUp&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;_ManEncodePtr&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;_ManEncode&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="k"&gt;private&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;ManEncodeMock&lt;/span&gt; &lt;span class="n"&gt;_ManEncode&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="n"&gt;ManEncodeMock&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;_ManEncodePtr&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;    
&lt;span class="p"&gt;};&lt;/span&gt;

&lt;span class="n"&gt;ManEncodeMock&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;ManEncodeTest_F&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;_ManEncodePtr&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="cm"&gt;/* Man_Encode externs (events) */&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;On_Man_Encode_One&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;ManEncodeTest_F&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;getMock&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;Man_Encode_One&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;On_Man_Encode_Zero&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;ManEncodeTest_F&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;getMock&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;Man_Encode_Zero&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="cm"&gt;/* 0 =&amp;gt; 1010101010101010(manchester) */&lt;/span&gt;

&lt;span class="n"&gt;TEST_F&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ManEncodeTest_F&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Send_0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;testing&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;InSequence&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;EXPECT_CALL&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;getMock&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;Man_Encode_One&lt;/span&gt;&lt;span class="p"&gt;());&lt;/span&gt; &lt;span class="c1"&gt;// MSB&lt;/span&gt;
        &lt;span class="n"&gt;EXPECT_CALL&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;getMock&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;Man_Encode_Zero&lt;/span&gt;&lt;span class="p"&gt;());&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="n"&gt;Man_Encode&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="n"&gt;getMock&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;Expect_Total_1_And_0_Eq&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="cm"&gt;/* 255(dec) =&amp;gt; 11111111(bin) =&amp;gt; 0101010101010101(manchester) */&lt;/span&gt;

&lt;span class="n"&gt;TEST_F&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ManEncodeTest_F&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Send_255&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;testing&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;InSequence&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;EXPECT_CALL&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;getMock&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;Man_Encode_Zero&lt;/span&gt;&lt;span class="p"&gt;());&lt;/span&gt; &lt;span class="c1"&gt;// MSB&lt;/span&gt;
        &lt;span class="n"&gt;EXPECT_CALL&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;getMock&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;Man_Encode_One&lt;/span&gt;&lt;span class="p"&gt;());&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="n"&gt;Man_Encode&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;255&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="n"&gt;getMock&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;Expect_Total_1_And_0_Eq&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="cm"&gt;/* 170(dec) =&amp;gt; 10101010(bin) =&amp;gt; 0110011001100110(manchester) */&lt;/span&gt;

&lt;span class="n"&gt;TEST_F&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ManEncodeTest_F&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Send_170&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;testing&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;InSequence&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;EXPECT_CALL&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;getMock&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;Man_Encode_Zero&lt;/span&gt;&lt;span class="p"&gt;());&lt;/span&gt; &lt;span class="c1"&gt;// MSB&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;EXPECT_CALL&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;getMock&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;Man_Encode_One&lt;/span&gt;&lt;span class="p"&gt;()).&lt;/span&gt;&lt;span class="n"&gt;Times&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;EXPECT_CALL&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;getMock&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;Man_Encode_Zero&lt;/span&gt;&lt;span class="p"&gt;()).&lt;/span&gt;&lt;span class="n"&gt;Times&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="n"&gt;EXPECT_CALL&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;getMock&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;Man_Encode_One&lt;/span&gt;&lt;span class="p"&gt;()).&lt;/span&gt;&lt;span class="n"&gt;Times&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;EXPECT_CALL&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;getMock&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;Man_Encode_Zero&lt;/span&gt;&lt;span class="p"&gt;());&lt;/span&gt;

    &lt;span class="n"&gt;Man_Encode&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;170&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="n"&gt;getMock&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;Expect_Total_1_And_0_Eq&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="cm"&gt;/* 85(dec) =&amp;gt; 01010101(bin) =&amp;gt; 1001100110011001(manchester) */&lt;/span&gt;

&lt;span class="n"&gt;TEST_F&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ManEncodeTest_F&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Send_85&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;testing&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;InSequence&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;EXPECT_CALL&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;getMock&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;Man_Encode_One&lt;/span&gt;&lt;span class="p"&gt;());&lt;/span&gt; &lt;span class="c1"&gt;// MSB&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;EXPECT_CALL&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;getMock&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;Man_Encode_Zero&lt;/span&gt;&lt;span class="p"&gt;()).&lt;/span&gt;&lt;span class="n"&gt;Times&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;EXPECT_CALL&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;getMock&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;Man_Encode_One&lt;/span&gt;&lt;span class="p"&gt;()).&lt;/span&gt;&lt;span class="n"&gt;Times&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="n"&gt;EXPECT_CALL&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;getMock&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;Man_Encode_Zero&lt;/span&gt;&lt;span class="p"&gt;()).&lt;/span&gt;&lt;span class="n"&gt;Times&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;EXPECT_CALL&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;getMock&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;Man_Encode_One&lt;/span&gt;&lt;span class="p"&gt;());&lt;/span&gt;

    &lt;span class="n"&gt;Man_Encode&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;85&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="n"&gt;getMock&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;Expect_Total_1_And_0_Eq&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="cm"&gt;/* 84(dec) =&amp;gt; 01010100(bin) =&amp;gt; 1001100110011010(manchester) */&lt;/span&gt;

&lt;span class="n"&gt;TEST_F&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ManEncodeTest_F&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Send_84&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;testing&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;InSequence&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;EXPECT_CALL&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;getMock&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;Man_Encode_One&lt;/span&gt;&lt;span class="p"&gt;());&lt;/span&gt; &lt;span class="c1"&gt;// MSB&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;EXPECT_CALL&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;getMock&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;Man_Encode_Zero&lt;/span&gt;&lt;span class="p"&gt;()).&lt;/span&gt;&lt;span class="n"&gt;Times&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;EXPECT_CALL&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;getMock&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;Man_Encode_One&lt;/span&gt;&lt;span class="p"&gt;()).&lt;/span&gt;&lt;span class="n"&gt;Times&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="n"&gt;EXPECT_CALL&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;getMock&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;Man_Encode_Zero&lt;/span&gt;&lt;span class="p"&gt;());&lt;/span&gt;
    &lt;span class="n"&gt;EXPECT_CALL&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;getMock&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;Man_Encode_One&lt;/span&gt;&lt;span class="p"&gt;());&lt;/span&gt;
    &lt;span class="n"&gt;EXPECT_CALL&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;getMock&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;Man_Encode_Zero&lt;/span&gt;&lt;span class="p"&gt;());&lt;/span&gt;

    &lt;span class="n"&gt;Man_Encode&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;84&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="n"&gt;getMock&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;Expect_Total_1_And_0_Eq&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–í—Å–µ —Ç–µ—Å—Ç—ã –ø–æ–º–µ—â–µ–Ω—ã –≤ –º–∞–∫—Ä–æ—Å &lt;code&gt;TEST_F()&lt;/code&gt;. –í –Ω–∞—á–∞–ª–µ —Ç–µ—Å—Ç–∞ —Å –ø–æ–º–æ—â—å—é &lt;code&gt;EXPECT_CALL()&lt;/code&gt; –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –æ–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ. –í –ø—Ä–æ—Ü–µ—Å—Å–µ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è &lt;em&gt;0 =&amp;gt; 1010101010101010&lt;/em&gt; –∏ –ø—Ä–∏ —É—Å–ª–æ–≤–∏–∏, —á—Ç–æ —Å—Ç–∞—Ä—à–∏–π –±–∏—Ç –∏–¥—ë—Ç –ø–µ—Ä–≤—ã–º (&lt;em&gt;MSB&lt;/em&gt;), –æ–∂–∏–¥–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π –≤—ã–∑–æ–≤ –º–µ—Ç–æ–¥–æ–≤ &lt;code&gt;On_Man_Encode_One()&lt;/code&gt;  –∏ &lt;code&gt;On_Man_Encode_Zero()&lt;/code&gt; –∏ —Ç–∞–∫ –≤–æ—Å–µ–º—å —Ä–∞–∑. –ü–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –æ–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –æ–ø–∏—Å–∞–Ω–æ, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–∑–≤–∞—Ç—å –ø—Ä–æ–≤–µ—Ä—è–µ–º—ã–π –º–µ—Ç–æ–¥ &lt;code&gt;Man_Encode()&lt;/code&gt;. –ï—Å–ª–∏ —Ä–µ–∞–ª—å–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç –æ–∂–∏–¥–∞–µ–º–æ–≥–æ, –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤ –±—É–¥–µ—Ç —Å–æ–æ–±—â–µ–Ω–æ –æ–± –æ—à–∏–±–∫–µ. –í –∫–æ–Ω—Ü–µ –∫–∞–∂–¥–æ–≥–æ —Ç–µ—Å—Ç–∞ —Ç–∞–∫–∂–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —É—Å–ª–æ–≤–∏—è, —á—Ç–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω—É–ª–µ–π —Ä–∞–≤–Ω–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤—É –µ–¥–∏–Ω–∏—Ü.&lt;/p&gt;
&lt;p&gt;–ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ &lt;em&gt;–ú–∞–Ω—á–µ—Å—Ç–µ—Ä—Å–∫–∏–π –ö–æ–¥&lt;/em&gt; –æ—á–µ–Ω—å –ª–µ–≥–∫–æ:&lt;/p&gt;
&lt;p&gt;&lt;em&gt;/manchester/src/tx/Man_Encode.c&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;Man_Encode.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="cm"&gt;/********************************************************************&lt;/span&gt;
&lt;span class="cm"&gt; *      Function Name:  Man_Encode                                  *&lt;/span&gt;
&lt;span class="cm"&gt; *      Return Value:   no                                          *&lt;/span&gt;
&lt;span class="cm"&gt; *      Parameters:     character to transmit                       *&lt;/span&gt;
&lt;span class="cm"&gt; *      Description:    Convert char to Manchester Code (2 chars)   *&lt;/span&gt;
&lt;span class="cm"&gt; *                      MSB is first to convert                     *&lt;/span&gt;
&lt;span class="cm"&gt; ********************************************************************/&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;Man_Encode&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;register&lt;/span&gt; &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="n"&gt;character&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;register&lt;/span&gt; &lt;span class="kt"&gt;unsigned&lt;/span&gt; &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="n"&gt;bitcount&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;bitcount&lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;character&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="mh"&gt;0x80&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;On_Man_Encode_Zero&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
            &lt;span class="n"&gt;On_Man_Encode_One&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;

        &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;On_Man_Encode_One&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
            &lt;span class="n"&gt;On_Man_Encode_Zero&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
        &lt;span class="n"&gt;character&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&amp;lt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –æ–±—Ä–∞—Ç–Ω–æ–π –∑–∞–¥–∞—á–∏ - –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ &lt;em&gt;–ú–∞–Ω—á–µ—Å—Ç–µ—Ä—Å–∫–æ–≥–æ –ö–æ–¥–∞&lt;/em&gt; –≤ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–ª–æ–∂–Ω–µ–µ. –ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å—Å—è —Å –ø—Ä–∏—ë–º–Ω–∏–∫–æ–º —Å–∏–∏–≥–Ω–∞–ª–∞. –í —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Ç–µ—Å—Ç–æ–≤ –Ω–∞—Å –æ—Å–æ–±–æ –Ω–µ –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç –∫–∞–∫ –∏–º–µ–Ω–Ω–æ –ø—Ä–∏—ë–º–Ω–∏–∫ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è –∏ –≤ –∫–∞–∫–æ–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –±—É–¥—É—Ç –≤—ã–∑–≤–∞–Ω—ã(–µ—Å–ª–∏ –≤–æ–æ–±—â–µ –±—É–¥—É—Ç) &lt;code&gt;On_Man_Decode_Add_1()&lt;/code&gt; –∏ &lt;code&gt;On_Man_Decode_Add_0()&lt;/code&gt; - –¥–ª—è —ç—Ç–æ–π —Ü–µ–ª–∏ –æ–±–æ–∑–Ω–∞—á–∏–º –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ –æ–∂–∏–¥–∞–Ω–∏—è –∫–∞–∫ &lt;code&gt;testing::AtMost(1)&lt;/code&gt;. –ü–æ—Å–ª–µ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ—Ü–µ—Å—Å –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è –º–æ–∂–Ω–æ —Ç–æ—á–Ω–æ —Å–ø—Ä–æ–≥–Ω–æ–∑–∏—Ä–æ–≤–∞—Ç—å –∏ –æ–ø–∏—Å–∞—Ç—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –æ–∂–∏–¥–∞–Ω–∏—è —Å –ø–æ–º–æ—â—å—é &lt;code&gt;EXPECT_CALL()&lt;/code&gt;. –¢–∞–∫–∂–µ –∫–∞–∫ –∏ –≤ –ø—Ä–µ–¥—ã–¥—É—â–µ–º —Å–ª—É—á–∞–µ –≤ –∫–æ–Ω—Ü–µ –∫–∞–∂–¥–æ–≥–æ —Ç–µ—Å—Ç–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–π —Å–æ—Å—Ç–∞–≤–ª—è—é—â–µ–π (–∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –Ω—É–ª–µ–π –∏ –µ–¥–∏–Ω–∏—Ü –¥–æ–ª–∂–Ω–æ —Å–æ–≤–ø–∞–¥–∞—Ç—å).&lt;/p&gt;
&lt;p&gt;&lt;em&gt;/manchester/tests/gtest/src/manchester/Man_Decode.cpp&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;gtest/gtest.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;lt;gmock/gmock.h&amp;gt;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="k"&gt;extern&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;C&amp;quot;&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;../../../../manchester/src/rx/Man_Decode.c&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;IManDecode&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;public&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;virtual&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="n"&gt;Man_Dec_Add_1&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;virtual&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;Man_Dec_Add_0&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;};&lt;/span&gt;

&lt;span class="cm"&gt;/* Mock implementation */&lt;/span&gt;

&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;ManDecodeMock&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;public&lt;/span&gt; &lt;span class="n"&gt;IManDecode&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;public&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;MOCK_METHOD0&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Man_Dec_Add_1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="p"&gt;());&lt;/span&gt;
        &lt;span class="n"&gt;MOCK_METHOD0&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Man_Dec_Add_0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="p"&gt;());&lt;/span&gt;
&lt;span class="p"&gt;};&lt;/span&gt;

&lt;span class="cm"&gt;/* Fixture class for each test */&lt;/span&gt;

&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;ManDecodeTest_F&lt;/span&gt; &lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="k"&gt;public&lt;/span&gt; &lt;span class="n"&gt;testing&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;Test&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;public&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="n"&gt;ManDecodeMock&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;getMock&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;_ManDecodePtr&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="k"&gt;protected&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;virtual&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="n"&gt;SetUp&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;_total_1&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;_total_0&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
            &lt;span class="n"&gt;_ManDecodePtr&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;_ManDecode&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;

        &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="n"&gt;Expect_Total_1_And_0_Eq&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;total&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;EXPECT_EQ&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;_total_1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;total&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
            &lt;span class="n"&gt;EXPECT_EQ&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;_total_0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;total&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;

        &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="n"&gt;Perform_Stable_Zero&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;unsigned&lt;/span&gt; &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="n"&gt;periods&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;_total_0&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="n"&gt;periods&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
            &lt;span class="n"&gt;Man_Decode_Stable_Zero&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;periods&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;

        &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="n"&gt;Perform_Stable_One&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;unsigned&lt;/span&gt; &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="n"&gt;periods&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;_total_1&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="n"&gt;periods&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
            &lt;span class="n"&gt;Man_Decode_Stable_One&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;periods&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="k"&gt;private&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;ManDecodeMock&lt;/span&gt; &lt;span class="n"&gt;_ManDecode&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="n"&gt;ManDecodeMock&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;_ManDecodePtr&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;_total_1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;_total_0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;};&lt;/span&gt;

&lt;span class="n"&gt;ManDecodeMock&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;ManDecodeTest_F&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;_ManDecodePtr&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="cm"&gt;/* Man_Decode externs (events) */&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;On_Man_Decode_Add_1&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;ManDecodeTest_F&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;getMock&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;Man_Dec_Add_1&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;On_Man_Decode_Add_0&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;ManDecodeTest_F&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;getMock&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;Man_Dec_Add_0&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="cm"&gt;/* Helpers for TEST_F */&lt;/span&gt;

&lt;span class="cp"&gt;#define EXPECT_MAN_SYNCH(x,y)                               \&lt;/span&gt;
&lt;span class="cp"&gt;    EXPECT_CALL(*getMock(), Man_Dec_Add_##x())              \&lt;/span&gt;
&lt;span class="cp"&gt;        .Times(testing::AtMost(1)); &lt;/span&gt;&lt;span class="cm"&gt;/* Clay? */&lt;/span&gt;&lt;span class="cp"&gt;             \&lt;/span&gt;
&lt;span class="cp"&gt;    EXPECT_CALL(*getMock(), Man_Dec_Add_##y())              \&lt;/span&gt;
&lt;span class="cp"&gt;        .Times(testing::AtMost(1)); &lt;/span&gt;&lt;span class="cm"&gt;/* Clay? */&lt;/span&gt;&lt;span class="cp"&gt;             \&lt;/span&gt;
&lt;span class="cp"&gt;    EXPECT_CALL(*getMock(), Man_Dec_Add_##x()); &lt;/span&gt;&lt;span class="cm"&gt;/* Sync  */&lt;/span&gt;&lt;span class="cp"&gt; \&lt;/span&gt;
&lt;span class="cp"&gt;    EXPECT_CALL(*getMock(), Man_Dec_Add_##y())  &lt;/span&gt;&lt;span class="cm"&gt;/* Sync  */&lt;/span&gt;&lt;span class="cp"&gt; \&lt;/span&gt;

&lt;span class="cp"&gt;#define PERFORM_MAN_SYNCH(x,y)                               \&lt;/span&gt;
&lt;span class="cp"&gt;    Perform_Stable_##x(1);  &lt;/span&gt;&lt;span class="cm"&gt;/* Clay balance (1 - 1 = 0) */&lt;/span&gt;&lt;span class="cp"&gt;   \&lt;/span&gt;
&lt;span class="cp"&gt;    Perform_Stable_##y(2);  &lt;/span&gt;&lt;span class="cm"&gt;/* Sync balance (2 - 2 = 0) */&lt;/span&gt;&lt;span class="cp"&gt;   \&lt;/span&gt;
&lt;span class="cp"&gt;    Perform_Stable_##x(2);  &lt;/span&gt;&lt;span class="cm"&gt;/* Sync */&lt;/span&gt;&lt;span class="cp"&gt;                       \&lt;/span&gt;
&lt;span class="cp"&gt;    Perform_Stable_##y(1)   &lt;/span&gt;&lt;span class="cm"&gt;/* Clay */&lt;/span&gt;&lt;span class="cp"&gt;                       \&lt;/span&gt;

&lt;span class="cm"&gt;/* 1010101010101010(manchester) =&amp;gt; 0 */&lt;/span&gt;

&lt;span class="n"&gt;TEST_F&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ManDecodeTest_F&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Decode_0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;testing&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;InSequence&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;EXPECT_MAN_SYNCH&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;EXPECT_CALL&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;getMock&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;Man_Dec_Add_0&lt;/span&gt;&lt;span class="p"&gt;()).&lt;/span&gt;&lt;span class="n"&gt;Times&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="n"&gt;PERFORM_MAN_SYNCH&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;One&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Zero&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;Perform_Stable_One&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;Perform_Stable_Zero&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="n"&gt;Expect_Total_1_And_0_Eq&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;11&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt; &lt;span class="c1"&gt;// Sync(3) + Byte(8)&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="cm"&gt;/* 0101010101010101(manchester) =&amp;gt; 11111111(bin) =&amp;gt; 255(dec) */&lt;/span&gt;

&lt;span class="n"&gt;TEST_F&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ManDecodeTest_F&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Decode_255&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;testing&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;InSequence&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;EXPECT_MAN_SYNCH&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;EXPECT_CALL&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;getMock&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;Man_Dec_Add_1&lt;/span&gt;&lt;span class="p"&gt;()).&lt;/span&gt;&lt;span class="n"&gt;Times&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="n"&gt;PERFORM_MAN_SYNCH&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Zero&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;One&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;Perform_Stable_Zero&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;Perform_Stable_One&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="n"&gt;Expect_Total_1_And_0_Eq&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;11&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt; &lt;span class="c1"&gt;// Sync(3) + Byte(8)&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="cm"&gt;/* 0110011001100110(manchester) =&amp;gt; 10101010(bin) =&amp;gt; 170(dec) */&lt;/span&gt;

&lt;span class="n"&gt;TEST_F&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ManDecodeTest_F&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Decode_170&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;testing&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;InSequence&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;EXPECT_MAN_SYNCH&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;EXPECT_CALL&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;getMock&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;Man_Dec_Add_1&lt;/span&gt;&lt;span class="p"&gt;());&lt;/span&gt;
        &lt;span class="n"&gt;EXPECT_CALL&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;getMock&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;Man_Dec_Add_0&lt;/span&gt;&lt;span class="p"&gt;());&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="n"&gt;PERFORM_MAN_SYNCH&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Zero&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;One&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;Perform_Stable_Zero&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;Perform_Stable_One&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;Perform_Stable_Zero&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="n"&gt;Perform_Stable_One&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;Perform_Stable_Zero&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="n"&gt;Expect_Total_1_And_0_Eq&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;11&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt; &lt;span class="c1"&gt;// Sync(3) + Byte(8)&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="cm"&gt;/* 1001100110011001(manchester) =&amp;gt; 01010101(bin) =&amp;gt; 85(dec) */&lt;/span&gt;

&lt;span class="n"&gt;TEST_F&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ManDecodeTest_F&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Decode_85&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;testing&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;InSequence&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;EXPECT_MAN_SYNCH&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;EXPECT_CALL&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;getMock&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;Man_Dec_Add_0&lt;/span&gt;&lt;span class="p"&gt;());&lt;/span&gt;
        &lt;span class="n"&gt;EXPECT_CALL&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;getMock&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;Man_Dec_Add_1&lt;/span&gt;&lt;span class="p"&gt;());&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="n"&gt;PERFORM_MAN_SYNCH&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;One&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Zero&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;Perform_Stable_One&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;Perform_Stable_Zero&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;Perform_Stable_One&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="n"&gt;Perform_Stable_Zero&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;Perform_Stable_One&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="n"&gt;Expect_Total_1_And_0_Eq&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;11&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt; &lt;span class="c1"&gt;// Sync(3) + Byte(8)&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="cm"&gt;/* 1001100110011010(manchester) =&amp;gt; 84(dec) =&amp;gt; 01010100(bin) */&lt;/span&gt;

&lt;span class="n"&gt;TEST_F&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ManDecodeTest_F&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Decode_84&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;testing&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="n"&gt;InSequence&lt;/span&gt; &lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;EXPECT_MAN_SYNCH&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;EXPECT_CALL&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;getMock&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;Man_Dec_Add_0&lt;/span&gt;&lt;span class="p"&gt;());&lt;/span&gt;
        &lt;span class="n"&gt;EXPECT_CALL&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;getMock&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;Man_Dec_Add_1&lt;/span&gt;&lt;span class="p"&gt;());&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="n"&gt;EXPECT_CALL&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;getMock&lt;/span&gt;&lt;span class="p"&gt;(),&lt;/span&gt; &lt;span class="n"&gt;Man_Dec_Add_0&lt;/span&gt;&lt;span class="p"&gt;()).&lt;/span&gt;&lt;span class="n"&gt;Times&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="n"&gt;PERFORM_MAN_SYNCH&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;One&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;Zero&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;Perform_Stable_One&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;Perform_Stable_Zero&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;Perform_Stable_One&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="n"&gt;Perform_Stable_Zero&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;Perform_Stable_One&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;Perform_Stable_Zero&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="n"&gt;Expect_Total_1_And_0_Eq&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;11&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt; &lt;span class="c1"&gt;// Sync(3) + Byte(8)&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞ –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è &lt;em&gt;–ú–∞–Ω—á–µ—Å—Ç–µ—Ä—Å–∫–æ–≥–æ –∫–æ–¥–∞&lt;/em&gt;:&lt;/p&gt;
&lt;p&gt;&lt;em&gt;/manchester/src/rx/Man_Decode.c&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="cp"&gt;#include&lt;/span&gt; &lt;span class="cpf"&gt;&amp;quot;Man_Decode.h&amp;quot;&lt;/span&gt;&lt;span class="cp"&gt;&lt;/span&gt;

&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;bool&lt;/span&gt; &lt;span class="n"&gt;ds_LB&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="cm"&gt;/********************************************************************&lt;/span&gt;
&lt;span class="cm"&gt; *      Function Name:  Man_Decode_Stable_Zero                      *&lt;/span&gt;
&lt;span class="cm"&gt; *      Return Value:   no                                          *&lt;/span&gt;
&lt;span class="cm"&gt; *      Parameters:     Stable digital input periods. Ideal 1 or 2  *&lt;/span&gt;
&lt;span class="cm"&gt; *      Description:    Convert signal from Manchester Code.        *&lt;/span&gt;
&lt;span class="cm"&gt; *                      Fire according On_Man_Decode_Add_1()        *&lt;/span&gt;
&lt;span class="cm"&gt; *                      callback event.                             *&lt;/span&gt;
&lt;span class="cm"&gt; ********************************************************************/&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;Man_Decode_Stable_Zero&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;register&lt;/span&gt; &lt;span class="kt"&gt;unsigned&lt;/span&gt; &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="n"&gt;periods&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;periods&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="o"&gt;!--&lt;/span&gt;&lt;span class="n"&gt;periods&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;ds_LB&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;On_Man_Decode_Add_1&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
                &lt;span class="n"&gt;ds_LB&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
            &lt;span class="p"&gt;}&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="o"&gt;!--&lt;/span&gt;&lt;span class="n"&gt;periods&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;On_Man_Decode_Add_1&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
            &lt;span class="n"&gt;ds_LB&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="cm"&gt;/********************************************************************&lt;/span&gt;
&lt;span class="cm"&gt; *      Function Name:  Man_Decode_Stable_One                       *&lt;/span&gt;
&lt;span class="cm"&gt; *      Return Value:   no                                          *&lt;/span&gt;
&lt;span class="cm"&gt; *      Parameters:     Stable digital input periods. Ideal 1 or 2  *&lt;/span&gt;
&lt;span class="cm"&gt; *      Description:    Convert signal from Manchester Code.        *&lt;/span&gt;
&lt;span class="cm"&gt; *                      Fire according On_Man_Decode_Add_0()        *&lt;/span&gt;
&lt;span class="cm"&gt; *                      callback event.                             *&lt;/span&gt;
&lt;span class="cm"&gt; ********************************************************************/&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;Man_Decode_Stable_One&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;register&lt;/span&gt; &lt;span class="kt"&gt;unsigned&lt;/span&gt; &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="n"&gt;periods&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;periods&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="o"&gt;!--&lt;/span&gt;&lt;span class="n"&gt;periods&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="n"&gt;ds_LB&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
                &lt;span class="n"&gt;On_Man_Decode_Add_0&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
                &lt;span class="n"&gt;ds_LB&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
            &lt;span class="p"&gt;}&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="o"&gt;!--&lt;/span&gt;&lt;span class="n"&gt;periods&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;On_Man_Decode_Add_0&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
            &lt;span class="n"&gt;ds_LB&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;–°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤&lt;/h3&gt;
&lt;p&gt;–ï—Å–ª–∏ –í—ã —Ä–∞–±–æ—Ç–∞–µ—Ç–µ –≤ —Å–≤—è–∑–∫–µ &lt;strong&gt;Windows&lt;/strong&gt; + &lt;strong&gt;Visual Studio&lt;/strong&gt;, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Å–ª–µ–¥—É—é—â–µ–µ:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="p"&gt;@&lt;/span&gt;&lt;span class="k"&gt;set&lt;/span&gt; &lt;span class="nv"&gt;GTEST_HOME&lt;/span&gt;&lt;span class="p"&gt;=&lt;/span&gt;gtest-1.6.0 
&lt;span class="p"&gt;@&lt;/span&gt;&lt;span class="k"&gt;set&lt;/span&gt; &lt;span class="nv"&gt;GMOCK_HOME&lt;/span&gt;&lt;span class="p"&gt;=&lt;/span&gt;gmock-1.6.0

cl /EHsc /I&lt;span class="nv"&gt;%GTEST_HOME%&lt;/span&gt; /I&lt;span class="nv"&gt;%GTEST_HOME%&lt;/span&gt;/include -I&lt;span class="nv"&gt;%GMOCK_HOME%&lt;/span&gt; &lt;span class="se"&gt;^&lt;/span&gt;
&lt;span class="se"&gt;-&lt;/span&gt;I&lt;span class="nv"&gt;%GMOCK_HOME%&lt;/span&gt;/include main.cpp src/manchester/Man_Encode.cpp &lt;span class="se"&gt;^&lt;/span&gt;
&lt;span class="se"&gt;s&lt;/span&gt;rc/manchester/Man_Decode.cpp &lt;span class="nv"&gt;%GTEST_HOME%&lt;/span&gt;/src/gtest-all.cc &lt;span class="se"&gt;^&lt;/span&gt;
&lt;span class="se"&gt;%&lt;/span&gt;GMOCK_HOME%/src/gmock-all.cc

main.exe
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="Windows –°–∫—Ä–∏–Ω—à–æ—Ç" src="http://proiot.ru/blog/posts/2012/10/07/manchesterskii-kod-dlia-chainikov/win-gtest-gmock-run.png" style="width:100%; border:1px solid grey;"&gt;&lt;/p&gt;
&lt;p&gt;–ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ &lt;strong&gt;Linux&lt;/strong&gt; + &lt;strong&gt;gcc g++&lt;/strong&gt;:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="nv"&gt;GTEST_HOME&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;gtest-1.6.0
&lt;span class="nv"&gt;GMOCK_HOME&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;gmock-1.6.0

g++ -g -I&lt;span class="nv"&gt;$GTEST_HOME&lt;/span&gt; -I&lt;span class="nv"&gt;$GTEST_HOME&lt;/span&gt;/include -I&lt;span class="nv"&gt;$GMOCK_HOME&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
-I&lt;span class="nv"&gt;$GMOCK_HOME&lt;/span&gt;/include -pthread main.cpp src/manchester/Man_Encode.cpp &lt;span class="se"&gt;\&lt;/span&gt;
src/manchester/Man_Decode.cpp &lt;span class="nv"&gt;$GTEST_HOME&lt;/span&gt;/src/gtest-all.cc &lt;span class="se"&gt;\&lt;/span&gt;
&lt;span class="nv"&gt;$GMOCK_HOME&lt;/span&gt;/src/gmock-all.cc

./a.out
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="Linux –°–∫—Ä–∏–Ω—à–æ—Ç" src="http://proiot.ru/blog/posts/2012/10/07/manchesterskii-kod-dlia-chainikov/suse_tests_run.png" style="width:100%; border:1px solid grey;"&gt;&lt;/p&gt;
&lt;p&gt;–¢–µ—Å—Ç–æ–≤ –º–Ω–æ–≥–æ –Ω–µ –±—ã–≤–∞–µ—Ç. –ù–∞–ø—Ä–∏–º–µ—Ä, –±—ã–ª–æ –±—ã –Ω–µ–ø–ª–æ—Ö–æ –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –¥–ª—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏–∑ –¥–≤—É—Ö –±–∞–π—Ç –∏ –±–æ–ª–µ–µ, –∏–ª–∏ –ø—Ä–æ–≤–µ—Ä–∫—É —É—Å–ª–æ–≤–∏—è –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –Ω–µ–≤–æ–∑–º–æ–∂–Ω—ã—Ö –¥–ª—è –ú–∞–Ω—á–µ—Å—Ç–µ—Ä—Å–∫–æ–≥–æ –ö–æ–¥–∞ –∫–æ–º–±–∏–Ω–∞—Ü–∏–π - –Ω–∞–ø—Ä–∏–º–µ—Ä 111 –∏–ª–∏ 000. –ß–µ–º –±–æ–ª—å—à–µ —Ç–µ—Ä–ø–µ–Ω–∏—è –∏ –≤—ã–¥–µ—Ä–∂–∫–∏ –Ω–∞ —ç—Ç–æ–º —ç—Ç–∞–ø–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ - —Ç–µ–º –∫—Ä–µ–ø—á–µ –±—É–¥–µ—Ç —Å–æ–Ω –ø–æ—Å–ª–µ –µ—ë —Å–¥–∞—á–∏ –≤ —ç–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏—é.&lt;/p&gt;
&lt;h3&gt;–ü—Ä–∞–∫—Ç–∏–∫–∞&lt;/h3&gt;
&lt;p&gt;–¢–µ—Å—Ç—ã —ç—Ç–æ —Ö–æ—Ä–æ—à–æ, –Ω–æ –ø–æ–∫–∞ —á—Ç–æ –≤—Å—ë —ç—Ç–æ –±–æ–ª—å—à–µ –ø–æ—Ö–æ–∂–µ –Ω–∞ —Ç–µ–æ—Ä–∏—é - –∞ —Ç–µ–æ—Ä–∏—è –±–µ–∑ –ø—Ä–∞–∫—Ç–∏–∫–∏, –∫–∞–∫ –∏–∑–≤–µ—Å—Ç–Ω–æ, —Å–∫—É—á–Ω–∞. –ü–æ—ç—Ç–æ–º—É, –µ—Å–ª–∏ –í—ã –¥–æ—á–∏—Ç–∞–ª–∏ –¥–æ —ç—Ç–æ–≥–æ –º–æ–º–µ–Ω—Ç–∞, –º–∏–ª–æ—Å—Ç–∏ –ø—Ä–æ—à—É –ø–æ—Å–µ—Ç–∏—Ç—å &lt;a href="http://proiot.ru/blog/posts/2012/10/07/ispolzovanie-manchesterskogo-koda-na-primere/"&gt;—Å–ª–µ–¥—É—é—â–∏–π&lt;/a&gt; –ø–æ—Å—Ç, –≤ –∫–æ—Ç–æ—Ä–æ–º –≤ –∫–∞—á–µ—Å—Ç–≤–µ –ø—Ä–∏—ë–º–Ω–∏–∫–∞ –∏ –ø–µ—Ä–µ–¥–∞—Ç—á–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–≤–∞ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞, –∞ —Å–∞–º –ø—Ä–æ—Ü–µ—Å—Å —ç–º—É–ª–∏—Ä—É–µ—Ç—Å—è –≤ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π —Å—Ä–µ–¥–µ, –∫–æ—Ç–æ—Ä–∞—è —É–º–µ–µ—Ç –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏–µ —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∏—Ö —Ü–µ–ø–µ–π.&lt;/p&gt;
&lt;p&gt;–ò—Å—Ö–æ–¥–Ω–∏–∫–∏ –∫ —Ç–µ–∫—É—â–µ–º—É –ø–æ—Å—Ç—É –Ω–∞ &lt;a href="https://github.com/mazko/Manchester-Code" rel="nofollow"&gt;GitHub&lt;/a&gt;.&lt;/p&gt;</content><category term="TDD"></category><category term="–ú–∞–Ω—á–µ—Å—Ç–µ—Ä—Å–∫–∏–π –∫–æ–¥"></category><category term="gtest"></category><category term="gmock"></category></entry><entry><title>–ó–∞–º–µ—á–∞—Ç–µ–ª—å–Ω—ã–π Bootloader –æ—Ç Microchip –¥–ª—è PIC16 / PIC18</title><link href="http://proiot.ru/blog/posts/2012/10/03/zamechatelnyi-bootloader-ot-microchip-dlia-pic16-pic18/" rel="alternate"></link><published>2012-10-03T00:00:00+03:00</published><updated>2012-10-03T00:00:00+03:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2012-10-03:/blog/posts/2012/10/03/zamechatelnyi-bootloader-ot-microchip-dlia-pic16-pic18/</id><summary type="html">&lt;p&gt;–í—ã –ø–µ—Ä–µ–ø—Ä–æ—à–∏–≤–∞–ª–∏ –∫–æ–≥–¥–∞-–Ω–∏–±—É–¥—å &lt;strong&gt;BIOS&lt;/strong&gt; ? –ï—Å–ª–∏ –Ω–µ—Ç, —Ç–æ –í–∞–º —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, –ø–æ–≤–µ–∑–ª–æ... –í–æ–±—â–µ–º –ø—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ —Å–µ–±–µ &lt;strong&gt;BIOS&lt;/strong&gt;, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ —É–º–µ–µ—Ç –ø—Ä–æ—à–∏–≤–∞—Ç—å —Å–∞–º —Å–µ–±—è –∏ –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–ª–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–ª–æ—Ö–æ (–µ–≥–æ —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –ª—é–¥–∏, —Ç–æ—á–Ω–æ —Ç–∞–∫–∏–µ –∂–µ –∫–∞–∫ –∏ –º—ã —Å –í–∞–º–∏), –Ω—É–∂–Ω–æ –≤—ã–∫–ª—é—á–∏—Ç—å –∫–æ–º–ø—å—é—Ç–µ—Ä, –æ—Ç–∫—Ä—É—Ç–∏—Ç—å –ø–∞—Ä—É —à—É—Ä—É–ø–æ–≤, —Å–Ω—è—Ç—å –∫—Ä—ã—à–∫—É, –≤—ã—Ç—è–Ω—É—Ç—å –º–∏–∫—Ä–æ—Å—Ö–µ–º—É ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;p&gt;–í—ã –ø–µ—Ä–µ–ø—Ä–æ—à–∏–≤–∞–ª–∏ –∫–æ–≥–¥–∞-–Ω–∏–±—É–¥—å &lt;strong&gt;BIOS&lt;/strong&gt; ? –ï—Å–ª–∏ –Ω–µ—Ç, —Ç–æ –í–∞–º —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ, –ø–æ–≤–µ–∑–ª–æ... –í–æ–±—â–µ–º –ø—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ —Å–µ–±–µ &lt;strong&gt;BIOS&lt;/strong&gt;, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ —É–º–µ–µ—Ç –ø—Ä–æ—à–∏–≤–∞—Ç—å —Å–∞–º —Å–µ–±—è –∏ –µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–ª–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–ª–æ—Ö–æ (–µ–≥–æ —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –ª—é–¥–∏, —Ç–æ—á–Ω–æ —Ç–∞–∫–∏–µ –∂–µ –∫–∞–∫ –∏ –º—ã —Å –í–∞–º–∏), –Ω—É–∂–Ω–æ –≤—ã–∫–ª—é—á–∏—Ç—å –∫–æ–º–ø—å—é—Ç–µ—Ä, –æ—Ç–∫—Ä—É—Ç–∏—Ç—å –ø–∞—Ä—É —à—É—Ä—É–ø–æ–≤, —Å–Ω—è—Ç—å –∫—Ä—ã—à–∫—É, –≤—ã—Ç—è–Ω—É—Ç—å –º–∏–∫—Ä–æ—Å—Ö–µ–º—É &lt;strong&gt;BIOS&lt;/strong&gt;, –Ω–∞–π—Ç–∏ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π –ø—Ä–æ–≥—Ä–∞–º–º–∞—Ç–æ—Ä, –ü–†–û–®–ò–¢–¨, –ø–æ—Å–ª–µ —á–µ–≥–æ —Å–¥–µ–ª–∞—Ç—å –≤—Å—ë —Ç–æ –∂–µ —Å–∞–º–æ–µ –≤ –æ–±—Ä–∞—Ç–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ. –ü–∞—Ä—É —Ä–∞–∑ —Å–¥–µ–ª–∞—Ç—å –º–æ–∂–Ω–æ, –Ω–æ —Ö–æ—Ç–µ–ª–æ—Å—å –±—ã —á—Ç–æ-–Ω–∏–±—É–¥—å –ø–æ—É–¥–æ–±–Ω–µ–µ, –æ—Å–æ–±–µ–Ω–Ω–æ –µ—Å–ª–∏ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è —ç—Ç–æ—Ç –ø—Ä–æ—Ü–µ—Å—Å —á–∞—Å—Ç–æ –ø–æ–≤—Ç–æ—Ä—è—Ç—å –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.&lt;/p&gt;
&lt;p&gt;–ü–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã &lt;strong&gt;Microchip&lt;/strong&gt; –Ω–∞—É—á–∏–ª–∏—Å—å –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ —Å—á–∏—Ç—ã–≤–∞—Ç—å/–∑–∞–ø–∏—Å—ã–≤–∞—Ç—å —è—á–µ–π–∫–∏ —Å–≤–æ–µ–π Flash-–ø–∞–º—è—Ç–∏ (–ø–æ—è–≤–∏–ª–∏—Å—å —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –∞—Å—Å–µ–º–±–ª–µ—Ä–∞), –ø–æ—è–≤–ª–µ–Ω–∏–µ &lt;strong&gt;Bootloader&lt;/strong&gt;'–æ–≤ - —ç—Ç–æ –±—ã–ª –ª–∏—à—å –≤–æ–ø—Ä–æ—Å –≤—Ä–µ–º–µ–Ω–∏. –û—á–µ–Ω—å —Ö–æ—Ä–æ—à–æ, –∫–æ–≥–¥–∞ —ç—Ç–∏–º –≤–æ–ø—Ä–æ—Å–æ–º –∑–∞–Ω–∏–º–∞–µ—Ç—Å—è –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤ - –∫—Ç–æ –∫–∞–∫ –Ω–µ –æ–Ω –ª—É—á—à–µ –æ—Å–≤–µ–¥–æ–º–ª—ë–Ω –æ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è—Ö —Å–≤–æ–µ–π –ø—Ä–æ–¥—É–∫—Ü–∏–∏. –ù–∞ –æ–¥–Ω–æ–º –∏–∑ —Ç–∞–∫–∏—Ö Bootloader'–æ–≤ –ø–æ–¥ –Ω–∞–∑–≤–∞–Ω–∏–µ–º &lt;strong&gt;AN1310&lt;/strong&gt;, –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–º –Ω–∞ –ª–∏–Ω–µ–π–∫—É &lt;strong&gt;PIC16&lt;/strong&gt; / &lt;strong&gt;PIC18&lt;/strong&gt; –∏ –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–º –¥–ª—è –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å &lt;strong&gt;UART&lt;/strong&gt; –¥–∞–≤–∞–π—Ç–µ –æ—Å—Ç–∞–Ω–æ–≤–∏–º—Å—è –ø–æ–ø–æ–¥—Ä–æ–±–Ω–µ–µ. –°–∫–∞—á–∞—Ç—å –≤—Å—ë –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ –¥–ª—è —Ä–∞–±–æ—Ç—ã –ü–û –º–æ–∂–Ω–æ —Å —Å–∞–π—Ç–∞ &lt;a href="http://www.microchip.com/applicationnotes" rel="nofollow"&gt;–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—è&lt;/a&gt;.&lt;/p&gt;
&lt;script type="text/javascript" src="http://proiot.ru/blog/posts/2012/10/03/zamechatelnyi-bootloader-ot-microchip-dlia-pic16-pic18/jquery-1.11.2.min.js"&gt; &lt;/script&gt;

&lt;script type="text/javascript" src="http://proiot.ru/blog/posts/2012/10/03/zamechatelnyi-bootloader-ot-microchip-dlia-pic16-pic18/slider/easySlider1.7.js"&gt; &lt;/script&gt;

&lt;script type="text/javascript" src="http://proiot.ru/blog/posts/2012/10/03/zamechatelnyi-bootloader-ot-microchip-dlia-pic16-pic18/onload.js"&gt; &lt;/script&gt;

&lt;div id="slider_bootloder_shots" style="padding-top: .6em;"&gt;
&lt;ul&gt;
&lt;li&gt;&lt;img src="http://proiot.ru/blog/posts/2012/10/03/zamechatelnyi-bootloader-ot-microchip-dlia-pic16-pic18/shots/start.png" alt="start" /&gt;&lt;/li&gt;
&lt;li&gt;&lt;img src="http://proiot.ru/blog/posts/2012/10/03/zamechatelnyi-bootloader-ot-microchip-dlia-pic16-pic18/shots/settings.png" alt="settings" /&gt;&lt;/li&gt;
&lt;li&gt;&lt;img src="http://proiot.ru/blog/posts/2012/10/03/zamechatelnyi-bootloader-ot-microchip-dlia-pic16-pic18/shots/break.png" alt="break" /&gt;&lt;/li&gt;
&lt;li&gt;&lt;img src="http://proiot.ru/blog/posts/2012/10/03/zamechatelnyi-bootloader-ot-microchip-dlia-pic16-pic18/shots/bootloader_connected.png" alt="bootloader_connected" /&gt;&lt;/li&gt;
&lt;li&gt;&lt;img src="http://proiot.ru/blog/posts/2012/10/03/zamechatelnyi-bootloader-ot-microchip-dlia-pic16-pic18/shots/erase.png" alt="erase" /&gt;&lt;/li&gt;
&lt;li&gt;&lt;img src="http://proiot.ru/blog/posts/2012/10/03/zamechatelnyi-bootloader-ot-microchip-dlia-pic16-pic18/shots/write.png" alt="write" /&gt;&lt;/li&gt;
&lt;li&gt;&lt;img src="http://proiot.ru/blog/posts/2012/10/03/zamechatelnyi-bootloader-ot-microchip-dlia-pic16-pic18/shots/verify.png" alt="verify" /&gt;&lt;/li&gt;
&lt;li&gt;&lt;img src="http://proiot.ru/blog/posts/2012/10/03/zamechatelnyi-bootloader-ot-microchip-dlia-pic16-pic18/shots/read_main.png" alt="read_main" /&gt;&lt;/li&gt;
&lt;li&gt;&lt;img src="http://proiot.ru/blog/posts/2012/10/03/zamechatelnyi-bootloader-ot-microchip-dlia-pic16-pic18/shots/read_eeprom.png" alt="read_eeprom" /&gt;&lt;/li&gt;
&lt;li&gt;&lt;img src="http://proiot.ru/blog/posts/2012/10/03/zamechatelnyi-bootloader-ot-microchip-dlia-pic16-pic18/shots/read_config.png" alt="read_config" /&gt;&lt;/li&gt;
&lt;li&gt;&lt;img src="http://proiot.ru/blog/posts/2012/10/03/zamechatelnyi-bootloader-ot-microchip-dlia-pic16-pic18/shots/run.png" alt="run" /&gt;&lt;/li&gt;
&lt;li&gt;&lt;img src="http://proiot.ru/blog/posts/2012/10/03/zamechatelnyi-bootloader-ot-microchip-dlia-pic16-pic18/shots/validate_balance.png" alt="validate_balance" /&gt;&lt;/li&gt;
&lt;li&gt;&lt;img src="http://proiot.ru/blog/posts/2012/10/03/zamechatelnyi-bootloader-ot-microchip-dlia-pic16-pic18/shots/reboot.png" alt="reboot" /&gt;&lt;/li&gt;
&lt;li&gt;&lt;img src="http://proiot.ru/blog/posts/2012/10/03/zamechatelnyi-bootloader-ot-microchip-dlia-pic16-pic18/shots/reboot_1.png" alt="reboot_1" /&gt;&lt;/li&gt;
&lt;li&gt;&lt;img src="http://proiot.ru/blog/posts/2012/10/03/zamechatelnyi-bootloader-ot-microchip-dlia-pic16-pic18/shots/reboot_2.png" alt="reboot_2" /&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;

&lt;div style="clear: both;"&gt;
&lt;/div&gt;

&lt;p&gt;–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ &lt;strong&gt;AN1310&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;–ò—Å–ø–æ–ª—å–∑—É–µ—Ç –º–∞–ª–µ–Ω—å–∫–∏–π –æ–±—ä—ë–º Flash –ø–∞–º—è—Ç–∏ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ - –≤ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å–ª—É—á–∞–µ–≤ –º–µ–Ω–µ–µ 450 —Å–ª–æ–≤&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏ –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö UART –º–µ–∂–¥—É –ü–ö (host) –∏ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–º&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;–®–∏—Ä–æ–∫–∏–π –¥–∏–∞–ø–∞–∑–æ–Ω –¥–ª—è –≤—ã–±–æ—Ä–∞ —Å–∫–æ—Ä–æ—Å—Ç–∏ –ø–µ—Ä–µ–¥–∞—á–∏ 1,200 –ö–±–∏—Ç/—Å - 3 M–±–∏—Ç/—Å&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;–ü—Ä–æ—Ç–æ–∫–æ–ª –æ–±–º–µ–Ω–∞ –¥–∞–Ω–Ω—ã–º–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç 16-–±–∏—Ç CRC&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;–ò–º–µ–µ—Ç—Å—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å Flash —Ç–æ–ª—å–∫–æ –ø–æ —Ç–µ–º –∞–¥—Ä–µ—Å–∞–º, –∫–æ—Ç–æ—Ä—ã–µ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å (&lt;em&gt;Incremental Bootloading&lt;/em&gt;) - —ç—Ç–æ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É—Å–∫–æ—Ä—è–µ—Ç –ø—Ä–æ—Ü–µ—Å—Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;M–∏–Ω–∏–º—É–º —Å–æ–µ–¥–∏–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ - –º–æ–∂–Ω–æ –æ–±–æ–π—Ç–∏—Å—å –≤—Å–µ–≥–æ —Ç—Ä–µ–º—è –ø—Ä–æ–≤–æ–¥–Ω–∏–∫–∞–º–∏&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;–ü–û –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –ü–ö –∫—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ–µ - –∫–æ–¥ –Ω–∞–ø–∏—Å–∞–Ω –Ω–∞ &lt;strong&gt;–°&lt;/strong&gt; / &lt;strong&gt;–°++&lt;/strong&gt; &lt;strong&gt;Qt&lt;/strong&gt; &lt;strong&gt;SDK&lt;/strong&gt;, –µ—Å—Ç—å –∏—Å—Ö–æ–¥–Ω–∏–∫–∏&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;–®–∞–≥ –ø–µ—Ä–≤—ã–π - —Å—Ö–µ–º–æ—Ç–µ—Ö–Ω–∏–∫–∞&lt;/h3&gt;
&lt;p&gt;–í –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –ø—Ä–µ–¥–ª–∞–≥–∞—é—Ç—Å—è –¥–≤–µ —Å—Ö–µ–º—ã. –î–ª—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏—è —É—Ä–æ–≤–Ω–µ–π –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–∏–∫—Ä–æ—Å—Ö–µ–º–∞ MAX3232:&lt;/p&gt;
&lt;p&gt;&lt;img alt="–°–∫—Ä–∏–Ω—à–æ—Ç" src="http://proiot.ru/blog/posts/2012/10/03/zamechatelnyi-bootloader-ot-microchip-dlia-pic16-pic18/cheme_3.3v.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–ï—Å–ª–∏ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –ø–∏—Ç–∞–Ω–∏—è –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è –ø–∏—Ç–∞–Ω–∏—è MAX3232, —Ç–æ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç—Å—è –≤–≤–µ—Å—Ç–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π MOSFET —Ç—Ä–∞–Ω–∑–∏—Å—Ç–æ—Ä:&lt;/p&gt;
&lt;p&gt;&lt;img alt="–°–∫—Ä–∏–Ω—à–æ—Ç" src="http://proiot.ru/blog/posts/2012/10/03/zamechatelnyi-bootloader-ot-microchip-dlia-pic16-pic18/cheme_5v.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–û–¥–Ω–∞–∫–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–µ —Å—Ö–µ–º—ã –º–æ–∂–Ω–æ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–ø—Ä–æ—Å—Ç–∏—Ç—å / —É–¥–µ—à–µ–≤–∏—Ç—å, –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–µ—Ä–µ—Ö–æ–¥–Ω–∏–∫ USB-to-serial (–Ω–∞–ø—Ä–∏–º–µ—Ä –Ω–∞ PL2303 –∏–ª–∏ FT232BM). –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—á–µ—Å–∫–æ–π –µ–¥–∏–Ω–∏—Ü—ã —É PL2303 - 3.3V –∏ –µ—Å–ª–∏ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ –ø–∏—Ç–∞–Ω–∏—è –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö 3 ... 3.3V, MAX3232 –Ω–µ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è. –í —Ç–∞–∫–æ–º —Å–ª—É—á–∞–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º —Ç–æ–ª—å–∫–æ –ø–æ–¥—Ç—è–≥–∏–≤–∞—é—â–∏–π —Ä–µ–∑–∏—Å—Ç–æ—Ä —Å &lt;strong&gt;Vdd&lt;/strong&gt; –Ω–∞ &lt;strong&gt;RX&lt;/strong&gt;, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å —Å–ª—É—á–∞–π–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ &lt;strong&gt;Bootloader&lt;/strong&gt;'–∞ –ø—Ä–∏ –æ—Ç–∫–ª—é—á—ë–Ω–Ω–æ–º –ø–µ—Ä–µ—Ö–æ–¥–Ω–∏–∫–µ USB-to-serial. –ß—Ç–æ –∫–∞—Å–∞–µ—Ç—Å—è —Å–∏–≥–Ω–∞–ª–∞ RTS (—Å–º. —Å—Ö–µ–º—ã), —Ç–æ –æ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–±—Ä–æ—Å–∞ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ (RESET), –∞ –ø–æ—Å–∫–æ–ª—å–∫—É —Ç–∞–∫–æ–≥–æ –∂–µ —ç—Ñ—Ñ–µ–∫—Ç–∞ –º–æ–∂–Ω–æ –¥–æ—Å—Ç–∏—á—å –ø—Ä–æ—Å—Ç–æ –æ—Ç–∫–ª—é—á–∏–≤/–≤–∫–ª—é—á–∏–≤ –ø–∏—Ç–∞–Ω–∏–µ, —Ç–æ –µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ. –í —Å–ª—É—á–∞–µ–µ —Å USB-to-serial –∫–∞–∫ –ø—Ä–∞–≤–∏–ª–æ –∏–º–µ–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ RX, TX –∏ GND, –ø–æ—ç—Ç–æ–º—É —É–¥–æ–±–Ω–µ–π —Å–±—Ä–∞—Å—ã–≤–∞—Ç—å –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –≤—Ä—É—á–Ω—É—é.&lt;/p&gt;
&lt;h3&gt;–®–∞–≥ –≤—Ç–æ—Ä–æ–π - –ø—Ä–æ—à–∏–≤–∫–∞ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞&lt;/h3&gt;
&lt;p&gt;&lt;img alt="–°–∫—Ä–∏–Ω—à–æ—Ç" src="http://proiot.ru/blog/posts/2012/10/03/zamechatelnyi-bootloader-ot-microchip-dlia-pic16-pic18/18f46k22.png" style="float:left; margin:.5em 1.3em .3em 0;"&gt;–ò—Å—Ö–æ–¥–Ω–∏–∫–∏ &lt;strong&gt;AN1310&lt;/strong&gt; —É–ø–∞–∫–æ–≤–∞–Ω—ã –≤ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π &lt;strong&gt;*.exe&lt;/strong&gt; —Ñ–∞–π–ª, —Ç–∞–∫ —á—Ç–æ –ø–æ–Ω–∞—á–∞–ª—É –Ω–µ–æ–±—Ö–æ–¥–∏–º–∞ –û–° &lt;em&gt;Windows&lt;/em&gt; (–∫–∞–∫ –≤–∞—Ä–∏–∞–Ω—Ç –º–æ–∂–Ω–æ –µ—â—ë –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å &lt;em&gt;Wine&lt;/em&gt; –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∏–Ω—Å—Ç–∞–ª–ª—è—Ü–∏—é —Ç–∞–º, –Ω–æ –í–∞—à –ø–æ–∫–æ—Ä–Ω—ã–π —Å–ª—É–≥–∞ —ç—Ç–æ—Ç —Å–ø–æ—Å–æ–± –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–ª). –ù–µ–ø—Ä–∏—è—Ç–Ω–∞—è —Å–∏—Ç—É–∞—Ü–∏—è —Å &lt;strong&gt;Windows&lt;/strong&gt; —Ç–∞–∫–∂–µ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç—Å—è –∏ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —Å–±–æ—Ä–∫–∏ &lt;strong&gt;Bootloader&lt;/strong&gt;'–∞ - –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å &lt;strong&gt;MPasm&lt;/strong&gt; / &lt;strong&gt;MPLAB&lt;/strong&gt;, —á—Ç–æ–±—ã —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Ö–µ–∫—Å. –ü–æ—Å–ª–µ —Ç–æ–≥–æ, –∫–∞–∫ &lt;strong&gt;Bootloader&lt;/strong&gt; –±—É–¥–µ—Ç —É–∂–µ –≤ –ø—Ä–æ—à–∏—Ç –∫—Ä–∏—Å—Ç–∞–ª–ª–µ, –æ–± –û–° &lt;strong&gt;Windows&lt;/strong&gt; –º–æ–∂–Ω–æ —Å–ø–æ–∫–æ–π–Ω–æ –∑–∞–±—ã—Ç—å.&lt;/p&gt;
&lt;p&gt;C–∫–∞—á–∞–Ω–Ω—ã–π —Å —Å–∞–π—Ç–∞ &lt;strong&gt;Microchip&lt;/strong&gt; –∏–Ω—Å—Ç–∞–ª–ª—è—Ç–æ—Ä &lt;strong&gt;Serial Bootloader AN1310 v1.05r.exe&lt;/strong&gt; –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–∞ –ü–ö —Ä–∞—Å–ø–∞–∫–æ–≤—ã–≤–∞–µ—Ç –∏—Å—Ö–æ–¥–Ω—ã–µ –∫–æ–¥—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ—à–∏–≤–∫–∏ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ —Å—é–¥–∞:&lt;/p&gt;
&lt;div style="clear:both;"&gt;
&lt;/div&gt;

&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;C:\Microchip Solutions\Serial Bootloader AN1310 vX.XX\PICxx Bootloader\
&lt;/pre&gt;&lt;/div&gt;


&lt;ol style="padding-top: 1em;"&gt;
  &lt;li&gt;
    &lt;p style="padding-top:0; margin-top:0;"&gt;–ö–æ–¥ –Ω–∞–ø–∏—Å–∞–Ω –Ω–∞ –∞—Å—Å–µ–º–±–ª–µ—Ä–µ - MPasm, –¥–ª—è –µ–≥–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —Å–±–æ—Ä–∫–∏ —É–¥–æ–±–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å MPLAB IDE&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;–í –º–µ–Ω—é Configure -&amp;gt; Select Device‚Ä¶ –≤—ã–±—Ä–∞—Ç—å –º–æ–¥–µ–ª—å –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä PIC18F46K22)&lt;/p&gt;
  &lt;/li&gt;
  &lt;li&gt;
    &lt;p&gt;–í –º–µ–Ω—é Configure -&amp;gt; Configuration Bits‚Ä¶.&lt;/p&gt;

&lt;table style="border: 4px double black; border-collapse: collapse; width: 100%; margin-top: 1.5em; margin-bottom: 1.5em;" cellpadding="5"&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td style="padding: .3em;border: 4px double black;"&gt;Watchdog Timer&lt;/td&gt;
&lt;td style="padding: .3em;border: 4px double black;"&gt;‚ÄúDisabled‚Äù, –æ–¥–Ω–∞–∫–æ –µ–≥–æ –º–æ–∂–Ω–æ –∑–∞–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="padding: .3em;border: 4px double black;"&gt;Extended Instruction Set Enable bit&lt;/td&gt;
&lt;td style="padding: .3em;border: 4px double black;"&gt;‚ÄúDisabled‚Äù&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="padding: .3em;border: 4px double black;"&gt;Oscillator Selection bits&lt;/td&gt;
&lt;td style="padding: .3em;border: 4px double black;"&gt;–ß–µ–º –±–æ–ª—å—à–µ —Ç–∞–∫—Ç–æ–≤–∞—è —á–∞—Å—Ç–æ—Ç–∞, —Ç–µ–º –≤—ã—à–µ –ø—Ä–µ–¥–µ–ª—å–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å UART&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="padding: .3em;border: 4px double black;"&gt;Fail-Safe Clock Monitor Enable bit&lt;/td&gt;
&lt;td style="padding: .3em;border: 4px double black;"&gt;‚ÄúEnabled‚Äù, –µ—Å–ª–∏ –∏–º–µ–µ—Ç—Å—è&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="padding: .3em;border: 4px double black;"&gt;Low-Voltage Program (LVP)&lt;/td&gt;
&lt;td style="padding: .3em;border: 4px double black;"&gt;‚ÄúDisabled‚Äù, –µ—Å–ª–∏ –∏–º–µ–µ—Ç—Å—è&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td style="padding: .3em;border: 4px double black;"&gt;Table Read-Protect&lt;/td&gt;
&lt;td style="padding: .3em;border: 4px double black;"&gt;‚ÄúDisabled‚Äù, –µ—Å–ª–∏ –∏–º–µ–µ—Ç—Å—è&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;/li&gt;

  &lt;li&gt;
    &lt;p&gt;–°–æ–±—Ä–∞—Ç—å –ø—Ä–æ–µ–∫—Ç –∏ –ø—Ä–æ—à–∏—Ç—å –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –ø—Ä–æ–≥—Ä–∞–º–º–∞—Ç–æ—Ä–æ–º )))&lt;/p&gt;
  &lt;/li&gt;
&lt;/ol&gt;

&lt;p&gt;&lt;img alt="–°–∫—Ä–∏–Ω—à–æ—Ç" src="http://proiot.ru/blog/posts/2012/10/03/zamechatelnyi-bootloader-ot-microchip-dlia-pic16-pic18/mplab_config_bits.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–í —Å–ª—É—á–∞–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –º–æ–∂–Ω–æ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥ &lt;strong&gt;bootconfig.inc&lt;/strong&gt;. –ù–∞–ø—Ä–∏–º–µ—Ä, &lt;strong&gt;PIC18F46K22&lt;/strong&gt; –∏–º–µ–µ—Ç –Ω–∞ –±–æ—Ä—Ç—É –¥–≤–∞ &lt;strong&gt;USART&lt;/strong&gt; –º–æ–¥—É–ª—è, –∞ &lt;strong&gt;Bootloader&lt;/strong&gt; –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–µ—Ä–≤—ã–π. –í —ç—Ç–æ–º –∂–µ —Ñ–∞–π–ª–µ –º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –æ–¥–∏–Ω –∏–∑ –¥–≤—É—Ö —Ä–µ–∂–∏–º–æ–≤ —Ä–∞–±–æ—Ç—ã  &lt;strong&gt;Bootloader&lt;/strong&gt;'–∞:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é, —Ö–µ–∫—Å &lt;strong&gt;Bootloader&lt;/strong&gt;'–∞ —Ä–∞—Å–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è –≤ –∫–æ–Ω—Ü–µ Flash-–ø–∞–º—è—Ç–∏, –≤ —ç—Ç–æ–º —Å–ª—É—á–∞–µ –æ—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ –º–æ–∂–µ—Ç —Å–∞–º–∞ –æ–±—Å–ª—É–∂–∏–≤–∞—Ç—å –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è, —Ç.–µ. —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –µ—ë —Ä–∞–±–æ—Ç–∞ –Ω–∏—á–µ–º –Ω–µ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç —Ä–∞–±–æ—Ç—ã –±–µ–∑ &lt;strong&gt;Bootloader&lt;/strong&gt;'–∞. –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ, —á—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–Ω–∞—Ç—å –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä—É –æ—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã - —É—á–∞—Å—Ç–æ–∫ –∑–∞–Ω—è—Ç–æ–π Flash-–ø–∞–º—è—Ç–∏, –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ HI-TECH –° –¥–ª—è —ç—Ç–æ–π —Ü–µ–ª–∏ –º–æ–∂–Ω–æ —É–∫–∞–∑–∞—Ç—å –≤ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–µ —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ &lt;code&gt;--ROM=default,-F800-FBFF&lt;/code&gt;. –û–¥–Ω–∞–∫–æ –ø–æ–¥–æ–±–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è &lt;strong&gt;Bootloader&lt;/strong&gt;'–∞ –∏–º–µ–µ—Ç –æ–¥–∏–Ω —Å—É—â–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ–∫ - –≤ —Å–ª—É—á–∞–µ –∞–ø–ø–∞—Ä–∞—Ç–Ω–æ–≥–æ —Å–±–æ—è (–Ω–∞–ø—Ä–∏–º–µ—Ä –æ—Ç–∫–ª—é—á–∏–ª–∏ –ø–∏—Ç–∞–Ω–∏–µ) –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –∑–∞–ø–∏—Å–∏ –µ–≥–æ –ø—Ä–æ—à–∏–≤–∫–∞ –º–æ–∂–µ—Ç –ø–æ–≤—Ä–µ–¥–∏—Ç—å—Å—è - –≤ —ç—Ç–æ–º —Å–ª—É—á–∞–µ —Å–Ω–æ–≤–∞ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –ø—Ä–æ–≥—Ä–∞–º–º–∞—Ç–æ—Ä. –î–∞–∂–µ –µ—Å–ª–∏ —Å –ø–æ–º–æ—â—å—é –±–∏—Ç–æ–≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∞–ø–ø–∞—Ä–∞—Ç–Ω–æ –∑–∞—â–∏—Ç–∏—Ç—å –∫–æ–Ω–µ—Ü Flash-–ø–∞–º—è—Ç–∏, –æ—Å—Ç–∞—ë—Ç—Å—è –∫–∞–∫ –º–∏–Ω–∏–º—É–º –æ–¥–Ω–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è (&lt;strong&gt;GOTO&lt;/strong&gt;), —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–Ω–∞—è –ø–æ –∞–¥—Ä–µ—Å—É 0000h, –∑–∞—â–∏—Ç–∏—Ç—å –∫–æ—Ç–æ—Ä—É—é –Ω–µ –∫–æ—Å–Ω—É–≤—à–∏—Å—å –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π (0008h, 0018h) –º—ã –Ω–µ –º–æ–∂–µ–º - –∞–ø–ø–∞—Ä–∞—Ç–Ω–æ –∑–∞—â–∏—â–∞—Ç—å Flash-–ø–∞–º—è—Ç—å –æ—Ç –∑–∞–ø–∏—Å–∏ –º–æ–∂–Ω–æ —Ç–æ–ª—å–∫–æ –±–ª–æ–∫–∞–º–∏.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;–í —ç—Ç–æ–π —Å–≤—è–∑–∏ —Ü–µ–ª–µ—Å–æ–æ–±—Ä–∞–∑–Ω–æ –∑–∞–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å –≤—Ç–æ—Ä–æ–π –≤–∞—Ä–∏–∞–Ω—Ç &lt;strong&gt;Bootloader&lt;/strong&gt;'–∞, –≤ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ –æ–Ω –æ–±–æ–∑–Ω–∞—á–µ–Ω –∫–∞–∫ &lt;strong&gt;REMAPPED&lt;/strong&gt;. –û–Ω —Ä–∞—Å–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è –≤ –Ω–∞—á–∞–ª–µ Flash-–ø–∞–º—è—Ç–∏ –∏ —Å–∞–º –æ–±—Å–ª—É–∂–∏–≤–∞–µ—Ç –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è, —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–±—Ä–∞—Å—ã–≤–∞–µ—Ç –∏—Ö –ø–æ –¥—Ä—É–≥–∏–º –∞–¥—Ä–µ—Å–∞–º, –Ω–∞–ø—Ä–∏–º–µ—Ä: 0008h =&amp;gt; 0808h, 0018h =&amp;gt; 0818h. –¢–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ –¥–æ–±–∞–≤–ª—è–µ—Ç —Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫—É—é(–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è GOTO) –∑–∞–¥–µ—Ä–∂–∫—É –≤ –ø—Ä–æ—Ü–µ—Å—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏–π, –æ–¥–Ω–∞–∫–æ –∏–º–µ–µ—Ç –¥–≤–∞ –æ—á–µ–≤–∏–¥–Ω—ã—Ö –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞. –í–æ-–ø–µ—Ä–≤—ã—Ö, –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ —É –≤—Å–µ—Ö –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤ Flash –∏–º–µ–µ—Ç boot-–±–ª–æ–∫, –æ–±—ä—ë–º –∫–æ—Ç–æ—Ä–æ–≥–æ –º–µ–Ω—å—à–µ –¥—Ä—É–≥–∏—Ö - –æ–Ω –∫–∞–∫ —Ä–∞–∑ –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –Ω–∞ &lt;strong&gt;Bootloader&lt;/strong&gt;'—ã. –≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –±–æ–ª–µ–µ —Ä–∞—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –∏ —ç–∫–æ–Ω–æ–º–Ω–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ä–µ—Å—É—Ä—Å—ã Flash-–ø–∞–º—è—Ç–∏ –º–µ–∂–¥—É –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–º –∏ &lt;strong&gt;Bootloader&lt;/strong&gt;'–æ–º. –í–æ-–≤—Ç–æ—Ä—ã—Ö, –≤–µ—Å—å –∫–æ–¥, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ–æ–±—Ö–æ–¥–∏–º –¥–ª—è —Ä–∞–±–æ—Ç—ã &lt;strong&gt;Bootloader&lt;/strong&gt;'–∞ –º–æ–∂–Ω–æ –∞–ø–ø–∞—Ä–∞—Ç–Ω–æ –∑–∞—â–∏—Ç–∏—Ç—å –æ—Ç –∑–∞–ø–∏—Å–∏, –Ω–∏—á—Ç–æ –Ω–µ c–º–æ–∂–µ—Ç –µ–≥–æ –ø–æ–≤—Ä–µ–¥–∏—Ç—å.
–ß—Ç–æ–±—ã –∑–∞–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å &lt;strong&gt;REMAPPED Bootloader&lt;/strong&gt;, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤ &lt;strong&gt;bootconfig.inc&lt;/strong&gt; —É–∫–∞–∑–∞—Ç—å &lt;code&gt;#define BOOTLOADER_ADDRESS 0&lt;/code&gt;. –¢–∞–∫–∂–µ, –∏—Å—Ö–æ–¥—è –∏–∑ —Ä–∞–∑–º–µ—Ä–∞ boot-–±–ª–æ–∫–∞, –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —É–∫–∞–∑–∞—Ç—å, –∫—É–¥–∞ &lt;strong&gt;Bootloader&lt;/strong&gt; –¥–æ–ª–∂–µ–Ω –ø—Ä–æ–±—Ä–∞—Å—ã–≤–∞—Ç—å –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è, –æ–±–æ–∑–Ω–∞—á–∏–≤: &lt;code&gt;AppVector 0x800&lt;/code&gt;, &lt;code&gt;AppHighIntVector 0x808&lt;/code&gt;  –∏ &lt;code&gt;AppLowIntVector 0x818&lt;/code&gt;. –û–±–æ –≤—Å—ë–º —ç—Ç–æ–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–æ–±—â–∏—Ç—å –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä—É –æ—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã. –î–ª—è HI-TECH –° —ç—Ç–æ –±—É–¥–µ—Ç –≤—ã–≥–ª—è–¥–µ—Ç—å –≤–æ—Ç —Ç–∞–∫: &lt;code&gt;--RUNTIME=default,+download --CODEOFFSET=800 --ROM=default,-0-7FF&lt;/code&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;em&gt;bootconfig.inc&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;; Copyright (c) 2002-2011,  Microchip Technology Inc.
;
; Microchip licenses this software to you solely for use with Microchip
; products.  The software is owned by Microchip and its licensors, and
; is protected under applicable copyright laws.  All rights reserved.
;
; SOFTWARE IS PROVIDED &amp;quot;AS IS.&amp;quot;  MICROCHIP EXPRESSLY DISCLAIMS ANY
; WARRANTY OF ANY KIND, WHETHER EXPRESS OR IMPLIED, INCLUDING BUT
; NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY, FITNESS
; FOR A PARTICULAR PURPOSE, OR NON-INFRINGEMENT.  IN NO EVENT SHALL
; MICROCHIP BE LIABLE FOR ANY INCIDENTAL, SPECIAL, INDIRECT OR
; CONSEQUENTIAL DAMAGES, LOST PROFITS OR LOST DATA, HARM TO YOUR
; EQUIPMENT, COST OF PROCUREMENT OF SUBSTITUTE GOODS, TECHNOLOGY
; OR SERVICES, ANY CLAIMS BY THIRD PARTIES (INCLUDING BUT NOT LIMITED
; TO ANY DEFENSE THEREOF), ANY CLAIMS FOR INDEMNITY OR CONTRIBUTION,
; OR OTHER SIMILAR COSTS.
;
; To the fullest extent allowed by law, Microchip and its licensors
; liability shall not exceed the amount of fees, if any, that you
; have paid directly to Microchip to use this software.
;
; MICROCHIP PROVIDES THIS SOFTWARE CONDITIONALLY UPON YOUR ACCEPTANCE
; OF THESE TERMS.

; Enable this to work around timing bug found in some PIC18Fxx20&amp;#39;s
;#define TBLWT_BUG

; If you don&amp;#39;t have an RS232 transceiver, you might want this option
;#define INVERT_UART

; Sets OSCCON&amp;lt;IRCF2:IRCF0&amp;gt; for maximum INTOSC frequency (8MHz)
#define USE_MAX_INTOSC

; Sets OSCTUNE.PLLEN bit at start up for frequency multiplication.
#define USE_PLL

; RB0 = 1 required to enable MAX3221 TX output on PICDEM LCD 2 demo board
;#define PICDEM_LCD2

; enable software boot block write protection
#define USE_SOFTBOOTWP

; enable software config words write protection
;#define USE_SOFTCONFIGWP

; Autobaud will be used by default. 
; To save code space or to force a specific baud rate to be used, 
; you can optionally define a BAUDRG value instead. 
; Most PIC18&amp;#39;s support BRG16 mode and use the 
; following equation:
;       BAUDRG = Fosc / (4 * Baud Rate) - 1
;
; Old PIC18&amp;#39;s without BRG16 mode need this equation instead:
;       BAUDRG = Fosc / (16 * Baud Rate) - 1
;
; Examples:
;#define BAUDRG .51  ; 19.2Kbps from 4MHz (BRG16 = 1, BRGH = 1)
;#define BAUDRG .103 ; 115.2Kbps from 48MHz (BRG16 = 1, BRGH = 1)
;#define BAUDRG .85  ; 115.2Kbps from 40MHz (BRG16 = 1, BRGH = 1)
;#define BAUDRG .68  ; 115.2Kbps from 32MHz (BRG16 = 1, BRGH = 1)
;#define BAUDRG .16  ; 115.2Kbps from 8MHz (BRG16 = 1, BRGH = 1)
;#define BAUDRG .11  ; 1Mbps from 48MHz (BRG16 = 1, BRGH = 1)
;#define BAUDRG .9   ; 1Mbps from 40MHz (BRG16 = 1, BRGH = 1)
;#define BAUDRG .4   ; 2Mbps from 40MHz (BRG16 = 1, BRGH = 1)
;#define BAUDRG .3   ; 3Mbps from 48MHz (BRG16 = 1, BRGH = 1)
;#define BAUDRG .12  ; 19.2Kbps from 4MHz (BRG16 = 0, BRGH = 1)
;#define BAUDRG .10  ; 115.2Kbps from 19.6608MHz (BRG16 = 0, BRGH = 1)

; Bootloader must start at the beginning of a FLASH Erase Block. 
; If unspecified, bootloader will automatically be located at the 
; end of program memory address space.

; bootloader at beginning, application start/ISR vectors
; require remapping
#define BOOTLOADER_ADDRESS   0

; useful for running under debugger 
; (debug executive wants to reside at the end of memory space too)
;#define BOOTLOADER_ADDRESS   END_FLASH - (ERASE_FLASH_BLOCKSIZE * 20)

; use on J parts to locate inside flash config erase block
;#define BOOTLOADER_ADDRESS  (END_FLASH - ERASE_FLASH_BLOCKSIZE)

#ifdef BOOTLOADER_ADDRESS
  #if BOOTLOADER_ADDRESS == 0
    ; For Bootloader located at program memory address 0, 
    ; the application firmware must provide remapped reset
    ; and interrupt vectors outside of the Boot Block. The following 
    ; #defines tell the bootloader firmware where application 
    ; entry points are to be expected:

    ; application start up code should be located here.
    #define AppVector           0x800

    ; application high priority interrupt should be located here
    #define AppHighIntVector    0x808

    ; application low priority interrupt should be located here
    #define AppLowIntVector     0x818
  #endif
#endif

; Define UART pins and registers. 
; Modify the following lines if you want to use a different UART module.
;
; Note: If your UART&amp;#39;s RX pin happens to be multiplexed with analog 
;       ANx input functionality, you may need to edit the 
;      &amp;quot;preprocess.inc&amp;quot; DigitalInput macro. Code there needs to 
;       enable the digital input buffer (refer to ADC chapter 
;       of your device&amp;#39;s datasheet).
;
#define UARTNUM 2
#if UARTNUM == 1
    #define UxSPBRG         SPBRG
    #define UxSPBRGH        SPBRGH
    #define UxRCSTA         RCSTA
    #define UxTXSTA         TXSTA
    #define UxRCREG         RCREG
    #define UxTXREG         TXREG
    #define UxPIR           PIR1
    #define UxRCIF          RCIF
    #define UxTXIF          TXIF
    #define UxBAUDCON       BAUDCON

; RX on RC7 is used by default for most PIC18&amp;#39;s.
;    #define RXPORT         PORTC
;    #define RXPIN          .7

;    #define RXPORT          PORTB   ; PIC18F14K50: RX on RB5/AN11
;    #define RXPIN           .5

; RX/AN11 multiplexed -- must enable digital input buffer
;    #define RXANSEL         ANSELH
; ANSELH&amp;lt;3&amp;gt; controls AN11 digital input buffer
;    #define RXAN            .3
#endif

#if UARTNUM == 2
    #define UxSPBRG         SPBRG2
    #define UxSPBRGH        SPBRGH2
    #define UxRCSTA         RCSTA2
    #define UxTXSTA         TXSTA2
    #define UxRCREG         RCREG2
    #define UxTXREG         TXREG2
    #define UxPIR           PIR3
    #define UxRCIF          RC2IF
    #define UxTXIF          TX2IF
    #define UxBAUDCON       BAUDCON2

; RG2 is default RX2 pin for some high pin count PIC18&amp;#39;s.
;    #define RXPORT          PORTG
;    #define RXPIN           .2

; RX2 pin PPS&amp;#39;ed to RD4/RP21 on PIC18F46J11 for example.
    #define RXPORT          PORTD
    #define RXPIN           .7

; On PICs where RX is multiplexed with ANx analog inputs,
    #define RXANSEL         ANSELD
; the digital input buffer needs to be enabled via ANSELx SFRs
    #define RXAN            .7

; devices that use PPS to remap UART2 pins will need these 
; lines defined:

; PPS code for TX2/CK2 output function
;    #define PPS_UTX         .5
;    #define PPS_UTX_PIN     RPOR23  ; UART TX assigned to RP23 pin
;    #define PPS_URX_PIN     .21     ; UART RX assigned to RP21 pin
; PPS register for RX2/CK2 input function
;    #define PPS_URX         RPINR16
#endif

; If you get linker errors complaining 
; &amp;quot;can not fit the absolute section,&amp;quot; you might want to 
; increase BOOTLOADERSIZE below or set the 
; BOOTLOADER_ADDRESS above to a smaller address number.

; Because we need to know the total size of the 
; bootloader before the assembler has finished compiling
; the source code, we have to estimate the final bootloader 
; size and provide it here as BOOTLOADERSIZE. This number 
; is in bytes (twice the instruction word count). 
;
; If you see the bootloader is reserving more FLASH memory 
; than it really needs (you&amp;#39;ll see a bunch of FFFF/NOP 
; instructions at the end of the bootloader memory region),
; you can try reducing BOOTLOADERSIZE.
#define BOOTLOADERSIZE  .708

#define MAJOR_VERSION   .1  ; Bootloader Firmware Version
#define MINOR_VERSION   .5
&lt;/pre&gt;&lt;/div&gt;


&lt;h3&gt;–®–∞–≥ —Ç—Ä–µ—Ç–∏–π - –∑–∞–ø—É—Å–∫ –∏ —Ä–∞–±–æ—Ç–∞ —Å Bootloader'–æ–º&lt;/h3&gt;
&lt;p&gt;–ò—Ç–∞–∫, –º–æ–∂–µ—Ç –±—ã—Ç—å –¥–≤–∞ —Ä–µ–∂–∏–º–∞ —Ä–∞–±–æ—Ç—ã –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞: —Ä–µ–∂–∏–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã –∏ —Ä–µ–∂–∏–º &lt;strong&gt;Bootloader&lt;/strong&gt;'–∞. –ü–æ—Å–ª–µ –ø–æ–¥–∞—á–∏ –ø–∏—Ç–∞–Ω–∏—è –Ω–∞ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä, –ª–∏–±–æ –ø–æ—Å–ª–µ &lt;em&gt;Reset&lt;/em&gt;, –∑–∞–≥—Ä—É–∑—á–∏–∫ &lt;strong&gt;Bootloader&lt;/strong&gt;'–∞ –ø–æ –Ω–µ–∫–æ—Ç–æ—Ä—ã–º –ø—Ä–∏–∑–Ω–∞–∫–∞–º –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ä–µ—à–µ–Ω–∏–µ, –∫–∞–∫–æ–π –∏–∑ –Ω–∏—Ö –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å. –û –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∑–∞–ø—É—Å–∫–∞ &lt;strong&gt;Bootloader&lt;/strong&gt;'–∞ –≥–æ–≤–æ—Ä—è—Ç —Å–ª–µ–¥—É—é—â–∏–µ –ø—Ä–∏–∑–Ω–∞–∫–∏:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;O—Å–Ω–æ–≤–Ω–æ–π –ø—Ä–æ–≥—Ä–∞–º–º—ã –Ω–µ—Ç, –Ω–∞–ø—Ä–∏–º–µ—Ä –ø–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;–ï—Å–ª–∏ –Ω–∞ –≤—Ö–æ–¥–µ RX –ª–æ–≥–∏—á–µ—Å–∫–∏–π –Ω–æ–ª—å (–≤ —Ç–µ—Ä–º–∏–Ω–∞—Ö RS-232 —Å–æ—Å—Ç–æ—è–Ω–∏–µ ‚ÄúBreak")&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;–¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å &lt;strong&gt;Bootloader&lt;/strong&gt;, –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–∞–≤–∞—Ç—å —Å–ª–µ–¥—É—é—â—É—é –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –¥–µ–π—Å—Ç–≤–∏–π: —Ñ–∏–∑–∏—á–µ—Å–∫–∏ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –∫ –ü–ö, —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ª–æ–≥–∏—á–µ—Å–∫–∏–π –Ω–æ–ª—å –Ω–∞ RX, —ç—Ç–æ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –ø–æ—Å—Ä–µ–¥—Å—Ç–≤–æ–º –∫–Ω–æ–ø–æ—á–∫–∏ &lt;img alt="–ö–Ω–æ–ø–∫–∞ –ü–∞—É–∑–∞" src="http://proiot.ru/blog/posts/2012/10/03/zamechatelnyi-bootloader-ot-microchip-dlia-pic16-pic18/shots/break_btn.png"&gt;, –ø–æ—Å–ª–µ —á–µ–≥–æ –≤–≤–µ—Å—Ç–∏ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ RESET (–≤ –ø—Ä–æ—Å—Ç–µ–π—à–µ–º —Å–ª—É—á–∞–µ - –≤–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å –ø–∏—Ç–∞–Ω–∏–µ). –° —ç—Ç–æ–≥–æ –º–æ–º–µ–Ω—Ç–∞ –∫ –Ω–µ–º—É –º–æ–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è —Å–æ —Å—Ç–æ—Ä–æ–Ω—ã –ü–ö &lt;img alt="–ö–Ω–æ–ø–∫–∞ –ü–∞—É–∑–∞" src="http://proiot.ru/blog/posts/2012/10/03/zamechatelnyi-bootloader-ot-microchip-dlia-pic16-pic18/shots/boot_btn.png"&gt;&lt;/p&gt;
&lt;p&gt;–ü–û –¥–ª—è –ü–ö –ø–æ—Å—Ç–∞–≤–ª—è–µnc—è –≤ –∏—Å—Ö–æ–¥–Ω–∏–∫–∞—Ö, –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –µ–≥–æ –º–æ–∂–Ω–æ –ø–æ–¥–∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ &lt;strong&gt;QTCreator&lt;/strong&gt;, –∞ –¥–ª—è Windows —É–∂–µ –µ—Å—Ç—å –≥–æ—Ç–æ–≤—ã–π –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–π .exe —Ñ–∞–π–ª. –ï—Å–ª–∏ –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ –≤ Linux –ø–æ–¥–æ–∑—Ä–∏—Ç–µ–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–µ—Ä–µ—Ö–æ–¥–Ω–∏–∫ –Ω–∞ PL2303, –ø–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–¥–µ–ª–∞—Ç—å —Å–ª–µ–¥—É—é—â–µ–µ:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ sudo modprobe -r pl2303
~$ sudo modprobe pl2303
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ï—Å–ª–∏ –≤ &lt;strong&gt;Linux&lt;/strong&gt; –æ–±–æ–ª–æ—á–∫–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å &lt;strong&gt;Bootloader&lt;/strong&gt;'–æ–º –≤–æ–æ–±—â–µ –Ω–µ –≤–∏–¥–∏—Ç USB-to-serial –ø–µ—Ä–µ—Ö–æ–¥–Ω–∏–∫–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä &lt;code&gt;/dev/ttyUSB0&lt;/code&gt;), —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ —Ç–µ–∫—É—â–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–æ—Å—Ç–æ –Ω–µ –æ–±–ª–∞–¥–∞–µ—Ç —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–º–∏ –ø—Ä–∞–≤–∞–º–∏. –ü–æ—Å–∫–æ–ª—å–∫—É –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –ø—Ä–æ–≥—Ä–∞–º–º—É –∏—Ö-–ø–æ–¥ &lt;strong&gt;root&lt;/strong&gt;'a –Ω–µ—É–¥–æ–±–Ω–æ, –Ω–∏–∂–µ –æ–ø–∏—Å–∞–Ω –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Å–ª—É—á–∞–π –ª–µ—á–µ–Ω–∏—è OpenSUSE 12.1 - –ø–æ–ª–Ω—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏ –Ω–∞ USB-to-serial –æ–±–ª–∞–¥–∞–µ—Ç –≥—Ä—É–ø–ø–∞ &lt;em&gt;dialout&lt;/em&gt;, –ø–æ—ç—Ç–æ–º—É –≤ –Ω–µ—ë –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å–∏—Å—Ç–µ–º—ã, –ø–æ—Å–ª–µ —á–µ–≥–æ, —á—Ç–æ–±—ã –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤—Å—Ç—É–ø–∏–ª–∏ –≤ —Å–∏–ª—É, –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –ø–µ—Ä–µ–ª–æ–≥–∏–Ω–∏—Ç—å—Å—è:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;oleg@linux-ubuc:~&amp;gt; ls -l /dev/ttyUSB?
crw-rw---- &lt;span class="m"&gt;1&lt;/span&gt; root dialout &lt;span class="m"&gt;188&lt;/span&gt;, &lt;span class="m"&gt;0&lt;/span&gt; –º–∞—Ä—Ç–∞  &lt;span class="m"&gt;1&lt;/span&gt; &lt;span class="m"&gt;10&lt;/span&gt;:13 /dev/ttyUSB0
oleg@linux-ubuc:~&amp;gt; sudo /usr/sbin/groupmod -A &lt;span class="nv"&gt;$USER&lt;/span&gt; dialout
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–í Ubuntu 12.04 –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –º–æ–∂–Ω–æ —Ç–∞–∫: &lt;code&gt;sudo adduser $USER dialout&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;–ù–∞ —ç—Ç–æ–º –≤—Å—ë, –Ω–∞–¥—ë–∂–Ω—ã—Ö –¥–µ–≤–∞–π—Å–æ–≤ –í–∞–º !&lt;/p&gt;
&lt;p&gt;–ù–∞ –≤—Å—è–∫–∏–π –ø–æ–∂–∞—Ä–Ω—ã–π –∏—Å—Ö–æ–¥–Ω–∏–∫–∏ &lt;a href="http://proiot.ru/blog/posts/2012/10/03/zamechatelnyi-bootloader-ot-microchip-dlia-pic16-pic18/bootloader.zip"&gt;—Ç—É—Ç&lt;/a&gt;.&lt;/p&gt;</content><category term="Bootloader"></category><category term="UART"></category></entry></feed>