<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>üè† –ò–Ω—Ç–µ—Ä–Ω–µ—Ç –í—Å–µ–≥–æ üöó - IoT</title><link href="http://proiot.ru/" rel="alternate"></link><link href="http://proiot.ru/feeds/iot.atom.xml" rel="self"></link><id>http://proiot.ru/</id><updated>2018-09-09T00:00:00+03:00</updated><entry><title>–ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç ¬´Smart Config¬ª</title><link href="http://proiot.ru/blog/posts/2018/09/09/kak-rabotaet-smart-config/" rel="alternate"></link><published>2018-09-09T00:00:00+03:00</published><updated>2018-09-09T00:00:00+03:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2018-09-09:/blog/posts/2018/09/09/kak-rabotaet-smart-config/</id><summary type="html">&lt;p&gt;–û–±—ã—á–Ω–æ –ø—Ä–æ—Ü–µ–¥—É—Ä–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞) –∫ Wi-Fi –≤—ã–≥–ª—è–¥–∏—Ç —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º: —Ç–µ–ª–µ—Ñ–æ–Ω –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ø–æ–∏—Å–∫ —Å–µ—Ç–µ–π Wi-Fi, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç —Å–µ—Ç—å, –≤–≤–æ–¥–∏—Ç –ø–∞—Ä–æ–ª—å. –ï—Å–ª–∏ –∂–µ –≥–æ–≤–æ—Ä–∏—Ç—å –æ–± —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö IoT, —Ç—Ä—É–¥–Ω–æ—Å—Ç—å –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ç–æ–º, —á—Ç–æ –º–Ω–æ–≥–∏–µ –∏–∑ –Ω–∏—Ö –Ω–µ –∏–º–µ—é—Ç –¥–∏—Å–ø–ª–µ—è –∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã, –∞ –∑–∞—á–∞—Å—Ç—É—é —É –Ω–∏—Ö –≤–æ–æ–±—â–µ –Ω–µ—Ç ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;p&gt;–û–±—ã—á–Ω–æ –ø—Ä–æ—Ü–µ–¥—É—Ä–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω–∞) –∫ Wi-Fi –≤—ã–≥–ª—è–¥–∏—Ç —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º: —Ç–µ–ª–µ—Ñ–æ–Ω –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ø–æ–∏—Å–∫ —Å–µ—Ç–µ–π Wi-Fi, –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç —Å–µ—Ç—å, –≤–≤–æ–¥–∏—Ç –ø–∞—Ä–æ–ª—å. –ï—Å–ª–∏ –∂–µ –≥–æ–≤–æ—Ä–∏—Ç—å –æ–± —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö IoT, —Ç—Ä—É–¥–Ω–æ—Å—Ç—å –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ç–æ–º, —á—Ç–æ –º–Ω–æ–≥–∏–µ –∏–∑ –Ω–∏—Ö –Ω–µ –∏–º–µ—é—Ç –¥–∏—Å–ø–ª–µ—è –∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã, –∞ –∑–∞—á–∞—Å—Ç—É—é —É –Ω–∏—Ö –≤–æ–æ–±—â–µ –Ω–µ—Ç –Ω–∏–∫–∞–∫–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞. –¢–∞–∫–∏–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º –Ω—É–∂–Ω—ã –¥—Ä—É–≥–∏–µ —Å–ø–æ—Å–æ–±—ã –ø–æ–ª—É—á–µ–Ω–∏—è –∏–º–µ–Ω–∏ —Å–µ—Ç–∏ –∏ –ø–∞—Ä–æ–ª—è –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.&lt;/p&gt;
&lt;p&gt;–†–µ–∂–∏–º —Ç–æ—á–∫–∏ –¥–æ—Å—Ç—É–ø–∞ (Access Point, AP) ‚Äî –Ω–∞–∏–±–æ–ª–µ–µ –∏–∑—É—á–µ–Ω–Ω—ã–π —Å–µ–≥–æ–¥–Ω—è —Å–ø–æ—Å–æ–± –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤, –Ω–µ –∏–º–µ—é—â–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞. –ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–¥–∫–ª—é—á–∏—Ç —Å–≤–æ–π —Å–º–∞—Ä—Ç—Ñ–æ–Ω –∫ AP –Ω–µ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞, –æ–Ω –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –≤–µ–±-–±—Ä–∞—É–∑–µ—Ä —Å–º–∞—Ä—Ç—Ñ–æ–Ω–∞ –∏ –≤—Ö–æ–¥–∏—Ç –Ω–∞ –≤–µ–±-—Å–∞–π—Ç —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞, –∏—Å–ø–æ–ª—å–∑—É—è –∑–∞–¥–∞–Ω–Ω—ã–π –ª–æ–∫–∞–ª—å–Ω—ã–π URL –∏–ª–∏ IP-–∞–¥—Ä–µ—Å. –ù–∞ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–º –≤–µ–±-—Å–∞–π—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–±–∏—Ä–∞–µ—Ç –∏–º—è Wi-Fi —Å–µ—Ç–∏ –∏ –ø–∞—Ä–æ–ª—å. –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å–µ—Ç–µ–≤—ã–µ —Ä–µ–∫–≤–∏–∑–∏—Ç—ã –≤ —ç–Ω–µ—Ä–≥–æ–Ω–µ–∑–∞–≤–∏—Å–∏–º–æ–π –ø–∞–º—è—Ç–∏, –∞ –∑–∞—Ç–µ–º –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç –∏–∑ —Ä–µ–∂–∏–º–∞ AP –≤ —Ä–µ–∂–∏–º —Å—Ç–∞–Ω—Ü–∏–∏, —á—Ç–æ–±—ã –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –¥–æ–º–∞—à–Ω–µ–π —Å–µ—Ç–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã—Ö —Å–µ—Ç–µ–≤—ã—Ö —Ä–µ–∫–≤–∏–∑–∏—Ç–æ–≤. –ù–µ–¥–æ—Å—Ç–∞—Ç–æ–∫ —Ä–µ–∂–∏–º–∞ AP –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ç–æ–º, —á—Ç–æ –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –∫ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω–æ–π —Å–µ—Ç–∏ AP –Ω–µ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ —Ç–µ–ª–µ—Ñ–æ–Ω –æ—Ç–∫–ª—é—á–∞–µ—Ç—Å—è –æ—Ç –¥–æ–º–∞—à–Ω–µ–π —Å–µ—Ç–∏. –≠—Ç–æ –º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å –ø–µ—Ä–µ—Ä—ã–≤—ã –≤ –ø–µ—Ä–µ–¥–∞—á–µ –¥–∞–Ω–Ω—ã—Ö –∏ –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –ø–æ—è–≤–ª–µ–Ω–∏—é —Å–æ–æ–±—â–µ–Ω–∏–π –æ–± –æ—à–∏–±–∫–∞—Ö. –¢–∞–∫–∂–µ –Ω–µ –≤—Å–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª–∏ —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç API –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º–º–Ω–æ–≥–æ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è Wi-Fi —Å–µ—Ç–µ–π, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—ã–Ω—É–∂–¥–µ–Ω —ç—Ç–æ –¥–µ–ª–∞—Ç—å –≤—Ä—É—á–Ω—É—é.&lt;/p&gt;
&lt;p&gt;–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è ¬´Smart Config¬ª –ª–∏—à–µ–Ω–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–æ–≤. –û–Ω–∞ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ü–ö, —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –∏–ª–∏ –ø–ª–∞–Ω—à–µ—Ç–∞ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–≤–µ—Å—Ç–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–µ—Ç–∏ —Å –ø–æ–º–æ—â—å—é –¥–∏—Å–ø–ª–µ—è –∏ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã –ü–ö, —Ç–µ–ª–µ—Ñ–æ–Ω–∞ –∏–ª–∏ –ø–ª–∞–Ω—à–µ—Ç–∞ —Å –ø–æ—Å–ª–µ–¥—É—é—â–µ–π –ø–µ—Ä–µ–¥–∞—á–µ–π –≤–≤–µ–¥—ë–Ω–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ IoT-—É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º. –ò–∑ –∏–∑–≤–µ—Å—Ç–Ω—ã—Ö —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–π –Ω–∞ —Ç–µ–∫—É—â–∏–π –º–æ–º–µ–Ω—Ç —Å—Ç–æ–∏—Ç —É–ø–æ–º—è–Ω—É—Ç—å CC3200 SmartConfig –∏ ESP-Touch.&lt;/p&gt;
&lt;h2&gt;–ö–ê–ö –†–ê–ë–û–¢–ê–ï–¢&lt;/h2&gt;
&lt;p&gt;–ò—Ç–∞–∫ —É –Ω–∞—Å –µ—Å—Ç—å –¥–≤–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ ‚Äî –æ–¥–Ω–æ (—Ç–µ–ª–µ—Ñ–æ–Ω) —É–∂–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–æ –∫ Wi-Fi —Å–µ—Ç–∏, –∏ –¥—Ä—É–≥–æ–µ (IoT), –∫–æ—Ç–æ—Ä–æ–µ –Ω—É–∂–Ω–æ –ø–æ–¥–∫–ª—é—á–∏—Ç—å –∫ Wi-Fi —Å–µ—Ç–∏. IoT —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ —Å–∫–∞–Ω–∏—Ä—É–µ—Ç Wi-Fi —ç—Ñ–∏—Ä. –î–ª—è —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –¥–≤–∞  Wi-Fi –∞–¥–∞–ø—Ç–µ—Ä–∞, –º–æ–∂–Ω–æ –¥–∞–∂–µ –Ω–∞ –æ–¥–Ω–æ–º –∫–æ–º–ø—å—é—Ç–µ—Ä–µ:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ iwconfig &lt;span class="m"&gt;2&lt;/span&gt;&amp;gt; /dev/null
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–í—ã–≤–æ–¥:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;wlo1      IEEE 802.11  ESSID:&amp;quot;Dumer&amp;quot;  
          Mode:Managed  Frequency:2.447 GHz  Access Point: XX:XX:XX:XX:XX:XX   
          Bit Rate=121.5 Mb/s   Tx-Power=15 dBm   
          Retry short limit:7   RTS thr:off   Fragment thr:off
          Power Management:off
          Link Quality=61/70  Signal level=-49 dBm  
          Rx invalid nwid:0  Rx invalid crypt:0  Rx invalid frag:0
          Tx excessive retries:27  Invalid misc:3493   Missed beacon:0

wlxbcf68565bc38  IEEE 802.11  ESSID:off/any  
          Mode:Managed  Access Point: Not-Associated   Tx-Power=20 dBm   
          Retry short  long limit:2   RTS thr:off   Fragment thr:off
          Power Management:off
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ê–¥–∞–ø—Ç–µ—Ä wlo1 –ø–æ–¥–∫–ª—é—á—ë–Ω –∫ —Å–µ—Ç–∏ Dumer, wlxbcf68565bc38 –±—É–¥–µ—Ç —Å–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å —ç—Ñ–∏—Ä. –ö–∞–∫ –∏–∑–≤–µ—Å—Ç–Ω–æ —Å–µ—Ç–∫–∞ —á–∞—Å—Ç–æ—Ç Wi-Fi —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ &lt;a href="http://proiot.ru/blog/posts/2016/07/17/ishchem-svobodnye-wi-fi-kanaly-s-pomoshchiu-gnuplot/"&gt;14 –∫–∞–Ω–∞–ª–æ–≤&lt;/a&gt;, –¥–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã –±—É–¥–µ–º —Å–ª—É—à–∞—Ç—å —Ç–æ–ª—å–∫–æ —Ç–æ—Ç (8), –∫ –∫–æ—Ç–æ—Ä–æ–º—É –ø–æ–¥–∫–ª—é—á—ë–Ω wlo1.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ iwlist wlo1 channel
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–í—ã–≤–æ–¥:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;wlo1      14 channels in total; available frequencies :
          Channel 01 : 2.412 GHz
          Channel 02 : 2.417 GHz
          Channel 03 : 2.422 GHz
          Channel 04 : 2.427 GHz
          Channel 05 : 2.432 GHz
          Channel 06 : 2.437 GHz
          Channel 07 : 2.442 GHz
          Channel 08 : 2.447 GHz
          Channel 09 : 2.452 GHz
          Channel 10 : 2.457 GHz
          Channel 11 : 2.462 GHz
          Channel 12 : 2.467 GHz
          Channel 13 : 2.472 GHz
          Channel 14 : 2.484 GHz
          Current Frequency=2.447 GHz (Channel 8)
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ü–µ—Ä–µ–≤–µ–¥—ë–º –∞–¥–∞–ø—Ç–µ—Ä –≤ —Ä–µ–∂–∏–º —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ ifconfig wlxbcf68565bc38 down
~$ iwconfig wlxbcf68565bc38 mode monitor
~$ ifconfig wlxbcf68565bc38 up
~$ iwconfig wlxbcf68565bc38 channel &lt;span class="m"&gt;8&lt;/span&gt;
~$ iwlist wlxbcf68565bc38 channel
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ü—Ä–∏–º–µ—Ä–Ω–æ —Ç–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç —ç—Ñ–∏—Ä Wi-Fi –≤ WireShark:&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2018/09/09/kak-rabotaet-smart-config/wirshark.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;MAC –∞–¥—Ä–µ—Å–∞ –∏ –∫–æ–µ-–∫–∞–∫–∞—è –¥—Ä—É–≥–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –≤ Wi-Fi —Ñ—Ä–µ–π–º–∞—Ö –∏–¥—ë—Ç –≤ –æ—Ç–∫—Ä—ã—Ç–æ–º –≤–∏–¥–µ –±–µ–∑ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è. –ü–æ–ª–µ–∑–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –≤–Ω—É—Ç—Ä–∏ Wi-Fi —Ñ—Ä–µ–π–º–∞ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω—ã, –Ω–æ –º—ã –≤–∏–¥–∏–º –∏—Ö –¥–ª–∏–Ω—É. –ï—Å–ª–∏ –ø—Ä–µ–¥–ø–æ–ª–æ–∂–∏—Ç—å, —á—Ç–æ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω—è–µ—Ç –¥–ª–∏–Ω—É –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö –Ω–∞ –∫–∞–∫—É—é-—Ç–æ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—É, –ø–æ—á–µ–º—É –±—ã –Ω–µ –ø–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –º–µ–Ω—è—è –¥–ª–∏–Ω—É –ø–∞–∫–µ—Ç–∞ –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø—É –æ–¥–∏–Ω –ø–∞–∫–µ—Ç == –æ–¥–∏–Ω –±–∞–π—Ç. –î–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ 42 –±–∞–π—Ç –Ω—É–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å 42 –ø–∞–∫–µ—Ç–∞ –≥–¥–µ –¥–ª–∏–Ω–∞ –∫–∞–∂–¥–æ–≥–æ –ø–∞–∫–µ—Ç–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –∑–Ω–∞—á–µ–Ω–∏—è –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º–æ–≥–æ –±–∞–π—Ç–∞. –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–∞–∫–µ—Ç–∞ –Ω–∞—Å –Ω–µ –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç —Ç.–∫. —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∞—Ç—å –µ–≥–æ –º–æ–≥—É—Ç —Ç–æ–ª—å–∫–æ —É—á–∞—Å—Ç–Ω–∏–∫–∏ Wi-Fi —Å–µ—Ç–∏, –ø–æ–¥–∫–ª—é—á—ë–Ω–Ω—ã–µ –∫ —Ä–æ—É—Ç–µ—Ä—É. –í—Å–µ —Å–∫—Ä–∏–ø—Ç—ã –ø—Ä–æ–≤–µ—Ä—è–ª–∏—Å—å –Ω–∞ &lt;strong&gt;python3&lt;/strong&gt;:&lt;/p&gt;
&lt;p&gt;&lt;em&gt;transmitter.py&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="ch"&gt;#!/usr/bin/python3&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;socket&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;binascii&lt;/span&gt;

&lt;span class="n"&gt;MCAST_GRP&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;234.42.42.42&amp;#39;&lt;/span&gt;
&lt;span class="n"&gt;MCAST_PORT&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;7001&lt;/span&gt;

&lt;span class="n"&gt;sock&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;socket&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;socket&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;socket&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;AF_INET&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;socket&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;SOCK_DGRAM&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;socket&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;IPPROTO_UDP&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;sock&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;setsockopt&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;socket&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;IPPROTO_IP&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;socket&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;IP_MULTICAST_TTL&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;crc8&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
  &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;binascii&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;crc32&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="mh"&gt;0xFF&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;transmit_one_byte&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
  &lt;span class="k"&gt;assert&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="k"&gt;assert&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;=&lt;/span&gt; &lt;span class="mi"&gt;548&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="c1"&gt;# 576(MTU) - 20(IP) - 8(UDP)&lt;/span&gt;
  &lt;span class="n"&gt;data&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;bytes&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="n"&gt;sock&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sendto&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;MCAST_GRP&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;MCAST_PORT&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;

&lt;span class="n"&gt;preamble&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;515&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;514&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;513&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;512&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="n"&gt;payload&lt;/span&gt;  &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="sa"&gt;b&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;hello world!&amp;#39;&lt;/span&gt;

&lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="bp"&gt;True&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
  &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;preamble&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;transmit_one_byte&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="n"&gt;transmit_one_byte&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;payload&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
  &lt;span class="n"&gt;transmit_one_byte&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;crc8&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;payload&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
  &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;payload&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;transmit_one_byte&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–í —Ç–µ–∫—É—â–µ–º –ø—Ä–∏–º–µ—Ä–µ –¥–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –Ω–∞ –º—É–ª—å—Ç–∏–∫–∞—Å—Ç –∞–¥—Ä–µ—Å 234.xx.xx.xx –ø–æ &lt;a href="http://proiot.ru/blog/posts/2017/10/03/setevoe-programmirovanie-udp-ntp-chasy/"&gt;UDP&lt;/a&gt;. –í–Ω–∞—á–∞–ª–µ –∏–¥—ë—Ç —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ø–æ—Å—ã–ª–∫–∞ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ preamble. –°–æ–¥–µ—Ä–∂–∏–º–æ–µ preamble —Ç–∞–∫–∂–µ –∏–∑–≤–µ—Å—Ç–Ω–æ –ø—Ä–∏—ë–º–Ω–∏–∫—É, —Å—Ä–∞–≤–Ω–∏–≤–∞—è –ø—Ä–∏–Ω—è—Ç—ã–µ –ø–∞–∫–µ—Ç—ã —Å preamble –æ–Ω –º–æ–∂–µ—Ç –≤—ã—Å—á–∏—Ç–∞—Ç—å –∫–æ–Ω—Å—Ç–∞–Ω—Ç—É, –¥–æ–±–∞–≤–ª—è–µ–º—É—é –ø—Ä–∏ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–∏. –ó–∞—Ç–µ–º –ø–µ—Ä–µ–¥–∞—ë–º –æ–±—â—É—é –¥–ª–∏–Ω—É –ø–æ–ª–µ–∑–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö, –∏—Ö –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—É—é —Å—É–º–º—É –∏ —Å–∞–º–∏ –¥–∞–Ω–Ω—ã–µ.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;receiver.py&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="ch"&gt;#!/usr/bin/python3&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;sys&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;binascii&lt;/span&gt;

&lt;span class="n"&gt;preamble&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;515&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;514&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;513&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;512&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;crc8&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
  &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;binascii&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;crc32&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="mh"&gt;0xFF&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;decode&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;crc&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
  &lt;span class="k"&gt;try&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;data&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;bytes&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;crc&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;crc8&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
      &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="k"&gt;except&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="k"&gt;pass&lt;/span&gt;

&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;parse&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
  &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;idx&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;enumerate&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;idx&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;=&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;preamble&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
      &lt;span class="n"&gt;diff&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;set&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;k&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;k&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="nb"&gt;zip&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;preamble&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;idx&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;preamble&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;&lt;span class="n"&gt;idx&lt;/span&gt;&lt;span class="p"&gt;]))&lt;/span&gt;
      &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;diff&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt; &lt;span class="ow"&gt;and&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="n"&gt;idx&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;diff&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pop&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
        &lt;span class="n"&gt;l&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;idx&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;c&lt;/span&gt;
        &lt;span class="n"&gt;payload&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;d&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;d&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;idx&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="n"&gt;idx&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="n"&gt;l&lt;/span&gt;&lt;span class="p"&gt;]]&lt;/span&gt;
        &lt;span class="n"&gt;decode&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;payload&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;:],&lt;/span&gt; &lt;span class="n"&gt;payload&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;

&lt;span class="n"&gt;received&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[]&lt;/span&gt;

&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;line&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;sys&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;stdin&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
  &lt;span class="n"&gt;line&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;line&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;strip&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
  &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;received&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;42&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="n"&gt;received&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pop&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;line&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;isdigit&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
    &lt;span class="n"&gt;received&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;append&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;line&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
    &lt;span class="n"&gt;parse&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;received&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–£ Wireshark –µ—Å—Ç—å –∫–æ–Ω—Å–æ–ª—å–Ω—ã–π –∞–Ω–∞–ª–æ–≥ tshark. –ó–∞–æ–¥–Ω–æ –æ—Ç—Ñ–∏–ª—å—Ç—Ä—É–µ–º —Ç–æ—á–Ω–æ –Ω–µ –Ω—É–∂–Ω—ã–µ –ø–∞–∫–µ—Ç—ã, –æ—Å—Ç–∞–≤–∏–≤ —Ç–æ–ª—å–∫–æ data:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ tshark -i wlxbcf68565bc38 -I -T fields -e data.len subtype data &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
   python3 receiver.py
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–í –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –∑–∞—à—É–º–ª—ë–Ω–Ω–æ—Å—Ç–∏ —ç—Ñ–∏—Ä–∞ —á–∞—Å—Ç—å –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã—Ö –ø–∞–∫–µ—Ç–æ–≤ —Ç–µ—Ä—è–µ—Ç—Å—è –∏ —ç—Ç–æ –Ω–µ–∏–∑–±–µ–∂–Ω–æ. –î–ª—è —É–≤–µ–ª–∏—á–µ–Ω–∏—è –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ö–æ–¥ –•–µ–º–º–∏–Ω–≥–∞, –Ω–æ —ç—Ç–æ —É–∂–µ —É–¥–µ–ª –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—è —á–∏–ø–æ–≤ –∏ SDK —Å–æ ¬´Smart Config¬ª –Ω–∞ –±–æ—Ä—Ç—É.&lt;/p&gt;
&lt;p&gt;–ö–ª—é—á–µ–≤—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ ¬´Smart Config¬ª ‚Äî –ø—Ä–æ—Å—Ç–æ—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –±–µ—Å–ø—Ä–µ–ø—è—Ç—Å—Ç–≤–µ–Ω–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –≤ —Ç–µ–ª–µ—Ñ–æ–Ω–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞. –ö—Ä–æ–º–µ —Ç–æ–≥–æ, –µ—Å–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤ Wi-Fi –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ —Ä–µ–∂–∏–º–µ ¬´Smart Config¬ª, –æ–¥–Ω–æ —Ç–µ–ª–µ—Ñ–æ–Ω–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –º–æ–∂–µ—Ç –æ–±–µ—Å–ø–µ—á–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∏—Ö –≤—Å–µ—Ö –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ.&lt;/p&gt;
&lt;p&gt;–û—Å–Ω–æ–≤–Ω–æ–π –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ–∫ —ç—Ç–æ–π —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ —Ç–æ–º, —á—Ç–æ —Ç–µ–ª–µ—Ñ–æ–Ω –¥–æ–ª–∂–µ–Ω –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –∫ —Å–µ—Ç–∏, –∏—Å–ø–æ–ª—å–∑—É—è —Ç—É –ø–æ–ª–æ—Å—É —á–∞—Å—Ç–æ—Ç –∏ —Ç—É —Å–∫–æ—Ä–æ—Å—Ç—å –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è –Ω–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ–º. –ß—Ç–æ –µ—Å–ª–∏ –Ω–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–Ω–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–∏–∞–ø–∞–∑–æ–Ω 2,4 –ì–ì—Ü, –∞ —Ç–µ–ª–µ—Ñ–æ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–ª—è —Å–≤—è–∑–∏ —Å –¥–≤—É—Ö–¥–∏–∞–ø–∞–∑–æ–Ω–Ω–æ–π —Å–µ—Ç—å—é –¥–∏–∞–ø–∞–∑–æ–Ω 5 –ì–ì—Ü ?&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2018/09/09/kak-rabotaet-smart-config/smartconfig.zip"&gt;–ò—Å—Ö–æ–¥–Ω–∏–∫–∏&lt;/a&gt;.&lt;/p&gt;</content><category term="Wi-Fi"></category></entry><entry><title>–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å ¬´–ò–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –≤–µ—â–µ–π¬ª - TLS / DTLS</title><link href="http://proiot.ru/blog/posts/2018/01/05/bezopasnost-interneta-veshchei-tls-dtls/" rel="alternate"></link><published>2018-01-05T00:00:00+02:00</published><updated>2018-01-05T00:00:00+02:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2018-01-05:/blog/posts/2018/01/05/bezopasnost-interneta-veshchei-tls-dtls/</id><summary type="html">&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2017/10/03/setevoe-programmirovanie-udp-ntp-chasy/"&gt;–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º&lt;/a&gt; –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å —Å–µ—Ç–µ–≤—ã–µ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã.&lt;/p&gt;
&lt;p&gt;TLS (Transport Layer Security) ‚Äì –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –ø—Ä–æ—Ç–æ–∫–æ–ª, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—â–∏–π –∑–∞—â–∏—â—ë–Ω–Ω—É—é –æ—Ç –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏—è –∏ –ø–æ–¥–º–µ–Ω—ã –ø–µ—Ä–µ–¥–∞—á—É –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É —É–∑–ª–∞–º–∏ –≤ —Å–µ—Ç–∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç. –° —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–π —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è TLS —Ä–∞—Å–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –Ω–∞–¥ &lt;a href="http://proiot.ru/blog/posts/2017/10/09/setevoe-programmirovanie-tcp-http-server/"&gt;TCP&lt;/a&gt; (Transmission Control Protocol), —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –±–æ–ª–µ–µ –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–º –ø—Ä–æ—Ç–æ–∫–æ–ª–∞–º (—Ç–∞–∫–∏–º –∫–∞–∫ HTTP, MQTT –∏ –¥—Ä.) —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π. –ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏ ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2017/10/03/setevoe-programmirovanie-udp-ntp-chasy/"&gt;–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º&lt;/a&gt; –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å —Å–µ—Ç–µ–≤—ã–µ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã.&lt;/p&gt;
&lt;p&gt;TLS (Transport Layer Security) ‚Äì –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏–π –ø—Ä–æ—Ç–æ–∫–æ–ª, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—â–∏–π –∑–∞—â–∏—â—ë–Ω–Ω—É—é –æ—Ç –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏—è –∏ –ø–æ–¥–º–µ–Ω—ã –ø–µ—Ä–µ–¥–∞—á—É –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É —É–∑–ª–∞–º–∏ –≤ —Å–µ—Ç–∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç. –° —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–π —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è TLS —Ä–∞—Å–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –Ω–∞–¥ &lt;a href="http://proiot.ru/blog/posts/2017/10/09/setevoe-programmirovanie-tcp-http-server/"&gt;TCP&lt;/a&gt; (Transmission Control Protocol), —á—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –±–æ–ª–µ–µ –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã–º –ø—Ä–æ—Ç–æ–∫–æ–ª–∞–º (—Ç–∞–∫–∏–º –∫–∞–∫ HTTP, MQTT –∏ –¥—Ä.) —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π. –ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏ –ø—Ä–æ—Ç–æ–∫–æ–ª TLS —è–≤–ª—è–µ—Ç—Å—è –Ω–∞—Å–ª–µ–¥–Ω–∏–∫–æ–º SSL (Secure Sockets Layer), –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–º –≤ Netscape –¥–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –∫–æ–º–º–µ—Ä—Ü–∏–∏ –≤ –ò–Ω—Ç–µ—Ä–Ω–µ—Ç–µ.&lt;/p&gt;
&lt;p&gt;–î–ª—è &lt;a href="http://proiot.ru/blog/posts/2017/10/03/setevoe-programmirovanie-udp-ntp-chasy/"&gt;UDP&lt;/a&gt; (User Datagram Protocol) –±—ã–ª–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–∞ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è TLS, –ø–æ–ª—É—á–∏–≤—à–∞—è –Ω–∞–∑–≤–∞–Ω–∏–µ DTLS (Datagram Transport Layer Security). –í —Ç–æ –≤—Ä–µ–º—è –∫–∞–∫ TCP –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—É—é –¥–æ—Å—Ç–∞–≤–∫—É –ø–∞–∫–µ—Ç–æ–≤ –æ—Ç –∏—Å—Ç–æ—á–Ω–∏–∫–∞ –∫ –ø–æ–ª—É—á–∞—Ç–µ–ª—é, UDP –ø–∞–∫–µ—Ç—ã –º–æ–≥—É—Ç –ø–æ—Ç–µ—Ä—è—Ç—å—Å—è –∏ –∏—Ö –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç—Å—è. –ü—Ä–æ—Ç–æ–∫–æ–ª DTLS —É—á–∏—Ç—ã–≤–∞–µ—Ç –≤—ã—à–µ—É–∫–∞–∑–∞–Ω–Ω—ã–µ –æ—Ç–ª–∏—á–∏—è TCP –∏ UDP. &lt;/p&gt;
&lt;h2&gt;–î–ï–ú–û&lt;/h2&gt;
&lt;p&gt;–ù–∞ –∫–∞—Ä—Ç–∏–Ω–∫–µ DTLS —Å–µ—Ä–≤–µ—Ä –Ω–∞ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–µ c –û–° &lt;a href="http://proiot.ru/blog/posts/2017/10/03/setevoe-programmirovanie-udp-ntp-chasy/"&gt;Contiki&lt;/a&gt; –Ω–∞ –±–æ—Ä—Ç—É. –ò–∑ –∫–æ—Ä–æ–±–∫–∏ Contiki –Ω–µ —É–º–µ–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å TLS / DTLS, –ø–æ—Ç–æ–º—É –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Ç–æ—Ä–æ–Ω–Ω—è—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ TinyDTLS. –î–ª—è –æ–±–º–µ–Ω–∞ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è –Ω–∞—Ç–∏–≤–Ω—ã–π DTLS –∫–ª–∏–µ–Ω—Ç –∏–∑ –ø—Ä–∏–º–µ—Ä–æ–≤ —Å–∞–º–æ–π TinyDTLS, –Ω–æ –ø–æ –∏–¥–µ–µ –∫–ª–∏–µ–Ω—Ç –º–æ–∂–µ—Ç –±—ã—Ç—å –ª—é–±–æ–π —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π IPv6:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ ping6 fe80::200:e2ff:fe58:b66e%mazko # bug ?
~$ cat &amp;lt;(echo Hello DTLS) - | \
./tinydtls/tests/dtls-client fe80::200:e2ff:fe58:b66e%mazko
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;a href="http://localhost:9148/a7d33b89268292d04630429cc5f16a5a"&gt;ipv6.dtls.server&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2018/01/05/bezopasnost-interneta-veshchei-tls-dtls/contiki-dtls.zip"&gt;–∏—Å—Ö–æ–¥–Ω–∏–∫–∏&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2018/01/05/bezopasnost-interneta-veshchei-tls-dtls/demo.png" style="width:50%; margin: 0 auto; display:block;"&gt;&lt;/p&gt;
&lt;p&gt;–í –¥–∞–Ω–Ω–æ–º –ø—Ä–∏–º–µ—Ä–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–∏–º–º–µ—Ç—Ä–∏—á–Ω–æ–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ TLS_PSK (Pre-Shared Key) –ø–æ AES –∞–ª–≥–æ—Ä–∏—Ç–º—É. –°–∏–º–º–µ—Ç—Ä–∏—á–Ω—ã–π ‚Äì –∑–Ω–∞—á–∏—Ç, —á—Ç–æ –¥–ª—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –∏ –¥–µ—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á (—Å—É—â–µ—Å—Ç–≤—É—é—Ç —Ç–∞–∫–∂–µ –∞—Å–∏–º–º–µ—Ç—Ä–∏—á–Ω—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã, –¥–ª—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ–¥–∏–Ω –∫–ª—é—á, –¥–ª—è –¥–µ—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è ‚Äì –¥—Ä—É–≥–æ–π). –ö–ª—é—á –∞–ª–≥–æ—Ä–∏—Ç–º–∞ –¥–æ–ª–∂–µ–Ω —Å–æ—Ö—Ä–∞–Ω—è—Ç—å—Å—è –≤ —Å–µ–∫—Ä–µ—Ç–µ –æ–±–µ–∏–º–∏ —Å—Ç–æ—Ä–æ–Ω–∞–º–∏, –≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –æ–Ω –∑–∞—à–∏—Ç –≤ –∫–æ–¥–µ &lt;code&gt;#define PSK_DEFAULT_KEY "secretPSK"&lt;/code&gt; –∏ —Å–µ—Ä–≤–µ—Ä–∞ –∏ –∫–ª–∏–µ–Ω—Ç–∞.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2018/01/05/bezopasnost-interneta-veshchei-tls-dtls/wireshark.png" style="width:100%;"&gt;&lt;/p&gt;
&lt;p&gt;–î–ª—è —Ç–µ—Ö, –∫—Ç–æ –Ω–µ –∑–Ω–∞–µ—Ç —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –∫–∞–∫ –Ω–∞–ø—Ä–∏–º–µ—Ä Wireshark –Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫–µ –Ω–∏–∂–µ, –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –Ω–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç –Ω–∏–∫–∞–∫–æ–π —Ü–µ–Ω–Ω–æ—Å—Ç–∏ ‚Äì —ç—Ç–æ –≤—ã–≥–ª—è–¥–∏—Ç –∫–∞–∫ –±–µ—Å–ø–æ—Ä—è–¥–æ—á–Ω—ã–π –∏ –±–µ—Å—Å–º—ã—Å–ª–µ–Ω–Ω—ã–π –Ω–∞–±–æ—Ä –±–∞–π—Ç. –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ TLS / DTLS, ¬´–∑–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫—É¬ª (–∏–Ω–æ–≥–¥–∞ –≥–æ–≤–æ—Ä—è—Ç ¬´—á–µ–ª–æ–≤–µ–∫ –ø–æ—Å–µ—Ä–µ–¥–∏–Ω–µ¬ª) –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ (—Ö–æ—Å—Ç, –ø–æ—Ä—Ç, —Ç–∏–ø –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–≥–æ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è), —á–∞—Å—Ç–æ—Ç–µ –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏. –ö—Ä–æ–º–µ —Ç–æ–≥–æ, –æ–Ω –º–æ–∂–µ—Ç —Ä–∞–∑–æ—Ä–≤–∞—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ, –Ω–æ –æ–±–µ —Å—Ç–æ—Ä–æ–Ω—ã –±—É–¥—É—Ç –∑–Ω–∞—Ç—å, —á—Ç–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –±—ã–ª–æ –ø—Ä–µ—Ä–≤–∞–Ω–æ —Ç—Ä–µ—Ç—å–µ–π —Å—Ç–æ—Ä–æ–Ω–æ–π.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2018/01/05/bezopasnost-interneta-veshchei-tls-dtls/data.png" style="width:100%;"&gt;&lt;/p&gt;
&lt;h2&gt;–í–í–ï–î–ï–ù–ò–ï –í –ö–†–ò–ü–¢–û–ì–†–ê–§–ò–Æ&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;–ö—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—è (–æ—Ç –¥—Ä.-–≥—Ä–µ—á. Œ∫œÅœÖœÄœÑœåœÇ ‚Äî —Å–∫—Ä—ã—Ç—ã–π –∏ Œ≥œÅŒ¨œÜœâ ‚Äî –ø–∏—à—É) ‚Äî –Ω–∞—É–∫–∞ –æ –º–µ—Ç–æ–¥–∞—Ö –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏ (–Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø—Ä–æ—á—Ç–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø–æ—Å—Ç–æ—Ä–æ–Ω–Ω–∏–º), —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö (–Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –Ω–µ–∑–∞–º–µ—Ç–Ω–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏), –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (–ø—Ä–æ–≤–µ—Ä–∫–∏ –ø–æ–¥–ª–∏–Ω–Ω–æ—Å—Ç–∏ –∞–≤—Ç–æ—Ä—Å—Ç–≤–∞ –∏–ª–∏ –∏–Ω—ã—Ö —Å–≤–æ–π—Å—Ç–≤ –æ–±—ä–µ–∫—Ç–∞), –∞ —Ç–∞–∫–∂–µ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –æ—Ç–∫–∞–∑–∞ –æ—Ç –∞–≤—Ç–æ—Ä—Å—Ç–≤–∞. ‚Äî –í–∏–∫–∏–ø–µ–¥–∏—è&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;–ö—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—è –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è –º–Ω–æ–∂–µ—Å—Ç–≤–æ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π, —Ç–∞–∫–∏—Ö –∫–∞–∫ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ, —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ-—Ü–∏—Ñ—Ä–æ–≤–∞—è –ø–æ–¥–ø–∏—Å—å, —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Ç. –¥. –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ ‚Äî —ç—Ç–æ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –∏—Å—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (¬´–æ—Ç–∫—Ä—ã—Ç–æ–≥–æ —Ç–µ–∫—Å—Ç–∞¬ª) –≤ –≤–∏–¥–æ–∏–∑–º–µ–Ω–µ–Ω–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (¬´–∑–∞–∫—Ä—ã—Ç—ã–π —Ç–µ–∫—Å—Ç¬ª) —Å —Ü–µ–ª—å—é —Å–∫—Ä—ã—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ ¬´–æ—Ç–∫—Ä—ã—Ç–æ–≥–æ —Ç–µ–∫—Å—Ç–∞¬ª –æ—Ç –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–≥–æ ¬´–∑–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫–∞¬ª. –î–µ—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ ‚Äî —ç—Ç–æ –æ–±—Ä–∞—Ç–Ω–∞—è –ø—Ä–æ—Ü–µ–¥—É—Ä–∞, –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ ¬´–æ—Ç–∫—Ä—ã—Ç–æ–≥–æ —Ç–µ–∫—Å—Ç–∞¬ª –∏–∑ ¬´–∑–∞–∫—Ä—ã—Ç–æ–≥–æ¬ª. –ü–æ–Ω—è—Ç–∏—è ¬´–æ—Ç–∫—Ä—ã—Ç—ã–π —Ç–µ–∫—Å—Ç¬ª –∏ ¬´–∑–∞–∫—Ä—ã—Ç—ã–π —Ç–µ–∫—Å—Ç¬ª –≤ –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ –ø–æ–¥—Ä–∞–∑—É–º–µ–≤–∞—é—Ç –ª—é–±—É—é, –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Ç–µ–∫—Å—Ç–æ–≤—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é.&lt;/p&gt;
&lt;p&gt;–ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —á—Ç–æ —Å—Ç–æ—Ä–æ–Ω–∞ –ê (–ê–ª–∏—Å–∞) —Ö–æ—á–µ—Ç –ø–µ—Ä–µ–¥–∞—Ç—å —Å—Ç–æ—Ä–æ–Ω–µ –ë (–ë–æ–±) —Å–µ–∫—Ä–µ—Ç–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é, —á—Ç–æ–±—ã –Ω–∏–∫—Ç–æ, –∫—Ä–æ–º–µ –ë–æ–±–∞, –Ω–µ —Å–º–æ–≥ –ø—Ä–æ—á–µ—Å—Ç—å –µ—ë. –î–ª—è —Ç–æ–≥–æ —á—Ç–æ–±—ã ¬´–∑–∞—à–∏—Ñ—Ä–æ–≤–∞—Ç—å¬ª –¥–∞–Ω–Ω—ã–µ, –º–æ–∂–Ω–æ –ø–µ—Ä–µ—Å—Ç–∞–≤–∏—Ç—å –º–µ—Å—Ç–∞–º–∏ —Å–∏–º–≤–æ–ª—ã –≤ –∏—Å—Ö–æ–¥–Ω–æ–º —Ç–µ—Å—Ç–µ –ø–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–º—É –∞–ª–≥–æ—Ä–∏—Ç–º—É (—à–∏—Ñ—Ä –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∏), –∏–∑–≤–µ—Å—Ç–Ω–æ–º—É —Ç–æ–ª—å–∫–æ –ê–ª–∏—Å–µ –∏ –ë–æ–±—É. –¢–∞–∫–∏–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è, –ø—Ä–∏ –∫–æ—Ç–æ—Ä—ã—Ö –ê–ª–∏—Å–∞ –∏ –ë–æ–± –¥–æ–ª–∂–Ω—ã –∑–∞—Ä–∞–Ω–µ–µ (–¥–æ –Ω–∞—á–∞–ª–∞ –æ–±–º–µ–Ω–∞ –¥–∞–Ω–Ω—ã–º–∏) –ø—Ä–∏–¥—É–º–∞—Ç—å –∏ —Å–æ–≥–ª–∞—Å–æ–≤–∞—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π —Å–µ–∫—Ä–µ—Ç, –Ω–∞–∑—ã–≤–∞—é—Ç—Å—è &lt;strong&gt;—Å–∏–º–º–µ—Ç—Ä–∏—á–Ω—ã–º–∏&lt;/strong&gt;. &lt;/p&gt;
&lt;p&gt;–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∞–ª–≥–æ—Ä–∏—Ç–º—ã —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞—é—Ç, —á—Ç–æ ¬´–∑–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫¬ª –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –∑–Ω–∞–µ—Ç —Å–∞–º –∞–ª–≥–æ—Ä–∏—Ç–º —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è (–∞–ª–≥–æ—Ä–∏—Ç–º –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –Ω–∞–¥ –æ—Ç–∫—Ä—ã—Ç—ã–º —Ç–µ—Å—Ç–æ–º), –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –∑–∞–∫—Ä—ã—Ç–æ–º—É —Ç–µ–∫—Å—Ç—É –∏ –¥–∞–∂–µ –º–æ–∂–µ—Ç –∑–Ω–∞—Ç—å —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã –æ—Ç–∫—Ä—ã—Ç–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä ¬´–∑–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫¬ª –º–æ–∂–µ—Ç –ø—Ä–µ–¥–ø–æ–ª–æ–∂–∏—Ç—å, —á—Ç–æ –æ—Ç–∫—Ä—ã—Ç—ã–π —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å —Ñ—Ä–∞–∑—ã ¬´–î–æ–±—Ä—ã–π –¥–µ–Ω—å!¬ª). –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–µ, —á—Ç–æ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ ¬´–∑–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫—É¬ª, —ç—Ç–æ –Ω–µ–∫–∏–π ¬´—Å–µ–∫—Ä–µ—Ç¬ª (—Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è) –∏ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–ø–æ—Å–æ–± –≤—ã—á–∏—Å–ª–∏—Ç—å —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á (–∏ —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∞—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é —Ü–µ–ª–∏–∫–æ–º) ‚Äì —ç—Ç–æ –ø–æ–ª–Ω—ã–π –ø–µ—Ä–µ–±–æ—Ä –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ —Å–µ–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–ª—é—á–∞. –°—á–∏—Ç–∞–µ—Ç—Å—è, —á—Ç–æ –¥–ª–∏–Ω–∞ –ø—Ä–∏–º–µ–Ω—è–µ–º—ã—Ö –≤ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∞–ª–≥–æ—Ä–∏—Ç–º–∞—Ö –∫–ª—é—á–µ–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, 256 –±–∏—Ç) –Ω–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–¥–æ–±—Ä–∞—Ç—å –∫–ª—é—á –ø–µ—Ä–µ–±–æ—Ä–æ–º –∑–∞ –ø—Ä–∏–µ–º–ª–µ–º–æ–µ –≤—Ä–µ–º—è. –≠–∫–∑–æ—Ç–∏—á–µ—Å–∫–∏–µ —Å–ø–æ—Å–æ–±—ã –≤—Ä–æ–¥–µ —Ç–µ—Ä–º–æ—Ä–µ–∫—Ç–∞–ª—å–Ω–æ–≥–æ –∫—Ä–∏–ø—Ç–æ–∞–Ω–∞–ª–∏–∑–∞ –≤ —Ä–∞—Å—á—ë—Ç –Ω–µ –±–µ—Ä—ë–º.&lt;/p&gt;
&lt;p&gt;–î–ª—è –∑–∞–∫—Ä–µ–ø–ª–µ–Ω–∏—è –º–∞—Ç–µ—Ä–∏–∞–ª–∞ –ø—Ä–∏–º–µ—Ä —Å–∏–º–º–µ—Ç—Ä–∏—á–Ω–æ–≥–æ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è. –ê–ª–∏—Å–∞ —Ö–æ—á–µ—Ç –ø–µ—Ä–µ–¥–∞—Ç—å —Ñ—Ä–∞–∑—É "Some Secret", –¥–ª—è —ç—Ç–æ–≥–æ –æ–Ω–∞ —à–∏—Ñ—Ä—É–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ. –ü–∞—Ä–æ–ª—å –ø—É—Å—Ç—å –±—É–¥–µ—Ç pass:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ echo &amp;quot;Some Secret&amp;quot; | \
openssl enc -aes-256-cbc -a -pass pass:pass -nosalt
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ù–∞ –≤—ã—Ö–æ–¥–µ –ê–ª–∏—Å–∞ –ø–æ–ª—É—á–∞–µ—Ç –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –µ–≥–æ –ø–æ –Ω–µ–∑–∞—â–∏—â—ë–Ω–Ω–æ–º—É –∫–∞–Ω–∞–ª—É —Å–≤—è–∑–∏. –ë–æ–±, –ø–æ–ª—É—á–∏–≤ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, –∑–Ω–∞–µ—Ç –ø–∞—Ä–æ–ª—å –∏ –¥–µ—à–∏—Ñ—Ä—É–µ—Ç –∏—Ö:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ echo &amp;quot;9pIRFLwioGc41Fw+aHLxuw==&amp;quot; | \
openssl enc -aes-256-cbc -d -a -pass pass:pass -nosalt
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ß—É–¥–Ω–µ–Ω—å–∫–æ, –Ω–æ –∫–∞–∫ –ë–æ–±—É –∑–Ω–∞—Ç—å, —á—Ç–æ —ç—Ç–æ –∏–º–µ–Ω–Ω–æ –ê–ª–∏—Å–∞ –æ—Ç–ø—Ä–∞–≤–∏–ª–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ ? –î–∞, ¬´–∑–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫¬ª –Ω–µ –º–æ–∂–µ—Ç —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–æ—Å—ã–ª–∫–∏, –Ω–æ —á—Ç–æ, –µ—Å–ª–∏ –µ–º—É —ç—Ç–æ –∏ –Ω–µ –Ω—É–∂–Ω–æ ? –í–µ–¥—å –Ω–∏—á—Ç–æ –Ω–µ –º–µ—à–∞–µ—Ç ¬´–∑–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫—É¬ª –ø—Ä–æ—Å—Ç–æ –ø–æ–≤—Ç–æ—Ä–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –ø–µ—Ä–µ—Ö–≤–∞—á–µ–Ω–Ω–æ–µ —Ä–∞–Ω–µ–µ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –Ω—É–∂–Ω—ã–π –º–æ–º–µ–Ω—Ç. &lt;/p&gt;
&lt;p&gt;–ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º —É –Ω–∞—Å –µ—Å—Ç—å –ø–µ—Ä–µ–¥–∞—Ç—á–∏–∫ –∏ –ø—Ä–∏–µ–º–Ω–∏–∫, –∫–æ—Ç–æ—Ä—ã–π —É–ø—Ä–∞–≤–ª—è–µ—Ç –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º –º–µ—Ö–∞–Ω–∏–∑–º–æ–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –¥–≤–µ—Ä—å). –ú—ã —Ö–æ—Ç–∏–º –æ—Ç–∫—Ä—ã–≤–∞—Ç—å –¥–≤–µ—Ä—å –ø–æ –∫–æ–º–∞–Ω–¥–µ —Å –ø–µ—Ä–µ–¥–∞—Ç—á–∏–∫–∞. –ï—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ, –º—ã —Ö–æ—Ç–∏–º –æ–±–µ–∑–æ–ø–∞—Å–∏—Ç—å —Å–µ–±—è, –ø—Ä–∏–µ–º–Ω–∏–∫ –¥–æ–ª–∂–µ–Ω —Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –Ω–∞ ¬´—Ä–æ–¥–Ω–æ–π¬ª –ø–µ—Ä–µ–¥–∞—Ç—á–∏–∫. –ó–∞–ø–∏—Å—ã–≤–∞–µ–º –≤ –ø–µ—Ä–µ–¥–∞—Ç—á–∏–∫ –∏ –ø—Ä–∏–µ–º–Ω–∏–∫ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π ¬´—Å–µ–∫—Ä–µ—Ç–Ω—ã–π¬ª –ø–∞—Ä–æ–ª—å (–∫–ª—é—á). –ü–µ—Ä–µ–¥–∞—Ç—á–∏–∫ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–æ–º–∞–Ω–¥—É, –ø—Ä–∏–µ–º–Ω–∏–∫ –¥–µ—à–∏—Ñ—Ä—É–µ—Ç –ø–∞—Ä–æ–ª–µ–º –∏ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –¥–≤–µ—Ä–∏. –¢–µ–º –≤—Ä–µ–º–µ–Ω–µ–º ¬´–∑–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫¬ª –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–µ—Ç —Ä–∞–¥–∏–æ—ç—Ñ–∏—Ä –∏ –µ—Å–ª–∏ –æ–Ω –ø—Ä–æ—Å—Ç–æ –ø–æ–≤—Ç–æ—Ä–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç –ø–µ—Ä–µ—Ö–≤–∞—á–µ–Ω–Ω—ã–µ —Ä–∞–Ω–µ–µ –¥–∞–Ω–Ω—ã–µ, –¥–≤–µ—Ä–∏ –æ—Ç–∫—Ä–æ—é—Ç—Å—è... –í—ã—Ö–æ–¥–∏—Ç –æ–¥–Ω–æ–≥–æ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ.&lt;/p&gt;
&lt;p&gt;–†–∞—Å—Å–º–æ—Ç—Ä–∏–º —Ä–µ—à–µ–Ω–∏–µ –ø–æ–¥–æ–±–Ω–æ–π –ø—Ä–æ–±–ª–µ–º—ã –Ω–∞ ¬´–±—ã—Ç–æ–≤–æ–º¬ª –ø—Ä–∏–º–µ—Ä–µ. –ü—Ä–µ–¥–ø–æ–ª–æ–∂–∏–º, —è –æ–±—â–∞—é—Å—å —Å–æ —Å–≤–æ–∏–º –¥—Ä—É–≥–æ–º –≤ —á–∞—Ç–µ. –Ø —Ö–æ—á—É —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —è –æ–±—â–∞—é—Å—å –∏–º–µ–Ω–Ω–æ —Å –Ω–∏–º, –∞ –Ω–µ —Å –µ–≥–æ –¥–µ–¥—É—à–∫–æ–π/–±–∞–±—É—à–∫–æ–π –∫–æ—Ç–æ—Ä–∞—è —Å–µ–ª–∞ –∑–∞ –µ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä. –Ø –º–æ–≥—É –∑–∞–¥–∞—Ç—å –¥—Ä—É–≥—É –≤–æ–ø—Ä–æ—Å, –æ—Ç–≤–µ—Ç –Ω–∞ –∫–æ—Ç–æ—Ä—ã–π –∑–Ω–∞–µ—Ç —Ç–æ–ª—å–∫–æ –æ–Ω –∏ —è. –£ –º–µ–Ω—è –∏ —É –¥—Ä—É–≥–∞ –µ—Å—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π ¬´—Å–µ–∫—Ä–µ—Ç–Ω—ã–π¬ª –∫–ª—é—á —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è. –Ø –æ—Ç–ø—Ä–∞–≤–ª—è—é –µ–º—É –ª—é–±–æ–π, –∞–±—Å–æ–ª—é—Ç–Ω–æ —Å–ª—É—á–∞–π–Ω—ã–π —Ñ—Ä–∞–≥–º–µ–Ω—Ç —Ç–µ–∫—Å—Ç–∞ (—Å–ª—É—á–∞–π–Ω–æ–µ —á–∏—Å–ª–æ) –∏ –ø—Ä–æ—à—É –µ–≥–æ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞—Ç—å. –û–Ω —à–∏—Ñ—Ä—É–µ—Ç —Ñ—Ä–∞–≥–º–µ–Ω—Ç —Å–≤–æ–∏–º –∫–ª—é—á–æ–º –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç –º–Ω–µ. –Ø —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤—ã–≤–∞—é –ø–æ–ª—É—á–µ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç –∏ —Å—Ä–∞–≤–Ω–∏–≤–∞—é —Å –æ—Ä–∏–≥–∏–Ω–∞–ª–æ–º. –ï—Å–ª–∏ –∏—Å—Ö–æ–¥–Ω—ã–π –∏ —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π —Ñ—Ä–∞–≥–º–µ–Ω—Ç –∏–¥–µ–Ω—Ç–∏—á–Ω—ã ‚Äì –∑–Ω–∞—á–∏—Ç —è –æ–±—â–∞—é—Å—å –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Å –¥—Ä—É–≥–æ–º, —Ç–∞–∫ –∫–∞–∫ ¬´–ø—Ä–∞–≤–∏–ª—å–Ω–æ¬ª –∑–∞—à–∏—Ñ—Ä–æ–≤–∞—Ç—å —Ç–µ–∫—Å—Ç –º–æ–≥ —Ç–æ–ª—å–∫–æ –æ–Ω. –í —Å–ª–µ–¥—É—é—â–∏–π —Ä–∞–∑, –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ &lt;strong&gt;–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å&lt;/strong&gt; —Å–æ–±–µ—Å–µ–¥–Ω–∏–∫–∞ —è –≤—ã—à–ª—é –Ω–æ–≤—ã–π, —Å–ª—É—á–∞–π–Ω—ã–π, —Ñ—Ä–∞–≥–º–µ–Ω—Ç —Ç–µ–∫—Å—Ç–∞ –∏ –¥–∞–∂–µ –µ—Å–ª–∏ ¬´–∑–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫¬ª –ø–µ—Ä–µ—Ö–≤–∞—Ç–∏–ª –ø—Ä–µ–¥—ã–¥—É—â–∏–π ¬´—Å–µ–∞–Ω—Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏¬ª ‚Äì —ç—Ç–æ –µ–º—É –Ω–∏—á–µ–≥–æ –Ω–µ –¥–∞—Å—Ç, —Ç–∞–∫ –∫–∞–∫ –∫–∞–∂–¥—ã–π —Ä–∞–∑ –±—É–¥–µ—Ç –Ω–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å (–Ω–æ–≤—ã–π —Ñ—Ä–∞–≥–º–µ–Ω—Ç –æ—Ç–∫—Ä—ã—Ç–æ–≥–æ —Ç–µ–∫—Å—Ç–∞) –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ –Ω–æ–≤—ã–π –æ—Ç–≤–µ—Ç (–∑–∞–∫—Ä—ã—Ç—ã–π —Ç–µ–∫—Å—Ç).&lt;/p&gt;
&lt;h2&gt;TLS / DTLS&lt;/h2&gt;
&lt;p&gt;–ü—Ä–æ—Ç–æ–∫–æ–ª—ã TLS / DTLS –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω—ã –¥–ª—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Ç—Ä—ë—Ö —É—Å–ª—É–≥ –≤—Å–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º, —Ä–∞–±–æ—Ç–∞—é—â–∏–º –Ω–∞–¥ –Ω–∏–º–∏: &lt;strong&gt;—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ&lt;/strong&gt;, &lt;strong&gt;–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é&lt;/strong&gt; –∏ &lt;strong&gt;—Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å&lt;/strong&gt;. –î–ª—è —Ç–æ–≥–æ —á—Ç–æ–±—ã —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—á–µ—Å–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –∫–∞–Ω–∞–ª –¥–∞–Ω–Ω—ã—Ö, –∫–ª–∏–µ–Ω—Ç –∏ —Å–µ—Ä–≤–µ—Ä –¥–æ–ª–∂–Ω—ã —Å–æ–≥–ª–∞—Å–æ–≤–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è, –∞ –∏–º–µ–Ω–Ω–æ: –≤–µ—Ä—Å–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ–º–æ–≥–æ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞, —Å–ø–æ—Å–æ–± —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö, –∞ —Ç–∞–∫–∂–µ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã (–≤ —Å–ª—É—á–∞–µ –∞—Å–∏–º–º–µ—Ç—Ä–∏—á–Ω–æ–≥–æ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è). –ü—Ä–æ—Ü–µ–¥—É—Ä–∞ –Ω–∞—á–∞–ª–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è Handshake (—Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏–µ). –¢–∞–∫–∂–µ –≤ —Ä–∞–º–∫–∞—Ö –ø—Ä–æ—Ü–µ–¥—É—Ä—ã Handshake –∫–ª–∏–µ–Ω—Ç –∏ —Å–µ—Ä–≤–µ—Ä –æ–±–º–µ–Ω–∏–≤–∞—é—Ç—Å—è —Å–ª—É—á–∞–π–Ω—ã–º–∏ —á–∏—Å–ª–∞–º–∏, —Ç.–µ, –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è ‚Äì –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Å—É–±—ä–µ–∫—Ç–∞ –∏ —Ç–æ–≥–æ, –∑–∞ –∫–æ–≥–æ –æ–Ω –ø—ã—Ç–∞–µ—Ç—Å—è —Å–µ–±—è –≤—ã–¥–∞—Ç—å. –ü–æ—Å–ª–µ Handshake –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –æ–±–º–µ–Ω –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏ –∑–∞—â–∏—Ç—ã –æ—Ç –µ—ë –ø–æ–¥–º–µ–Ω—ã.&lt;/p&gt;
&lt;h2&gt;PRE-SHARED KEY&lt;/h2&gt;
&lt;p&gt;–í–µ—Ä–Ω—ë–º—Å—è –∫ –ø—Ä–∏–º–µ—Ä—É —Å –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–º. –ö–ª–∏–µ–Ω—Ç –∏ —Å–µ—Ä–≤–µ—Ä –æ–±–ª–∞–¥–∞—é—Ç –æ–±—â–∏–º —Å–µ–∫—Ä–µ—Ç–æ–º (–∫–ª—é—á–æ–º) –∏ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –±—ã–ª–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –ø–æ–¥–ª–∏–Ω–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω–æ–≥–æ —Å–µ–∫—Ä–µ—Ç–∞. –í –æ–±—â–µ–º —Å–ª—É—á–∞–µ –¥–ª—è –∑–Ω–∞–∫–æ–º—Å—Ç–≤–∞ —Å PSK (pre-shared key) —É–¥–æ–±–Ω–æ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –∫–∞–∫–∏–º-–ª–∏–±–æ —Ç–µ—Å—Ç–æ–≤—ã–º–∏ —Å–µ—Ä–≤–µ—Ä–æ–º –∏ –∫–ª–∏–µ–Ω—Ç–æ–º.&lt;/p&gt;
&lt;p&gt;–°–µ—Ä–≤–µ—Ä DTLS-PSK:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ openssl s_server -port 20220 -psk 1a2b3c4d -nocert -dtls1_2
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ö–ª–∏–µ–Ω—Ç DTLS-PSK:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ openssl s_client -port 20220 -psk 1a2b3c4d -dtls1_2
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–û–±–º–µ–Ω –¥–∞–Ω–Ω—ã–º–∏ –º–µ–∂–¥—É –∫–ª–∏–µ–Ω—Ç–æ–º –∏ —Å–µ—Ä–≤–µ—Ä–æ–º –¥–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω–∏–π, –ø–∏—à–µ–º —á—Ç–æ-–Ω–∏–±—É–¥—å –≤ –∫–æ–Ω—Å–æ–ª—å –∏ —Å–º–æ—Ç—Ä–∏–º –∫–∞–∫ –∏–¥—É—Ç –ø–∞–∫–µ—Ç—ã –≤ Wireshark. &lt;strong&gt;–°–∏–º–º–µ—Ç—Ä–∏—á–Ω–æ–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ&lt;/strong&gt; –º–µ–Ω–µ–µ —Ç—Ä–µ–±–æ–≤–∞—Ç–µ–ª—å–Ω–æ –∫ —Ä–µ—Å—É—Ä—Å–∞–º —á–µ–º –∞—Å–∏–º–º–µ—Ç—Ä–∏—á–Ω–æ–µ, —ç—Ç–æ –º–æ–∂–µ—Ç –æ–∫–∞–∑–∞—Ç—å—Å—è —Ä–µ—à–∞—é—â–∏–º —Ñ–∞–∫—Ç–æ—Ä–æ–º –¥–ª—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –Ω–∞ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞—Ö.&lt;/p&gt;
&lt;h2&gt;PUBLIC KEY&lt;/h2&gt;
&lt;p&gt;–í —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞—Ö –Ω–∞–∏–±–æ–ª—å—à–µ–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–ª—É—á–∏–ª–æ &lt;strong&gt;–∞—Å–∏–º–º–µ—Ç—Ä–∏—á–Ω–æ–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ&lt;/strong&gt;, –∫–æ—Ç–æ—Ä–æ–µ –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç –Ω–∞–ª–∏—á–∏–µ –¥–≤—É—Ö –∫–ª—é—á–µ–π ‚Äì –ø—É–±–ª–∏—á–Ω–æ–≥–æ –∏ –ø—Ä–∏–≤–∞—Ç–Ω–æ–≥–æ. –°–æ–æ–±—â–µ–Ω–∏–µ —à–∏—Ñ—Ä—É–µ—Ç—Å—è –ø—É–±–ª–∏—á–Ω—ã–º –∫–ª—é—á–æ–º, –∞ —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏–≤–∞—Ç–Ω—ã–º. –í –æ—Å–Ω–æ–≤–µ –¥–∞–Ω–Ω–æ–π –º–∞–≥–∏–∏ –ª–µ–∂–∏—Ç –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞ –∏ &lt;em&gt;–æ–¥–Ω–æ—Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å –ø–æ—Ç–∞–π–Ω—ã–º –≤—Ö–æ–¥–æ–º&lt;/em&gt;, —Ç–æ –µ—Å—Ç—å —Ç–∞–∫–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏, —É –∫–æ—Ç–æ—Ä—ã—Ö –ø–æ –∏–∑–≤–µ—Å—Ç–Ω–æ–º—É &lt;em&gt;x&lt;/em&gt; –¥–æ–≤–æ–ª—å–Ω–æ –ø—Ä–æ—Å—Ç–æ –Ω–∞–π—Ç–∏ –∑–Ω–∞—á–µ–Ω–∏–µ &lt;em&gt;f(x)&lt;/em&gt;, —Ç–æ–≥–¥–∞ –∫–∞–∫ –æ–±—Ä–∞—Ç–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ &lt;em&gt;x&lt;/em&gt; –∏–∑ &lt;em&gt;f(x)&lt;/em&gt; –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –∑–∞ —Ä–∞–∑—É–º–Ω—ã–π —Å—Ä–æ–∫ –±–µ–∑ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ (—Å–µ–∫—Ä–µ—Ç–∞), –Ω–∞–∑—ã–≤–∞–µ–º–æ–π ¬´–ª–∞–∑–µ–π–∫–æ–π¬ª –∏–ª–∏ ¬´–ø–æ—Ç–∞–π–Ω—ã–º –≤—Ö–æ–¥–æ–º¬ª.&lt;/p&gt;
&lt;p&gt;–£–ø—Ä–æ—â—ë–Ω–Ω–æ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —Å –æ—Ç–∫—Ä—ã—Ç—ã–º –∫–ª—é—á–æ–º –º–æ–∂–Ω–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å –≤ –≤–∏–¥–µ –æ–±—ã—á–Ω–æ–≥–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä –Ω–∞–≤–µ—Å–Ω–æ–≥–æ) –∑–∞–º–∫–∞ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∑–∞—â—ë–ª–∫–æ–π. –õ—é–±–æ–π —Å–ø–æ—Å–æ–±–µ–Ω –∑–∞–ø–µ—Ä–µ—Ç—å –∑–∞–º–æ–∫, –ø—Ä–æ—Å—Ç–æ –∑–∞—â–µ–ª–∫–Ω—É–≤ –µ–≥–æ, —á—Ç–æ–±—ã –æ–Ω –∑–∞–∫—Ä—ã–ª—Å—è, –Ω–æ –æ—Ç–ø–µ—Ä–µ—Ç—å –µ–≥–æ –º–æ–∂–µ—Ç —Ç–æ–ª—å–∫–æ —Ç–æ—Ç, —É –∫–æ–≥–æ –µ—Å—Ç—å –∫–ª—é—á. –ó–∞–ø–µ—Ä–µ—Ç—å –∑–∞–º–æ–∫ (–∑–∞—à–∏—Ñ—Ä–æ–≤—ã–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ) –ª–µ–≥–∫–æ, –ø–æ—á—Ç–∏ –≤—Å–µ –º–æ–≥—É—Ç —ç—Ç–æ —Å–¥–µ–ª–∞—Ç—å, –Ω–æ –æ—Ç–∫—Ä—ã—Ç—å –µ–≥–æ (—Ä–∞—Å—à–∏—Ñ—Ä–æ–≤—ã–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ) –∏–º–µ–µ—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —Ç–æ–ª—å–∫–æ –≤–ª–∞–¥–µ–ª–µ—Ü –∫–ª—é—á–∞. –ü–æ–Ω–∏–º–∞–Ω–∏–µ —Ç–æ–≥–æ, –∫–∞–∫ –∑–∞—â–µ–ª–∫–Ω—É—Ç—å –∑–∞–º–æ–∫, —á—Ç–æ–±—ã –æ–Ω –∑–∞–∫—Ä—ã–ª—Å—è, –Ω–∏—á–µ–≥–æ –Ω–µ —Å–∫–∞–∂–µ—Ç –≤–∞–º, –∫–∞–∫ –µ–≥–æ –æ—Ç–ø–µ—Ä–µ—Ç—å.&lt;/p&gt;
&lt;p&gt;–î–ª—è –Ω–∞—á–∞–ª–∞ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤ –Ω—É–∂–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ä—É –∫–ª—é—á–µ–π (–æ—Ç–∫—Ä—ã—Ç—ã–π –∏ –∑–∞–∫—Ä—ã—Ç—ã–π).&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ openssl req -x509 -days 365 -nodes -newkey rsa:2048  \
    -subj &amp;quot;/CN=localhost&amp;quot; -keyout selfsigned.key -out selfsigned.crt
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ó–∞–∫—Ä—ã—Ç—ã–π –∫–ª—é—á —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ —Å–µ–∫—Ä–µ—Ç–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, –æ—Ç–∫—Ä—ã—Ç—ã–π –º–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –∫–æ–º—É —É–≥–æ–¥–Ω–æ, –≤ —Ç–æ–º —á–∏—Å–ª–µ –∏ –∑–ª–æ—É–º—ã—à–ª–µ–Ω–Ω–∏–∫—É. –ü—Ä–æ—Å—Ç–µ–π—à–∏–π —Ç–µ—Å—Ç–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ openssl s_server -key selfsigned.key -cert selfsigned.crt -accept 44330 -www
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–î–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞—â–∏—â—ë–Ω–Ω–æ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –ø–æ –Ω–µ–∑–∞—â–∏—â—ë–Ω–Ω–æ–º—É –∫–∞–Ω–∞–ª—É –∫–ª–∏–µ–Ω—Ç—É –Ω—É–∂–µ–Ω —Ç–æ–ª—å–∫–æ –æ—Ç–∫—Ä—ã—Ç—ã–π –∫–ª—é—á.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ curl https://localhost:44330 -v --cacert selfsigned.crt
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–í–æ—Ç —á—Ç–æ –ø–æ —ç—Ç–æ–º—É –ø–æ–≤–æ–¥—É –¥—É–º–∞–µ—Ç Wireshark. –ò–∑ —Å–ø–∏—Å–∫–∞ –≤—Å–µ—Ö –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–º (Client Hello) –∞–ª–≥–æ—Ä–∏—Ç–º–æ–≤ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è —Å–µ—Ä–≤–µ—Ä –≤—ã–±—Ä–∞–ª &lt;code&gt;TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256&lt;/code&gt;:&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2018/01/05/bezopasnost-interneta-veshchei-tls-dtls/https.png" style="width:100%;"&gt;&lt;/p&gt;
&lt;p&gt;–ù–µ—Ä–∞—Å–∫—Ä—ã—Ç—ã–º –æ—Å—Ç–∞–ª—Å—è –æ–¥–∏–Ω –≤–æ–ø—Ä–æ—Å ‚Äì –∫–∞–∫ –ø–µ—Ä–µ–¥–∞—Ç—å –æ—Ç–∫—Ä—ã—Ç—ã–π –∫–ª—é—á —Ç–∞–∫, —á—Ç–æ–±—ã –µ–≥–æ –Ω–µ–ª—å–∑—è –±—ã–ª–æ –ø–æ–¥–º–µ–Ω–∏—Ç—å ? –ö–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ —Å–µ—Ç–∏ –ø–æ—è–≤–ª—è—é—Ç—Å—è / –∏—Å—á–µ–∑–∞—é—Ç —Ç—ã—Å—è—á–∏ —Ä–µ—Å—É—Ä—Å–æ–≤ –∏ —Ñ–∏–∑–∏—á–µ—Å–∫–∏ —Å–ª–æ–∂–Ω–æ –±—ã–ª–æ –±—ã –ø–æ—Å—Ç–∞–≤–ª—è—Ç—å / –æ–±–Ω–æ–≤–ª—è—Ç—å –≤—Å–µ –∏—Ö –æ—Ç–∫—Ä—ã—Ç—ã–µ –∫–ª—é—á–∏ —Å—Ä–∞–∑—É –≤–º–µ—Å—Ç–µ —Å –∫–ª–∏–µ–Ω—Ç–æ–º (–±—Ä–∞—É–∑–µ—Ä–æ–º). –¢—É—Ç –Ω–∞ –ø–æ–º–æ—â—å –ø—Ä–∏—Ö–æ–¥—è—Ç —Ç.–Ω. —Ü–µ–Ω—Ç—Ä—ã —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (–∞–Ω–≥–ª. Certification authority, CA) ‚Äì —Å—Ç–æ—Ä–æ–Ω—ã, —á—å—è —á–µ—Å—Ç–Ω–æ—Å—Ç—å –Ω–µ–æ—Å–ø–æ—Ä–∏–º–∞, –∞ –æ—Ç–∫—Ä—ã—Ç—ã–π –∫–ª—é—á —à–∏—Ä–æ–∫–æ –∏–∑–≤–µ—Å—Ç–µ–Ω –∏ –∫–ª–∏–µ–Ω—Ç (curl, –±—Ä–∞—É–∑–µ—Ä) –µ–≥–æ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –ø–æ –Ω–µ–∑–∞—â–∏—â—ë–Ω–Ω–æ–º—É –∫–∞–Ω–∞–ª—É. –ó–∞–¥–∞—á–∞ —Ü–µ–Ω—Ç—Ä–∞ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ ‚Äì –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—Ç—å –ø–æ–¥–ª–∏–Ω–Ω–æ—Å—Ç—å –∫–ª—é—á–µ–π —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è —Å –ø–æ–º–æ—â—å—é —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –ø–æ–¥–ø–∏—Å–∏. &lt;/p&gt;
&lt;p&gt;–ê—Å–∏–º–º–µ—Ç—Ä–∏—á–Ω–æ–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–æ—Ü–µ–¥—É—Ä–µ TLS Handshake –≤–æ –≤—Ä–µ–º—è –ø–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è. –ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Ç—É–Ω–Ω–µ–ª—è –≤ –¥–µ–ª–æ –≤—Å—Ç—É–ø–∞–µ—Ç —Å–∏–º–º–µ—Ç—Ä–∏—á–Ω–∞—è –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—è, –∏ –æ–±—â–µ–Ω–∏–µ –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–æ –∏–º–µ–Ω–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º–∏ —Å–∏–º–º–µ—Ç—Ä–∏—á–Ω—ã–º–∏ –∫–ª—é—á–∞–º–∏. –≠—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –¥–ª—è —É–≤–µ–ª–∏—á–µ–Ω–∏—è –±—ã—Å—Ç—Ä–æ–¥–µ–π—Å—Ç–≤–∏—è, —Ç–∞–∫ –∫–∞–∫ –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ–∏—è —Å –æ—Ç–∫—Ä—ã—Ç—ã–º –∫–ª—é—á–æ–º —Ç—Ä–µ–±—É–µ—Ç –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ –±–æ–ª—å—à–µ –≤—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω–æ–π –º–æ—â–Ω–æ—Å—Ç–∏. –ù—É –∫–∞–∫-—Ç–æ —Ç–∞–∫.&lt;/p&gt;</content><category term="contiki"></category><category term="msp430"></category><category term="TLS"></category></entry><entry><title>–ü—Ä–æ—Ç–æ–∫–æ–ª—ã ¬´–ò–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –≤–µ—â–µ–π¬ª - MQTT</title><link href="http://proiot.ru/blog/posts/2017/10/20/protokoly-interneta-veshchei-mqtt/" rel="alternate"></link><published>2017-10-20T00:00:00+03:00</published><updated>2017-10-20T00:00:00+03:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2017-10-20:/blog/posts/2017/10/20/protokoly-interneta-veshchei-mqtt/</id><summary type="html">&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2017/10/03/setevoe-programmirovanie-udp-ntp-chasy/"&gt;–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º&lt;/a&gt; –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å —Å–µ—Ç–µ–≤—ã–µ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã.&lt;/p&gt;
&lt;p&gt;MQTT (Message Queue Telemetry Transport) ‚Äì –ø—Ä–æ—Ç–æ–∫–æ–ª –ø—Ä–∏–∫–ª–∞–¥–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –º–µ–∂–º–∞—à–∏–Ω–Ω–æ–π –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ (M2M, Machine to Machine), –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø—É ¬´–∏–∑–¥–∞—Ç–µ–ª—å-–ø–æ–¥–ø–∏—Å—á–∏–∫¬ª. –î–≤–∞ –≥–ª–∞–≤–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ MQTT ‚Äì –∫–ª–∏–µ–Ω—Ç –∏ –±—Ä–æ–∫–µ—Ä. MQTT-–∫–ª–∏–µ–Ω—Ç—ã –ø—É–±–ª–∏–∫—É—é—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—É—é —Ç–µ–º—É (topic), –∏–ª–∏ –ø–æ–¥–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –∏ –ø—Ä–æ—Å–ª—É—à–∏–≤–∞—é—Ç –∏—Ö. –¢–µ–º–∞ ‚Äì —ç—Ç–æ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–∞—è —Å—Ç—Ä–æ–∫–∞ ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2017/10/03/setevoe-programmirovanie-udp-ntp-chasy/"&gt;–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º&lt;/a&gt; –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç—å —Å–µ—Ç–µ–≤—ã–µ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã.&lt;/p&gt;
&lt;p&gt;MQTT (Message Queue Telemetry Transport) ‚Äì –ø—Ä–æ—Ç–æ–∫–æ–ª –ø—Ä–∏–∫–ª–∞–¥–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è –¥–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –º–µ–∂–º–∞—à–∏–Ω–Ω–æ–π –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏ (M2M, Machine to Machine), –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø—É ¬´–∏–∑–¥–∞—Ç–µ–ª—å-–ø–æ–¥–ø–∏—Å—á–∏–∫¬ª. –î–≤–∞ –≥–ª–∞–≤–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ MQTT ‚Äì –∫–ª–∏–µ–Ω—Ç –∏ –±—Ä–æ–∫–µ—Ä. MQTT-–∫–ª–∏–µ–Ω—Ç—ã –ø—É–±–ª–∏–∫—É—é—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—É—é —Ç–µ–º—É (topic), –∏–ª–∏ –ø–æ–¥–ø–∏—Å—ã–≤–∞—é—Ç—Å—è –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –∏ –ø—Ä–æ—Å–ª—É—à–∏–≤–∞—é—Ç –∏—Ö. –¢–µ–º–∞ ‚Äì —ç—Ç–æ –ø—Ä–æ–∏–∑–≤–æ–ª—å–Ω–∞—è —Å—Ç—Ä–æ–∫–∞, –≤ –∫–æ—Ç–æ—Ä—É—é –≤—Ö–æ–¥—è—Ç –ª—é–±—ã–µ —Å–∏–º–≤–æ–ª—ã –∑–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤ ¬´/¬ª, ¬´+¬ª –∏ ¬´#¬ª, —Å—É—Ç—å –∫–æ—Ç–æ—Ä—ã—Ö –±—É–¥–µ—Ç —Ä–∞—Å–∫—Ä—ã—Ç–∞ –Ω–∏–∂–µ. MQTT-–±—Ä–æ–∫–µ—Ä –ø–æ–ª—É—á–∞–µ—Ç –≤—Å–µ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω–Ω—ã–µ –∏–∑–¥–∞—Ç–µ–ª—è–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –∏ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–¥–ø–∏—Å—á–∏–∫–∞–º. –ü–æ–¥–ø–∏—Å—á–∏–∫–∏ –∏ –∏–∑–¥–∞—Ç–µ–ª–∏ –Ω–µ –¥–æ–ª–∂–Ω—ã –∑–Ω–∞—Ç—å –¥—Ä—É–≥ –æ –¥—Ä—É–≥–µ, —Ä–æ–ª—å –∏–≥—Ä–∞—é—Ç –ª–∏—à—å —Ç–µ–º—ã —Å–æ–æ–±—â–µ–Ω–∏–π –∏ —Å–∞–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è. –î–ª—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è –∏–∑–¥–∞—Ç–µ–ª–∏ –∏ –ø–æ–¥–ø–∏—Å—á–∏–∫–∏ –¥–æ–ª–∂–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±—â–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è —Ç–µ–º –∏ —Ñ–æ—Ä–º–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏–π.&lt;/p&gt;
&lt;p&gt;MQTT —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–≤–µ—Ä—Ö &lt;a href="http://proiot.ru/blog/posts/2017/10/09/setevoe-programmirovanie-tcp-http-server/"&gt;–¢–°–†&lt;/a&gt; –∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω –≤ —Ä–∞—Å—á—ë—Ç–µ –Ω–∞ –º–∞–ª–æ–º–æ—â–Ω—ã–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞, –ø–æ—ç—Ç–æ–º—É –≤—ã—á–∏—Å–ª–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –¥–ª—è –µ–≥–æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –º–∏–Ω–∏–º–∞–ª—å–Ω—ã. –í –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –∫ –æ—á–µ–Ω—å –Ω–∏–∑–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–µ –Ω–∞ —Å–∏—Å—Ç–µ–º—É, MQTT –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –≤—ã—Å–æ–∫–æ–π —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å—é –∏ –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å—é —Å–≤—è–∑–∏ –¥–∞–∂–µ –≤ —Å–µ—Ç—è—Ö —Å –Ω–∏–∑–∫–æ–π –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å—é.&lt;/p&gt;
&lt;h2&gt;–î–ï–ú–û&lt;/h2&gt;
&lt;p&gt;–ù–∞ –∫–∞—Ä—Ç–∏–Ω–∫–µ —Å–≤–µ—Ç–∏–ª—å–Ω–∏–∫ (MQTT-–∫–ª–∏–µ–Ω—Ç), –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –∏–∑ —Å–µ–±—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –Ω–∞ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–µ c –û–° &lt;a href="http://proiot.ru/blog/posts/2017/10/03/setevoe-programmirovanie-udp-ntp-chasy/"&gt;Contiki&lt;/a&gt; –Ω–∞ –±–æ—Ä—Ç—É. –í –∫–∞—á–µ—Å—Ç–≤–µ –±—Ä–æ–∫–µ—Ä–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Mosquitto ‚Äì —ç—Ç–æ –ø–æ–ø—É–ª—è—Ä–Ω—ã–π –∏ –ø—Ä–æ—Å—Ç–æ–π –≤ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –±—Ä–æ–∫–µ—Ä, –∞–∫—Ç–∏–≤–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏–π—Å—è —Å–æ–æ–±—â–µ—Å—Ç–≤–æ–º. –°–≤–µ—Ç–∏–ª—å–Ω–∏–∫ –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ —Ç–µ–º—É &lt;code&gt;proiot3/cmd/leds&lt;/code&gt;. –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –±—Ä–æ–∫–µ—Ä—É Mosquitto –º–æ–∂–Ω–æ –∏–∑ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏,  –Ω–∞–ø—Ä–∏–º–µ—Ä —Å–ª–µ–¥—É—é—â–∞—è –∫–æ–º–∞–Ω–¥–∞ –≤–∫–ª—é—á–∞–µ—Ç –∫—Ä–∞—Å–Ω—ã–π —Å–≤–µ—Ç:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ mosquitto_pub -h localhost -t &amp;#39;proiot3/cmd/leds&amp;#39; -m 100
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–°–≤–µ—Ç–∏–ª—å–Ω–∏–∫ –≤ —Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å —Ç–∞–∫–∂–µ –ø—É–±–ª–∏–∫—É–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ, –Ω–æ —É–∂–µ –≤ –¥—Ä—É–≥–æ–π —Ç–æ–ø–∏–∫ &lt;code&gt;proiot3/evt/status&lt;/code&gt; –µ—Å–ª–∏ –Ω–∞–∂–∞—Ç–∞ –∫–Ω–æ–ø–∫–∞. –í –¥–∞–Ω–Ω–æ–º —Ç–æ–ø–∏–∫–µ –¥–∞–Ω–Ω—ã–µ –ø—É–±–ª–∏–∫—É—é—Ç—Å—è –≤ JSON —Ñ–æ—Ä–º–∞—Ç–µ. –ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ —Ç–æ–ø–∏–∫ –∏–∑ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ –º–æ–∂–Ω–æ —Ç–∞–∫:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ mosquitto_sub -h localhost -t &amp;#39;proiot3/evt/status&amp;#39;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–º—É —Å–µ—Ç–µ–≤–æ–º—É –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É —Å–∏–º—É–ª—è—Ç–æ—Ä–∞ –Ω—É–∂–Ω–æ &lt;a href="http://proiot.ru/blog/posts/2017/10/09/setevoe-programmirovanie-tcp-http-server/"&gt;–Ω–∞–∑–Ω–∞—á–∏—Ç—å&lt;/a&gt; –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∞–¥—Ä–µ—Å &lt;code&gt;abcd::1&lt;/code&gt;, –≤ –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ —Å–≤–µ—Ç–∏–ª—å–Ω–∏–∫ –∏ –±—Ä–æ–∫–µ—Ä –¥—Ä—É–≥ –¥—Ä—É–≥–∞ –Ω–µ —É–≤–∏–¥—è—Ç.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://localhost:9148/fa001d88f857807c4cbef17abf25a544"&gt;mqtt.ipv6&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2017/10/20/protokoly-interneta-veshchei-mqtt/conticki-mqtt.zip"&gt;–∏—Å—Ö–æ–¥–Ω–∏–∫–∏&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2017/10/20/protokoly-interneta-veshchei-mqtt/ui.gif" style="width:100%;"&gt;&lt;/p&gt;
&lt;h2&gt;–¢–û–ü–ò–ö–ò&lt;/h2&gt;
&lt;p&gt;–¢–æ–ø–∏–∫–∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç —Å–æ–±–æ–π —Å–∏–º–≤–æ–ª—ã —Å –∫–æ–¥–∏—Ä–æ–≤–∫–æ–π UTF8. –î–ª–∏–Ω–∞ —Ç–µ–º—ã –Ω–µ –º–æ–∂–µ—Ç –ø—Ä–µ–≤—ã—à–∞—Ç—å 32767 —Å–∏–º–≤–æ–ª–æ–≤. –ò–µ—Ä–∞—Ä—Ö–∏—á–µ—Å–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–æ–ø–∏–∫–æ–≤ –∏–º–µ–µ—Ç —Ñ–æ—Ä–º–∞—Ç ¬´–¥–µ—Ä–µ–≤–∞¬ª, —á—Ç–æ —É–ø—Ä–æ—â–∞–µ—Ç –∏—Ö –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é –∏ –¥–æ—Å—Ç—É–ø –∫ –¥–∞–Ω–Ω—ã–º. –¢–æ–ø–∏–∫–∏ —Å–æ—Å—Ç–æ—è—Ç –∏–∑ –æ–¥–Ω–æ–≥–æ –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —É—Ä–æ–≤–Ω–µ–π, –∫–æ—Ç–æ—Ä—ã–µ —Ä–∞–∑–¥–µ–ª–µ–Ω—ã –º–µ–∂–¥—É —Å–æ–±–æ–π —Å–∏–º–≤–æ–ª–æ–º ¬´/¬ª.&lt;/p&gt;
&lt;p&gt;–ü–æ–¥–ø–∏—Å—á–∏–∫ –º–æ–∂–µ—Ç —Ç–∞–∫–∂–µ –ø–æ–ª—É—á–∞—Ç—å –¥–∞–Ω–Ω—ã–µ —Å—Ä–∞–∑—É —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ç–æ–ø–∏–∫–æ–≤, –¥–ª—è —ç—Ç–æ–≥–æ —Å—É—â–µ—Å—Ç–≤—É—é—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã. –û–Ω–∏ –±—ã–≤–∞—é—Ç –¥–≤—É—Ö —Ç–∏–ø–æ–≤: –æ–¥–Ω–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ –∏ –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ. –î–ª—è –±–æ–ª–µ–µ –ø—Ä–æ—Å—Ç–æ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –≤ –ø—Ä–∏–º–µ—Ä–∞—Ö –∫–∞–∂–¥—ã–π –∏–∑ –Ω–∏—Ö:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;–û–¥–Ω–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π ¬´+¬ª. –ö –ø—Ä–∏–º–µ—Ä—É, –Ω–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã –≤–æ –≤—Å–µ—Ö –∫–æ–º–Ω–∞—Ç–∞—Ö ‚Äì –¥–ª—è —ç—Ç–æ–≥–æ –Ω—É–∂–Ω–æ –ø–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ —Ç–æ–ø–∏–∫ –≤–∏–¥–∞ &lt;code&gt;home/+/temperature&lt;/code&gt;. –í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –ø–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ —Å —Ç–æ–ø–∏–∫–æ–≤ &lt;code&gt;home/living-room1/temperature&lt;/code&gt;, &lt;code&gt;home/living-room2/temperature&lt;/code&gt; –∏ —Ç.–¥.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;–ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤—ã–π ¬´#¬ª. –ö –ø—Ä–∏–º–µ—Ä—É, —á—Ç–æ–±—ã –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ —Å —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –¥–∞—Ç—á–∏–∫–æ–≤ –≤ –¥–æ–º–µ, –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ–º—Å—è –Ω–∞ —Ç–æ–ø–∏–∫ –≤–∏–¥–∞ &lt;code&gt;home/#&lt;/code&gt;. –í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –ø–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ —Å —Ç–æ–ø–∏–∫–æ–≤ &lt;code&gt;home/living-room1/temperature&lt;/code&gt;, &lt;code&gt;home/living-room2/button&lt;/code&gt; –∏ —Ç.–ø.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2017/10/20/protokoly-interneta-veshchei-mqtt/mqtt.svg" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;h2&gt;–ö–ê–ß–ï–°–¢–í–û –û–ë–°–õ–£–ñ–ò–í–ê–ù–ò–Ø&lt;/h2&gt;
&lt;p&gt;MQTT –ø–æ–∑–≤–æ–ª—è–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫—É –≥–∏–±–∫–æ –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å –æ–±–º–µ–Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏, –¥–ª—è —ç—Ç–æ–≥–æ –≤ –ø—Ä–æ—Ç–æ–∫–æ–ª–µ –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω–æ —Ç—Ä–∏ —É—Ä–æ–≤–Ω—è –∫–∞—á–µ—Å—Ç–≤–∞ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è QoS (Quality of Service):&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;QoS 0. –ú–∞–∫—Å–∏–º—É–º –æ–¥–Ω–æ–∫—Ä–∞—Ç–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π. –ü—Ä–∏—ë–º–Ω–∏–∫ —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –∏—Ö –ø–æ–ª—É—á–µ–Ω–∏–µ, –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ, –ø–µ—Ä–µ–¥–∞—ë—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –ª–∏—à—å —Ä–∞–∑, –Ω–µ –ø—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞—è –ø–æ–ø—ã—Ç–æ–∫ –ø–æ –∏—Ö –ø–æ–≤—Ç–æ—Ä–Ω–æ–π –ø–µ—Ä–µ–¥–∞—á–µ. –≠—Ç–æ ‚Äì –º–µ—Ç–æ–¥ ¬´–æ—Ç–ø—Ä–∞–≤–∏–ª –∏ –∑–∞–±—ã–ª¬ª&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;QoS 1. –ú–∏–Ω–∏–º—É–º –æ–¥–Ω–æ–∫—Ä–∞—Ç–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π. –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç—Å—è, —á—Ç–æ –ø—Ä–∏—ë–º–Ω–∏–∫ –ø–æ–ª—É—á–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω —Ä–∞–∑. –ü—Ä–∏ —ç—Ç–æ–º –ø–æ–¥–ø–∏—Å—á–∏–∫ –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –æ–¥–Ω–æ –∏ —Ç–æ –∂–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑. –û—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å –±—É–¥–µ—Ç –ø—Ä–µ–¥–ø—Ä–∏–Ω–∏–º–∞—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –Ω–µ –ø–æ–ª—É—á–∏—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –≤ —É—Å–ø–µ—à–Ω–æ–π –¥–æ—Å—Ç–∞–≤–∫–µ —Å–æ–æ–±—â–µ–Ω–∏—è&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;QoS 2. –û–¥–Ω–æ–∫—Ä–∞—Ç–Ω–∞—è –¥–æ—Å—Ç–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π. –ì–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç—Å—è, —á—Ç–æ –ø—Ä–∏—ë–º–Ω–∏–∫ –ø–æ–ª—É—á–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–¥–∏–Ω –∏ —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑. –°–∞–º–∞—è –º–µ–¥–ª–µ–Ω–Ω–∞—è –ø—Ä–æ—Ü–µ–¥—É—Ä–∞ –¥–æ—Å—Ç–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π, –Ω–æ –ø—Ä–∏ —ç—Ç–æ–º –∏ —Å–∞–º–∞—è –Ω–∞–¥—ë–∂–Ω–∞—è. –î–ª—è –¥–æ—Å—Ç–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–µ—Ö–∞–Ω–∏–∑–º —á–µ—Ç—ã—Ä–µ—Ö—ç—Ç–∞–ø–Ω–æ–≥–æ —Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏—è&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;–ù–æ –µ—Å—Ç—å –æ–¥–∏–Ω –Ω–µ–æ—á–µ–≤–∏–¥–Ω—ã–π –Ω—é–∞–Ω—Å. –î–µ–ª–æ –≤ —Ç–æ–º, —á—Ç–æ —É—Ä–æ–≤–µ–Ω—å QoS –ø—Ä–æ–ø–∏—Å–∞–Ω –∫–∞–∫ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∏–∑–¥–∞—Ç–µ–ª—è —Ç–∞–∫ –∏ –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –ø–æ–¥–ø–∏—Å—á–∏–∫–∞ –∏ –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –º–æ–∂–µ—Ç –Ω–µ —Å–æ–≤–ø–∞–¥–∞—Ç—å. –í —Ç–∞–∫–æ–º —Å–ª—É—á–∞–µ –æ—á–µ–≤–∏–¥–Ω–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ–Ω–∏–∂–µ–Ω–∏–µ ¬´–æ–±—â–µ–≥–æ¬ª QoS –¥–æ –Ω–∞–∏–º–µ–Ω—å—à–µ–≥–æ —É—Ä–æ–≤–Ω—è –≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –ø–∞—Ä–µ –∏–∑–¥–∞—Ç–µ–ª—å –ø–æ–¥–ø–∏—Å—á–∏–∫. –í–æ—Ç —Ç–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç MQTT –≤ Wireshark:&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2017/10/20/protokoly-interneta-veshchei-mqtt/sub.png" style="width:100%;"&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2017/10/20/protokoly-interneta-veshchei-mqtt/pub.png" style="width:100%;"&gt;&lt;/p&gt;
&lt;p&gt;–ë—Ä–æ–∫–µ—Ä —è–≤–ª—è–µ—Ç—Å—è –Ω–∞–∏–±–æ–ª–µ–µ –∫—Ä–∏—Ç–∏—á–Ω—ã–º —ç–ª–µ–º–µ–Ω—Ç–æ–º —Å–∏—Å—Ç–µ–º—ã ¬´–∏–∑–¥–∞—Ç–µ–ª—å-–ø–æ–¥–ø–∏—Å—á–∏–∫¬ª, –æ—Ç –µ–≥–æ –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç–∏ –∏ —Å–∫–æ—Ä–æ—Å—Ç–∏ –º–Ω–æ–≥–æ–µ –∑–∞–≤–∏—Å–∏—Ç. –ë—Ä–æ–∫–µ—Ä –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –ø—Ä–∏–µ–º –≤—Å–µ—Ö —Å–æ–æ–±—â–µ–Ω–∏–π, –∏—Ö —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—é, –ø—Ä–∏–Ω—è—Ç–∏–µ —Ä–µ—à–µ–Ω–∏—è –æ —Ç–æ–º, –∫–æ–º—É –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã —ç—Ç–∏ —Å–æ–æ–±—â–µ–Ω–∏—è, –∏, –≤ –∫–æ–Ω–µ—á–Ω–æ–º –∏—Ç–æ–≥–µ, –∑–∞ –ø–µ—Ä–µ—Å—ã–ª–∫—É —Å–æ–æ–±—â–µ–Ω–∏–π –≤—Å–µ–º –∫–ª–∏–µ–Ω—Ç–∞–º-–ø–æ–¥–ø–∏—Å—á–∏–∫–∞–º. –°—Ä–µ–¥–∏ —Å–µ—Ä–≤–µ—Ä–Ω—ã—Ö —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–π –±—Ä–æ–∫–µ—Ä–∞ –ø–æ–º–∏–º–æ —É–∂–µ —É–ø–æ–º—è–Ω—É—Ç–æ–≥–æ –æ—Ç–∫—Ä—ã—Ç–æ–≥–æ –ü–û Mosquitto –º–æ–∂–Ω–æ –≤—ã–¥–µ–ª–∏—Ç—å IBM WebSphere MQ; –ª–µ–≥–∫–æ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º—ã–π –∏ –≤—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π –æ—Ç–∫—Ä—ã—Ç—ã–π —Å–µ—Ä–≤–µ—Ä emqttd –Ω–∞ Erlang; –±—Ä–æ–∫–µ—Ä HiveMQ –∏ –¥—Ä.&lt;/p&gt;
&lt;p&gt;–ö–∞–∫ —É–∂–µ —É–ø–æ–º–∏–Ω–∞–ª–æ—Å—å, MQTT —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–≤–µ—Ä—Ö TCP, –≥–¥–µ –∫–∞–∫ –∏–∑–≤–µ—Å—Ç–Ω–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–∞–Ω–Ω—ã—Ö —Ö–æ–¥—è—Ç –±–µ–∑ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è. –î–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç –±–æ—Ä–æ–¥–∞—Ç—ã—Ö —Ö–∞–∫–∫–µ—Ä–æ–≤ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ –æ–±–º–µ–Ω–∞ –¥–∞–Ω–Ω—ã–º–∏ –ø–æ MQTT –ø—Ä–æ—Ç–æ–∫–æ–ª—É –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å TLS (Transport Layer Security) –≤–º–µ—Å—Ç–æ TCP. –ü—Ä–æ—Ç–æ–∫–æ–ª TLS —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–≤–µ—Ä—Ö TCP –∏ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Ç—Ä—ë—Ö —É—Å–ª—É–≥ –≤—Å–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º, —Ä–∞–±–æ—Ç–∞—é—â–∏–º –Ω–∞–¥ –Ω–∏–º ‚Äì —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ, –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –∏ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å. TLS –¥–∞—ë—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∫–ª–∏–µ–Ω—Ç-—Å–µ—Ä–≤–µ—Ä–Ω—ã–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º –æ—Å—É—â–µ—Å—Ç–≤–ª—è—Ç—å —Å–≤—è–∑—å –≤ —Å–µ—Ç–∏ —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, —á—Ç–æ –Ω–µ–ª—å–∑—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—å –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏–µ –ø–∞–∫–µ—Ç–æ–≤ –∏ –æ—Å—É—â–µ—Å—Ç–≤–∏—Ç—å –Ω–µ—Å–∞–Ω–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø.&lt;/p&gt;</content><category term="contiki"></category><category term="msp430"></category><category term="m2m"></category></entry><entry><title>–ü—Ä–æ—Ç–æ–∫–æ–ª—ã ¬´–ò–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –≤–µ—â–µ–π¬ª - CoAP</title><link href="http://proiot.ru/blog/posts/2017/10/17/protokoly-interneta-veshchei-coap/" rel="alternate"></link><published>2017-10-17T00:00:00+03:00</published><updated>2017-10-17T00:00:00+03:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2017-10-17:/blog/posts/2017/10/17/protokoly-interneta-veshchei-coap/</id><summary type="html">&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2017/10/03/setevoe-programmirovanie-udp-ntp-chasy/"&gt;–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º&lt;/a&gt; —Ä–∞–∑–≤–ª–µ–∫–∞—Ç—å—Å—è —Å —Å–µ—Ç–µ–≤—ã–º–∏ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞–º.&lt;/p&gt;
&lt;p&gt;CoAP (Constrained Application Protocol) ‚Äî –ø—Ä–æ—Ç–æ–∫–æ–ª –ø—Ä–∏–∫–ª–∞–¥–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–π –¥–ª—è —Ç.–Ω. –º–µ–∂–º–∞—à–∏–Ω–Ω–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è (Machine-to-Machine, M2M). –•–æ—Ä–æ—à–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤ —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–º–∏ —Ä–µ—Å—É—Ä—Å–∞–º–∏ —Ç–∞–∫–∏—Ö –∫–∞–∫ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –∏ –¥—Ä. CoAP —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞–ª—Å—è –ø–æ –æ–±—Ä–∞–∑—É –∏ –ø–æ–¥–æ–±–∏—é —Å–≤–æ–µ–≥–æ –ø—Ä–µ–¥—à–µ—Å—Ç–≤–µ–Ω–Ω–∏–∫–∞, –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ &lt;a href="http://proiot.ru/blog/posts/2017/10/09/setevoe-programmirovanie-tcp-http-server/"&gt;HTTP&lt;/a&gt;, –Ω–æ —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ —Ñ–∏—á–∞–º–∏ –∏ —É–ª—É—á—à–µ–Ω–∏—è–º–∏. –í –æ—Ç–ª–∏—á–∏–µ ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2017/10/03/setevoe-programmirovanie-udp-ntp-chasy/"&gt;–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º&lt;/a&gt; —Ä–∞–∑–≤–ª–µ–∫–∞—Ç—å—Å—è —Å —Å–µ—Ç–µ–≤—ã–º–∏ –ø—Ä–æ—Ç–æ–∫–æ–ª–∞–º.&lt;/p&gt;
&lt;p&gt;CoAP (Constrained Application Protocol) ‚Äî –ø—Ä–æ—Ç–æ–∫–æ–ª –ø—Ä–∏–∫–ª–∞–¥–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω—ã–π –¥–ª—è —Ç.–Ω. –º–µ–∂–º–∞—à–∏–Ω–Ω–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è (Machine-to-Machine, M2M). –•–æ—Ä–æ—à–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤ —Å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–º–∏ —Ä–µ—Å—É—Ä—Å–∞–º–∏ —Ç–∞–∫–∏—Ö –∫–∞–∫ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã –∏ –¥—Ä. CoAP —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞–ª—Å—è –ø–æ –æ–±—Ä–∞–∑—É –∏ –ø–æ–¥–æ–±–∏—é —Å–≤–æ–µ–≥–æ –ø—Ä–µ–¥—à–µ—Å—Ç–≤–µ–Ω–Ω–∏–∫–∞, –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ &lt;a href="http://proiot.ru/blog/posts/2017/10/09/setevoe-programmirovanie-tcp-http-server/"&gt;HTTP&lt;/a&gt;, –Ω–æ —Å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–º–∏ —Ñ–∏—á–∞–º–∏ –∏ —É–ª—É—á—à–µ–Ω–∏—è–º–∏. –í –æ—Ç–ª–∏—á–∏–µ –æ—Ç –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ HTTP, –∫–æ—Ç–æ—Ä—ã–π —è–≤–ª—è–µ—Ç—Å—è —Ç–µ–∫—Å—Ç–æ–≤—ã–º –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç &lt;a href="http://proiot.ru/blog/posts/2017/10/09/setevoe-programmirovanie-tcp-http-server/"&gt;–¢–°–†&lt;/a&gt;, CoAP ‚Äì —ç—Ç–æ –±–∏–Ω–∞—Ä–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–≤–µ—Ä—Ö &lt;a href="http://proiot.ru/blog/posts/2017/10/03/setevoe-programmirovanie-udp-ntp-chasy/"&gt;UDP&lt;/a&gt;, —á—Ç–æ –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —É–º–µ–Ω—å—à–∞–µ—Ç –æ–±—â–∏–π —Ä–∞–∑–º–µ—Ä –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∏ –ø–æ–≤—ã—à–∞–µ—Ç –≥–∏–±–∫–æ—Å—Ç—å –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è.&lt;/p&gt;
&lt;p&gt;–° —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ CoAP –≤—ã–≥–ª—è–¥–∏—Ç –ø–æ—á—Ç–∏ —Ç–∞–∫ –∂–µ, –∫–∞–∫ HTTP. –í –æ–±–æ–∏—Ö —Å–ª—É—á–∞—è—Ö —Å–µ—Ä–≤–µ—Ä—ã –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—é—Ç —Å–≤–æ–∏ —Ä–µ—Å—É—Ä—Å—ã –ø–æ –∞–¥—Ä–µ—Å–∞–º URL, –∏ –∫–ª–∏–µ–Ω—Ç—ã –æ–±—Ä–∞—â–∞—é—Ç—Å—è –∫ –Ω–∏–º –ø–æ—Å—Ä–µ–¥—Å—Ç–≤–æ–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤, —Ç–∞–∫–∏—Ö –∫–∞–∫ GET, PUT, POST –∏ DELETE. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ REST (Representational State Transfer ‚Äî ¬´–ø–µ—Ä–µ–¥–∞—á–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è¬ª), –ø–æ–ª—É—á–∏–≤—à–∞—è —Å—Ç–æ–ª—å —à–∏—Ä–æ–∫–æ–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ HTTP —Å–µ—Ä–≤–∏—Å–æ–≤, —Ç–∞–∫–∂–µ —Ö–æ—Ä–æ—à–æ –ª–æ–∂–∏—Ç—Å—è –∏ –Ω–∞ CoAP —Å–µ—Ä–≤–∏—Å—ã. &lt;/p&gt;
&lt;p&gt;–ö–æ–¥—ã —Å–æ—Å—Ç–æ—è–Ω–∏–π (–æ—Ç–≤–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞) CoAP –≤ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å–ª—É—á–∞–µ–≤ –∞–Ω–∞–ª–æ–≥–∏—á–Ω—ã —Å HTTP –∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç —Å–æ–±–æ–π —Ü–µ–ª–æ–µ —á–∏—Å–ª–æ –∏–∑ —Ç—Ä—ë—Ö –¥–µ—Å—è—Ç–∏—á–Ω—ã—Ö —Ü–∏—Ñ—Ä ‚Äî 2.xx —É—Å–ø–µ—à–Ω–æ, 4.xx –æ—à–∏–±–∫–∞ –∫–ª–∏–µ–Ω—Ç–∞, 5.xx –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞.&lt;/p&gt;
&lt;h2&gt;–î–ï–ú–û&lt;/h2&gt;
&lt;p&gt;–ù–∞ –∫–∞—Ä—Ç–∏–Ω–∫–µ —Å–≤–µ—Ç–∏–ª—å–Ω–∏–∫ (—Å–µ—Ä–≤–µ—Ä) –∏ –≤—ã–∫–ª—é—á–∞—Ç–µ–ª—å (–∫–ª–∏–µ–Ω—Ç), –æ–±–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—Ç –∏–∑ —Å–µ–±—è –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –Ω–∞ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞—Ö c –û–° &lt;a href="http://proiot.ru/blog/posts/2017/10/03/setevoe-programmirovanie-udp-ntp-chasy/"&gt;Contiki&lt;/a&gt; –Ω–∞ –±–æ—Ä—Ç—É, –æ–±–∞ –ø–æ–¥–∫–ª—é—á—ë–Ω–Ω—ã –∫ —Å–µ—Ç–∏. –ü–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–Ω—ã—Ö –º–µ–∂–¥—É –¥–∞–Ω–Ω—ã–º–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏ –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è –ø–æ—Å—Ä–µ–¥—Å—Ç–≤–æ–º CoAP –ø—Ä–æ—Ç–æ–∫–æ–ª–∞. –í —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏ Contiki 3.0 –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Erbium (Er) REST Engine –≤ –∫–∞—á–µ—Å—Ç–≤–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ CoAP.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://localhost:9148/b793a136c4b05c9a9c29195f045b8482"&gt;coap.server.ipv6&lt;/a&gt; | &lt;a href="http://localhost:9148/e2e2bcf4782229c27ee28ce07c9698cf"&gt;coap.client.ipv6&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2017/10/17/protokoly-interneta-veshchei-coap/conticki-coap.zip"&gt;–∏—Å—Ö–æ–¥–Ω–∏–∫–∏&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2017/10/17/protokoly-interneta-veshchei-coap/ui.gif" style="width:100%;"&gt;&lt;/p&gt;
&lt;p&gt;–í –ø—Ä–∏–º–µ—Ä–µ —Å –ª–∞–º–ø–æ—á–∫–∞–º–∏ —Ü–≤–µ—Ç –∑–∞–¥–∞—ë—Ç—Å—è / —Å–Ω–∏–º–∞–µ—Ç—Å—è –º–µ—Ç–æ–¥–æ–º PUT. –í —Ç–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏–∏ REST –¥–∞–Ω–Ω—ã–π –º–µ—Ç–æ–¥ —è–≤–ª—è–µ—Ç—Å—è &lt;strong&gt;–∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã–º&lt;/strong&gt;, –∞–≥–∞. –≠—Ç–æ —É–º–Ω–æ–µ —Å–ª–æ–≤–æ –ø—Ä–∏—à–ª–æ –∫ –Ω–∞–º –∏–∑ –º–∞—Ç–µ–º–∞—Ç–∏–∫–∏. –ò–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å ‚Äî —Å–≤–æ–π—Å—Ç–≤–æ –æ–±—ä–µ–∫—Ç–∞ –∏–ª–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∫ –æ–±—ä–µ–∫—Ç—É –¥–∞–≤–∞—Ç—å —Ç–æ—Ç –∂–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç, —á—Ç–æ –∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º. –û–ø–µ—Ä–∞—Ü–∏–∏ —Å–ª–æ–∂–µ–Ω–∏—è —Å –Ω—É–ª—ë–º, —É–º–Ω–æ–∂–µ–Ω–∏—è –Ω–∞ –µ–¥–∏–Ω–∏—Ü—É, –≤–æ–∑–≤–µ–¥–µ–Ω–∏—è –≤ —Å—Ç–µ–ø–µ–Ω—å –Ω–æ–ª—å –∏ –ø—Ä. —è–≤–ª—è—é—Ç—Å—è –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã–º–∏.&lt;/p&gt;
&lt;p&gt;–° —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è REST —Å–µ—Ä–≤–∏—Å–∞ –º–µ—Ç–æ–¥ —è–≤–ª—è–µ—Ç—Å—è –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã–º, –µ—Å–ª–∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—á–Ω—ã–π –∑–∞–ø—Ä–æ—Å, —Å–¥–µ–ª–∞–Ω–Ω—ã–π –æ–¥–∏–Ω –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ –ø–æ–¥—Ä—è–¥, –∏–º–µ–µ—Ç –æ–¥–∏–Ω –∏ —Ç–æ—Ç –∂–µ —ç—Ñ—Ñ–µ–∫—Ç, –Ω–µ –∏–∑–º–µ–Ω—è—é—â–∏–π —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞. –°–æ–∑–¥–∞–Ω–∏–µ –±–æ–ª—å—à–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –∏–º–µ–µ—Ç —Ç–∞–∫–æ–π –∂–µ —ç—Ñ—Ñ–µ–∫—Ç, –∫–∞–∫ –∏ –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å. –í –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ —Å–∫–æ–ª—å–∫–æ –±—ã —Ä–∞–∑ –º—ã –Ω–∏ –∑–∞–¥–∞–≤–∞–ª–∏ –Ω–∞–ø—Ä–∏–º–µ—Ä –∫—Ä–∞—Å–Ω—ã–π —Ü–≤–µ—Ç –¥–ª—è –ª–∞–º–ø–æ—á–∫–∏, –æ–Ω–∞ –∏–∑–º–µ–Ω–∏—Ç —Å–≤–æ–π —Ü–≤–µ—Ç (–ø–æ–∫—Ä–∞—Å–Ω–µ–µ—Ç) —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—Ä–æ—Å–µ. –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –º–µ—Ç–æ–¥—ã GET, PUT –∏ DELETE –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω—ã, –Ω–æ –Ω–µ –º–µ—Ç–æ–¥ POST. –í–æ—Ç –µ—Å–ª–∏ –±—ã –º—ã –∑–∞—Ö–æ—Ç–µ–ª–∏, —á—Ç–æ–±—ã –ø—Ä–∏ –∫–∞–∂–¥–æ–º –æ–±—Ä–∞—â–µ–Ω–∏–∏ –∫ —Å–µ—Ä–≤–µ—Ä—É —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ª–∞–º–ø–æ—á–µ–∫ –º–µ–Ω—è–ª–æ—Å—å –Ω–∞ –ø—Ä–æ—Ç–∏–≤–æ–ø–æ–ª–æ–∂–Ω–æ–µ (XOR), —Ç–æ –ø—Ä–æ –ø—Ä–∞–≤–∏–ª–∞–º REST —Ç–∞–∫–æ–π –∑–∞–ø—Ä–æ—Å —Å—Ç–æ–∏—Ç —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —á–µ—Ä–µ–∑ –º–µ—Ç–æ–¥ POST.&lt;/p&gt;
&lt;p&gt;–ï—Å–ª–∏ –º—ã —Ö–æ—Ç–∏–º –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ª–∞–º–ø–æ—á–µ–∫ –Ω–∞ —Ç–µ–∫—É—â–∏–π –º–æ–º–µ–Ω—Ç, –Ω–æ –ø—Ä–∏ —ç—Ç–æ–º –Ω–µ —Ö–æ—Ç–∏–º –∏–∑–º–µ–Ω—è—Ç—å –∏–∑ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, —Ç–æ —Å—Ç–æ–∏—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å GET. –° —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è REST –ø–æ–¥–æ–±–Ω—ã–µ –º–µ—Ç–æ–¥—ã –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –∫–∞–∫ &lt;strong&gt;–±–µ–∑–æ–ø–∞—Å–Ω—ã–µ&lt;/strong&gt;, —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –æ–Ω–∏ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω—ã —Ç–æ–ª—å–∫–æ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏ –Ω–µ –¥–æ–ª–∂–Ω—ã –∏–∑–º–µ–Ω—è—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–∞. –î—Ä—É–≥–∏–º–∏ —Å–ª–æ–≤–∞–º–∏, –æ–Ω–∏ –Ω–µ –¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å –ø–æ–±–æ—á–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤, –∑–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ–º –±–µ–∑–æ–±–∏–¥–Ω—ã—Ö —ç—Ñ—Ñ–µ–∫—Ç–æ–≤, —Ç–∞–∫–∏—Ö –∫–∞–∫ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —Ç.–¥.&lt;/p&gt;
&lt;h2&gt;COAP&lt;/h2&gt;
&lt;p&gt;–°–∞–º–æ–µ –≤—Ä–µ–º—è –∑–∞–ø—É—Å—Ç–∏—Ç—å –Ω–∞—à –ª—é–±–∏–º—ã–π Wireshark –∏ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —á—Ç–æ —Ç–∞–º –≤–Ω—É—Ç—Ä–∏ CoAP –ø–∞–∫–µ—Ç–∞. –ù–∞ —Ä–∏—Å—É–Ω–∫–µ –º–µ—Ç–æ–¥ PUT, –∫–æ—Ç–æ—Ä—ã–π –≤–∫–ª—é—á–∞–µ—Ç –∫—Ä–∞—Å–Ω—ã–µ –ª–∞–º–ø–æ—á–∫–∏. –í –¥–∞–Ω–Ω–æ–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º –ø—Ä–∏–º–µ—Ä–µ –µ—Å–ª–∏ –º—ã —Ö–æ—Ç–∏–º –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–∞–∫–æ–µ-—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ —Å –ª–∞–º–ø–æ—á–∫–∏, —Ç–æ –Ω–∞–¥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–π URL —Å–µ—Ä–≤–µ—Ä–∞ &lt;code&gt;/actuators/leds&lt;/code&gt;, –∞ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ —Ü–≤–µ—Ç –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è –∑–∞–¥–∞–≤–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º &lt;code&gt;color&lt;/code&gt;. –í —Ç–µ–ª–µ –∑–∞–ø—Ä–æ—Å–∞ &lt;code&gt;mode=on&lt;/code&gt; –≤–∫–ª—é—á–∞–µ—Ç –ª–∞–º–ø–æ—á–∫—É, –∞ &lt;code&gt;mode=off&lt;/code&gt; –≤—ã–∫–ª—é—á–∞–µ—Ç. –¢–∞–∫–æ–π –ø—Ä–∏–º–µ—Ä –∏–¥—ë—Ç –≤ –∏—Å—Ö–æ–¥–Ω–∏–∫–∞—Ö Contiki, –∞ –Ω–∞—Å–∫–æ–ª—å–∫–æ –æ–Ω —Å–ª–µ–¥—É–µ—Ç –ø—Ä–∏–Ω—Ü–∏–ø–∞–º REST —ç—Ç–æ —É–∂–µ –¥—Ä—É–≥–æ–π –≤–æ–ø—Ä–æ—Å.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2017/10/17/protokoly-interneta-veshchei-coap/coap.png" style="width:100%;"&gt;&lt;/p&gt;
&lt;p&gt;–ö–∞–∫ –≤–∏–¥–Ω–æ, CoAP –æ—á–µ–Ω—å –∫–æ–º–ø–∞–∫—Ç–Ω—ã–π –ø—Ä–æ—Ç–æ–∫–æ–ª. –ó–¥–µ—Å—å –Ω–∞–∏–±–æ–ª–µ–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω–æ –ø–æ–ª–µ &lt;code&gt;Type: Confirmable&lt;/code&gt;, —Å –ø–æ–º–æ—â—å—é –∫–æ—Ç–æ—Ä–æ–≥–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –º–æ–∂–µ—Ç –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å –¥–æ—Å—Ç–∞–≤–∫–∏ –ø–∞–∫–µ—Ç–æ–≤. –ö–∞–∫ –º—ã –∑–Ω–∞–µ–º —Ç–∞–∫–∞—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç —É UDP –ø—Ä–æ—Ç–æ–∫–æ–ª–∞, –Ω–æ –æ–Ω–∞ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –≤ CoAP –∫–∞–∫ –Ω–∞–¥—Å—Ç—Ä–æ–π–∫–∞ –Ω–∞–¥ UDP. –ö–æ–≥–¥–∞ –ø–æ–ª—É—á–∞—Ç–µ–ª—é –ø—Ä–∏—Ö–æ–¥–∏—Ç ¬´–°onfirmable¬ª —Å–æ–æ–±—â–µ–Ω–∏–µ, –æ–Ω –≤—Å–µ–≥–¥–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ. –ü–µ—Ä–µ–¥–∞—é—â–∞—è —Å—Ç–æ—Ä–æ–Ω–∞, –≤ —Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å, –ø–æ–≤—Ç–æ—Ä–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –µ—Å–ª–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è –≤ —Ç–µ—á–µ–Ω–∏–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ –ø–µ—Ä–∏–æ–¥–∞ –≤—Ä–µ–º–µ–Ω–∏, –∑–∞–¥–∞–Ω–Ω–æ–≥–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏ —Å –∫–∞–∂–¥—ã–º —Ä–∞–∑–æ–º –≤–æ–∑—Ä–∞—Å—Ç–∞—é—â–µ–≥–æ —ç–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω–æ, –ø–æ–∫–∞ –ø–æ–ª—É—á–∞—Ç–µ–ª—å –Ω–µ –ø–æ—Å—ã–ª–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –ø—Ä–∏–µ–º–∞.&lt;/p&gt;
&lt;p&gt;–î–ª—è –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ —Ç—Ä–µ–±—É—é—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–æ–≥–æ UDP. –¢–æ–≥–¥–∞ –≤ –∫–∞—á–µ—Å—Ç–≤–µ –±–æ–ª–µ–µ –ª–µ–≥–∫–æ–π –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã —Å–æ–æ–±—â–µ–Ω–∏–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–µ—Ä–µ–¥–∞–Ω–æ —Å –º–µ–Ω—å—à–µ–π –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å—é, –ø–æ–º–µ—á–µ–Ω–Ω–æ–µ –∫–∞–∫ ¬´Non-confirmable¬ª. –î–∞–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤—Å–µ–≥–¥–∞ –Ω–µ—Å–µ—Ç –ª–∏–±–æ –∑–∞–ø—Ä–æ—Å, –ª–∏–±–æ –æ—Ç–≤–µ—Ç –∏ –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø—É—Å—Ç—ã–º.&lt;/p&gt;
&lt;p&gt;–ü–æ–∂–∞–ª—É–π –æ—Ç–¥–µ–ª—å–Ω–æ —Å—Ç–æ–∏—Ç —É–ø–æ–º—è–Ω—É—Ç—å —Å–∏–º–ø–∞—Ç–∏—á–Ω–æ–µ –¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ Copper –¥–ª—è –±—Ä–∞—É–∑–µ—Ä–∞ Firefox, –∫–æ—Ç–æ—Ä–æ–µ –±—É–¥–µ—Ç –ø–æ–ª–µ–∑–Ω–æ –ø—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ CoAP –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π. –° –µ–≥–æ –ø–æ–º–æ—â—å—é –º–æ–∂–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å–µ—Ä–≤–µ—Ä–∞ –æ—Ç–¥–µ–ª—å–Ω–æ –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞. –î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ —Å–µ—Ä–≤–µ—Ä—É –∏–∑ –±—Ä–∞—É–∑–µ—Ä–∞ –Ω—É–∂–Ω–æ –Ω–µ –∑–∞–±—ã—Ç—å &lt;a href="http://proiot.ru/blog/posts/2017/10/09/setevoe-programmirovanie-tcp-http-server/"&gt;–Ω–∞–∑–Ω–∞—á–∏—Ç—å&lt;/a&gt; –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∞–¥—Ä–µ—Å &lt;code&gt;abcd::1&lt;/code&gt; –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–º—É —Å–µ—Ç–µ–≤–æ–º—É –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É —Å–∏–º—É–ª—è—Ç–æ—Ä–∞.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2017/10/17/protokoly-interneta-veshchei-coap/copper.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–¢–µ–º–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –¥–ª—è ¬´–ò–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –≤–µ—â–µ–π¬ª —è–≤–ª—è–µ—Ç—Å—è –æ—Å–æ–±–µ–Ω–Ω–æ –∞–∫—Ç—É–∞–ª—å–Ω–æ–π. –í CoAP –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ, –Ω–æ –±–µ–∑ TCP —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π TLS (Transport Layer Security) –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —Å–≤—è–∑–∏. –ü–æ—ç—Ç–æ–º—É –≤ CoAP –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è DTLS (Datagram Transport Layer Security), –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è–º, –æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–º –Ω–∞ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è—Ö –ø–æ—Å—Ä–µ–¥—Å—Ç–≤–æ–º –¥–∞—Ç–∞–≥—Ä–∞–º–º, —Å–æ–æ–±—â–∞—Ç—å—Å—è –±–µ–∑–æ–ø–∞—Å–Ω—ã–º —Å–ø–æ—Å–æ–±–æ–º, –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—é—â–∏–º –ø–µ—Ä–µ—Ö–≤–∞—Ç, –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏–µ, –≤–º–µ—à–∞—Ç–µ–ª—å—Å—Ç–≤–æ, –Ω–µ –Ω–∞—Ä—É—à–∞—è –∑–∞—â–∏—Ç—ã —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ –ø–æ–¥–¥–µ–ª–∫—É —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2017/10/20/protokoly-interneta-veshchei-mqtt/"&gt;–î–∞–ª–µ–µ&lt;/a&gt; MQTT.&lt;/p&gt;</content><category term="contiki"></category><category term="msp430"></category><category term="m2m"></category><category term="REST"></category></entry><entry><title>–°–µ—Ç–µ–≤–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ - TCP | HTTP —Å–µ—Ä–≤–µ—Ä</title><link href="http://proiot.ru/blog/posts/2017/10/09/setevoe-programmirovanie-tcp-http-server/" rel="alternate"></link><published>2017-10-09T00:00:00+03:00</published><updated>2017-10-09T00:00:00+03:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2017-10-09:/blog/posts/2017/10/09/setevoe-programmirovanie-tcp-http-server/</id><summary type="html">&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2017/10/03/setevoe-programmirovanie-udp-ntp-chasy/"&gt;–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º&lt;/a&gt; –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ –ø–æ —Å–µ—Ç–µ–≤—ã–º –ø—Ä–æ—Ç–æ–∫–æ–ª–∞–º.&lt;/p&gt;
&lt;p&gt;TCP –∏ UDP ‚Äî –æ–±–∞ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è. UDP ‚Äî —ç—Ç–æ –ø—Ä–æ—Ç–æ–∫–æ–ª –±–µ–∑ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∏ —Å –Ω–µ–≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –¥–æ—Å—Ç–∞–≤–∫–æ–π –ø–∞–∫–µ—Ç–æ–≤. TCP (Transmission Control Protocol) ‚Äî —ç—Ç–æ –ø—Ä–æ—Ç–æ–∫–æ–ª —Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∏ —Å –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –¥–æ—Å—Ç–∞–≤–∫–æ–π –ø–∞–∫–µ—Ç–æ–≤. –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏–µ (–ü—Ä–∏–≤–µ—Ç. | –ü—Ä–∏–≤–µ—Ç. | –ü–æ–±–æ–ª—Ç–∞–µ–º? | –î–∞–≤–∞–π.), –ø–æ—Å–ª–µ —á–µ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å—á–∏—Ç–∞–µ—Ç—Å—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º. –î–∞–ª–µ–µ ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2017/10/03/setevoe-programmirovanie-udp-ntp-chasy/"&gt;–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º&lt;/a&gt; –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ –ø–æ —Å–µ—Ç–µ–≤—ã–º –ø—Ä–æ—Ç–æ–∫–æ–ª–∞–º.&lt;/p&gt;
&lt;p&gt;TCP –∏ UDP ‚Äî –æ–±–∞ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è. UDP ‚Äî —ç—Ç–æ –ø—Ä–æ—Ç–æ–∫–æ–ª –±–µ–∑ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∏ —Å –Ω–µ–≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –¥–æ—Å—Ç–∞–≤–∫–æ–π –ø–∞–∫–µ—Ç–æ–≤. TCP (Transmission Control Protocol) ‚Äî —ç—Ç–æ –ø—Ä–æ—Ç–æ–∫–æ–ª —Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∏ —Å –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –¥–æ—Å—Ç–∞–≤–∫–æ–π –ø–∞–∫–µ—Ç–æ–≤. –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏–µ (–ü—Ä–∏–≤–µ—Ç. | –ü—Ä–∏–≤–µ—Ç. | –ü–æ–±–æ–ª—Ç–∞–µ–º? | –î–∞–≤–∞–π.), –ø–æ—Å–ª–µ —á–µ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å—á–∏—Ç–∞–µ—Ç—Å—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º. –î–∞–ª–µ–µ –ø–æ —ç—Ç–æ–º—É —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—é —Ç—É–¥–∞ –∏ –æ–±—Ä–∞—Ç–Ω–æ –ø–æ—Å—ã–ª–∞—é—Ç—Å—è –ø–∞–∫–µ—Ç—ã (–∏–¥–µ—Ç –±–µ—Å–µ–¥–∞), –ø—Ä–∏—á–µ–º —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π, –¥–æ—à–µ–ª –ª–∏ –ø–∞–∫–µ—Ç –¥–æ –ø–æ–ª—É—á–∞—Ç–µ–ª—è. –ï—Å–ª–∏ –ø–∞–∫–µ—Ç –ø–æ—Ç–µ—Ä—è–ª—Å—è, –∏–ª–∏ –¥–æ—à–µ–ª, –Ω–æ —Å –±–∏—Ç–æ–π –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω–æ–π —Å—É–º–º–æ–π, —Ç–æ –æ–Ω –ø–æ—Å—ã–ª–∞–µ—Ç—Å—è –ø–æ–≤—Ç–æ—Ä–Ω–æ (¬´–ø–æ–≤—Ç–æ—Ä–∏, –Ω–µ —Ä–∞—Å—Å–ª—ã—à–∞–ª¬ª). –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º TCP –±–æ–ª–µ–µ –Ω–∞–¥—ë–∂–µ–Ω, –Ω–æ –æ–Ω —Å–ª–æ–∂–Ω–µ–µ —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ —Ç—Ä–µ–±—É–µ—Ç –±–æ–ª—å—à–µ —Ç–∞–∫—Ç–æ–≤ / –ø–∞–º—è—Ç–∏, —á—Ç–æ –∏–º–µ–µ—Ç –Ω–µ —Å–∞–º–æ–µ –ø–æ—Å–ª–µ–¥–Ω–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –¥–ª—è –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–≤. –í –∫–∞—á–µ—Å—Ç–≤–µ –ø—Ä–∏–º–µ—Ä–æ–≤ –ø—Ä–∏–∫–ª–∞–¥–Ω—ã—Ö –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏—Ö TCP, –º–æ–∂–Ω–æ –Ω–∞–∑–≤–∞—Ç—å FTP, HTTP, SMTP –∏ –º–Ω–æ–≥–∏–µ –¥—Ä—É–≥–∏–µ.&lt;/p&gt;
&lt;h2&gt;TL;DR&lt;/h2&gt;
&lt;p&gt;HTTP (Hypertext Transfer Protocol) ‚Äî –ø—Ä–∏–∫–ª–∞–¥–Ω–æ–π –ø—Ä–æ—Ç–æ–∫–æ–ª, —Å –ø–æ–º–æ—â—å—é –∫–æ—Ç–æ—Ä–æ–≥–æ —Å–µ—Ä–≤–µ—Ä –æ—Ç–¥–∞—ë—Ç —Å—Ç—Ä–∞–Ω–∏—á–∫–∏ –Ω–∞—à–µ–º—É –±—Ä–∞—É–∑–µ—Ä—É. HTTP –≤ –Ω–∞—Å—Ç–æ—è—â–µ–µ –≤—Ä–µ–º—è –ø–æ–≤—Å–µ–º–µ—Å—Ç–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–æ –í—Å–µ–º–∏—Ä–Ω–æ–π –ø–∞—É—Ç–∏–Ω–µ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ —Å –≤–µ–±-—Å–∞–π—Ç–æ–≤. –ù–∞ –∫–∞—Ä—Ç–∏–Ω–∫–µ —Å–≤–µ—Ç–∏–ª—å–Ω–∏–∫ –Ω–∞ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–µ —Å –û–° &lt;a href="http://proiot.ru/blog/posts/2017/10/03/setevoe-programmirovanie-udp-ntp-chasy/"&gt;Contiki&lt;/a&gt; –Ω–∞ –±–æ—Ä—Ç—É, –≤ –∫–æ—Ç–æ—Ä–æ–º —Ü–≤–µ—Ç–∞ –∑–∞–¥–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://localhost:9148/54734ef58963a68a9d79d74d53e115f7"&gt;IPv6&lt;/a&gt; | &lt;a href="http://localhost:9148/f681567307f7470e3bcb0e17de6c1710"&gt;IPv4&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2017/10/09/setevoe-programmirovanie-tcp-http-server/conticki-http-leds.zip"&gt;–∏—Å—Ö–æ–¥–Ω–∏–∫–∏&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2017/10/09/setevoe-programmirovanie-tcp-http-server/ui.gif" style="width:100%;"&gt;&lt;/p&gt;
&lt;p&gt;HTTP –ø—Ä–æ—Ç–æ–∫–æ–ª —Ç–µ–∫—Å—Ç–æ–≤—ã–π –∏ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–æ—Å—Ç–æ–π. –°–æ–±—Å—Ç–≤–µ–Ω–Ω–æ –≤–æ—Ç —Ç–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç –º–µ—Ç–æ–¥ GET, –ø–æ—Å—ã–ª–∞–µ–º—ã–π —É—Ç–∏–ª–∏—Ç–æ–π netcat –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ã–π IPv6 –∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞ —Å –ª–∞–º–ø–æ—á–∫–∞–º–∏:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ nc fe80::200:e2ff:fe58:b66b%mazko 80 &amp;lt;&amp;lt;EOF
GET /b HTTP/1.0

EOF
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ú–µ—Ç–æ–¥ HTTP (–∞–Ω–≥–ª. HTTP Method) –æ–±—ã—á–Ω–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –∫–æ—Ä–æ—Ç–∫–æ–µ –∞–Ω–≥–ª–∏–π—Å–∫–æ–µ —Å–ª–æ–≤–æ, –∑–∞–ø–∏—Å–∞–Ω–Ω–æ–µ –∑–∞–≥–ª–∞–≤–Ω—ã–º–∏ –±—É–∫–≤–∞–º–∏, —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –∫ —Ä–µ–≥–∏—Å—Ç—Ä—É. –ö–∞–∂–¥—ã–π —Å–µ—Ä–≤–µ—Ä –æ–±—è–∑–∞–Ω –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –∫–∞–∫ –º–∏–Ω–∏–º—É–º –º–µ—Ç–æ–¥—ã GET –∏ HEAD. –ö—Ä–æ–º–µ –º–µ—Ç–æ–¥–æ–≤ GET –∏ HEAD, —á–∞—Å—Ç–æ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –º–µ—Ç–æ–¥—ã POST, PUT –∏ DELETE. –ú–µ—Ç–æ–¥ GET –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ —Ä–µ—Å—É—Ä—Å–∞, –≤ –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ —Ç—É—Ç &lt;code&gt;GET /b HTTP/1.0&lt;/code&gt; –≥–¥–µ –ø—É—Ç—å /b –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Ü–≤–µ—Ç (—Å–∏–Ω–∏–π). –û—Ç–≤–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;HTTP/1.0 200 OK
Server: Contiki/2.4 http://www.sics.se/contiki/
Connection: close
Cache-Control: no-cache, no-store, must-revalidate
Pragma: no-cache
Expires: 0
Content-type: text/html

&amp;lt;html&amp;gt;&amp;lt;head&amp;gt;&amp;lt;title&amp;gt;Contiki RGB&amp;lt;/title&amp;gt;&amp;lt;/head&amp;gt;&amp;lt;body&amp;gt;
&amp;lt;p style=&amp;#39;color:red;&amp;#39;&amp;gt;Red is &amp;lt;a href=&amp;#39;/r&amp;#39;&amp;gt;OFF&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;p style=&amp;#39;color:green;&amp;#39;&amp;gt;Green is &amp;lt;a href=&amp;#39;/g&amp;#39;&amp;gt;OFF&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;p style=&amp;#39;color:blue;&amp;#39;&amp;gt;Blue is &amp;lt;a href=&amp;#39;/b&amp;#39;&amp;gt;ON&amp;lt;/a&amp;gt;&amp;lt;/p&amp;gt;
&amp;lt;/body&amp;gt;&amp;lt;/html&amp;gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ö–æ–¥ —Å–æ—Å—Ç–æ—è–Ω–∏—è (—É –Ω–∞—Å 200) —è–≤–ª—è–µ—Ç—Å—è —á–∞—Å—Ç—å—é –ø–µ—Ä–≤–æ–π —Å—Ç—Ä–æ–∫–∏ –æ—Ç–≤–µ—Ç–∞ —Å–µ—Ä–≤–µ—Ä–∞. –û–Ω –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π —Ü–µ–ª–æ–µ —á–∏—Å–ª–æ –∏–∑ —Ç—Ä—ë—Ö —Ü–∏—Ñ—Ä. –ü–µ—Ä–≤–∞—è —Ü–∏—Ñ—Ä–∞ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –∫–ª–∞—Å—Å —Å–æ—Å—Ç–æ—è–Ω–∏—è. –ó–∞ –∫–æ–¥–æ–º –æ—Ç–≤–µ—Ç–∞ –æ–±—ã—á–Ω–æ —Å–ª–µ–¥—É–µ—Ç –æ—Ç–¥–µ–ª—ë–Ω–Ω–∞—è –ø—Ä–æ–±–µ–ª–æ–º –ø–æ—è—Å–Ω—è—é—â–∞—è —Ñ—Ä–∞–∑–∞ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º —è–∑—ã–∫–µ, –∫–æ—Ç–æ—Ä–∞—è —Ä–∞–∑—ä—è—Å–Ω—è–µ—Ç —á–µ–ª–æ–≤–µ–∫—É –ø—Ä–∏—á–∏–Ω—É –∏–º–µ–Ω–Ω–æ —Ç–∞–∫–æ–≥–æ –æ—Ç–≤–µ—Ç–∞. –í –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ —Å–µ—Ä–≤–µ—Ä –æ—Ç—Ä–∞–±–æ—Ç–∞–ª –±–µ–∑ –æ—à–∏–±–æ–∫, –≤—Å—ë –ø—É—á–∫–æ–º (–û–ö).&lt;/p&gt;
&lt;p&gt;–ö–∞–∫ –∑–∞–ø—Ä–æ—Å, —Ç–∞–∫ –∏ –æ—Ç–≤–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç –∑–∞–≥–æ–ª–æ–≤–∫–∏ (–∫–∞–∂–¥–∞—è —Å—Ç—Ä–æ–∫–∞ ‚Äî –æ—Ç–¥–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ –∑–∞–≥–æ–ª–æ–≤–∫–∞, –ø–∞—Ä–∞ –∏–º—è-–∑–Ω–∞—á–µ–Ω–∏–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∞ –¥–≤–æ–µ—Ç–æ—á–∏–µ–º). –ó–∞–∫–∞–Ω—á–∏–≤–∞—é—Ç—Å—è –∑–∞–≥–æ–ª–æ–≤–∫–∏ –ø—É—Å—Ç–æ–π —Å—Ç—Ä–æ–∫–æ–π, –ø–æ—Å–ª–µ —á–µ–≥–æ –º–æ–≥—É—Ç –∏–¥—Ç–∏ –¥–∞–Ω–Ω—ã–µ.&lt;/p&gt;
&lt;p&gt;–ú–æ–π –±—Ä–∞—É–∑–µ—Ä –æ—Ç–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –æ—Ç–∫—Ä—ã–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–π IPv6-–∞–¥—Ä–µ—Å, –ø–æ—ç—Ç–æ–º—É –≤ –ø—Ä–æ—à–∏–≤–∫–µ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞ –ø—Ä–æ–ø–∏—Å–∞–Ω –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –∞–¥—Ä–µ—Å –∏ —Ç–∞–∫–æ–π –∂–µ –ø—Ä–µ—Ñ–∏–∫—Å —Ç–∞–∫–∂–µ –Ω—É–∂–Ω–æ –Ω–∞–∑–Ω–∞—á–∏—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–º—É —Å–µ—Ç–µ–≤–æ–º—É –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É —Å–∏–º—É–ª—è—Ç–æ—Ä–∞:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ sudo ip addr add abcd::1/64 dev mazko          # linux
~$ netsh interface ipv6 set address mazko abcd::1 # windows
~$ curl http://[abcd::200:e2ff:fe58:b66b]
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ï—Å–ª–∏ curl –æ—Ç—Ä–∞–±–æ—Ç–∞–ª –±–µ–∑ –æ—à–∏–±–æ–∫, —Ç–æ —Å—Å—ã–ª–∫—É –º–æ–∂–Ω–æ —Å–ø–æ–∫–æ–π–Ω–æ –æ—Ç–∫—Ä—ã–≤–∞—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ.&lt;/p&gt;
&lt;h2&gt;TCP&lt;/h2&gt;
&lt;p&gt;–ó–¥–µ—Å—å –º—ã –Ω–∞—É—á–∏–º –Ω–∞—à &lt;a href="http://proiot.ru/blog/posts/2017/10/03/setevoe-programmirovanie-udp-ntp-chasy/"&gt;–∏–≥—Ä—É—à–µ—á–Ω—ã–π&lt;/a&gt; TCP/IP —Å—Ç–µ–∫ –ø–æ–Ω–∏–º–∞—Ç—å TCP –ø—Ä–æ—Ç–æ–∫–æ–ª. –ò—Ç–∞–∫ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –ø–æ –ø—Ä–æ—Ç–æ–∫–æ–ª—É TCP –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å —Ç.–Ω. —Ç—Ä–µ—Ö—Å—Ç–æ—Ä–æ–Ω–Ω–µ–≥–æ –∫–≤–∏—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (—Ä—É–∫–æ–ø–æ–∂–∞—Ç–∏—è). –ö–∞–∫ –≤—Å–µ–≥–¥–∞ —Ä–∞–∑–æ–±—Ä–∞—Ç—å—Å—è —Å —Å–µ—Ç—å—é –ø–æ–º–æ–∂–µ—Ç Wireshark.&lt;/p&gt;
&lt;p&gt;–ö–æ–≥–¥–∞ —Ç—Ä–µ–±—É–µ—Ç—Å—è —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å —É–¥–∞–ª—ë–Ω–Ω—ã–º —Å–µ—Ä–≤–µ—Ä–æ–º, –µ–º—É –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –ø–∞–∫–µ—Ç —Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º —Ñ–ª–∞–≥–æ–º SYN, —á—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é —Å–µ—Å—Å–∏–∏. –¢—É—Ç –µ—Å—Ç—å –ø–æ–ª–µ Sequence Number (–Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫–µ 1039510418), –Ω–∞—á–∞–ª—å–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —ç—Ç–æ–≥–æ –ø–æ–ª—è –≤—ã–±–∏—Ä–∞–µ—Ç—Å—è —Å–ª—É—á–∞–π–Ω—ã–º –æ–±—Ä–∞–∑–æ–º –∏–Ω–∏—Ü–∏–∞—Ç–æ—Ä–æ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2017/10/09/setevoe-programmirovanie-tcp-http-server/handshake1.png" style="width:100%;"&gt;&lt;/p&gt;
&lt;p&gt;–°–µ—Ä–≤–µ—Ä, –≤ –æ—Ç–≤–µ—Ç –Ω–∞ —ç—Ç–æ—Ç –ø–∞–∫–µ—Ç, –æ—Ç–≤–µ—á–∞–µ—Ç –ø–∞–∫–µ—Ç–æ–º —Å –±–∏—Ç–∞–º–∏ SYN, ACK. –°–≤–æ—ë –∑–Ω–∞—á–µ–Ω–∏–µ Sequence Number (–Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫–µ 16770109) –æ–Ω —Ç–æ–∂–µ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–ª—É—á–∞–π–Ω—ã–º –æ–±—Ä–∞–∑–æ–º. –¢–∞–∫–∂–µ –æ–Ω –¥–æ–ª–∂–µ–Ω –∑–∞–ø–æ–ª–Ω–∏—Ç—å –ø–æ–ª–µ Acknowledgment Number, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥–µ—Ç —Ä–∞–≤–Ω–æ —Å—É–º–º–µ –ø—Ä–∏–Ω—è—Ç–æ–≥–æ Sequence Number –ø–ª—é—Å 1 —Ç.–µ. 1039510419.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2017/10/09/setevoe-programmirovanie-tcp-http-server/handshake2.png" style="width:100%;"&gt;&lt;/p&gt;
&lt;p&gt;–¢–µ–ø–µ—Ä—å –∏–Ω–∏—Ü–∏–∞—Ç–æ—Ä—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –Ω–µ –æ—Å—Ç–∞–µ—Ç—Å—è –Ω–∏—á–µ–≥–æ –¥—Ä—É–≥–æ–≥–æ, –∫–∞–∫ –æ—Ç–≤–µ—Ç–∏—Ç—å ACK. –ó–¥–µ—Å—å Acknowledgment Number –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ –±—É–¥–µ—Ç —Ä–∞–≤–Ω–æ —Å—É–º–º–µ –ø—Ä–∏–Ω—è—Ç–æ–≥–æ Sequence Number –ø–ª—é—Å 1 —Ç.–µ. 16770110.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2017/10/09/setevoe-programmirovanie-tcp-http-server/handshake3.png" style="width:100%;"&gt;&lt;/p&gt;
&lt;p&gt;–° —ç—Ç–æ–≥–æ –º–æ–º–µ–Ω—Ç–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å—á–∏—Ç–∞–µ—Ç—Å—è —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º. –î–∞–ª—å–Ω–µ–π—à–∏–µ –ø–∞–∫–µ—Ç—ã –±—É–¥—É—Ç –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å —É–∂–µ –ø–æ–ª–µ–∑–Ω—É—é –Ω–∞–≥—Ä—É–∑–∫—É ‚Äì –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤ –≤—ã—à–µ—Å—Ç–æ—è—â–∏—Ö —É—Ä–æ–≤–Ω–µ–π. –í –æ—Ç–ª–∏—á–∏–µ –æ—Ç UDP, —Ç—É—Ç –Ω–∞ –∫–∞–∂–¥—ã–π –ø–∞–∫–µ—Ç –Ω—É–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ (—Ñ–ª–∞–≥ ACK), –¥–∞–±—ã —É–¥–∞–ª—ë–Ω–Ω—ã–π —É–∑–µ–ª –∑–Ω–∞–ª, —á—Ç–æ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –∏–º –¥–∞–Ω–Ω—ã–µ –±—ã–ª–∏ —É—Å–ø–µ—à–Ω–æ –ø—Ä–∏–Ω—è—Ç—ã. –ü—Ä–∏ —ç—Ç–æ–º —Ç–∞–∫ –∂–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤–∑–∞–∏–º–Ω–æ–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ Sequence Number —É —Å–µ—Ä–≤–µ—Ä–∞ –∏ —É –∫–ª–∏–µ–Ω—Ç–∞, –Ω–æ —Ç–æ–ª—å–∫–æ —É–∂–µ –Ω–µ –Ω–∞ 1, –∞ –Ω–∞ —Ä–∞–∑–º–µ—Ä –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö.&lt;/p&gt;
&lt;p&gt;–î–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —É–¥–∞–ª—ë–Ω–Ω–æ–º—É —É–∑–ª—É –ø–æ—Å—ã–ª–∞–µ—Ç—Å—è –ø–∞–∫–µ—Ç —Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–º —Ñ–ª–∞–≥–æ–º FIN.&lt;/p&gt;
&lt;p&gt;–° —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ TCP —ç—Ç–æ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–π &lt;a href="http://proiot.ru/blog/posts/2012/10/09/avtomat-s-konechnym-chislom-sostoianii/"&gt;–∫–æ–Ω–µ—á–Ω—ã–π –∞–≤—Ç–æ–º–∞—Ç&lt;/a&gt;. –ù–∞ –∫–∞—Ä—Ç–∏–Ω–∫–µ –ø–æ–∫–∞–∑–∞–Ω—ã –∫–∞–∫ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–∞, —Ç–∞–∫ –∏ –∫–ª–∏–µ–Ω—Ç–∞ (—Ä–∞–∑–Ω—ã–µ —Ü–≤–µ—Ç–∞ —Å—Ç—Ä–µ–ª–æ–∫), –Ω–∞ —Å—Ç—Ä–µ–ª–∫–∞—Ö –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–æ &lt;strong&gt;—Å–æ–±—ã—Ç–∏–µ/–¥–µ–π—Å—Ç–≤–∏–µ&lt;/strong&gt; ‚Äì –Ω–∞–ø—Ä–∏–º–µ—Ä –ø–µ—Ä–µ—Ö–æ–¥ —Å–µ—Ä–≤–µ—Ä–∞ (—Å–∏–Ω—è—è —Å—Ç—Ä–µ–ª–∫–∞) –∏–∑ —Å–æ—Å—Ç–æ—è–Ω–∏—è LISTEN –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ SYN RECEIVED –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–æ —Å–æ–±—ã—Ç–∏—é SYN, —Ä–µ–∞–∫—Ü–∏—è –Ω–∞ —ç—Ç–æ —Å–æ–±—ã—Ç–∏–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–ª–∏–µ–Ω—Ç—É SYN+ACK –≤ –æ—Ç–≤–µ—Ç:&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2017/10/09/setevoe-programmirovanie-tcp-http-server/Tcp_state_diagram_fixed.svg" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–¢–µ–ø–µ—Ä—å –Ω–µ–º–Ω–æ–≥–æ –∫–æ–¥–∞. –ü—Ä–∏–≤–µ–¥–µ–Ω–Ω—ã–π –Ω–∏–∂–µ –ø—Ä–∏–º–µ—Ä –æ—á–µ–Ω—å —Å–∏–ª—å–Ω–æ —É–ø—Ä–æ—â—ë–Ω, —Ç—É—Ç –Ω–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–π –∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ —Ç–æ–ª—å–∫–æ –º–∏–Ω–∏–∞–Ω–∏–º–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞, –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–∞—è –¥–ª—è –æ–±–º–µ–Ω–∞ –¥–∞–Ω–Ω—ã–º–∏ —É—Ç–∏–ª–∏—Ç–æ–π netcat.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;typedef&lt;/span&gt; &lt;span class="k"&gt;struct&lt;/span&gt; &lt;span class="n"&gt;tcp_packet&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="kt"&gt;uint16_t&lt;/span&gt; &lt;span class="n"&gt;from_port&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="kt"&gt;uint16_t&lt;/span&gt; &lt;span class="n"&gt;to_port&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="kt"&gt;uint32_t&lt;/span&gt; &lt;span class="n"&gt;seq_num&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="kt"&gt;uint32_t&lt;/span&gt; &lt;span class="n"&gt;ack_num&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="n"&gt;data_offset&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="n"&gt;flags&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="kt"&gt;uint16_t&lt;/span&gt; &lt;span class="n"&gt;window&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="kt"&gt;uint16_t&lt;/span&gt; &lt;span class="n"&gt;cksum&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="kt"&gt;uint16_t&lt;/span&gt; &lt;span class="n"&gt;urgent_ptr&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;[];&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="n"&gt;tcp_packet_t&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;tcp_reply&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;eth_frame_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;uint16_t&lt;/span&gt; &lt;span class="n"&gt;len&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="kt"&gt;uint16_t&lt;/span&gt; &lt;span class="n"&gt;temp&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="n"&gt;ip_packet_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;ip&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)(&lt;/span&gt;&lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;tcp_packet_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;tcp&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)(&lt;/span&gt;&lt;span class="n"&gt;ip&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

  &lt;span class="c1"&gt;// swap src/dst, fill tcp hdr?&lt;/span&gt;
  &lt;span class="n"&gt;temp&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;tcp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;from_port&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;tcp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;from_port&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;tcp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;to_port&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;tcp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;to_port&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;temp&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;tcp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;window&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;htons&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;TCP_WINDOW_SIZE&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;tcp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;urgent_ptr&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="c1"&gt;// SYN packet?&lt;/span&gt;
  &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tcp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;flags&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;TCP_FLAG_SYN&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="c1"&gt;// add MSS option&lt;/span&gt;
    &lt;span class="n"&gt;tcp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;data_offset&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tcp_packet_t&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;tcp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="c1"&gt;// MSS option&lt;/span&gt;
    &lt;span class="n"&gt;tcp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="c1"&gt;// MSS option length = 4 bytes&lt;/span&gt;
    &lt;span class="n"&gt;tcp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;TCP_SYN_MSS&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;tcp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;TCP_SYN_MSS&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="mh"&gt;0xff&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;len&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;
  &lt;span class="k"&gt;else&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="c1"&gt;// not syn packet - no options&lt;/span&gt;
    &lt;span class="n"&gt;tcp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;data_offset&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tcp_packet_t&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&amp;lt;&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;

  &lt;span class="c1"&gt;// calculate chksum&lt;/span&gt;
  &lt;span class="n"&gt;len&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tcp_packet_t&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;tcp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;cksum&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;tcp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;cksum&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;ip_cksum&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;len&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;IP_PROTOCOL_TCP&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
      &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;ip&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;src&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;len&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt; &lt;span class="n"&gt;my_ip&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;

  &lt;span class="n"&gt;ip&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;payload_len&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;htons&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;len&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;memcpy&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;ip&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;dest&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;ip&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;src&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt; &lt;span class="n"&gt;ip&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;src&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;memcpy&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;ip&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;src&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;my_ip&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt; &lt;span class="n"&gt;ip&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;src&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;eth_reply&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;len&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ip_packet_t&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;tcp_step&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tcp_packet_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;tcp&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;uint16_t&lt;/span&gt; &lt;span class="n"&gt;num&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="kt"&gt;uint32_t&lt;/span&gt; &lt;span class="n"&gt;ack_num&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;ack_num&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;ntohl&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tcp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;seq_num&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;num&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;tcp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;seq_num&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;tcp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;ack_num&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;tcp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;ack_num&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;htonl&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ack_num&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;tcp_filter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;eth_frame_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;uint16_t&lt;/span&gt; &lt;span class="n"&gt;len&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="n"&gt;ip_packet_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;ip&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)(&lt;/span&gt;&lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;tcp_packet_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;tcp&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)(&lt;/span&gt;&lt;span class="n"&gt;ip&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

  &lt;span class="k"&gt;switch&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tcp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;flags&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="nl"&gt;TCP_FLAG_SYN&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="n"&gt;tcp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;flags&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;TCP_FLAG_SYN&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;TCP_FLAG_ACK&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
      &lt;span class="n"&gt;tcp_step&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tcp&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
      &lt;span class="n"&gt;tcp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;seq_num&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;htonl&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;gettc&lt;/span&gt;&lt;span class="p"&gt;());&lt;/span&gt; &lt;span class="c1"&gt;// random number&lt;/span&gt;
      &lt;span class="n"&gt;tcp_reply&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
      &lt;span class="k"&gt;break&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="n"&gt;TCP_FLAG_PSH&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="nl"&gt;TCP_FLAG_ACK&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="n"&gt;len&lt;/span&gt; &lt;span class="o"&gt;-=&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tcp_packet_t&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
      &lt;span class="n"&gt;tcp_step&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tcp&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;len&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
      &lt;span class="n"&gt;tcp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;flags&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;TCP_FLAG_ACK&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
      &lt;span class="c1"&gt;// feed/read data to/from app&lt;/span&gt;
      &lt;span class="n"&gt;tcp_reply&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;tcp_data&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;len&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
      &lt;span class="k"&gt;break&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="n"&gt;TCP_FLAG_FIN&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="nl"&gt;TCP_FLAG_ACK&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
      &lt;span class="n"&gt;tcp_step&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tcp&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
      &lt;span class="n"&gt;tcp_reply&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
      &lt;span class="k"&gt;break&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–ª–µ–∑–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö ‚Äî –≤—ã–≤–æ–¥–∏–º –Ω–∞ —ç–∫—Ä–∞–Ω, –ø–µ—á–∞—Ç–∞–µ–º –≤ UART: &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kt"&gt;uint16_t&lt;/span&gt; &lt;span class="nf"&gt;tcp_data&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;eth_frame_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;uint16_t&lt;/span&gt; &lt;span class="n"&gt;len&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
  &lt;span class="n"&gt;ip_packet_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;ip&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)(&lt;/span&gt;&lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;tcp_packet_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;tcp&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)(&lt;/span&gt;&lt;span class="n"&gt;ip&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;char&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="n"&gt;tcp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

  &lt;span class="n"&gt;draw_clr&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
  &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;len&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;draw_str&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&amp;gt;&amp;gt; %s&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

  &lt;span class="c1"&gt;// piggyback&lt;/span&gt;
  &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="kt"&gt;char&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;response&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;!!! OK !!!&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
  &lt;span class="n"&gt;strcpy&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;response&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;strlen&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;response&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;a href="http://localhost:9148/f0925cc954111f5cb6f47c6b1dffc0ac"&gt;IPv6&lt;/a&gt; | &lt;a href="http://localhost:9148/ce2f76817817a8bea5d539aa0df45f8f"&gt;IPv4&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2017/10/09/setevoe-programmirovanie-tcp-http-server/eth_tcp.zip"&gt;–∏—Å—Ö–æ–¥–Ω–∏–∫–∏&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2017/10/09/setevoe-programmirovanie-tcp-http-server/tcp.png" style="width:50%; margin: 0 auto; display:block;"&gt;&lt;/p&gt;
&lt;p&gt;–ß—Ç–æ–±—ã –≤—ã–≤–µ—Å—Ç–∏ –¥–∞–Ω–Ω—ã–µ –≤ –¥–∏—Å–ø–ª–µ–π, –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–µ–≤–∞–π—Å—É TCP-–ø–∞–∫–µ—Ç –Ω–∞ –ª—é–±–æ–π –ø–æ—Ä—Ç –ø–æ–º–æ—â—å—é netcat:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ cat &amp;lt;(echo &amp;#39;hello TCP !&amp;#39;) - | nc -6 fe80::0:ff:fe00:42%mazko 12345
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ë—É–¥—É—á–∏ –æ–¥–Ω–∞–∂–¥—ã —Å–æ–∑–¥–∞–Ω, –∫–∞–Ω–∞–ª TCP –º–æ–∂–µ—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å ¬´–≤–µ—á–Ω–æ¬ª. –ê —á—Ç–æ –±—É–¥–µ—Ç, –µ—Å–ª–∏ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Ä–∞–∑–æ—Ä–≤–∞—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Ç.–µ. –±–µ–∑ —Ñ–ª–∞–≥–∞ FIN ? –¢–∞–∫–∞—è —Å–∏—Ç—É–∞—Ü–∏—è –≤–æ–∑–º–æ–∂–Ω–∞, –µ—Å–ª–∏ –Ω–∞–ø—Ä–∏–º–µ—Ä –≤—ã–¥–µ—Ä–Ω—É—Ç—å –∫–∞–∫–æ–π-–Ω–∏–±—É–¥—å –∫–∞–±–µ–ª—å. –û–±–∞ –∏ –∫–ª–∏–µ–Ω—Ç –∏ —Å–µ—Ä–≤–µ—Ä –≤ —ç—Ç–æ–º —Å–ª—É—á–∞–µ –±—É–¥—É—Ç –±–µ–∑—É—Å–ø–µ—à–Ω–æ –¥–æ–ª–≥–æ –∂–¥–∞—Ç—å –¥–∞–Ω–Ω—ã—Ö –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞. –î–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏—è —Ç–∞–∫–∏—Ö ¬´–º–µ—Ä—Ç–≤—ã—Ö¬ª —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –º–µ—Ö–∞–Ω–∏–∑–º keep-alive ‚Äì –Ω–µ–∫–æ–µ —Å–ª—É–∂–µ–±–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –æ—Ç—Å—ã–ª–∞–µ—Ç—Å—è –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏. –ï—Å–ª–∏ –æ—Ç–≤–µ—Ç –Ω–∞ –Ω–µ–≥–æ –Ω–µ –ø–æ–ª—É—á–µ–Ω, —Ç–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Ä–∞–∑—Ä—ã–≤–∞–µ—Ç—Å—è.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2017/10/17/protokoly-interneta-veshchei-coap/"&gt;–î–∞–ª–µ–µ&lt;/a&gt; CoAP.&lt;/p&gt;</content><category term="contiki"></category><category term="msp430"></category><category term="FSM"></category></entry><entry><title>–°–µ—Ç–µ–≤–æ–µ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ - UDP | NTP —á–∞—Å—ã</title><link href="http://proiot.ru/blog/posts/2017/10/03/setevoe-programmirovanie-udp-ntp-chasy/" rel="alternate"></link><published>2017-10-03T00:00:00+03:00</published><updated>2017-10-03T00:00:00+03:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2017-10-03:/blog/posts/2017/10/03/setevoe-programmirovanie-udp-ntp-chasy/</id><summary type="html">&lt;blockquote&gt;
&lt;p&gt;–í –±—É–¥—É—â–µ–º —Ä–∞–¥–∏–æ –±—É–¥–µ—Ç –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–æ –≤ ¬´–±–æ–ª—å—à–æ–π –º–æ–∑–≥¬ª, –≤—Å–µ –≤–µ—â–∏ —Å—Ç–∞–Ω—É—Ç —á–∞—Å—Ç—å—é –µ–¥–∏–Ω–æ–≥–æ —Ü–µ–ª–æ–≥–æ, –∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã, –±–ª–∞–≥–æ–¥–∞—Ä—è –∫–æ—Ç–æ—Ä—ã–º —ç—Ç–æ —Å—Ç–∞–Ω–µ—Ç –≤–æ–∑–º–æ–∂–Ω—ã–º, –±—É–¥—É—Ç –ª–µ–≥–∫–æ –ø–æ–º–µ—â–∞—Ç—å—Å—è –≤ –∫–∞—Ä–º–∞–Ω–µ. ‚Äî –ù–∏–∫–æ–ª–∞ –¢–µ—Å–ª–∞&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;–¢—Ä–µ–Ω–¥ ¬´–∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –≤–µ—â–µ–π¬ª (Internet of Things, IoT) —Å–µ–π—á–∞—Å –Ω–∞–±–∏—Ä–∞–µ—Ç –≤—Å—ë –±–æ–ª—å—à—É—é –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å. –õ–µ–Ω—å ‚Äî –¥–≤–∏–≥–∞—Ç–µ–ª—å –ø—Ä–æ–≥—Ä–µ—Å—Å–∞, –∏ –∏—Å—Ö–æ–¥—è –∏–∑ —ç—Ç–æ–≥–æ –ø–æ—è–≤–ª–µ–Ω–∏–µ ¬´–∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –≤–µ—â–µ–π ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;blockquote&gt;
&lt;p&gt;–í –±—É–¥—É—â–µ–º —Ä–∞–¥–∏–æ –±—É–¥–µ—Ç –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–æ –≤ ¬´–±–æ–ª—å—à–æ–π –º–æ–∑–≥¬ª, –≤—Å–µ –≤–µ—â–∏ —Å—Ç–∞–Ω—É—Ç —á–∞—Å—Ç—å—é –µ–¥–∏–Ω–æ–≥–æ —Ü–µ–ª–æ–≥–æ, –∞ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã, –±–ª–∞–≥–æ–¥–∞—Ä—è –∫–æ—Ç–æ—Ä—ã–º —ç—Ç–æ —Å—Ç–∞–Ω–µ—Ç –≤–æ–∑–º–æ–∂–Ω—ã–º, –±—É–¥—É—Ç –ª–µ–≥–∫–æ –ø–æ–º–µ—â–∞—Ç—å—Å—è –≤ –∫–∞—Ä–º–∞–Ω–µ. ‚Äî –ù–∏–∫–æ–ª–∞ –¢–µ—Å–ª–∞&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;–¢—Ä–µ–Ω–¥ ¬´–∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –≤–µ—â–µ–π¬ª (Internet of Things, IoT) —Å–µ–π—á–∞—Å –Ω–∞–±–∏—Ä–∞–µ—Ç –≤—Å—ë –±–æ–ª—å—à—É—é –ø–æ–ø—É–ª—è—Ä–Ω–æ—Å—Ç—å. –õ–µ–Ω—å ‚Äî –¥–≤–∏–≥–∞—Ç–µ–ª—å –ø—Ä–æ–≥—Ä–µ—Å—Å–∞, –∏ –∏—Å—Ö–æ–¥—è –∏–∑ —ç—Ç–æ–≥–æ –ø–æ—è–≤–ª–µ–Ω–∏–µ ¬´–∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –≤–µ—â–µ–π¬ª –≤–ø–æ–ª–Ω–µ –ª–æ–≥–∏—á–Ω—ã–π —ç—Ç–∞–ø —ç–≤–æ–ª—é—Ü–∏–∏  Homo sapiens. –ó–∞—á–µ–º –ø–æ–¥—Ö–æ–¥–∏—Ç—å –∫ —Ç–µ–ª–µ–≤–∏–∑–æ—Ä—É –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –∫–∞–Ω–∞–ª–æ–≤, –µ—Å–ª–∏ –º–æ–∂–Ω–æ –ø—Ä–∏–¥—É–º–∞—Ç—å –¥–∏—Å—Ç–∞–Ω—Ü–∏–æ–Ω–Ω—ã–π –ø—É–ª—å—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è, –∑–∞—á–µ–º –Ω–∞–∂–∏–º–∞—Ç—å –∫–Ω–æ–ø–æ—á–∫—É –Ω–∞ –∫–æ—Ñ–µ–≤–∞—Ä–∫–µ, –µ—Å–ª–∏ –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å —ç—Ç–æ –≤ —Å–º–∞—Ä—Ç—Ñ–æ–Ω–µ –∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–∞–≤–∏–ª–æ, —á—Ç–æ–±—ã –∫–æ—Ñ–µ –Ω–∞–ª–∏–≤–∞–ª—Å—è —Å–∞–º‚Ä¶ –ó–≤—É—á–∏—Ç –∑–∞–º–∞–Ω—á–∏–≤–æ, –Ω–æ –∫–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç ? –ö–∞–∫ –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å –Ω–∞–¥—ë–∂–Ω—ã–π –∏ –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –æ–±–º–µ–Ω –¥–∞–Ω–Ω—ã–º–∏ ?&lt;/p&gt;
&lt;p&gt;–°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è –∫–æ–Ω—Ü–µ–ø—Ü–∏—è ¬´–∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –≤–µ—â–µ–π¬ª –ø–æ–¥—Ä–∞–∑—É–º–µ–≤–∞–µ—Ç, —á—Ç–æ –≤—Å–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –¥–æ–ª–∂–Ω—ã –∏–º–µ—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–æ–≤–∞—Ç—å —Å –¥—Ä—É–≥–∏–º–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏ –∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏, –æ–±—Ä–∞–∑—É—è –µ–¥–∏–Ω—É—é –≤–∑–∞–∏–º–æ—Å–≤—è–∑–∞–Ω–Ω—É—é —ç–∫–æ—Å–∏—Å—Ç–µ–º—É ‚Äî —Å–µ—Ç—å. –¢—É—Ç –Ω–µ—Ç —Å–º—ã—Å–ª–∞ –∏–∑–æ–±—Ä–µ—Ç–∞—Ç—å –∑–∞–Ω–æ–≤–æ –≤–µ–ª–æ—Å–∏–ø–µ–¥, –ø–æ—Å–∫–æ–ª—å–∫—É –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏ Internet Protocol (IP, ¬´–º–µ–∂—Å–µ—Ç–µ–≤–æ–π –ø—Ä–æ—Ç–æ–∫–æ–ª¬ª) —É–∂–µ —è–≤–ª—è–µ—Ç—Å—è —Ç–µ–º –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–º, –∫–æ—Ç–æ—Ä—ã–π –æ–±—ä–µ–¥–∏–Ω–∏–ª –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω—ã–µ —Å–µ—Ç–∏ –≤–æ –≤—Å–µ–º–∏—Ä–Ω—É—é —Å–µ—Ç—å –ò–Ω—Ç–µ—Ä–Ω–µ—Ç. –° —É—á—ë—Ç–æ–º –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ –æ—á–µ–Ω—å –±–æ–ª—å—à–æ–≥–æ –∏ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ —Ä–∞—Å—Ç—É—â–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö ¬´–∏–Ω—Ç–µ—Ä–Ω–µ—Ç –≤–µ—â–µ–π¬ª –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–µ—Ç–µ–π IoT –∫–∞–∫ –Ω–µ–ª—å–∑—è –ª—É—á—à–µ –ø–æ–¥—Ö–æ–¥–∏—Ç IPv6, –≤–µ–¥—å –∞–¥—Ä–µ—Å–Ω–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ —Ç—É—Ç –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –Ω–µ–∏—Å—á–µ—Ä–ø–∞–µ–º–æ–µ.&lt;/p&gt;
&lt;h2&gt;TL;DR&lt;/h2&gt;
&lt;p&gt;–ß–∞—Å–∏–∫–∏ –±–µ—Ä—É—Ç –¥–∞–Ω–Ω—ã–µ –≤—Ä–µ–º–µ–Ω–∏ –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –ø–æ NTP (Network Time Protocol ‚Äî –ø—Ä–æ—Ç–æ–∫–æ–ª —Å–µ—Ç–µ–≤–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏). –ü–æ–¥ –∫–∞–ø–æ—Ç–æ–º —á–∞—Å–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Contiki ‚Äî –∫–æ–º–ø–∞–∫—Ç–Ω–∞—è, —Å–≤–æ–±–æ–¥–Ω–∞—è, –ø–µ—Ä–µ–Ω–æ—Å–∏–º–∞—è, –º–Ω–æ–≥–æ–∑–∞–¥–∞—á–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –≤—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã—Ö —Å–∏—Å—Ç–µ–º. –ü—Ä–æ—Ü–µ—Å—Å—ã Contiki –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–±–ª–µ–≥—á—ë–Ω–Ω—É—é –ø–æ—Ç–æ–∫–æ–≤—É—é –º–æ–¥–µ–ª—å ‚Äî –ø—Ä–æ—Ç–æ–ø–æ—Ç–æ–∫–∏, –≤ –æ—Å–Ω–æ–≤–µ –∫–æ—Ç–æ—Ä—ã—Ö –ª–µ–∂–∏—Ç &lt;a href="http://proiot.ru/blog/posts/2017/02/05/picsimjs-soprogrammy-i-prosteishaia-mnogozadachnost/"&gt;–∫–æ–æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–∞—è&lt;/a&gt; –º–Ω–æ–≥–æ–∑–∞–¥–∞—á–Ω–æ—Å—Ç—å. –ì–¥–µ-—Ç–æ —Å–±–æ–∫—É –∫ Contiki –º–æ–∂–Ω–æ –ø—Ä–∏–∫—Ä—É—Ç–∏—Ç—å –µ—â—ë –∏ &lt;a href="http://proiot.ru/blog/posts/2017/04/26/freertos-operatsionnaia-sistema-dlia-mikrokontrollerov/"&gt;–≤—ã—Ç–µ—Å–Ω—è—é—â—É—é&lt;/a&gt; –º–Ω–æ–≥–æ–∑–∞–¥–∞—á–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ –Ω–µ–∫—É—é –±–∏–±–ª–∏–æ—Ç–µ–∫—É
&lt;a href="https://github.com/contiki-os/contiki/wiki/Multithreading" rel="nofollow"&gt;mt library&lt;/a&gt;, –Ω–æ –Ω–∞–º —ç—Ç–æ –Ω–µ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è. –í—Å—ë –∂–µ –≥–ª–∞–≤–Ω–∞—è —Ü–µ–Ω–Ω–æ—Å—Ç—å Contiki —ç—Ç–æ –∫–æ–Ω–µ—á–Ω–æ –∂–µ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π TCP/IP —Å—Ç–µ–∫ &lt;strong&gt;uIP (micro IP)&lt;/strong&gt;, –∫–æ—Ç–æ—Ä—ã–π –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω —Å —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤ –ø–∞–º—è—Ç–∏ –∏ –≤ —á–∞—Å—Ç–Ω–æ—Å—Ç–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –≤—ã–¥–µ–ª—è–µ–º—É—é –ø–∞–º—è—Ç—å (–∫—É—á—É).&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ getm&lt;span class="o"&gt;(){&lt;/span&gt; &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="k"&gt;$((&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;x&lt;span class="sb"&gt;`&lt;/span&gt;&lt;span class="nb"&gt;printf&lt;/span&gt; c%47s&lt;span class="p"&gt;|&lt;/span&gt;nc -uw1 &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$@&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;|&lt;/span&gt;xxd -s40 -l4 -p&lt;span class="sb"&gt;`&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="m"&gt;64#23&lt;/span&gt;GDW0&lt;span class="k"&gt;))&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
~$ date -d @&lt;span class="sb"&gt;`&lt;/span&gt;getm pool.ntp.org &lt;span class="m"&gt;123&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;
~$ &lt;span class="nb"&gt;printf&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;%(%m-%d-%Y %H:%M:%S)T\n&amp;#39;&lt;/span&gt; &lt;span class="sb"&gt;`&lt;/span&gt;getm pool.ntp.org &lt;span class="m"&gt;123&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;NTP —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–≤–µ—Ä—Ö UDP (User Datagram Protocol ‚Äî –ø—Ä–æ—Ç–æ–∫–æ–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –¥–∞—Ç–∞–≥—Ä–∞–º–º). –í –∏—Å—Ö–æ–¥–Ω–∏–∫–∞—Ö –º–æ–∂–Ω–æ –≤—Å—Ç—Ä–µ—Ç–∏—Ç—å –∏ –¥—Ä—É–≥–∏–µ —É–º–Ω—ã–µ —Å–ª–æ–≤–∞ ‚Äî –Ω–∞–ø—Ä–∏–º–µ—Ä DNS (Domain Name System ‚Äî —Å–∏—Å—Ç–µ–º–∞ –¥–æ–º–µ–Ω–Ω—ã—Ö –∏–º—ë–Ω). –ü—Ä–∏–º–µ—Ä –∏–Ω—Ç–µ—Ä–µ—Å–µ–Ω —Ç–µ–º, —á—Ç–æ –≤—Å–µ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã –≤ –¥–∞–Ω–Ω—ã—Ö —á–∞—Å–∏–∫–∞—Ö –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ç–æ–ª—å–∫–æ UDP. –ö—Ç–æ —Ç–∞–∫–æ–π UDP –∏ –∑–∞—á–µ–º –æ–Ω –Ω—É–∂–µ–Ω –±—É–¥–µ—Ç –ø–æ–¥—Ä–æ–±–Ω–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–æ –Ω–∏–∂–µ, –∞ –¥–ª—è —Å–∏–º—É–ª—è—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏–º–µ—Ä–æ–≤ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å &lt;a href="https://github.com/mazko/MSP430.js/raw/master/mspsim/mspsim.js.zip"&gt;mspsim.js.jar&lt;/a&gt; –Ω—É –∏ –Ω–µ–ø–ª–æ—Ö–æ –±—ã –ø–æ—á–∏—Ç–∞—Ç—å &lt;a href="https://github.com/mazko/MSP430.js/tree/master/mspsim"&gt;–∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—é&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://localhost:9148/f485071f8e042fa25252541e0e2d3724"&gt;IPv6&lt;/a&gt; | &lt;a href="http://localhost:9148/aed8a71df284252cb1c70e706dda5795"&gt;IPv4&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2017/10/03/setevoe-programmirovanie-udp-ntp-chasy/conticki-ntp-clock.zip"&gt;–∏—Å—Ö–æ–¥–Ω–∏–∫–∏&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2017/10/03/setevoe-programmirovanie-udp-ntp-chasy/ui.gif" style="width:50%; margin: 0 auto; display:block;"&gt;&lt;/p&gt;
&lt;p&gt;–ê–¥—Ä–µ—Å –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ IPv6 —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ 128 –±–∏—Ç –∏ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –æ–±—ã—á–Ω–æ –≤ —à–µ—Å—Ç–Ω–∞–¥—Ü–∞—Ç–µ—Ä–∏—á–Ω–æ–º –≤–∏–¥–µ. –ê–¥—Ä–µ—Å —Ä–∞–∑–±–∏–≤–∞—é—Ç—Å—è –Ω–∞ –±–ª–æ–∫–∏ –ø–æ 16 –±–∏—Ç (—Ö–µ–∫—Å—Ç–µ—Ç—ã) –∏ –∫–∞–∂–¥—ã–π –±–ª–æ–∫ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è —á–µ—Ç—ã—Ä—å–º—è —à–µ—Å—Ç–Ω–∞–¥—Ü–∞—Ç–µ—Ä–∏—á–Ω—ã–º–∏ —Ü–∏—Ñ—Ä–∞–º–∏. –•–µ–∫—Å—Ç–µ—Ç—ã —Ä–∞–∑–¥–µ–ª—è—é—Ç—Å—è –∑–Ω–∞–∫–æ–º –¥–≤–æ–µ—Ç–æ—á–∏—è. –¢–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º, –∞–¥—Ä–µ—Å –ø–æ–ª—É—á–∞–µ—Ç—Å—è –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–ª–∏–Ω–Ω—ã–º ‚Äì –æ–Ω —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ 32 —à–µ—Å—Ç–Ω–∞–¥—Ü–∞—Ç–µ—Ä–∏—á–Ω—ã—Ö —Ü–∏—Ñ—Ä –∏ 7 –∑–Ω–∞–∫–æ–≤ –¥–≤–æ–µ—Ç–æ—á–∏—è.&lt;/p&gt;
&lt;p&gt;–ü—Ä–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Å–µ—Ç–µ–≤–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –µ–º—É –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–∑–Ω–∞—á–∞–µ—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω—ã–π IPv6-–∞–¥—Ä–µ—Å, —Å–æ—Å—Ç–æ—è—â–∏–π –∏–∑ –ø—Ä–µ—Ñ–∏–∫—Å–∞ &lt;code&gt;fe80::/10&lt;/code&gt; –∏ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞, —Ä–∞–∑–º–µ—â—ë–Ω–Ω–æ–≥–æ –≤ –º–ª–∞–¥—à–µ–π —á–∞—Å—Ç–∏ –∞–¥—Ä–µ—Å–∞. –í –∫–∞—á–µ—Å—Ç–≤–µ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –º–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π MAC-–∞–¥—Ä–µ—Å —Å–∞–º–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞. –õ–æ–∫–∞–ª—å–Ω—ã–π –∞–¥—Ä–µ—Å –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–±–º–µ–Ω–∏–≤–∞—Ç—å—Å—è –¥–∞–Ω–Ω—ã–º–∏ —Å –¥—Ä—É–≥–∏–º–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏ –ø–æ–¥ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º IPv6 —Ç–æ–ª—å–∫–æ –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö —Å–≤–æ–µ–π –ø–æ–¥—Å–µ—Ç–∏. IPv6 –∞–¥—Ä–µ—Å–∞ –º–æ–∂–Ω–æ –∑–∞–ø–∏—Å—ã–≤–∞—Ç—å, –∞ –∏–Ω–æ–≥–¥–∞ –¥–∞–∂–µ –∏ –∑–∞–ø–æ–º–∏–Ω–∞—Ç—å, –≤ —Å–æ–∫—Ä–∞—â–µ–Ω–Ω–æ–º –≤–∏–¥–µ ‚Äì –Ω–∞–ø—Ä–∏–º–µ—Ä –µ—Å–ª–∏ –¥–≤–µ –∏ –±–æ–ª–µ–µ –≥—Ä—É–ø–ø –ø–æ–¥—Ä—è–¥ —Ä–∞–≤–Ω—ã 0000, —Ç–æ –æ–Ω–∏ –º–æ–≥—É—Ç –±—ã—Ç—å –æ–ø—É—â–µ–Ω—ã –∏ –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ –¥–≤–æ–π–Ω–æ–µ –¥–≤–æ–µ—Ç–æ—á–∏–µ (::), —Ç.–µ. &lt;code&gt;fe80:0:0:0:200:e2ff:fe58:b66b&lt;/code&gt; –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–æ–∫—Ä–∞—â—ë–Ω –¥–æ &lt;code&gt;fe80::200:e2ff:fe58:b66b&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;–î–ª—è –≤—ã—Ö–æ–¥–∞ –∑–∞ –ø—Ä–µ–¥–µ–ª—ã —Å–≤–æ–µ–π –ø–æ–¥—Å–µ—Ç–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∏—Ç—å –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç, —É—Å—Ç—Ä–æ–π—Å—Ç–≤—É –Ω—É–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—ã–π –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–π –∞–¥—Ä–µ—Å. –í –¥–∞–Ω–Ω–æ–º —Å–ª—É—á–∞–µ —ç—Ç–æ—Ç –∞–¥—Ä–µ—Å —Ä–∞–∑–¥–∞—ë—Ç—Å—è –¥–µ–º–æ–Ω–æ–º radvd –Ω—É –∏ –¥–∞–ª—å—à–µ &lt;a href="https://github.com/mazko/MSP430.js/tree/master/mspsim"&gt;RTFM&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;ENC28J60&lt;/h2&gt;
&lt;p&gt;ENC28J60 ‚Äî Ethernet-–∞–¥–∞–ø—Ç–µ—Ä (–ø—Ä–æ—â–µ –≥–æ–≤–æ—Ä—è, ¬´—Å–µ—Ç–µ–≤–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞¬ª) –Ω–∞ –æ–¥–Ω–æ–º —á–∏–ø–µ –æ—Ç –∫–æ–º–ø–∞–Ω–∏–∏ Microchip. –ú–∏–∫—Ä–æ—Å—Ö–µ–º–∞ –æ—á–µ–Ω—å –¥–µ—à–µ–≤–∞—è, –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –¥–ª—è —Ä–∞–±–æ—Ç—ã –º–Ω–æ–≥–æ –æ–±–≤—è–∑–∫–∏ –∏–∑ –≤–Ω–µ—à–Ω–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤, –∫ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—É (–≤ –Ω–∞—à–µ–º —Å–ª—É—á–∞–µ —ç—Ç–æ &lt;a href="http://proiot.ru/blog/posts/2017/03/20/s-18-dlia-mikrokontrollerov-razvedka-boem/"&gt;MSP430F1611&lt;/a&gt;) –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é SPI. –ü–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ Ethernet IEEE 802.3. –í ENC28J60 –µ—Å—Ç—å –±—É—Ñ–µ—Ä —Ä–∞–∑–º–µ—Ä–æ–º 8 –ö–ë ‚Äì —á–∞—Å—Ç—å —ç—Ç–æ–≥–æ –±—É—Ñ–µ—Ä–∞ –æ–±—ã—á–Ω–æ –≤—ã–¥–µ–ª—è–µ—Ç—Å—è –¥–ª—è –ø—Ä–∏—ë–º–∞ –ø–∞–∫–µ—Ç–æ–≤, –æ—Å—Ç–∞–ª—å–Ω–æ–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–∫ —É–≥–æ–¥–Ω–æ, –Ω–∞–ø—Ä–∏–º–µ—Ä –¥–ª—è –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö. –£–ø—Ä–∞–≤–ª—è—é—â–∏–µ —Ä–µ–≥–∏—Å—Ç—Ä—ã –¥–µ–ª—è—Ç—Å—è –Ω–∞ 4 –±–∞–Ω–∫–∞ (Microchip –ª—é–±–∏—Ç –±–∞–Ω–∫–∏). –ö–∞–∂–¥—ã–π –±–∞–Ω–∫ –∏–º–µ–µ—Ç —Ä–∞–∑–º–µ—Ä –≤ 32 —Ä–µ–≥–∏—Å—Ç—Ä–∞, –ø—Ä–∏—á—ë–º –ø–æ—Å–ª–µ–¥–Ω–∏–µ 5 —è—á–µ–µ–∫ (0x1b..0x1f) –≤—Å–µ–≥–¥–∞ –º–∞–ø—è—Ç—Å—è –Ω–∞ –æ–¥–Ω–∏ –∏ —Ç–µ –∂–µ —Ä–µ–≥–∏—Å—Ç—Ä—ã, –≤–Ω–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–æ–≥–æ, –∫–∞–∫–æ–π –±–∞–Ω–∫ –≤—ã–±—Ä–∞–Ω.&lt;/p&gt;
&lt;p&gt;–û–±–º–µ–Ω –¥–∞–Ω–Ω—ã–º–∏ —Å ENC28J60 –ø–æ SPI –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏. –ù–∞—á–∞–ª–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ ‚Äì –Ω–æ–≥–∞ CS –≤ –Ω–æ–ª—å, –∑–∞—Ç–µ–º –æ—Ç–ø—Ä–∞–≤–∫–∏ –∫–æ–º–∞–Ω–¥—ã, –∑–∞—Ç–µ–º –∏–¥—É—Ç –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (–ø—Ä–∏—ë–º –∏–ª–∏ –ø–µ—Ä–µ–¥–∞—á–∞). –ó–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è ¬´–ø–æ–¥–Ω—è—Ç–∏–µ–º¬ª –Ω–æ–∂–∫–∏ CS. –ü–æ—Å–ª–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –º–∏–∫—Ä–æ—Å—Ö–µ–º—ã —Ä–∞–±–æ—Ç–∞ —Å –Ω–µ–π —Å–≤–æ–¥–∏—Ç—Å—è –∫ –¥–≤—É–º —Ñ—É–Ω–∫—Ü–∏—è–º ‚Äì –æ—Ç–ø—Ä–∞–≤–∫–∞ / –ø—Ä–∏—ë–º –ø–∞–∫–µ—Ç–æ–≤. –≠—Ç–∏ –ø–∞–∫–µ—Ç—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç TCP/IP —Å—Ç–µ–∫ –≤ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–µ.&lt;/p&gt;
&lt;h2&gt;UDP&lt;/h2&gt;
&lt;p&gt;–ó–¥–µ—Å—å –º—ã –Ω–∞–±—Ä–æ—Å–∞–µ–º –ø—Ä–æ—Å—Ç–µ–π—à–∏–π TCP/IP —Å—Ç–µ–∫ –¥–ª—è –æ–±–º–µ–Ω–∞ –¥–∞–Ω–Ω—ã–º–∏ –ø–æ UDP. –°—Ç—Ä–∞—à–Ω–æ ? –ù–∞ —Ä–∏—Å—É–Ω–∫–µ –Ω–∏–∂–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∞ —Ç.–Ω. TCP/IP —Å–µ—Ç–µ–≤–∞—è –º–æ–¥–µ–ª—å –∏ –∫–∞–∫ —á–µ—Ä–µ–∑ –Ω–µ—ë –ø—Ä–æ—Ö–æ–¥—è—Ç UDP –ø–∞–∫–µ—Ç—ã. –î–∞–Ω–Ω–∞—è –º–æ–¥–µ–ª—å —Ä–∞–∑–±–∏–≤–∞–µ—Ç –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–æ–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É –Ω–∞ –ø—Ä–æ—Å—Ç—ã–µ —á–∞—Å—Ç–∏, –Ω–∞–∑—ã–≤–∞–µ–º—ã–µ —É—Ä–æ–≤–Ω—è–º–∏ –∏–ª–∏ —Å–ª–æ—è–º–∏. –£—Ä–æ–≤–Ω–∏ –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤ TCP/IP —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω—ã –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø—É —Å—Ç–µ–∫–∞ ‚Äî —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –ø—Ä–æ—Ç–æ–∫–æ–ª, —Ä–∞—Å–ø–æ–ª–∞–≥–∞—é—â–∏–π—Å—è –Ω–∞ —É—Ä–æ–≤–Ω–µ –≤—ã—à–µ, —Ä–∞–±–æ—Ç–∞–µ—Ç ¬´–ø–æ–≤–µ—Ä—Ö¬ª –Ω–∏–∂–Ω–µ–≥–æ, –∏—Å–ø–æ–ª—å–∑—É—è –º–µ—Ö–∞–Ω–∏–∑–º—ã –∏–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏–∏. –ù–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–æ—Ç–æ–∫–æ–ª UDP —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–≤–µ—Ä—Ö –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ IP. Ethernet –ø–∞–∫–µ—Ç—ã ENC28J60 –ø–æ–ø–∞–¥–∞—é—Ç –Ω–∞ –∫–∞–Ω–∞–ª—å–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å. –ü—Ä–∏ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–∏ –ø–∞–∫–µ—Ç–∞ –≤–Ω–∏–∑ –ø–æ —Å—Ç–µ–∫—É, –∫ –Ω–µ–º—É –ø—Ä–∏–∫—Ä–µ–ø–ª—è—é—Ç—Å—è –∑–∞–≥–æ–ª–æ–≤–∫–∏ –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2017/10/03/setevoe-programmirovanie-udp-ntp-chasy/UDP_encapsulation.svg" style="width:50%; margin: 0 auto; display:block;"&gt;&lt;/p&gt;
&lt;p&gt;–í —Ç–µ–æ—Ä–∏–∏ —É—Ä–æ–≤–Ω–∏ —Å–µ—Ç–µ–≤–æ–π –º–æ–¥–µ–ª–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã –¥—Ä—É–≥ –æ—Ç –¥—Ä—É–≥–∞. –ù–æ —É –Ω–∞—Å –±—É–¥–µ—Ç –Ω–µ —Å–æ–≤—Å–µ–º —Ç–∞–∫, –≤—Å–µ –ø—Ä–æ—Ç–æ–∫–æ–ª—ã –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å —Å –æ–¥–Ω–∏–º –∏ —Ç–µ–º –∂–µ –ø–∞–∫–µ—Ç–æ–º, –Ω–æ –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ —Å–≤–æ–∏–º –∑–∞–≥–æ–ª–æ–≤–∫–∞–º. –≠—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç —Å—ç–∫–æ–Ω–æ–º–∏—Ç—å –ø–∞–º—è—Ç—å –∏ —Ç–∞–∫—Ç—ã –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞. –î–ª—è —Ç–∞–∫–æ–≥–æ –ø—Ä–æ—Å—Ç–æ–≥–æ —Å—Ç–µ–∫–∞ —ç—Ç–æ –≤–ø–æ–ª–Ω–µ –Ω–æ—Ä–º–∞–ª—å–Ω–æ.&lt;/p&gt;
&lt;p&gt;–ü–æ—Ä—è–¥–æ–∫ –±–∞–π—Ç–æ–≤ –≤ TCP/IP –æ—Ç —Å—Ç–∞—Ä—à–µ–≥–æ –∫ –º–ª–∞–¥—à–µ–º—É (big-endian ‚Äî –±–æ–ª—å—à–∏–º –∫–æ–Ω—Ü–æ–º), –¥–ª—è –ø–µ—Ä–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –Ω–æ—Ä–º–∞–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –∏ –æ–±—Ä–∞—Ç–Ω–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç &lt;code&gt;htons/ntohs&lt;/code&gt; –∏ &lt;code&gt;htonl/ntohl&lt;/code&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;htonl (host to network long) –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç 32-–±–∏—Ç–Ω–æ–µ —Ü–µ–ª–æ–µ –∏–∑ –ø–æ—Ä—è–¥–∫–∞ –±–∞–π—Ç —Ö–æ—Å—Ç–∞ –≤ —Å–µ—Ç–µ–≤–æ–π –ø–æ—Ä—è–¥–æ–∫ –±–∞–π—Ç&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;ntohl (network to host long) –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç 32-–±–∏—Ç–Ω–æ–µ —Ü–µ–ª–æ–µ –∏–∑ —Å–µ—Ç–µ–≤–æ–≥–æ –ø–æ—Ä—è–¥–∫–∞ –±–∞–π—Ç –≤ –ø–æ—Ä—è–¥–æ–∫ –±–∞–π—Ç —Ö–æ—Å—Ç–∞&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;htons / ntohs —Ç–æ –∂–µ —Å–∞–º–æ–µ, —Ç–æ–ª—å–∫–æ –¥–ª—è 16-–±–∏—Ç&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;–ü—Ä–∏ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞ Ethernet –±—ã–ª–æ –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω–æ, —á—Ç–æ –∫–∞–∂–¥–∞—è —Å–µ—Ç–µ–≤–∞—è –∫–∞—Ä—Ç–∞ –¥–æ–ª–∂–Ω–∞ –∏–º–µ—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–π —à–µ—Å—Ç–∏–±–∞–π—Ç–Ω—ã–π –Ω–æ–º–µ—Ä (MAC-–∞–¥—Ä–µ—Å), ¬´–ø—Ä–æ—à–∏—Ç—ã–π¬ª –≤ –Ω–µ–π –ø—Ä–∏ –∏–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏–∏. –≠—Ç–æ—Ç –Ω–æ–º–µ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è –∏ –ø–æ–ª—É—á–∞—Ç–µ–ª—è —Ñ—Ä–µ–π–º–∞. –£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å MAC-–∞–¥—Ä–µ—Å–æ–≤ –¥–æ—Å—Ç–∏–≥–∞–µ—Ç—Å—è —Ç–µ–º, —á—Ç–æ –∫–∞–∂–¥—ã–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç –µ–≥–æ –≤ –∫–∞–∫–æ–π-—Ç–æ —Ç–∞–º —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–π –∫–æ–Ω—Ç–æ—Ä–µ IEEE. –ù–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ –æ–±—ã—á–Ω–æ –∑–∞ —ç—Ç–æ –æ—Ç–≤–µ—á–∞–µ—Ç —Å–æ–≤—Å–µ–º –∫–æ–ø–µ–µ—á–Ω–∞—è –º–∏–∫—Ä–æ—Å—Ö–µ–º–∞ –ü–ó–£, –∫–æ—Ç–æ—Ä—É—é –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä —Å—á–∏—Ç—ã–≤–∞–µ—Ç –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ. –í –Ω–∞—à–µ–º —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω–æ–º TCP/IP —Å—Ç–µ–∫–µ –º—ã —Å–∞–º–∏ –ø—Ä–∏–¥—É–º–∞–µ–º MAC-–∞–¥—Ä–µ—Å –∏ –æ–Ω –±—É–¥–µ—Ç –≤ –ø—Ä–æ—à–∏–≤–∫–µ —Å–∞–º–æ–≥–æ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–∞. –õ–æ–∫–∞–ª—å–Ω—ã–π –∞–¥—Ä–µ—Å IPv6 —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –æ—Å–Ω–æ–≤–µ –º–∞–∫ –∞–¥—Ä–µ—Å–∞ –ø–æ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–æ–º—É –∞–ª–≥–æ—Ä–∏—Ç–º—É:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="n"&gt;mac_addr&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mh"&gt;0x42&lt;/span&gt; &lt;span class="p"&gt;};&lt;/span&gt;

&lt;span class="c1"&gt;// https://stackoverflow.com/a/37316533&lt;/span&gt;
&lt;span class="c1"&gt;// 02:00:00:00:00:42 =&amp;gt; fe80::0:0ff:fe00:42&lt;/span&gt;

&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="k"&gt;union&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;uint8_t&lt;/span&gt;   &lt;span class="n"&gt;u6_addr8&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;16&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
    &lt;span class="kt"&gt;uint16_t&lt;/span&gt;  &lt;span class="n"&gt;u6_addr16&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
    &lt;span class="kt"&gt;uint32_t&lt;/span&gt;  &lt;span class="n"&gt;u6_addr32&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="n"&gt;my_ip&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;u6_addr16&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="n"&gt;htons&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mh"&gt;0xfe80&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; 
    &lt;span class="n"&gt;htons&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mh"&gt;0xff&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;htons&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mh"&gt;0xfe00&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;htons&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mh"&gt;0x42&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt; 
&lt;span class="p"&gt;};&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;MAC –¥–µ–ª–∏—Ç—Å—è –Ω–∞ –¥–≤–µ —á–∞—Å—Ç–∏: OUI (–∫–æ—Ç–æ—Ä—ã–π –æ–¥–Ω–æ–∑–Ω–∞—á–Ω–æ —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—è) –∏ NIC Specific (–≤—ã–±–∏—Ä–∞—é—Ç—Å—è –∏–∑–≥–æ—Ç–æ–≤–∏—Ç–µ–ª–µ–º –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞). –ü—Ä–∏ —ç—Ç–æ–º –≤ —Å–∞–º–æ–º –ø–µ—Ä–≤–æ–º –æ–∫—Ç–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ —à–µ—Å—Ç—å —Å—Ç–∞—Ä—à–∏—Ö —Ä–∞–∑—Ä—è–¥–æ–≤, –∞ –¥–≤–∞ –º–ª–∞–¥—à–∏—Ö –∏–º–µ—é—Ç &lt;strong&gt;—Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ&lt;/strong&gt;. –ï—Å–ª–∏ –≤–æ—Å—å–º–æ–π –±–∏—Ç –≤—ã—Å—Ç–∞–≤–ª–µ–Ω –≤ 1 (–Ω–∞–ø—Ä–∏–º–µ—Ä 01:00:00:00:00:00), —Ç–æ –∞–¥—Ä–µ—Å multicast, –∏–Ω–∞—á–µ unicast. –ï—Å–ª–∏ —Å–µ–¥—å–º–æ–π –±–∏—Ç —Ä–∞–≤–µ–Ω –µ–¥–∏–Ω–∏—Ü–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä 02:00:00:00:00:00), —Ç–æ –∞–¥—Ä–µ—Å —è–≤–ª—è–µ—Ç—Å—è —Ç.–Ω. locally administered –∞–¥—Ä–µ—Å–æ–º, —Ç.–µ. –Ω–∞–∑–Ω–∞—á–µ–Ω –≤—Ä—É—á–Ω—É—é –∏–ª–∏ –∂–µ –µ–≥–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∂–µ–ª–µ–∑–æ/—Å–æ—Ñ—Ç, –∫–æ—Ç–æ—Ä—ã–º IEEE –Ω–µ –≤—ã–¥–µ–ª–∏–ª–∞ OUI. –ï—Å–ª–∏ –∑–∞—Ö–æ—á–µ—Ç—Å—è –ø—Ä–∏–¥—É–º—ã–≤–∞—Ç—å —Å–≤–æ–π MAC-–∞–¥—Ä–µ—Å, –ø—Ä–æ—â–µ –≤—Å–µ–≥–æ –ø—Ä–æ—Å—Ç–æ –æ–±–Ω—É–ª–∏—Ç—å –ø–µ—Ä–≤—ã–π –æ–∫—Ç–µ—Ç.&lt;/p&gt;
&lt;p&gt;–ò —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ –≤–æ—Ç —Ç–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç Ethernet-—Ñ—Ä–µ–π–º –Ω–∞ –∫–∞–Ω–∞–ª—å–Ω–æ–º —É—Ä–æ–≤–µ–Ω–µ:&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2017/10/03/setevoe-programmirovanie-udp-ntp-chasy/Ethernet_Type_II_Frame_format.svg" style="width:100%;"&gt;&lt;/p&gt;
&lt;p&gt;–ö–æ–Ω—Ç—Ä–æ–ª—å–Ω–∞—è —Å—É–º–º–∞ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è ENC28J60, —Ç–∞–∫ —á—Ç–æ –¥–ª—è –Ω–∞—Å –æ—Å—Ç–∞—é—Ç—Å—è –≤–∏–¥–∏–º—ã —Ç–æ–ª—å–∫–æ 4 –ø–æ–ª—è:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;MAC-–∞–¥—Ä–µ—Å –ø–æ–ª—É—á–∞—Ç–µ–ª—è&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;MAC-–∞–¥—Ä–µ—Å –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;–∑–¥–µ—Å—å –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –ø—Ä–æ—Ç–æ–∫–æ–ª–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä 0x86DD –¥–ª—è IPv6&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;–ø–æ–ª–µ –¥–∞–Ω–Ω—ã—Ö ‚Äî –ø–æ–ª–µ–∑–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞, –Ω–∞–ø—Ä–∏–º–µ—Ä IP-–ø–∞–∫–µ—Ç, –æ–±—ã—á–Ω–æ –æ—Ç 60 –¥–æ 1500 –±–∞–π—Ç&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;–ü–∞–∫–µ—Ç—ã, —Å—á–∏—Ç—ã–≤–∞–µ–º—ã–µ —Å ENC28J60, –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏–µ–π &lt;code&gt;eth_filter&lt;/code&gt;. –ü—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –æ—Ç–≤–µ—Ç–∞ –Ω–∞ Ethernet-—Ñ—Ä–µ–π–º –æ–±—ã—á–Ω–æ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –æ–±–º–µ–Ω—è—Ç—å –º–µ—Å—Ç–∞–º–∏ MAC-–∞–¥—Ä–µ—Å –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è –∏ –ø–æ–ª—É—á–∞—Ç–µ–ª—è. –í –∫–æ–¥–µ —ç—Ç–æ –≤—ã–≥–ª—è–¥–∏—Ç —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;typedef&lt;/span&gt; &lt;span class="k"&gt;struct&lt;/span&gt; &lt;span class="n"&gt;eth_frame&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="n"&gt;to_addr&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
    &lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="n"&gt;from_addr&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;6&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
    &lt;span class="kt"&gt;uint16_t&lt;/span&gt; &lt;span class="n"&gt;type&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;[];&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="n"&gt;eth_frame_t&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="cp"&gt;#define ETH_TYPE_IP6    htons(0x86DD)&lt;/span&gt;

&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;eth_reply&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;eth_frame_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;uint16_t&lt;/span&gt; &lt;span class="n"&gt;len&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;memcpy&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;to_addr&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;from_addr&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt; &lt;span class="n"&gt;mac_addr&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;memcpy&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;from_addr&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;mac_addr&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt; &lt;span class="n"&gt;mac_addr&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;enc28j60_send&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;len&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;eth_frame_t&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;eth_filter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;eth_frame_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;uint16_t&lt;/span&gt; &lt;span class="n"&gt;len&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;len&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;=&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;eth_frame_t&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
    &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;switch&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;type&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="nl"&gt;ETH_TYPE_IP6&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="n"&gt;ip_filter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;len&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;eth_frame_t&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
            &lt;span class="k"&gt;break&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–°—Ä–∞–∑—É –ø–æ—Å–ª–µ –≤–∫–ª—é—á–µ–Ω–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –∑–Ω–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–π MAC-–∞–¥—Ä–µ—Å, –∫–∞–∫ –æ–Ω–æ —É–∑–Ω–∞–µ—Ç MAC-–∞–¥—Ä–µ—Å –ø–æ–ª—É—á–∞—Ç–µ–ª—è ? –í IPv6 –¥–ª—è —ç—Ç–æ–≥–æ –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω –ø—Ä–æ—Ç–æ–∫–æ–ª –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è —Å–æ—Å–µ–¥–µ–π (Neighbor Discovery Protocol, NDP). –û–Ω —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —Å–µ—Ç–µ–≤–æ–º —É—Ä–æ–≤–Ω–µ TCP/IP. –í–æ—Ç –∫–∞–∫ —ç—Ç–æ –≤—ã–≥–ª—è–¥–∏—Ç –≤ Wireshark:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;# sudo ip neigh flush to fe80::0:ff:fe00:42
~$ echo hello | nc -6 -u fe80::0:ff:fe00:42%mazko 12345
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ü—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –ø–µ—Ä–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ, —É –∫–∞–∫–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –≤ –ø–æ–¥—Å–µ—Ç–∏ –∞–¥—Ä–µ—Å &lt;code&gt;fe80::0:ff:fe00:42&lt;/code&gt;. –£–∑–µ–ª, –∫–æ—Ç–æ—Ä—ã–π —Ö–æ—á–µ—Ç —É–∑–Ω–∞—Ç—å MAC-–∞–¥—Ä–µ—Å –¥—Ä—É–≥–æ–≥–æ —É–∑–ª–∞, –ø–æ—Å—ã–ª–∞–µ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π ICMPv6-–∑–∞–ø—Ä–æ—Å Neighbor Solicitation (135) —Å IP-–∞–¥—Ä–µ—Å–æ–º –∏—Å–∫–æ–º–æ–≥–æ —É–∑–ª–∞ –Ω–∞ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –º—É–ª—å—Ç–∏–∫–∞—Å—Ç-–∞–¥—Ä–µ—Å. –£–∑–µ–ª, —á–µ–π IP —É–∫–∞–∑–∞–Ω –≤ –ø–∞–∫–µ—Ç–µ, –æ—Ç–≤–µ—á–∞–µ—Ç –æ–±—Ä–∞—Ç–Ω–æ ICMPv6-–ø–∞–∫–µ—Ç–æ–º ‚Äî Neighbor Advertisement (136), –≤ –∫–æ—Ç–æ—Ä–æ–º –∏ —É–∫–∞–∑—ã–≤–∞–µ—Ç —Å–≤–æ–π MAC-–∞–¥—Ä–µ—Å.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2017/10/03/setevoe-programmirovanie-udp-ntp-chasy/ndp-req.png" style="width:100%;"&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2017/10/03/setevoe-programmirovanie-udp-ntp-chasy/ndp-res.png" style="width:100%;"&gt;&lt;/p&gt;
&lt;p&gt;–ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;typedef&lt;/span&gt; &lt;span class="k"&gt;struct&lt;/span&gt; &lt;span class="n"&gt;ip_packet&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="cm"&gt;/** Version (4 bits), Traffic class (8 bits), Flow label (20 bits) */&lt;/span&gt;
    &lt;span class="kt"&gt;uint32_t&lt;/span&gt; &lt;span class="n"&gt;ver_tc_label&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="cm"&gt;/** Payload length, including any extension headers */&lt;/span&gt;
    &lt;span class="kt"&gt;uint16_t&lt;/span&gt; &lt;span class="n"&gt;payload_len&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="cm"&gt;/** Next header type */&lt;/span&gt;
    &lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="n"&gt;next_header&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="cm"&gt;/** Hop limit */&lt;/span&gt;
    &lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="n"&gt;hop_limit&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="cm"&gt;/** Source address, Destination address */&lt;/span&gt; 
    &lt;span class="k"&gt;union&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
     &lt;span class="kt"&gt;uint8_t&lt;/span&gt;   &lt;span class="n"&gt;u6_addr8&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;16&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
     &lt;span class="kt"&gt;uint16_t&lt;/span&gt;  &lt;span class="n"&gt;u6_addr16&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
     &lt;span class="kt"&gt;uint32_t&lt;/span&gt;  &lt;span class="n"&gt;u6_addr32&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="n"&gt;src&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;dest&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;[];&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="n"&gt;ip_packet_t&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="k"&gt;typedef&lt;/span&gt; &lt;span class="k"&gt;struct&lt;/span&gt; &lt;span class="n"&gt;icmp_packet&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="n"&gt;type&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="n"&gt;code&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="kt"&gt;uint16_t&lt;/span&gt; &lt;span class="n"&gt;cksum&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="kt"&gt;uint32_t&lt;/span&gt; &lt;span class="n"&gt;flags&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;[];&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="n"&gt;icmp_packet_t&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;icmp_filter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;eth_frame_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;uint16_t&lt;/span&gt; &lt;span class="n"&gt;len&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;ip_packet_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;packet&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;icmp_packet_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;icmp&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="n"&gt;packet&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="k"&gt;struct&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="n"&gt;target_address_u6_addr8&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="k"&gt;sizeof&lt;/span&gt; &lt;span class="n"&gt;my_ip&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
        &lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="n"&gt;type&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="n"&gt;length&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
        &lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="n"&gt;addr&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="k"&gt;sizeof&lt;/span&gt; &lt;span class="n"&gt;mac_addr&lt;/span&gt;&lt;span class="p"&gt;];&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;option&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="n"&gt;icmp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;len&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;=&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;icmp_packet_t&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;option&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;icmp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;type&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;ICMP_TYPE_NEIGHBOR_SOLICITATION&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;icmp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;code&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="n"&gt;icmp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;type&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;ICMP_TYPE_NEIGHBOR_ADVERTISEMENT&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
            &lt;span class="n"&gt;icmp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;flags&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;htonl&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mh"&gt;0x60000000&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt; &lt;span class="c1"&gt;// Solicited: Set, Override: Set&lt;/span&gt;
            &lt;span class="n"&gt;icmp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;cksum&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
            &lt;span class="n"&gt;option&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;type&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="c1"&gt;// Type: Target link-layer address (2) &lt;/span&gt;
            &lt;span class="n"&gt;memcpy&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;option&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;addr&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;mac_addr&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt; &lt;span class="n"&gt;mac_addr&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
            &lt;span class="n"&gt;memcpy&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;packet&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;dest&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;packet&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;src&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt; &lt;span class="n"&gt;packet&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;src&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
            &lt;span class="n"&gt;memcpy&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;packet&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;src&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;my_ip&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt; &lt;span class="n"&gt;packet&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;src&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
            &lt;span class="n"&gt;icmp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;cksum&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;ip_cksum&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;len&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;IP_PROTOCOL_ICMP6&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; 
                &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;packet&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;src&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;len&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt; &lt;span class="n"&gt;my_ip&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;

            &lt;span class="n"&gt;eth_reply&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;len&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ip_packet_t&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;char&lt;/span&gt; &lt;span class="nf"&gt;toMe&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;uint32_t&lt;/span&gt; &lt;span class="n"&gt;u6_addr32&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt;
        &lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="o"&gt;!&lt;/span&gt;&lt;span class="n"&gt;memcmp&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;my_ip&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;u6_addr32&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt; &lt;span class="n"&gt;my_ip&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;||&lt;/span&gt; 
        &lt;span class="c1"&gt;// multicast&lt;/span&gt;
        &lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="n"&gt;u6_addr32&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;htonl&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mh"&gt;0xff020000&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt;
        &lt;span class="n"&gt;u6_addr32&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;u6_addr32&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;htonl&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1l&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt;
        &lt;span class="n"&gt;u6_addr32&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;my_ip&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;u6_addr32&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;|&lt;/span&gt; &lt;span class="n"&gt;htonl&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mh"&gt;0xff000000&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt; &lt;span class="p"&gt;);&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;ip_filter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;eth_frame_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;uint16_t&lt;/span&gt; &lt;span class="n"&gt;len&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;ip_packet_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;packet&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)(&lt;/span&gt;&lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;len&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;=&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ip_packet_t&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
    &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;packet&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;ver_tc_label&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;IPV6_MASK_VER&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;IPV6_VER&lt;/span&gt; 
                &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;toMe&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;packet&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;dest&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;u6_addr32&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;

            &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="kt"&gt;uint16_t&lt;/span&gt; &lt;span class="n"&gt;p_len&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;ntohs&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;packet&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;payload_len&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

            &lt;span class="k"&gt;switch&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;packet&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;next_header&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="p"&gt;{&lt;/span&gt;
            &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="nl"&gt;IP_PROTOCOL_ICMP6&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                &lt;span class="n"&gt;icmp_filter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;p_len&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
                &lt;span class="k"&gt;break&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
            &lt;span class="k"&gt;case&lt;/span&gt; &lt;span class="nl"&gt;IP_PROTOCOL_UDP&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                &lt;span class="n"&gt;udp_filter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;p_len&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
                &lt;span class="k"&gt;break&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
            &lt;span class="p"&gt;}&lt;/span&gt;
        &lt;span class="p"&gt;}&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–û—Å—Ç–∞–ª–æ—Å—å —Å–æ–≤—Å–µ–º —á—É—Ç—å —á—É—Ç—å. UDP (User Datagram Protocol) ‚Äî –ø—Ä–æ—Å—Ç–µ–π—à–∏–π –ø—Ä–æ—Ç–æ–∫–æ–ª —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–æ–≥–æ —É—Ä–æ–≤–Ω—è. UDP –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–∑–ª–∞–º –æ–±–º–µ–Ω–∏–≤–∞—Ç—å—Å—è –Ω–µ–±–æ–ª—å—à–∏–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏, –Ω–∞–∑—ã–≤–∞–µ–º—ã–º–∏ –¥–∞—Ç–∞–≥—Ä–∞–º–º–∞–º–∏. –ú—ã —Ä–µ–∞–ª–∏–∑—É–µ–º UDP-—Å–µ—Ä–≤–µ—Ä –Ω–∞ –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–µ. –î–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã –æ–ø—É—Å–∫–∞–µ–º —Ç–µ–º—É —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏–∏ IP-–ø–∞–∫–µ—Ç–∞, —ç—Ç–æ –¥–æ–ø—É—Å—Ç–∏–º–æ –¥–ª—è –Ω–µ–±–æ–ª—å—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö. –ù–∞–ø—Ä–∏–º–µ—Ä –¥–ª—è IPv4 —á—Ç–æ–±—ã –¥–∞—Ç–∞–≥—Ä–∞–º–º–∞ —Ç–æ—á–Ω–æ –ø—Ä–æ–ª–µ–∑–ª–∞ –±–µ–∑ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏–∏ IP-–ø–∞–∫–µ—Ç–∞, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ª–µ–∑–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ –Ω–µ–π –Ω–µ –¥–æ–ª–∂–Ω–æ –ø—Ä–µ–≤—ã—à–∞—Ç—å 512 –±–∞–π—Ç, –¥–ª—è IPv6 –Ω—É–∂–Ω–æ –ø–µ—Ä–µ—Å—á–∏—Ç–∞—Ç—å, –Ω–æ —á—Ç–æ-—Ç–æ –±–ª–∏–∑–∫–æ–µ –∫ —ç—Ç–æ–º—É.&lt;/p&gt;
&lt;p&gt;UDP —Å—á–∏—Ç–∞–µ—Ç—Å—è –Ω–µ–Ω–∞–¥—ë–∂–Ω—ã–º –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–º ‚Äî –ø—Ä–∏ –ø–æ—Ç–µ—Ä–µ IP-–ø–∞–∫–µ—Ç–∞, –¥–∞—Ç–∞–≥—Ä–∞–º–º–∞ —Ç–µ—Ä—è–µ—Ç—Å—è. –í–ø—Ä–æ—á–µ–º, —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–µ—Ç–∏ –≤–ø–æ–ª–Ω–µ —Å–µ–±–µ –Ω–∞–¥—ë–∂–Ω—ã ‚Äî –≤ —Ö–æ—Ä–æ—à–æ —Ä–∞–±–æ—Ç–∞—é—â–µ–π –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏ –ø–∞–∫–µ—Ç—ã –Ω–µ —Ç–µ—Ä—è—é—Ç—Å—è –ø–æ—á—Ç–∏ –Ω–∏–∫–æ–≥–¥–∞. –ù–æ, –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ, –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –∞–¥–µ–∫–≤–∞—Ç–Ω–æ —Ä–µ–∞–≥–∏—Ä–æ–≤–∞—Ç—å, –µ—Å–ª–∏ –¥–∞—Ç–∞–≥—Ä–∞–º–º–∞ –≤—Å—ë –∂–µ –ø–æ—Ç–µ—Ä—è–µ—Ç—Å—è. –ü–æ—Ä—è–¥–æ–∫ –¥–æ—Å—Ç–∞–≤–∫–∏ –¥–∞—Ç–∞–≥—Ä–∞–º–º–∞ —Ç–∞–∫–∂–µ –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç—Å—è ‚Äî —Ç–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏ –≤—ã –º–æ–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –¥–≤–∞ –ø–∞–∫–µ—Ç–∞ hello –∑–∞—Ç–µ–º world, –∞ –ø–æ–ª—É—á–∏—Ç—å world –∑–∞—Ç–µ–º hello.&lt;/p&gt;
&lt;p&gt;UDP –æ—Ç–ª–∏—á–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏, –Ω–µ—á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã—Ö –∫ –ø–æ—Ç–µ—Ä—è–º. –°–∫–∞–∂–µ–º, —Å –ø–æ–º–æ—â—å—é UDP —É–¥–æ–±–Ω–æ –∑–∞–±–∏—Ä–∞—Ç—å –ø–æ–∫–∞–∑–∞–Ω–∏—è –∫–∞–∫–∏—Ö-–Ω–∏–±—É–¥—å –¥–∞—Ç—á–∏–∫–æ–≤ –∏–ª–∏ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –Ω–∞ –¥–∏—Å–ø–ª–µ–π –∏–ª–∏ –¥–∞–∂–µ –≥–æ–ª–æ—Å–æ–≤–æ–π –∏–ª–∏ –≤–∏–¥–µ–æ –ø–æ—Ç–æ–∫ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="k"&gt;typedef&lt;/span&gt; &lt;span class="k"&gt;struct&lt;/span&gt; &lt;span class="n"&gt;udp_packet&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;uint16_t&lt;/span&gt; &lt;span class="n"&gt;from_port&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="kt"&gt;uint16_t&lt;/span&gt; &lt;span class="n"&gt;to_port&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="kt"&gt;uint16_t&lt;/span&gt; &lt;span class="n"&gt;len&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="kt"&gt;uint16_t&lt;/span&gt; &lt;span class="n"&gt;cksum&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;[];&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt; &lt;span class="n"&gt;udp_packet_t&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;udp_reply&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;eth_frame_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;uint16_t&lt;/span&gt; &lt;span class="n"&gt;len&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;ip_packet_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;ip&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)(&lt;/span&gt;&lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;udp_packet_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;udp&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)(&lt;/span&gt;&lt;span class="n"&gt;ip&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="kt"&gt;uint16_t&lt;/span&gt; &lt;span class="n"&gt;temp&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="n"&gt;len&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;udp_packet_t&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="n"&gt;temp&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;udp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;from_port&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;udp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;from_port&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;udp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;to_port&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;udp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;to_port&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;temp&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="n"&gt;udp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;len&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;htons&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;len&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;ip&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;payload_len&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;udp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;len&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="n"&gt;udp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;cksum&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;udp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;cksum&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;ip_cksum&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;len&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;IP_PROTOCOL_UDP&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; 
        &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;ip&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;src&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;len&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt; &lt;span class="n"&gt;my_ip&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;

    &lt;span class="n"&gt;memcpy&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;ip&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;dest&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;ip&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;src&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt; &lt;span class="n"&gt;ip&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;src&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;memcpy&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;ip&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;src&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt;&lt;span class="n"&gt;my_ip&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt; &lt;span class="n"&gt;ip&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;src&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;eth_reply&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;len&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ip_packet_t&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="k"&gt;static&lt;/span&gt; &lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;udp_filter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;eth_frame_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;uint16_t&lt;/span&gt; &lt;span class="n"&gt;len&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="n"&gt;ip_packet_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;ip&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)(&lt;/span&gt;&lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="n"&gt;udp_packet_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;udp&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)(&lt;/span&gt;&lt;span class="n"&gt;ip&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;len&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;=&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;udp_packet_t&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
    &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="kt"&gt;uint16_t&lt;/span&gt; &lt;span class="n"&gt;udp_len&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;ntohs&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;udp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;len&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;udp_packet_t&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
        &lt;span class="n"&gt;udp_packet&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;udp_len&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ß—Ç–æ–±—ã –ø—Ä–∏–¥–∞—Ç—å –≤—Å–µ–º—É —ç—Ç–æ–º—É —Å–º—ã—Å–ª, –Ω–∞–ø–∏—à–µ–º –ø—Ä–æ—Å—Ç–µ–Ω—å–∫–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, —Ä–∞–±–æ—Ç–∞—é—â–µ–µ –ø–æ UDP. –ù–∞–ø—Ä–∏–º–µ—Ä, –ø–µ—á–∞—Ç–∞–µ–º —Ç–µ–∫—Å—Ç –Ω–∞ –¥–∏—Å–ø–ª–µ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ —Å –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä–æ–º.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;udp_packet&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;eth_frame_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="kt"&gt;uint16_t&lt;/span&gt; &lt;span class="n"&gt;len&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;ip_packet_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;ip&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)(&lt;/span&gt;&lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;udp_packet_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;udp&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)(&lt;/span&gt;&lt;span class="n"&gt;ip&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="kt"&gt;uint8_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;udp&lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="kt"&gt;uint16_t&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="n"&gt;len&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="o"&gt;++&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;putchar&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;i&lt;/span&gt;&lt;span class="p"&gt;]);&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;

    &lt;span class="n"&gt;draw_clr&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
    &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="n"&gt;len&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;draw_str&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;char&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;

    &lt;span class="k"&gt;const&lt;/span&gt; &lt;span class="kt"&gt;char&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;response&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;!!! OK !!!&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;strcpy&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="kt"&gt;char&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;response&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="n"&gt;udp_reply&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;strlen&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;response&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;void&lt;/span&gt; &lt;span class="nf"&gt;lan_poll&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="kt"&gt;uint16_t&lt;/span&gt; &lt;span class="n"&gt;len&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
    &lt;span class="n"&gt;eth_frame_t&lt;/span&gt; &lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="n"&gt;frame&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="n"&gt;net_buf&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;

    &lt;span class="k"&gt;while&lt;/span&gt;&lt;span class="p"&gt;((&lt;/span&gt;&lt;span class="n"&gt;len&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;enc28j60_read&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;net_buf&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="k"&gt;sizeof&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;net_buf&lt;/span&gt;&lt;span class="p"&gt;))))&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="n"&gt;eth_filter&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;frame&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;len&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
  &lt;span class="p"&gt;}&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;

&lt;span class="kt"&gt;int&lt;/span&gt; &lt;span class="nf"&gt;main&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kt"&gt;void&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;{&lt;/span&gt;
    &lt;span class="n"&gt;bsp_init&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
    &lt;span class="n"&gt;uart0_init&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
    &lt;span class="n"&gt;lan_init&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;
    &lt;span class="n"&gt;draw_init&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;

    &lt;span class="n"&gt;printf&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Start polling...&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
    &lt;span class="k"&gt;while&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;lan_poll&lt;/span&gt;&lt;span class="p"&gt;();&lt;/span&gt;

    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;a href="http://localhost:9148/a491c24964bb014608f8180d354c4198"&gt;IPv6&lt;/a&gt; | &lt;a href="http://localhost:9148/a72c1a945faa90413fb72520f60006f8"&gt;IPv4&lt;/a&gt; | &lt;a href="http://proiot.ru/blog/posts/2017/10/03/setevoe-programmirovanie-udp-ntp-chasy/eth_udp.zip"&gt;–∏—Å—Ö–æ–¥–Ω–∏–∫–∏&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2017/10/03/setevoe-programmirovanie-udp-ntp-chasy/welome.png" style="width:50%; margin: 0 auto; display:block;"&gt;&lt;/p&gt;
&lt;p&gt;–ß—Ç–æ–±—ã –≤—ã–≤–µ—Å—Ç–∏ –¥–∞–Ω–Ω—ã–µ –≤ –¥–∏—Å–ø–ª–µ–π, –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–µ–≤–∞–π—Å—É UDP-–ø–∞–∫–µ—Ç –Ω–∞ –ª—é–±–æ–π –ø–æ—Ä—Ç, netcat ‚Äî —É–¥–æ–±–Ω–∞—è —É—Ç–∏–ª–∏—Ç–∫–∞, –∫–æ—Ç–æ—Ä–∞—è –ø–æ–º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –∏ –ø—Ä–∏–Ω–∏–º–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ —Å–µ—Ç–∏:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ cat &amp;lt;(echo IoT) - | nc -6 -u fe80::0:ff:fe00:42%mazko 12345
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–í —Ä–µ–∞–ª—å–Ω–æ–º –º–∏—Ä–µ –Ω–∞ –æ–¥–Ω–æ–º –∞–¥—Ä–µ—Å–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –º–Ω–æ–≥–æ UDP –ø–æ—Ä—Ç–æ–≤, –≥–¥–µ –∫–∞–∂–¥—ã–π —Å–µ—Ä–≤–∏—Å –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Å–≤–æ—é –ª–æ–≥–∏–∫—É. –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Ä—Ç–æ–≤ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–æ —Å —É—á—ë—Ç–æ–º 16-–±–∏—Ç–Ω–æ–π –∞–¥—Ä–µ—Å–∞—Ü–∏–∏ —Ç.–µ. 65536. –í—Å–µ –ø–æ—Ä—Ç—ã —Ä–∞–∑–¥–µ–ª–µ–Ω—ã –Ω–∞ —Ç—Ä–∏ –¥–∏–∞–ø–∞–∑–æ–Ω–∞ ‚Äî –æ–±—â–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–µ (–∏–ª–∏ —Å–∏—Å—Ç–µ–º–Ω—ã–µ, 0..1023), –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ (–∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ, 1024..49151) –∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ (–∏–ª–∏ —á–∞—Å—Ç–Ω—ã–µ, 49152..65535). –ù–∞–ø—Ä–∏–º–µ—Ä —Ä–∞–Ω–µ–µ —É–ø–æ–º—è–Ω—É—Ç—ã–π NTP –ø—Ä–æ—Ç–æ–∫–æ–ª –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ—Ä—Ç 123 (UDP), DNS –ø–æ—Ä—Ç 53 –∏ —Ç.–¥.&lt;/p&gt;
&lt;p&gt;&lt;a href="http://proiot.ru/blog/posts/2017/10/09/setevoe-programmirovanie-tcp-http-server/"&gt;–î–∞–ª–µ–µ&lt;/a&gt; TCP.&lt;/p&gt;</content><category term="contiki"></category><category term="IPv6"></category><category term="msp430"></category></entry><entry><title>–£–º–Ω—ã–π –î–æ–º - –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π UPnP/DLNA</title><link href="http://proiot.ru/blog/posts/2016/08/12/umnyi-dom-avtomatizatsiia-ustroistv-s-podderzhkoi-upnpdlna/" rel="alternate"></link><published>2016-08-12T00:00:00+03:00</published><updated>2016-08-12T00:00:00+03:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2016-08-12:/blog/posts/2016/08/12/umnyi-dom-avtomatizatsiia-ustroistv-s-podderzhkoi-upnpdlna/</id><summary type="html">&lt;p&gt;Universal Plug and Play (&lt;a href="http://upnp.org/specs/arch/UPnP-arch-DeviceArchitecture-v1.1.pdf" rel="nofollow"&gt;UPnP&lt;/a&gt;) - —ç—Ç–æ –Ω–∞–±–æ—Ä –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤ –¥–ª—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –∏ –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å–µ—Ç–µ–≤—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤. –î–µ–≤–∞–π—Å–æ–º –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ—á—Ç–∏ –≤—Å–µ —á—Ç–æ —É–≥–æ–¥–Ω–æ: —Ä–æ—É—Ç–µ—Ä, –ø—Ä–∏–Ω—Ç–µ—Ä, Smart TV, –º–æ–±–∏–ª—å–Ω—ã–π —Ç–µ–ª–µ—Ñ–æ–Ω - –≥–ª–∞–≤–Ω–æ–µ —á—Ç–æ–±—ã –æ–Ω –±—ã–ª –ø–æ–¥–∫–ª—é—á—ë–Ω –∫ —Å–µ—Ç–∏ –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–ª —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—é UPnP/DLNA.&lt;/p&gt;
&lt;p&gt;–¢—É—Ç –ø–æ–∂–∞–ª—É–π —Å—Ç–æ–∏—Ç —Å–¥–µ–ª–∞—Ç—å —Ä–∏—Ç–æ—Ä–∏—á–µ—Å–∫–æ–µ –æ—Ç—Å—Ç—É–ø–ª–µ–Ω–∏–µ. –ó–∞—á–µ–º –Ω–∞–º &lt;a href="http://2gusia.livejournal.com/37929.html" rel="nofollow"&gt;–¥–≤–µ ‚Ä¶&lt;/a&gt;&lt;/p&gt;</summary><content type="html">&lt;p&gt;Universal Plug and Play (&lt;a href="http://upnp.org/specs/arch/UPnP-arch-DeviceArchitecture-v1.1.pdf" rel="nofollow"&gt;UPnP&lt;/a&gt;) - —ç—Ç–æ –Ω–∞–±–æ—Ä –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤ –¥–ª—è –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –∏ –ø–æ—Å–ª–µ–¥—É—é—â–µ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å–µ—Ç–µ–≤—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤. –î–µ–≤–∞–π—Å–æ–º –º–æ–∂–µ—Ç –±—ã—Ç—å –ø–æ—á—Ç–∏ –≤—Å–µ —á—Ç–æ —É–≥–æ–¥–Ω–æ: —Ä–æ—É—Ç–µ—Ä, –ø—Ä–∏–Ω—Ç–µ—Ä, Smart TV, –º–æ–±–∏–ª—å–Ω—ã–π —Ç–µ–ª–µ—Ñ–æ–Ω - –≥–ª–∞–≤–Ω–æ–µ —á—Ç–æ–±—ã –æ–Ω –±—ã–ª –ø–æ–¥–∫–ª—é—á—ë–Ω –∫ —Å–µ—Ç–∏ –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–ª —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—é UPnP/DLNA.&lt;/p&gt;
&lt;p&gt;–¢—É—Ç –ø–æ–∂–∞–ª—É–π —Å—Ç–æ–∏—Ç —Å–¥–µ–ª–∞—Ç—å —Ä–∏—Ç–æ—Ä–∏—á–µ—Å–∫–æ–µ –æ—Ç—Å—Ç—É–ø–ª–µ–Ω–∏–µ. –ó–∞—á–µ–º –Ω–∞–º &lt;a href="http://2gusia.livejournal.com/37929.html" rel="nofollow"&gt;–¥–≤–µ&lt;/a&gt; —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ UPnP –∏ DLNA ? –¢–∞–∫ —Å–ª–æ–∂–∏–ª–æ—Å—å –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏. –° —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è –±—ã—Ç–æ–≤–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è - —ç—Ç–æ –ø–æ—á—Ç–∏ –æ–¥–Ω–æ –∏ —Ç–æ –∂–µ. –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏ DLNA –±–∞–∑–∏—Ä—É–µ—Ç—Å—è –Ω–∞ UPnP, –Ω–∞–∫–ª–∞–¥—ã–≤–∞—è –Ω–∞ –Ω–µ–≥–æ –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è.
UPnP - –Ω–∞–±–æ—Ä –æ—Ç–∫—Ä—ã—Ç—ã—Ö –±–µ—Å–ø–ª–∞—Ç–Ω—ã—Ö —Å–µ—Ç–µ–≤—ã—Ö –ø—Ä–æ—Ç–æ–∫–æ–ª–æ–≤, –≤ —Ç–æ –≤—Ä–µ–º—è –∫–∞–∫ –¥–ª—è —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏  DLNA –æ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—è –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è —Ç—Ä–µ–±—É–µ—Ç—Å—è –∑–∞–ø–ª–∞—Ç–∏—Ç—å &lt;a href="http://www.dlna.org/certification/certification" rel="nofollow"&gt;–¥–µ–Ω—é—à–∫—É&lt;/a&gt;. –¢–∞–∫–∂–µ DLNA –ø—Ä–∏–≤–Ω–æ—Å–∏—Ç –∏–Ω—Ç–µ—Ä–µ—Å—ã –ø—Ä–∞–≤–æ–æ–±–ª–∞–¥–∞—Ç–µ–ª—è, —Å—Ç—Ä–µ–º—è—Å—å –¥–æ–ø—É—Å—Ç–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ç–æ–ª—å–∫–æ "–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ" –º–µ–¥–∏–∞–∫–æ–Ω—Ç–µ–Ω—Ç–∞. –•–æ—Ä–æ—à–∏–π –ø—Ä–∏–º–µ—Ä - —Ñ–æ—Ä–º–∞—Ç mkv, —Å—Ç–æ–ª—å —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—ë–Ω–Ω—ã–π –≤ —Å–µ—Ç–∏ –∏ —Å—Ç–æ–ª—å –Ω–µ–Ω–∞–≤–∏—Å—Ç–Ω—ã–π –º–Ω–æ–≥–∏–º –ø—Ä–∞–≤–æ–æ–±–ª–∞–¥–∞—Ç–µ–ª—è–º. –í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ —ç—Ç–æ—Ç —Ñ–æ—Ä–º–∞—Ç, –≤–ø–æ–ª–Ω–µ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π —Å UPnP, –æ–∫–∞–∑–∞–ª—Å—è –∑–∞ –±–æ—Ä—Ç–æ–º —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–π DLNA –∏ –º–Ω–æ–∂–µ—Å—Ç–≤–æ DLNA —É—Å—Ç—Ä–æ–π—Å—Ç–≤ –Ω–µ –º–æ–≥—É—Ç —Å –Ω–∏–º —Ä–∞–±–æ—Ç–∞—Ç—å.&lt;/p&gt;
&lt;p&gt;–ù–∞ –ø—Ä–∞–∫—Ç–∏–∫–µ —ç—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –∏ DLNA –∏ UPnP —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –≤ –ø–æ–¥–∞–≤–ª—è—é—â–µ–º –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å–ª—É—á–∞–µ–≤ –º–æ–≥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –≤–º–µ—Å—Ç–µ. –ü—Ä–∞–≤–¥–∞, –Ω–µ –Ω–∞ –ª—é–±–æ–º –∫–æ–Ω—Ç–µ–Ω—Ç–µ.&lt;/p&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/08/12/umnyi-dom-avtomatizatsiia-ustroistv-s-podderzhkoi-upnpdlna/ui.gif" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–ù–∞—à–∞ —Ü–µ–ª—å - –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥–µ–π—Å—Ç–≤–∏—è –Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫–µ –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π —Ç.–∫. –æ—á–µ–Ω—å —É–¥–æ–±–Ω–æ –≤–∫–ª—é—á–∞—Ç—å/–≤—ã–∫–ª—é—á–∞—Ç—å –º—É–∑—ã–∫—É –≤ –∫–æ–º–Ω–∞—Ç–µ –∫–æ–º–±–∏–Ω–∞—Ü–∏–µ–π –∫–ª–∞–≤–∏—à –Ω–∞ &lt;a href="http://proiot.ru/blog/posts/2016/03/03/kak-soorudit-udobnyi-perevod-teksta-vsego-za-paru-minut/"&gt;–Ω–æ—É—Ç–µ&lt;/a&gt;. &lt;/p&gt;
&lt;p&gt;–ù–∞—á–Ω—ë–º —Å &lt;a href="http://www.upnp-hacks.org/upnp.html" rel="nofollow"&gt;–æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è&lt;/a&gt; –¥–æ—Å—Ç—É–ø–Ω—ã—Ö UPnP —É—Å—Ç—Ä–æ–π—Å—Ç–≤. –î–ª—è —ç—Ç–æ–≥–æ –Ω—É–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å M-SEARCH –∑–∞–ø—Ä–æ—Å –Ω–∞ multicast-–∞–¥—Ä–µ—Å 239.255.255.250 –ø–æ—Ä—Ç 1900 –ø–æ UDP –ø—Ä–æ—Ç–æ–∫–æ–ª—É. –í—Å–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –∏ –ø—Ä–æ–≥—Ä–∞–º–º—ã, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—â–∏–µ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é UPnP –æ–±—è–∑–∞–Ω—ã –æ—Ç–≤–µ—Ç–∏—Ç—å –ø–æ UDP unicast:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ upnp-scan&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
  python3 -c &lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;
&lt;span class="s1"&gt;import socket, sys&lt;/span&gt;

&lt;span class="s1"&gt;SSDP_ADDR = &amp;quot;239.255.255.250&amp;quot;&lt;/span&gt;
&lt;span class="s1"&gt;SSDP_PORT = 1900&lt;/span&gt;
&lt;span class="s1"&gt;# seconds to delay response&lt;/span&gt;
&lt;span class="s1"&gt;SSDP_MX = 3&lt;/span&gt;
&lt;span class="s1"&gt;# search target&lt;/span&gt;
&lt;span class="s1"&gt;SSDP_ST = sys.argv[1] # upnp-scan &amp;quot;ssdp:all&amp;quot;&lt;/span&gt;

&lt;span class="s1"&gt;ssdpRequest = &amp;quot;M-SEARCH * HTTP/1.1\r\n&amp;quot; + \&lt;/span&gt;
&lt;span class="s1"&gt;              &amp;quot;HOST: %s:%d\r\n&amp;quot; % (SSDP_ADDR, SSDP_PORT) + \&lt;/span&gt;
&lt;span class="s1"&gt;              &amp;quot;MAN: \&amp;quot;ssdp:discover\&amp;quot;\r\n&amp;quot; + \&lt;/span&gt;
&lt;span class="s1"&gt;              &amp;quot;MX: %d\r\n&amp;quot; % (SSDP_MX, ) + \&lt;/span&gt;
&lt;span class="s1"&gt;              &amp;quot;ST: %s\r\n&amp;quot; % (SSDP_ST, ) + &amp;quot;\r\n&amp;quot;&lt;/span&gt;

&lt;span class="s1"&gt;with socket.socket(socket.AF_INET, socket.SOCK_DGRAM) as sock:&lt;/span&gt;
&lt;span class="s1"&gt;  sock.sendto(ssdpRequest.encode(), (SSDP_ADDR, SSDP_PORT))&lt;/span&gt;
&lt;span class="s1"&gt;  sock.settimeout(SSDP_MX + 1)&lt;/span&gt;
&lt;span class="s1"&gt;  while True:&lt;/span&gt;
&lt;span class="s1"&gt;    try:&lt;/span&gt;
&lt;span class="s1"&gt;      data = sock.recv(1024)&lt;/span&gt;
&lt;span class="s1"&gt;      print(data.decode()) &lt;/span&gt;
&lt;span class="s1"&gt;    except socket.timeout:&lt;/span&gt;
&lt;span class="s1"&gt;      break&lt;/span&gt;
&lt;span class="s1"&gt;  &amp;#39;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$1&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
  tr -d &lt;span class="s1"&gt;&amp;#39;\r&amp;#39;&lt;/span&gt; &lt;span class="c1"&gt;# normalize new lines \r\n =&amp;gt; \n&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;

~$ upnp-scan &lt;span class="s2"&gt;&amp;quot;ssdp:all&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
    tee upnp.scan.dump &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
    awk -v &lt;span class="nv"&gt;RS&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;\n\n\n&amp;#39;&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;/BubbleUPnP/ &amp;amp;&amp;amp; /[Ss][Tt]: uuid:/ {print $0 &amp;quot;\n&amp;quot;}&amp;#39;&lt;/span&gt;
&lt;span class="c1"&gt;# response&lt;/span&gt;
HTTP/1.1 &lt;span class="m"&gt;200&lt;/span&gt; OK
Cache-control: max-age&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;1800&lt;/span&gt;
Usn: uuid:3ef89534-fb8e-c38f-0000-00007940d6d3
Location: http://192.168.0.100:57916/dev/3ef89534-fb8e-c38f-0000-00007940d6d3/desc.xml
Server: Linux/2.6.29 UPnP/1.0 BubbleUPnP/1.6.11.1
Ext: 
St: uuid:3ef89534-fb8e-c38f-0000-00007940d6d3
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ú—ã –ø—Ä–æ—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–ª–∏ —Å–µ—Ç—å –∏ &lt;a href="http://awk.js.org/?gist=ebfc98b50d9b72b1f77df05a4db264a9"&gt;–æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–ª–∏&lt;/a&gt; —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ BubbleUPnP, –∫–æ—Ç–æ—Ä—ã–º–∏ —Ö–æ—Ç–∏–º —É–ø—Ä–∞–≤–ª—è—Ç—å. –¢–∞–∫–æ–≤—ã—Ö –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ, –ø–æ—ç—Ç–æ–º—É –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ —É–¥–æ–±–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –¥–µ–≤–∞–π—Å–æ–º —á–µ—Ä–µ–∑ uuid: &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ upnp-scan &lt;span class="s1"&gt;&amp;#39;uuid:3ef89534-fb8e-c38f-0000-00007940d6d3&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; awk &lt;span class="s1"&gt;&amp;#39;/Location:/ {print $2}&amp;#39;&lt;/span&gt;
&lt;span class="c1"&gt;# response&lt;/span&gt;
http://192.168.0.100:57916/dev/3ef89534-fb8e-c38f-0000-00007940d6d3/desc.xml
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–í —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ &lt;a href="http://upnp.org/specs/arch/UPnP-arch-DeviceArchitecture-v1.1.pdf" rel="nofollow"&gt;UPnP&lt;/a&gt; –º–Ω–æ–≥–æ –±—É–∫–≤. –ú–æ–∂–Ω–æ —É–ø—Ä–æ—Å—Ç–∏—Ç—å —Å–µ–±–µ –∂–∏–∑–Ω—å –∏ –ø–µ—Ä–µ—Ö–≤–∞—Ç–∏—Ç—å SOAP –∑–∞–ø—Ä–æ—Å—ã –Ω–∞ 192.168.0.100, –∫–æ—Ç–æ—Ä—ã–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–æ–≥—Ä–∞–º–º–∞ –Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫–µ &lt;code&gt;sudo tcpdump -A dst 192.168.0.100&lt;/code&gt; –∏ —Å–¥–µ–ª–∞—Ç—å —Ç–æ –∂–µ –ø–æ—Å—Ä–µ–¥—Å—Ç–≤–æ–º curl:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ &lt;span class="nv"&gt;BASE&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;http://192.168.0.100:57916/ &lt;span class="se"&gt;\&lt;/span&gt;
   &lt;span class="nv"&gt;AV&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;dev/3ef89534-fb8e-c38f-0000-00007940d6d3/svc/upnp-org/AVTransport/action
~$ curl &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$BASE$AV&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
-XPOST &lt;span class="se"&gt;\&lt;/span&gt;
-H &lt;span class="s1"&gt;&amp;#39;SOAPAction: &amp;quot;urn:schemas-upnp-org:service:AVTransport:1#Stop&amp;quot;&amp;#39;&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
-H &lt;span class="s1"&gt;&amp;#39;Content-Type: text/xml; charset=&amp;quot;utf-8&amp;quot;&amp;#39;&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
-d &lt;span class="s1"&gt;&amp;#39;&amp;lt;?xml version=&amp;quot;1.0&amp;quot;?&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;&amp;lt;s:Envelope xmlns:s=&amp;quot;http://schemas.xmlsoap.org/soap/envelope/&amp;quot; &lt;/span&gt;
&lt;span class="s1"&gt;s:encodingStyle=&amp;quot;http://schemas.xmlsoap.org/soap/encoding/&amp;quot;&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;  &amp;lt;s:Body&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;lt;u:Stop xmlns:u=&amp;quot;urn:schemas-upnp-org:service:AVTransport:1&amp;quot;&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;      &amp;lt;InstanceID&amp;gt;0&amp;lt;/InstanceID&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;lt;/u:Stop&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;  &amp;lt;/s:Body&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;&amp;lt;/s:Envelope&amp;gt;&amp;#39;&lt;/span&gt;

~$ curl &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$BASE$AV&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
-XPOST &lt;span class="se"&gt;\&lt;/span&gt;
-H &lt;span class="s1"&gt;&amp;#39;SOAPAction: &amp;quot;urn:schemas-upnp-org:service:AVTransport:1#SetAVTransportURI&amp;quot;&amp;#39;&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
-H &lt;span class="s1"&gt;&amp;#39;Content-Type: text/xml; charset=&amp;quot;utf-8&amp;quot;&amp;#39;&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
-d &lt;span class="s1"&gt;&amp;#39;&amp;lt;?xml version=&amp;quot;1.0&amp;quot;?&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;&amp;lt;s:Envelope xmlns:s=&amp;quot;http://schemas.xmlsoap.org/soap/envelope/&amp;quot;&lt;/span&gt;
&lt;span class="s1"&gt;s:encodingStyle=&amp;quot;http://schemas.xmlsoap.org/soap/encoding/&amp;quot;&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;  &amp;lt;s:Body&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;lt;u:SetAVTransportURI xmlns:u=&amp;quot;urn:schemas-upnp-org:service:AVTransport:1&amp;quot;&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;      &amp;lt;CurrentURIMetaData&amp;gt;NOT_IMPLEMENTED&amp;lt;/CurrentURIMetaData&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;      &amp;lt;CurrentURI&amp;gt;http://online.radioroks.com.ua:8000/RadioROKS&amp;lt;/CurrentURI&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;      &amp;lt;InstanceID&amp;gt;0&amp;lt;/InstanceID&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;lt;/u:SetAVTransportURI&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;  &amp;lt;/s:Body&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;&amp;lt;/s:Envelope&amp;gt;&amp;#39;&lt;/span&gt;

~$ curl &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$BASE$AV&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
-XPOST &lt;span class="se"&gt;\&lt;/span&gt;
-H &lt;span class="s1"&gt;&amp;#39;SOAPAction: &amp;quot;urn:schemas-upnp-org:service:AVTransport:1#Play&amp;quot;&amp;#39;&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
-H &lt;span class="s1"&gt;&amp;#39;Content-Type: text/xml; charset=&amp;quot;utf-8&amp;quot;&amp;#39;&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
-d &lt;span class="s1"&gt;&amp;#39;&amp;lt;?xml version=&amp;quot;1.0&amp;quot;?&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;&amp;lt;s:Envelope xmlns:s=&amp;quot;http://schemas.xmlsoap.org/soap/envelope/&amp;quot;&lt;/span&gt;
&lt;span class="s1"&gt;s:encodingStyle=&amp;quot;http://schemas.xmlsoap.org/soap/encoding/&amp;quot;&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;  &amp;lt;s:Body&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;lt;u:Play xmlns:u=&amp;quot;urn:schemas-upnp-org:service:AVTransport:1&amp;quot;&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;      &amp;lt;Speed&amp;gt;1&amp;lt;/Speed&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;      &amp;lt;InstanceID&amp;gt;0&amp;lt;/InstanceID&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;lt;/u:Play&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;  &amp;lt;/s:Body&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;&amp;lt;/s:Envelope&amp;gt;&amp;#39;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ö–æ–Ω–µ—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:&lt;/p&gt;
&lt;p&gt;&lt;em&gt;upnp-cp.sh&lt;/em&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="ch"&gt;#!/bin/bash&lt;/span&gt;

&lt;span class="c1"&gt;# chmod +x upnp-cp.sh &amp;amp;&amp;amp; sudo ln -s &amp;quot;`pwd`/upnp-cp.sh&amp;quot; /usr/local/bin/play-to-upnp&lt;/span&gt;

&lt;span class="c1"&gt;# usage stop/play:&lt;/span&gt;
&lt;span class="c1"&gt;# play-to-upnp&lt;/span&gt;
&lt;span class="c1"&gt;# play-to-upnp http://online.radioroks.com.ua:8000/RadioROKS&lt;/span&gt;

&lt;span class="nb"&gt;set&lt;/span&gt; -e

upnp-scan&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
  python3 -c &lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;
&lt;span class="s1"&gt;import socket, sys&lt;/span&gt;

&lt;span class="s1"&gt;SSDP_ADDR = &amp;quot;239.255.255.250&amp;quot;&lt;/span&gt;
&lt;span class="s1"&gt;SSDP_PORT = 1900&lt;/span&gt;
&lt;span class="s1"&gt;# seconds to delay response&lt;/span&gt;
&lt;span class="s1"&gt;SSDP_MX = 3&lt;/span&gt;
&lt;span class="s1"&gt;# search target&lt;/span&gt;
&lt;span class="s1"&gt;SSDP_ST = sys.argv[1] # upnp-scan &amp;quot;ssdp:all&amp;quot;&lt;/span&gt;

&lt;span class="s1"&gt;ssdpRequest = &amp;quot;M-SEARCH * HTTP/1.1\r\n&amp;quot; + \&lt;/span&gt;
&lt;span class="s1"&gt;              &amp;quot;HOST: %s:%d\r\n&amp;quot; % (SSDP_ADDR, SSDP_PORT) + \&lt;/span&gt;
&lt;span class="s1"&gt;              &amp;quot;MAN: \&amp;quot;ssdp:discover\&amp;quot;\r\n&amp;quot; + \&lt;/span&gt;
&lt;span class="s1"&gt;              &amp;quot;MX: %d\r\n&amp;quot; % (SSDP_MX, ) + \&lt;/span&gt;
&lt;span class="s1"&gt;              &amp;quot;ST: %s\r\n&amp;quot; % (SSDP_ST, ) + &amp;quot;\r\n&amp;quot;&lt;/span&gt;

&lt;span class="s1"&gt;with socket.socket(socket.AF_INET, socket.SOCK_DGRAM) as sock:&lt;/span&gt;
&lt;span class="s1"&gt;  sock.sendto(ssdpRequest.encode(), (SSDP_ADDR, SSDP_PORT))&lt;/span&gt;
&lt;span class="s1"&gt;  sock.settimeout(SSDP_MX + 1)&lt;/span&gt;
&lt;span class="s1"&gt;  while True:&lt;/span&gt;
&lt;span class="s1"&gt;    try:&lt;/span&gt;
&lt;span class="s1"&gt;      data = sock.recv(1024)&lt;/span&gt;
&lt;span class="s1"&gt;      print(data.decode()) &lt;/span&gt;
&lt;span class="s1"&gt;    except socket.timeout:&lt;/span&gt;
&lt;span class="s1"&gt;      break&lt;/span&gt;
&lt;span class="s1"&gt;  &amp;#39;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$1&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
  tr -d &lt;span class="s1"&gt;&amp;#39;\r&amp;#39;&lt;/span&gt; &lt;span class="c1"&gt;# normalize new lines \r\n =&amp;gt; \n&lt;/span&gt;
&lt;span class="o"&gt;}&lt;/span&gt;

&lt;span class="nv"&gt;URL&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;upnp-scan &lt;span class="s2"&gt;&amp;quot;uuid:3ef89534-fb8e-c38f-0000-00007940d6d3&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
awk &lt;span class="s1"&gt;&amp;#39;/Location:/ {print $2}&amp;#39;&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;

&lt;span class="nb"&gt;echo&lt;/span&gt; Divice found: &lt;span class="nv"&gt;$URL&lt;/span&gt;

&lt;span class="nv"&gt;URL_AV&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;curl -s &lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="nv"&gt;$URL&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
python3 -c &lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;
&lt;span class="s1"&gt;import sys, xml.dom.minidom&lt;/span&gt;
&lt;span class="s1"&gt;dom = xml.dom.minidom.parse(sys.stdin)&lt;/span&gt;
&lt;span class="s1"&gt;for srv in dom.getElementsByTagName(&amp;quot;service&amp;quot;):&lt;/span&gt;
&lt;span class="s1"&gt;  ids = [e.firstChild.nodeValue for e in srv.getElementsByTagName(&amp;quot;serviceId&amp;quot;)]&lt;/span&gt;
&lt;span class="s1"&gt;  if (&amp;quot;urn:upnp-org:serviceId:AVTransport&amp;quot; in ids):&lt;/span&gt;
&lt;span class="s1"&gt;    for url in srv.getElementsByTagName(&amp;quot;controlURL&amp;quot;):&lt;/span&gt;
&lt;span class="s1"&gt;      print(url.firstChild.nodeValue)&lt;/span&gt;
&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt;

&lt;span class="nv"&gt;URL_AV&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;`echo &lt;/span&gt;&lt;span class="nv"&gt;$URL&lt;/span&gt;&lt;span class="s2"&gt; | cut -d &amp;#39;/&amp;#39; -f1`//`echo &lt;/span&gt;&lt;span class="nv"&gt;$URL&lt;/span&gt;&lt;span class="s2"&gt; | cut -d &amp;#39;/&amp;#39; -f3`&lt;/span&gt;&lt;span class="nv"&gt;$URL_AV&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;

&lt;span class="nb"&gt;echo&lt;/span&gt; AVTransport found: &lt;span class="nv"&gt;$URL_AV&lt;/span&gt;

curl -vsf &lt;span class="nv"&gt;$URL_AV&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
  -XPOST &lt;span class="se"&gt;\&lt;/span&gt;
  -H &lt;span class="s1"&gt;&amp;#39;SOAPAction: &amp;quot;urn:schemas-upnp-org:service:AVTransport:1#Stop&amp;quot;&amp;#39;&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
  -H &lt;span class="s1"&gt;&amp;#39;Content-Type: text/xml; charset=&amp;quot;utf-8&amp;quot;&amp;#39;&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
  -d &lt;span class="s1"&gt;&amp;#39;&amp;lt;?xml version=&amp;quot;1.0&amp;quot;?&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;  &amp;lt;s:Envelope xmlns:s=&amp;quot;http://schemas.xmlsoap.org/soap/envelope/&amp;quot; &lt;/span&gt;
&lt;span class="s1"&gt;  s:encodingStyle=&amp;quot;http://schemas.xmlsoap.org/soap/encoding/&amp;quot;&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;lt;s:Body&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;      &amp;lt;u:Stop xmlns:u=&amp;quot;urn:schemas-upnp-org:service:AVTransport:1&amp;quot;&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;        &amp;lt;InstanceID&amp;gt;0&amp;lt;/InstanceID&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;      &amp;lt;/u:Stop&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;lt;/s:Body&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;  &amp;lt;/s:Envelope&amp;gt;&amp;#39;&lt;/span&gt;

&lt;span class="c1"&gt;# $# variable will tell you the number of input arguments the script was passed&lt;/span&gt;
&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="nv"&gt;$#&lt;/span&gt; -ne &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
  &lt;span class="c1"&gt;# play url $@&lt;/span&gt;
  curl -vsf &lt;span class="nv"&gt;$URL_AV&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
    -XPOST &lt;span class="se"&gt;\&lt;/span&gt;
    -H &lt;span class="s1"&gt;&amp;#39;SOAPAction: &amp;quot;urn:schemas-upnp-org:service:AVTransport:1#SetAVTransportURI&amp;quot;&amp;#39;&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
    -H &lt;span class="s1"&gt;&amp;#39;Content-Type: text/xml; charset=&amp;quot;utf-8&amp;quot;&amp;#39;&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
    -d &lt;span class="s2"&gt;&amp;quot;&amp;lt;?xml version=&amp;#39;1.0&amp;#39;?&amp;gt;&lt;/span&gt;
&lt;span class="s2"&gt;    &amp;lt;s:Envelope xmlns:s=&amp;#39;http://schemas.xmlsoap.org/soap/envelope/&amp;#39;&lt;/span&gt;
&lt;span class="s2"&gt;    s:encodingStyle=&amp;#39;http://schemas.xmlsoap.org/soap/encoding/&amp;#39;&amp;gt;&lt;/span&gt;
&lt;span class="s2"&gt;      &amp;lt;s:Body&amp;gt;&lt;/span&gt;
&lt;span class="s2"&gt;        &amp;lt;u:SetAVTransportURI xmlns:u=&amp;#39;urn:schemas-upnp-org:service:AVTransport:1&amp;#39;&amp;gt;&lt;/span&gt;
&lt;span class="s2"&gt;          &amp;lt;CurrentURIMetaData&amp;gt;NOT_IMPLEMENTED&amp;lt;/CurrentURIMetaData&amp;gt;&lt;/span&gt;
&lt;span class="s2"&gt;          &amp;lt;CurrentURI&amp;gt;&lt;/span&gt;&lt;span class="nv"&gt;$@&lt;/span&gt;&lt;span class="s2"&gt;&amp;lt;/CurrentURI&amp;gt;&lt;/span&gt;
&lt;span class="s2"&gt;          &amp;lt;InstanceID&amp;gt;0&amp;lt;/InstanceID&amp;gt;&lt;/span&gt;
&lt;span class="s2"&gt;        &amp;lt;/u:SetAVTransportURI&amp;gt;&lt;/span&gt;
&lt;span class="s2"&gt;      &amp;lt;/s:Body&amp;gt;&lt;/span&gt;
&lt;span class="s2"&gt;    &amp;lt;/s:Envelope&amp;gt;&amp;quot;&lt;/span&gt;

  curl -vsf &lt;span class="nv"&gt;$URL_AV&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
    -XPOST &lt;span class="se"&gt;\&lt;/span&gt;
    -H &lt;span class="s1"&gt;&amp;#39;SOAPAction: &amp;quot;urn:schemas-upnp-org:service:AVTransport:1#Play&amp;quot;&amp;#39;&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
    -H &lt;span class="s1"&gt;&amp;#39;Content-Type: text/xml; charset=&amp;quot;utf-8&amp;quot;&amp;#39;&lt;/span&gt; &lt;span class="se"&gt;\&lt;/span&gt;
    -d &lt;span class="s1"&gt;&amp;#39;&amp;lt;?xml version=&amp;quot;1.0&amp;quot;?&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;lt;s:Envelope xmlns:s=&amp;quot;http://schemas.xmlsoap.org/soap/envelope/&amp;quot;&lt;/span&gt;
&lt;span class="s1"&gt;    s:encodingStyle=&amp;quot;http://schemas.xmlsoap.org/soap/encoding/&amp;quot;&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;      &amp;lt;s:Body&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;        &amp;lt;u:Play xmlns:u=&amp;quot;urn:schemas-upnp-org:service:AVTransport:1&amp;quot;&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;          &amp;lt;Speed&amp;gt;1&amp;lt;/Speed&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;          &amp;lt;InstanceID&amp;gt;0&amp;lt;/InstanceID&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;        &amp;lt;/u:Play&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;      &amp;lt;/s:Body&amp;gt;&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;lt;/s:Envelope&amp;gt;&amp;#39;&lt;/span&gt;
&lt;span class="k"&gt;fi&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</content><category term="m2m"></category><category term="SOAP"></category></entry><entry><title>–ò—â–µ–º —Å–≤–æ–±–æ–¥–Ω—ã–µ Wi-Fi –∫–∞–Ω–∞–ª—ã —Å –ø–æ–º–æ—â—å—é GnuPlot</title><link href="http://proiot.ru/blog/posts/2016/07/17/ishchem-svobodnye-wi-fi-kanaly-s-pomoshchiu-gnuplot/" rel="alternate"></link><published>2016-07-17T00:00:00+03:00</published><updated>2016-07-17T00:00:00+03:00</updated><author><name>Oleg Mazko</name></author><id>tag:proiot.ru,2016-07-17:/blog/posts/2016/07/17/ishchem-svobodnye-wi-fi-kanaly-s-pomoshchiu-gnuplot/</id><summary type="html">&lt;p&gt;–í —ç–ø–æ—Ö—É –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –±–µ—Å–ø—Ä–æ–≤–æ–¥–Ω—ã–µ Wi-Fi –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä—ã —É–∂–µ –¥–∞–≤–Ω–æ —Å—Ç–∞–ª–∏ –Ω–µ–∑–∞–º–µ–Ω–∏–º–æ–π —á–∞—Å—Ç—å—é –Ω–∞—à–µ–≥–æ –±—ã—Ç–∏—è. Wi-Fi —Å–µ—Ç–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ 2,4 GHz –ª–∏–±–æ 5 GHz –∏ –º–æ–≥—É—Ç –≤–∑–∞–∏–º–Ω–æ –º–µ—à–∞—Ç—å —Ä–∞–±–æ—Ç–µ –¥—Ä—É–≥ –¥—Ä—É–≥–∞ –Ω–∞–ø—Ä–∏–º–µ—Ä –≤ —Å–∏—Ç—É–∞—Ü–∏–∏, –∫–æ–≥–¥–∞ —É –≤–∞—à–µ–≥–æ —Å–æ—Å–µ–¥–∞ —Ç–æ–∂–µ —Å—Ç–æ–∏—Ç —Ä–æ—É—Ç–µ—Ä –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —Ç–∞–∫–æ–π –∂–µ —á–∞—Å—Ç–æ—Ç–µ —á—Ç–æ –∏ –≤–∞—à ‚Ä¶&lt;/p&gt;</summary><content type="html">&lt;p&gt;–í —ç–ø–æ—Ö—É –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –±–µ—Å–ø—Ä–æ–≤–æ–¥–Ω—ã–µ Wi-Fi –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä—ã —É–∂–µ –¥–∞–≤–Ω–æ —Å—Ç–∞–ª–∏ –Ω–µ–∑–∞–º–µ–Ω–∏–º–æ–π —á–∞—Å—Ç—å—é –Ω–∞—à–µ–≥–æ –±—ã—Ç–∏—è. Wi-Fi —Å–µ—Ç–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –≤ –¥–∏–∞–ø–∞–∑–æ–Ω–µ 2,4 GHz –ª–∏–±–æ 5 GHz –∏ –º–æ–≥—É—Ç –≤–∑–∞–∏–º–Ω–æ –º–µ—à–∞—Ç—å —Ä–∞–±–æ—Ç–µ –¥—Ä—É–≥ –¥—Ä—É–≥–∞ –Ω–∞–ø—Ä–∏–º–µ—Ä –≤ —Å–∏—Ç—É–∞—Ü–∏–∏, –∫–æ–≥–¥–∞ —É –≤–∞—à–µ–≥–æ —Å–æ—Å–µ–¥–∞ —Ç–æ–∂–µ —Å—Ç–æ–∏—Ç —Ä–æ—É—Ç–µ—Ä –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ —Ç–∞–∫–æ–π –∂–µ —á–∞—Å—Ç–æ—Ç–µ —á—Ç–æ –∏ –≤–∞—à. –î–ª—è —Ç–∞–∫–∏—Ö —Å–ª—É—á–∞–µ–≤ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö —Ä–æ—É—Ç–µ—Ä–∞ –ø—Ä–µ–¥—É—Å–º–æ—Ç—Ä–µ–Ω–∞ —Å–µ—Ç–∫–∞ –∫–∞–Ω–∞–ª–æ–≤ 1-13 (2.412GHz-2.472GHz). –°–æ—Å–µ–¥–µ–π –º–Ω–æ–≥–æ, –≤—Å–µ–º –Ω—É–∂–µ–Ω —Ö–æ—Ä–æ—à–∏–π –∏–Ω—Ç–µ—Ä–Ω–µ—Ç. –í –¥–∞–Ω–Ω–æ–º –º–∞—Ç–µ—Ä–∏–∞–ª–µ –º—ã –Ω–∞—É—á–∏–º—Å—è —Ä–∏—Å–æ–≤–∞—Ç—å –≤–æ—Ç —Ç–∞–∫—É—é –∫—Ä–∞—Å–∏–≤—É—é –∫–∞—Ä—Ç–∏–Ω–∫—É –±–µ–∑ —Å—Ç–æ—Ä–æ–Ω–Ω–µ–≥–æ –ü–û, —Ç.–µ. –∏—Å–∫–ª—é—á–∏—Ç–µ–ª—å–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤–∞–º–∏ Linux –∏ –ø—Ä–æ–≥—Ä–∞–º–º—ã –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –≥—Ä–∞—Ñ–∏–∫–æ–≤ &lt;a href="http://www.gnuplot.info/" rel="nofollow"&gt;gnuplot&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;TL;DR&lt;/h2&gt;
&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/07/17/ishchem-svobodnye-wi-fi-kanaly-s-pomoshchiu-gnuplot/shot.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ sudo iwlist wlo1 scanning &lt;span class="p"&gt;|&lt;/span&gt; python3 -c &lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;

&lt;span class="s1"&gt;import re,sys&lt;/span&gt;

&lt;span class="s1"&gt;def tokenize(code):&lt;/span&gt;
&lt;span class="s1"&gt;    token_specification = [&lt;/span&gt;
&lt;span class="s1"&gt;        (&amp;quot;CELL&amp;quot;,  r&amp;quot;^\s+Cell \d+&amp;quot;),&lt;/span&gt;
&lt;span class="s1"&gt;        (&amp;quot;FREQ&amp;quot;,  r&amp;quot;^\s+Frequency:(\d+(\.\d*)?)&amp;quot;),&lt;/span&gt;
&lt;span class="s1"&gt;        (&amp;quot;CHNL&amp;quot;,  r&amp;quot;^\s+Channel:(\d+)&amp;quot;),&lt;/span&gt;
&lt;span class="s1"&gt;        (&amp;quot;ESSID&amp;quot;, r&amp;quot;^\s+ESSID:\&amp;quot;([- A-Za-z0-9$@^`,|%;.~()/\\{}:?[\]=+_#!]*)\&amp;quot;&amp;quot;),&lt;/span&gt;
&lt;span class="s1"&gt;        (&amp;quot;LEVEL&amp;quot;, r&amp;quot;\s+Signal level=(-\d+)&amp;quot;),&lt;/span&gt;
&lt;span class="s1"&gt;    ]&lt;/span&gt;
&lt;span class="s1"&gt;    tok_regex = &amp;quot;|&amp;quot;.join(&amp;quot;(?P&amp;lt;%s&amp;gt;%s)&amp;quot; % pair for pair in token_specification)&lt;/span&gt;

&lt;span class="s1"&gt;    for mo in re.finditer(tok_regex, code, re.M):&lt;/span&gt;
&lt;span class="s1"&gt;        typ = mo.lastgroup&lt;/span&gt;
&lt;span class="s1"&gt;        if typ == &amp;quot;CELL&amp;quot;:&lt;/span&gt;
&lt;span class="s1"&gt;            if &amp;quot;res&amp;quot; in vars() and res:&lt;/span&gt;
&lt;span class="s1"&gt;                yield res&lt;/span&gt;
&lt;span class="s1"&gt;            res = {}&lt;/span&gt;
&lt;span class="s1"&gt;        else:&lt;/span&gt;
&lt;span class="s1"&gt;            grs = [v for v in mo.groups() if v not in [mo.group(typ), None]]&lt;/span&gt;
&lt;span class="s1"&gt;            assert len(grs), &amp;quot;Forgot capture value for %s ?&amp;quot; % typ&lt;/span&gt;
&lt;span class="s1"&gt;            res[typ] = grs[0]&lt;/span&gt;
&lt;span class="s1"&gt;    if res:&lt;/span&gt;
&lt;span class="s1"&gt;        yield res&lt;/span&gt;

&lt;span class="s1"&gt;data = list(tokenize(sys.stdin.read()))&lt;/span&gt;

&lt;span class="s1"&gt;print(&lt;/span&gt;
&lt;span class="s1"&gt;&amp;quot;&amp;quot;&amp;quot;&lt;/span&gt;
&lt;span class="s1"&gt;# legend&lt;/span&gt;
&lt;span class="s1"&gt;set key top left outside horizontal&lt;/span&gt;
&lt;span class="s1"&gt;set xlabel &amp;quot;Channel&amp;quot;&lt;/span&gt;
&lt;span class="s1"&gt;set ylabel &amp;quot;Strength (dbm)&amp;quot;&lt;/span&gt;
&lt;span class="s1"&gt;# x axis step&lt;/span&gt;
&lt;span class="s1"&gt;set xtics 1&lt;/span&gt;
&lt;span class="s1"&gt;# show horizontal grid lines &lt;/span&gt;
&lt;span class="s1"&gt;set grid ytics&lt;/span&gt;
&lt;span class="s1"&gt;set xrange [-2:16]&lt;/span&gt;
&lt;span class="s1"&gt;set yrange [%(bottom)d - 0.1:%(top)d]&lt;/span&gt;
&lt;span class="s1"&gt;set term png truecolor size 1280,720&lt;/span&gt;
&lt;span class="s1"&gt;plot for [IDX=0:%(total)d-1] &amp;quot;-&amp;quot; \&lt;/span&gt;
&lt;span class="s1"&gt;    using 2:(%(bottom)d):(4):(2*abs(%(bottom)d - $1)) \&lt;/span&gt;
&lt;span class="s1"&gt;    title columnheader(1) with ellipses \&lt;/span&gt;
&lt;span class="s1"&gt;    fill transparent solid 0.5 &lt;/span&gt;
&lt;span class="s1"&gt;&amp;quot;&amp;quot;&amp;quot; &lt;/span&gt;
&lt;span class="s1"&gt;% {&lt;/span&gt;
&lt;span class="s1"&gt;    &amp;quot;total&amp;quot;: len(data), &lt;/span&gt;
&lt;span class="s1"&gt;    &amp;quot;top&amp;quot;: max([int(tok[&amp;quot;LEVEL&amp;quot;]) for tok in data]) + 1, &lt;/span&gt;
&lt;span class="s1"&gt;    &amp;quot;bottom&amp;quot;: min([int(tok[&amp;quot;LEVEL&amp;quot;]) for tok in data]) - 5, &lt;/span&gt;
&lt;span class="s1"&gt;})&lt;/span&gt;

&lt;span class="s1"&gt;for tok in data:&lt;/span&gt;
&lt;span class="s1"&gt;    print(&amp;quot;\&amp;quot;%s\&amp;quot;&amp;quot; % (tok[&amp;quot;ESSID&amp;quot;] or &amp;quot;&amp;lt;HIDDEN&amp;gt;&amp;quot;))&lt;/span&gt;
&lt;span class="s1"&gt;    print(tok[&amp;quot;LEVEL&amp;quot;], tok[&amp;quot;CHNL&amp;quot;])&lt;/span&gt;
&lt;span class="s1"&gt;    print(&amp;quot;e&amp;quot;)&lt;/span&gt;
&lt;span class="s1"&gt;    assert set((&amp;quot;FREQ&amp;quot;,&amp;quot;CHNL&amp;quot;,&amp;quot;ESSID&amp;quot;, &amp;quot;LEVEL&amp;quot;)) &amp;lt;= set(tok)&lt;/span&gt;
&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; gnuplot &amp;gt; out.png
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;–ß–∞—Å—Ç–æ –ø–æ–ª–µ–∑–Ω–æ –≤–∏–¥–µ—Ç—å –≥—Ä–∞—Ñ–∏–∫ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ &lt;code&gt;while sleep 10; do sudo iwlist wlo1 scanning | python3 wifi.plot.py | gnuplot &amp;gt; out.png; done&lt;/code&gt; –∏ –∫–∞–∫–æ–π –Ω–∏–±—É–¥—å –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–π –ø—Ä–æ—Å–º–æ—Ç—Ä—â–∏–∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Ç–∏–ø–∞ &lt;code&gt;feh  --reload 1 out.png&lt;/code&gt;&lt;/p&gt;
&lt;h2&gt;GNUPLOT&lt;/h2&gt;
&lt;p&gt;–í gnuplot –º–æ–∂–Ω–æ —Ä–∏—Å–æ–≤–∞—Ç—å –≥—Ä–∞—Ñ–∏–∫–∏ –∫–∞–∫ —Å –ø–æ–º–æ—â—å—é —Ñ—É–Ω–∫—Ü–∏–π —Ç–∞–∫ –∏ –ø–æ –∑–∞–¥–∞–Ω–Ω—ã–º —Ç–æ—á–∫–∞–º. –ù–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–π –≤–∞—Ä–∏–∞–Ω—Ç:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ gnuplot --version
gnuplot &lt;span class="m"&gt;4&lt;/span&gt;.6 patchlevel &lt;span class="m"&gt;6&lt;/span&gt;
~$ &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;
&lt;span class="s1"&gt;plot for [IDX=0:1] &amp;quot;-&amp;quot; using 1:2 title columnheader(1) with lines&lt;/span&gt;
&lt;span class="s1"&gt;hello&lt;/span&gt;
&lt;span class="s1"&gt;1 1&lt;/span&gt;
&lt;span class="s1"&gt;3 3&lt;/span&gt;
&lt;span class="s1"&gt;e&lt;/span&gt;
&lt;span class="s1"&gt;world&lt;/span&gt;
&lt;span class="s1"&gt;1 3&lt;/span&gt;
&lt;span class="s1"&gt;3 1&lt;/span&gt;
&lt;span class="s1"&gt;e&lt;/span&gt;
&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; gnuplot -p
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/07/17/ishchem-svobodnye-wi-fi-kanaly-s-pomoshchiu-gnuplot/hello.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;
&lt;span class="s1"&gt;set term png truecolor size 1280,480&lt;/span&gt;
&lt;span class="s1"&gt;set xrange [0:6]&lt;/span&gt;
&lt;span class="s1"&gt;plot for [IDX=0:3] &amp;quot;-&amp;quot; using 2:1 title columnheader(1) with points pointsize 3&lt;/span&gt;
&lt;span class="s1"&gt;&amp;quot;Anna&amp;quot;&lt;/span&gt;
&lt;span class="s1"&gt;-93 1&lt;/span&gt;
&lt;span class="s1"&gt;e&lt;/span&gt;
&lt;span class="s1"&gt;&amp;quot;Erika&amp;quot;&lt;/span&gt;
&lt;span class="s1"&gt;-73 1&lt;/span&gt;
&lt;span class="s1"&gt;e&lt;/span&gt;
&lt;span class="s1"&gt;&amp;quot;Alina&amp;quot;&lt;/span&gt;
&lt;span class="s1"&gt;-84 1&lt;/span&gt;
&lt;span class="s1"&gt;e&lt;/span&gt;
&lt;span class="s1"&gt;&amp;quot;Nast&amp;quot;&lt;/span&gt;
&lt;span class="s1"&gt;-93 5&lt;/span&gt;
&lt;span class="s1"&gt;e&lt;/span&gt;
&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; gnuplot &amp;gt; wifi.points.png
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/07/17/ishchem-svobodnye-wi-fi-kanaly-s-pomoshchiu-gnuplot/wifi.points.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;~$ &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;
&lt;span class="s1"&gt;set term png truecolor size 1280,480&lt;/span&gt;
&lt;span class="s1"&gt;set xlabel &amp;quot;Channel&amp;quot;&lt;/span&gt;
&lt;span class="s1"&gt;set ylabel &amp;quot;Strength (dbm)&amp;quot;&lt;/span&gt;
&lt;span class="s1"&gt;set xrange [0:6]&lt;/span&gt;
&lt;span class="s1"&gt;set yrange [-110:-60]&lt;/span&gt;
&lt;span class="s1"&gt;set grid ytics&lt;/span&gt;
&lt;span class="s1"&gt;plot for [IDX=0:3] &amp;quot;-&amp;quot; using 2:1:(2):(abs($1/3)) title columnheader(1) with ellipses&lt;/span&gt;
&lt;span class="s1"&gt;&amp;quot;Anna&amp;quot;&lt;/span&gt;
&lt;span class="s1"&gt;-93 1&lt;/span&gt;
&lt;span class="s1"&gt;e&lt;/span&gt;
&lt;span class="s1"&gt;&amp;quot;Erika&amp;quot;&lt;/span&gt;
&lt;span class="s1"&gt;-73 1&lt;/span&gt;
&lt;span class="s1"&gt;e&lt;/span&gt;
&lt;span class="s1"&gt;&amp;quot;Alina&amp;quot;&lt;/span&gt;
&lt;span class="s1"&gt;-84 1&lt;/span&gt;
&lt;span class="s1"&gt;e&lt;/span&gt;
&lt;span class="s1"&gt;&amp;quot;Nast&amp;quot;&lt;/span&gt;
&lt;span class="s1"&gt;-93 5&lt;/span&gt;
&lt;span class="s1"&gt;e&lt;/span&gt;
&lt;span class="s1"&gt;&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; gnuplot &amp;gt; wifi.ellipses.png
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;img alt="screenshot" src="http://proiot.ru/blog/posts/2016/07/17/ishchem-svobodnye-wi-fi-kanaly-s-pomoshchiu-gnuplot/wifi.ellipses.png" style="width:100%; border:1px solid #ddd;"&gt;&lt;/p&gt;
&lt;p&gt;–ú—ã –≤–≤–µ–ª–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –≤—ã—Å–æ—Ç—ã —ç–ª–ª–∏–ø—Å–∞ –æ—Ç —É—Ä–æ–≤–Ω—è —Å–∏–≥–Ω–∞–ª–∞. –û—Å—Ç–∞–ª–æ—Å—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ –µ—ë –ø–µ—Ä–µ—Å—á–∏—Ç–∞—Ç—å, –∑–∞–∫—Ä–∞—Å–∏—Ç—å –ø–æ–ª—É–ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å—é –∏ –æ–ø—É—Å—Ç–∏—Ç—å –≤–Ω–∏–∑ –Ω–∞ –ø–æ–ª–æ–≤–∏–Ω—É. –¢–∞–∫–∂–µ gnuplot –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Ç–æ—á–∫–∏, –Ω–∞—Ö–æ–¥—è—â–∏–µ—Å—è –∑–∞ –ø—Ä–µ–¥–∞–ª–∞–º–∏ xrange, yrange - –ø–æ—ç—Ç–æ–º—É –∫ yrange –¥–ª—è —Å—Ç—Ä–∞—Ö–æ–≤–∫–∏ –ø—Ä–∏–±–∞–≤–ª–µ–Ω–æ ~0.1&lt;/p&gt;</content><category term="GnuPlot"></category><category term="Wi-Fi"></category></entry></feed>